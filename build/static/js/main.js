/*! For license information please see main.deb03ebf.js.LICENSE.txt */
(()=>{var e={944:(e,t,i)=>{"use strict";i.d(t,{w:()=>use});var n={};i.r(n),i.d(n,{ACESFilmicToneMapping:()=>ae,AddEquation:()=>E,AddOperation:()=>ie,AdditiveAnimationBlendMode:()=>Qt,AdditiveBlending:()=>w,AgXToneMapping:()=>ce,AlphaFormat:()=>Ge,AlwaysCompare:()=>Pi,AlwaysDepth:()=>q,AlwaysStencilFunc:()=>Ci,AmbientLight:()=>Sp,AnimationAction:()=>ff,AnimationClip:()=>Wd,AnimationLoader:()=>np,AnimationMixer:()=>mf,AnimationObjectGroup:()=>pf,AnimationUtils:()=>Ld,ArcCurve:()=>Ju,ArrayCamera:()=>Jl,ArrowHelper:()=>cg,AttachedBindMode:()=>he,Audio:()=>Kp,AudioAnalyser:()=>rf,AudioContext:()=>Np,AudioListener:()=>Yp,AudioLoader:()=>zp,AxesHelper:()=>ug,BackSide:()=>v,BasicDepthPacking:()=>Xt,BasicShadowMap:()=>p,BatchedMesh:()=>xu,Bone:()=>Qc,BooleanKeyframeTrack:()=>Hd,Box2:()=>kf,Box3:()=>Hn,Box3Helper:()=>rg,BoxGeometry:()=>Yo,BoxHelper:()=>ng,BufferAttribute:()=>yo,BufferGeometry:()=>Oo,BufferGeometryLoader:()=>Bp,ByteType:()=>Pe,Cache:()=>Yd,Camera:()=>is,CameraHelper:()=>eg,CanvasTexture:()=>Yu,CapsuleGeometry:()=>bh,CatmullRomCurve3:()=>oh,CineonToneMapping:()=>se,CircleGeometry:()=>Ah,ClampToEdgeWrapping:()=>be,Clock:()=>Gp,Color:()=>so,ColorKeyframeTrack:()=>Vd,ColorManagement:()=>bn,CompressedArrayTexture:()=>Wu,CompressedCubeTexture:()=>Xu,CompressedTexture:()=>qu,CompressedTextureLoader:()=>rp,ConeGeometry:()=>xh,ConstantAlphaFactor:()=>G,ConstantColorFactor:()=>V,Controls:()=>dg,CubeCamera:()=>ls,CubeReflectionMapping:()=>fe,CubeRefractionMapping:()=>ge,CubeTexture:()=>cs,CubeTextureLoader:()=>sp,CubeUVReflectionMapping:()=>ve,CubicBezierCurve:()=>ch,CubicBezierCurve3:()=>uh,CubicInterpolant:()=>Fd,CullFaceBack:()=>u,CullFaceFront:()=>h,CullFaceFrontBack:()=>d,CullFaceNone:()=>c,Curve:()=>Ku,CurvePath:()=>_h,CustomBlending:()=>C,CustomToneMapping:()=>le,CylinderGeometry:()=>wh,Cylindrical:()=>Tf,Data3DTexture:()=>Ln,DataArrayTexture:()=>Pn,DataTexture:()=>jc,DataTextureLoader:()=>ap,DataUtils:()=>mo,DecrementStencilOp:()=>fi,DecrementWrapStencilOp:()=>mi,DefaultLoadingManager:()=>Zd,DepthFormat:()=>Xe,DepthStencilFormat:()=>Ye,DepthTexture:()=>ra,DetachedBindMode:()=>de,DirectionalLight:()=>xp,DirectionalLightHelper:()=>Kf,DiscreteInterpolant:()=>zd,DisplayP3ColorSpace:()=>ri,DodecahedronGeometry:()=>Ch,DoubleSide:()=>y,DstAlphaFactor:()=>F,DstColorFactor:()=>z,DynamicCopyUsage:()=>Hi,DynamicDrawUsage:()=>Li,DynamicReadUsage:()=>Ni,EdgesGeometry:()=>kh,EllipseCurve:()=>Zu,EqualCompare:()=>Ii,EqualDepth:()=>Y,EqualStencilFunc:()=>bi,EquirectangularReflectionMapping:()=>me,EquirectangularRefractionMapping:()=>_e,Euler:()=>Sr,EventDispatcher:()=>qi,ExtrudeGeometry:()=>sd,FileLoader:()=>ip,Float16BufferAttribute:()=>To,Float32BufferAttribute:()=>Io,FloatType:()=>Ne,Fog:()=>hc,FogExp2:()=>uc,FramebufferTexture:()=>ju,FrontSide:()=>_,Frustum:()=>_s,GLBufferAttribute:()=>Af,GLSL1:()=>$i,GLSL3:()=>Gi,GreaterCompare:()=>ki,GreaterDepth:()=>Z,GreaterEqualCompare:()=>Ri,GreaterEqualDepth:()=>K,GreaterEqualStencilFunc:()=>Si,GreaterStencilFunc:()=>wi,GridHelper:()=>jf,Group:()=>ec,HalfFloatType:()=>ze,HemisphereLight:()=>up,HemisphereLightHelper:()=>Qf,IcosahedronGeometry:()=>ld,ImageBitmapLoader:()=>Op,ImageLoader:()=>op,ImageUtils:()=>Sn,IncrementStencilOp:()=>pi,IncrementWrapStencilOp:()=>gi,InstancedBufferAttribute:()=>Yc,InstancedBufferGeometry:()=>kp,InstancedInterleavedBuffer:()=>bf,InstancedMesh:()=>ru,Int16BufferAttribute:()=>xo,Int32BufferAttribute:()=>Co,Int8BufferAttribute:()=>bo,IntType:()=>Oe,InterleavedBuffer:()=>pc,InterleavedBufferAttribute:()=>gc,Interpolant:()=>Od,InterpolateDiscrete:()=>Nt,InterpolateLinear:()=>zt,InterpolateSmooth:()=>Ut,InvertStencilOp:()=>_i,KeepStencilOp:()=>hi,KeyframeTrack:()=>Ud,LOD:()=>Dc,LatheGeometry:()=>yh,Layers:()=>Cr,LessCompare:()=>Ti,LessDepth:()=>W,LessEqualCompare:()=>Mi,LessEqualDepth:()=>X,LessEqualStencilFunc:()=>Ai,LessStencilFunc:()=>yi,Light:()=>cp,LightProbe:()=>Tp,Line:()=>Ru,Line3:()=>Pf,LineBasicMaterial:()=>Su,LineCurve:()=>hh,LineCurve3:()=>dh,LineDashedMaterial:()=>Md,LineLoop:()=>Fu,LineSegments:()=>Ou,LinearDisplayP3ColorSpace:()=>oi,LinearFilter:()=>Te,LinearInterpolant:()=>Nd,LinearMipMapLinearFilter:()=>Be,LinearMipMapNearestFilter:()=>Me,LinearMipmapLinearFilter:()=>ke,LinearMipmapNearestFilter:()=>Ie,LinearSRGBColorSpace:()=>ni,LinearToneMapping:()=>re,LinearTransfer:()=>si,Loader:()=>Jd,LoaderUtils:()=>Mp,LoadingManager:()=>Kd,LoopOnce:()=>Lt,LoopPingPong:()=>Ft,LoopRepeat:()=>Ot,LuminanceAlphaFormat:()=>We,LuminanceFormat:()=>qe,MOUSE:()=>a,Material:()=>co,MaterialLoader:()=>Ip,MathUtils:()=>on,Matrix2:()=>If,Matrix3:()=>an,Matrix4:()=>fr,MaxEquation:()=>k,Mesh:()=>Wo,MeshBasicMaterial:()=>uo,MeshDepthMaterial:()=>Gl,MeshDistanceMaterial:()=>Ql,MeshLambertMaterial:()=>Td,MeshMatcapMaterial:()=>Id,MeshNormalMaterial:()=>Ed,MeshPhongMaterial:()=>Sd,MeshPhysicalMaterial:()=>xd,MeshStandardMaterial:()=>wd,MeshToonMaterial:()=>Cd,MinEquation:()=>M,MirroredRepeatWrapping:()=>Ae,MixOperation:()=>te,MultiplyBlending:()=>S,MultiplyOperation:()=>ee,NearestFilter:()=>we,NearestMipMapLinearFilter:()=>Ee,NearestMipMapNearestFilter:()=>Se,NearestMipmapLinearFilter:()=>Ce,NearestMipmapNearestFilter:()=>xe,NeutralToneMapping:()=>ue,NeverCompare:()=>Ei,NeverDepth:()=>j,NeverStencilFunc:()=>vi,NoBlending:()=>b,NoColorSpace:()=>ti,NoToneMapping:()=>ne,NormalAnimationBlendMode:()=>Gt,NormalBlending:()=>A,NotEqualCompare:()=>Bi,NotEqualDepth:()=>J,NotEqualStencilFunc:()=>xi,NumberKeyframeTrack:()=>$d,Object3D:()=>Hr,ObjectLoader:()=>Rp,ObjectSpaceNormalMap:()=>ei,OctahedronGeometry:()=>cd,OneFactor:()=>R,OneMinusConstantAlphaFactor:()=>Q,OneMinusConstantColorFactor:()=>$,OneMinusDstAlphaFactor:()=>N,OneMinusDstColorFactor:()=>U,OneMinusSrcAlphaFactor:()=>O,OneMinusSrcColorFactor:()=>D,OrthographicCamera:()=>Ps,P3Primaries:()=>ci,PCFShadowMap:()=>f,PCFSoftShadowMap:()=>g,PMREMGenerator:()=>Qs,Path:()=>vh,PerspectiveCamera:()=>ss,Plane:()=>fs,PlaneGeometry:()=>bs,PlaneHelper:()=>og,PointLight:()=>Ap,PointLightHelper:()=>Hf,Points:()=>$u,PointsMaterial:()=>Nu,PolarGridHelper:()=>qf,PolyhedronGeometry:()=>Sh,PositionalAudio:()=>nf,PropertyBinding:()=>df,PropertyMixer:()=>of,QuadraticBezierCurve:()=>ph,QuadraticBezierCurve3:()=>fh,Quaternion:()=>Fn,QuaternionKeyframeTrack:()=>Qd,QuaternionLinearInterpolant:()=>Gd,RED_GREEN_RGTC2_Format:()=>Pt,RED_RGTC1_Format:()=>Bt,REVISION:()=>s,RGBADepthPacking:()=>Yt,RGBAFormat:()=>je,RGBAIntegerFormat:()=>it,RGBA_ASTC_10x10_Format:()=>Ct,RGBA_ASTC_10x5_Format:()=>wt,RGBA_ASTC_10x6_Format:()=>xt,RGBA_ASTC_10x8_Format:()=>St,RGBA_ASTC_12x10_Format:()=>Et,RGBA_ASTC_12x12_Format:()=>Tt,RGBA_ASTC_4x4_Format:()=>ft,RGBA_ASTC_5x4_Format:()=>gt,RGBA_ASTC_5x5_Format:()=>mt,RGBA_ASTC_6x5_Format:()=>_t,RGBA_ASTC_6x6_Format:()=>vt,RGBA_ASTC_8x5_Format:()=>yt,RGBA_ASTC_8x6_Format:()=>bt,RGBA_ASTC_8x8_Format:()=>At,RGBA_BPTC_Format:()=>It,RGBA_ETC2_EAC_Format:()=>pt,RGBA_PVRTC_2BPPV1_Format:()=>ut,RGBA_PVRTC_4BPPV1_Format:()=>ct,RGBA_S3TC_DXT1_Format:()=>rt,RGBA_S3TC_DXT3_Format:()=>ot,RGBA_S3TC_DXT5_Format:()=>st,RGBDepthPacking:()=>Kt,RGBFormat:()=>Qe,RGBIntegerFormat:()=>tt,RGB_BPTC_SIGNED_Format:()=>Mt,RGB_BPTC_UNSIGNED_Format:()=>kt,RGB_ETC1_Format:()=>ht,RGB_ETC2_Format:()=>dt,RGB_PVRTC_2BPPV1_Format:()=>lt,RGB_PVRTC_4BPPV1_Format:()=>at,RGB_S3TC_DXT1_Format:()=>nt,RGDepthPacking:()=>Zt,RGFormat:()=>Je,RGIntegerFormat:()=>et,RawShaderMaterial:()=>Ad,Ray:()=>pr,Raycaster:()=>xf,Rec709Primaries:()=>li,RectAreaLight:()=>Cp,RedFormat:()=>Ke,RedIntegerFormat:()=>Ze,ReinhardToneMapping:()=>oe,RenderTarget:()=>Bn,RepeatWrapping:()=>ye,ReplaceStencilOp:()=>di,ReverseSubtractEquation:()=>I,RingGeometry:()=>ud,SIGNED_RED_GREEN_RGTC2_Format:()=>Dt,SIGNED_RED_RGTC1_Format:()=>Rt,SRGBColorSpace:()=>ii,SRGBTransfer:()=>ai,Scene:()=>dc,ShaderChunk:()=>As,ShaderLib:()=>xs,ShaderMaterial:()=>ts,ShadowMaterial:()=>bd,Shape:()=>Bh,ShapeGeometry:()=>hd,ShapePath:()=>hg,ShapeUtils:()=>nd,ShortType:()=>De,Skeleton:()=>Xc,SkeletonHelper:()=>zf,SkinnedMesh:()=>Gc,Source:()=>En,Sphere:()=>or,SphereGeometry:()=>dd,Spherical:()=>Ef,SphericalHarmonics3:()=>Ep,SplineCurve:()=>gh,SpotLight:()=>mp,SpotLightHelper:()=>Lf,Sprite:()=>kc,SpriteMaterial:()=>mc,SrcAlphaFactor:()=>L,SrcAlphaSaturateFactor:()=>H,SrcColorFactor:()=>P,StaticCopyUsage:()=>Ui,StaticDrawUsage:()=>Di,StaticReadUsage:()=>Fi,StereoCamera:()=>$p,StreamCopyUsage:()=>Vi,StreamDrawUsage:()=>Oi,StreamReadUsage:()=>zi,StringKeyframeTrack:()=>jd,SubtractEquation:()=>T,SubtractiveBlending:()=>x,TOUCH:()=>l,TangentSpaceNormalMap:()=>Jt,TetrahedronGeometry:()=>pd,Texture:()=>Mn,TextureLoader:()=>lp,TextureUtils:()=>Yl,TorusGeometry:()=>fd,TorusKnotGeometry:()=>gd,Triangle:()=>to,TriangleFanDrawMode:()=>Wt,TriangleStripDrawMode:()=>qt,TrianglesDrawMode:()=>jt,TubeGeometry:()=>md,UVMapping:()=>pe,Uint16BufferAttribute:()=>So,Uint32BufferAttribute:()=>Eo,Uint8BufferAttribute:()=>Ao,Uint8ClampedBufferAttribute:()=>wo,Uniform:()=>_f,UniformsGroup:()=>yf,UniformsLib:()=>ws,UniformsUtils:()=>es,UnsignedByteType:()=>Re,UnsignedInt248Type:()=>Ve,UnsignedInt5999Type:()=>$e,UnsignedIntType:()=>Fe,UnsignedShort4444Type:()=>Ue,UnsignedShort5551Type:()=>He,UnsignedShortType:()=>Le,VSMShadowMap:()=>m,Vector2:()=>sn,Vector3:()=>Nn,Vector4:()=>kn,VectorKeyframeTrack:()=>qd,VideoTexture:()=>Qu,WebGL3DRenderTarget:()=>On,WebGLArrayRenderTarget:()=>Dn,WebGLCoordinateSystem:()=>Qi,WebGLCubeRenderTarget:()=>us,WebGLMultipleRenderTargets:()=>pg,WebGLRenderTarget:()=>Rn,WebGLRenderer:()=>cc,WebGLUtils:()=>Zl,WebGPUCoordinateSystem:()=>ji,WireframeGeometry:()=>_d,WrapAroundEnding:()=>$t,ZeroCurvatureEnding:()=>Ht,ZeroFactor:()=>B,ZeroSlopeEnding:()=>Vt,ZeroStencilOp:()=>ui,createCanvasElement:()=>pn});var r=i(43),o=i.t(r,2);const s="169",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},l={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},c=0,u=1,h=2,d=3,p=0,f=1,g=2,m=3,_=0,v=1,y=2,b=0,A=1,w=2,x=3,S=4,C=5,E=100,T=101,I=102,M=103,k=104,B=200,R=201,P=202,D=203,L=204,O=205,F=206,N=207,z=208,U=209,H=210,V=211,$=212,G=213,Q=214,j=0,q=1,W=2,X=3,Y=4,K=5,Z=6,J=7,ee=0,te=1,ie=2,ne=0,re=1,oe=2,se=3,ae=4,le=5,ce=6,ue=7,he="attached",de="detached",pe=300,fe=301,ge=302,me=303,_e=304,ve=306,ye=1e3,be=1001,Ae=1002,we=1003,xe=1004,Se=1004,Ce=1005,Ee=1005,Te=1006,Ie=1007,Me=1007,ke=1008,Be=1008,Re=1009,Pe=1010,De=1011,Le=1012,Oe=1013,Fe=1014,Ne=1015,ze=1016,Ue=1017,He=1018,Ve=1020,$e=35902,Ge=1021,Qe=1022,je=1023,qe=1024,We=1025,Xe=1026,Ye=1027,Ke=1028,Ze=1029,Je=1030,et=1031,tt=1032,it=1033,nt=33776,rt=33777,ot=33778,st=33779,at=35840,lt=35841,ct=35842,ut=35843,ht=36196,dt=37492,pt=37496,ft=37808,gt=37809,mt=37810,_t=37811,vt=37812,yt=37813,bt=37814,At=37815,wt=37816,xt=37817,St=37818,Ct=37819,Et=37820,Tt=37821,It=36492,Mt=36494,kt=36495,Bt=36283,Rt=36284,Pt=36285,Dt=36286,Lt=2200,Ot=2201,Ft=2202,Nt=2300,zt=2301,Ut=2302,Ht=2400,Vt=2401,$t=2402,Gt=2500,Qt=2501,jt=0,qt=1,Wt=2,Xt=3200,Yt=3201,Kt=3202,Zt=3203,Jt=0,ei=1,ti="",ii="srgb",ni="srgb-linear",ri="display-p3",oi="display-p3-linear",si="linear",ai="srgb",li="rec709",ci="p3",ui=0,hi=7680,di=7681,pi=7682,fi=7683,gi=34055,mi=34056,_i=5386,vi=512,yi=513,bi=514,Ai=515,wi=516,xi=517,Si=518,Ci=519,Ei=512,Ti=513,Ii=514,Mi=515,ki=516,Bi=517,Ri=518,Pi=519,Di=35044,Li=35048,Oi=35040,Fi=35045,Ni=35049,zi=35041,Ui=35046,Hi=35050,Vi=35042,$i="100",Gi="300 es",Qi=2e3,ji=2001;class qi{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const Wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Xi=1234567;const Yi=Math.PI/180,Ki=180/Math.PI;function Zi(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Wi[255&e]+Wi[e>>8&255]+Wi[e>>16&255]+Wi[e>>24&255]+"-"+Wi[255&t]+Wi[t>>8&255]+"-"+Wi[t>>16&15|64]+Wi[t>>24&255]+"-"+Wi[63&i|128]+Wi[i>>8&255]+"-"+Wi[i>>16&255]+Wi[i>>24&255]+Wi[255&n]+Wi[n>>8&255]+Wi[n>>16&255]+Wi[n>>24&255]).toLowerCase()}function Ji(e,t,i){return Math.max(t,Math.min(i,e))}function en(e,t){return(e%t+t)%t}function tn(e,t,i){return(1-i)*e+i*t}function nn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function rn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const on={DEG2RAD:Yi,RAD2DEG:Ki,generateUUID:Zi,clamp:Ji,euclideanModulo:en,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:tn,damp:function(e,t,i,n){return tn(e,t,1-Math.exp(-i*n))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(en(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Xi=e);let t=Xi+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Yi},radToDeg:function(e){return e*Ki},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,i,n,r){const o=Math.cos,s=Math.sin,a=o(i/2),l=s(i/2),c=o((t+n)/2),u=s((t+n)/2),h=o((t-n)/2),d=s((t-n)/2),p=o((n-t)/2),f=s((n-t)/2);switch(r){case"XYX":e.set(a*u,l*h,l*d,a*c);break;case"YZY":e.set(l*d,a*u,l*h,a*c);break;case"ZXZ":e.set(l*h,l*d,a*u,a*c);break;case"XZX":e.set(a*u,l*f,l*p,a*c);break;case"YXY":e.set(l*p,a*u,l*f,a*c);break;case"ZYZ":e.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:rn,denormalize:nn};class sn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;sn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ji(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*n+e.x,this.y=r*n+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class an{constructor(e,t,i,n,r,o,s,a,l){an.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,s,a,l)}set(e,t,i,n,r,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=a,c[6]=i,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],p=i[8],f=n[0],g=n[3],m=n[6],_=n[1],v=n[4],y=n[7],b=n[2],A=n[5],w=n[8];return r[0]=o*f+s*_+a*b,r[3]=o*g+s*v+a*A,r[6]=o*m+s*y+a*w,r[1]=l*f+c*_+u*b,r[4]=l*g+c*v+u*A,r[7]=l*m+c*y+u*w,r[2]=h*f+d*_+p*b,r[5]=h*g+d*v+p*A,r[8]=h*m+d*y+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-i*r*c+i*s*a+n*r*l-n*o*a}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,h=s*a-c*r,d=l*r-o*a,p=t*u+i*h+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(n*l-c*i)*f,e[2]=(s*i-n*o)*f,e[3]=h*f,e[4]=(c*t-n*a)*f,e[5]=(n*r-s*t)*f,e[6]=d*f,e[7]=(i*a-l*t)*f,e[8]=(o*t-i*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,o,s){const a=Math.cos(r),l=Math.sin(r);return this.set(i*a,i*l,-i*(a*o+l*s)+o+e,-n*l,n*a,-n*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(ln.makeScale(e,t)),this}rotate(e){return this.premultiply(ln.makeRotation(-e)),this}translate(e,t){return this.premultiply(ln.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const ln=new an;function cn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const un={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function hn(e,t){return new un[e](t)}function dn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function pn(){const e=dn("canvas");return e.style.display="block",e}const fn={};function gn(e){e in fn||(fn[e]=!0,console.warn(e))}const mn=(new an).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),_n=(new an).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),vn={[ni]:{transfer:si,primaries:li,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e,fromReference:e=>e},[ii]:{transfer:ai,primaries:li,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[oi]:{transfer:si,primaries:ci,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.applyMatrix3(_n),fromReference:e=>e.applyMatrix3(mn)},[ri]:{transfer:ai,primaries:ci,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.convertSRGBToLinear().applyMatrix3(_n),fromReference:e=>e.applyMatrix3(mn).convertLinearToSRGB()}},yn=new Set([ni,oi]),bn={enabled:!0,_workingColorSpace:ni,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!yn.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;const n=vn[t].toReference;return(0,vn[i].fromReference)(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return vn[e].primaries},getTransfer:function(e){return e===ti?si:vn[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._workingColorSpace;return e.fromArray(vn[t].luminanceCoefficients)}};function An(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function wn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let xn;class Sn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xn&&(xn=dn("canvas")),xn.width=e.width,xn.height=e.height;const i=xn.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=xn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=dn("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*An(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*An(t[e]/255)):t[e]=An(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Cn=0;class En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Cn++}),this.uuid=Zi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(Tn(n[t].image)):e.push(Tn(n[t]))}else e=Tn(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function Tn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Sn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let In=0;class Mn extends qi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mn.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Te,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ke,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:je,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Re,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Mn.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ti;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:In++}),this.uuid=Zi(),this.name="",this.source=new En(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new sn(0,0),this.repeat=new sn(1,1),this.center=new sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new an,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ye:e.x=e.x-Math.floor(e.x);break;case be:e.x=e.x<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ye:e.y=e.y-Math.floor(e.y);break;case be:e.y=e.y<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}Mn.DEFAULT_IMAGE=null,Mn.DEFAULT_MAPPING=pe,Mn.DEFAULT_ANISOTROPY=1;class kn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;kn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*n+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],g=a[6],m=a[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-g)<o){if(Math.abs(c+h)<s&&Math.abs(u+f)<s&&Math.abs(p+g)<s&&Math.abs(l+d+m-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,_=(m+1)/2,v=(c+h)/4,y=(u+f)/4,b=(p+g)/4;return e>a&&e>_?e<o?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=v/i,r=y/i):a>_?a<o?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(a),i=v/n,r=b/n):_<o?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(_),i=y/r,n=b/r),this.set(i,n,r,t),this}let _=Math.sqrt((g-p)*(g-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(u-f)/_,this.z=(h-c)/_,this.w=Math.acos((l+d+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Bn extends qi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new kn(0,0,e,t),this.scissorTest=!1,this.viewport=new kn(0,0,e,t);const n={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Te,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Mn(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let s=0;s<o;s++)this.textures[s]=r.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.textures.length;n<r;n++)this.textures[n].image.width=e,this.textures[n].image.height=t,this.textures[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,n=e.textures.length;i<n;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new En(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rn extends Bn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Pn extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=we,this.minFilter=we,this.wrapR=be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Dn extends Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Pn(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ln extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=we,this.minFilter=we,this.wrapR=be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class On extends Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Ln(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Fn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,o,s){let a=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-s;const t=a*h+l*d+c*p+u*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*i);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*i;if(a=a*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,o){const s=i[n],a=i[n+1],l=i[n+2],c=i[n+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=s*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-a*u,e[t+3]=c*p-s*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e._x,n=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(i/2),c=s(n/2),u=s(r/2),h=a(i/2),d=a(n/2),p=a(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=i+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(r-l)*e,this._z=(o-n)*e}else if(i>s&&i>u){const e=2*Math.sqrt(1+i-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-i-u);this._w=(r-l)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-i-s);this._w=(o-n)/e,this._x=(r+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ji(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=i*c+o*s+n*l-r*a,this._y=n*c+o*a+r*s-i*l,this._z=r*c+o*l+i*a-n*s,this._w=o*c-i*s-n*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,o=this._w;let s=o*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=i*u+this._x*h,this._y=n*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Nn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Nn.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Un.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Un.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*n-s*i),c=2*(s*t-r*n),u=2*(r*i-o*t);return this.x=t+a*l+o*u-s*c,this.y=i+a*c+s*l-r*u,this.z=n+a*u+r*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return zn.copy(this).projectOnVector(e),this.sub(zn)}reflect(e){return this.sub(zn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ji(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const zn=new Nn,Un=new Fn;class Hn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint($n.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint($n.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$n.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const n=i.getAttribute("position");if(!0===t&&void 0!==n&&!0!==e.isInstancedMesh)for(let t=0,i=n.count;t<i;t++)!0===e.isMesh?e.getVertexPosition(t,$n):$n.fromBufferAttribute(n,t),$n.applyMatrix4(e.matrixWorld),this.expandByPoint($n);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Gn.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),Gn.copy(i.boundingBox)),Gn.applyMatrix4(e.matrixWorld),this.union(Gn)}const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,$n),$n.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Kn),Zn.subVectors(this.max,Kn),Qn.subVectors(e.a,Kn),jn.subVectors(e.b,Kn),qn.subVectors(e.c,Kn),Wn.subVectors(jn,Qn),Xn.subVectors(qn,jn),Yn.subVectors(Qn,qn);let t=[0,-Wn.z,Wn.y,0,-Xn.z,Xn.y,0,-Yn.z,Yn.y,Wn.z,0,-Wn.x,Xn.z,0,-Xn.x,Yn.z,0,-Yn.x,-Wn.y,Wn.x,0,-Xn.y,Xn.x,0,-Yn.y,Yn.x,0];return!!tr(t,Qn,jn,qn,Zn)&&(t=[1,0,0,0,1,0,0,0,1],!!tr(t,Qn,jn,qn,Zn)&&(Jn.crossVectors(Wn,Xn),t=[Jn.x,Jn.y,Jn.z],tr(t,Qn,jn,qn,Zn)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$n).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize($n).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Vn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vn=[new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn],$n=new Nn,Gn=new Hn,Qn=new Nn,jn=new Nn,qn=new Nn,Wn=new Nn,Xn=new Nn,Yn=new Nn,Kn=new Nn,Zn=new Nn,Jn=new Nn,er=new Nn;function tr(e,t,i,n,r){for(let o=0,s=e.length-3;o<=s;o+=3){er.fromArray(e,o);const s=r.x*Math.abs(er.x)+r.y*Math.abs(er.y)+r.z*Math.abs(er.z),a=t.dot(er),l=i.dot(er),c=n.dot(er);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const ir=new Hn,nr=new Nn,rr=new Nn;class or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):ir.setFromPoints(e).getCenter(i);let n=0;for(let r=0,o=e.length;r<o;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nr.subVectors(e,this.center);const t=nr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(nr,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(rr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nr.copy(e.center).add(rr)),this.expandByPoint(nr.copy(e.center).sub(rr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sr=new Nn,ar=new Nn,lr=new Nn,cr=new Nn,ur=new Nn,hr=new Nn,dr=new Nn;class pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=sr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(sr.copy(this.origin).addScaledVector(this.direction,t),sr.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){ar.copy(e).add(t).multiplyScalar(.5),lr.copy(t).sub(e).normalize(),cr.copy(this.origin).sub(ar);const r=.5*e.distanceTo(t),o=-this.direction.dot(lr),s=cr.dot(this.direction),a=-cr.dot(lr),l=cr.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*a-s,h=o*s-a,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-o*r+s)),h=u>0?-r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-a),r),d=h*(h+2*a)+l):(u=Math.max(0,-(o*r+s)),h=u>0?r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,u),n&&n.copy(ar).addScaledVector(lr,h),d}intersectSphere(e,t){sr.subVectors(e.center,this.origin);const i=sr.dot(this.direction),n=sr.dot(sr)-i*i,r=e.radius*e.radius;if(n>r)return null;const o=Math.sqrt(r-n),s=i-o,a=i+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||r>n?null:((r>i||isNaN(i))&&(i=r),(o<n||isNaN(n))&&(n=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),i>a||s>n?null:((s>i||i!==i)&&(i=s),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,sr)}intersectTriangle(e,t,i,n,r){ur.subVectors(t,e),hr.subVectors(i,e),dr.crossVectors(ur,hr);let o,s=this.direction.dot(dr);if(s>0){if(n)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}cr.subVectors(this.origin,e);const a=o*this.direction.dot(hr.crossVectors(cr,hr));if(a<0)return null;const l=o*this.direction.dot(ur.cross(cr));if(l<0)return null;if(a+l>s)return null;const c=-o*cr.dot(dr);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class fr{constructor(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g){fr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g)}set(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=n,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=l,m[6]=c,m[10]=u,m[14]=h,m[3]=d,m[7]=p,m[11]=f,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fr).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/gr.setFromMatrixColumn(e,0).length(),r=1/gr.setFromMatrixColumn(e,1).length(),o=1/gr.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,i=o*u,n=s*c,r=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=n+i*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,i=a*u,n=l*c,r=l*u;t[0]=e+r*s,t[4]=n*s-i,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=i*s-n,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,i=a*u,n=l*c,r=l*u;t[0]=e-r*s,t[4]=-o*u,t[8]=n+i*s,t[1]=i+n*s,t[5]=o*c,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,i=o*u,n=s*c,r=s*u;t[0]=a*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=a*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,i=o*l,n=s*a,r=s*l;t[0]=a*c,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){const e=o*a,i=o*l,n=s*a,r=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=i*u-n,t[2]=n*u-i,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_r,e,vr)}lookAt(e,t,i){const n=this.elements;return Ar.subVectors(e,t),0===Ar.lengthSq()&&(Ar.z=1),Ar.normalize(),yr.crossVectors(i,Ar),0===yr.lengthSq()&&(1===Math.abs(i.z)?Ar.x+=1e-4:Ar.z+=1e-4,Ar.normalize(),yr.crossVectors(i,Ar)),yr.normalize(),br.crossVectors(Ar,yr),n[0]=yr.x,n[4]=br.x,n[8]=Ar.x,n[1]=yr.y,n[5]=br.y,n[9]=Ar.y,n[2]=yr.z,n[6]=br.z,n[10]=Ar.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],s=i[4],a=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],p=i[2],f=i[6],g=i[10],m=i[14],_=i[3],v=i[7],y=i[11],b=i[15],A=n[0],w=n[4],x=n[8],S=n[12],C=n[1],E=n[5],T=n[9],I=n[13],M=n[2],k=n[6],B=n[10],R=n[14],P=n[3],D=n[7],L=n[11],O=n[15];return r[0]=o*A+s*C+a*M+l*P,r[4]=o*w+s*E+a*k+l*D,r[8]=o*x+s*T+a*B+l*L,r[12]=o*S+s*I+a*R+l*O,r[1]=c*A+u*C+h*M+d*P,r[5]=c*w+u*E+h*k+d*D,r[9]=c*x+u*T+h*B+d*L,r[13]=c*S+u*I+h*R+d*O,r[2]=p*A+f*C+g*M+m*P,r[6]=p*w+f*E+g*k+m*D,r[10]=p*x+f*T+g*B+m*L,r[14]=p*S+f*I+g*R+m*O,r[3]=_*A+v*C+y*M+b*P,r[7]=_*w+v*E+y*k+b*D,r[11]=_*x+v*T+y*B+b*L,r[15]=_*S+v*I+y*R+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*a*u-n*l*u-r*s*h+i*l*h+n*s*d-i*a*d)+e[7]*(+t*a*d-t*l*h+r*o*h-n*o*d+n*l*c-r*a*c)+e[11]*(+t*l*u-t*s*d-r*o*u+i*o*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*a*u+t*s*h+n*o*u-i*o*h+i*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],g=e[14],m=e[15],_=u*g*l-f*h*l+f*a*d-s*g*d-u*a*m+s*h*m,v=p*h*l-c*g*l-p*a*d+o*g*d+c*a*m-o*h*m,y=c*f*l-p*u*l+p*s*d-o*f*d-c*s*m+o*u*m,b=p*u*a-c*f*a-p*s*h+o*f*h+c*s*g-o*u*g,A=t*_+i*v+n*y+r*b;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/A;return e[0]=_*w,e[1]=(f*h*r-u*g*r-f*n*d+i*g*d+u*n*m-i*h*m)*w,e[2]=(s*g*r-f*a*r+f*n*l-i*g*l-s*n*m+i*a*m)*w,e[3]=(u*a*r-s*h*r-u*n*l+i*h*l+s*n*d-i*a*d)*w,e[4]=v*w,e[5]=(c*g*r-p*h*r+p*n*d-t*g*d-c*n*m+t*h*m)*w,e[6]=(p*a*r-o*g*r-p*n*l+t*g*l+o*n*m-t*a*m)*w,e[7]=(o*h*r-c*a*r+c*n*l-t*h*l-o*n*d+t*a*d)*w,e[8]=y*w,e[9]=(p*u*r-c*f*r-p*i*d+t*f*d+c*i*m-t*u*m)*w,e[10]=(o*f*r-p*s*r+p*i*l-t*f*l-o*i*m+t*s*m)*w,e[11]=(c*s*r-o*u*r-c*i*l+t*u*l+o*i*d-t*s*d)*w,e[12]=b*w,e[13]=(c*f*n-p*u*n+p*i*h-t*f*h-c*i*g+t*u*g)*w,e[14]=(p*s*n-o*f*n-p*i*a+t*f*a+o*i*g-t*s*g)*w,e[15]=(o*u*n-c*s*n+c*i*a-t*u*a-o*i*h+t*s*h)*w,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+i,l*s-n*a,l*a+n*s,0,l*s+n*a,c*s+i,c*a-n*o,0,l*a-n*s,c*a+n*o,r*a*a+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,o){return this.set(1,i,r,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,u=s+s,h=r*l,d=r*c,p=r*u,f=o*c,g=o*u,m=s*u,_=a*l,v=a*c,y=a*u,b=i.x,A=i.y,w=i.z;return n[0]=(1-(f+m))*b,n[1]=(d+y)*b,n[2]=(p-v)*b,n[3]=0,n[4]=(d-y)*A,n[5]=(1-(h+m))*A,n[6]=(g+_)*A,n[7]=0,n[8]=(p+v)*w,n[9]=(g-_)*w,n[10]=(1-(h+f))*w,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=gr.set(n[0],n[1],n[2]).length();const o=gr.set(n[4],n[5],n[6]).length(),s=gr.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],mr.copy(this);const a=1/r,l=1/o,c=1/s;return mr.elements[0]*=a,mr.elements[1]*=a,mr.elements[2]*=a,mr.elements[4]*=l,mr.elements[5]*=l,mr.elements[6]*=l,mr.elements[8]*=c,mr.elements[9]*=c,mr.elements[10]*=c,t.setFromRotationMatrix(mr),i.x=r,i.y=o,i.z=s,this}makePerspective(e,t,i,n,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qi;const a=this.elements,l=2*r/(t-e),c=2*r/(i-n),u=(t+e)/(t-e),h=(i+n)/(i-n);let d,p;if(s===Qi)d=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(s!==ji)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-r),p=-o*r/(o-r)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,n,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qi;const a=this.elements,l=1/(t-e),c=1/(i-n),u=1/(o-r),h=(t+e)*l,d=(i+n)*c;let p,f;if(s===Qi)p=(o+r)*u,f=-2*u;else{if(s!==ji)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=f,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const gr=new Nn,mr=new fr,_r=new Nn(0,0,0),vr=new Nn(1,1,1),yr=new Nn,br=new Nn,Ar=new Nn,wr=new fr,xr=new Fn;class Sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sr.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e.elements,r=n[0],o=n[4],s=n[8],a=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(Ji(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ji(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ji(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Ji(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ji(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Ji(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return wr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wr,t,i)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return xr.setFromEuler(this),this.setFromQuaternion(xr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sr.DEFAULT_ORDER="XYZ";class Cr{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Er=0;const Tr=new Nn,Ir=new Fn,Mr=new fr,kr=new Nn,Br=new Nn,Rr=new Nn,Pr=new Fn,Dr=new Nn(1,0,0),Lr=new Nn(0,1,0),Or=new Nn(0,0,1),Fr={type:"added"},Nr={type:"removed"},zr={type:"childadded",child:null},Ur={type:"childremoved",child:null};class Hr extends qi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Er++}),this.uuid=Zi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hr.DEFAULT_UP.clone();const e=new Nn,t=new Sr,i=new Fn,n=new Nn(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new fr},normalMatrix:{value:new an}}),this.matrix=new fr,this.matrixWorld=new fr,this.matrixAutoUpdate=Hr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ir.setFromAxisAngle(e,t),this.quaternion.multiply(Ir),this}rotateOnWorldAxis(e,t){return Ir.setFromAxisAngle(e,t),this.quaternion.premultiply(Ir),this}rotateX(e){return this.rotateOnAxis(Dr,e)}rotateY(e){return this.rotateOnAxis(Lr,e)}rotateZ(e){return this.rotateOnAxis(Or,e)}translateOnAxis(e,t){return Tr.copy(e).applyQuaternion(this.quaternion),this.position.add(Tr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Dr,e)}translateY(e){return this.translateOnAxis(Lr,e)}translateZ(e){return this.translateOnAxis(Or,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Mr.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?kr.copy(e):kr.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Br.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mr.lookAt(Br,kr,this.up):Mr.lookAt(kr,Br,this.up),this.quaternion.setFromRotationMatrix(Mr),n&&(Mr.extractRotation(n.matrixWorld),Ir.setFromRotationMatrix(Mr),this.quaternion.premultiply(Ir.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Fr),zr.child=e,this.dispatchEvent(zr),zr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Nr),Ur.child=e,this.dispatchEvent(Ur),Ur.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Mr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Mr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mr),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Fr),zr.child=e,this.dispatchEvent(zr),zr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&i.push(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Br,e,Rr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Br,Pr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){t[i].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),n.maxInstanceCount=this._maxInstanceCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(n.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),null!==this.boundingBox&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=o(e.geometries),n=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),a.length>0&&(i.shapes=a),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),u.length>0&&(i.nodes=u)}return i.object=n,i;function o(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++){const t=e.children[i];this.add(t.clone())}return this}}Hr.DEFAULT_UP=new Nn(0,1,0),Hr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Hr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Vr=new Nn,$r=new Nn,Gr=new Nn,Qr=new Nn,jr=new Nn,qr=new Nn,Wr=new Nn,Xr=new Nn,Yr=new Nn,Kr=new Nn,Zr=new kn,Jr=new kn,eo=new kn;class to{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nn;this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Vr.subVectors(e,t),n.cross(Vr);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){Vr.subVectors(n,t),$r.subVectors(i,t),Gr.subVectors(e,t);const o=Vr.dot(Vr),s=Vr.dot($r),a=Vr.dot(Gr),l=$r.dot($r),c=$r.dot(Gr),u=o*l-s*s;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return null!==this.getBarycoord(e,t,i,n,Qr)&&(Qr.x>=0&&Qr.y>=0&&Qr.x+Qr.y<=1)}static getInterpolation(e,t,i,n,r,o,s,a){return null===this.getBarycoord(e,t,i,n,Qr)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,Qr.x),a.addScaledVector(o,Qr.y),a.addScaledVector(s,Qr.z),a)}static getInterpolatedAttribute(e,t,i,n,r,o){return Zr.setScalar(0),Jr.setScalar(0),eo.setScalar(0),Zr.fromBufferAttribute(e,t),Jr.fromBufferAttribute(e,i),eo.fromBufferAttribute(e,n),o.setScalar(0),o.addScaledVector(Zr,r.x),o.addScaledVector(Jr,r.y),o.addScaledVector(eo,r.z),o}static isFrontFacing(e,t,i,n){return Vr.subVectors(i,t),$r.subVectors(e,t),Vr.cross($r).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Vr.subVectors(this.c,this.b),$r.subVectors(this.a,this.b),.5*Vr.cross($r).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return to.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return to.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,r){return to.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return to.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return to.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let o,s;jr.subVectors(n,i),qr.subVectors(r,i),Xr.subVectors(e,i);const a=jr.dot(Xr),l=qr.dot(Xr);if(a<=0&&l<=0)return t.copy(i);Yr.subVectors(e,n);const c=jr.dot(Yr),u=qr.dot(Yr);if(c>=0&&u<=c)return t.copy(n);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(i).addScaledVector(jr,o);Kr.subVectors(e,r);const d=jr.dot(Kr),p=qr.dot(Kr);if(p>=0&&d<=p)return t.copy(r);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(i).addScaledVector(qr,s);const g=c*p-d*u;if(g<=0&&u-c>=0&&d-p>=0)return Wr.subVectors(r,n),s=(u-c)/(u-c+(d-p)),t.copy(n).addScaledVector(Wr,s);const m=1/(g+f+h);return o=f*m,s=h*m,t.copy(i).addScaledVector(jr,o).addScaledVector(qr,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},no={h:0,s:0,l:0},ro={h:0,s:0,l:0};function oo(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class so{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ii;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,bn.toWorkingColorSpace(this,t),this}setRGB(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bn.workingColorSpace;return this.r=e,this.g=t,this.b=i,bn.toWorkingColorSpace(this,n),this}setHSL(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bn.workingColorSpace;if(e=en(e,1),t=Ji(t,0,1),i=Ji(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=oo(r,n,e+1/3),this.g=oo(r,n,e),this.b=oo(r,n,e-1/3)}return bn.toWorkingColorSpace(this,n),this}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ii;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,i);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,i);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=t[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,i);if(6===r)return this.setHex(parseInt(n,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ii;const i=io[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=An(e.r),this.g=An(e.g),this.b=An(e.b),this}copyLinearToSRGB(e){return this.r=wn(e.r),this.g=wn(e.g),this.b=wn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii;return bn.fromWorkingColorSpace(ao.copy(this),e),65536*Math.round(Ji(255*ao.r,0,255))+256*Math.round(Ji(255*ao.g,0,255))+Math.round(Ji(255*ao.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn.workingColorSpace;bn.fromWorkingColorSpace(ao.copy(this),t);const i=ao.r,n=ao.g,r=ao.b,o=Math.max(i,n,r),s=Math.min(i,n,r);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case i:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-i)/e+2;break;case r:a=(i-n)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn.workingColorSpace;return bn.fromWorkingColorSpace(ao.copy(this),t),e.r=ao.r,e.g=ao.g,e.b=ao.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii;bn.fromWorkingColorSpace(ao.copy(this),e);const t=ao.r,i=ao.g,n=ao.b;return e!==ii?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(no),this.setHSL(no.h+e,no.s+t,no.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(no),e.getHSL(ro);const i=tn(no.h,ro.h,t),n=tn(no.s,ro.s,t),r=tn(no.l,ro.l,t);return this.setHSL(i,n,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ao=new so;so.NAMES=io;let lo=0;class co extends qi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lo++}),this.uuid=Zi(),this.name="",this.type="Material",this.blending=A,this.side=_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=L,this.blendDst=O,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new so(0,0,0),this.blendAlpha=0,this.depthFunc=X,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ci,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hi,this.stencilZFail=hi,this.stencilZPass=hi,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(i.blending=this.blending),this.side!==_&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==L&&(i.blendSrc=this.blendSrc),this.blendDst!==O&&(i.blendDst=this.blendDst),this.blendEquation!==E&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==X&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ci&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==hi&&(i.stencilFail=this.stencilFail),this.stencilZFail!==hi&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==hi&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class uo extends co{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new so(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ho=po();function po(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(n[l]=0,n[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(n[l]=1024>>-e-14,n[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(n[l]=e+15<<10,n[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(n[l]=31744,n[256|l]=64512,r[l]=24,r[256|l]=24):(n[l]=31744,n[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function fo(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ji(e,-65504,65504),ho.floatView[0]=e;const t=ho.uint32View[0],i=t>>23&511;return ho.baseTable[i]+((8388607&t)>>ho.shiftTable[i])}function go(e){const t=e>>10;return ho.uint32View[0]=ho.mantissaTable[ho.offsetTable[t]+(1023&e)]+ho.exponentTable[t],ho.floatView[0]}const mo={toHalfFloat:fo,fromHalfFloat:go},_o=new Nn,vo=new sn;class yo{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=Di,this.updateRanges=[],this.gpuType=Ne,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)vo.fromBufferAttribute(this,t),vo.applyMatrix3(e),this.setXY(t,vo.x,vo.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.applyMatrix3(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.applyMatrix4(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.applyNormalMatrix(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.transformDirection(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=nn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=rn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nn(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nn(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nn(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Di&&(e.usage=this.usage),e}}class bo extends yo{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Ao extends yo{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class wo extends yo{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class xo extends yo{constructor(e,t,i){super(new Int16Array(e),t,i)}}class So extends yo{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Co extends yo{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Eo extends yo{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class To extends yo{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=go(this.array[e*this.itemSize]);return this.normalized&&(t=nn(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=fo(t),this}getY(e){let t=go(this.array[e*this.itemSize+1]);return this.normalized&&(t=nn(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=fo(t),this}getZ(e){let t=go(this.array[e*this.itemSize+2]);return this.normalized&&(t=nn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=fo(t),this}getW(e){let t=go(this.array[e*this.itemSize+3]);return this.normalized&&(t=nn(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=fo(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array)),this.array[e+0]=fo(t),this.array[e+1]=fo(i),this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array)),this.array[e+0]=fo(t),this.array[e+1]=fo(i),this.array[e+2]=fo(n),this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=fo(t),this.array[e+1]=fo(i),this.array[e+2]=fo(n),this.array[e+3]=fo(r),this}}class Io extends yo{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Mo=0;const ko=new fr,Bo=new Hr,Ro=new Nn,Po=new Hn,Do=new Hn,Lo=new Nn;class Oo extends qi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mo++}),this.uuid=Zi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cn(e)?Eo:So)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new an).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ko.makeRotationFromQuaternion(e),this.applyMatrix4(ko),this}rotateX(e){return ko.makeRotationX(e),this.applyMatrix4(ko),this}rotateY(e){return ko.makeRotationY(e),this.applyMatrix4(ko),this}rotateZ(e){return ko.makeRotationZ(e),this.applyMatrix4(ko),this}translate(e,t,i){return ko.makeTranslation(e,t,i),this.applyMatrix4(ko),this}scale(e,t,i){return ko.makeScale(e,t,i),this.applyMatrix4(ko),this}lookAt(e){return Bo.lookAt(e),Bo.updateMatrix(),this.applyMatrix4(Bo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ro).negate(),this.translate(Ro.x,Ro.y,Ro.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Io(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Hn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Nn(-1/0,-1/0,-1/0),new Nn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const e=t[i];Po.setFromBufferAttribute(e),this.morphTargetsRelative?(Lo.addVectors(this.boundingBox.min,Po.min),this.boundingBox.expandByPoint(Lo),Lo.addVectors(this.boundingBox.max,Po.max),this.boundingBox.expandByPoint(Lo)):(this.boundingBox.expandByPoint(Po.min),this.boundingBox.expandByPoint(Po.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new or);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Nn,1/0);if(e){const i=this.boundingSphere.center;if(Po.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const i=t[e];Do.setFromBufferAttribute(i),this.morphTargetsRelative?(Lo.addVectors(Po.min,Do.min),Po.expandByPoint(Lo),Lo.addVectors(Po.max,Do.max),Po.expandByPoint(Lo)):(Po.expandByPoint(Do.min),Po.expandByPoint(Do.max))}Po.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)Lo.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Lo));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Lo.fromBufferAttribute(o,t),s&&(Ro.fromBufferAttribute(e,t),Lo.add(Ro)),n=Math.max(n,i.distanceToSquared(Lo))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,n=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new yo(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let x=0;x<i.count;x++)s[x]=new Nn,a[x]=new Nn;const l=new Nn,c=new Nn,u=new Nn,h=new sn,d=new sn,p=new sn,f=new Nn,g=new Nn;function m(e,t,n){l.fromBufferAttribute(i,e),c.fromBufferAttribute(i,t),u.fromBufferAttribute(i,n),h.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,n),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),g.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(o),s[e].add(f),s[t].add(f),s[n].add(f),a[e].add(g),a[t].add(g),a[n].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:e.count}]);for(let x=0,S=_.length;x<S;++x){const t=_[x],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)m(e.getX(n+0),e.getX(n+1),e.getX(n+2))}const v=new Nn,y=new Nn,b=new Nn,A=new Nn;function w(e){b.fromBufferAttribute(n,e),A.copy(b);const t=s[e];v.copy(t),v.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(A,t);const i=y.dot(a[e])<0?-1:1;o.setXYZW(e,v.x,v.y,v.z,i)}for(let x=0,S=_.length;x<S;++x){const t=_[x],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)w(e.getX(n+0)),w(e.getX(n+1)),w(e.getX(n+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new yo(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new Nn,r=new Nn,o=new Nn,s=new Nn,a=new Nn,l=new Nn,c=new Nn,u=new Nn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),s.fromBufferAttribute(i,d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),s.add(c),a.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Lo.fromBufferAttribute(e,t),Lo.normalize(),e.setXYZ(t,Lo.x,Lo.y,Lo.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,o=new i.constructor(t.length*n);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n;for(let e=0;e<n;e++)o[a++]=i[s++]}return new yo(o,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Oo,i=this.index.array,n=this.attributes;for(const s in n){const r=e(n[s],i);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const n=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],i);n.push(r)}t.morphAttributes[s]=n}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const a in i){const t=i[a];e.data.attributes[a]=t.toJSON(e.data)}const n={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];i.push(r.toJSON(e.data))}i.length>0&&(n[a]=i,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const l in n){const e=n[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],i=r[l];for(let n=0,r=i.length;n<r;n++)e.push(i[n].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Fo=new fr,No=new pr,zo=new or,Uo=new Nn,Ho=new Nn,Vo=new Nn,$o=new Nn,Go=new Nn,Qo=new Nn,jo=new Nn,qo=new Nn;class Wo extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uo;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const s=this.morphTargetInfluences;if(r&&s){Qo.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=s[i],a=r[i];0!==n&&(Go.fromBufferAttribute(a,e),o?Qo.addScaledVector(Go,n):Qo.addScaledVector(Go.sub(t),n))}t.add(Qo)}return t}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),zo.copy(i.boundingSphere),zo.applyMatrix4(r),No.copy(e.ray).recast(e.near),!1===zo.containsPoint(No.origin)){if(null===No.intersectSphere(zo,Uo))return;if(No.origin.distanceToSquared(Uo)>(e.far-e.near)**2)return}Fo.copy(r).invert(),No.copy(e.ray).applyMatrix4(Fo),null!==i.boundingBox&&!1===No.intersectsBox(i.boundingBox)||this._computeIntersections(e,t,No)}}_computeIntersections(e,t,i){let n;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],a=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){n=Xo(this,a,e,i,l,c,u,s.getX(o),s.getX(o+1),s.getX(o+2)),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}}else{for(let r=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);r<a;r+=3){n=Xo(this,o,e,i,l,c,u,s.getX(r),s.getX(r+1),s.getX(r+2)),n&&(n.faceIndex=Math.floor(r/3),t.push(n))}}else if(void 0!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],s=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){n=Xo(this,s,e,i,l,c,u,o,o+1,o+2),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}}else{for(let r=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);r<s;r+=3){n=Xo(this,o,e,i,l,c,u,r,r+1,r+2),n&&(n.faceIndex=Math.floor(r/3),t.push(n))}}}}function Xo(e,t,i,n,r,o,s,a,l,c){e.getVertexPosition(a,Ho),e.getVertexPosition(l,Vo),e.getVertexPosition(c,$o);const u=function(e,t,i,n,r,o,s,a){let l;if(l=t.side===v?n.intersectTriangle(s,o,r,!0,a):n.intersectTriangle(r,o,s,t.side===_,a),null===l)return null;qo.copy(a),qo.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(qo);return c<i.near||c>i.far?null:{distance:c,point:qo.clone(),object:e}}(e,t,i,n,Ho,Vo,$o,jo);if(u){const e=new Nn;to.getBarycoord(jo,Ho,Vo,$o,e),r&&(u.uv=to.getInterpolatedAttribute(r,a,l,c,e,new sn)),o&&(u.uv1=to.getInterpolatedAttribute(o,a,l,c,e,new sn)),s&&(u.normal=to.getInterpolatedAttribute(s,a,l,c,e,new Nn),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const t={a:a,b:l,c:c,normal:new Nn,materialIndex:0};to.getNormal(Ho,Vo,$o,t.normal),u.face=t,u.barycoord=e}return u}class Yo extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};const s=this;n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,i,n,r,o,p,f,g,m,_){const v=o/g,y=p/m,b=o/2,A=p/2,w=f/2,x=g+1,S=m+1;let C=0,E=0;const T=new Nn;for(let s=0;s<S;s++){const o=s*y-A;for(let a=0;a<x;a++){const h=a*v-b;T[e]=h*n,T[t]=o*r,T[i]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[i]=f>0?1:-1,c.push(T.x,T.y,T.z),u.push(a/g),u.push(1-s/m),C+=1}}for(let s=0;s<m;s++)for(let e=0;e<g;e++){const t=h+e+x*s,i=h+e+x*(s+1),n=h+(e+1)+x*(s+1),r=h+(e+1)+x*s;a.push(t,i,r),a.push(i,n,r),E+=6}s.addGroup(d,E,_),d+=E,h+=C}p("z","y","x",-1,-1,i,t,e,o,r,0),p("z","y","x",1,-1,i,t,-e,o,r,1),p("x","z","y",1,1,e,i,t,n,o,2),p("x","z","y",1,-1,e,i,-t,n,o,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(a),this.setAttribute("position",new Io(l,3)),this.setAttribute("normal",new Io(c,3)),this.setAttribute("uv",new Io(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ko(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function Zo(e){const t={};for(let i=0;i<e.length;i++){const n=Ko(e[i]);for(const e in n)t[e]=n[e]}return t}function Jo(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:bn.workingColorSpace}const es={clone:Ko,merge:Zo};class ts extends co{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ko(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class is extends Hr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fr,this.projectionMatrix=new fr,this.projectionMatrixInverse=new fr,this.coordinateSystem=Qi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const ns=new Nn,rs=new sn,os=new sn;class ss extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ki*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Yi*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ki*Math.atan(Math.tan(.5*Yi*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ns.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ns.x,ns.y).multiplyScalar(-e/ns.z),ns.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ns.x,ns.y).multiplyScalar(-e/ns.z)}getViewSize(e,t){return this.getViewBounds(e,rs,os),t.subVectors(os,rs)}setViewOffset(e,t,i,n,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Yi*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/e,t-=o.offsetY*i/s,n*=o.width/e,i*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const as=-90;class ls extends Hr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new ss(as,1,e,t);n.layers=this.layers,this.add(n);const r=new ss(as,1,e,t);r.layers=this.layers,this.add(r);const o=new ss(as,1,e,t);o.layers=this.layers,this.add(o);const s=new ss(as,1,e,t);s.layers=this.layers,this.add(s);const a=new ss(as,1,e,t);a.layers=this.layers,this.add(a);const l=new ss(as,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,n,r,o,s,a]=t;for(const l of t)this.remove(l);if(e===Qi)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==ji)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,r),e.setRenderTarget(i,1,n),e.render(t,o),e.setRenderTarget(i,2,n),e.render(t,s),e.setRenderTarget(i,3,n),e.render(t,a),e.setRenderTarget(i,4,n),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5,n),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class cs extends Mn{constructor(e,t,i,n,r,o,s,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:fe,i,n,r,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class us extends Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new cs(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Te}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},n=new Yo(5,5,5),r=new ts({name:"CubemapFromEquirect",uniforms:Ko(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:v,blending:b});r.uniforms.tEquirect.value=t;const o=new Wo(n,r),s=t.minFilter;t.minFilter===ke&&(t.minFilter=Te);return new ls(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,n){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,n);e.setRenderTarget(r)}}const hs=new Nn,ds=new Nn,ps=new an;class fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=hs.subVectors(i,t).cross(ds.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(hs),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ps.getNormalMatrix(e),n=this.coplanarPoint(hs).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const gs=new or,ms=new Nn;class _s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fs,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new fs,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new fs,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new fs,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new fs;this.planes=[e,t,i,n,r,o]}set(e,t,i,n,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qi;const i=this.planes,n=e.elements,r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=n[9],f=n[10],g=n[11],m=n[12],_=n[13],v=n[14],y=n[15];if(i[0].setComponents(a-r,h-l,g-d,y-m).normalize(),i[1].setComponents(a+r,h+l,g+d,y+m).normalize(),i[2].setComponents(a+o,h+c,g+p,y+_).normalize(),i[3].setComponents(a-o,h-c,g-p,y-_).normalize(),i[4].setComponents(a-s,h-u,g-f,y-v).normalize(),t===Qi)i[5].setComponents(a+s,h+u,g+f,y+v).normalize();else{if(t!==ji)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(s,u,f,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),gs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),gs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gs)}intersectsSprite(e){return gs.center.set(0,0,0),gs.radius=.7071067811865476,gs.applyMatrix4(e.matrixWorld),this.intersectsSphere(gs)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(i)<n)return!1}return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(ms.x=n.normal.x>0?e.max.x:e.min.x,ms.y=n.normal.y>0?e.max.y:e.min.y,ms.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(ms)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vs(){let e=null,t=!1,i=null,n=null;function r(t,o){i(t,o),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function ys(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);const n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){const e=t.get(i);return void((!e||e.version<i.version)&&t.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version}))}const r=t.get(i);if(void 0===r)t.set(i,function(t,i){const n=t.array,r=t.usage,o=n.byteLength,s=e.createBuffer();let a;if(e.bindBuffer(i,s),e.bufferData(i,n,r),t.onUploadCallback(),n instanceof Float32Array)a=e.FLOAT;else if(n instanceof Uint16Array)a=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(n instanceof Int16Array)a=e.SHORT;else if(n instanceof Uint32Array)a=e.UNSIGNED_INT;else if(n instanceof Int32Array)a=e.INT;else if(n instanceof Int8Array)a=e.BYTE;else if(n instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(n instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);a=e.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version,size:o}}(i,n));else if(r.version<i.version){if(r.size!==i.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,n){const r=i.array,o=i.updateRanges;if(e.bindBuffer(n,t),0===o.length)e.bufferSubData(n,0,r);else{o.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<o.length;e++){const i=o[t],n=o[e];n.start<=i.start+i.count+1?i.count=Math.max(i.count,n.start+n.count-i.start):(++t,o[t]=n)}o.length=t+1;for(let i=0,s=o.length;i<s;i++){const t=o[i];e.bufferSubData(n,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}i.clearUpdateRanges()}i.onUploadCallback()}(r.buffer,i,n),r.version=i.version}}}}class bs extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,o=t/2,s=Math.floor(i),a=Math.floor(n),l=s+1,c=a+1,u=e/s,h=t/a,d=[],p=[],f=[],g=[];for(let m=0;m<c;m++){const e=m*h-o;for(let t=0;t<l;t++){const i=t*u-r;p.push(i,-e,0),f.push(0,0,1),g.push(t/s),g.push(1-m/a)}}for(let m=0;m<a;m++)for(let e=0;e<s;e++){const t=e+l*m,i=e+l*(m+1),n=e+1+l*(m+1),r=e+1+l*m;d.push(t,i,r),d.push(i,n,r)}this.setIndex(d),this.setAttribute("position",new Io(p,3)),this.setAttribute("normal",new Io(f,3)),this.setAttribute("uv",new Io(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bs(e.width,e.height,e.widthSegments,e.heightSegments)}}const As={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ws={common:{diffuse:{value:new so(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new an},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new an}},envmap:{envMap:{value:null},envMapRotation:{value:new an},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new an}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new an}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new an},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new an},normalScale:{value:new sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new an},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new an}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new an}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new an}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new so(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new so(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0},uvTransform:{value:new an}},sprite:{diffuse:{value:new so(16777215)},opacity:{value:1},center:{value:new sn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new an},alphaMap:{value:null},alphaMapTransform:{value:new an},alphaTest:{value:0}}},xs={basic:{uniforms:Zo([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.fog]),vertexShader:As.meshbasic_vert,fragmentShader:As.meshbasic_frag},lambert:{uniforms:Zo([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.fog,ws.lights,{emissive:{value:new so(0)}}]),vertexShader:As.meshlambert_vert,fragmentShader:As.meshlambert_frag},phong:{uniforms:Zo([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.fog,ws.lights,{emissive:{value:new so(0)},specular:{value:new so(1118481)},shininess:{value:30}}]),vertexShader:As.meshphong_vert,fragmentShader:As.meshphong_frag},standard:{uniforms:Zo([ws.common,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.roughnessmap,ws.metalnessmap,ws.fog,ws.lights,{emissive:{value:new so(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},toon:{uniforms:Zo([ws.common,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.gradientmap,ws.fog,ws.lights,{emissive:{value:new so(0)}}]),vertexShader:As.meshtoon_vert,fragmentShader:As.meshtoon_frag},matcap:{uniforms:Zo([ws.common,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.fog,{matcap:{value:null}}]),vertexShader:As.meshmatcap_vert,fragmentShader:As.meshmatcap_frag},points:{uniforms:Zo([ws.points,ws.fog]),vertexShader:As.points_vert,fragmentShader:As.points_frag},dashed:{uniforms:Zo([ws.common,ws.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:As.linedashed_vert,fragmentShader:As.linedashed_frag},depth:{uniforms:Zo([ws.common,ws.displacementmap]),vertexShader:As.depth_vert,fragmentShader:As.depth_frag},normal:{uniforms:Zo([ws.common,ws.bumpmap,ws.normalmap,ws.displacementmap,{opacity:{value:1}}]),vertexShader:As.meshnormal_vert,fragmentShader:As.meshnormal_frag},sprite:{uniforms:Zo([ws.sprite,ws.fog]),vertexShader:As.sprite_vert,fragmentShader:As.sprite_frag},background:{uniforms:{uvTransform:{value:new an},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:As.background_vert,fragmentShader:As.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new an}},vertexShader:As.backgroundCube_vert,fragmentShader:As.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:As.cube_vert,fragmentShader:As.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:As.equirect_vert,fragmentShader:As.equirect_frag},distanceRGBA:{uniforms:Zo([ws.common,ws.displacementmap,{referencePosition:{value:new Nn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:As.distanceRGBA_vert,fragmentShader:As.distanceRGBA_frag},shadow:{uniforms:Zo([ws.lights,ws.fog,{color:{value:new so(0)},opacity:{value:1}}]),vertexShader:As.shadow_vert,fragmentShader:As.shadow_frag}};xs.physical={uniforms:Zo([xs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new an},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new an},clearcoatNormalScale:{value:new sn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new an},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new an},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new an},sheen:{value:0},sheenColor:{value:new so(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new an},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new an},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new an},transmissionSamplerSize:{value:new sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new an},attenuationDistance:{value:0},attenuationColor:{value:new so(0)},specularColor:{value:new so(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new an},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new an},anisotropyVector:{value:new sn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new an}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag};const Ss={r:0,b:0,g:0},Cs=new Sr,Es=new fr;function Ts(e,t,i,n,r,o,s){const a=new so(0);let l,c,u=!0===o?0:1,h=null,d=0,p=null;function f(e){let n=!0===e.isScene?e.background:null;if(n&&n.isTexture){n=(e.backgroundBlurriness>0?i:t).get(n)}return n}function g(t,i){t.getRGB(Ss,Jo(e)),n.buffers.color.setClear(Ss.r,Ss.g,Ss.b,i,s)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),u=t,g(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,g(a,u)},render:function(t){let i=!1;const r=f(t);null===r?g(a,u):r&&r.isColor&&(g(r,1),i=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?n.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===o&&n.buffers.color.setClear(0,0,0,0,s),(e.autoClear||i)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,i){const n=f(i);n&&(n.isCubeTexture||n.mapping===ve)?(void 0===c&&(c=new Wo(new Yo(1,1,1),new ts({name:"BackgroundCubeMaterial",uniforms:Ko(xs.backgroundCube.uniforms),vertexShader:xs.backgroundCube.vertexShader,fragmentShader:xs.backgroundCube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Cs.copy(i.backgroundRotation),Cs.x*=-1,Cs.y*=-1,Cs.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(Cs.y*=-1,Cs.z*=-1),c.material.uniforms.envMap.value=n,c.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Es.makeRotationFromEuler(Cs)),c.material.toneMapped=bn.getTransfer(n.colorSpace)!==ai,h===n&&d===n.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=n,d=n.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):n&&n.isTexture&&(void 0===l&&(l=new Wo(new bs(2,2),new ts({name:"BackgroundMaterial",uniforms:Ko(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:_,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=n,l.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,l.material.toneMapped=bn.getTransfer(n.colorSpace)!==ai,!0===n.matrixAutoUpdate&&n.updateMatrix(),l.material.uniforms.uvTransform.value.copy(n.matrix),h===n&&d===n.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=n,d=n.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))}}}function Is(e,t){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),n={},r=c(null);let o=r,s=!1;function a(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=o.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function h(e){d(e,0)}function d(t,i){const n=o.newAttributes,r=o.enabledAttributes,s=o.attributeDivisors;n[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),s[t]!==i&&(e.vertexAttribDivisor(t,i),s[t]=i)}function p(){const t=o.newAttributes,i=o.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function f(t,i,n,r,o,s,a){!0===a?e.vertexAttribIPointer(t,i,n,o,s):e.vertexAttribPointer(t,i,n,r,o,s)}function g(){m(),s=!0,o!==r&&(o=r,a(o.object))}function m(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(i,r,l,g,m){let _=!1;const v=function(t,i,r){const o=!0===r.wireframe;let s=n[t.id];void 0===s&&(s={},n[t.id]=s);let a=s[i.id];void 0===a&&(a={},s[i.id]=a);let l=a[o];void 0===l&&(l=c(e.createVertexArray()),a[o]=l);return l}(g,l,r);o!==v&&(o=v,a(o.object)),_=function(e,t,i,n){const r=o.attributes,s=t.attributes;let a=0;const l=i.getAttributes();for(const o in l){if(l[o].location>=0){const t=r[o];let i=s[o];if(void 0===i&&("instanceMatrix"===o&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(i=e.instanceColor)),void 0===t)return!0;if(t.attribute!==i)return!0;if(i&&t.data!==i.data)return!0;a++}}return o.attributesNum!==a||o.index!==n}(i,g,l,m),_&&function(e,t,i,n){const r={},s=t.attributes;let a=0;const l=i.getAttributes();for(const o in l){if(l[o].location>=0){let t=s[o];void 0===t&&("instanceMatrix"===o&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(t=e.instanceColor));const i={};i.attribute=t,t&&t.data&&(i.data=t.data),r[o]=i,a++}}o.attributes=r,o.attributesNum=a,o.index=n}(i,g,l,m),null!==m&&t.update(m,e.ELEMENT_ARRAY_BUFFER),(_||s)&&(s=!1,function(i,n,r,o){u();const s=o.attributes,a=r.getAttributes(),l=n.defaultAttributeValues;for(const c in a){const n=a[c];if(n.location>=0){let r=s[c];if(void 0===r&&("instanceMatrix"===c&&i.instanceMatrix&&(r=i.instanceMatrix),"instanceColor"===c&&i.instanceColor&&(r=i.instanceColor)),void 0!==r){const s=r.normalized,a=r.itemSize,l=t.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,g=u===e.INT||u===e.UNSIGNED_INT||r.gpuType===Oe;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,m=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)d(n.location+e,t.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)f(n.location+e,a/n.locationSize,u,s,l*p,(m+a/n.locationSize*e)*p,g)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)d(n.location+e,r.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)f(n.location+e,a/n.locationSize,u,s,a*p,a/n.locationSize*e*p,g)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(n.location,t);break;case 3:e.vertexAttrib3fv(n.location,t);break;case 4:e.vertexAttrib4fv(n.location,t);break;default:e.vertexAttrib1fv(n.location,t)}}}}p()}(i,r,l,g),null!==m&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(m).buffer))},reset:g,resetDefaultState:m,dispose:function(){g();for(const e in n){const t=n[e];for(const e in t){const i=t[e];for(const e in i)l(i[e].object),delete i[e];delete t[e]}delete n[e]}},releaseStatesOfGeometry:function(e){if(void 0===n[e.id])return;const t=n[e.id];for(const i in t){const e=t[i];for(const t in e)l(e[t].object),delete e[t];delete t[i]}delete n[e.id]},releaseStatesOfProgram:function(e){for(const t in n){const i=n[t];if(void 0===i[e.id])continue;const r=i[e.id];for(const e in r)l(r[e].object),delete r[e];delete i[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function Ms(e,t,i){let n;function r(t,r,o){0!==o&&(e.drawArraysInstanced(n,t,r,o),i.update(r,n,o))}this.setMode=function(e){n=e},this.render=function(t,r){e.drawArrays(n,t,r),i.update(r,n,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,e,0,r,0,o);let s=0;for(let t=0;t<o;t++)s+=r[t];i.update(s,n,1)},this.renderMultiDrawInstances=function(e,o,s,a){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],o[t],a[t]);else{l.multiDrawArraysInstancedWEBGL(n,e,0,o,0,a,0,s);let t=0;for(let e=0;e<s;e++)t+=o[e];for(let e=0;e<a.length;e++)i.update(t,n,a[e])}}}function ks(e,t,i,n){let r;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==i.precision?i.precision:"highp";const a=o(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=!0===i.logarithmicDepthBuffer,c=!0===i.reverseDepthBuffer&&t.has("EXT_clip_control");if(!0===c){const e=t.get("EXT_clip_control");e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT)}const u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,textureFormatReadable:function(t){return t===je||n.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(i){const r=i===ze&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(i!==Re&&n.convert(i)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&i!==Ne&&!r)},precision:s,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Bs(e){const t=this;let i=null,n=0,r=!1,o=!1;const s=new fs,a=new an,l={value:null,needsUpdate:!1};function c(e,i,n,r){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const t=n+4*o,r=i.matrixWorldInverse;a.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let i=0,l=n;i!==o;++i,l+=4)s.copy(e[i]).applyMatrix4(r,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==n||r;return r=t,n=e.length,i},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(s,a,u){const h=s.clippingPlanes,d=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!r||null===h||0===h.length||o&&!p)o?c(null):function(){l.value!==i&&(l.value=i,l.needsUpdate=n>0);t.numPlanes=n,t.numIntersection=0}();else{const e=o?0:n,t=4*e;let r=f.clippingState||null;l.value=r,r=c(h,a,t,u);for(let n=0;n!==t;++n)r[n]=i[n];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Rs(e){let t=new WeakMap;function i(e,t){return t===me?e.mapping=fe:t===_e&&(e.mapping=ge),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===me||o===_e){if(t.has(r)){return i(t.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new us(o.height);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",n),i(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class Ps extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,o=i+e,s=n+t,a=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ds=[.125,.215,.35,.446,.526,.582],Ls=20,Os=new Ps,Fs=new so;let Ns=null,zs=0,Us=0,Hs=!1;const Vs=(1+Math.sqrt(5))/2,$s=1/Vs,Gs=[new Nn(-Vs,$s,0),new Nn(Vs,$s,0),new Nn(-$s,0,Vs),new Nn($s,0,Vs),new Nn(0,Vs,-$s),new Nn(0,Vs,$s),new Nn(-1,1,-1),new Nn(1,1,-1),new Nn(-1,1,1),new Nn(1,1,1)];class Qs{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Ns=this._renderer.getRenderTarget(),zs=this._renderer.getActiveCubeFace(),Us=this._renderer.getActiveMipmapLevel(),Hs=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Xs(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ws(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ns,zs,Us),this._renderer.xr.enabled=Hs,e.scissorTest=!1,qs(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fe||e.mapping===ge?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ns=this._renderer.getRenderTarget(),zs=this._renderer.getActiveCubeFace(),Us=this._renderer.getActiveMipmapLevel(),Hs=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Te,minFilter:Te,generateMipmaps:!1,type:ze,format:je,colorSpace:ni,depthBuffer:!1},n=js(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=js(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],n=[];let r=e;const o=e-4+1+Ds.length;for(let s=0;s<o;s++){const o=Math.pow(2,r);i.push(o);let a=1/o;s>e-4?a=Ds[s-e+4-1]:0===s&&(a=0),n.push(a);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,g=2,m=1,_=new Float32Array(f*p*d),v=new Float32Array(g*p*d),y=new Float32Array(m*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];_.set(n,f*p*e),v.set(h,g*p*e);const r=[e,e,e,e,e,e];y.set(r,m*p*e)}const b=new Oo;b.setAttribute("position",new yo(_,f)),b.setAttribute("uv",new yo(v,g)),b.setAttribute("faceIndex",new yo(y,m)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){const n=new Float32Array(Ls),r=new Nn(0,1,0),o=new ts({name:"SphericalGaussianBlur",defines:{n:Ls,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Ys(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:b,depthTest:!1,depthWrite:!1});return o}(n,e,t)}return n}_compileMaterial(e){const t=new Wo(this._lodPlanes[0],e);this._renderer.compile(t,Os)}_sceneToCubeUV(e,t,i,n){const r=new ss(90,1,t,i),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(Fs),a.toneMapping=ne,a.autoClear=!1;const u=new uo({name:"PMREM.Background",side:v,depthWrite:!1,depthTest:!1}),h=new Wo(new Yo,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Fs),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,o[f],0),r.lookAt(s[f],0,0)):1===t?(r.up.set(0,0,o[f]),r.lookAt(0,s[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,s[f]));const i=this._cubeSize;qs(n,t*i,f>2?i:0,i,i),a.setRenderTarget(n),d&&a.render(h,r),a.render(e,r)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===fe||e.mapping===ge;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Xs()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ws());const r=n?this._cubemapMaterial:this._equirectMaterial,o=new Wo(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;qs(t,0,0,3*s,2*s),i.setRenderTarget(t),i.render(o,Os)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const n=this._lodPlanes.length;for(let r=1;r<n;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),i=Gs[(n-r-1)%Gs.length];this._blur(e,r-1,r,t,i)}t.autoClear=i}_blur(e,t,i,n,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,n,"latitudinal",r),this._halfBlur(o,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Wo(this._lodPlanes[n],l),u=l.uniforms,h=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):Ls;f>Ls&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const g=[];let m=0;for(let y=0;y<Ls;++y){const e=y/p,t=Math.exp(-e*e/2);g.push(t),0===y?m+=t:y<f&&(m+=2*t)}for(let y=0;y<g.length;y++)g[y]=g[y]/m;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=g,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s);const{_lodMax:_}=this;u.dTheta.value=d,u.mipInt.value=_-i;const v=this._sizeLods[n];qs(t,3*v*(n>_-4?n-_+4:0),4*(this._cubeSize-v),3*v,2*v),a.setRenderTarget(t),a.render(c,Os)}}function js(e,t,i){const n=new Rn(e,t,i);return n.texture.mapping=ve,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function qs(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function Ws(){return new ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ys(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:b,depthTest:!1,depthWrite:!1})}function Xs(){return new ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ys(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:b,depthTest:!1,depthWrite:!1})}function Ys(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ks(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,s=o===me||o===_e,a=o===fe||o===ge;if(s||a){let o=t.get(r);const l=void 0!==o?o.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===i&&(i=new Qs(e)),o=s?i.fromEquirectangular(r,o):i.fromCubemap(r,o),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),o.texture;if(void 0!==o)return o.texture;{const l=r.image;return s&&l&&l.height>0||a&&l&&function(e){let t=0;const i=6;for(let n=0;n<i;n++)void 0!==e[n]&&t++;return t===i}(l)?(null===i&&(i=new Qs(e)),o=s?i.fromEquirectangular(r):i.fromCubemap(r),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),r.addEventListener("dispose",n),o.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Zs(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(e){const t=i(e);return null===t&&gn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Js(e,t,i,n){const r={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const i in a.attributes)t.remove(a.attributes[i]);for(const i in a.morphAttributes){const e=a.morphAttributes[i];for(let i=0,n=e.length;i<n;i++)t.remove(e[i])}a.removeEventListener("dispose",s),delete r[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),n.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,i.memory.geometries--}function a(e){const i=[],n=e.index,r=e.attributes.position;let s=0;if(null!==n){const e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],o=e[t+2];i.push(n,r,r,o,o,n)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}}const a=new(cn(i)?Eo:So)(i,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,i.memory.geometries++),t},update:function(i){const n=i.attributes;for(const o in n)t.update(n[o],e.ARRAY_BUFFER);const r=i.morphAttributes;for(const o in r){const i=r[o];for(let n=0,r=i.length;n<r;n++)t.update(i[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&a(e)}else a(e);return o.get(e)}}}function ea(e,t,i){let n,r,o;function s(t,s,a){0!==a&&(e.drawElementsInstanced(n,s,r,t*o,a),i.update(s,n,a))}this.setMode=function(e){n=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,s){e.drawElements(n,s,r,t*o),i.update(s,n,1)},this.renderInstances=s,this.renderMultiDraw=function(e,o,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,o,0,r,e,0,s);let a=0;for(let t=0;t<s;t++)a+=o[t];i.update(a,n,1)},this.renderMultiDrawInstances=function(e,a,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)s(e[t]/o,a[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(n,a,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=a[e];for(let e=0;e<c.length;e++)i.update(t,n,c[e])}}}function ta(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(t.calls++,n){case e.TRIANGLES:t.triangles+=r*(i/3);break;case e.LINES:t.lines+=r*(i/2);break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ia(e,t,i){const n=new WeakMap,r=new kn;return{update:function(o,s,a){const l=o.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,u=void 0!==c?c.length:0;let h=n.get(s);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==s.morphAttributes.position,p=void 0!==s.morphAttributes.normal,f=void 0!==s.morphAttributes.color,g=s.morphAttributes.position||[],m=s.morphAttributes.normal||[],_=s.morphAttributes.color||[];let v=0;!0===d&&(v=1),!0===p&&(v=2),!0===f&&(v=3);let y=s.attributes.position.count*v,b=1;y>t.maxTextureSize&&(b=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const A=new Float32Array(y*b*4*u),w=new Pn(A,y,b,u);w.type=Ne,w.needsUpdate=!0;const x=4*v;for(let C=0;C<u;C++){const E=g[C],T=m[C],I=_[C],M=y*b*4*C;for(let k=0;k<E.count;k++){const B=k*x;!0===d&&(r.fromBufferAttribute(E,k),A[M+B+0]=r.x,A[M+B+1]=r.y,A[M+B+2]=r.z,A[M+B+3]=0),!0===p&&(r.fromBufferAttribute(T,k),A[M+B+4]=r.x,A[M+B+5]=r.y,A[M+B+6]=r.z,A[M+B+7]=0),!0===f&&(r.fromBufferAttribute(I,k),A[M+B+8]=r.x,A[M+B+9]=r.y,A[M+B+10]=r.z,A[M+B+11]=4===I.itemSize?r.w:1)}}function S(){w.dispose(),n.delete(s),s.removeEventListener("dispose",S)}h={count:u,texture:w,size:new sn(y,b)},n.set(s,h),s.addEventListener("dispose",S)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)a.getUniforms().setValue(e,"morphTexture",o.morphTexture,i);else{let R=0;for(let D=0;D<l.length;D++)R+=l[D];const P=s.morphTargetsRelative?1:1-R;a.getUniforms().setValue(e,"morphTargetBaseInfluence",P),a.getUniforms().setValue(e,"morphTargetInfluences",l)}a.getUniforms().setValue(e,"morphTargetsTexture",h.texture,i),a.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function na(e,t,i,n){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(s){const a=n.render.frame,l=s.geometry,c=t.get(s,l);if(r.get(c)!==a&&(t.update(c),r.set(c,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),r.get(s)!==a&&(i.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&i.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==a&&(e.update(),r.set(e,a))}return c},dispose:function(){r=new WeakMap}}}class ra extends Mn{constructor(e,t,i,n,r,o,s,a,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Xe;if(c!==Xe&&c!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Xe&&(i=Fe),void 0===i&&c===Ye&&(i=Ve),super(null,n,r,o,s,a,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:we,this.minFilter=void 0!==a?a:we,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const oa=new Mn,sa=new ra(1,1),aa=new Pn,la=new Ln,ca=new cs,ua=[],ha=[],da=new Float32Array(16),pa=new Float32Array(9),fa=new Float32Array(4);function ga(e,t,i){const n=e[0];if(n<=0||n>0)return e;const r=t*i;let o=ua[r];if(void 0===o&&(o=new Float32Array(r),ua[r]=o),0!==t){n.toArray(o,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(o,r)}return o}function ma(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function _a(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function va(e,t){let i=ha[t];void 0===i&&(i=new Int32Array(t),ha[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function ya(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function ba(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ma(i,t))return;e.uniform2fv(this.addr,t),_a(i,t)}}function Aa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(ma(i,t))return;e.uniform3fv(this.addr,t),_a(i,t)}}function wa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ma(i,t))return;e.uniform4fv(this.addr,t),_a(i,t)}}function xa(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ma(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),_a(i,t)}else{if(ma(i,n))return;fa.set(n),e.uniformMatrix2fv(this.addr,!1,fa),_a(i,n)}}function Sa(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ma(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),_a(i,t)}else{if(ma(i,n))return;pa.set(n),e.uniformMatrix3fv(this.addr,!1,pa),_a(i,n)}}function Ca(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ma(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),_a(i,t)}else{if(ma(i,n))return;da.set(n),e.uniformMatrix4fv(this.addr,!1,da),_a(i,n)}}function Ea(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Ta(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ma(i,t))return;e.uniform2iv(this.addr,t),_a(i,t)}}function Ia(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ma(i,t))return;e.uniform3iv(this.addr,t),_a(i,t)}}function Ma(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ma(i,t))return;e.uniform4iv(this.addr,t),_a(i,t)}}function ka(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Ba(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ma(i,t))return;e.uniform2uiv(this.addr,t),_a(i,t)}}function Ra(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ma(i,t))return;e.uniform3uiv(this.addr,t),_a(i,t)}}function Pa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ma(i,t))return;e.uniform4uiv(this.addr,t),_a(i,t)}}function Da(e,t,i){const n=this.cache,r=i.allocateTextureUnit();let o;n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),this.type===e.SAMPLER_2D_SHADOW?(sa.compareFunction=Mi,o=sa):o=oa,i.setTexture2D(t||o,r)}function La(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||la,r)}function Oa(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||ca,r)}function Fa(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||aa,r)}function Na(e,t){e.uniform1fv(this.addr,t)}function za(e,t){const i=ga(t,this.size,2);e.uniform2fv(this.addr,i)}function Ua(e,t){const i=ga(t,this.size,3);e.uniform3fv(this.addr,i)}function Ha(e,t){const i=ga(t,this.size,4);e.uniform4fv(this.addr,i)}function Va(e,t){const i=ga(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function $a(e,t){const i=ga(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Ga(e,t){const i=ga(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function Qa(e,t){e.uniform1iv(this.addr,t)}function ja(e,t){e.uniform2iv(this.addr,t)}function qa(e,t){e.uniform3iv(this.addr,t)}function Wa(e,t){e.uniform4iv(this.addr,t)}function Xa(e,t){e.uniform1uiv(this.addr,t)}function Ya(e,t){e.uniform2uiv(this.addr,t)}function Ka(e,t){e.uniform3uiv(this.addr,t)}function Za(e,t){e.uniform4uiv(this.addr,t)}function Ja(e,t,i){const n=this.cache,r=t.length,o=va(i,r);ma(n,o)||(e.uniform1iv(this.addr,o),_a(n,o));for(let s=0;s!==r;++s)i.setTexture2D(t[s]||oa,o[s])}function el(e,t,i){const n=this.cache,r=t.length,o=va(i,r);ma(n,o)||(e.uniform1iv(this.addr,o),_a(n,o));for(let s=0;s!==r;++s)i.setTexture3D(t[s]||la,o[s])}function tl(e,t,i){const n=this.cache,r=t.length,o=va(i,r);ma(n,o)||(e.uniform1iv(this.addr,o),_a(n,o));for(let s=0;s!==r;++s)i.setTextureCube(t[s]||ca,o[s])}function il(e,t,i){const n=this.cache,r=t.length,o=va(i,r);ma(n,o)||(e.uniform1iv(this.addr,o),_a(n,o));for(let s=0;s!==r;++s)i.setTexture2DArray(t[s]||aa,o[s])}class nl{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ya;case 35664:return ba;case 35665:return Aa;case 35666:return wa;case 35674:return xa;case 35675:return Sa;case 35676:return Ca;case 5124:case 35670:return Ea;case 35667:case 35671:return Ta;case 35668:case 35672:return Ia;case 35669:case 35673:return Ma;case 5125:return ka;case 36294:return Ba;case 36295:return Ra;case 36296:return Pa;case 35678:case 36198:case 36298:case 36306:case 35682:return Da;case 35679:case 36299:case 36307:return La;case 35680:case 36300:case 36308:case 36293:return Oa;case 36289:case 36303:case 36311:case 36292:return Fa}}(t.type)}}class rl{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Na;case 35664:return za;case 35665:return Ua;case 35666:return Ha;case 35674:return Va;case 35675:return $a;case 35676:return Ga;case 5124:case 35670:return Qa;case 35667:case 35671:return ja;case 35668:case 35672:return qa;case 35669:case 35673:return Wa;case 5125:return Xa;case 36294:return Ya;case 36295:return Ka;case 36296:return Za;case 35678:case 36198:case 36298:case 36306:case 35682:return Ja;case 35679:case 36299:case 36307:return el;case 35680:case 36300:case 36308:case 36293:return tl;case 36289:case 36303:case 36311:case 36292:return il}}(t.type)}}class ol{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let r=0,o=n.length;r!==o;++r){const o=n[r];o.setValue(e,t[o.id],i)}}}const sl=/(\w+)(\])?(\[|\.)?/g;function al(e,t){e.seq.push(t),e.map[t.id]=t}function ll(e,t,i){const n=e.name,r=n.length;for(sl.lastIndex=0;;){const o=sl.exec(n),s=sl.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===r){al(i,void 0===c?new nl(a,e,t):new rl(a,e,t));break}{let e=i.map[a];void 0===e&&(e=new ol(a),al(i,e)),i=e}}}class cl{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);ll(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){const r=this.map[t];void 0!==r&&r.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&i.push(r)}return i}}function ul(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}let hl=0;function dl(e,t,i){const n=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const n=parseInt(o[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const i=e.split("\n"),n=[],r=Math.max(t-6,0),o=Math.min(t+6,i.length);for(let s=r;s<o;s++){const e=s+1;n.push(`${e===t?">":" "} ${e}: ${i[s]}`)}return n.join("\n")}(e.getShaderSource(t),n)}return r}function pl(e,t){const i=function(e){const t=bn.getPrimaries(bn.workingColorSpace),i=bn.getPrimaries(e);let n;switch(t===i?n="":t===ci&&i===li?n="LinearDisplayP3ToLinearSRGB":t===li&&i===ci&&(n="LinearSRGBToLinearDisplayP3"),e){case ni:case oi:return[n,"LinearTransferOETF"];case ii:case ri:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[n,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function fl(e,t){let i;switch(t){case re:i="Linear";break;case oe:i="Reinhard";break;case se:i="Cineon";break;case ae:i="ACESFilmic";break;case ce:i="AgX";break;case ue:i="Neutral";break;case le:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const gl=new Nn;function ml(){bn.getLuminanceCoefficients(gl);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${gl.x.toFixed(4)}, ${gl.y.toFixed(4)}, ${gl.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function _l(e){return""!==e}function vl(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const bl=/^[ \t]*#include +<([\w\d./]+)>/gm;function Al(e){return e.replace(bl,xl)}const wl=new Map;function xl(e,t){let i=As[t];if(void 0===i){const e=wl.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");i=As[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Al(i)}const Sl=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cl(e){return e.replace(Sl,El)}function El(e,t,i,n){let r="";for(let o=parseInt(t);o<parseInt(i);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Tl(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Il(e,t,i,n){const r=e.getContext(),o=i.defines;let s=i.vertexShader,a=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===f?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===g?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===m&&(t="SHADOWMAP_TYPE_VSM"),t}(i),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case fe:case ge:t="ENVMAP_TYPE_CUBE";break;case ve:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ge&&(t="ENVMAP_MODE_REFRACTION");return t}(i),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case ee:t="ENVMAP_BLENDING_MULTIPLY";break;case te:t="ENVMAP_BLENDING_MIX";break;case ie:t="ENVMAP_BLENDING_ADD"}return t}(i),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_l).join("\n")}(i),_=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(o),v=r.createProgram();let y,b,A=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(y=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_].filter(_l).join("\n"),y.length>0&&(y+="\n"),b=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_].filter(_l).join("\n"),b.length>0&&(b+="\n")):(y=[Tl(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_l).join("\n"),b=[Tl(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,_,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==ne?"#define TONE_MAPPING":"",i.toneMapping!==ne?As.tonemapping_pars_fragment:"",i.toneMapping!==ne?fl("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",As.colorspace_pars_fragment,pl("linearToOutputTexel",i.outputColorSpace),ml(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(_l).join("\n")),s=Al(s),s=vl(s,i),s=yl(s,i),a=Al(a),a=vl(a,i),a=yl(a,i),s=Cl(s),a=Cl(a),!0!==i.isRawShaderMaterial&&(A="#version 300 es\n",y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#define varying in",i.glslVersion===Gi?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Gi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const w=A+y+s,x=A+b+a,S=ul(r,r.VERTEX_SHADER,w),C=ul(r,r.FRAGMENT_SHADER,x);function E(t){if(e.debug.checkShaderErrors){const i=r.getProgramInfoLog(v).trim(),n=r.getShaderInfoLog(S).trim(),o=r.getShaderInfoLog(C).trim();let s=!0,a=!0;if(!1===r.getProgramParameter(v,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,v,S,C);else{const e=dl(r,S,"vertex"),n=dl(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+i+"\n"+e+"\n"+n)}else""!==i?console.warn("THREE.WebGLProgram: Program Info Log:",i):""!==n&&""!==o||(a=!1);a&&(t.diagnostics={runnable:s,programLog:i,vertexShader:{log:n,prefix:y},fragmentShader:{log:o,prefix:b}})}r.deleteShader(S),r.deleteShader(C),T=new cl(r,v),I=function(e,t){const i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r),o=n.name;let s=1;n.type===e.FLOAT_MAT2&&(s=2),n.type===e.FLOAT_MAT3&&(s=3),n.type===e.FLOAT_MAT4&&(s=4),i[o]={type:n.type,location:e.getAttribLocation(t,o),locationSize:s}}return i}(r,v)}let T,I;r.attachShader(v,S),r.attachShader(v,C),void 0!==i.index0AttributeName?r.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),this.getUniforms=function(){return void 0===T&&E(this),T},this.getAttributes=function(){return void 0===I&&E(this),I};let M=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=r.getProgramParameter(v,37297)),M},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=hl++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=C,this}let Ml=0;class kl{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(n)&&(o.add(n),n.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Bl(e),t.set(e,i)),i}}class Bl{constructor(e){this.id=Ml++,this.code=e,this.usedTimes=0}}function Rl(e,t,i,n,r,o,s){const a=new Cr,l=new kl,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.reverseDepthBuffer,p=r.vertexTextures;let f=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(o,a,u,_,b){const w=_.fog,x=b.geometry,S=o.isMeshStandardMaterial?_.environment:null,C=(o.isMeshStandardMaterial?i:t).get(o.envMap||S),E=C&&C.mapping===ve?C.image.height:null,T=g[o.type];null!==o.precision&&(f=r.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const I=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,M=void 0!==I?I.length:0;let k,B,R,P,D=0;if(void 0!==x.morphAttributes.position&&(D=1),void 0!==x.morphAttributes.normal&&(D=2),void 0!==x.morphAttributes.color&&(D=3),T){const e=xs[T];k=e.vertexShader,B=e.fragmentShader}else k=o.vertexShader,B=o.fragmentShader,l.update(o),R=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const L=e.getRenderTarget(),O=!0===b.isInstancedMesh,F=!0===b.isBatchedMesh,N=!!o.map,z=!!o.matcap,U=!!C,H=!!o.aoMap,V=!!o.lightMap,$=!!o.bumpMap,G=!!o.normalMap,Q=!!o.displacementMap,j=!!o.emissiveMap,q=!!o.metalnessMap,W=!!o.roughnessMap,X=o.anisotropy>0,Y=o.clearcoat>0,K=o.dispersion>0,Z=o.iridescence>0,J=o.sheen>0,ee=o.transmission>0,te=X&&!!o.anisotropyMap,ie=Y&&!!o.clearcoatMap,re=Y&&!!o.clearcoatNormalMap,oe=Y&&!!o.clearcoatRoughnessMap,se=Z&&!!o.iridescenceMap,ae=Z&&!!o.iridescenceThicknessMap,le=J&&!!o.sheenColorMap,ce=J&&!!o.sheenRoughnessMap,ue=!!o.specularMap,he=!!o.specularColorMap,de=!!o.specularIntensityMap,pe=ee&&!!o.transmissionMap,fe=ee&&!!o.thicknessMap,ge=!!o.gradientMap,me=!!o.alphaMap,_e=o.alphaTest>0,ye=!!o.alphaHash,be=!!o.extensions;let Ae=ne;o.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(Ae=e.toneMapping));const we={shaderID:T,shaderType:o.type,shaderName:o.name,vertexShader:k,fragmentShader:B,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:F,batchingColor:F&&null!==b._colorsTexture,instancing:O,instancingColor:O&&null!==b.instanceColor,instancingMorph:O&&null!==b.morphTexture,supportsVertexTextures:p,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:ni,alphaToCoverage:!!o.alphaToCoverage,map:N,matcap:z,envMap:U,envMapMode:U&&C.mapping,envMapCubeUVHeight:E,aoMap:H,lightMap:V,bumpMap:$,normalMap:G,displacementMap:p&&Q,emissiveMap:j,normalMapObjectSpace:G&&o.normalMapType===ei,normalMapTangentSpace:G&&o.normalMapType===Jt,metalnessMap:q,roughnessMap:W,anisotropy:X,anisotropyMap:te,clearcoat:Y,clearcoatMap:ie,clearcoatNormalMap:re,clearcoatRoughnessMap:oe,dispersion:K,iridescence:Z,iridescenceMap:se,iridescenceThicknessMap:ae,sheen:J,sheenColorMap:le,sheenRoughnessMap:ce,specularMap:ue,specularColorMap:he,specularIntensityMap:de,transmission:ee,transmissionMap:pe,thicknessMap:fe,gradientMap:ge,opaque:!1===o.transparent&&o.blending===A&&!1===o.alphaToCoverage,alphaMap:me,alphaTest:_e,alphaHash:ye,combine:o.combine,mapUv:N&&m(o.map.channel),aoMapUv:H&&m(o.aoMap.channel),lightMapUv:V&&m(o.lightMap.channel),bumpMapUv:$&&m(o.bumpMap.channel),normalMapUv:G&&m(o.normalMap.channel),displacementMapUv:Q&&m(o.displacementMap.channel),emissiveMapUv:j&&m(o.emissiveMap.channel),metalnessMapUv:q&&m(o.metalnessMap.channel),roughnessMapUv:W&&m(o.roughnessMap.channel),anisotropyMapUv:te&&m(o.anisotropyMap.channel),clearcoatMapUv:ie&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:re&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:oe&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:se&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:ae&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:le&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:ce&&m(o.sheenRoughnessMap.channel),specularMapUv:ue&&m(o.specularMap.channel),specularColorMapUv:he&&m(o.specularColorMap.channel),specularIntensityMapUv:de&&m(o.specularIntensityMap.channel),transmissionMapUv:pe&&m(o.transmissionMap.channel),thicknessMapUv:fe&&m(o.thicknessMap.channel),alphaMapUv:me&&m(o.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(G||X),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,pointsUvs:!0===b.isPoints&&!!x.attributes.uv&&(N||me),fog:!!w,useFog:!0===o.fog,fogExp2:!!w&&w.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:d,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:M,morphTextureStride:D,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:Ae,decodeVideoTexture:N&&!0===o.map.isVideoTexture&&bn.getTransfer(o.map.colorSpace)===ai,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===y,flipSided:o.side===v,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:be&&!0===o.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(be&&!0===o.extensions.multiDraw||F)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return we.vertexUv1s=c.has(1),we.vertexUv2s=c.has(2),we.vertexUv3s=c.has(3),c.clear(),we},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(i,t),function(e,t){a.disableAll(),t.supportsVertexTextures&&a.enable(0);t.instancing&&a.enable(1);t.instancingColor&&a.enable(2);t.instancingMorph&&a.enable(3);t.matcap&&a.enable(4);t.envMap&&a.enable(5);t.normalMapObjectSpace&&a.enable(6);t.normalMapTangentSpace&&a.enable(7);t.clearcoat&&a.enable(8);t.iridescence&&a.enable(9);t.alphaTest&&a.enable(10);t.vertexColors&&a.enable(11);t.vertexAlphas&&a.enable(12);t.vertexUv1s&&a.enable(13);t.vertexUv2s&&a.enable(14);t.vertexUv3s&&a.enable(15);t.vertexTangents&&a.enable(16);t.anisotropy&&a.enable(17);t.alphaHash&&a.enable(18);t.batching&&a.enable(19);t.dispersion&&a.enable(20);t.batchingColor&&a.enable(21);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.reverseDepthBuffer&&a.enable(4);t.skinning&&a.enable(5);t.morphTargets&&a.enable(6);t.morphNormals&&a.enable(7);t.morphColors&&a.enable(8);t.premultipliedAlpha&&a.enable(9);t.shadowMapEnabled&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);t.alphaToCoverage&&a.enable(20);e.push(a.mask)}(i,t),i.push(e.outputColorSpace)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=g[e.type];let i;if(t){const e=xs[t];i=es.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new Il(e,i,t,o),u.push(n)),n},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Pl(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function Dl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ll(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ol(){const e=[];let t=0;const i=[],n=[],r=[];function o(i,n,r,o,s,a){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:o,renderOrder:i.renderOrder,z:s,group:a},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=o,l.renderOrder=i.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){t=0,i.length=0,n.length=0,r.length=0},push:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?n.push(u):!0===s.transparent?r.push(u):i.push(u)},unshift:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?n.unshift(u):!0===s.transparent?r.unshift(u):i.unshift(u)},finish:function(){for(let i=t,n=e.length;i<n;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Dl),n.length>1&&n.sort(t||Ll),r.length>1&&r.sort(t||Ll)}}}function Fl(){let e=new WeakMap;return{get:function(t,i){const n=e.get(t);let r;return void 0===n?(r=new Ol,e.set(t,[r])):i>=n.length?(r=new Ol,n.push(r)):r=n[i],r},dispose:function(){e=new WeakMap}}}function Nl(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Nn,color:new so};break;case"SpotLight":i={position:new Nn,direction:new Nn,color:new so,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Nn,color:new so,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Nn,skyColor:new so,groundColor:new so};break;case"RectAreaLight":i={color:new so,position:new Nn,halfWidth:new Nn,halfHeight:new Nn}}return e[t.id]=i,i}}}let zl=0;function Ul(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Hl(e){const t=new Nl,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)n.probe.push(new Nn);const r=new Nn,o=new fr,s=new fr;return{setup:function(r){let o=0,s=0,a=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,p=0,f=0,g=0,m=0,_=0,v=0;r.sort(Ul);for(let e=0,b=r.length;e<b;e++){const y=r[e],b=y.color,A=y.intensity,w=y.distance,x=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)o+=b.r*A,s+=b.g*A,a+=b.b*A;else if(y.isLightProbe){for(let e=0;e<9;e++)n.probe[e].addScaledVector(y.sh.coefficients[e],A);v++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=i.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,n.directionalShadow[l]=t,n.directionalShadowMap[l]=x,n.directionalShadowMatrix[l]=y.shadow.matrix,p++}n.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(b).multiplyScalar(A),e.distance=w,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,n.spot[u]=e;const r=y.shadow;if(y.map&&(n.spotLightMap[m]=y.map,m++,r.updateMatrices(y),y.castShadow&&_++),n.spotLightMatrix[u]=r.matrix,y.castShadow){const e=i.get(y);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,n.spotShadow[u]=e,n.spotShadowMap[u]=x,g++}u++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(b).multiplyScalar(A),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),n.rectArea[h]=e,h++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=i.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,n.pointShadow[c]=t,n.pointShadowMap[c]=x,n.pointShadowMatrix[c]=y.shadow.matrix,f++}n.point[c]=e,c++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(A),e.groundColor.copy(y.groundColor).multiplyScalar(A),n.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(n.rectAreaLTC1=ws.LTC_FLOAT_1,n.rectAreaLTC2=ws.LTC_FLOAT_2):(n.rectAreaLTC1=ws.LTC_HALF_1,n.rectAreaLTC2=ws.LTC_HALF_2)),n.ambient[0]=o,n.ambient[1]=s,n.ambient[2]=a;const y=n.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===u&&y.rectAreaLength===h&&y.hemiLength===d&&y.numDirectionalShadows===p&&y.numPointShadows===f&&y.numSpotShadows===g&&y.numSpotMaps===m&&y.numLightProbes===v||(n.directional.length=l,n.spot.length=u,n.rectArea.length=h,n.point.length=c,n.hemi.length=d,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=f,n.pointShadowMap.length=f,n.spotShadow.length=g,n.spotShadowMap.length=g,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=f,n.spotLightMatrix.length=g+m-_,n.spotLightMap.length=m,n.numSpotLightShadowsWithMaps=_,n.numLightProbes=v,y.directionalLength=l,y.pointLength=c,y.spotLength=u,y.rectAreaLength=h,y.hemiLength=d,y.numDirectionalShadows=p,y.numPointShadows=f,y.numSpotShadows=g,y.numSpotMaps=m,y.numLightProbes=v,n.version=zl++)},setupView:function(e,t){let i=0,a=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=n.directional[i];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),i++}else if(t.isSpotLight){const e=n.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=n.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),o.copy(t.matrixWorld),o.premultiply(h),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=n.point[a];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a++}else if(t.isHemisphereLight){const e=n.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:n}}function Vl(e){const t=new Hl(e),i=[],n=[];const r={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,i.length=0,n.length=0},state:r,setupLights:function(){t.setup(i)},setupLightsView:function(e){t.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function $l(e){let t=new WeakMap;return{get:function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(i);let o;return void 0===r?(o=new Vl(e),t.set(i,[o])):n>=r.length?(o=new Vl(e),r.push(o)):o=r[n],o},dispose:function(){t=new WeakMap}}}class Gl extends co{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Xt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ql extends co{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function jl(e,t,i){let n=new _s;const r=new sn,o=new sn,s=new kn,a=new Gl({depthPacking:Yt}),l=new Ql,c={},u=i.maxTextureSize,h={[_]:v,[v]:_,[y]:y},d=new ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const g=new Oo;g.setAttribute("position",new yo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Wo(g,d),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f;let x=this.type;function S(i,n){const o=t.update(A);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,p.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new Rn(r.x,r.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,o,d,A,null),p.uniforms.shadow_pass.value=i.mapPass.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,o,p,A,null)}function C(t,i,n,r){let o=null;const s=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===n.isPointLight?l:a,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=o.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=o.clone(),n[t]=r,i.addEventListener("dispose",T)),o=r}if(o.visible=i.visible,o.wireframe=i.wireframe,o.side=r===m?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:h[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=n}return o}function E(i,r,o,s,a){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&a===m)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);const n=t.update(i),l=i.material;if(Array.isArray(l)){const t=n.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=C(i,h,s,a);i.onBeforeShadow(e,i,r,o,n,t,u),e.renderBufferDirect(o,null,n,t,i,u),i.onAfterShadow(e,i,r,o,n,t,u)}}}else if(l.visible){const t=C(i,l,s,a);i.onBeforeShadow(e,i,r,o,n,t,null),e.renderBufferDirect(o,null,n,t,i,null),i.onAfterShadow(e,i,r,o,n,t,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)E(l[e],r,o,s,a)}function T(e){e.target.removeEventListener("dispose",T);for(const t in c){const i=c[t],n=e.target.uuid;if(n in i){i[n].dispose(),delete i[n]}}}this.render=function(t,i,a){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=x!==m&&this.type===m,f=x===m&&this.type!==m;for(let g=0,_=t.length;g<_;g++){const l=t[g],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),o.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/h.x),r.x=o.x*h.x,c.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/h.y),r.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===p||!0===f){const e=this.type!==m?{minFilter:we,magFilter:we}:{};null!==c.map&&c.map.dispose(),c.map=new Rn(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const _=c.getViewportCount();for(let e=0;e<_;e++){const t=c.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(s),c.updateMatrices(l,e),n=c.getFrustum(),E(i,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===m&&S(c,a),c.needsUpdate=!1}x=this.type,w.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const ql={[j]:q,[W]:Z,[Y]:J,[X]:K,[q]:j,[Z]:W,[J]:Y,[K]:X};function Wl(e){const t=new function(){let t=!1;const i=new kn;let n=null;const r=new kn(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,o,s,a){!0===a&&(t*=s,n*=s,o*=s),i.set(t,n,o,s),!1===r.equals(i)&&(e.clearColor(t,n,o,s),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},i=new function(){let t=!1,i=!1,n=null,r=null,o=null;return{setReversed:function(e){i=e},setTest:function(t){t?Se(e.DEPTH_TEST):Ce(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i&&(t=ql[t]),r!==t){switch(t){case j:e.depthFunc(e.NEVER);break;case q:e.depthFunc(e.ALWAYS);break;case W:e.depthFunc(e.LESS);break;case X:e.depthFunc(e.LEQUAL);break;case Y:e.depthFunc(e.EQUAL);break;case K:e.depthFunc(e.GEQUAL);break;case Z:e.depthFunc(e.GREATER);break;case J:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){o!==t&&(e.clearDepth(t),o=t)},reset:function(){t=!1,n=null,r=null,o=null}}},n=new function(){let t=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(i){t||(i?Se(e.STENCIL_TEST):Ce(e.STENCIL_TEST))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,s){n===t&&r===i&&o===s||(e.stencilFunc(t,i,s),n=t,r=i,o=s)},setOp:function(t,i,n){s===t&&a===i&&l===n||(e.stencilOp(t,i,n),s=t,a=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,c=null}}},r=new WeakMap,o=new WeakMap;let s={},a={},l=new WeakMap,d=[],p=null,f=!1,g=null,m=null,_=null,ee=null,te=null,ie=null,ne=null,re=new so(0,0,0),oe=0,se=!1,ae=null,le=null,ce=null,ue=null,he=null;const de=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let pe=!1,fe=0;const ge=e.getParameter(e.VERSION);-1!==ge.indexOf("WebGL")?(fe=parseFloat(/^WebGL (\d)/.exec(ge)[1]),pe=fe>=1):-1!==ge.indexOf("OpenGL ES")&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(ge)[1]),pe=fe>=2);let me=null,_e={};const ve=e.getParameter(e.SCISSOR_BOX),ye=e.getParameter(e.VIEWPORT),be=(new kn).fromArray(ve),Ae=(new kn).fromArray(ye);function we(t,i,n,r){const o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<n;a++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(i,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(i+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}const xe={};function Se(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function Ce(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}xe[e.TEXTURE_2D]=we(e.TEXTURE_2D,e.TEXTURE_2D,1),xe[e.TEXTURE_CUBE_MAP]=we(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[e.TEXTURE_2D_ARRAY]=we(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),xe[e.TEXTURE_3D]=we(e.TEXTURE_3D,e.TEXTURE_3D,1,1),t.setClear(0,0,0,1),i.setClear(1),n.setClear(0),Se(e.DEPTH_TEST),i.setFunc(X),Me(!1),ke(u),Se(e.CULL_FACE),Ie(b);const Ee={[E]:e.FUNC_ADD,[T]:e.FUNC_SUBTRACT,[I]:e.FUNC_REVERSE_SUBTRACT};Ee[M]=e.MIN,Ee[k]=e.MAX;const Te={[B]:e.ZERO,[R]:e.ONE,[P]:e.SRC_COLOR,[L]:e.SRC_ALPHA,[H]:e.SRC_ALPHA_SATURATE,[z]:e.DST_COLOR,[F]:e.DST_ALPHA,[D]:e.ONE_MINUS_SRC_COLOR,[O]:e.ONE_MINUS_SRC_ALPHA,[U]:e.ONE_MINUS_DST_COLOR,[N]:e.ONE_MINUS_DST_ALPHA,[V]:e.CONSTANT_COLOR,[$]:e.ONE_MINUS_CONSTANT_COLOR,[G]:e.CONSTANT_ALPHA,[Q]:e.ONE_MINUS_CONSTANT_ALPHA};function Ie(t,i,n,r,o,s,a,l,c,u){if(t!==b){if(!1===f&&(Se(e.BLEND),f=!0),t===C)o=o||i,s=s||n,a=a||r,i===m&&o===te||(e.blendEquationSeparate(Ee[i],Ee[o]),m=i,te=o),n===_&&r===ee&&s===ie&&a===ne||(e.blendFuncSeparate(Te[n],Te[r],Te[s],Te[a]),_=n,ee=r,ie=s,ne=a),!1!==l.equals(re)&&c===oe||(e.blendColor(l.r,l.g,l.b,c),re.copy(l),oe=c),g=t,se=!1;else if(t!==g||u!==se){if(m===E&&te===E||(e.blendEquation(e.FUNC_ADD),m=E,te=E),u)switch(t){case A:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case w:e.blendFunc(e.ONE,e.ONE);break;case x:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case S:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case A:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case w:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case x:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case S:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}_=null,ee=null,ie=null,ne=null,re.set(0,0,0),oe=0,g=t,se=u}}else!0===f&&(Ce(e.BLEND),f=!1)}function Me(t){ae!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ae=t)}function ke(t){t!==c?(Se(e.CULL_FACE),t!==le&&(t===u?e.cullFace(e.BACK):t===h?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Ce(e.CULL_FACE),le=t}function Be(t,i,n){t?(Se(e.POLYGON_OFFSET_FILL),ue===i&&he===n||(e.polygonOffset(i,n),ue=i,he=n)):Ce(e.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:i,stencil:n},enable:Se,disable:Ce,bindFramebuffer:function(t,i){return a[t]!==i&&(e.bindFramebuffer(t,i),a[t]=i,t===e.DRAW_FRAMEBUFFER&&(a[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(a[e.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(t,i){let n=d,r=!1;if(t){n=l.get(i),void 0===n&&(n=[],l.set(i,n));const o=t.textures;if(n.length!==o.length||n[0]!==e.COLOR_ATTACHMENT0){for(let t=0,i=o.length;t<i;t++)n[t]=e.COLOR_ATTACHMENT0+t;n.length=o.length,r=!0}}else n[0]!==e.BACK&&(n[0]=e.BACK,r=!0);r&&e.drawBuffers(n)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:Ie,setMaterial:function(r,o){r.side===y?Ce(e.CULL_FACE):Se(e.CULL_FACE);let s=r.side===v;o&&(s=!s),Me(s),r.blending===A&&!1===r.transparent?Ie(b):Ie(r.blending,r.blendEquation,r.blendSrc,r.blendDst,r.blendEquationAlpha,r.blendSrcAlpha,r.blendDstAlpha,r.blendColor,r.blendAlpha,r.premultipliedAlpha),i.setFunc(r.depthFunc),i.setTest(r.depthTest),i.setMask(r.depthWrite),t.setMask(r.colorWrite);const a=r.stencilWrite;n.setTest(a),a&&(n.setMask(r.stencilWriteMask),n.setFunc(r.stencilFunc,r.stencilRef,r.stencilFuncMask),n.setOp(r.stencilFail,r.stencilZFail,r.stencilZPass)),Be(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),!0===r.alphaToCoverage?Se(e.SAMPLE_ALPHA_TO_COVERAGE):Ce(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Me,setCullFace:ke,setLineWidth:function(t){t!==ce&&(pe&&e.lineWidth(t),ce=t)},setPolygonOffset:Be,setScissorTest:function(t){t?Se(e.SCISSOR_TEST):Ce(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+de-1),me!==t&&(e.activeTexture(t),me=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===me?e.TEXTURE0+de-1:me);let r=_e[n];void 0===r&&(r={type:void 0,texture:void 0},_e[n]=r),r.type===t&&r.texture===i||(me!==n&&(e.activeTexture(n),me=n),e.bindTexture(t,i||xe[t]),r.type=t,r.texture=i)},unbindTexture:function(){const t=_e[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,i){let n=o.get(i);void 0===n&&(n=new WeakMap,o.set(i,n));let r=n.get(t);void 0===r&&(r=e.getUniformBlockIndex(i,t.name),n.set(t,r))},uniformBlockBinding:function(t,i){const n=o.get(i).get(t);r.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),r.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===be.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),be.copy(t))},viewport:function(t){!1===Ae.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Ae.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},me=null,_e={},a={},l=new WeakMap,d=[],p=null,f=!1,g=null,m=null,_=null,ee=null,te=null,ie=null,ne=null,re=new so(0,0,0),oe=0,se=!1,ae=null,le=null,ce=null,ue=null,he=null,be.set(0,0,e.canvas.width,e.canvas.height),Ae.set(0,0,e.canvas.width,e.canvas.height),t.reset(),i.reset(),n.reset()}}}function Xl(e,t,i,n){const r=function(e){switch(e){case Re:case Pe:return{byteLength:1,components:1};case Le:case De:case ze:return{byteLength:2,components:1};case Ue:case He:return{byteLength:2,components:4};case Fe:case Oe:case Ne:return{byteLength:4,components:1};case $e:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(n);switch(i){case Ge:case qe:return e*t;case We:return e*t*2;case Ke:case Ze:return e*t/r.components*r.byteLength;case Je:case et:return e*t*2/r.components*r.byteLength;case Qe:return e*t*3/r.components*r.byteLength;case je:case it:return e*t*4/r.components*r.byteLength;case nt:case rt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case ot:case st:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case lt:case ut:return Math.max(e,16)*Math.max(t,8)/4;case at:case ct:return Math.max(e,8)*Math.max(t,8)/2;case ht:case dt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case pt:case ft:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case gt:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case mt:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case _t:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case vt:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case yt:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case bt:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case At:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case wt:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case xt:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case St:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Ct:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Et:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Tt:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case It:case Mt:case kt:return Math.ceil(e/4)*Math.ceil(t/4)*16;case Bt:case Rt:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Pt:case Dt:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}const Yl={contain:function(e,t){const i=e.image&&e.image.width?e.image.width/e.image.height:1;return i>t?(e.repeat.x=1,e.repeat.y=i/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/i,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const i=e.image&&e.image.width?e.image.width/e.image.height:1;return i>t?(e.repeat.x=t/i,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=i/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:Xl};function Kl(e,t,i,n,r,o,s){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new sn,u=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch($g){}function f(e,t){return p?new OffscreenCanvas(e,t):dn("canvas")}function g(e,t,i){let n=1;const r=U(e);if((r.width>i||r.height>i)&&(n=i/Math.max(r.width,r.height)),n<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const i=Math.floor(n*r.width),o=Math.floor(n*r.height);void 0===h&&(h=f(i,o));const s=t?f(i,o):h;s.width=i,s.height=o;return s.getContext("2d").drawImage(e,0,0,i,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+i+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function m(e){return e.generateMipmaps&&e.minFilter!==we&&e.minFilter!==Te}function _(t){e.generateMipmap(t)}function v(i,n,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let a=n;if(n===e.RED&&(r===e.FLOAT&&(a=e.R32F),r===e.HALF_FLOAT&&(a=e.R16F),r===e.UNSIGNED_BYTE&&(a=e.R8)),n===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.R8UI),r===e.UNSIGNED_SHORT&&(a=e.R16UI),r===e.UNSIGNED_INT&&(a=e.R32UI),r===e.BYTE&&(a=e.R8I),r===e.SHORT&&(a=e.R16I),r===e.INT&&(a=e.R32I)),n===e.RG&&(r===e.FLOAT&&(a=e.RG32F),r===e.HALF_FLOAT&&(a=e.RG16F),r===e.UNSIGNED_BYTE&&(a=e.RG8)),n===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RG8UI),r===e.UNSIGNED_SHORT&&(a=e.RG16UI),r===e.UNSIGNED_INT&&(a=e.RG32UI),r===e.BYTE&&(a=e.RG8I),r===e.SHORT&&(a=e.RG16I),r===e.INT&&(a=e.RG32I)),n===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RGB8UI),r===e.UNSIGNED_SHORT&&(a=e.RGB16UI),r===e.UNSIGNED_INT&&(a=e.RGB32UI),r===e.BYTE&&(a=e.RGB8I),r===e.SHORT&&(a=e.RGB16I),r===e.INT&&(a=e.RGB32I)),n===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(a=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(a=e.RGBA16UI),r===e.UNSIGNED_INT&&(a=e.RGBA32UI),r===e.BYTE&&(a=e.RGBA8I),r===e.SHORT&&(a=e.RGBA16I),r===e.INT&&(a=e.RGBA32I)),n===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(a=e.RGB9_E5),n===e.RGBA){const t=s?si:bn.getTransfer(o);r===e.FLOAT&&(a=e.RGBA32F),r===e.HALF_FLOAT&&(a=e.RGBA16F),r===e.UNSIGNED_BYTE&&(a=t===ai?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(a=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(a=e.RGB5_A1)}return a!==e.R16F&&a!==e.R32F&&a!==e.RG16F&&a!==e.RG32F&&a!==e.RGBA16F&&a!==e.RGBA32F||t.get("EXT_color_buffer_float"),a}function y(t,i){let n;return t?null===i||i===Fe||i===Ve?n=e.DEPTH24_STENCIL8:i===Ne?n=e.DEPTH32F_STENCIL8:i===Le&&(n=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===i||i===Fe||i===Ve?n=e.DEPTH_COMPONENT24:i===Ne?n=e.DEPTH_COMPONENT32F:i===Le&&(n=e.DEPTH_COMPONENT16),n}function b(e,t){return!0===m(e)||e.isFramebufferTexture&&e.minFilter!==we&&e.minFilter!==Te?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){const t=e.target;t.removeEventListener("dispose",A),function(e){const t=n.get(e);if(void 0===t.__webglInit)return;const i=e.source,r=d.get(i);if(r){const n=r[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&x(e),0===Object.keys(r).length&&d.delete(i)}n.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function w(t){const i=t.target;i.removeEventListener("dispose",w),function(t){const i=n.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let n=0;n<6;n++){if(Array.isArray(i.__webglFramebuffer[n]))for(let t=0;t<i.__webglFramebuffer[n].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[n][t]);else e.deleteFramebuffer(i.__webglFramebuffer[n]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[n])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}const r=t.textures;for(let o=0,a=r.length;o<a;o++){const t=n.get(r[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),n.remove(r[o])}n.remove(t)}(i)}function x(t){const i=n.get(t);e.deleteTexture(i.__webglTexture);const r=t.source;delete d.get(r)[i.__cacheKey],s.memory.textures--}let S=0;function C(t,r){const o=n.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void B(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}const E={[ye]:e.REPEAT,[be]:e.CLAMP_TO_EDGE,[Ae]:e.MIRRORED_REPEAT},T={[we]:e.NEAREST,[xe]:e.NEAREST_MIPMAP_NEAREST,[Ce]:e.NEAREST_MIPMAP_LINEAR,[Te]:e.LINEAR,[Ie]:e.LINEAR_MIPMAP_NEAREST,[ke]:e.LINEAR_MIPMAP_LINEAR},I={[Ei]:e.NEVER,[Pi]:e.ALWAYS,[Ti]:e.LESS,[Mi]:e.LEQUAL,[Ii]:e.EQUAL,[Ri]:e.GEQUAL,[ki]:e.GREATER,[Bi]:e.NOTEQUAL};function M(i,o){if(o.type!==Ne||!1!==t.has("OES_texture_float_linear")||o.magFilter!==Te&&o.magFilter!==Ie&&o.magFilter!==Ce&&o.magFilter!==ke&&o.minFilter!==Te&&o.minFilter!==Ie&&o.minFilter!==Ce&&o.minFilter!==ke||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(i,e.TEXTURE_WRAP_S,E[o.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,E[o.wrapT]),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,E[o.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,T[o.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,T[o.minFilter]),o.compareFunction&&(e.texParameteri(i,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(i,e.TEXTURE_COMPARE_FUNC,I[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===we)return;if(o.minFilter!==Ce&&o.minFilter!==ke)return;if(o.type===Ne&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||n.get(o).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy}}}function k(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",A));const r=i.source;let o=d.get(r);void 0===o&&(o={},d.set(r,o));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(i);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,n=!0),o[a].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&x(i)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return n}function B(t,s,a){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const c=k(t,s),u=s.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const h=n.get(u);if(u.version!==h.__version||!0===c){i.activeTexture(e.TEXTURE0+a);const t=bn.getPrimaries(bn.workingColorSpace),n=s.colorSpace===ti?null:bn.getPrimaries(s.colorSpace),d=s.colorSpace===ti||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=g(s.image,!1,r.maxTextureSize);p=z(s,p);const f=o.convert(s.format,s.colorSpace),A=o.convert(s.type);let w,x=v(s.internalFormat,f,A,s.colorSpace,s.isVideoTexture);M(l,s);const S=s.mipmaps,C=!0!==s.isVideoTexture,E=void 0===h.__version||!0===c,T=u.dataReady,I=b(s,p);if(s.isDepthTexture)x=y(s.format===Ye,s.type),E&&(C?i.texStorage2D(e.TEXTURE_2D,1,x,p.width,p.height):i.texImage2D(e.TEXTURE_2D,0,x,p.width,p.height,0,f,A,null));else if(s.isDataTexture)if(S.length>0){C&&E&&i.texStorage2D(e.TEXTURE_2D,I,x,S[0].width,S[0].height);for(let t=0,n=S.length;t<n;t++)w=S[t],C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,A,w.data):i.texImage2D(e.TEXTURE_2D,t,x,w.width,w.height,0,f,A,w.data);s.generateMipmaps=!1}else C?(E&&i.texStorage2D(e.TEXTURE_2D,I,x,p.width,p.height),T&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,f,A,p.data)):i.texImage2D(e.TEXTURE_2D,0,x,p.width,p.height,0,f,A,p.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){C&&E&&i.texStorage3D(e.TEXTURE_2D_ARRAY,I,x,S[0].width,S[0].height,p.depth);for(let t=0,n=S.length;t<n;t++)if(w=S[t],s.format!==je)if(null!==f)if(C){if(T)if(s.layerUpdates.size>0){const n=Xl(w.width,w.height,s.format,s.type);for(const r of s.layerUpdates){const o=w.data.subarray(r*n/w.data.BYTES_PER_ELEMENT,(r+1)*n/w.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,w.width,w.height,1,f,o,0,0)}s.clearLayerUpdates()}else i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,f,w.data,0,0)}else i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,x,w.width,w.height,p.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?T&&i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,f,A,w.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,x,w.width,w.height,p.depth,0,f,A,w.data)}else{C&&E&&i.texStorage2D(e.TEXTURE_2D,I,x,S[0].width,S[0].height);for(let t=0,n=S.length;t<n;t++)w=S[t],s.format!==je?null!==f?C?T&&i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,w.data):i.compressedTexImage2D(e.TEXTURE_2D,t,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,A,w.data):i.texImage2D(e.TEXTURE_2D,t,x,w.width,w.height,0,f,A,w.data)}else if(s.isDataArrayTexture)if(C){if(E&&i.texStorage3D(e.TEXTURE_2D_ARRAY,I,x,p.width,p.height,p.depth),T)if(s.layerUpdates.size>0){const t=Xl(p.width,p.height,s.format,s.type);for(const n of s.layerUpdates){const r=p.data.subarray(n*t/p.data.BYTES_PER_ELEMENT,(n+1)*t/p.data.BYTES_PER_ELEMENT);i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,n,p.width,p.height,1,f,A,r)}s.clearLayerUpdates()}else i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,A,p.data)}else i.texImage3D(e.TEXTURE_2D_ARRAY,0,x,p.width,p.height,p.depth,0,f,A,p.data);else if(s.isData3DTexture)C?(E&&i.texStorage3D(e.TEXTURE_3D,I,x,p.width,p.height,p.depth),T&&i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,A,p.data)):i.texImage3D(e.TEXTURE_3D,0,x,p.width,p.height,p.depth,0,f,A,p.data);else if(s.isFramebufferTexture){if(E)if(C)i.texStorage2D(e.TEXTURE_2D,I,x,p.width,p.height);else{let t=p.width,n=p.height;for(let r=0;r<I;r++)i.texImage2D(e.TEXTURE_2D,r,x,t,n,0,f,A,null),t>>=1,n>>=1}}else if(S.length>0){if(C&&E){const t=U(S[0]);i.texStorage2D(e.TEXTURE_2D,I,x,t.width,t.height)}for(let t=0,n=S.length;t<n;t++)w=S[t],C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,f,A,w):i.texImage2D(e.TEXTURE_2D,t,x,f,A,w);s.generateMipmaps=!1}else if(C){if(E){const t=U(p);i.texStorage2D(e.TEXTURE_2D,I,x,t.width,t.height)}T&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,f,A,p)}else i.texImage2D(e.TEXTURE_2D,0,x,f,A,p);m(s)&&_(l),h.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function R(t,r,s,l,c,u){const h=o.convert(s.format,s.colorSpace),d=o.convert(s.type),p=v(s.internalFormat,h,d,s.colorSpace);if(!n.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>u),n=Math.max(1,r.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?i.texImage3D(c,u,p,t,n,r.depth,0,h,d,null):i.texImage2D(c,u,p,t,n,0,h,d,null)}i.bindFramebuffer(e.FRAMEBUFFER,t),N(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,n.get(s).__webglTexture,0,F(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,n.get(s).__webglTexture,u),i.bindFramebuffer(e.FRAMEBUFFER,null)}function P(t,i,n){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer){const r=i.depthTexture,o=r&&r.isDepthTexture?r.type:null,s=y(i.stencilBuffer,o),l=i.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=F(i);N(i)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,s,i.width,i.height):n?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,s,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,s,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=i.textures;for(let r=0;r<t.length;r++){const s=t[r],l=o.convert(s.format,s.colorSpace),c=o.convert(s.type),u=v(s.internalFormat,l,c,s.colorSpace),h=F(i);n&&!1===N(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,i.width,i.height):N(i)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,u,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t){const r=n.get(t),o=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),C(r.depthTexture,0);const o=n.get(r.depthTexture).__webglTexture,s=F(r);if(r.depthTexture.format===Xe)N(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");N(r)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)if(i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[n]),void 0===r.__webglDepthbuffer[n])r.__webglDepthbuffer[n]=e.createRenderbuffer(),P(r.__webglDepthbuffer[n],t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=r.__webglDepthbuffer[n];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,o)}}else if(i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),P(r.__webglDepthbuffer,t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,n=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,n)}i.bindFramebuffer(e.FRAMEBUFFER,null)}const L=[],O=[];function F(e){return Math.min(r.maxSamples,e.samples)}function N(e){const i=n.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function z(e,t){const i=e.colorSpace,n=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||i!==ni&&i!==ti&&(bn.getTransfer(i)===ai?n===je&&r===Re||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),t}function U(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=S;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=C,this.setTexture2DArray=function(t,r){const o=n.get(t);t.version>0&&o.__version!==t.version?B(o,t,r):i.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const o=n.get(t);t.version>0&&o.__version!==t.version?B(o,t,r):i.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const a=n.get(t);t.version>0&&a.__version!==t.version?function(t,s,a){if(6!==s.image.length)return;const l=k(t,s),c=s.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const u=n.get(c);if(c.version!==u.__version||!0===l){i.activeTexture(e.TEXTURE0+a);const t=bn.getPrimaries(bn.workingColorSpace),n=s.colorSpace===ti?null:bn.getPrimaries(s.colorSpace),h=s.colorSpace===ti||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?s.image[e].image:s.image[e]:g(s.image[e],!0,r.maxCubemapSize),f[e]=z(s,f[e]);const y=f[0],A=o.convert(s.format,s.colorSpace),w=o.convert(s.type),x=v(s.internalFormat,A,w,s.colorSpace),S=!0!==s.isVideoTexture,C=void 0===u.__version||!0===l,E=c.dataReady;let T,I=b(s,y);if(M(e.TEXTURE_CUBE_MAP,s),d){S&&C&&i.texStorage2D(e.TEXTURE_CUBE_MAP,I,x,y.width,y.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let n=0;n<T.length;n++){const r=T[n];s.format!==je?null!==A?S?E&&i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,r.width,r.height,A,r.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,x,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,r.width,r.height,A,w,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,x,r.width,r.height,0,A,w,r.data)}}}else{if(T=s.mipmaps,S&&C){T.length>0&&I++;const t=U(f[0]);i.texStorage2D(e.TEXTURE_CUBE_MAP,I,x,t.width,t.height)}for(let t=0;t<6;t++)if(p){S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,A,w,f[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,x,f[t].width,f[t].height,0,A,w,f[t].data);for(let n=0;n<T.length;n++){const r=T[n].image[t].image;S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,r.width,r.height,A,w,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,x,r.width,r.height,0,A,w,r.data)}}else{S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,A,w,f[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,x,A,w,f[t]);for(let n=0;n<T.length;n++){const r=T[n];S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,A,w,r.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,x,A,w,r.image[t])}}}m(s)&&_(e.TEXTURE_CUBE_MAP),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(a,t,s):i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,i,r){const o=n.get(t);void 0!==i&&R(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&D(t)},this.setupRenderTarget=function(t){const r=t.texture,a=n.get(t),l=n.get(r);t.addEventListener("dispose",w);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,s.memory.textures++),u){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let i=0;i<r.mipmaps.length;i++)a.__webglFramebuffer[t][i]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,i=c.length;t<i;t++){const i=n.get(c[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===N(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let i=0;i<c.length;i++){const n=c[i];a.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[i]);const r=o.convert(n.format,n.colorSpace),s=o.convert(n.type),l=v(n.internalFormat,r,s,n.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,a.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),P(a.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){i.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),M(e.TEXTURE_CUBE_MAP,r);for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)R(a.__webglFramebuffer[i][n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n);else R(a.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);m(r)&&_(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(h){for(let r=0,o=c.length;r<o;r++){const o=c[r],s=n.get(o);i.bindTexture(e.TEXTURE_2D,s.__webglTexture),M(e.TEXTURE_2D,o),R(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),m(o)&&_(e.TEXTURE_2D)}i.unbindTexture()}else{let n=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(n=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),i.bindTexture(n,l.__webglTexture),M(n,r),r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)R(a.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,n,i);else R(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,n,0);m(r)&&_(n),i.unbindTexture()}t.depthBuffer&&D(t)},this.updateRenderTargetMipmap=function(t){const r=t.textures;for(let o=0,s=r.length;o<s;o++){const s=r[o];if(m(s)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=n.get(s).__webglTexture;i.bindTexture(r,o),_(r),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===N(t)){const r=t.textures,o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=n.get(t),h=r.length>1;if(h)for(let t=0;t<r.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let i=0;i<r.length;i++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[i]);const t=n.get(r[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),!0===l&&(L.length=0,O.length=0,L.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&!1===t.resolveDepthBuffer&&(L.push(c),O.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,O)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,L))}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=n.get(r[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[i])}},this.setupDepthRenderbuffer=D,this.setupFrameBufferTexture=R,this.useMultisampledRTT=N}function Zl(e,t){return{convert:function(i){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ti;const o=bn.getTransfer(r);if(i===Re)return e.UNSIGNED_BYTE;if(i===Ue)return e.UNSIGNED_SHORT_4_4_4_4;if(i===He)return e.UNSIGNED_SHORT_5_5_5_1;if(i===$e)return e.UNSIGNED_INT_5_9_9_9_REV;if(i===Pe)return e.BYTE;if(i===De)return e.SHORT;if(i===Le)return e.UNSIGNED_SHORT;if(i===Oe)return e.INT;if(i===Fe)return e.UNSIGNED_INT;if(i===Ne)return e.FLOAT;if(i===ze)return e.HALF_FLOAT;if(i===Ge)return e.ALPHA;if(i===Qe)return e.RGB;if(i===je)return e.RGBA;if(i===qe)return e.LUMINANCE;if(i===We)return e.LUMINANCE_ALPHA;if(i===Xe)return e.DEPTH_COMPONENT;if(i===Ye)return e.DEPTH_STENCIL;if(i===Ke)return e.RED;if(i===Ze)return e.RED_INTEGER;if(i===Je)return e.RG;if(i===et)return e.RG_INTEGER;if(i===it)return e.RGBA_INTEGER;if(i===nt||i===rt||i===ot||i===st)if(o===ai){if(n=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===n)return null;if(i===nt)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rt)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ot)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===st)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(i===nt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ot)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===st)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===at||i===lt||i===ct||i===ut){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(i===at)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===lt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===ct)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===ut)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===ht||i===dt||i===pt){if(n=t.get("WEBGL_compressed_texture_etc"),null===n)return null;if(i===ht||i===dt)return o===ai?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(i===pt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(i===ft||i===gt||i===mt||i===_t||i===vt||i===yt||i===bt||i===At||i===wt||i===xt||i===St||i===Ct||i===Et||i===Tt){if(n=t.get("WEBGL_compressed_texture_astc"),null===n)return null;if(i===ft)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===gt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===mt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===_t)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===vt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===yt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===bt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===At)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===wt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===xt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===St)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ct)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Et)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Tt)return o===ai?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===It||i===Mt||i===kt){if(n=t.get("EXT_texture_compression_bptc"),null===n)return null;if(i===It)return o===ai?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Mt)return n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===kt)return n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===Bt||i===Rt||i===Pt||i===Dt){if(n=t.get("EXT_texture_compression_rgtc"),null===n)return null;if(i===It)return n.COMPRESSED_RED_RGTC1_EXT;if(i===Rt)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Pt)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Dt)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ve?e.UNSIGNED_INT_24_8:void 0!==e[i]?e[i]:null}}}class Jl extends ss{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class ec extends Hr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tc={type:"move"};class ic{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ec,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ec,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Nn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Nn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ec,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Nn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Nn),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,i),n=this._getHandJoint(l,o);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=e.radius),n.visible=null!==e}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=n.position.distanceTo(r.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(tc)))}return null!==s&&(s.visible=null!==n),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new ec;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class nc{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const n=new Mn;e.properties.get(n).__webglTexture=t.texture,t.depthNear==i.depthNear&&t.depthFar==i.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new ts({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Wo(new bs(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class rc extends qi{constructor(e,t){super();const i=this;let n=null,r=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=new nc,g=t.getContextAttributes();let m=null,_=null;const v=[],y=[],b=new sn;let A=null;const w=new ss;w.layers.enable(1),w.viewport=new kn;const x=new ss;x.layers.enable(2),x.viewport=new kn;const S=[w,x],C=new Jl;C.layers.enable(1),C.layers.enable(2);let E=null,T=null;function I(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const i=v[t];void 0!==i&&(i.update(e.inputSource,e.frame,l||o),i.dispatchEvent({type:e.type,data:e.inputSource}))}function M(){n.removeEventListener("select",I),n.removeEventListener("selectstart",I),n.removeEventListener("selectend",I),n.removeEventListener("squeeze",I),n.removeEventListener("squeezestart",I),n.removeEventListener("squeezeend",I),n.removeEventListener("end",M),n.removeEventListener("inputsourceschange",k);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,T=null,f.reset(),e.setRenderTarget(m),d=null,h=null,u=null,n=null,_=null,L.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(b.width,b.height,!1),i.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=y.indexOf(i);n>=0&&(y[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let n=y.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(i),n=e;break}if(null===y[e]){y[e]=i,n=e;break}}if(-1===n)break}const r=v[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(c){if(n=c,null!==n){if(m=e.getRenderTarget(),n.addEventListener("select",I),n.addEventListener("selectstart",I),n.addEventListener("selectend",I),n.addEventListener("squeeze",I),n.addEventListener("squeezestart",I),n.addEventListener("squeezeend",I),n.addEventListener("end",M),n.addEventListener("inputsourceschange",k),!0!==g.xrCompatible&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(b),void 0===n.renderState.layers){const i={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Rn(d.framebufferWidth,d.framebufferHeight,{format:je,type:Re,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let i=null,o=null,s=null;g.depth&&(s=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=g.stencil?Ye:Xe,o=g.stencil?Ve:Fe);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(n,t),h=u.createProjectionLayer(a),n.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Rn(h.textureWidth,h.textureHeight,{format:je,type:Re,depthTexture:new ra(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await n.requestReferenceSpace(s),L.setContext(n),L.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const B=new Nn,R=new Nn;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;let t=e.near,i=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(i=f.depthFar)),C.near=x.near=w.near=t,C.far=x.far=w.far=i,E===C.near&&T===C.far||(n.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,T=C.far);const r=e.parent,o=C.cameras;P(C,r);for(let n=0;n<o.length;n++)P(o[n],r);2===o.length?function(e,t,i){B.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(i.matrixWorld);const n=B.distanceTo(R),r=t.projectionMatrix.elements,o=i.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=n/(-u+h),g=f*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(g),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+f,i=a+f,r=d-g,o=p+(n-g),u=l*a/i*t,h=c*a/i*t;e.projectionMatrix.makePerspective(r,o,u,h,t,i),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,w,x):C.projectionMatrix.copy(w.projectionMatrix),function(e,t,i){null===i?e.matrix.copy(t.matrixWorld):(e.matrix.copy(i.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Ki*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,r)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(e){a=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(C)};let D=null;const L=new vs;L.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let i=!1;t.length!==C.cameras.length&&(C.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let o=null;if(null!==d)o=d.getViewport(r);else{const t=u.getViewSubImage(h,r);o=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(_))}let s=S[n];void 0===s&&(s=new ss,s.layers.enable(n),s.viewport=new kn,S[n]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===n&&(C.matrix.copy(s.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===i&&C.cameras.push(s)}const r=n.enabledFeatures;if(r&&r.includes("depth-sensing")){const i=u.getDepthInformation(t[0]);i&&i.isValid&&i.texture&&f.init(e,i,n.renderState)}}for(let e=0;e<v.length;e++){const t=y[e],i=v[e];null!==t&&void 0!==i&&i.update(t,r,l||o)}D&&D(t,r),r.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}const oc=new Sr,sc=new fr;function ac(e,t){function i(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function n(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map,i(n.map,e.mapTransform)),n.alphaMap&&(e.alphaMap.value=n.alphaMap,i(n.alphaMap,e.alphaMapTransform)),n.bumpMap&&(e.bumpMap.value=n.bumpMap,i(n.bumpMap,e.bumpMapTransform),e.bumpScale.value=n.bumpScale,n.side===v&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,i(n.normalMap,e.normalMapTransform),e.normalScale.value.copy(n.normalScale),n.side===v&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,i(n.displacementMap,e.displacementMapTransform),e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap,i(n.emissiveMap,e.emissiveMapTransform)),n.specularMap&&(e.specularMap.value=n.specularMap,i(n.specularMap,e.specularMapTransform)),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const r=t.get(n),o=r.envMap,s=r.envMapRotation;o&&(e.envMap.value=o,oc.copy(s),oc.x*=-1,oc.y*=-1,oc.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(oc.y*=-1,oc.z*=-1),e.envMapRotation.value.setFromMatrix4(sc.makeRotationFromEuler(oc)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity,i(n.lightMap,e.lightMapTransform)),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity,i(n.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,Jo(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,i(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,i(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,i(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,i(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,i(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,i(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,i(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===v&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,i(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,i(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,i(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,i(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,i(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,i(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,i(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,i){const n=t.get(i).light;e.referencePosition.value.setFromMatrixPosition(n.matrixWorld),e.nearDistance.value=n.shadow.camera.near,e.farDistance.value=n.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map,i(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function lc(e,t,i,n){let r={},o={},s=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,i,n){const r=e.value,o=t+"_"+i;if(void 0===n[o])return n[o]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=n[o];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return n[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const i=t.target;i.removeEventListener("dispose",u);const n=s.indexOf(i.__bindingPointIndex);s.splice(n,1),e.deleteBuffer(r[i.id]),delete r[i.id],delete o[i.id]}return{bind:function(e,t){const i=t.program;n.uniformBlockBinding(e,i)},update:function(i,h){let d=r[i.id];void 0===d&&(!function(e){const t=e.uniforms;let i=0;const n=16;for(let o=0,s=t.length;o<s;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=o.length;e<t;e++){const t=c(o[e]),s=i%n,a=s%t.boundary,l=s+a;i+=a,0!==l&&n-l<t.storage&&(i+=n-l),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=i,i+=t.storage}}}const r=i%n;r>0&&(i+=n-r);e.__size=i,e.__cache={}}(i),d=function(t){const i=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const n=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,n),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,i,n),n}(i),r[i.id]=d,i.addEventListener("dispose",u));const p=h.program;n.updateUBOMapping(i,p);const f=t.render.frame;o[i.id]!==f&&(!function(t){const i=r[t.id],n=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let r=0,s=n.length;r<s;r++){const t=Array.isArray(n[r])?n[r]:[n[r]];for(let i=0,n=t.length;i<n;i++){const n=t[i];if(!0===l(n,r,i,o)){const t=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let o=0;o<i.length;o++){const s=i[o],a=c(s);"number"===typeof s||"boolean"===typeof s?(n.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,n.__data)):s.isMatrix3?(n.__data[0]=s.elements[0],n.__data[1]=s.elements[1],n.__data[2]=s.elements[2],n.__data[3]=0,n.__data[4]=s.elements[3],n.__data[5]=s.elements[4],n.__data[6]=s.elements[5],n.__data[7]=0,n.__data[8]=s.elements[6],n.__data[9]=s.elements[7],n.__data[10]=s.elements[8],n.__data[11]=0):(s.toArray(n.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),o[i.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},o={}}}}class cc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=pn(),context:i=null,depth:n=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==i){if("undefined"!==typeof WebGLRenderingContext&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=i.getContextAttributes().alpha}else d=o;const p=new Uint32Array(4),f=new Int32Array(4);let g=null,m=null;const b=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ii,this.toneMapping=ne,this.toneMappingExposure=1;const w=this;let x=!1,S=0,C=0,E=null,T=-1,I=null;const M=new kn,k=new kn;let B=null;const R=new so(0);let P=0,D=t.width,L=t.height,O=1,F=null,N=null;const z=new kn(0,0,D,L),U=new kn(0,0,D,L);let H=!1;const V=new _s;let $=!1,G=!1;const Q=new fr,j=new fr,q=new Nn,W=new kn,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function K(){return null===E?O:1}let Z,J,ee,te,ie,re,oe,se,ae,le,ce,ue,he,de,pe,fe,ge,me,_e,ve,ye,be,Ae,we,xe=i;function Se(e,i){return t.getContext(e,i)}try{const e={alpha:!0,depth:n,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${s}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===xe){const t="webgl2";if(xe=Se(t,e),null===xe)throw Se(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Je){throw console.error("THREE.WebGLRenderer: "+Je.message),Je}function Ce(){Z=new Zs(xe),Z.init(),be=new Zl(xe,Z),J=new ks(xe,Z,e,be),ee=new Wl(xe),J.reverseDepthBuffer&&ee.buffers.depth.setReversed(!0),te=new ta(xe),ie=new Pl,re=new Kl(xe,Z,ee,ie,J,be,te),oe=new Rs(w),se=new Ks(w),ae=new ys(xe),Ae=new Is(xe,ae),le=new Js(xe,ae,te,Ae),ce=new na(xe,le,ae,te),_e=new ia(xe,J,re),fe=new Bs(ie),ue=new Rl(w,oe,se,Z,J,Ae,fe),he=new ac(w,ie),de=new Fl,pe=new $l(Z),me=new Ts(w,oe,se,ee,ce,d,l),ge=new jl(w,ce,J),we=new lc(xe,te,J,ee),ve=new Ms(xe,Z,te),ye=new ea(xe,Z,te),te.programs=ue.programs,w.capabilities=J,w.extensions=Z,w.properties=ie,w.renderLists=de,w.shadowMap=ge,w.state=ee,w.info=te}Ce();const Ee=new rc(w,xe);function Te(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=te.autoReset,t=ge.enabled,i=ge.autoUpdate,n=ge.needsUpdate,r=ge.type;Ce(),te.autoReset=e,ge.enabled=t,ge.autoUpdate=i,ge.needsUpdate=n,ge.type=r}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Be(e){const t=e.target;t.removeEventListener("dispose",Be),function(e){(function(e){const t=ie.get(e).programs;void 0!==t&&(t.forEach((function(e){ue.releaseProgram(e)})),e.isShaderMaterial&&ue.releaseShaderCache(e))})(e),ie.remove(e)}(t)}function Pe(e,t,i){!0===e.transparent&&e.side===y&&!1===e.forceSinglePass?(e.side=v,e.needsUpdate=!0,Xe(e,t,i),e.side=_,e.needsUpdate=!0,Xe(e,t,i),e.side=y):Xe(e,t,i)}this.xr=Ee,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(D,L,!1))},this.getSize=function(e){return e.set(D,L)},this.setSize=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=e,L=i,t.width=Math.floor(e*O),t.height=Math.floor(i*O),!0===n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(D*O,L*O).floor()},this.setDrawingBufferSize=function(e,i,n){D=e,L=i,O=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(z)},this.setViewport=function(e,t,i,n){e.isVector4?z.set(e.x,e.y,e.z,e.w):z.set(e,t,i,n),ee.viewport(M.copy(z).multiplyScalar(O).round())},this.getScissor=function(e){return e.copy(U)},this.setScissor=function(e,t,i,n){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,i,n),ee.scissor(k.copy(U).multiplyScalar(O).round())},this.getScissorTest=function(){return H},this.setScissorTest=function(e){ee.setScissorTest(H=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(e){return e.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==E){const t=E.texture.format;e=t===it||t===et||t===Ze}if(e){const e=E.texture.type,t=e===Re||e===Fe||e===Le||e===Ve||e===Ue||e===He,i=me.getClearColor(),n=me.getClearAlpha(),r=i.r,o=i.g,s=i.b;t?(p[0]=r,p[1]=o,p[2]=s,p[3]=n,xe.clearBufferuiv(xe.COLOR,0,p)):(f[0]=r,f[1]=o,f[2]=s,f[3]=n,xe.clearBufferiv(xe.COLOR,0,f))}else i|=xe.COLOR_BUFFER_BIT}e&&(i|=xe.DEPTH_BUFFER_BIT,xe.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),t&&(i|=xe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),xe.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),de.dispose(),pe.dispose(),ie.dispose(),oe.dispose(),se.dispose(),ce.dispose(),Ae.dispose(),we.dispose(),ue.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",Oe),Ee.removeEventListener("sessionend",Ne),$e.stop()},this.renderBufferDirect=function(e,t,i,n,r,o){null===t&&(t=X);const s=r.isMesh&&r.matrixWorld.determinant()<0,a=function(e,t,i,n,r){!0!==t.isScene&&(t=X);re.resetTextureUnits();const o=t.fog,s=n.isMeshStandardMaterial?t.environment:null,a=null===E?w.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:ni,l=(n.isMeshStandardMaterial?se:oe).get(n.envMap||s),c=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,u=!!i.attributes.tangent&&(!!n.normalMap||n.anisotropy>0),h=!!i.morphAttributes.position,d=!!i.morphAttributes.normal,p=!!i.morphAttributes.color;let f=ne;n.toneMapped&&(null!==E&&!0!==E.isXRRenderTarget||(f=w.toneMapping));const g=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,_=void 0!==g?g.length:0,v=ie.get(n),y=m.state.lights;if(!0===$&&(!0===G||e!==I)){const t=e===I&&n.id===T;fe.setState(n,e,t)}let b=!1;n.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputColorSpace!==a||r.isBatchedMesh&&!1===v.batching?b=!0:r.isBatchedMesh||!0!==v.batching?r.isBatchedMesh&&!0===v.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===v.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===v.instancing?b=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?b=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===v.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===v.instancingMorph&&null!==r.morphTexture||v.envMap!==l||!0===n.fog&&v.fog!==o?b=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===fe.numPlanes&&v.numIntersection===fe.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||v.morphColors!==p||v.toneMapping!==f||v.morphTargetsCount!==_)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,v.__version=n.version);let A=v.currentProgram;!0===b&&(A=Xe(n,t,r));let x=!1,S=!1,C=!1;const M=A.getUniforms(),k=v.uniforms;ee.useProgram(A.program)&&(x=!0,S=!0,C=!0);n.id!==T&&(T=n.id,S=!0);if(x||I!==e){J.reverseDepthBuffer?(Q.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(Q),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(Q),M.setValue(xe,"projectionMatrix",Q)):M.setValue(xe,"projectionMatrix",e.projectionMatrix),M.setValue(xe,"viewMatrix",e.matrixWorldInverse);const t=M.map.cameraPosition;void 0!==t&&t.setValue(xe,q.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&M.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&M.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),I!==e&&(I=e,S=!0,C=!0)}if(r.isSkinnedMesh){M.setOptional(xe,r,"bindMatrix"),M.setOptional(xe,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(xe,"boneTexture",e.boneTexture,re))}r.isBatchedMesh&&(M.setOptional(xe,r,"batchingTexture"),M.setValue(xe,"batchingTexture",r._matricesTexture,re),M.setOptional(xe,r,"batchingIdTexture"),M.setValue(xe,"batchingIdTexture",r._indirectTexture,re),M.setOptional(xe,r,"batchingColorTexture"),null!==r._colorsTexture&&M.setValue(xe,"batchingColorTexture",r._colorsTexture,re));const B=i.morphAttributes;void 0===B.position&&void 0===B.normal&&void 0===B.color||_e.update(r,i,A);(S||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,M.setValue(xe,"receiveShadow",r.receiveShadow));n.isMeshGouraudMaterial&&null!==n.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);n.isMeshStandardMaterial&&null===n.envMap&&null!==t.environment&&(k.envMapIntensity.value=t.environmentIntensity);S&&(M.setValue(xe,"toneMappingExposure",w.toneMappingExposure),v.needsLights&&(P=C,(R=k).ambientLightColor.needsUpdate=P,R.lightProbe.needsUpdate=P,R.directionalLights.needsUpdate=P,R.directionalLightShadows.needsUpdate=P,R.pointLights.needsUpdate=P,R.pointLightShadows.needsUpdate=P,R.spotLights.needsUpdate=P,R.spotLightShadows.needsUpdate=P,R.rectAreaLights.needsUpdate=P,R.hemisphereLights.needsUpdate=P),o&&!0===n.fog&&he.refreshFogUniforms(k,o),he.refreshMaterialUniforms(k,n,O,L,m.state.transmissionRenderTarget[e.id]),cl.upload(xe,Ye(v),k,re));var R,P;n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(cl.upload(xe,Ye(v),k,re),n.uniformsNeedUpdate=!1);n.isSpriteMaterial&&M.setValue(xe,"center",r.center);if(M.setValue(xe,"modelViewMatrix",r.modelViewMatrix),M.setValue(xe,"normalMatrix",r.normalMatrix),M.setValue(xe,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++){const i=e[t];we.update(i,A),we.bind(i,A)}}return A}(e,t,i,n,r);ee.setMaterial(n,s);let l=i.index,c=1;if(!0===n.wireframe){if(l=le.getWireframeAttribute(i),void 0===l)return;c=2}const u=i.drawRange,h=i.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),p=Math.min(p,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let g;Ae.setup(r,n,a,i,l);let _=ve;if(null!==l&&(g=ae.get(l),_=ye,_.setIndex(g)),r.isMesh)!0===n.wireframe?(ee.setLineWidth(n.wireframeLinewidth*K()),_.setMode(xe.LINES)):_.setMode(xe.TRIANGLES);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),ee.setLineWidth(e*K()),r.isLineSegments?_.setMode(xe.LINES):r.isLineLoop?_.setMode(xe.LINE_LOOP):_.setMode(xe.LINE_STRIP)}else r.isPoints?_.setMode(xe.POINTS):r.isSprite&&_.setMode(xe.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)_.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(Z.get("WEBGL_multi_draw"))_.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,i=r._multiDrawCount,o=l?ae.get(l).bytesPerElement:1,s=ie.get(n).currentProgram.getUniforms();for(let n=0;n<i;n++)s.setValue(xe,"_gl_DrawID",n),_.render(e[n]/o,t[n])}else if(r.isInstancedMesh)_.renderInstances(d,f,r.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);_.renderInstances(d,f,t)}else _.render(d,f)},this.compile=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===i&&(i=e),m=pe.get(i),m.init(t),A.push(m),i.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==i&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights();const n=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Pe(o,i,e),n.add(o)}else Pe(t,i,e),n.add(t)})),A.pop(),m=null,n},this.compileAsync=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.compile(e,t,i);return new Promise((t=>{function i(){n.forEach((function(e){ie.get(e).currentProgram.isReady()&&n.delete(e)})),0!==n.size?setTimeout(i,10):t(e)}null!==Z.get("KHR_parallel_shader_compile")?i():setTimeout(i,10)}))};let De=null;function Oe(){$e.stop()}function Ne(){$e.start()}const $e=new vs;function Ge(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||V.intersectsSprite(e)){n&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ce.update(e),r=e.material;r.visible&&g.push(e,t,r,i,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||V.intersectsObject(e))){const t=ce.update(e),r=e.material;if(n&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(j)),Array.isArray(r)){const n=t.groups;for(let o=0,s=n.length;o<s;o++){const s=n[o],a=r[s.materialIndex];a&&a.visible&&g.push(e,t,a,i,W.z,s)}}else r.visible&&g.push(e,t,r,i,W.z,null)}const r=e.children;for(let o=0,s=r.length;o<s;o++)Ge(r[o],t,i,n)}function Qe(e,t,i,n){const r=e.opaque,o=e.transmissive,s=e.transparent;m.setupLightsView(i),!0===$&&fe.setGlobalState(w.clippingPlanes,i),n&&ee.viewport(M.copy(n)),r.length>0&&qe(r,t,i),o.length>0&&qe(o,t,i),s.length>0&&qe(s,t,i),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function je(e,t,i,n){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[n.id]&&(m.state.transmissionRenderTarget[n.id]=new Rn(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")||Z.has("EXT_color_buffer_float")?ze:Re,minFilter:ke,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:bn.workingColorSpace}));const o=m.state.transmissionRenderTarget[n.id],s=n.viewport||M;o.setSize(s.z,s.w);const a=w.getRenderTarget();w.setRenderTarget(o),w.getClearColor(R),P=w.getClearAlpha(),P<1&&w.setClearColor(16777215,.5),w.clear(),Y&&me.render(i);const l=w.toneMapping;w.toneMapping=ne;const c=n.viewport;if(void 0!==n.viewport&&(n.viewport=void 0),m.setupLightsView(n),!0===$&&fe.setGlobalState(w.clippingPlanes,n),qe(e,i,n),re.updateMultisampleRenderTarget(o),re.updateRenderTargetMipmap(o),!1===Z.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,o=t.length;r<o;r++){const o=t[r],s=o.object,a=o.geometry,l=o.material,c=o.group;if(l.side===y&&s.layers.test(n.layers)){const t=l.side;l.side=v,l.needsUpdate=!0,We(s,i,n,a,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(re.updateMultisampleRenderTarget(o),re.updateRenderTargetMipmap(o))}w.setRenderTarget(a),w.setClearColor(R,P),void 0!==c&&(n.viewport=c),w.toneMapping=l}function qe(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,l=null===n?o.material:n,c=o.group;s.layers.test(i.layers)&&We(s,t,i,a,l,c)}}function We(e,t,i,n,r,o){e.onBeforeRender(w,t,i,n,r,o),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(w,t,i,n,e,o),!0===r.transparent&&r.side===y&&!1===r.forceSinglePass?(r.side=v,r.needsUpdate=!0,w.renderBufferDirect(i,t,n,r,e,o),r.side=_,r.needsUpdate=!0,w.renderBufferDirect(i,t,n,r,e,o),r.side=y):w.renderBufferDirect(i,t,n,r,e,o),e.onAfterRender(w,t,i,n,r,o)}function Xe(e,t,i){!0!==t.isScene&&(t=X);const n=ie.get(e),r=m.state.lights,o=m.state.shadowsArray,s=r.state.version,a=ue.getParameters(e,r.state,o,t,i),l=ue.getProgramCacheKey(a);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?se:oe).get(e.envMap||n.environment),n.envMapRotation=null!==n.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Be),c=new Map,n.programs=c);let u=c.get(l);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===s)return Ke(e,a),u}else a.uniforms=ue.getUniforms(e),e.onBeforeCompile(a,w),u=ue.acquireProgram(a,l),c.set(l,u),n.uniforms=a.uniforms;const h=n.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=fe.uniform),Ke(e,a),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=s,n.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),n.currentProgram=u,n.uniformsList=null,u}function Ye(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=cl.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ke(e,t){const i=ie.get(e);i.outputColorSpace=t.outputColorSpace,i.batching=t.batching,i.batchingColor=t.batchingColor,i.instancing=t.instancing,i.instancingColor=t.instancingColor,i.instancingMorph=t.instancingMorph,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}$e.setAnimationLoop((function(e){De&&De(e)})),"undefined"!==typeof self&&$e.setContext(self),this.setAnimationLoop=function(e){De=e,Ee.setAnimationLoop(e),null===e?$e.stop():$e.start()},Ee.addEventListener("sessionstart",Oe),Ee.addEventListener("sessionend",Ne),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(t),t=Ee.getCamera()),!0===e.isScene&&e.onBeforeRender(w,e,t,E),m=pe.get(e,A.length),m.init(t),A.push(m),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromProjectionMatrix(j),G=this.localClippingEnabled,$=fe.init(this.clippingPlanes,G),g=de.get(e,b.length),g.init(),b.push(g),!0===Ee.enabled&&!0===Ee.isPresenting){const e=w.xr.getDepthSensingMesh();null!==e&&Ge(e,t,-1/0,w.sortObjects)}Ge(e,t,0,w.sortObjects),g.finish(),!0===w.sortObjects&&g.sort(F,N),Y=!1===Ee.enabled||!1===Ee.isPresenting||!1===Ee.hasDepthSensing(),Y&&me.addToRenderList(g,e),this.info.render.frame++,!0===$&&fe.beginShadows();const i=m.state.shadowsArray;ge.render(i,e,t),!0===$&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset();const n=g.opaque,r=g.transmissive;if(m.setupLights(),t.isArrayCamera){const i=t.cameras;if(r.length>0)for(let t=0,o=i.length;t<o;t++){je(n,r,e,i[t])}Y&&me.render(e);for(let t=0,n=i.length;t<n;t++){const n=i[t];Qe(g,e,n,n.viewport)}}else r.length>0&&je(n,r,e,t),Y&&me.render(e),Qe(g,e,t);null!==E&&(re.updateMultisampleRenderTarget(E),re.updateRenderTargetMipmap(E)),!0===e.isScene&&e.onAfterRender(w,e,t),Ae.resetDefaultState(),T=-1,I=null,A.pop(),A.length>0?(m=A[A.length-1],!0===$&&fe.setGlobalState(w.clippingPlanes,m.state.camera)):m=null,b.pop(),g=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(e,t,i){ie.get(e.texture).__webglTexture=t,ie.get(e.depthTexture).__webglTexture=i;const n=ie.get(e);n.__hasExternalTextures=!0,n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const i=ie.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;E=e,S=t,C=i;let n=!0,r=null,o=!1,s=!1;if(e){const a=ie.get(e);if(void 0!==a.__useDefaultFramebuffer)ee.bindFramebuffer(xe.FRAMEBUFFER,null),n=!1;else if(void 0===a.__webglFramebuffer)re.setupRenderTarget(e);else if(a.__hasExternalTextures)re.rebindTextures(e,ie.get(e.texture).__webglTexture,ie.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(a.__boundDepthTexture!==t){if(null!==t&&ie.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");re.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=ie.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][i]:c[t],o=!0):r=e.samples>0&&!1===re.useMultisampledRTT(e)?ie.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[i]:c,M.copy(e.viewport),k.copy(e.scissor),B=e.scissorTest}else M.copy(z).multiplyScalar(O).floor(),k.copy(U).multiplyScalar(O).floor(),B=H;if(ee.bindFramebuffer(xe.FRAMEBUFFER,r)&&n&&ee.drawBuffers(e,r),ee.viewport(M),ee.scissor(k),ee.setScissorTest(B),o){const n=ie.get(e.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)}else if(s){const n=ie.get(e.texture),r=t||0;xe.framebufferTextureLayer(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,n.__webglTexture,i||0,r)}T=-1},this.readRenderTargetPixels=function(e,t,i,n,r,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=ie.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){ee.bindFramebuffer(xe.FRAMEBUFFER,a);try{const s=e.texture,a=s.format,l=s.type;if(!J.textureFormatReadable(a))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&xe.readPixels(t,i,n,r,be.convert(a),be.convert(l),o)}finally{const e=null!==E?ie.get(E).__webglFramebuffer:null;ee.bindFramebuffer(xe.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,i,n,r,o,s){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=ie.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){const s=e.texture,l=s.format,c=s.type;if(!J.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r){ee.bindFramebuffer(xe.FRAMEBUFFER,a);const e=xe.createBuffer();xe.bindBuffer(xe.PIXEL_PACK_BUFFER,e),xe.bufferData(xe.PIXEL_PACK_BUFFER,o.byteLength,xe.STREAM_READ),xe.readPixels(t,i,n,r,be.convert(l),be.convert(c),0);const s=null!==E?ie.get(E).__webglFramebuffer:null;ee.bindFramebuffer(xe.FRAMEBUFFER,s);const u=xe.fenceSync(xe.SYNC_GPU_COMMANDS_COMPLETE,0);return xe.flush(),await function(e,t,i){return new Promise((function(n,r){setTimeout((function o(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(o,i);break;default:n()}}),i)}))}(xe,u,4),xe.bindBuffer(xe.PIXEL_PACK_BUFFER,e),xe.getBufferSubData(xe.PIXEL_PACK_BUFFER,0,o),xe.deleteBuffer(e),xe.deleteSync(u),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(gn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const n=Math.pow(2,-i),r=Math.floor(e.image.width*n),o=Math.floor(e.image.height*n),s=null!==t?t.x:0,a=null!==t?t.y:0;re.setTexture2D(e,0),xe.copyTexSubImage2D(xe.TEXTURE_2D,i,0,0,s,a,r,o),ee.unbindTexture()},this.copyTextureToTexture=function(e,t){let i,n,r,o,s,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(gn("WebGLRenderer: copyTextureToTexture function signature has changed."),c=arguments[0]||null,e=arguments[1],t=arguments[2],u=arguments[3]||0,l=null),null!==l?(i=l.max.x-l.min.x,n=l.max.y-l.min.y,r=l.min.x,o=l.min.y):(i=e.image.width,n=e.image.height,r=0,o=0),null!==c?(s=c.x,a=c.y):(s=0,a=0);const h=be.convert(t.format),d=be.convert(t.type);re.setTexture2D(t,0),xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,t.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,t.unpackAlignment);const p=xe.getParameter(xe.UNPACK_ROW_LENGTH),f=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),g=xe.getParameter(xe.UNPACK_SKIP_PIXELS),m=xe.getParameter(xe.UNPACK_SKIP_ROWS),_=xe.getParameter(xe.UNPACK_SKIP_IMAGES),v=e.isCompressedTexture?e.mipmaps[u]:e.image;xe.pixelStorei(xe.UNPACK_ROW_LENGTH,v.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,v.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,r),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,o),e.isDataTexture?xe.texSubImage2D(xe.TEXTURE_2D,u,s,a,i,n,h,d,v.data):e.isCompressedTexture?xe.compressedTexSubImage2D(xe.TEXTURE_2D,u,s,a,v.width,v.height,h,v.data):xe.texSubImage2D(xe.TEXTURE_2D,u,s,a,i,n,h,d,v),xe.pixelStorei(xe.UNPACK_ROW_LENGTH,p),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,f),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,g),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,m),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,_),0===u&&t.generateMipmaps&&xe.generateMipmap(xe.TEXTURE_2D),ee.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let i,n,r,o,s,a,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(gn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),h=arguments[0]||null,d=arguments[1]||null,e=arguments[2],t=arguments[3],p=arguments[4]||0);const f=e.isCompressedTexture?e.mipmaps[p]:e.image;null!==h?(i=h.max.x-h.min.x,n=h.max.y-h.min.y,r=h.max.z-h.min.z,o=h.min.x,s=h.min.y,a=h.min.z):(i=f.width,n=f.height,r=f.depth,o=0,s=0,a=0),null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const g=be.convert(t.format),m=be.convert(t.type);let _;if(t.isData3DTexture)re.setTexture3D(t,0),_=xe.TEXTURE_3D;else{if(!t.isDataArrayTexture&&!t.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");re.setTexture2DArray(t,0),_=xe.TEXTURE_2D_ARRAY}xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,t.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,t.unpackAlignment);const v=xe.getParameter(xe.UNPACK_ROW_LENGTH),y=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),b=xe.getParameter(xe.UNPACK_SKIP_PIXELS),A=xe.getParameter(xe.UNPACK_SKIP_ROWS),w=xe.getParameter(xe.UNPACK_SKIP_IMAGES);xe.pixelStorei(xe.UNPACK_ROW_LENGTH,f.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,f.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,o),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,s),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,a),e.isDataTexture||e.isData3DTexture?xe.texSubImage3D(_,p,l,c,u,i,n,r,g,m,f.data):t.isCompressedArrayTexture?xe.compressedTexSubImage3D(_,p,l,c,u,i,n,r,g,f.data):xe.texSubImage3D(_,p,l,c,u,i,n,r,g,m,f),xe.pixelStorei(xe.UNPACK_ROW_LENGTH,v),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,y),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,b),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,A),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,w),0===p&&t.generateMipmaps&&xe.generateMipmap(_),ee.unbindTexture()},this.initRenderTarget=function(e){void 0===ie.get(e).__webglFramebuffer&&re.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?re.setTextureCube(e,0):e.isData3DTexture?re.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?re.setTexture2DArray(e,0):re.setTexture2D(e,0),ee.unbindTexture()},this.resetState=function(){S=0,C=0,E=null,ee.reset(),Ae.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===ri?"display-p3":"srgb",t.unpackColorSpace=bn.workingColorSpace===oi?"display-p3":"srgb"}}class uc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new so(e),this.density=t}clone(){return new uc(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class hc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new so(e),this.near=t,this.far=i}clone(){return new hc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class dc extends Hr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sr,this.environmentIntensity=1,this.environmentRotation=new Sr,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class pc{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Di,this.updateRanges=[],this.version=0,this.uuid=Zi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fc=new Nn;class gc{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)fc.fromBufferAttribute(this,t),fc.applyMatrix4(e),this.setXYZ(t,fc.x,fc.y,fc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)fc.fromBufferAttribute(this,t),fc.applyNormalMatrix(e),this.setXYZ(t,fc.x,fc.y,fc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)fc.fromBufferAttribute(this,t),fc.transformDirection(e),this.setXYZ(t,fc.x,fc.y,fc.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=nn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=rn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=nn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=nn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=nn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=nn(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),i=rn(i,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new yo(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mc extends co{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new so(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _c;const vc=new Nn,yc=new Nn,bc=new Nn,Ac=new sn,wc=new sn,xc=new fr,Sc=new Nn,Cc=new Nn,Ec=new Nn,Tc=new sn,Ic=new sn,Mc=new sn;class kc extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mc;if(super(),this.isSprite=!0,this.type="Sprite",void 0===_c){_c=new Oo;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new pc(e,5);_c.setIndex([0,1,2,0,2,3]),_c.setAttribute("position",new gc(t,3,0,!1)),_c.setAttribute("uv",new gc(t,2,3,!1))}this.geometry=_c,this.material=e,this.center=new sn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yc.setFromMatrixScale(this.matrixWorld),xc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&yc.multiplyScalar(-bc.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const o=this.center;Bc(Sc.set(-.5,-.5,0),bc,o,yc,n,r),Bc(Cc.set(.5,-.5,0),bc,o,yc,n,r),Bc(Ec.set(.5,.5,0),bc,o,yc,n,r),Tc.set(0,0),Ic.set(1,0),Mc.set(1,1);let s=e.ray.intersectTriangle(Sc,Cc,Ec,!1,vc);if(null===s&&(Bc(Cc.set(-.5,.5,0),bc,o,yc,n,r),Ic.set(0,1),s=e.ray.intersectTriangle(Sc,Ec,Cc,!1,vc),null===s))return;const a=e.ray.origin.distanceTo(vc);a<e.near||a>e.far||t.push({distance:a,point:vc.clone(),uv:to.getInterpolation(vc,Sc,Cc,Ec,Tc,Ic,Mc,new sn),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Bc(e,t,i,n,r,o){Ac.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(wc.x=o*Ac.x-r*Ac.y,wc.y=r*Ac.x+o*Ac.y):wc.copy(Ac),e.copy(t),e.x+=wc.x,e.y+=wc.y,e.applyMatrix4(xc)}const Rc=new Nn,Pc=new Nn;class Dc extends Hr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,n=t.length;i<n;i++){const e=t[i];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const e=t.splice(i,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n;i++){let n=t[i].distance;if(t[i].object.visible&&(n-=n*t[i].hysteresis),e<n)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Rc.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Rc);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Rc.setFromMatrixPosition(e.matrixWorld),Pc.setFromMatrixPosition(this.matrixWorld);const i=Rc.distanceTo(Pc)/e.zoom;let n,r;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),!(i>=e))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let n=0,r=i.length;n<r;n++){const e=i[n];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Lc=new Nn,Oc=new kn,Fc=new kn,Nc=new Nn,zc=new fr,Uc=new Nn,Hc=new or,Vc=new fr,$c=new pr;class Gc extends Wo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=he,this.bindMatrix=new fr,this.bindMatrixInverse=new fr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Hn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Uc),this.boundingBox.expandByPoint(Uc)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new or),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Uc),this.boundingSphere.expandByPoint(Uc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,n=this.matrixWorld;void 0!==i&&(null===this.boundingSphere&&this.computeBoundingSphere(),Hc.copy(this.boundingSphere),Hc.applyMatrix4(n),!1!==e.ray.intersectsSphere(Hc)&&(Vc.copy(n).invert(),$c.copy(e.ray).applyMatrix4(Vc),null!==this.boundingBox&&!1===$c.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,$c)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new kn,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===he?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===de?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;Oc.fromBufferAttribute(n.attributes.skinIndex,e),Fc.fromBufferAttribute(n.attributes.skinWeight,e),Lc.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=Fc.getComponent(r);if(0!==e){const n=Oc.getComponent(r);zc.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(Nc.copy(Lc).applyMatrix4(zc),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Qc extends Hr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jc extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:we,arguments.length>9&&void 0!==arguments[9]?arguments[9]:we,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qc=new fr,Wc=new fr;class Xc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Zi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new fr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new fr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const n=e[r]?e[r].matrixWorld:Wc;qc.multiplyMatrices(n,t[r]),qc.toArray(i,16*r)}null!==n&&(n.needsUpdate=!0)}clone(){return new Xc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new jc(t,e,e,je,Ne);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let r=t[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new Qc),this.bones.push(r),this.boneInverses.push((new fr).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.bones.push(r.uuid);const o=i[n];e.boneInverses.push(o.toArray())}return e}}class Yc extends yo{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Kc=new fr,Zc=new fr,Jc=[],eu=new Hn,tu=new fr,iu=new Wo,nu=new or;class ru extends Wo{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yc(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<i;n++)this.setMatrixAt(n,tu)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Hn),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Kc),eu.copy(e.boundingBox).applyMatrix4(Kc),this.boundingBox.union(eu)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new or),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Kc),nu.copy(e.boundingSphere).applyMatrix4(Kc),this.boundingSphere.union(nu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,n=this.morphTexture.source.data.data,r=e*(i.length+1)+1;for(let o=0;o<i.length;o++)i[o]=n[r+o]}raycast(e,t){const i=this.matrixWorld,n=this.count;if(iu.geometry=this.geometry,iu.material=this.material,void 0!==iu.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),nu.copy(this.boundingSphere),nu.applyMatrix4(i),!1!==e.ray.intersectsSphere(nu)))for(let r=0;r<n;r++){this.getMatrixAt(r,Kc),Zc.multiplyMatrices(i,Kc),iu.matrixWorld=Zc,iu.raycast(e,Jc);for(let e=0,i=Jc.length;e<i;e++){const i=Jc[e];i.instanceId=r,i.object=this,t.push(i)}Jc.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Yc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,n=i.length+1;null===this.morphTexture&&(this.morphTexture=new jc(new Float32Array(n*this.count),n,this.count,Ke,Ne));const r=this.morphTexture.source.data.data;let o=0;for(let l=0;l<i.length;l++)o+=i[l];const s=this.geometry.morphTargetsRelative?1:1-o,a=n*e;r[a]=s,r.set(i,a+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function ou(e,t){return e.z-t.z}function su(e,t){return t.z-e.z}class au{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1,index:-1});const o=n[this.index];r.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const lu=new fr,cu=new fr,uu=new fr,hu=new so(1,1,1),du=new fr,pu=new _s,fu=new Hn,gu=new or,mu=new Nn,_u=new Nn,vu=new Nn,yu=new au,bu=new Wo,Au=[];function wu(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let o=0;o<r;o++)for(let r=0;r<n;r++)t.setComponent(o+i,r,e.getComponent(o,r))}else t.array.set(e.array,i*n);t.needsUpdate=!0}class xu extends Wo{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,n=arguments.length>3?arguments[3]:void 0;super(new Oo,n),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new jc(t,e,e,je,Ne);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new jc(t,e,e,Ze,Fe);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new jc(t,e,e,je,Ne);i.colorSpace=bn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,n=this._maxIndexCount;if(!1===this._geometryInitialized){for(const n in e.attributes){const r=e.getAttribute(n),{array:o,itemSize:s,normalized:a}=r,l=new o.constructor(i*s),c=new yo(l,s,a);t.setAttribute(n,c)}if(null!==e.getIndex()){const e=i>65535?new Uint32Array(n):new Uint16Array(n);t.setIndex(new yo(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const n=e.getAttribute(i),r=t.getAttribute(i);if(n.itemSize!==r.itemSize||n.normalized!==r.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Hn);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let i=0,n=t.length;i<n;i++){if(!1===t[i].active)continue;const n=t[i].geometryIndex;this.getMatrixAt(i,lu),this.getBoundingBoxAt(n,fu).applyMatrix4(lu),e.union(fu)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new or);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,n=t.length;i<n;i++){if(!1===t[i].active)continue;const n=t[i].geometryIndex;this.getMatrixAt(i,lu),this.getBoundingSphereAt(n,gu).applyMatrix4(lu),e.union(gu)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(i=this._availableInstanceIds.pop(),this._drawInfo[i]=t):(i=this._drawInfo.length,this._drawInfo.push(t));const n=this._matricesTexture,r=n.image.data;uu.toArray(r,16*i),n.needsUpdate=!0;const o=this._colorsTexture;return o&&(hu.toArray(o.image.data,4*i),o.needsUpdate=!0),i}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const n={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let r=null;const o=this._reservedRanges,s=this._drawRanges,a=this._bounds;0!==this._geometryCount&&(r=o[o.length-1]),n.vertexCount=-1===t?e.getAttribute("position").count:t,n.vertexStart=null===r?0:r.vertexStart+r.vertexCount;const l=e.getIndex(),c=null!==l;if(c&&(n.indexCount=-1===i?l.count:i,n.indexStart=null===r?0:r.indexStart+r.indexCount),-1!==n.indexStart&&n.indexStart+n.indexCount>this._maxIndexCount||n.vertexStart+n.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._geometryCount;return this._geometryCount++,o.push(n),s.push({start:c?n.indexStart:n.vertexStart,count:-1}),a.push({boxInitialized:!1,box:new Hn,sphereInitialized:!1,sphere:new or}),this.setGeometryAt(u,e),u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,n=null!==i.getIndex(),r=i.getIndex(),o=t.getIndex(),s=this._reservedRanges[e];if(n&&o.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const a=s.vertexStart,l=s.vertexCount;for(const d in i.attributes){const e=t.getAttribute(d),n=i.getAttribute(d);wu(e,n,a);const r=e.itemSize;for(let t=e.count,i=l;t<i;t++){const e=a+t;for(let t=0;t<r;t++)n.setComponent(e,t,0)}n.needsUpdate=!0,n.addUpdateRange(a*r,l*r)}if(n){const e=s.indexStart;for(let t=0;t<o.count;t++)r.setX(e+t,a+o.getX(t));for(let t=o.count,i=s.indexCount;t<i;t++)r.setX(e+t,a);r.needsUpdate=!0,r.addUpdateRange(e,s.indexCount)}const c=this._bounds[e];null!==t.boundingBox?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,null!==t.boundingSphere?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const u=this._drawRanges[e],h=t.getAttribute("position");return u.count=n?o.count:h.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||!1===t[e].active||(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0),this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],n=i.box,r=this.geometry;if(!1===i.boxInitialized){n.makeEmpty();const t=r.index,o=r.attributes.position,s=this._drawRanges[e];for(let e=s.start,i=s.start+s.count;e<i;e++){let i=e;t&&(i=t.getX(i)),n.expandByPoint(mu.fromBufferAttribute(o,i))}i.boxInitialized=!0}return t.copy(n),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],n=i.sphere,r=this.geometry;if(!1===i.sphereInitialized){n.makeEmpty(),this.getBoundingBoxAt(e,fu),fu.getCenter(n.center);const t=r.index,o=r.attributes.position,s=this._drawRanges[e];let a=0;for(let e=s.start,i=s.start+s.count;e<i;e++){let i=e;t&&(i=t.getX(i)),mu.fromBufferAttribute(o,i),a=Math.max(a,n.center.distanceToSquared(mu))}n.radius=Math.sqrt(a),i.sphereInitialized=!0}return t.copy(n),t}setMatrixAt(e,t){const i=this._drawInfo,n=this._matricesTexture,r=this._matricesTexture.image.data;return e>=i.length||!1===i[e].active||(t.toArray(r,16*e),n.needsUpdate=!0),this}getMatrixAt(e,t){const i=this._drawInfo,n=this._matricesTexture.image.data;return e>=i.length||!1===i[e].active?null:t.fromArray(n,16*e)}setColorAt(e,t){null===this._colorsTexture&&this._initColorsTexture();const i=this._colorsTexture,n=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||!1===r[e].active||(t.toArray(n,4*e),i.needsUpdate=!0),this}getColorAt(e,t){const i=this._colorsTexture.image.data,n=this._drawInfo;return e>=n.length||!1===n[e].active?null:t.fromArray(i,4*e)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||!1===i[e].active||i[e].visible===t||(i[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._drawInfo;return!(e>=t.length||!1===t[e].active)&&t[e].visible}setGeometryIdAt(e,t){const i=this._drawInfo;return e>=i.length||!1===i[e].active||t<0||t>=this._geometryCount?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||!1===t[e].active?-1:t[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<0||e>=this._geometryCount)return null;const i=this._drawRanges[e];return t.start=i.start,t.count=i.count,t}raycast(e,t){const i=this._drawInfo,n=this._drawRanges,r=this.matrixWorld,o=this.geometry;bu.material=this.material,bu.geometry.index=o.index,bu.geometry.attributes=o.attributes,null===bu.geometry.boundingBox&&(bu.geometry.boundingBox=new Hn),null===bu.geometry.boundingSphere&&(bu.geometry.boundingSphere=new or);for(let s=0,a=i.length;s<a;s++){if(!i[s].visible||!i[s].active)continue;const o=i[s].geometryIndex,a=n[o];bu.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(s,bu.matrixWorld).premultiply(r),this.getBoundingBoxAt(o,bu.geometry.boundingBox),this.getBoundingSphereAt(o,bu.geometry.boundingSphere),bu.raycast(e,Au);for(let e=0,i=Au.length;e<i;e++){const i=Au[e];i.object=this,i.batchId=s,t.push(i)}Au.length=0}bu.material=null,bu.geometry.index=null,bu.geometry.attributes={},bu.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map((e=>({...e}))),this._reservedRanges=e._reservedRanges.map((e=>({...e}))),this._drawInfo=e._drawInfo.map((e=>({...e}))),this._bounds=e._bounds.map((e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()}))),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,n,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=n.getIndex(),s=null===o?1:o.array.BYTES_PER_ELEMENT,a=this._drawInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._drawRanges,h=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;h&&(du.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),pu.setFromProjectionMatrix(du,e.coordinateSystem));let f=0;if(this.sortObjects){cu.copy(this.matrixWorld).invert(),mu.setFromMatrixPosition(i.matrixWorld).applyMatrix4(cu),_u.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(cu);for(let i=0,n=a.length;i<n;i++)if(a[i].visible&&a[i].active){const e=a[i].geometryIndex;this.getMatrixAt(i,lu),this.getBoundingSphereAt(e,gu).applyMatrix4(lu);let t=!1;if(h&&(t=!pu.intersectsSphere(gu)),!t){const t=vu.subVectors(gu.center,mu).dot(_u);yu.push(u[e],t,i)}}const e=yu.list,t=this.customSort;null===t?e.sort(r.transparent?su:ou):t.call(this,e,i);for(let i=0,n=e.length;i<n;i++){const t=e[i];l[f]=t.start*s,c[f]=t.count,p[f]=t.index,f++}yu.reset()}else for(let g=0,m=a.length;g<m;g++)if(a[g].visible&&a[g].active){const e=a[g].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(g,lu),this.getBoundingSphereAt(e,gu).applyMatrix4(lu),t=!pu.intersectsSphere(gu)),!t){const t=u[e];l[f]=t.start*s,c[f]=t.count,p[f]=g,f++}}d.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,i,n,r,o){this.onBeforeRender(e,null,n,r,o)}}class Su extends co{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new so(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Cu=new Nn,Eu=new Nn,Tu=new fr,Iu=new pr,Mu=new or,ku=new Nn,Bu=new Nn;class Ru extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Su;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)Cu.fromBufferAttribute(t,e-1),Eu.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=Cu.distanceTo(Eu);e.setAttribute("lineDistance",new Io(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Mu.copy(i.boundingSphere),Mu.applyMatrix4(n),Mu.radius+=r,!1===e.ray.intersectsSphere(Mu))return;Tu.copy(n).invert(),Iu.copy(e.ray).applyMatrix4(Tu);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=this.isLineSegments?2:1,c=i.index,u=i.attributes.position;if(null!==c){const i=Math.max(0,o.start),n=Math.min(c.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=c.getX(r),n=c.getX(r+1),o=Pu(this,e,Iu,a,i,n);o&&t.push(o)}if(this.isLineLoop){const r=c.getX(n-1),o=c.getX(i),s=Pu(this,e,Iu,a,r,o);s&&t.push(s)}}else{const i=Math.max(0,o.start),n=Math.min(u.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=Pu(this,e,Iu,a,r,r+1);i&&t.push(i)}if(this.isLineLoop){const r=Pu(this,e,Iu,a,n-1,i);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Pu(e,t,i,n,r,o){const s=e.geometry.attributes.position;Cu.fromBufferAttribute(s,r),Eu.fromBufferAttribute(s,o);if(i.distanceSqToSegment(Cu,Eu,ku,Bu)>n)return;ku.applyMatrix4(e.matrixWorld);const a=t.ray.origin.distanceTo(ku);return a<t.near||a>t.far?void 0:{distance:a,point:Bu.clone().applyMatrix4(e.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:e}}const Du=new Nn,Lu=new Nn;class Ou extends Ru{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)Du.fromBufferAttribute(t,e),Lu.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+Du.distanceTo(Lu);e.setAttribute("lineDistance",new Io(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Fu extends Ru{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Nu extends co{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new so(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const zu=new fr,Uu=new pr,Hu=new or,Vu=new Nn;class $u extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nu;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Hu.copy(i.boundingSphere),Hu.applyMatrix4(n),Hu.radius+=r,!1===e.ray.intersectsSphere(Hu))return;zu.copy(n).invert(),Uu.copy(e.ray).applyMatrix4(zu);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=i.index,c=i.attributes.position;if(null!==l){for(let i=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);i<r;i++){const r=l.getX(i);Vu.fromBufferAttribute(c,r),Gu(Vu,r,a,n,e,t,this)}}else{for(let i=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);i<r;i++)Vu.fromBufferAttribute(c,i),Gu(Vu,i,a,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Gu(e,t,i,n,r,o,s){const a=Uu.distanceSqToPoint(e);if(a<i){const i=new Nn;Uu.closestPointToPoint(e,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:i,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class Qu extends Mn{constructor(e,t,i,n,r,o,s,a,l){super(e,t,i,n,r,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Te,this.magFilter=void 0!==r?r:Te,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ju extends Mn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=we,this.minFilter=we,this.generateMipmaps=!1,this.needsUpdate=!0}}class qu extends Mn{constructor(e,t,i,n,r,o,s,a,l,c,u,h){super(null,o,s,a,l,c,n,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Wu extends qu{constructor(e,t,i,n,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=be,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Xu extends qu{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,fe),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Yu extends Mn{constructor(e,t,i,n,r,o,s,a,l){super(e,t,i,n,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ku{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(n),t.push(r),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const r=i.length;let o;o=t||e*i[r-1];let s,a=0,l=r-1;for(;a<=l;)if(n=Math.floor(a+(l-a)/2),s=i[n]-o,s<0)a=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(n=l,i[n]===o)return n/(r-1);const c=i[n];return(n+(o-c)/(i[n+1]-c))/(r-1)}getTangent(e,t){const i=1e-4;let n=e-i,r=e+i;n<0&&(n=0),r>1&&(r=1);const o=this.getPoint(n),s=this.getPoint(r),a=t||(o.isVector2?new sn:new Nn);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Nn,n=[],r=[],o=[],s=new Nn,a=new fr;for(let d=0;d<=e;d++){const t=d/e;n[d]=this.getTangentAt(t,new Nn)}r[0]=new Nn,o[0]=new Nn;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),u=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),o[0].crossVectors(n[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(n[d-1],n[d]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Ji(n[d-1].dot(n[d]),-1,1));r[d].applyMatrix4(a.makeRotationAxis(s,e))}o[d].crossVectors(n[d],r[d])}if(!0===t){let t=Math.acos(Ji(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(a.makeRotationAxis(n[i],t*i)),o[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Zu extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=2*Math.PI;let n=this.aEndAngle-this.aStartAngle;const r=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=r?0:i),!0!==this.aClockwise||r||(n===i?n=-i:n-=i);const o=this.aStartAngle+e*n;let s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=s-this.aX,n=a-this.aY;s=i*e-n*t+this.aX,a=i*t+n*e+this.aY}return t.set(s,a)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ju extends Zu{constructor(e,t,i,n,r,o){super(e,t,i,i,n,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function eh(){let e=0,t=0,i=0,n=0;function r(r,o,s,a){e=r,t=s,i=-3*r+3*o-2*s-a,n=2*r-2*o+s+a}return{initCatmullRom:function(e,t,i,n,o){r(t,i,o*(i-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,o,s,a){let l=(t-e)/o-(i-e)/(o+s)+(i-t)/s,c=(i-t)/s-(n-t)/(s+a)+(n-i)/a;l*=s,c*=s,r(t,i,l,c)},calc:function(r){const o=r*r;return e+t*r+i*o+n*(o*r)}}}const th=new Nn,ih=new eh,nh=new eh,rh=new eh;class oh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=this.points,n=i.length,r=(n-(this.closed?0:1))*e;let o,s,a=Math.floor(r),l=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:0===l&&a===n-1&&(a=n-2,l=1),this.closed||a>0?o=i[(a-1)%n]:(th.subVectors(i[0],i[1]).add(i[0]),o=th);const c=i[a%n],u=i[(a+1)%n];if(this.closed||a+2<n?s=i[(a+2)%n]:(th.subVectors(i[n-1],i[n-2]).add(i[n-1]),s=th),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(s),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),ih.initNonuniformCatmullRom(o.x,c.x,u.x,s.x,t,i,n),nh.initNonuniformCatmullRom(o.y,c.y,u.y,s.y,t,i,n),rh.initNonuniformCatmullRom(o.z,c.z,u.z,s.z,t,i,n)}else"catmullrom"===this.curveType&&(ih.initCatmullRom(o.x,c.x,u.x,s.x,this.tension),nh.initCatmullRom(o.y,c.y,u.y,s.y,this.tension),rh.initCatmullRom(o.z,c.z,u.z,s.z,this.tension));return t.set(ih.calc(l),nh.calc(l),rh.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Nn).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function sh(e,t,i,n,r){const o=.5*(n-t),s=.5*(r-i),a=e*e;return(2*i-2*n+o+s)*(e*a)+(-3*i+3*n-2*o-s)*a+o*e+i}function ah(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function lh(e,t,i,n,r){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}class ch extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sn,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new sn;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=this.v0,n=this.v1,r=this.v2,o=this.v3;return t.set(lh(e,i.x,n.x,r.x,o.x),lh(e,i.y,n.y,r.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nn,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Nn;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=this.v0,n=this.v1,r=this.v2,o=this.v3;return t.set(lh(e,i.x,n.x,r.x,o.x),lh(e,i.y,n.y,r.y,o.y),lh(e,i.z,n.z,r.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ph extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sn;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=this.v0,n=this.v1,r=this.v2;return t.set(ah(e,i.x,n.x,r.x),ah(e,i.y,n.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Nn;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=this.v0,n=this.v1,r=this.v2;return t.set(ah(e,i.x,n.x,r.x),ah(e,i.y,n.y,r.y),ah(e,i.z,n.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gh extends Ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn,i=this.points,n=(i.length-1)*e,r=Math.floor(n),o=n-r,s=i[0===r?r:r-1],a=i[r],l=i[r>i.length-2?i.length-1:r+1],c=i[r>i.length-3?i.length-1:r+2];return t.set(sh(o,s.x,a.x,l.x,c.x),sh(o,s.y,a.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new sn).fromArray(i))}return this}}var mh=Object.freeze({__proto__:null,ArcCurve:Ju,CatmullRomCurve3:oh,CubicBezierCurve:ch,CubicBezierCurve3:uh,EllipseCurve:Zu,LineCurve:hh,LineCurve3:dh,QuadraticBezierCurve:ph,QuadraticBezierCurve3:fh,SplineCurve:gh});class _h extends Ku{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new mh[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=i){const e=n[r]-i,o=this.curves[r],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const o=r[n],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const n=a[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new mh[i.type]).fromJSON(i))}return this}}class vh extends _h{constructor(e){super(),this.type="Path",this.currentPoint=new sn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new hh(this.currentPoint.clone(),new sn(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const r=new ph(this.currentPoint.clone(),new sn(e,t),new sn(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,r,o){const s=new ch(this.currentPoint.clone(),new sn(e,t),new sn(i,n),new sn(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new gh(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,i,n,r,o),this}absarc(e,t,i,n,r,o){return this.absellipse(e,t,i,i,n,r,o),this}ellipse(e,t,i,n,r,o,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,r,o,s,a),this}absellipse(e,t,i,n,r,o,s,a){const l=new Zu(e,t,i,n,r,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class yh extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new sn(0,-.5),new sn(.5,0),new sn(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=Ji(n,0,2*Math.PI);const r=[],o=[],s=[],a=[],l=[],c=1/t,u=new Nn,h=new sn,d=new Nn,p=new Nn,f=new Nn;let g=0,m=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:g=e[_+1].x-e[_].x,m=e[_+1].y-e[_].y,d.x=1*m,d.y=-g,d.z=0*m,f.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case e.length-1:a.push(f.x,f.y,f.z);break;default:g=e[_+1].x-e[_].x,m=e[_+1].y-e[_].y,d.x=1*m,d.y=-g,d.z=0*m,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),a.push(d.x,d.y,d.z),f.copy(p)}for(let _=0;_<=t;_++){const r=i+_*c*n,d=Math.sin(r),p=Math.cos(r);for(let i=0;i<=e.length-1;i++){u.x=e[i].x*d,u.y=e[i].y,u.z=e[i].x*p,o.push(u.x,u.y,u.z),h.x=_/t,h.y=i/(e.length-1),s.push(h.x,h.y);const n=a[3*i+0]*d,r=a[3*i+1],c=a[3*i+0]*p;l.push(n,r,c)}}for(let _=0;_<t;_++)for(let t=0;t<e.length-1;t++){const i=t+_*e.length,n=i,o=i+e.length,s=i+e.length+1,a=i+1;r.push(n,o,a),r.push(s,a,o)}this.setIndex(r),this.setAttribute("position",new Io(o,3)),this.setAttribute("uv",new Io(s,2)),this.setAttribute("normal",new Io(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yh(e.points,e.segments,e.phiStart,e.phiLength)}}class bh extends yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new vh;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new bh(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ah extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const r=[],o=[],s=[],a=[],l=new Nn,c=new sn;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const r=i+u/t*n;l.x=e*Math.cos(r),l.y=e*Math.sin(r),o.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,a.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Io(o,3)),this.setAttribute("normal",new Io(s,3)),this.setAttribute("uv",new Io(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class wh extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};const l=this;n=Math.floor(n),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],g=i/2;let m=0;function _(i){const r=p,o=new sn,f=new Nn;let _=0;const v=!0===i?e:t,y=!0===i?1:-1;for(let e=1;e<=n;e++)u.push(0,g*y,0),h.push(0,y,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=n;e++){const t=e/n*a+s,i=Math.cos(t),r=Math.sin(t);f.x=v*r,f.y=g*y,f.z=v*i,u.push(f.x,f.y,f.z),h.push(0,y,0),o.x=.5*i+.5,o.y=.5*r*y+.5,d.push(o.x,o.y),p++}for(let e=0;e<n;e++){const t=r+e,n=b+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),_+=3}l.addGroup(m,_,!0===i?1:2),m+=_}!function(){const o=new Nn,_=new Nn;let v=0;const y=(t-e)/i;for(let l=0;l<=r;l++){const c=[],m=l/r,v=m*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,r=t*a+s,l=Math.sin(r),f=Math.cos(r);_.x=v*l,_.y=-m*i+g,_.z=v*f,u.push(_.x,_.y,_.z),o.set(l,y,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-m),c.push(p++)}f.push(c)}for(let i=0;i<n;i++)for(let n=0;n<r;n++){const r=f[n][i],o=f[n+1][i],s=f[n+1][i+1],a=f[n][i+1];e>0&&(c.push(r,o,a),v+=3),t>0&&(c.push(o,s,a),v+=3)}l.addGroup(m,v,0),m+=v}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Io(u,3)),this.setAttribute("normal",new Io(h,3)),this.setAttribute("uv",new Io(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xh extends wh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,i,n,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:s}}static fromJSON(e){return new xh(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sh extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const r=[],o=[];function s(e,t,i,n){const r=n+1,o=[];for(let s=0;s<=r;s++){o[s]=[];const n=e.clone().lerp(i,s/r),a=t.clone().lerp(i,s/r),l=r-s;for(let e=0;e<=l;e++)o[s][e]=0===e&&s===r?n:n.clone().lerp(a,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){const t=Math.floor(e/2);e%2===0?(a(o[s][t+1]),a(o[s+1][t]),a(o[s][t])):(a(o[s][t+1]),a(o[s+1][t+1]),a(o[s+1][t]))}}function a(e){r.push(e.x,e.y,e.z)}function l(t,i){const n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(o[t]=e.x-1),0===i.x&&0===i.z&&(o[t]=n/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new Nn,n=new Nn,r=new Nn;for(let o=0;o<t.length;o+=3)l(t[o+0],i),l(t[o+1],n),l(t[o+2],r),s(i,n,r,e)}(n),function(e){const t=new Nn;for(let i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){const e=new Nn;for(let i=0;i<r.length;i+=3){e.x=r[i+0],e.y=r[i+1],e.z=r[i+2];const n=u(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(n,1-s)}var t;(function(){const e=new Nn,t=new Nn,i=new Nn,n=new Nn,s=new sn,a=new sn,l=new sn;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),i.set(r[h+6],r[h+7],r[h+8]),s.set(o[d+0],o[d+1]),a.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),n.copy(e).add(t).add(i).divideScalar(3);const p=u(n);c(s,d+0,e,p),c(a,d+2,t,p),c(l,d+4,i,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],i=o[e+2],n=o[e+4],r=Math.max(t,i,n),s=Math.min(t,i,n);r>.9&&s<.1&&(t<.2&&(o[e+0]+=1),i<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Io(r,3)),this.setAttribute("normal",new Io(r.slice(),3)),this.setAttribute("uv",new Io(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sh(e.vertices,e.indices,e.radius,e.details)}}class Ch extends Sh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ch(e.radius,e.detail)}}const Eh=new Nn,Th=new Nn,Ih=new Nn,Mh=new to;class kh extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const i=4,n=Math.pow(10,i),r=Math.cos(Yi*t),o=e.getIndex(),s=e.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<a;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:i,c:a}=Mh;if(t.fromBufferAttribute(s,l[0]),i.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),Mh.getNormal(Ih),u[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,u[1]=`${Math.round(i.x*n)},${Math.round(i.y*n)},${Math.round(i.z*n)}`,u[2]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=u[e],n=u[t],o=Mh[c[e]],s=Mh[c[t]],a=`${i}_${n}`,p=`${n}_${i}`;p in h&&h[p]?(Ih.dot(h[p].normal)<=r&&(d.push(o.x,o.y,o.z),d.push(s.x,s.y,s.z)),h[p]=null):a in h||(h[a]={index0:l[e],index1:l[t],normal:Ih.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:i}=h[e];Eh.fromBufferAttribute(s,t),Th.fromBufferAttribute(s,i),d.push(Eh.x,Eh.y,Eh.z),d.push(Th.x,Th.y,Th.z)}this.setAttribute("position",new Io(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Bh extends vh{constructor(e){super(e),this.uuid=Zi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new vh).fromJSON(i))}return this}}const Rh=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=t&&t.length,r=n?t[0]*i:e.length;let o=Ph(e,0,r,i,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,h,d,p;if(n&&(o=function(e,t,i,n){const r=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,c=Ph(e,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(Gh(c));for(r.sort(Uh),o=0;o<r.length;o++)i=Hh(r[o],i);return i}(e,t,o,i)),e.length>80*i){a=c=e[0],l=u=e[1];for(let t=i;t<r;t+=i)h=e[t],d=e[t+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-a,u-l),p=0!==p?32767/p:0}return Lh(o,s,i,a,l,p,0),s};function Ph(e,t,i,n,r){let o,s;if(r===function(e,t,i,n){let r=0;for(let o=t,s=i-n;o<i;o+=n)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,i,n)>0)for(o=t;o<i;o+=n)s=ed(o,e[o],e[o+1],s);else for(o=i-n;o>=t;o-=n)s=ed(o,e[o],e[o+1],s);return s&&Wh(s,s.next)&&(td(s),s=s.next),s}function Dh(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!Wh(n,n.next)&&0!==qh(n.prev,n,n.next))n=n.next;else{if(td(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function Lh(e,t,i,n,r,o,s){if(!e)return;!s&&o&&function(e,t,i,n){let r=e;do{0===r.z&&(r.z=$h(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,i,n,r,o,s,a,l,c=1;do{for(i=e,e=null,o=null,s=0;i;){for(s++,n=i,a=0,t=0;t<c&&(a++,n=n.nextZ,n);t++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(s>1)}(r)}(e,n,r,o);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,o?Fh(e,n,r,o):Oh(e))t.push(a.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),td(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?Lh(e=Nh(Dh(e),t,i),t,i,n,r,o,2):2===s&&zh(e,t,i,n,r,o):Lh(Dh(e),t,i,n,r,o,1);break}}function Oh(e){const t=e.prev,i=e,n=e.next;if(qh(t,i,n)>=0)return!1;const r=t.x,o=i.x,s=n.x,a=t.y,l=i.y,c=n.y,u=r<o?r<s?r:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,d=r>o?r>s?r:s:o>s?o:s,p=a>l?a>c?a:c:l>c?l:c;let f=n.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Qh(r,a,o,l,s,c,f.x,f.y)&&qh(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Fh(e,t,i,n){const r=e.prev,o=e,s=e.next;if(qh(r,o,s)>=0)return!1;const a=r.x,l=o.x,c=s.x,u=r.y,h=o.y,d=s.y,p=a<l?a<c?a:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,g=a>l?a>c?a:c:l>c?l:c,m=u>h?u>d?u:d:h>d?h:d,_=$h(p,f,t,i,n),v=$h(g,m,t,i,n);let y=e.prevZ,b=e.nextZ;for(;y&&y.z>=_&&b&&b.z<=v;){if(y.x>=p&&y.x<=g&&y.y>=f&&y.y<=m&&y!==r&&y!==s&&Qh(a,u,l,h,c,d,y.x,y.y)&&qh(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=g&&b.y>=f&&b.y<=m&&b!==r&&b!==s&&Qh(a,u,l,h,c,d,b.x,b.y)&&qh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=_;){if(y.x>=p&&y.x<=g&&y.y>=f&&y.y<=m&&y!==r&&y!==s&&Qh(a,u,l,h,c,d,y.x,y.y)&&qh(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=g&&b.y>=f&&b.y<=m&&b!==r&&b!==s&&Qh(a,u,l,h,c,d,b.x,b.y)&&qh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Nh(e,t,i){let n=e;do{const r=n.prev,o=n.next.next;!Wh(r,o)&&Xh(r,n,n.next,o)&&Zh(r,o)&&Zh(o,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(o.i/i|0),td(n),td(n.next),n=e=o),n=n.next}while(n!==e);return Dh(n)}function zh(e,t,i,n,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&jh(s,e)){let a=Jh(s,e);return s=Dh(s,s.next),a=Dh(a,a.next),Lh(s,t,i,n,r,o,0),void Lh(a,t,i,n,r,o,0)}e=e.next}s=s.next}while(s!==e)}function Uh(e,t){return e.x-t.x}function Hh(e,t){const i=function(e,t){let i,n=t,r=-1/0;const o=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=o&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===o))return i}n=n.next}while(n!==t);if(!i)return null;const a=i,l=i.x,c=i.y;let u,h=1/0;n=i;do{o>=n.x&&n.x>=l&&o!==n.x&&Qh(s<c?o:r,s,l,c,s<c?r:o,s,n.x,n.y)&&(u=Math.abs(s-n.y)/(o-n.x),Zh(n,e)&&(u<h||u===h&&(n.x>i.x||n.x===i.x&&Vh(i,n)))&&(i=n,h=u)),n=n.next}while(n!==a);return i}(e,t);if(!i)return t;const n=Jh(i,e);return Dh(n,n.next),Dh(i,i.next)}function Vh(e,t){return qh(e.prev,e,t.prev)<0&&qh(t.next,e,e.next)<0}function $h(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Gh(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Qh(e,t,i,n,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(i-s)*(t-a)&&(i-s)*(o-a)>=(r-s)*(n-a)}function jh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Xh(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Zh(e,t)&&Zh(t,e)&&function(e,t){let i=e,n=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!==i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(qh(e.prev,e,t.prev)||qh(e,t.prev,t))||Wh(e,t)&&qh(e.prev,e,e.next)>0&&qh(t.prev,t,t.next)>0)}function qh(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Wh(e,t){return e.x===t.x&&e.y===t.y}function Xh(e,t,i,n){const r=Kh(qh(e,t,i)),o=Kh(qh(e,t,n)),s=Kh(qh(i,n,e)),a=Kh(qh(i,n,t));return r!==o&&s!==a||(!(0!==r||!Yh(e,i,t))||(!(0!==o||!Yh(e,n,t))||(!(0!==s||!Yh(i,e,n))||!(0!==a||!Yh(i,t,n)))))}function Yh(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Kh(e){return e>0?1:e<0?-1:0}function Zh(e,t){return qh(e.prev,e,e.next)<0?qh(e,t,e.next)>=0&&qh(e,e.prev,t)>=0:qh(e,t,e.prev)<0||qh(e,e.next,t)<0}function Jh(e,t){const i=new id(e.i,e.x,e.y),n=new id(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function ed(e,t,i,n){const r=new id(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function td(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function id(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class nd{static area(e){const t=e.length;let i=0;for(let n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i}static isClockWise(e){return nd.area(e)<0}static triangulateShape(e,t){const i=[],n=[],r=[];rd(e),od(i,e);let o=e.length;t.forEach(rd);for(let a=0;a<t.length;a++)n.push(o),o+=t[a].length,od(i,t[a]);const s=Rh(i,n);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}}function rd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function od(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class sd extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bh([new sn(.5,.5),new sn(-.5,.5),new sn(-.5,-.5),new sn(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],r=[];for(let s=0,a=e.length;s<a;s++){o(e[s])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:ad;let m,_,v,y,b,A=!1;f&&(m=f.getSpacedPoints(a),A=!0,c=!1,_=f.computeFrenetFrames(a,!1),v=new Nn,y=new Nn,b=new Nn),c||(p=0,u=0,h=0,d=0);const w=e.extractPoints(s);let x=w.shape;const S=w.holes;if(!nd.isClockWise(x)){x=x.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];nd.isClockWise(t)&&(S[e]=t.reverse())}}const C=nd.triangulateShape(x,S),E=x;for(let t=0,i=S.length;t<i;t++){const e=S[t];x=x.concat(e)}function T(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,i)}const I=x.length,M=C.length;function k(e,t,i){let n,r,o;const s=e.x-t.x,a=e.y-t.y,l=i.x-e.x,c=i.y-e.y,u=s*s+a*a,h=s*c-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-a/h,f=t.y+s/h,g=((i.x-c/d-p)*c-(i.y+l/d-f)*l)/(s*c-a*l);n=p+s*g-e.x,r=f+a*g-e.y;const m=n*n+r*r;if(m<=2)return new sn(n,r);o=Math.sqrt(m/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(n=-a,r=s,o=Math.sqrt(u)):(n=s,r=a,o=Math.sqrt(u/2))}return new sn(n/o,r/o)}const B=[];for(let t=0,i=E.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),B[t]=k(E[t],E[n],E[r]);const R=[];let P,D=B.concat();for(let t=0,i=S.length;t<i;t++){const e=S[t];P=[];for(let t=0,i=e.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),P[t]=k(e[t],e[n],e[r]);R.push(P),D=D.concat(P)}for(let t=0;t<p;t++){const e=t/p,i=u*Math.cos(e*Math.PI/2),n=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=E.length;t<r;t++){const e=T(E[t],B[t],n);F(e.x,e.y,-i)}for(let t=0,r=S.length;t<r;t++){const e=S[t];P=R[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],P[t],n);F(r.x,r.y,-i)}}}const L=h+d;for(let t=0;t<I;t++){const e=c?T(x[t],D[t],L):x[t];A?(y.copy(_.normals[0]).multiplyScalar(e.x),v.copy(_.binormals[0]).multiplyScalar(e.y),b.copy(m[0]).add(y).add(v),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<I;e++){const i=c?T(x[e],D[e],L):x[e];A?(y.copy(_.normals[t]).multiplyScalar(i.x),v.copy(_.binormals[t]).multiplyScalar(i.y),b.copy(m[t]).add(y).add(v),F(b.x,b.y,b.z)):F(i.x,i.y,l/a*t)}for(let t=p-1;t>=0;t--){const e=t/p,i=u*Math.cos(e*Math.PI/2),n=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=E.length;t<r;t++){const e=T(E[t],B[t],n);F(e.x,e.y,l+i)}for(let t=0,r=S.length;t<r;t++){const e=S[t];P=R[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],P[t],n);A?F(r.x,r.y+m[a-1].y,m[a-1].x+i):F(r.x,r.y,l+i)}}}function O(e,t){let i=e.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=e.length-1);for(let e=0,i=a+2*p;e<i;e++){const i=I*e,o=I*(e+1);z(t+n+i,t+r+i,t+r+o,t+n+o)}}}function F(e,t,i){o.push(e),o.push(t),o.push(i)}function N(e,t,r){U(e),U(t),U(r);const o=n.length/3,s=g.generateTopUV(i,n,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[2])}function z(e,t,r,o){U(e),U(t),U(o),U(t),U(r),U(o);const s=n.length/3,a=g.generateSideWallUV(i,n,s-6,s-3,s-2,s-1);H(a[0]),H(a[1]),H(a[3]),H(a[1]),H(a[2]),H(a[3])}function U(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function H(e){r.push(e.x),r.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=I*e;for(let i=0;i<M;i++){const e=C[i];N(e[2]+t,e[1]+t,e[0]+t)}e=a+2*p,t=I*e;for(let i=0;i<M;i++){const e=C[i];N(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<M;e++){const t=C[e];N(t[2],t[1],t[0])}for(let e=0;e<M;e++){const t=C[e];N(t[0]+I*a,t[1]+I*a,t[2]+I*a)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;O(E,t),t+=E.length;for(let i=0,n=S.length;i<n;i++){const e=S[i];O(e,t),t+=e.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Io(n,3)),this.setAttribute("uv",new Io(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const t=e[n];i.shapes.push(t.uuid)}else i.shapes.push(e.uuid);i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const n=t[e.shapes[r]];i.push(n)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new mh[n.type]).fromJSON(n)),new sd(i,e.options)}}const ad={generateTopUV:function(e,t,i,n,r){const o=t[3*i],s=t[3*i+1],a=t[3*n],l=t[3*n+1],c=t[3*r],u=t[3*r+1];return[new sn(o,s),new sn(a,l),new sn(c,u)]},generateSideWallUV:function(e,t,i,n,r,o){const s=t[3*i],a=t[3*i+1],l=t[3*i+2],c=t[3*n],u=t[3*n+1],h=t[3*n+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],g=t[3*o],m=t[3*o+1],_=t[3*o+2];return Math.abs(a-u)<Math.abs(s-c)?[new sn(s,1-l),new sn(c,1-h),new sn(d,1-f),new sn(g,1-_)]:[new sn(a,1-l),new sn(u,1-h),new sn(p,1-f),new sn(m,1-_)]}};class ld extends Sh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ld(e.radius,e.detail)}}class cd extends Sh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cd(e.radius,e.detail)}}class ud extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},i=Math.max(3,i),n=Math.max(1,n);const s=[],a=[],l=[],c=[];let u=e;const h=(t-e)/n,d=new Nn,p=new sn;for(let f=0;f<=n;f++){for(let e=0;e<=i;e++){const n=r+e/i*o;d.x=u*Math.cos(n),d.y=u*Math.sin(n),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<n;f++){const e=f*(i+1);for(let t=0;t<i;t++){const n=t+e,r=n,o=n+i+1,a=n+i+2,l=n+1;s.push(r,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Io(a,3)),this.setAttribute("normal",new Io(l,3)),this.setAttribute("uv",new Io(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class hd extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bh([new sn(0,.5),new sn(-.5,-.5),new sn(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],r=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,a,c),s+=a,a=0;function l(e){const s=n.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===nd.isClockWise(c)&&(c=c.reverse());for(let t=0,i=u.length;t<i;t++){const e=u[t];!0===nd.isClockWise(e)&&(u[t]=e.reverse())}const h=nd.triangulateShape(c,u);for(let t=0,i=u.length;t<i;t++){const e=u[t];c=c.concat(e)}for(let t=0,i=c.length;t<i;t++){const e=c[t];n.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,n=h.length;t<n;t++){const e=h[t],n=e[0]+s,r=e[1]+s,o=e[2]+s;i.push(n,r,o),a+=3}}this.setIndex(i),this.setAttribute("position",new Io(n,3)),this.setAttribute("normal",new Io(r,3)),this.setAttribute("uv",new Io(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];i.push(r)}return new hd(i,e.curveSegments)}}class dd extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new Nn,h=new Nn,d=[],p=[],f=[],g=[];for(let m=0;m<=i;m++){const d=[],_=m/i;let v=0;0===m&&0===o?v=.5/t:m===i&&a===Math.PI&&(v=-.5/t);for(let i=0;i<=t;i++){const a=i/t;u.x=-e*Math.cos(n+a*r)*Math.sin(o+_*s),u.y=e*Math.cos(o+_*s),u.z=e*Math.sin(n+a*r)*Math.sin(o+_*s),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),g.push(a+v,1-_),d.push(l++)}c.push(d)}for(let m=0;m<i;m++)for(let e=0;e<t;e++){const t=c[m][e+1],n=c[m][e],r=c[m+1][e],s=c[m+1][e+1];(0!==m||o>0)&&d.push(t,n,s),(m!==i-1||a<Math.PI)&&d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new Io(p,3)),this.setAttribute("normal",new Io(f,3)),this.setAttribute("uv",new Io(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class pd extends Sh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pd(e.radius,e.detail)}}class fd extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},i=Math.floor(i),n=Math.floor(n);const o=[],s=[],a=[],l=[],c=new Nn,u=new Nn,h=new Nn;for(let d=0;d<=i;d++)for(let o=0;o<=n;o++){const p=o/n*r,f=d/i*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),a.push(h.x,h.y,h.z),l.push(o/n),l.push(d/i)}for(let d=1;d<=i;d++)for(let e=1;e<=n;e++){const t=(n+1)*d+e-1,i=(n+1)*(d-1)+e-1,r=(n+1)*(d-1)+e,s=(n+1)*d+e;o.push(t,i,s),o.push(i,r,s)}this.setIndex(o),this.setAttribute("position",new Io(s,3)),this.setAttribute("normal",new Io(a,3)),this.setAttribute("uv",new Io(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class gd extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:o},i=Math.floor(i),n=Math.floor(n);const s=[],a=[],l=[],c=[],u=new Nn,h=new Nn,d=new Nn,p=new Nn,f=new Nn,g=new Nn,m=new Nn;for(let v=0;v<=i;++v){const s=v/i*r*Math.PI*2;_(s,r,o,e,d),_(s+.01,r,o,e,p),g.subVectors(p,d),m.addVectors(p,d),f.crossVectors(g,m),m.crossVectors(f,g),f.normalize(),m.normalize();for(let e=0;e<=n;++e){const r=e/n*Math.PI*2,o=-t*Math.cos(r),s=t*Math.sin(r);u.x=d.x+(o*m.x+s*f.x),u.y=d.y+(o*m.y+s*f.y),u.z=d.z+(o*m.z+s*f.z),a.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(v/i),c.push(e/n)}}for(let v=1;v<=i;v++)for(let e=1;e<=n;e++){const t=(n+1)*(v-1)+(e-1),i=(n+1)*v+(e-1),r=(n+1)*v+e,o=(n+1)*(v-1)+e;s.push(t,i,o),s.push(i,r,o)}function _(e,t,i,n,r){const o=Math.cos(e),s=Math.sin(e),a=i/t*e,l=Math.cos(a);r.x=n*(2+l)*.5*o,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Io(a,3)),this.setAttribute("normal",new Io(l,3)),this.setAttribute("uv",new Io(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class md extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fh(new Nn(-1,-1,0),new Nn(-1,1,0),new Nn(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new Nn,a=new Nn,l=new sn;let c=new Nn;const u=[],h=[],d=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=o.normals[r],d=o.binormals[r];for(let e=0;e<=n;e++){const t=e/n*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+r*d.x,a.y=o*l.y+r*d.y,a.z=o*l.z+r*d.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=c.x+i*a.x,s.y=c.y+i*a.y,s.z=c.z+i*a.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=n;i++)l.x=e/t,l.y=i/n,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),r=(n+1)*e+(t-1),o=(n+1)*e+t,s=(n+1)*(e-1)+t;p.push(i,r,s),p.push(r,o,s)}}()}(),this.setIndex(p),this.setAttribute("position",new Io(u,3)),this.setAttribute("normal",new Io(h,3)),this.setAttribute("uv",new Io(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new md((new mh[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class _d extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],i=new Set,n=new Nn,r=new Nn;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],c=l.start;for(let e=c,a=c+l.count;e<a;e+=3)for(let l=0;l<3;l++){const a=s.getX(e+l),c=s.getX(e+(l+1)%3);n.fromBufferAttribute(o,a),r.fromBufferAttribute(o,c),!0===vd(n,r,i)&&(t.push(n.x,n.y,n.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let a=0;a<3;a++){const s=3*e+a,l=3*e+(a+1)%3;n.fromBufferAttribute(o,s),r.fromBufferAttribute(o,l),!0===vd(n,r,i)&&(t.push(n.x,n.y,n.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Io(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function vd(e,t,i){const n=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==i.has(n)&&!0!==i.has(r)&&(i.add(n),i.add(r),!0)}var yd=Object.freeze({__proto__:null,BoxGeometry:Yo,CapsuleGeometry:bh,CircleGeometry:Ah,ConeGeometry:xh,CylinderGeometry:wh,DodecahedronGeometry:Ch,EdgesGeometry:kh,ExtrudeGeometry:sd,IcosahedronGeometry:ld,LatheGeometry:yh,OctahedronGeometry:cd,PlaneGeometry:bs,PolyhedronGeometry:Sh,RingGeometry:ud,ShapeGeometry:hd,SphereGeometry:dd,TetrahedronGeometry:pd,TorusGeometry:fd,TorusKnotGeometry:gd,TubeGeometry:md,WireframeGeometry:_d});class bd extends co{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new so(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ad extends ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class wd extends co{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new so(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new so(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xd extends wd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ji(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new so(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new so(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new so(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Sd extends co{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new so(16777215),this.specular=new so(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new so(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Cd extends co{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new so(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new so(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ed extends co{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Td extends co{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new so(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new so(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Id extends co{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new so(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Md extends Su{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function kd(e,t,i){return!e||!i&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Bd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rd(e){const t=e.length,i=new Array(t);for(let n=0;n!==t;++n)i[n]=n;return i.sort((function(t,i){return e[t]-e[i]})),i}function Pd(e,t,i){const n=e.length,r=new e.constructor(n);for(let o=0,s=0;s!==n;++o){const n=i[o]*t;for(let i=0;i!==t;++i)r[s++]=e[n+i]}return r}function Dd(e,t,i,n){let r=1,o=e[0];for(;void 0!==o&&void 0===o[n];)o=e[r++];if(void 0===o)return;let s=o[n];if(void 0!==s)if(Array.isArray(s))do{s=o[n],void 0!==s&&(t.push(o.time),i.push.apply(i,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[n],void 0!==s&&(t.push(o.time),s.toArray(i,i.length)),o=e[r++]}while(void 0!==o);else do{s=o[n],void 0!==s&&(t.push(o.time),i.push(s)),o=e[r++]}while(void 0!==o)}const Ld={convertArray:kd,isTypedArray:Bd,getKeyframeOrder:Rd,sortedArray:Pd,flattenJSON:Dd,subclip:function(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),a=[],c=[];for(let o=0;o<e.times.length;++o){const s=e.times[o]*r;if(!(s<i||s>=n)){a.push(e.times[o]);for(let i=0;i<t;++i)c.push(e.values[o*t+i])}}0!==a.length&&(e.times=kd(a,e.times.constructor),e.values=kd(c,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;n<=0&&(n=30);const r=i.tracks.length,o=t/n;for(let s=0;s<r;++s){const t=i.tracks[s],n=t.ValueTypeName;if("bool"===n||"string"===n)continue;const r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===n}));if(void 0===r)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=a,i=l-a;d=t.values.slice(e,i)}else if(o>=t.times[h]){const e=h*l+a,i=e+l-a;d=t.values.slice(e,i)}else{const e=t.createInterpolant(),i=a,n=l-a;e.evaluate(o),d=e.resultBuffer.slice(i,n)}if("quaternion"===n){(new Fn).fromArray(d).normalize().conjugate().toArray(d)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===n)Fn.multiplyQuaternionsFlat(r.values,t,d,0,r.values,t);else{const e=u-2*c;for(let i=0;i<e;++i)r.values[t+i]-=d[i]}}}return e.blendMode=Qt,e}};class Od{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let o;i:{n:if(!(e<n)){for(let o=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=n,n=t[++i],e<n)break t}o=t.length;break i}if(e>=r)break e;{const s=t[1];e<s&&(i=2,r=s);for(let o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(n=r,r=t[--i-1],e>=r)break t}o=i,i=0}}for(;i<o;){const n=i+o>>>1;e<t[n]?o=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let o=0;o!==n;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Fd extends Od{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ht,endingEnd:Ht}}intervalChanged_(e,t,i){const n=this.parameterPositions;let r=e-2,o=e+1,s=n[r],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case Vt:r=e,s=2*t-i;break;case $t:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case Vt:o=e,a=2*i-t;break;case $t:o=1,a=i+n[1]-n[0];break;default:o=e-1,a=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-i),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,g=f*p,m=-h*g+2*h*f-h*p,_=(1+h)*g+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*g+(1.5+d)*f+.5*p,y=d*g-d*f;for(let b=0;b!==s;++b)r[b]=m*o[c+b]+_*o[l+b]+v*o[a+b]+y*o[u+b];return r}}class Nd extends Od{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(i-t)/(n-t),u=1-c;for(let h=0;h!==s;++h)r[h]=o[l+h]*u+o[a+h]*c;return r}}class zd extends Od{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ud{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=kd(t,this.TimeBufferType),this.values=kd(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:kd(e.times,Array),values:kd(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new zd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Nd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Fd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Nt:t=this.InterpolantFactoryMethodDiscrete;break;case zt:t=this.InterpolantFactoryMethodLinear;break;case Ut:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nt;case this.InterpolantFactoryMethodLinear:return zt;case this.InterpolantFactoryMethodSmooth:return Ut}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let r=0,o=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=i[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==n&&Bd(n))for(let s=0,a=n.length;s!==a;++s){const t=n[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=this.getInterpolation()===Ut,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(n)r=!0;else{const e=s*i,n=e-i,o=e+i;for(let s=0;s!==i;++s){const i=t[e+s];if(i!==t[n+s]||i!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const n=s*i,r=o*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*i,n=o*i,s=0;s!==i;++s)t[n+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ud.prototype.TimeBufferType=Float32Array,Ud.prototype.ValueBufferType=Float32Array,Ud.prototype.DefaultInterpolation=zt;class Hd extends Ud{constructor(e,t,i){super(e,t,i)}}Hd.prototype.ValueTypeName="bool",Hd.prototype.ValueBufferType=Array,Hd.prototype.DefaultInterpolation=Nt,Hd.prototype.InterpolantFactoryMethodLinear=void 0,Hd.prototype.InterpolantFactoryMethodSmooth=void 0;class Vd extends Ud{}Vd.prototype.ValueTypeName="color";class $d extends Ud{}$d.prototype.ValueTypeName="number";class Gd extends Od{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(i-t)/(n-t);let l=e*s;for(let c=l+s;l!==c;l+=4)Fn.slerpFlat(r,0,o,l-s,o,l,a);return r}}class Qd extends Ud{InterpolantFactoryMethodLinear(e){return new Gd(this.times,this.values,this.getValueSize(),e)}}Qd.prototype.ValueTypeName="quaternion",Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class jd extends Ud{constructor(e,t,i){super(e,t,i)}}jd.prototype.ValueTypeName="string",jd.prototype.ValueBufferType=Array,jd.prototype.DefaultInterpolation=Nt,jd.prototype.InterpolantFactoryMethodLinear=void 0,jd.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends Ud{}qd.prototype.ValueTypeName="vector";class Wd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gt;this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Zi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let o=0,s=i.length;o!==s;++o)t.push(Xd(i[o]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(Ud.toJSON(i[r]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const r=t.length,o=[];for(let s=0;s<r;s++){let e=[],a=[];e.push((s+r-1)%r,s,(s+1)%r),a.push(0,1,0);const l=Rd(e);e=Pd(e,1,l),a=Pd(a,1,l),n||0!==e[0]||(e.push(r),a.push(a[0])),o.push(new $d(".morphTargetInfluences["+t[s].name+"]",e,a).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const t=e[s],i=t.name.match(r);if(i&&i.length>1){const e=i[1];let r=n[e];r||(n[e]=r=[]),r.push(t)}}const o=[];for(const s in n)o.push(this.CreateFromMorphTargetSequence(s,n[s],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,r){if(0!==i.length){const o=[],s=[];Dd(i,o,s,n),0!==o.length&&r.push(new e(t,o,s))}},n=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let i;for(i=0;i<e.length;i++)if(e[i].morphTargets)for(let n=0;n<e[i].morphTargets.length;n++)t[e[i].morphTargets[n]]=-1;for(const r in t){const t=[],o=[];for(let n=0;n!==e[i].morphTargets.length;++n){const n=e[i];t.push(n.time),o.push(n.morphTarget===r?1:0)}n.push(new $d(".morphTargetInfluence["+r+"]",t,o))}a=t.length*o}else{const r=".bones["+t[c].name+"]";i(qd,r+".position",e,"pos",n),i(Qd,r+".quaternion",e,"rot",n),i(qd,r+".scale",e,"scl",n)}}if(0===n.length)return null;return new this(r,a,n,s)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Xd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $d;case"vector":case"vector2":case"vector3":case"vector4":return qd;case"color":return Vd;case"quaternion":return Qd;case"bool":case"boolean":return Hd;case"string":return jd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];Dd(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Yd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Kd{constructor(e,t,i){const n=this;let r,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===o&&void 0!==n.onStart&&n.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,a),s===a&&(o=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Zd=new Kd;class Jd{constructor(e){this.manager=void 0!==e?e:Zd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,r){i.load(e,n,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Jd.DEFAULT_MATERIAL_NAME="__DEFAULT";const ep={};class tp extends Error{constructor(e,t){super(e),this.response=t}}class ip extends Jd{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Yd.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==ep[e])return void ep[e].push({onLoad:t,onProgress:i,onError:n});ep[e]=[],ep[e].push({onLoad:t,onProgress:i,onError:n});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=ep[e],n=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=r?parseInt(r):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){n.read().then((n=>{let{done:r,value:l}=n;if(r)e.close();else{a+=l.byteLength;const n=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new tp(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{Yd.add(e,t);const i=ep[e];delete ep[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{const i=ep[e];if(void 0===i)throw this.manager.itemError(e),t;delete ep[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class np extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new ip(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(o){n?n(o):console.error(o),r.manager.itemError(e)}}),i,n)}parse(e){const t=[];for(let i=0;i<e.length;i++){const n=Wd.parse(e[i]);t.push(n)}return t}}class rp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=[],s=new qu,a=new ip(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const i=r.parse(e,!0);o[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(s.minFilter=Te),s.image=o,s.format=i.format,s.needsUpdate=!0,t&&t(s))}),i,n)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else a.load(e,(function(e){const i=r.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)o[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),o[t].format=i.format,o[t].width=i.width,o[t].height=i.height}s.image=o}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=Te),s.format=i.format,s.needsUpdate=!0,t&&t(s)}),i,n);return s}}class op extends Jd{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Yd.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const s=dn("img");function a(){c(),Yd.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class sp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=new cs;r.colorSpace=ii;const o=new op(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(i){o.load(e[i],(function(e){r.images[i]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(let l=0;l<e.length;++l)a(l);return r}}class ap extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new jc,s=new ip(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,(function(e){let i;try{i=r.parse(e)}catch(s){if(void 0===n)return void console.error(s);n(s)}void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:be,o.wrapT=void 0!==i.wrapT?i.wrapT:be,o.magFilter=void 0!==i.magFilter?i.magFilter:Te,o.minFilter=void 0!==i.minFilter?i.minFilter:Te,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.colorSpace&&(o.colorSpace=i.colorSpace),void 0!==i.flipY&&(o.flipY=i.flipY),void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps,o.minFilter=ke),1===i.mipmapCount&&(o.minFilter=Te),void 0!==i.generateMipmaps&&(o.generateMipmaps=i.generateMipmaps),o.needsUpdate=!0,t&&t(o,i)}),i,n),o}}class lp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=new Mn,o=new op(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r}}class cp extends Hr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new so(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class up extends cp{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new so(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const hp=new fr,dp=new Nn,pp=new Nn;class fp{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sn(512,512),this.map=null,this.mapPass=null,this.matrix=new fr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _s,this._frameExtents=new sn(1,1),this._viewportCount=1,this._viewports=[new kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;dp.setFromMatrixPosition(e.matrixWorld),t.position.copy(dp),pp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pp),t.updateMatrixWorld(),hp.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hp),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(hp)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gp extends fp{constructor(){super(new ss(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ki*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mp extends cp{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hr.DEFAULT_UP),this.updateMatrix(),this.target=new Hr,this.distance=i,this.angle=n,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new gp}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _p=new fr,vp=new Nn,yp=new Nn;class bp extends fp{constructor(){super(new ss(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new sn(4,2),this._viewportCount=6,this._viewports=[new kn(2,1,1,1),new kn(0,1,1,1),new kn(3,1,1,1),new kn(1,1,1,1),new kn(3,0,1,1),new kn(1,0,1,1)],this._cubeDirections=[new Nn(1,0,0),new Nn(-1,0,0),new Nn(0,0,1),new Nn(0,0,-1),new Nn(0,1,0),new Nn(0,-1,0)],this._cubeUps=[new Nn(0,1,0),new Nn(0,1,0),new Nn(0,1,0),new Nn(0,1,0),new Nn(0,0,1),new Nn(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),vp.setFromMatrixPosition(e.matrixWorld),i.position.copy(vp),yp.copy(i.position),yp.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(yp),i.updateMatrixWorld(),n.makeTranslation(-vp.x,-vp.y,-vp.z),_p.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_p)}}class Ap extends cp{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new bp}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wp extends fp{constructor(){super(new Ps(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xp extends cp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hr.DEFAULT_UP),this.updateMatrix(),this.target=new Hr,this.shadow=new wp}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Sp extends cp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Cp extends cp{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Ep{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Nn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*n),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*n*1.092548),t.addScaledVector(o[5],n*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],i*r*1.092548),t.addScaledVector(o[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*n),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*n),t.addScaledVector(o[5],.858086*n*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*i*r),t.addScaledVector(o[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}class Tp extends cp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ep;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ip extends Jd{constructor(e){super(e),this.textures={}}load(e,t,i,n){const r=this,o=new ip(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(o){n?n(o):console.error(o),r.manager.itemError(e)}}),i,n)}parse(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const n=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&void 0!==n.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=e.sheen),void 0!==e.sheenColor&&(n.sheenColor=(new so).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(n.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==n.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==n.specular&&n.specular.setHex(e.specular),void 0!==e.specularIntensity&&(n.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(n.dispersion=e.dispersion),void 0!==e.iridescence&&(n.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(n.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(n.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(n.transmission=e.transmission),void 0!==e.thickness&&(n.thickness=e.thickness),void 0!==e.attenuationDistance&&(n.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(n.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(n.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.shadowSide&&(n.shadowSide=e.shadowSide),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(n.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(n.depthFunc=e.depthFunc),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(n.blendSrc=e.blendSrc),void 0!==e.blendDst&&(n.blendDst=e.blendDst),void 0!==e.blendEquation&&(n.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(n.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(n.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(n.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==n.blendColor&&n.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(n.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),void 0!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.alphaToCoverage&&(n.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(n.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(n.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(n.uniforms[r]={},t.type){case"t":n.uniforms[r].value=i(t.value);break;case"c":n.uniforms[r].value=(new so).setHex(t.value);break;case"v2":n.uniforms[r].value=(new sn).fromArray(t.value);break;case"v3":n.uniforms[r].value=(new Nn).fromArray(t.value);break;case"v4":n.uniforms[r].value=(new kn).fromArray(t.value);break;case"m3":n.uniforms[r].value=(new an).fromArray(t.value);break;case"m4":n.uniforms[r].value=(new fr).fromArray(t.value);break;default:n.uniforms[r].value=t.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(n.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)n.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(n.lights=e.lights),void 0!==e.clipping&&(n.clipping=e.clipping),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new sn).fromArray(t)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(n.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(n.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapRotation&&n.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new sn).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(n.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(n.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(n.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(n.thicknessMap=i(e.thicknessMap)),void 0!==e.anisotropyMap&&(n.anisotropyMap=i(e.anisotropyMap)),void 0!==e.sheenColorMap&&(n.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(n.sheenRoughnessMap=i(e.sheenRoughnessMap)),n}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Ip.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:bd,SpriteMaterial:mc,RawShaderMaterial:Ad,ShaderMaterial:ts,PointsMaterial:Nu,MeshPhysicalMaterial:xd,MeshStandardMaterial:wd,MeshPhongMaterial:Sd,MeshToonMaterial:Cd,MeshNormalMaterial:Ed,MeshLambertMaterial:Td,MeshDepthMaterial:Gl,MeshDistanceMaterial:Ql,MeshBasicMaterial:uo,MeshMatcapMaterial:Id,LineDashedMaterial:Md,LineBasicMaterial:Su,Material:co}[e]}}class Mp{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class kp extends Oo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Bp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new ip(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(o){n?n(o):console.error(o),r.manager.itemError(e)}}),i,n)}parse(e){const t={},i={};function n(e,n){if(void 0!==t[n])return t[n];const r=e.interleavedBuffers[n],o=function(e,t){if(void 0!==i[t])return i[t];const n=e.arrayBuffers,r=n[t],o=new Uint32Array(r).buffer;return i[t]=o,o}(e,r.buffer),s=hn(r.type,o),a=new pc(s,r.stride);return a.uuid=r.uuid,t[n]=a,a}const r=e.isInstancedBufferGeometry?new kp:new Oo,o=e.data.index;if(void 0!==o){const e=hn(o.type,o.array);r.setIndex(new yo(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let i;if(t.isInterleavedBufferAttribute){const r=n(e.data,t.data);i=new gc(r,t.itemSize,t.offset,t.normalized)}else{const e=hn(t.type,t.array);i=new(t.isInstancedBufferAttribute?Yc:yo)(e,t.itemSize,t.normalized)}void 0!==t.name&&(i.name=t.name),void 0!==t.usage&&i.setUsage(t.usage),r.setAttribute(u,i)}const a=e.data.morphAttributes;if(a)for(const u in a){const t=a[u],i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];let s;if(o.isInterleavedBufferAttribute){const t=n(e.data,o.data);s=new gc(t,o.itemSize,o.offset,o.normalized)}else{const e=hn(o.type,o.array);s=new yo(e,o.itemSize,o.normalized)}void 0!==o.name&&(s.name=o.name),i.push(s)}r.morphAttributes[u]=i}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Nn;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new or(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class Rp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=""===this.path?Mp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new ip(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){let o=null;try{o=JSON.parse(i)}catch(a){return void 0!==n&&n(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}const s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==n&&n(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(o,t)}),i,n)}async loadAsync(e,t){const i=""===this.path?Mp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const n=new ip(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const r=await n.loadAsync(e,t),o=JSON.parse(r),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,i),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,n,s,o,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),this.bindLightTargets(a),a}parseShapes(e){const t={};if(void 0!==e)for(let i=0,n=e.length;i<n;i++){const n=(new Bh).fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse((function(e){e.isBone&&(n[e.uuid]=e)})),void 0!==e)for(let r=0,o=e.length;r<o;r++){const t=(new Xc).fromJSON(e[r],n);i[t.uuid]=t}return i}parseGeometries(e,t){const i={};if(void 0!==e){const n=new Bp;for(let r=0,o=e.length;r<o;r++){let o;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=n.parse(s);break;default:s.type in yd?o=yd[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),i[s.uuid]=o}}return i}parseMaterials(e,t){const i={},n={};if(void 0!==e){const r=new Ip;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i],r=Wd.parse(n);t[r.uuid]=r}return t}parseImages(e,t){const i=this,n={};let r;function o(e){if("string"===typeof e){const t=e;return function(e){return i.manager.itemStart(e),r.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:hn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const i=new Kd(t);r=new op(i),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const i=e[t],r=i.url;if(Array.isArray(r)){const e=[];for(let t=0,i=r.length;t<i;t++){const i=o(r[t]);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new jc(i.data,i.width,i.height)))}n[i.uuid]=new En(e)}else{const e=o(i.url);n[i.uuid]=new En(e)}}}return n}async parseImagesAsync(e){const t=this,i={};let n;async function r(e){if("string"===typeof e){const i=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:t.resourcePath+i;return await n.loadAsync(r)}return e.data?{data:hn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){n=new op(this.manager),n.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.url;if(Array.isArray(o)){const e=[];for(let t=0,i=o.length;t<i;t++){const i=o[t],n=await r(i);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new jc(n.data,n.width,n.height)))}i[n.uuid]=new En(e)}else{const e=await r(n.url);i[n.uuid]=new En(e)}}}return i}parseTextures(e,t){function i(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const n={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image],a=s.data;let l;Array.isArray(a)?(l=new cs,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new jc:new Mn,a&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=i(o.mapping,Pp)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=i(o.wrap[0],Dp),l.wrapT=i(o.wrap[1],Dp)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=i(o.minFilter,Lp)),void 0!==o.magFilter&&(l.magFilter=i(o.magFilter,Lp)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),n[o.uuid]=l}return n}parseObject(e,t,i,n,r){let o,s,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];void 0===i[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(i[r])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}function u(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),n[e]}switch(e.type){case"Scene":o=new dc,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new so(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new hc(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new uc(e.fog.color,e.fog.density)),""!==e.fog.name&&(o.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&o.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(o.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ss(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ps(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Sp(e.color,e.intensity);break;case"DirectionalLight":o=new xp(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Ap(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Cp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new mp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new up(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Tp).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),a=c(e.material),o=new Gc(s,a),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),a=c(e.material),o=new Wo(s,a);break;case"InstancedMesh":s=l(e.geometry),a=c(e.material);const t=e.count,i=e.instanceMatrix,n=e.instanceColor;o=new ru(s,a,t),o.instanceMatrix=new Yc(new Float32Array(i.array),16),void 0!==n&&(o.instanceColor=new Yc(new Float32Array(n.array),n.itemSize));break;case"BatchedMesh":s=l(e.geometry),a=c(e.material),o=new xu(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,a),o.geometry=s,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map((e=>{const t=new Hn;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const i=new or;return i.radius=e.sphereRadius,i.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:i}})),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new Dc;break;case"Line":o=new Ru(l(e.geometry),c(e.material));break;case"LineLoop":o=new Fu(l(e.geometry),c(e.material));break;case"LineSegments":o=new Ou(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new $u(l(e.geometry),c(e.material));break;case"Sprite":o=new kc(c(e.material));break;case"Group":o=new ec;break;case"Bone":o=new Qc;break;default:o=new Hr}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(o.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)o.add(this.parseObject(s[e],t,i,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];o.animations.push(r[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],n=o.getObjectByProperty("uuid",i.object);void 0!==n&&o.addLevel(n,i.distance,i.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}bindLightTargets(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,n=e.getObjectByProperty("uuid",i);t.target=void 0!==n?n:new Hr}}))}}const Pp={UVMapping:pe,CubeReflectionMapping:fe,CubeRefractionMapping:ge,EquirectangularReflectionMapping:me,EquirectangularRefractionMapping:_e,CubeUVReflectionMapping:ve},Dp={RepeatWrapping:ye,ClampToEdgeWrapping:be,MirroredRepeatWrapping:Ae},Lp={NearestFilter:we,NearestMipmapNearestFilter:xe,NearestMipmapLinearFilter:Ce,LinearFilter:Te,LinearMipmapNearestFilter:Ie,LinearMipmapLinearFilter:ke};class Op extends Jd{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Yd.get(e);if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then((i=>{t&&t(i),r.manager.itemEnd(e)})).catch((e=>{n&&n(e)})):(setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const a=fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(i){return Yd.add(e,i),t&&t(i),r.manager.itemEnd(e),i})).catch((function(t){n&&n(t),Yd.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)}));Yd.add(e,a),r.manager.itemStart(e)}}let Fp;class Np{static getContext(){return void 0===Fp&&(Fp=new(window.AudioContext||window.webkitAudioContext)),Fp}static setContext(e){Fp=e}}class zp extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new ip(this.manager);function s(t){n?n(t):console.error(t),r.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){try{const i=e.slice(0);Np.getContext().decodeAudioData(i,(function(e){t(e)})).catch(s)}catch(i){s(i)}}),i,n)}}const Up=new fr,Hp=new fr,Vp=new fr;class $p{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ss,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ss,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Vp.copy(e.projectionMatrix);const i=t.eyeSep/2,n=i*t.near/t.focus,r=t.near*Math.tan(Yi*t.fov*.5)/t.zoom;let o,s;Hp.elements[12]=-i,Up.elements[12]=i,o=-r*t.aspect+n,s=r*t.aspect+n,Vp.elements[0]=2*t.near/(s-o),Vp.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(Vp),o=-r*t.aspect-n,s=r*t.aspect-n,Vp.elements[0]=2*t.near/(s-o),Vp.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(Vp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Hp),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Up)}}class Gp{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Qp(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Qp();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Qp(){return performance.now()}const jp=new Nn,qp=new Fn,Wp=new Nn,Xp=new Nn;class Yp extends Hr{constructor(){super(),this.type="AudioListener",this.context=Np.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gp}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jp,qp,Wp),Xp.set(0,0,-1).applyQuaternion(qp),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jp.x,e),t.positionY.linearRampToValueAtTime(jp.y,e),t.positionZ.linearRampToValueAtTime(jp.z,e),t.forwardX.linearRampToValueAtTime(Xp.x,e),t.forwardY.linearRampToValueAtTime(Xp.y,e),t.forwardZ.linearRampToValueAtTime(Xp.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(jp.x,jp.y,jp.z),t.setOrientation(Xp.x,Xp.y,Xp.z,i.x,i.y,i.z)}}class Kp extends Hr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Zp=new Nn,Jp=new Fn,ef=new Nn,tf=new Nn;class nf extends Kp{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Zp,Jp,ef),tf.set(0,0,1).applyQuaternion(Jp);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zp.x,e),t.positionY.linearRampToValueAtTime(Zp.y,e),t.positionZ.linearRampToValueAtTime(Zp.z,e),t.orientationX.linearRampToValueAtTime(tf.x,e),t.orientationY.linearRampToValueAtTime(tf.y,e),t.orientationZ.linearRampToValueAtTime(tf.z,e)}else t.setPosition(Zp.x,Zp.y,Zp.z),t.setOrientation(tf.x,tf.y,tf.z)}}class rf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class of{constructor(e,t,i){let n,r,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==n;++e)i[r+e]=i[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(i[a]!==i[a+t]){s.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let r=i,o=n;r!==o;++r)t[r]=t[n+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,n){Fn.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){const o=this._workIndex*r;Fn.multiplyQuaternionsFlat(e,o,e,t,e,i),Fn.slerpFlat(e,t,e,t,e,o,n)}_lerp(e,t,i,n,r){const o=1-n;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*o+e[i+s]*n}}_lerpAdditive(e,t,i,n,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[i+o]*n}}}const sf="\\[\\]\\.:\\/",af=new RegExp("["+sf+"]","g"),lf="[^"+sf+"]",cf="[^"+sf.replace("\\.","")+"]",uf=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",lf)+/(WCOD+)?/.source.replace("WCOD",cf)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lf)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lf)+"$"),hf=["material","materials","bones","map"];class df{constructor(e,t,i){this.path=t,this.parsedPath=i||df.parseTrackName(t),this.node=df.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new df.Composite(e,t,i):new df(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(af,"")}static parseTrackName(e){const t=uf.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==hf.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const o=i(r.children);if(o)return o}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=df.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const o=e[n];if(void 0===o){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}df.Composite=class{constructor(e,t,i){const n=i||df.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},df.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},df.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},df.prototype.GetterByBindingType=[df.prototype._getValue_direct,df.prototype._getValue_array,df.prototype._getValue_arrayElement,df.prototype._getValue_toArray],df.prototype.SetterByBindingTypeAndVersioning=[[df.prototype._setValue_direct,df.prototype._setValue_direct_setNeedsUpdate,df.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[df.prototype._setValue_array,df.prototype._setValue_array_setNeedsUpdate,df.prototype._setValue_array_setMatrixWorldNeedsUpdate],[df.prototype._setValue_arrayElement,df.prototype._setValue_arrayElement_setNeedsUpdate,df.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[df.prototype._setValue_fromArray,df.prototype._setValue_fromArray_setNeedsUpdate,df.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class pf{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Zi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,o=r.length;let s,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)r[e].push(new df(u,i[e],n[e]))}else if(d<l){s=e[d];const a=--l,c=e[a];t[c.uuid]=d,e[d]=c,t[h]=a,e[a]=u;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[a];let s=t[d];t[d]=o,void 0===s&&(s=new df(u,i[e],n[e])),t[a]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=r){const o=r++,c=e[o];t[c.uuid]=l,e[l]=c,t[a]=o,e[o]=s;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[o],r=t[l];t[l]=n,t[o]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<r){const s=--r,a=e[s],c=--o,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[s],r=t[c];t[l]=n,t[s]=r,t.pop()}}else{const r=--o,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const r=this._bindings;if(void 0!==n)return r[n];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);n=r.length,i[e]=n,o.push(e),s.push(t),r.push(u);for(let h=c,d=a.length;h!==d;++h){const i=a[h];u[h]=new df(i,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=i,o[i]=a,o.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}}class ff{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,o=r.length,s=new Array(o),a={endingStart:Ht,endingEnd:Ht};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ot,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,r=n/i,o=i/n;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Qt)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(o),t[i].accumulateAdditive(s);else for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(o),t[i].accumulate(n,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const o=i===Ft;if(0===e)return-1===r?n:o&&1===(1&r)?t-n:n;if(i===Lt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(o&&1===(1&r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=Vt,n.endingEnd=Vt):(n.endingStart=e?this.zeroSlopeAtStart?Vt:Ht:$t,n.endingEnd=t?this.zeroSlopeAtEnd?Vt:Ht:$t)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=i,this}}const gf=new Float32Array(1);class mf extends qi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,o=e._propertyBindings,s=e._interpolants,a=i.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let u=0;u!==r;++u){const e=n[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}const n=t&&t._propertyBindings[u].binding.parsedPath;l=new of(df.create(i,r,n),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),o[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const e=t[i];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let o=n[t];void 0===o&&(o={},n[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,s=o[n],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new Nd(new Float32Array(2),new Float32Array(2),1,gf),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const n=t||this._root,r=n.uuid;let o="string"===typeof e?Wd.findByName(n,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:Gt),void 0!==a){const e=a.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new ff(this,o,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const i=t||this._root,n=i.uuid,r="string"===typeof e?Wd.findByName(i,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l){t[l]._update(n,e,r,o)}const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const r=n._cacheIndex,o=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const r in i){const e=i[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const r in n){const e=n[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class _f{constructor(e){this.value=e}clone(){return new _f(void 0===this.value.clone?this.value:this.value.clone())}}let vf=0;class yf extends qi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:vf++}),this.name="",this.usage=Di,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,n=t.length;i<n;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class bf extends pc{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Af{constructor(e,t,i,n,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const wf=new fr;class xf{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new pr(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new Cr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return wf.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(wf),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Cf(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Sf),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n=0,r=e.length;n<r;n++)Cf(e[n],this,i,t);return i.sort(Sf),i}}function Sf(e,t){return e.distance-t.distance}function Cf(e,t,i,n){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,i)&&(r=!1)}if(!0===r&&!0===n){const n=e.children;for(let e=0,r=n.length;e<r;e++)Cf(n[e],t,i,!0)}}class Ef{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ji(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Tf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class If{constructor(e,t,i,n){If.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,i,n)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,n){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=n,this}}const Mf=new sn;class kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sn(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Mf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Mf).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bf=new Nn,Rf=new Nn;class Pf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Bf.subVectors(e,this.start),Rf.subVectors(this.end,this.start);const i=Rf.dot(Rf);let n=Rf.dot(Bf)/i;return t&&(n=Ji(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Df=new Nn;class Lf extends Hr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Oo,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const e=o/a*Math.PI*2,t=s/a*Math.PI*2;n.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}i.setAttribute("position",new Io(n,3));const r=new Su({fog:!1,toneMapped:!1});this.cone=new Ou(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Df.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Df),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Of=new Nn,Ff=new fr,Nf=new fr;class zf extends Ou{constructor(e){const t=Uf(e),i=new Oo,n=[],r=[],o=new so(0,0,1),s=new so(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}i.setAttribute("position",new Io(n,3)),i.setAttribute("color",new Io(r,3));super(i,new Su({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");Nf.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(Ff.multiplyMatrices(Nf,e.matrixWorld),Of.setFromMatrixPosition(Ff),n.setXYZ(o,Of.x,Of.y,Of.z),Ff.multiplyMatrices(Nf,e.parent.matrixWorld),Of.setFromMatrixPosition(Ff),n.setXYZ(o+1,Of.x,Of.y,Of.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Uf(e){const t=[];!0===e.isBone&&t.push(e);for(let i=0;i<e.children.length;i++)t.push.apply(t,Uf(e.children[i]));return t}class Hf extends Wo{constructor(e,t,i){super(new dd(t,4,2),new uo({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Vf=new Nn,$f=new so,Gf=new so;class Qf extends Hr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const n=new cd(t);n.rotateY(.5*Math.PI),this.material=new uo({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=n.getAttribute("position"),o=new Float32Array(3*r.count);n.setAttribute("color",new yo(o,3)),this.add(new Wo(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$f.copy(this.light.color),Gf.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const n=e<i/2?$f:Gf;t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Vf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jf extends Ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;i=new so(i),n=new so(n);const r=t/2,o=e/t,s=e/2,a=[],l=[];for(let u=0,h=0,d=-s;u<=t;u++,d+=o){a.push(-s,0,d,s,0,d),a.push(d,0,-s,d,0,s);const e=u===r?i:n;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new Oo;c.setAttribute("position",new Io(a,3)),c.setAttribute("color",new Io(l,3));super(c,new Su({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qf extends Ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new so(r),o=new so(o);const s=[],a=[];if(t>1)for(let c=0;c<t;c++){const i=c/t*(2*Math.PI),n=Math.sin(i)*e,l=Math.cos(i)*e;s.push(0,0,0),s.push(n,0,l);const u=1&c?r:o;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let c=0;c<i;c++){const t=1&c?r:o,l=e-e/i*c;for(let e=0;e<n;e++){let i=e/n*(2*Math.PI),r=Math.sin(i)*l,o=Math.cos(i)*l;s.push(r,0,o),a.push(t.r,t.g,t.b),i=(e+1)/n*(2*Math.PI),r=Math.sin(i)*l,o=Math.cos(i)*l,s.push(r,0,o),a.push(t.r,t.g,t.b)}}const l=new Oo;l.setAttribute("position",new Io(s,3)),l.setAttribute("color",new Io(a,3));super(l,new Su({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Wf=new Nn,Xf=new Nn,Yf=new Nn;class Kf extends Hr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new Oo;n.setAttribute("position",new Io([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Su({fog:!1,toneMapped:!1});this.lightPlane=new Ru(n,r),this.add(this.lightPlane),n=new Oo,n.setAttribute("position",new Io([0,0,0,0,0,1],3)),this.targetLine=new Ru(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Wf.setFromMatrixPosition(this.light.matrixWorld),Xf.setFromMatrixPosition(this.light.target.matrixWorld),Yf.subVectors(Xf,Wf),this.lightPlane.lookAt(Xf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xf),this.targetLine.scale.z=Yf.length()}}const Zf=new Nn,Jf=new is;class eg extends Ou{constructor(e){const t=new Oo,i=new Su({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],o={};function s(e,t){a(e),a(t)}function a(e){n.push(0,0,0),r.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Io(n,3)),t.setAttribute("color",new Io(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new so(16755200),c=new so(16711680),u=new so(43775),h=new so(16777215),d=new so(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,i,n,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,n.r,n.g,n.b),o.setXYZ(39,n.r,n.g,n.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Jf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),tg("c",t,e,Jf,0,0,-1),tg("t",t,e,Jf,0,0,1),tg("n1",t,e,Jf,-1,-1,-1),tg("n2",t,e,Jf,1,-1,-1),tg("n3",t,e,Jf,-1,1,-1),tg("n4",t,e,Jf,1,1,-1),tg("f1",t,e,Jf,-1,-1,1),tg("f2",t,e,Jf,1,-1,1),tg("f3",t,e,Jf,-1,1,1),tg("f4",t,e,Jf,1,1,1),tg("u1",t,e,Jf,.7,1.1,-1),tg("u2",t,e,Jf,-.7,1.1,-1),tg("u3",t,e,Jf,0,2,-1),tg("cf1",t,e,Jf,-1,0,1),tg("cf2",t,e,Jf,1,0,1),tg("cf3",t,e,Jf,0,-1,1),tg("cf4",t,e,Jf,0,1,1),tg("cn1",t,e,Jf,-1,0,-1),tg("cn2",t,e,Jf,1,0,-1),tg("cn3",t,e,Jf,0,-1,-1),tg("cn4",t,e,Jf,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function tg(e,t,i,n,r,o,s){Zf.set(r,o,s).unproject(n);const a=t[e];if(void 0!==a){const e=i.getAttribute("position");for(let t=0,i=a.length;t<i;t++)e.setXYZ(a[t],Zf.x,Zf.y,Zf.z)}}const ig=new Hn;class ng extends Ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Oo;r.setIndex(new yo(i,1)),r.setAttribute("position",new yo(n,3)),super(r,new Su({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ig.setFromObject(this.object),ig.isEmpty())return;const t=ig.min,i=ig.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rg extends Ou{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Oo;n.setIndex(new yo(i,1)),n.setAttribute("position",new Io([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new Su({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class og extends Ru{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,n=new Oo;n.setAttribute("position",new Io([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere(),super(n,new Su({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new Oo;r.setAttribute("position",new Io([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Wo(r,new uo({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const sg=new Nn;let ag,lg;class cg extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nn(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===ag&&(ag=new Oo,ag.setAttribute("position",new Io([0,0,0,0,1,0],3)),lg=new wh(0,.5,1,5,1),lg.translate(0,-.5,0)),this.position.copy(t),this.line=new Ru(ag,new Su({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wo(lg,new uo({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{sg.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(sg,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ug extends Ou{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Oo;i.setAttribute("position",new Io(t,3)),i.setAttribute("color",new Io([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(i,new Su({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const n=new so,r=this.geometry.attributes.color.array;return n.set(e),n.toArray(r,0),n.toArray(r,3),n.set(t),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hg{constructor(){this.type="ShapePath",this.color=new so,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,o){return this.currentPath.bezierCurveTo(e,t,i,n,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const i=t.length;let n=!1;for(let r=i-1,o=0;o<i;r=o++){let i=t[r],s=t[o],a=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[o],a=-a,s=t[r],l=-l),e.y<i.y||e.y>s.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-a*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return n}const i=nd.isClockWise,n=this.subPaths;if(0===n.length)return[];let r,o,s;const a=[];if(1===n.length)return o=n[0],s=new Bh,s.curves=o.curves,a.push(s),a;let l=!i(n[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let g=0,m=n.length;g<m;g++)o=n[g],h=o.getPoints(),r=i(h),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new Bh,p:h},u[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:h[0]});if(!u[0])return function(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=new Bh;r.curves=n.curves,t.push(r)}return t}(n);if(u.length>1){let e=!1,i=0;for(let t=0,n=u.length;t<n;t++)c[t]=[];for(let n=0,r=u.length;n<r;n++){const r=p[n];for(let o=0;o<r.length;o++){const s=r[o];let a=!0;for(let r=0;r<u.length;r++)t(s.p,u[r].p)&&(n!==r&&i++,a?(a=!1,c[r].push(s)):e=!0);a&&c[n].push(s)}}i>0&&!1===e&&(p=c)}for(let g=0,m=u.length;g<m;g++){s=u[g].s,a.push(s),d=p[g];for(let e=0,t=d.length;e<t;e++)s.holes.push(d[e].h)}return a}}class dg extends qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class pg extends Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...n,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:s}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=s);var fg=Uint8Array,gg=Uint16Array,mg=Int32Array,_g=new fg([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vg=new fg([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yg=new fg([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bg=function(e,t){for(var i=new gg(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var r=new mg(i[30]);for(n=1;n<30;++n)for(var o=i[n];o<i[n+1];++o)r[o]=o-i[n]<<5|n;return{b:i,r:r}},Ag=bg(_g,2),wg=Ag.b,xg=Ag.r;wg[28]=258,xg[258]=28;for(var Sg=bg(vg,0),Cg=Sg.b,Eg=Sg.r,Tg=new gg(32768),Ig=0;Ig<32768;++Ig){var Mg=(43690&Ig)>>1|(21845&Ig)<<1;Mg=(61680&(Mg=(52428&Mg)>>2|(13107&Mg)<<2))>>4|(3855&Mg)<<4,Tg[Ig]=((65280&Mg)>>8|(255&Mg)<<8)>>1}var kg=function(e,t,i){for(var n=e.length,r=0,o=new gg(t);r<n;++r)e[r]&&++o[e[r]-1];var s,a=new gg(t);for(r=1;r<t;++r)a[r]=a[r-1]+o[r-1]<<1;if(i){s=new gg(1<<t);var l=15-t;for(r=0;r<n;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],h=a[e[r]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)s[Tg[h]>>l]=c}else for(s=new gg(n),r=0;r<n;++r)e[r]&&(s[r]=Tg[a[e[r]-1]++]>>15-e[r]);return s},Bg=new fg(288);for(Ig=0;Ig<144;++Ig)Bg[Ig]=8;for(Ig=144;Ig<256;++Ig)Bg[Ig]=9;for(Ig=256;Ig<280;++Ig)Bg[Ig]=7;for(Ig=280;Ig<288;++Ig)Bg[Ig]=8;var Rg=new fg(32);for(Ig=0;Ig<32;++Ig)Rg[Ig]=5;var Pg=kg(Bg,9,0),Dg=kg(Bg,9,1),Lg=kg(Rg,5,0),Og=kg(Rg,5,1),Fg=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Ng=function(e,t,i){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&i},zg=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},Ug=function(e){return(e+7)/8|0},Hg=function(e,t,i){return(null==t||t<0)&&(t=0),(null==i||i>e.length)&&(i=e.length),new fg(e.subarray(t,i))},Vg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$g=function(e,t,i){var n=new Error(t||Vg[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,$g),!i)throw n;return n},Gg=function(e,t,i,n){var r=e.length,o=n?n.length:0;if(!r||t.f&&!t.l)return i||new fg(0);var s=!i,a=s||2!=t.i,l=t.i;s&&(i=new fg(3*r));var c=function(e){var t=i.length;if(e>t){var n=new fg(Math.max(2*t,e));n.set(i),i=n}},u=t.f||0,h=t.p||0,d=t.b||0,p=t.l,f=t.d,g=t.m,m=t.n,_=8*r;do{if(!p){u=Ng(e,h,1);var v=Ng(e,h+1,3);if(h+=3,!v){var y=e[(k=Ug(h)+4)-4]|e[k-3]<<8,b=k+y;if(b>r){l&&$g(0);break}a&&c(d+y),i.set(e.subarray(k,b),d),t.b=d+=y,t.p=h=8*b,t.f=u;continue}if(1==v)p=Dg,f=Og,g=9,m=5;else if(2==v){var A=Ng(e,h,31)+257,w=Ng(e,h+10,15)+4,x=A+Ng(e,h+5,31)+1;h+=14;for(var S=new fg(x),C=new fg(19),E=0;E<w;++E)C[yg[E]]=Ng(e,h+3*E,7);h+=3*w;var T=Fg(C),I=(1<<T)-1,M=kg(C,T,1);for(E=0;E<x;){var k,B=M[Ng(e,h,I)];if(h+=15&B,(k=B>>4)<16)S[E++]=k;else{var R=0,P=0;for(16==k?(P=3+Ng(e,h,3),h+=2,R=S[E-1]):17==k?(P=3+Ng(e,h,7),h+=3):18==k&&(P=11+Ng(e,h,127),h+=7);P--;)S[E++]=R}}var D=S.subarray(0,A),L=S.subarray(A);g=Fg(D),m=Fg(L),p=kg(D,g,1),f=kg(L,m,1)}else $g(1);if(h>_){l&&$g(0);break}}a&&c(d+131072);for(var O=(1<<g)-1,F=(1<<m)-1,N=h;;N=h){var z=(R=p[zg(e,h)&O])>>4;if((h+=15&R)>_){l&&$g(0);break}if(R||$g(2),z<256)i[d++]=z;else{if(256==z){N=h,p=null;break}var U=z-254;if(z>264){var H=_g[E=z-257];U=Ng(e,h,(1<<H)-1)+wg[E],h+=H}var V=f[zg(e,h)&F],$=V>>4;V||$g(3),h+=15&V;L=Cg[$];if($>3){H=vg[$];L+=zg(e,h)&(1<<H)-1,h+=H}if(h>_){l&&$g(0);break}a&&c(d+131072);var G=d+U;if(d<L){var Q=o-L,j=Math.min(L,G);for(Q+d<0&&$g(3);d<j;++d)i[d]=n[Q+d]}for(;d<G;++d)i[d]=i[d-L]}}t.l=p,t.p=N,t.b=d,t.f=u,p&&(u=1,t.m=g,t.d=f,t.n=m)}while(!u);return d!=i.length&&s?Hg(i,0,d):i.subarray(0,d)},Qg=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8},jg=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8,e[n+2]|=i>>16},qg=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var r=i.length,o=i.slice();if(!r)return{t:em,l:0};if(1==r){var s=new fg(i[0].s+1);return s[i[0].s]=1,{t:s,l:1}}i.sort((function(e,t){return e.f-t.f})),i.push({s:-1,f:25001});var a=i[0],l=i[1],c=0,u=1,h=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=i[i[c].f<i[h].f?c++:h++],l=i[c!=u&&i[c].f<i[h].f?c++:h++],i[u++]={s:-1,f:a.f+l.f,l:a,r:l};var d=o[0].s;for(n=1;n<r;++n)o[n].s>d&&(d=o[n].s);var p=new gg(d+1),f=Wg(i[u-1],p,0);if(f>t){n=0;var g=0,m=f-t,_=1<<m;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));n<r;++n){var v=o[n].s;if(!(p[v]>t))break;g+=_-(1<<f-p[v]),p[v]=t}for(g>>=m;g>0;){var y=o[n].s;p[y]<t?g-=1<<t-p[y]++-1:++n}for(;n>=0&&g;--n){var b=o[n].s;p[b]==t&&(--p[b],++g)}f=t}return{t:new fg(p),l:f}},Wg=function(e,t,i){return-1==e.s?Math.max(Wg(e.l,t,i+1),Wg(e.r,t,i+1)):t[e.s]=i},Xg=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new gg(++t),n=0,r=e[0],o=1,s=function(e){i[n++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=e[a]}return{c:i.subarray(0,n),n:t}},Yg=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},Kg=function(e,t,i){var n=i.length,r=Ug(t+2);e[r]=255&n,e[r+1]=n>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var o=0;o<n;++o)e[r+o+4]=i[o];return 8*(r+4+n)},Zg=function(e,t,i,n,r,o,s,a,l,c,u){Qg(t,u++,i),++r[256];for(var h=qg(r,15),d=h.t,p=h.l,f=qg(o,15),g=f.t,m=f.l,_=Xg(d),v=_.c,y=_.n,b=Xg(g),A=b.c,w=b.n,x=new gg(19),S=0;S<v.length;++S)++x[31&v[S]];for(S=0;S<A.length;++S)++x[31&A[S]];for(var C=qg(x,7),E=C.t,T=C.l,I=19;I>4&&!E[yg[I-1]];--I);var M,k,B,R,P=c+5<<3,D=Yg(r,Bg)+Yg(o,Rg)+s,L=Yg(r,d)+Yg(o,g)+s+14+3*I+Yg(x,E)+2*x[16]+3*x[17]+7*x[18];if(l>=0&&P<=D&&P<=L)return Kg(t,u,e.subarray(l,l+c));if(Qg(t,u,1+(L<D)),u+=2,L<D){M=kg(d,p,0),k=d,B=kg(g,m,0),R=g;var O=kg(E,T,0);Qg(t,u,y-257),Qg(t,u+5,w-1),Qg(t,u+10,I-4),u+=14;for(S=0;S<I;++S)Qg(t,u+3*S,E[yg[S]]);u+=3*I;for(var F=[v,A],N=0;N<2;++N){var z=F[N];for(S=0;S<z.length;++S){var U=31&z[S];Qg(t,u,O[U]),u+=E[U],U>15&&(Qg(t,u,z[S]>>5&127),u+=z[S]>>12)}}}else M=Pg,k=Bg,B=Lg,R=Rg;for(S=0;S<a;++S){var H=n[S];if(H>255){jg(t,u,M[(U=H>>18&31)+257]),u+=k[U+257],U>7&&(Qg(t,u,H>>23&31),u+=_g[U]);var V=31&H;jg(t,u,B[V]),u+=R[V],V>3&&(jg(t,u,H>>5&8191),u+=vg[V])}else jg(t,u,M[H]),u+=k[H]}return jg(t,u,M[256]),u+k[256]},Jg=new mg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),em=new fg(0),tm=function(e,t,i,n,r,o){var s=o.z||e.length,a=new fg(n+s+5*(1+Math.ceil(s/7e3))+r),l=a.subarray(n,a.length-r),c=o.l,u=7&(o.r||0);if(t){u&&(l[0]=o.r>>3);for(var h=Jg[t-1],d=h>>13,p=8191&h,f=(1<<i)-1,g=o.p||new gg(32768),m=o.h||new gg(f+1),_=Math.ceil(i/3),v=2*_,y=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<v)&f},b=new mg(25e3),A=new gg(288),w=new gg(32),x=0,S=0,C=o.i||0,E=0,T=o.w||0,I=0;C+2<s;++C){var M=y(C),k=32767&C,B=m[M];if(g[k]=B,m[M]=k,T<=C){var R=s-C;if((x>7e3||E>24576)&&(R>423||!c)){u=Zg(e,l,0,b,A,w,S,E,I,C-I,u),E=x=S=0,I=C;for(var P=0;P<286;++P)A[P]=0;for(P=0;P<30;++P)w[P]=0}var D=2,L=0,O=p,F=k-B&32767;if(R>2&&M==y(C-F))for(var N=Math.min(d,R)-1,z=Math.min(32767,C),U=Math.min(258,R);F<=z&&--O&&k!=B;){if(e[C+D]==e[C+D-F]){for(var H=0;H<U&&e[C+H]==e[C+H-F];++H);if(H>D){if(D=H,L=F,H>N)break;var V=Math.min(F,H-2),$=0;for(P=0;P<V;++P){var G=C-F+P&32767,Q=G-g[G]&32767;Q>$&&($=Q,B=G)}}}F+=(k=B)-(B=g[k])&32767}if(L){b[E++]=268435456|xg[D]<<18|Eg[L];var j=31&xg[D],q=31&Eg[L];S+=_g[j]+vg[q],++A[257+j],++w[q],T=C+D,++x}else b[E++]=e[C],++A[e[C]]}}for(C=Math.max(C,T);C<s;++C)b[E++]=e[C],++A[e[C]];u=Zg(e,l,c,b,A,w,S,E,I,C-I,u),c||(o.r=7&u|l[u/8|0]<<3,u-=7,o.h=m,o.p=g,o.i=C,o.w=T)}else{for(C=o.w||0;C<s+c;C+=65535){var W=C+65535;W>=s&&(l[u/8|0]=c,W=s),u=Kg(l,u+1,e.subarray(C,W))}o.i=s}return Hg(a,0,n+Ug(u)+r)},im=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var i=t,n=9;--n;)i=(1&i&&-306674912)^i>>>1;e[t]=i}return e}(),nm=function(){var e=-1;return{p:function(t){for(var i=e,n=0;n<t.length;++n)i=im[255&i^t[n]]^i>>>8;e=i},d:function(){return~e}}},rm=function(e,t,i,n,r){if(!r&&(r={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new fg(o.length+e.length);s.set(o),s.set(e,o.length),e=s,r.w=o.length}return tm(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,i,n,r)},om=function(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i},sm=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},am=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&$g(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&$g(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function lm(e,t){return rm(e,t||{},0,0)}function cm(e,t){return Gg(e.subarray(am(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var um=function(e,t,i,n){for(var r in e){var o=e[r],s=t+r,a=n;Array.isArray(o)&&(a=om(n,o[1]),o=o[0]),o instanceof fg?i[s]=[o,a]:(i[s+="/"]=[new fg(0),a],um(o,s,i,n))}},hm="undefined"!=typeof TextEncoder&&new TextEncoder,dm="undefined"!=typeof TextDecoder&&new TextDecoder;try{dm.decode(em,{stream:!0})}catch(hse){}function pm(e,t){if(t){for(var i=new fg(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}if(hm)return hm.encode(e);var r=e.length,o=new fg(e.length+(e.length>>1)),s=0,a=function(e){o[s++]=e};for(n=0;n<r;++n){if(s+5>o.length){var l=new fg(s+8+(r-n<<1));l.set(o),o=l}var c=e.charCodeAt(n);c<128||t?a(c):c<2048?(a(192|c>>6),a(128|63&c)):c>55295&&c<57344?(a(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++n))>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|63&c)):(a(224|c>>12),a(128|c>>6&63),a(128|63&c))}return Hg(o,0,s)}var fm=function(e){var t=0;if(e)for(var i in e){var n=e[i].length;n>65535&&$g(9),t+=n+4}return t},gm=function(e,t,i,n,r,o,s,a){var l=n.length,c=i.extra,u=a&&a.length,h=fm(c);sm(e,t,null!=s?33639248:67324752),t+=4,null!=s&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(o<0&&8),e[t++]=r&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var d=new Date(null==i.mtime?Date.now():i.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&$g(10),sm(e,t,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),t+=4,-1!=o&&(sm(e,t,i.crc),sm(e,t+4,o<0?-o-2:o),sm(e,t+8,i.size)),sm(e,t+12,l),sm(e,t+14,h),t+=16,null!=s&&(sm(e,t,u),sm(e,t+6,i.attrs),sm(e,t+10,s),t+=14),e.set(n,t),t+=l,h)for(var f in c){var g=c[f],m=g.length;sm(e,t,+f),sm(e,t+2,m),e.set(g,t+4),t+=4+m}return u&&(e.set(a,t),t+=u),t},mm=function(e,t,i,n,r){sm(e,t,101010256),sm(e,t+8,i),sm(e,t+10,i),sm(e,t+12,n),sm(e,t+16,r)};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function _m(e,t,i){const n=i.length-e-1;if(t>=i[n])return n-1;if(t<=i[e])return e;let r=e,o=n,s=Math.floor((r+o)/2);for(;t<i[s]||t>=i[s+1];)t<i[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function vm(e,t,i,n){const r=[],o=[],s=[];r[0]=1;for(let a=1;a<=i;++a){o[a]=t-n[e+1-a],s[a]=n[e+a]-t;let i=0;for(let e=0;e<a;++e){const t=s[e+1],n=o[a-e],l=r[e]/(t+n);r[e]=i+t*l,i=n*l}r[a]=i}return r}function ym(e,t){let i=1;for(let r=2;r<=e;++r)i*=r;let n=1;for(let r=2;r<=t;++r)n*=r;for(let r=2;r<=e-t;++r)n*=r;return i/n}function bm(e,t,i,n,r){const o=function(e,t,i,n,r){const o=r<e?r:e,s=[],a=_m(e,n,t),l=function(e,t,i,n,r){const o=[];for(let h=0;h<=i;++h)o[h]=0;const s=[];for(let h=0;h<=n;++h)s[h]=o.slice(0);const a=[];for(let h=0;h<=i;++h)a[h]=o.slice(0);a[0][0]=1;const l=o.slice(0),c=o.slice(0);for(let h=1;h<=i;++h){l[h]=t-r[e+1-h],c[h]=r[e+h]-t;let i=0;for(let e=0;e<h;++e){const t=c[e+1],n=l[h-e];a[h][e]=t+n;const r=a[e][h-1]/a[h][e];a[e][h]=i+t*r,i=n*r}a[h][h]=i}for(let h=0;h<=i;++h)s[0][h]=a[h][i];for(let h=0;h<=i;++h){let e=0,t=1;const r=[];for(let n=0;n<=i;++n)r[n]=o.slice(0);r[0][0]=1;for(let o=1;o<=n;++o){let n=0;const l=h-o,c=i-o;h>=o&&(r[t][0]=r[e][0]/a[c+1][l],n=r[t][0]*a[l][c]);const u=h-1<=c?o-1:i-h;for(let i=l>=-1?1:-l;i<=u;++i)r[t][i]=(r[e][i]-r[e][i-1])/a[c+1][l+i],n+=r[t][i]*a[l+i][c];h<=c&&(r[t][o]=-r[e][o-1]/a[c+1][h],n+=r[t][o]*a[h][c]),s[o][h]=n;const d=e;e=t,t=d}}let u=i;for(let h=1;h<=n;++h){for(let e=0;e<=i;++e)s[h][e]*=u;u*=i-h}return s}(a,n,e,o,t),c=[];for(let u=0;u<i.length;++u){const e=i[u].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,c[u]=e}for(let u=0;u<=o;++u){const t=c[a-e].clone().multiplyScalar(l[u][0]);for(let i=1;i<=e;++i)t.add(c[a-e+i].clone().multiplyScalar(l[u][i]));s[u]=t}for(let u=o+1;u<=r+1;++u)s[u]=new kn(0,0,0);return s}(e,t,i,n,r);return function(e){const t=e.length,i=[],n=[];for(let o=0;o<t;++o){const t=e[o];i[o]=new Nn(t.x,t.y,t.z),n[o]=t.w}const r=[];for(let o=0;o<t;++o){const e=i[o].clone();for(let t=1;t<=o;++t)e.sub(r[o-t].clone().multiplyScalar(ym(o,t)*n[t]));r[o]=e.divideScalar(n[0])}return r}(o)}class Am extends Ku{constructor(e,t,i,n,r){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<i.length;++o){const e=i[o];this.controlPoints[o]=new kn(e.x,e.y,e.z,e.w)}}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=function(e,t,i,n){const r=_m(e,n,t),o=vm(r,n,e,t),s=new kn(0,0,0,0);for(let a=0;a<=e;++a){const t=i[r-e+a],n=o[a],l=t.w*n;s.x+=t.x*l,s.y+=t.y*l,s.z+=t.z*l,s.w+=t.w*n}return s}(this.degree,this.knots,this.controlPoints,i);return 1!==n.w&&n.divideScalar(n.w),t.set(n.x,n.y,n.z)}getTangent(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Nn,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=bm(this.degree,this.knots,this.controlPoints,i,1);return t.copy(n[1]).normalize(),t}}let wm,xm,Sm;class Cm extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=""===r.path?Mp.extractUrlBase(e):r.path,s=new ip(this.manager);s.setPath(r.path),s.setResponseType("arraybuffer"),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(i){try{t(r.parse(i,o))}catch(hse){n?n(hse):console.error(hse),r.manager.itemError(e)}}),i,n)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===Vm(e,0,t.length)}(e))wm=(new km).parse(e);else{const t=Vm(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function n(t){const n=e[t-1];return e=e.slice(i+t),i++,n}for(let r=0;r<t.length;++r){if(n(1)===t[r])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(Pm(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Pm(t));wm=(new Mm).parse(t)}const i=new lp(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Em(i,this.manager).parse(wm)}}class Em{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){xm=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),n=this.parseDeformers(),r=(new Tm).parse(n);return this.parseScene(n,r,i),Sm}parseConnections(){const e=new Map;if("Connections"in wm){wm.Connections.connections.forEach((function(t){const i=t[0],n=t[1],r=t[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:n,relationship:r};e.get(i).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});const s={ID:i,relationship:r};e.get(n).children.push(s)}))}return e}parseImages(){const e={},t={};if("Video"in wm.Objects){const i=wm.Objects.Video;for(const n in i){const r=i[n];if(e[parseInt(n)]=r.RelativeFilename||r.Filename,"Content"in r){const e=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,o="string"===typeof r.Content&&""!==r.Content;if(e||o){const e=this.parseImage(i[n]);t[r.RelativeFilename||r.Filename]=e}}}}for(const i in e){const n=e[i];void 0!==t[n]?e[i]=t[n]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,n=i.slice(i.lastIndexOf(".")+1).toLowerCase();let r;switch(n){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),r="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+n+'" is not supported.')}if("string"===typeof t)return"data:"+r+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in wm.Objects){const i=wm.Objects.Texture;for(const n in i){const r=this.parseTexture(i[n],e);t.set(parseInt(n),r)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const n=e.WrapModeU,r=e.WrapModeV,o=void 0!==n?n.value:0,s=void 0!==r?r.value:0;if(i.wrapS=0===o?ye:be,i.wrapT=0===s?ye:be,"Scaling"in e){const t=e.Scaling.value;i.repeat.x=t[0],i.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;i.offset.x=t[0],i.offset.y=t[1]}return i}loadTexture(e,t){const i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),n=e.FileName.split(".").pop().toLowerCase(),r=i.has(n)?this.manager.getHandler(`.${n}`):this.textureLoader;if(!r)return console.warn(`FBXLoader: ${n.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Mn;const o=r.path;o||r.setPath(this.textureLoader.path);const s=xm.get(e.id).children;let a;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(a=t[s[0].ID],0!==a.indexOf("blob:")&&0!==a.indexOf("data:")||r.setPath(void 0));const l=r.load(a);return r.setPath(o),l}parseMaterials(e){const t=new Map;if("Material"in wm.Objects){const i=wm.Objects.Material;for(const n in i){const r=this.parseMaterial(i[n],e);null!==r&&t.set(parseInt(n),r)}}return t}parseMaterial(e,t){const i=e.id,n=e.attrName;let r=e.ShadingModel;if("object"===typeof r&&(r=r.value),!xm.has(i))return null;const o=this.parseParameters(e,t,i);let s;switch(r.toLowerCase()){case"phong":s=new Sd;break;case"lambert":s=new Td;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),s=new Sd}return s.setValues(o),s.name=n,s}parseParameters(e,t,i){const n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=bn.toWorkingColorSpace((new so).fromArray(e.Diffuse.value),ii):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(n.color=bn.toWorkingColorSpace((new so).fromArray(e.DiffuseColor.value),ii)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=bn.toWorkingColorSpace((new so).fromArray(e.Emissive.value),ii):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(n.emissive=bn.toWorkingColorSpace((new so).fromArray(e.EmissiveColor.value),ii)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=bn.toWorkingColorSpace((new so).fromArray(e.Specular.value),ii):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=bn.toWorkingColorSpace((new so).fromArray(e.SpecularColor.value),ii));const r=this;return xm.get(i).children.forEach((function(e){const i=e.relationship;switch(i){case"Bump":n.bumpMap=r.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":n.aoMap=r.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=r.getTexture(t,e.ID),void 0!==n.map&&(n.map.colorSpace=ii);break;case"DisplacementColor":n.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=r.getTexture(t,e.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=ii);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=r.getTexture(t,e.ID),void 0!==n.envMap&&(n.envMap.mapping=me,n.envMap.colorSpace=ii);break;case"SpecularColor":n.specularMap=r.getTexture(t,e.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=ii);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=r.getTexture(t,e.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}})),n}getTexture(e,t){return"LayeredTexture"in wm.Objects&&t in wm.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=xm.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in wm.Objects){const i=wm.Objects.Deformer;for(const n in i){const r=i[n],o=xm.get(parseInt(n));if("Skin"===r.attrType){const t=this.parseSkeleton(o,i);t.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[n]=t}else if("BlendShape"===r.attrType){const e={id:n};e.rawTargets=this.parseMorphTargets(o,i),e.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach((function(e){const n=t[e.ID];if("Cluster"!==n.attrType)return;const r={ID:e.ID,indices:[],weights:[],transformLink:(new fr).fromArray(n.TransformLink.a)};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),i.push(r)})),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let n=0;n<e.children.length;n++){const r=e.children[n],o=t[r.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;s.geoID=xm.get(parseInt(r.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,i.push(s)}return i}parseScene(e,t,i){Sm=new ec;const n=this.parseModels(e.skeletons,t,i),r=wm.Objects.Model,o=this;n.forEach((function(e){const t=r[e.ID];o.setLookAtProperties(e,t);xm.get(e.ID).parents.forEach((function(t){const i=n.get(t.ID);void 0!==i&&i.add(e)})),null===e.parent&&Sm.add(e)})),this.bindSkeleton(e.skeletons,t,n),this.addGlobalSceneSettings(),Sm.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=zm(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const s=(new Im).parse();1===Sm.children.length&&Sm.children[0].isGroup&&(Sm.children[0].animations=s,Sm=Sm.children[0]),Sm.animations=s}parseModels(e,t,i){const n=new Map,r=wm.Objects.Model;for(const o in r){const s=parseInt(o),a=r[o],l=xm.get(s);let c=this.buildSkeleton(l,e,s,a.attrName);if(!c){switch(a.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,i);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new Qc;break;default:c=new ec}c.name=a.attrName?df.sanitizeNodeName(a.attrName):"",c.userData.originalName=a.attrName,c.ID=s}this.getTransformData(c,a),n.set(s,c)}return n}buildSkeleton(e,t,i,n){let r=null;return e.parents.forEach((function(e){for(const o in t){const s=t[o];s.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=r;r=new Qc,r.matrixWorld.copy(t.transformLink),r.name=n?df.sanitizeNodeName(n):"",r.userData.originalName=n,r.ID=i,s.bones[o]=r,null!==e&&r.add(e)}}))}})),r}createCamera(e){let t,i;if(e.children.forEach((function(e){const t=wm.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)})),void 0===i)t=new Hr;else{let e=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(e=1);let n=1;void 0!==i.NearPlane&&(n=i.NearPlane.value/1e3);let r=1e3;void 0!==i.FarPlane&&(r=i.FarPlane.value/1e3);let o=window.innerWidth,s=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(o=i.AspectWidth.value,s=i.AspectHeight.value);const a=o/s;let l=45;void 0!==i.FieldOfView&&(l=i.FieldOfView.value);const c=i.FocalLength?i.FocalLength.value:null;switch(e){case 0:t=new ss(l,a,n,r),null!==c&&t.setFocalLength(c);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new Hr;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new Hr}}return t}createLight(e){let t,i;if(e.children.forEach((function(e){const t=wm.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)})),void 0===i)t=new Hr;else{let e;e=void 0===i.LightType?0:i.LightType.value;let n=16777215;void 0!==i.Color&&(n=bn.toWorkingColorSpace((new so).fromArray(i.Color.value),ii));let r=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(r=0);let o=0;void 0!==i.FarAttenuationEnd&&(o=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);const s=1;switch(e){case 0:t=new Ap(n,r,o,s);break;case 1:t=new xp(n,r);break;case 2:let e=Math.PI/3;void 0!==i.InnerAngle&&(e=on.degToRad(i.InnerAngle.value));let a=0;void 0!==i.OuterAngle&&(a=on.degToRad(i.OuterAngle.value),a=Math.max(a,1)),t=new mp(n,r,o,e,a,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Ap(n,r)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,i){let n,r=null,o=null;const s=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),i.has(e.ID)&&s.push(i.get(e.ID))})),s.length>1?o=s:s.length>0?o=s[0]:(o=new Sd({name:Jd.DEFAULT_MATERIAL_NAME,color:13421772}),s.push(o)),"color"in r.attributes&&s.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(n=new Gc(r,o),n.normalizeSkinWeights()):n=new Wo(r,o),n}createCurve(e,t){const i=e.children.reduce((function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e}),null),n=new Su({name:Jd.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Ru(i,n)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),i.eulerOrder=Um("RotationOrder"in t?t.RotationOrder.value:0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){if("LookAtProperty"in t){xm.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const i=wm.Objects.Model[t.ID];if("Lcl_Translation"in i){const t=i.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),Sm.add(e.target)):e.lookAt((new Nn).fromArray(t))}}}))}}bindSkeleton(e,t,i){const n=this.parsePoseNodes();for(const r in e){const o=e[r];xm.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;xm.get(t).parents.forEach((function(e){if(i.has(e.ID)){i.get(e.ID).bind(new Xc(o.bones),n[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in wm.Objects){const t=wm.Objects.Pose;for(const i in t)if("BindPose"===t[i].attrType&&t[i].NbPoseNodes>0){const n=t[i].PoseNode;Array.isArray(n)?n.forEach((function(t){e[t.Node]=(new fr).fromArray(t.Matrix.a)})):e[n.Node]=(new fr).fromArray(n.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in wm){if("AmbientColor"in wm.GlobalSettings){const e=wm.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],n=e[2];if(0!==t||0!==i||0!==n){const e=(new so).setRGB(t,i,n,ii);Sm.add(new Sp(e,1))}}"UnitScaleFactor"in wm.GlobalSettings&&(Sm.userData.unitScaleFactor=wm.GlobalSettings.UnitScaleFactor.value)}}}class Tm{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in wm.Objects){const i=wm.Objects.Geometry;for(const n in i){const r=xm.get(parseInt(n)),o=this.parseGeometry(r,i[n],e);t.set(parseInt(n),o)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const n=i.skeletons,r=[],o=e.parents.map((function(e){return wm.Objects.Model[e.ID]}));if(0===o.length)return;const s=e.children.reduce((function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e}),null);e.children.forEach((function(e){void 0!==i.morphTargets[e.ID]&&r.push(i.morphTargets[e.ID])}));const a=o[0],l={};"RotationOrder"in a&&(l.eulerOrder=Um(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const c=zm(l);return this.genGeometry(t,s,r,c)}genGeometry(e,t,i,n){const r=new Oo;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),s=this.genBuffers(o),a=new Io(s.vertex,3);if(a.applyMatrix4(n),r.setAttribute("position",a),s.colors.length>0&&r.setAttribute("color",new Io(s.colors,3)),t&&(r.setAttribute("skinIndex",new So(s.weightsIndices,4)),r.setAttribute("skinWeight",new Io(s.vertexWeights,4)),r.FBX_Deformer=t),s.normal.length>0){const e=(new an).getNormalMatrix(n),t=new Io(s.normal,3);t.applyNormalMatrix(e),r.setAttribute("normal",t)}if(s.uvs.forEach((function(e,t){const i=0===t?"uv":`uv${t}`;r.setAttribute(i,new Io(s.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=s.materialIndex[0],t=0;if(s.materialIndex.forEach((function(i,n){i!==e&&(r.addGroup(t,n-t,e),e=i,t=n)})),r.groups.length>0){const t=r.groups[r.groups.length-1],i=t.start+t.count;i!==s.materialIndex.length&&r.addGroup(i,s.materialIndex.length-i,e)}0===r.groups.length&&r.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(r,e,i,n),r}parseGeoNode(e,t){const i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,r){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:t,weight:e.weights[r]})}))}))),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,n=0,r=!1,o=[],s=[],a=[],l=[],c=[],u=[];const h=this;return e.vertexIndices.forEach((function(d,p){let f,g=!1;d<0&&(d=~d,g=!0);let m=[],_=[];if(o.push(3*d,3*d+1,3*d+2),e.color){const t=Om(p,i,d,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){_.push(e.weight),m.push(e.id)})),_.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);const e=[0,0,0,0],t=[0,0,0,0];_.forEach((function(i,n){let r=i,o=m[n];t.forEach((function(t,i,n){if(r>t){n[i]=r,r=t;const s=e[i];e[i]=o,o=s}}))})),m=e,_=t}for(;_.length<4;)_.push(0),m.push(0);for(let e=0;e<4;++e)c.push(_[e]),u.push(m[e])}if(e.normal){const t=Om(p,i,d,e.normal);s.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=Om(p,i,d,e.material)[0],f<0&&(h.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const n=Om(p,i,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])})),n++,g&&(h.genFace(t,e,o,f,s,a,l,c,u,n),i++,n=0,o=[],s=[],a=[],l=[],c=[],u=[])})),t}getNormalNewell(e){const t=new Nn(0,0,0);for(let i=0;i<e.length;i++){const n=e[i],r=e[(i+1)%e.length];t.x+=(n.y-r.y)*(n.z+r.z),t.y+=(n.z-r.z)*(n.x+r.x),t.z+=(n.x-r.x)*(n.y+r.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),i=(Math.abs(t.z)>.5?new Nn(0,1,0):new Nn(0,0,1)).cross(t).normalize(),n=t.clone().cross(i).normalize();return{normal:t,tangent:i,bitangent:n}}flattenVertex(e,t,i){return new sn(e.dot(t),e.dot(i))}genFace(e,t,i,n,r,o,s,a,l,c){let u;if(c>3){const e=[],n=t.baseVertexPositions||t.vertexPositions;for(let t=0;t<i.length;t+=3)e.push(new Nn(n[i[t]],n[i[t+1]],n[i[t+2]]));const{tangent:r,bitangent:o}=this.getNormalTangentAndBitangent(e),s=[];for(const t of e)s.push(this.flattenVertex(t,r,o));u=nd.triangulateShape(s,[])}else u=[[0,1,2]];for(const[h,d,p]of u)e.vertex.push(t.vertexPositions[i[3*h]]),e.vertex.push(t.vertexPositions[i[3*h+1]]),e.vertex.push(t.vertexPositions[i[3*h+2]]),e.vertex.push(t.vertexPositions[i[3*d]]),e.vertex.push(t.vertexPositions[i[3*d+1]]),e.vertex.push(t.vertexPositions[i[3*d+2]]),e.vertex.push(t.vertexPositions[i[3*p]]),e.vertex.push(t.vertexPositions[i[3*p+1]]),e.vertex.push(t.vertexPositions[i[3*p+2]]),t.skeleton&&(e.vertexWeights.push(a[4*h]),e.vertexWeights.push(a[4*h+1]),e.vertexWeights.push(a[4*h+2]),e.vertexWeights.push(a[4*h+3]),e.vertexWeights.push(a[4*d]),e.vertexWeights.push(a[4*d+1]),e.vertexWeights.push(a[4*d+2]),e.vertexWeights.push(a[4*d+3]),e.vertexWeights.push(a[4*p]),e.vertexWeights.push(a[4*p+1]),e.vertexWeights.push(a[4*p+2]),e.vertexWeights.push(a[4*p+3]),e.weightsIndices.push(l[4*h]),e.weightsIndices.push(l[4*h+1]),e.weightsIndices.push(l[4*h+2]),e.weightsIndices.push(l[4*h+3]),e.weightsIndices.push(l[4*d]),e.weightsIndices.push(l[4*d+1]),e.weightsIndices.push(l[4*d+2]),e.weightsIndices.push(l[4*d+3]),e.weightsIndices.push(l[4*p]),e.weightsIndices.push(l[4*p+1]),e.weightsIndices.push(l[4*p+2]),e.weightsIndices.push(l[4*p+3])),t.color&&(e.colors.push(o[3*h]),e.colors.push(o[3*h+1]),e.colors.push(o[3*h+2]),e.colors.push(o[3*d]),e.colors.push(o[3*d+1]),e.colors.push(o[3*d+2]),e.colors.push(o[3*p]),e.colors.push(o[3*p+1]),e.colors.push(o[3*p+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(r[3*h]),e.normal.push(r[3*h+1]),e.normal.push(r[3*h+2]),e.normal.push(r[3*d]),e.normal.push(r[3*d+1]),e.normal.push(r[3*d+2]),e.normal.push(r[3*p]),e.normal.push(r[3*p+1]),e.normal.push(r[3*p+2])),t.uv&&t.uv.forEach((function(t,i){void 0===e.uvs[i]&&(e.uvs[i]=[]),e.uvs[i].push(s[i][2*h]),e.uvs[i].push(s[i][2*h+1]),e.uvs[i].push(s[i][2*d]),e.uvs[i].push(s[i][2*d+1]),e.uvs[i].push(s[i][2*p]),e.uvs[i].push(s[i][2*p+1])}))}addMorphTargets(e,t,i,n){if(0===i.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const r=this;i.forEach((function(i){i.rawTargets.forEach((function(i){const o=wm.Objects.Geometry[i.geoID];void 0!==o&&r.genMorphGeometry(e,t,o,n,i.name)}))}))}genMorphGeometry(e,t,i,n,r){const o=void 0!==t.Vertices?t.Vertices.a:[],s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==i.Vertices?i.Vertices.a:[],l=void 0!==i.Indexes?i.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c);for(let f=0;f<l.length;f++){const e=3*l[f];u[e]=a[3*f],u[e+1]=a[3*f+1],u[e+2]=a[3*f+2]}const h={vertexIndices:s,vertexPositions:u,baseVertexPositions:o},d=this.genBuffers(h),p=new Io(d.vertex,3);p.name=r||i.attrName,p.applyMatrix4(n),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a;let r=[];return"IndexToDirect"===i&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:r,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a;let r=[];return"IndexToDirect"===i&&(r=e.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a;let r=[];"IndexToDirect"===i&&(r=e.ColorIndex.a);for(let o=0,s=new so;o<n.length;o+=4)s.fromArray(n,o),bn.toWorkingColorSpace(s,ii),s.toArray(n,o);return{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const n=e.Materials.a,r=[];for(let o=0;o<n.length;++o)r.push(o);return{dataSize:1,buffer:n,indices:r,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Oo;const i=t-1,n=e.KnotVector.a,r=[],o=e.Points.a;for(let c=0,u=o.length;c<u;c+=4)r.push((new kn).fromArray(o,c));let s,a;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){s=i,a=n.length-1-s;for(let e=0;e<i;++e)r.push(r[e])}const l=new Am(i,n,r,s,a).getPoints(12*r.length);return(new Oo).setFromPoints(l)}}class Im{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const i in t){const n=t[i],r=this.addClip(n);e.push(r)}return e}parseClips(){if(void 0===wm.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=wm.Objects.AnimationCurveNode,t=new Map;for(const i in e){const n=e[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){const e={id:n.id,attr:n.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=wm.Objects.AnimationCurve;for(const i in t){const n={id:t[i].id,times:t[i].KeyTime.a.map(Dm),values:t[i].KeyValueFloat.a},r=xm.get(n.id);if(void 0!==r){const t=r.parents[0].ID,i=r.parents[0].relationship;i.match(/X/)?e.get(t).curves.x=n:i.match(/Y/)?e.get(t).curves.y=n:i.match(/Z/)?e.get(t).curves.z=n:i.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=n)}}}parseAnimationLayers(e){const t=wm.Objects.AnimationLayer,i=new Map;for(const n in t){const t=[],r=xm.get(parseInt(n));if(void 0!==r){r.children.forEach((function(i,n){if(e.has(i.ID)){const r=e.get(i.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===t[n]){const e=xm.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const r=wm.Objects.Model[e.toString()];if(void 0===r)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",i);const o={modelName:r.attrName?df.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Sm.traverse((function(e){e.ID===r.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new fr),"PreRotation"in r&&(o.preRotation=r.PreRotation.value),"PostRotation"in r&&(o.postRotation=r.PostRotation.value),t[n]=o}}t[n]&&(t[n][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===t[n]){const e=xm.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,r=xm.get(e).parents[0].ID,o=xm.get(r).parents[0].ID,s=xm.get(o).parents[0].ID,a=wm.Objects.Model[s],l={modelName:a.attrName?df.sanitizeNodeName(a.attrName):"",morphName:wm.Objects.Deformer[e].attrName};t[n]=l}t[n][r.attr]=r}}})),i.set(parseInt(n),t)}}return i}parseAnimStacks(e){const t=wm.Objects.AnimationStack,i={};for(const n in t){const r=xm.get(parseInt(n)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);i[n]={name:t[n].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach((function(e){t=t.concat(i.generateTracks(e))})),new Wd(e.name,-1,t)}generateTracks(e){const t=[];let i=new Nn,n=new Nn;if(e.transform&&e.transform.decompose(i,new Fn,n),i=i.toArray(),n=n.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const i=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==i&&t.push(i)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.S.curves,n,"scale");void 0!==i&&t.push(i)}if(void 0!==e.DeformPercent){const i=this.generateMorphTrack(e);void 0!==i&&t.push(i)}return t}generateVectorTrack(e,t,i,n){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,i);return new qd(e+"."+n,r,o)}generateRotationTrack(e,t,i,n,r){let o,s;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){const e=this.interpolateRotations(t.x,t.y,t.z,r);o=e[0],s=e[1]}const a=Um(0);void 0!==i&&((i=i.map(on.degToRad)).push(a),i=(new Sr).fromArray(i),i=(new Fn).setFromEuler(i)),void 0!==n&&((n=n.map(on.degToRad)).push(a),n=(new Sr).fromArray(n),n=(new Fn).setFromEuler(n).invert());const l=new Fn,c=new Sr,u=[];if(!s||!o)return new Qd(e+".quaternion",[0],[0]);for(let h=0;h<s.length;h+=3){if(c.set(s[h],s[h+1],s[h+2],r),l.setFromEuler(c),void 0!==i&&l.premultiply(i),void 0!==n&&l.multiply(n),h>2){(new Fn).fromArray(u,(h-3)/3*4).dot(l)<0&&l.set(-l.x,-l.y,-l.z,-l.w)}l.toArray(u,h/3*4)}return new Qd(e+".quaternion",o,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map((function(e){return e/100})),n=Sm.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new $d(e.modelName+".morphTargetInfluences["+n+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,i=t[0];for(let n=1;n<t.length;n++){const r=t[n];r!==i&&(t[e]=r,i=r,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,i){const n=i,r=[];let o=-1,s=-1,a=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(s=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];r.push(e),n[0]=e}else r.push(n[0]);if(-1!==s){const e=t.y.values[s];r.push(e),n[1]=e}else r.push(n[1]);if(-1!==a){const e=t.z.values[a];r.push(e),n[2]=e}else r.push(n[2])})),r}interpolateRotations(e,t,i,n){const r=[],o=[];r.push(e.times[0]),o.push(on.degToRad(e.values[0])),o.push(on.degToRad(t.values[0])),o.push(on.degToRad(i.values[0]));for(let s=1;s<e.values.length;s++){const a=[e.values[s-1],t.values[s-1],i.values[s-1]];if(isNaN(a[0])||isNaN(a[1])||isNaN(a[2]))continue;const l=a.map(on.degToRad),c=[e.values[s],t.values[s],i.values[s]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const u=c.map(on.degToRad),h=[c[0]-a[0],c[1]-a[1],c[2]-a[2]],d=[Math.abs(h[0]),Math.abs(h[1]),Math.abs(h[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){const t=Math.max(...d)/180,i=new Sr(...l,n),a=new Sr(...u,n),c=(new Fn).setFromEuler(i),h=(new Fn).setFromEuler(a);c.dot(h)&&h.set(-h.x,-h.y,-h.z,-h.w);const p=e.times[s-1],f=e.times[s]-p,g=new Fn,m=new Sr;for(let e=0;e<1;e+=1/t)g.copy(c.clone().slerp(h.clone(),e)),r.push(p+e*f),m.setFromQuaternion(g,n),o.push(m.x),o.push(m.y),o.push(m.z)}else r.push(e.times[s]),o.push(on.degToRad(e.values[s])),o.push(on.degToRad(t.values[s])),o.push(on.degToRad(i.values[s]))}return[r,o]}}class Mm{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Rm,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach((function(e,n){const r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(r||o)return;const s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):a?t.parseNodeProperty(e,a,i[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:i},o=this.parseNodeAttr(n),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,r):i in s?("PoseNode"===i?s.PoseNode.push(r):void 0!==s[i].id&&(s[i]={},s[i][s[i].id]=s[i]),""!==o.id&&(s[i][o.id]=r)):"number"===typeof o.id?(s[i]={},s[i][o.id]=r):"Properties70"!==i&&(s[i]="PoseNode"===i?[r]:r),"number"===typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",n="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}}parseNodeProperty(e,t,i){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===n){const e=r.split(",").slice(1),t=parseInt(e[0]),i=parseInt(e[1]);let s=r.split(",").slice(3);s=s.map((function(e){return e.trim().replace(/^"/,"")})),n="connections",r=[t,i],function(e,t){for(let i=0,n=e.length,r=t.length;i<r;i++,n++)e[n]=t[i]}(r,s),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=r),n in o&&Array.isArray(o[n])?o[n].push(r):"a"!==n?o[n]=r:o.a=r,this.setCurrentProp(o,n),"a"===n&&","!==r.slice(-1)&&(o.a=Hm(r))}else this.parseNodeSpecialProperty(e,n,r)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=Hm(t.a))}parseNodeSpecialProperty(e,t,i){const n=i.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=n[0],o=n[1],s=n[2],a=n[3];let l=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=Hm(l)}this.getPrevNode()[r]={type:o,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class km{parse(e){const t=new Bm(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const n=new Rm;for(;!this.endOfContent(t);){const e=this.parseNode(t,i);null!==e&&n.add(e.name,e)}return n}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},n=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),s=e.getString(o);if(0===n)return null;const a=[];for(let h=0;h<r;h++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",c=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(i.singleProperty=1===r&&e.getOffset()===n;n>e.getOffset();){const n=this.parseNode(e,t);null!==n&&this.parseSubNode(s,i,n)}return i.propertyList=a,"number"===typeof l&&(i.id=l),""!==c&&(i.attrName=c),""!==u&&(i.attrType=u),""!==s&&(i.name=s),i}parseSubNode(e,t,i){if(!0===i.singleProperty){const e=i.propertyList[0];Array.isArray(e)?(t[i.name]=i,i.a=e):t[i.name]=e}else if("Connections"===e&&"C"===i.name){const e=[];i.propertyList.forEach((function(t,i){0!==i&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===i.name){Object.keys(i).forEach((function(e){t[e]=i[e]}))}else if("Properties70"===e&&"P"===i.name){let e=i.propertyList[0],n=i.propertyList[1];const r=i.propertyList[2],o=i.propertyList[3];let s;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),s="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[e]={type:n,type2:r,flag:o,value:s}}else void 0===t[i.name]?"number"===typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}const s=cm(new Uint8Array(e.getArrayBuffer(o))),a=new Bm(s.buffer);switch(t){case"b":case"c":return a.getBooleanArray(n);case"d":return a.getFloat64Array(n);case"f":return a.getFloat32Array(n);case"i":return a.getInt32Array(n);case"l":return a.getInt64Array(n)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Bm{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const n=i.indexOf(0);return n>=0&&(i=new Uint8Array(this.dv.buffer,t,n)),this._textDecoder.decode(i)}}class Rm{add(e,t){this[e]=t}}function Pm(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Dm(e){return e/46186158e3}const Lm=[];function Om(e,t,i,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=i;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);const o=r*n.dataSize,s=o+n.dataSize;return function(e,t,i,n){for(let r=i,o=0;r<n;r++,o++)e[o]=t[r];return e}(Lm,n.buffer,o,s)}const Fm=new Sr,Nm=new Nn;function zm(e){const t=new fr,i=new fr,n=new fr,r=new fr,o=new fr,s=new fr,a=new fr,l=new fr,c=new fr,u=new fr,h=new fr,d=new fr,p=e.inheritType?e.inheritType:0;e.translation&&t.setPosition(Nm.fromArray(e.translation));const f=Um(0);if(e.preRotation){const t=e.preRotation.map(on.degToRad);t.push(f),i.makeRotationFromEuler(Fm.fromArray(t))}if(e.rotation){const t=e.rotation.map(on.degToRad);t.push(e.eulerOrder||f),n.makeRotationFromEuler(Fm.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(on.degToRad);t.push(f),r.makeRotationFromEuler(Fm.fromArray(t)),r.invert()}e.scale&&o.scale(Nm.fromArray(e.scale)),e.scalingOffset&&a.setPosition(Nm.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(Nm.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(Nm.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(Nm.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),u.copy(e.parentMatrixWorld));const g=i.clone().multiply(n).multiply(r),m=new fr;m.extractRotation(u);const _=new fr;_.copyPosition(u);const v=_.clone().invert().multiply(u),y=m.clone().invert().multiply(v),b=o,A=new fr;if(0===p)A.copy(m).multiply(g).multiply(y).multiply(b);else if(1===p)A.copy(m).multiply(y).multiply(g).multiply(b);else{const e=(new fr).scale((new Nn).setFromMatrixScale(h)).clone().invert(),t=y.clone().multiply(e);A.copy(m).multiply(g).multiply(t).multiply(b)}const w=c.clone().invert(),x=s.clone().invert();let S=t.clone().multiply(l).multiply(c).multiply(i).multiply(n).multiply(r).multiply(w).multiply(a).multiply(s).multiply(o).multiply(x);const C=(new fr).copyPosition(S),E=u.clone().multiply(C);return d.copyPosition(E),S=d.clone().multiply(A),S.premultiply(u.invert()),S}function Um(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Hm(e){return e.split(",").map((function(e){return parseFloat(e)}))}function Vm(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,i))}function $m(e,t){if(t===jt)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Wt||t===qt){let i=e.getIndex();if(null===i){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}const n=i.count-2,r=[];if(t===Wt)for(let e=1;e<=n;e++)r.push(i.getX(0)),r.push(i.getX(e)),r.push(i.getX(e+1));else for(let e=0;e<n;e++)e%2===0?(r.push(i.getX(e)),r.push(i.getX(e+1)),r.push(i.getX(e+2))):(r.push(i.getX(e+2)),r.push(i.getX(e+1)),r.push(i.getX(e)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class Gm extends Jd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Ym(e)})),this.register((function(e){return new Km(e)})),this.register((function(e){return new s_(e)})),this.register((function(e){return new a_(e)})),this.register((function(e){return new l_(e)})),this.register((function(e){return new Jm(e)})),this.register((function(e){return new e_(e)})),this.register((function(e){return new t_(e)})),this.register((function(e){return new i_(e)})),this.register((function(e){return new Xm(e)})),this.register((function(e){return new n_(e)})),this.register((function(e){return new Zm(e)})),this.register((function(e){return new o_(e)})),this.register((function(e){return new r_(e)})),this.register((function(e){return new qm(e)})),this.register((function(e){return new c_(e)})),this.register((function(e){return new u_(e)}))}load(e,t,i,n){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=Mp.extractUrlBase(e);o=Mp.resolveURL(t,this.path)}else o=Mp.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){n?n(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new ip(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{r.parse(i,o,(function(i){t(i),r.manager.itemEnd(e)}),s)}catch(hse){s(hse)}}),i,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let r;const o={},s={},a=new TextDecoder;if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(a.decode(new Uint8Array(e,0,4))===h_){try{o[jm.KHR_BINARY_GLTF]=new f_(e)}catch(c){return void(n&&n(c))}r=JSON.parse(o[jm.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new U_(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const e=r.extensionsUsed[u],t=r.extensionsRequired||[];switch(e){case jm.KHR_MATERIALS_UNLIT:o[e]=new Wm;break;case jm.KHR_DRACO_MESH_COMPRESSION:o[e]=new g_(r,this.dracoLoader);break;case jm.KHR_TEXTURE_TRANSFORM:o[e]=new m_;break;case jm.KHR_MESH_QUANTIZATION:o[e]=new __;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(s),l.parse(i,n)}parseAsync(e,t){const i=this;return new Promise((function(n,r){i.parse(e,t,n,r)}))}}function Qm(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const jm={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class qm{constructor(e){this.parser=e,this.name=jm.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const n=t[i];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let n=t.cache.get(i);if(n)return n;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let s;const a=new so(16777215);void 0!==o.color&&a.setRGB(o.color[0],o.color[1],o.color[2],ni);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":s=new xp(a),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new Ap(a),s.distance=l;break;case"spot":s=new mp(a),s.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,s.angle=o.spot.outerConeAngle,s.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return s.position.set(0,0,0),s.decay=2,D_(s,o),void 0!==o.intensity&&(s.intensity=o.intensity),s.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(s),t.cache.add(i,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,n=i.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return i._getNodeRef(t.cache,r,e)}))}}class Wm{constructor(){this.name=jm.KHR_MATERIALS_UNLIT}getMaterialType(){return uo}extendParams(e,t,i){const n=[];e.color=new so(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],ni),e.opacity=t[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(e,"map",r.baseColorTexture,ii))}return Promise.all(n)}}class Xm{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}}class Ym{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sn(e,e)}return Promise.all(r)}}class Km{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.dispersion=void 0!==n.dispersion?n.dispersion:0,Promise.resolve()}}class Zm{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Jm{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new so(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],ni)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ii)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class e_{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class t_{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=(new so).setRGB(s[0],s[1],s[2],ni),Promise.all(r)}}class i_{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class n_{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=(new so).setRGB(s[0],s[1],s[2],ni),void 0!==o.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,ii)),Promise.all(r)}}class r_{constructor(e){this.parser=e,this.name=jm.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class o_{constructor(e){this.parser=e,this.name=jm.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?xd:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class s_{constructor(e){this.parser=e,this.name=jm.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class a_{constructor(e){this.parser=e,this.name=jm.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=n.images[o.source];let a=i.textureLoader;if(s.uri){const e=i.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,o.source,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class l_{constructor(e){this.parser=e,this.name=jm.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=n.images[o.source];let a=i.textureLoader;if(s.uri){const e=i.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,o.source,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class c_{constructor(e){this.name=jm.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const e=i.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then((function(t){const i=e.byteOffset||0,n=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,i,n);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(o*s);return r.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t}))}))}return null}}class u_{constructor(e){this.name=jm.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const n=t.meshes[i.mesh];for(const a of n.primitives)if(a.mode!==A_.TRIANGLES&&a.mode!==A_.TRIANGLE_STRIP&&a.mode!==A_.TRIANGLE_FAN&&void 0!==a.mode)return null;const r=i.extensions[this.name].attributes,o=[],s={};for(const a in r)o.push(this.parser.getDependency("accessor",r[a]).then((e=>(s[a]=e,s[a]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),i=t.isGroup?t.children:[t],n=e[0].count,r=[];for(const o of i){const e=new fr,t=new Nn,i=new Fn,a=new Nn(1,1,1),l=new ru(o.geometry,o.material,n);for(let r=0;r<n;r++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,r),s.ROTATION&&i.fromBufferAttribute(s.ROTATION,r),s.SCALE&&a.fromBufferAttribute(s.SCALE,r),l.setMatrixAt(r,e.compose(t,i,a));for(const n in s)if("_COLOR_0"===n){const e=s[n];l.instanceColor=new Yc(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==n&&"ROTATION"!==n&&"SCALE"!==n&&o.geometry.setAttribute(n,s[n]);Hr.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}}const h_="glTF",d_=1313821514,p_=5130562;class f_{constructor(e){this.name=jm.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==h_)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<n;){const t=r.getUint32(o,!0);o+=4;const n=r.getUint32(o,!0);if(o+=4,n===d_){const n=new Uint8Array(e,12+o,t);this.content=i.decode(n)}else if(n===p_){const i=12+o;this.body=e.slice(i,i+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class g_{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=jm.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const c in o){const e=E_[c]||c.toLowerCase();s[e]=o[c]}for(const c in e.attributes){const t=E_[c]||c.toLowerCase();if(void 0!==o[c]){const n=i.accessors[e.attributes[c]],r=w_[n.componentType];l[t]=r.name,a[t]=!0===n.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,i){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const i=e.attributes[t],n=a[t];void 0!==n&&(i.normalized=n)}t(e)}),s,l,ni,i)}))}))}}class m_{constructor(){this.name=jm.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class __{constructor(){this.name=jm.KHR_MESH_QUANTIZATION}}class v_ extends Od{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n;for(let o=0;o!==n;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=n-t,u=(i-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,g=-2*d+3*h,m=d-h,_=1-g,v=m-h+u;for(let y=0;y!==s;y++){const e=o[f+y+s],t=o[f+y+a]*c,i=o[p+y+s],n=o[p+y]*c;r[y]=_*e+v*t+g*i+m*n}return r}}const y_=new Fn;class b_ extends v_{interpolate_(e,t,i,n){const r=super.interpolate_(e,t,i,n);return y_.fromArray(r).normalize().toArray(r),r}}const A_={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},w_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x_={9728:we,9729:Te,9984:xe,9985:Ie,9986:Ce,9987:ke},S_={33071:be,33648:Ae,10497:ye},C_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},E_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},T_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I_={CUBICSPLINE:void 0,LINEAR:zt,STEP:Nt},M_="OPAQUE",k_="MASK",B_="BLEND";function R_(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new wd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_})),e.DefaultMaterial}function P_(e,t,i){for(const n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function D_(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function L_(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,n=i.length;t<n;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function O_(e){let t;const i=e.extensions&&e.extensions[jm.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+F_(i.attributes):e.indices+":"+F_(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+F_(e.targets[n]);return t}function F_(e){let t="";const i=Object.keys(e).sort();for(let n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function N_(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const z_=new fr;class U_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Qm,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=-1,r=!1,o=-1;if("undefined"!==typeof navigator){const e=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);n=i&&t?parseInt(t[1],10):-1,r=e.indexOf("Firefox")>-1,o=r?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"===typeof createImageBitmap||i&&n<17||r&&o<98?this.textureLoader=new lp(this.options.manager):this.textureLoader=new Op(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ip(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(t){const o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};return P_(r,o,n),D_(o,n),Promise.all(i._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const i=t[n].joints;for(let t=0,n=i.length;t<n;t++)e[i[t]].isBone=!0}for(let n=0,r=e.length;n<r;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(i[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),r=(e,t)=>{const i=this.associations.get(e);null!=i&&this.associations.set(t,i);for(const[n,o]of e.children.entries())r(o,t.children[n])};return r(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const r=e(t[n]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})),!n)throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[jm.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,r){i.load(Mp.resolveURL(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))}loadAccessor(e){const t=this,i=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse){const e=C_[n.type],t=w_[n.componentType],i=!0===n.normalized,r=new t(n.count*e);return Promise.resolve(new yo(r,e,i))}const r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=C_[n.type],s=w_[n.componentType],a=s.BYTES_PER_ELEMENT,l=a*o,c=n.byteOffset||0,u=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,h=!0===n.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),i="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let l=t.cache.get(i);l||(d=new s(r,e*u,n.count*u/a),l=new pc(d,u/a),t.cache.add(i,l)),p=new gc(l,o,c%u/a,h)}else d=null===r?new s(n.count*o):new s(r,c,n.count*o),p=new yo(d,o,h);if(void 0!==n.sparse){const t=C_.SCALAR,i=w_[n.sparse.indices.componentType],a=n.sparse.indices.byteOffset||0,l=n.sparse.values.byteOffset||0,c=new i(e[1],a,n.sparse.count*t),u=new s(e[2],l,n.sparse.count*o);null!==r&&(p=new yo(p.array.slice(),p.itemSize,p.normalized)),p.normalized=!1;for(let e=0,n=c.length;e<n;e++){const t=c[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}p.normalized=h}return p}))}loadTexture(e){const t=this.json,i=this.options,n=t.textures[e].source,r=t.images[n];let o=this.textureLoader;if(r.uri){const e=i.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,i){const n=this,r=this.json,o=r.textures[e],s=r.images[t],a=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,i).then((function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const i=(r.samplers||{})[o.sampler]||{};return t.magFilter=x_[i.magFilter]||Te,t.minFilter=x_[i.minFilter]||ke,t.wrapS=S_[i.wrapS]||ye,t.wrapT=S_[i.wrapT]||ye,n.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const i=this,n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=n.images[e],s=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(void 0!==o.bufferView)a=i.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(a).then((function(e){return new Promise((function(i,n){let o=i;!0===t.isImageBitmapLoader&&(o=function(e){const t=new Mn(e);t.needsUpdate=!0,i(t)}),t.load(Mp.resolveURL(e,r.path),o,void 0,n)}))})).then((function(e){var t;return!0===l&&s.revokeObjectURL(a),D_(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,i,n){const r=this;return this.getDependency("texture",i.index).then((function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),r.extensions[jm.KHR_TEXTURE_TRANSFORM]){const e=void 0!==i.extensions?i.extensions[jm.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[jm.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==n&&(o.colorSpace=n),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new Nu,co.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){const e="LineBasicMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new Su,co.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,this.cache.add(e,t)),i=t}if(n||r||o){let e="ClonedMaterial:"+i.uuid+":";n&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}e.material=i}getMaterialType(){return wd}loadMaterial(e){const t=this,i=this.json,n=this.extensions,r=i.materials[e];let o;const s={},a=[];if((r.extensions||{})[jm.KHR_MATERIALS_UNLIT]){const e=n[jm.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),a.push(e.extendParams(s,r,t))}else{const i=r.pbrMetallicRoughness||{};if(s.color=new so(1,1,1),s.opacity=1,Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],ni),s.opacity=e[3]}void 0!==i.baseColorTexture&&a.push(t.assignTexture(s,"map",i.baseColorTexture,ii)),s.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,s.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(a.push(t.assignTexture(s,"metalnessMap",i.metallicRoughnessTexture)),a.push(t.assignTexture(s,"roughnessMap",i.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),a.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===r.doubleSided&&(s.side=y);const l=r.alphaMode||M_;if(l===B_?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===k_&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==uo&&(a.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new sn(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==uo&&(a.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==uo){const e=r.emissiveFactor;s.emissive=(new so).setRGB(e[0],e[1],e[2],ni)}return void 0!==r.emissiveTexture&&o!==uo&&a.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,ii)),Promise.all(a).then((function(){const i=new o(s);return r.name&&(i.name=r.name),D_(i,r),t.associations.set(i,{materials:e}),r.extensions&&P_(n,i,r),i}))}createUniqueName(e){const t=df.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,n=this.primitiveCache;function r(e){return i[jm.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return H_(i,e,t)}))}const o=[];for(let s=0,a=e.length;s<a;s++){const i=e[s],a=O_(i),l=n[a];if(l)o.push(l.promise);else{let e;e=i.extensions&&i.extensions[jm.KHR_DRACO_MESH_COMPRESSION]?r(i):H_(new Oo,i,t),n[a]={primitive:i,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,n=this.extensions,r=i.meshes[e],o=r.primitives,s=[];for(let a=0,l=o.length;a<l;a++){const e=void 0===o[a].material?R_(this.cache):this.getDependency("material",o[a].material);s.push(e)}return s.push(t.loadGeometries(o)),Promise.all(s).then((function(i){const s=i.slice(0,i.length-1),a=i[i.length-1],l=[];for(let u=0,h=a.length;u<h;u++){const i=a[u],c=o[u];let h;const d=s[u];if(c.mode===A_.TRIANGLES||c.mode===A_.TRIANGLE_STRIP||c.mode===A_.TRIANGLE_FAN||void 0===c.mode)h=!0===r.isSkinnedMesh?new Gc(i,d):new Wo(i,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),c.mode===A_.TRIANGLE_STRIP?h.geometry=$m(h.geometry,qt):c.mode===A_.TRIANGLE_FAN&&(h.geometry=$m(h.geometry,Wt));else if(c.mode===A_.LINES)h=new Ou(i,d);else if(c.mode===A_.LINE_STRIP)h=new Ru(i,d);else if(c.mode===A_.LINE_LOOP)h=new Fu(i,d);else{if(c.mode!==A_.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new $u(i,d)}Object.keys(h.geometry.morphAttributes).length>0&&L_(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),D_(h,r),c.extensions&&P_(n,h,c),t.assignFinalMaterial(h),l.push(h)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return r.extensions&&P_(n,l[0],r),l[0];const c=new ec;r.extensions&&P_(n,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const i=this.json.cameras[e],n=i[i.type];if(n)return"perspective"===i.type?t=new ss(on.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(t=new Ps(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),D_(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let n=0,r=t.joints.length;n<r;n++)i.push(this._loadNodeShallow(t.joints[n]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(e){const i=e.pop(),n=e,r=[],o=[];for(let s=0,a=n.length;s<a;s++){const e=n[s];if(e){r.push(e);const t=new fr;null!==i&&t.fromArray(i.array,16*s),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new Xc(r,o)}))}loadAnimation(e){const t=this.json,i=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,o=[],s=[],a=[],l=[],c=[];for(let u=0,h=n.channels.length;u<h;u++){const e=n.channels[u],t=n.samplers[e.sampler],i=e.target,r=i.node,h=void 0!==n.parameters?n.parameters[t.input]:t.input,d=void 0!==n.parameters?n.parameters[t.output]:t.output;void 0!==i.node&&(o.push(this.getDependency("node",r)),s.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",d)),l.push(t),c.push(i))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=n[r],u=o[r],h=s[r],d=a[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=i._createAnimationTracks(e,c,u,h,d);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new Wd(r,void 0,l)}))}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(e){const t=i._getNodeRef(i.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,i=n.weights.length;t<i;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this,i=this.json.nodes[e],n=t._loadNodeShallow(e),r=[],o=i.children||[];for(let a=0,l=o.length;a<l;a++)r.push(t.getDependency("node",o[a]));const s=void 0===i.skin?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([n,Promise.all(r),s]).then((function(e){const t=e[0],i=e[1],n=e[2];null!==n&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(n,z_)}));for(let r=0,o=i.length;r<o;r++)t.add(i[r]);return t}))}_loadNodeShallow(e){const t=this.json,i=this.extensions,n=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?n.createUniqueName(r.name):"",s=[],a=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return a&&s.push(a),void 0!==r.camera&&s.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){s.push(e)})),this.nodeCache[e]=Promise.all(s).then((function(t){let s;if(s=!0===r.isBone?new Qc:t.length>1?new ec:1===t.length?t[0]:new Hr,s!==t[0])for(let e=0,i=t.length;e<i;e++)s.add(t[e]);if(r.name&&(s.userData.name=r.name,s.name=o),D_(s,r),r.extensions&&P_(i,s,r),void 0!==r.matrix){const e=new fr;e.fromArray(r.matrix),s.applyMatrix4(e)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return n.associations.has(s)||n.associations.set(s,{}),n.associations.get(s).nodes=e,s})),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],n=this,r=new ec;i.name&&(r.name=n.createUniqueName(i.name)),D_(r,i),i.extensions&&P_(t,r,i);const o=i.nodes||[],s=[];for(let a=0,l=o.length;a<l;a++)s.push(n.getDependency("node",o[a]));return Promise.all(s).then((function(e){for(let t=0,i=e.length;t<i;t++)r.add(e[t]);return n.associations=(e=>{const t=new Map;for(const[i,r]of n.associations)(i instanceof co||i instanceof Mn)&&t.set(i,r);return e.traverse((e=>{const i=n.associations.get(e);null!=i&&t.set(e,i)})),t})(r),r}))}_createAnimationTracks(e,t,i,n,r){const o=[],s=e.name?e.name:e.uuid,a=[];let l;switch(T_[r.path]===T_.weights?e.traverse((function(e){e.morphTargetInfluences&&a.push(e.name?e.name:e.uuid)})):a.push(s),T_[r.path]){case T_.weights:l=$d;break;case T_.rotation:l=Qd;break;case T_.position:case T_.scale:l=qd;break;default:if(1===i.itemSize)l=$d;else l=qd}const c=void 0!==n.interpolation?I_[n.interpolation]:zt,u=this._getArrayFromAccessor(i);for(let h=0,d=a.length;h<d;h++){const e=new l(a[h]+"."+T_[r.path],t.array,u,c);"CUBICSPLINE"===n.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=N_(t.constructor),i=new Float32Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=t[n]*e;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof Qd?b_:v_)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function H_(e,t,i){const n=t.attributes,r=[];function o(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const s in n){const t=E_[s]||s.toLowerCase();t in e.attributes||r.push(o(n[s],t))}if(void 0!==t.indices&&!e.index){const n=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(n)}return bn.workingColorSpace!==ni&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${bn.workingColorSpace}" not supported.`),D_(e,t),function(e,t,i){const n=t.attributes,r=new Hn;if(void 0===n.POSITION)return;{const e=i.json.accessors[n.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Nn(t[0],t[1],t[2]),new Nn(o[0],o[1],o[2])),e.normalized){const t=N_(w_[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new Nn,t=new Nn;for(let n=0,r=o.length;n<r;n++){const r=o[n];if(void 0!==r.POSITION){const n=i.json.accessors[r.POSITION],o=n.min,s=n.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),n.normalized){const e=N_(w_[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const s=new or;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=s}(e,t,i),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,i){let n=!1,r=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),n&&r&&o)break}if(!n&&!r&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(n){const t=void 0!==u.POSITION?i.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==u.NORMAL?i.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==u.COLOR_0?i.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then((function(t){const i=t[0],s=t[1],a=t[2];return n&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,i):e}))}const V_=/^[og]\s*(.+)?/,$_=/^mtllib /,G_=/^usemtl /,Q_=/^usemap /,j_=/\s+/,q_=new Nn,W_=new Nn,X_=new Nn,Y_=new Nn,K_=new Nn,Z_=new so;function J_(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);const n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"===typeof i.clone){const e=i.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addFaceNormal:function(e,t,i){const n=this.vertices,r=this.object.geometry.normals;q_.fromArray(n,e),W_.fromArray(n,t),X_.fromArray(n,i),K_.subVectors(X_,W_),Y_.subVectors(q_,W_),K_.cross(Y_),K_.normalize(),r.push(K_.x,K_.y,K_.z),r.push(K_.x,K_.y,K_.z),r.push(K_.x,K_.y,K_.z)},addColor:function(e,t,i){const n=this.colors,r=this.object.geometry.colors;void 0!==n[e]&&r.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&r.push(n[t+0],n[t+1],n[t+2]),void 0!==n[i]&&r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){const n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,o,s,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),d=this.parseVertexIndex(i,c);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==s&&""!==s){const e=this.normals.length;u=this.parseNormalIndex(s,e),h=this.parseNormalIndex(a,e),d=this.parseNormalIndex(l,e),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==n&&""!==n){const e=this.uvs.length;u=this.parseUVIndex(n,e),h=this.parseUVIndex(r,e),d=this.parseUVIndex(o,e),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,n=e.length;i<n;i++){const n=this.parseVertexIndex(e[i],t);this.addVertexPoint(n),this.addColor(n)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,n=this.uvs.length;for(let r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));for(let r=0,o=t.length;r<o;r++)this.addUVLine(this.parseUVIndex(t[r],n))}};return e.startObject("",!1),e}class ev extends Jd{constructor(e){super(e),this.materials=null}load(e,t,i,n){const r=this,o=new ip(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(hse){n?n(hse):console.error(hse),r.manager.itemError(e)}}),i,n)}setMaterials(e){return this.materials=e,this}parse(e){const t=new J_;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let n=[];for(let o=0,s=i.length;o<s;o++){const e=i[o].trimStart();if(0===e.length)continue;const r=e.charAt(0);if("#"!==r)if("v"===r){const i=e.split(j_);switch(i[0]){case"v":t.vertices.push(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])),i.length>=7?(Z_.setRGB(parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),ii),t.colors.push(Z_.r,Z_.g,Z_.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));break;case"vt":t.uvs.push(parseFloat(i[1]),parseFloat(i[2]))}}else if("f"===r){const i=e.slice(1).trim().split(j_),n=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];if(t.length>0){const e=t.split("/");n.push(e)}}const r=n[0];for(let e=1,o=n.length-1;e<o;e++){const i=n[e],o=n[e+1];t.addFace(r[0],i[0],o[0],r[1],i[1],o[1],r[2],i[2],o[2])}}else if("l"===r){const i=e.substring(1).trim().split(" ");let n=[];const r=[];if(-1===e.indexOf("/"))n=i;else for(let e=0,t=i.length;e<t;e++){const t=i[e].split("/");""!==t[0]&&n.push(t[0]),""!==t[1]&&r.push(t[1])}t.addLineGeometry(n,r)}else if("p"===r){const i=e.slice(1).trim().split(" ");t.addPointGeometry(i)}else if(null!==(n=V_.exec(e))){const e=(" "+n[0].slice(1).trim()).slice(1);t.startObject(e)}else if(G_.test(e))t.object.startMaterial(e.substring(7).trim(),t.materialLibraries);else if($_.test(e))t.materialLibraries.push(e.substring(7).trim());else if(Q_.test(e))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===r){if(n=e.split(" "),n.length>1){const e=n[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const i=t.object.currentMaterial();i&&(i.smooth=t.object.smooth)}else{if("\0"===e)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+e+'"')}}t.finalize();const r=new ec;r.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let o=0,s=t.objects.length;o<s;o++){const e=t.objects[o],i=e.geometry,n=e.materials,s="Line"===i.type,a="Points"===i.type;let l=!1;if(0===i.vertices.length)continue;const c=new Oo;c.setAttribute("position",new Io(i.vertices,3)),i.normals.length>0&&c.setAttribute("normal",new Io(i.normals,3)),i.colors.length>0&&(l=!0,c.setAttribute("color",new Io(i.colors,3))),!0===i.hasUVIndices&&c.setAttribute("uv",new Io(i.uvs,2));const u=[];for(let r=0,o=n.length;r<o;r++){const e=n[r],i=e.name+"_"+e.smooth+"_"+l;let o=t.materials[i];if(null!==this.materials)if(o=this.materials.create(e.name),!s||!o||o instanceof Su){if(a&&o&&!(o instanceof Nu)){const e=new Nu({size:10,sizeAttenuation:!1});co.prototype.copy.call(e,o),e.color.copy(o.color),e.map=o.map,o=e}}else{const e=new Su;co.prototype.copy.call(e,o),e.color.copy(o.color),o=e}void 0===o&&(o=s?new Su:a?new Nu({size:1,sizeAttenuation:!1}):new Sd,o.name=e.name,o.flatShading=!e.smooth,o.vertexColors=l,t.materials[i]=o),u.push(o)}let h;if(u.length>1){for(let e=0,t=n.length;e<t;e++){const t=n[e];c.addGroup(t.groupStart,t.groupCount,e)}h=s?new Ou(c,u):a?new $u(c,u):new Wo(c,u)}else h=s?new Ou(c,u[0]):a?new $u(c,u[0]):new Wo(c,u[0]);h.name=e.name,r.add(h)}else if(t.vertices.length>0){const e=new Nu({size:1,sizeAttenuation:!1}),i=new Oo;i.setAttribute("position",new Io(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(i.setAttribute("color",new Io(t.colors,3)),e.vertexColors=!0);const n=new $u(i,e);r.add(n)}return r}}const tv=new so;class iv extends Jd{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,t,i,n){const r=this,o=new ip(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(hse){n?n(hse):console.error(hse),r.manager.itemError(e)}}),i,n)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;let i="";const n=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(e);null!==n&&(i=n[1]);const r={comments:[],elements:[],headerLength:t,objInfo:""},o=i.split(/\r\n|\r|\n/);let s;function a(e,t){const i={type:e[0]};return"list"===i.type?(i.name=e[3],i.countType=e[1],i.itemType=e[2]):i.name=e[1],i.name in t&&(i.name=t[i.name]),i}for(let l=0;l<o.length;l++){let e=o[l];if(e=e.trim(),""===e)continue;const t=e.split(/\s+/),i=t.shift();switch(e=t.join(" "),i){case"format":r.format=t[0],r.version=t[1];break;case"comment":r.comments.push(e);break;case"element":void 0!==s&&r.elements.push(s),s={},s.name=t[0],s.count=parseInt(t[1]),s.properties=[];break;case"property":s.properties.push(a(t,d.propertyNameMapping));break;case"obj_info":r.objInfo=e;break;default:console.log("unhandled",i,t)}}return void 0!==s&&r.elements.push(s),r}function i(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function n(e,t){const n={};for(let r=0;r<e.length;r++){if(t.empty())return null;if("list"===e[r].type){const o=[],s=i(t.next(),e[r].countType);for(let n=0;n<s;n++){if(t.empty())return null;o.push(i(t.next(),e[r].itemType))}n[e[r].name]=o}else n[e[r].name]=i(t.next(),e[r].type)}return n}function r(){const e={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(const t of Object.keys(d.customPropertyMapping))e[t]=[];return e}function o(e){const t=e.map((e=>e.name));function i(e){for(let i=0,n=e.length;i<n;i++){const n=e[i];if(t.includes(n))return n}return null}return{attrX:i(["x","px","posx"])||"x",attrY:i(["y","py","posy"])||"y",attrZ:i(["z","pz","posz"])||"z",attrNX:i(["nx","normalx"]),attrNY:i(["ny","normaly"]),attrNZ:i(["nz","normalz"]),attrS:i(["s","u","texture_u","tx"]),attrT:i(["t","v","texture_v","ty"]),attrR:i(["red","diffuse_red","r","diffuse_r"]),attrG:i(["green","diffuse_green","g","diffuse_g"]),attrB:i(["blue","diffuse_blue","b","diffuse_b"])}}function s(e,t){const i=r();let s,c;s=null!==(c=/end_header\s+(\S[\s\S]*\S|\S)\s*$/.exec(e))?c[1].split(/\s+/):[];const u=new nv(s);e:for(let r=0;r<t.elements.length;r++){const e=t.elements[r],s=o(e.properties);for(let t=0;t<e.count;t++){const t=n(e.properties,u);if(!t)break e;l(i,e.name,t,s)}}return a(i)}function a(e){let t=new Oo;e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new Io(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new Io(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new Io(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new Io(e.colors,3)),(e.faceVertexUvs.length>0||e.faceVertexColors.length>0)&&(t=t.toNonIndexed(),e.faceVertexUvs.length>0&&t.setAttribute("uv",new Io(e.faceVertexUvs,2)),e.faceVertexColors.length>0&&t.setAttribute("color",new Io(e.faceVertexColors,3)));for(const i of Object.keys(d.customPropertyMapping))e[i].length>0&&t.setAttribute(i,new Io(e[i],d.customPropertyMapping[i].length));return t.computeBoundingSphere(),t}function l(e,t,i,n){if("vertex"===t){e.vertices.push(i[n.attrX],i[n.attrY],i[n.attrZ]),null!==n.attrNX&&null!==n.attrNY&&null!==n.attrNZ&&e.normals.push(i[n.attrNX],i[n.attrNY],i[n.attrNZ]),null!==n.attrS&&null!==n.attrT&&e.uvs.push(i[n.attrS],i[n.attrT]),null!==n.attrR&&null!==n.attrG&&null!==n.attrB&&(tv.setRGB(i[n.attrR]/255,i[n.attrG]/255,i[n.attrB]/255,ii),e.colors.push(tv.r,tv.g,tv.b));for(const t of Object.keys(d.customPropertyMapping))for(const n of d.customPropertyMapping[t])e[t].push(i[n])}else if("face"===t){const t=i.vertex_indices||i.vertex_index,r=i.texcoord;3===t.length?(e.indices.push(t[0],t[1],t[2]),r&&6===r.length&&(e.faceVertexUvs.push(r[0],r[1]),e.faceVertexUvs.push(r[2],r[3]),e.faceVertexUvs.push(r[4],r[5]))):4===t.length&&(e.indices.push(t[0],t[1],t[3]),e.indices.push(t[1],t[2],t[3])),null!==n.attrR&&null!==n.attrG&&null!==n.attrB&&(tv.setRGB(i[n.attrR]/255,i[n.attrG]/255,i[n.attrB]/255,ii),e.faceVertexColors.push(tv.r,tv.g,tv.b),e.faceVertexColors.push(tv.r,tv.g,tv.b),e.faceVertexColors.push(tv.r,tv.g,tv.b))}}function c(e,t){const i={};let n=0;for(let r=0;r<t.length;r++){const o=t[r],s=o.valueReader;if("list"===o.type){const t=[],r=o.countReader.read(e+n);n+=o.countReader.size;for(let i=0;i<r;i++)t.push(s.read(e+n)),n+=s.size;i[o.name]=t}else i[o.name]=s.read(e+n),n+=s.size}return[i,n]}function u(e,t,i){function n(e,t,i){switch(t){case"int8":case"char":return{read:t=>e.getInt8(t),size:1};case"uint8":case"uchar":return{read:t=>e.getUint8(t),size:1};case"int16":case"short":return{read:t=>e.getInt16(t,i),size:2};case"uint16":case"ushort":return{read:t=>e.getUint16(t,i),size:2};case"int32":case"int":return{read:t=>e.getInt32(t,i),size:4};case"uint32":case"uint":return{read:t=>e.getUint32(t,i),size:4};case"float32":case"float":return{read:t=>e.getFloat32(t,i),size:4};case"float64":case"double":return{read:t=>e.getFloat64(t,i),size:8}}}for(let r=0,o=e.length;r<o;r++){const o=e[r];"list"===o.type?(o.countReader=n(t,o.countType,i),o.valueReader=n(t,o.itemType,i)):o.valueReader=n(t,o.type,i)}}let h;const d=this;if(e instanceof ArrayBuffer){const i=new Uint8Array(e),{headerText:n,headerLength:d}=function(e){let t=0,i=!0,n="";const r=[],o=(new TextDecoder).decode(e.subarray(0,5)),s=/^ply\r\n/.test(o);do{const o=String.fromCharCode(e[t++]);"\n"!==o&&"\r"!==o?n+=o:("end_header"===n&&(i=!1),""!==n&&(r.push(n),n=""))}while(i&&t<e.length);return!0===s&&t++,{headerText:r.join("\r")+"\r",headerLength:t}}(i),p=t(n,d);if("ascii"===p.format){h=s((new TextDecoder).decode(i),p)}else h=function(e,t){const i=r(),n="binary_little_endian"===t.format,s=new DataView(e,t.headerLength);let h,d=0;for(let r=0;r<t.elements.length;r++){const e=t.elements[r],a=e.properties,p=o(a);u(a,s,n);for(let t=0;t<e.count;t++){h=c(d,a),d+=h[1];const t=h[0];l(i,e.name,t,p)}}return a(i)}(e,p)}else h=s(e,t(e));return h}}class nv{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}class rv extends Jd{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new ip(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(hse){n?n(hse):console.error(hse),r.manager.itemError(e)}}),i,n)}parse(e){function t(e,t,i){for(let n=0,r=e.length;n<r;n++)if(e[n]!==t.getUint8(i+n))return!1;return!0}const i=function(e){if("string"===typeof e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t.buffer||t}return e}(e);return function(e){const i=new DataView(e);if(84+50*i.getUint32(80,!0)===i.byteLength)return!0;const n=[115,111,108,105,100];for(let r=0;r<5;r++)if(t(n,i,r))return!1;return!0}(i)?function(e){const t=new DataView(e),i=t.getUint32(80,!0);let n,r,o,s,a,l,c,u,h=!1;for(let m=0;m<70;m++)1129270351==t.getUint32(m,!1)&&82==t.getUint8(m+4)&&61==t.getUint8(m+5)&&(h=!0,s=new Float32Array(3*i*3),a=t.getUint8(m+6)/255,l=t.getUint8(m+7)/255,c=t.getUint8(m+8)/255,u=t.getUint8(m+9)/255);const d=new Oo,p=new Float32Array(3*i*3),f=new Float32Array(3*i*3),g=new so;for(let m=0;m<i;m++){const e=84+50*m,i=t.getFloat32(e,!0),u=t.getFloat32(e+4,!0),d=t.getFloat32(e+8,!0);if(h){const i=t.getUint16(e+48,!0);0===(32768&i)?(n=(31&i)/31,r=(i>>5&31)/31,o=(i>>10&31)/31):(n=a,r=l,o=c)}for(let a=1;a<=3;a++){const l=e+12*a,c=3*m*3+3*(a-1);p[c]=t.getFloat32(l,!0),p[c+1]=t.getFloat32(l+4,!0),p[c+2]=t.getFloat32(l+8,!0),f[c]=i,f[c+1]=u,f[c+2]=d,h&&(g.setRGB(n,r,o,ii),s[c]=g.r,s[c+1]=g.g,s[c+2]=g.b)}}return d.setAttribute("position",new yo(p,3)),d.setAttribute("normal",new yo(f,3)),h&&(d.setAttribute("color",new yo(s,3)),d.hasColors=!0,d.alpha=u),d}(i):function(e){const t=new Oo,i=/solid([\s\S]*?)endsolid/g,n=/facet([\s\S]*?)endfacet/g,r=/solid\s(.+)/;let o=0;const s=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,a=new RegExp("vertex"+s+s+s,"g"),l=new RegExp("normal"+s+s+s,"g"),c=[],u=[],h=[],d=new Nn;let p,f=0,g=0,m=0;for(;null!==(p=i.exec(e));){g=m;const e=p[0],i=null!==(p=r.exec(e))?p[1]:"";for(h.push(i);null!==(p=n.exec(e));){let e=0,t=0;const i=p[0];for(;null!==(p=l.exec(i));)d.x=parseFloat(p[1]),d.y=parseFloat(p[2]),d.z=parseFloat(p[3]),t++;for(;null!==(p=a.exec(i));)c.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),u.push(d.x,d.y,d.z),e++,m++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}const s=g,_=m-g;t.userData.groupNames=h,t.addGroup(s,_,f),f++}return t.setAttribute("position",new Io(c,3)),t.setAttribute("normal",new Io(u,3)),t}("string"!==typeof(n=e)?(new TextDecoder).decode(n):n);var n}}class ov extends Jd{load(e,t,i,n){const r=this,o=new ip(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){try{t(r.parse(i))}catch(hse){n?n(hse):console.error(hse),r.manager.itemError(e)}}),i,n)}parse(e){const t=e.split("\n"),i=[],n=[],r=new so;for(let s of t){if(s=s.trim(),"#"===s.charAt(0))continue;const e=s.split(/\s+/);if(3===e.length&&(i.push(parseFloat(e[0])),i.push(parseFloat(e[1])),i.push(parseFloat(e[2]))),6===e.length){i.push(parseFloat(e[0])),i.push(parseFloat(e[1])),i.push(parseFloat(e[2]));const t=parseFloat(e[3])/255,o=parseFloat(e[4])/255,s=parseFloat(e[5])/255;r.setRGB(t,o,s,ii),n.push(r.r,r.g,r.b)}}const o=new Oo;return o.setAttribute("position",new Io(i,3)),n.length>0&&o.setAttribute("color",new Io(n,3)),o}}const sv=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function av(e){return(t,i)=>void 0!==i?((e,t,i)=>{t.constructor.createProperty(i,e)})(e,t,i):sv(e,t)}var lv;null===(lv=window.HTMLSlotElement)||void 0===lv||lv.prototype.assignedElements;const cv=window,uv=cv.ShadowRoot&&(void 0===cv.ShadyCSS||cv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,hv=Symbol(),dv=new WeakMap;class pv{constructor(e,t,i){if(this._$cssResult$=!0,i!==hv)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(uv&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=dv.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&dv.set(t,e))}return e}toString(){return this.cssText}}const fv=uv?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new pv("string"==typeof e?e:e+"",void 0,hv))(t)})(e):e;var gv;const mv=window,_v=mv.trustedTypes,vv=_v?_v.emptyScript:"",yv=mv.reactiveElementPolyfillSupport,bv={toAttribute(e,t){switch(t){case Boolean:e=e?vv:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},Av=(e,t)=>t!==e&&(t==t||e==e),wv={attribute:!0,type:String,converter:bv,reflect:!1,hasChanged:Av},xv="finalized";class Sv extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wv;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||wv}static finalize(){if(this.hasOwnProperty(xv))return!1;this[xv]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(fv(e))}else void 0!==e&&t.push(fv(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{uv?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),n=cv.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wv;var n;const r=this.constructor._$Ep(e,i);if(void 0!==r&&!0===i.reflect){const o=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:bv).toAttribute(t,i.type);this._$El=e,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(void 0!==r&&this._$El!==r){const e=n.getPropertyOptions(r),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:bv;this._$El=r,this[r]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Av)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var Cv;Sv[xv]=!0,Sv.elementProperties=new Map,Sv.elementStyles=[],Sv.shadowRootOptions={mode:"open"},null==yv||yv({ReactiveElement:Sv}),(null!==(gv=mv.reactiveElementVersions)&&void 0!==gv?gv:mv.reactiveElementVersions=[]).push("1.6.3");const Ev=window,Tv=Ev.trustedTypes,Iv=Tv?Tv.createPolicy("lit-html",{createHTML:e=>e}):void 0,Mv="$lit$",kv=`lit$${(Math.random()+"").slice(9)}$`,Bv="?"+kv,Rv=`<${Bv}>`,Pv=document,Dv=()=>Pv.createComment(""),Lv=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Ov=Array.isArray,Fv=e=>Ov(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),Nv="[ \t\n\f\r]",zv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Uv=/-->/g,Hv=/>/g,Vv=RegExp(`>|${Nv}(?:([^\\s"'>=/]+)(${Nv}*=${Nv}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),$v=/'/g,Gv=/"/g,Qv=/^(?:script|style|textarea|title)$/i,jv=e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return{_$litType$:e,strings:t,values:n}},qv=jv(1),Wv=(jv(2),Symbol.for("lit-noChange")),Xv=Symbol.for("lit-nothing"),Yv=new WeakMap,Kv=Pv.createTreeWalker(Pv,129,null,!1);function Zv(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Iv?Iv.createHTML(t):t}const Jv=(e,t)=>{const i=e.length-1,n=[];let r,o=2===t?"<svg>":"",s=zv;for(let a=0;a<i;a++){const t=e[a];let i,l,c=-1,u=0;for(;u<t.length&&(s.lastIndex=u,l=s.exec(t),null!==l);)u=s.lastIndex,s===zv?"!--"===l[1]?s=Uv:void 0!==l[1]?s=Hv:void 0!==l[2]?(Qv.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=Vv):void 0!==l[3]&&(s=Vv):s===Vv?">"===l[0]?(s=null!=r?r:zv,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,i=l[1],s=void 0===l[3]?Vv:'"'===l[3]?Gv:$v):s===Gv||s===$v?s=Vv:s===Uv||s===Hv?s=zv:(s=Vv,r=void 0);const h=s===Vv&&e[a+1].startsWith("/>")?" ":"";o+=s===zv?t+Rv:c>=0?(n.push(i),t.slice(0,c)+Mv+t.slice(c)+kv+h):t+kv+(-2===c?(n.push(void 0),a):h)}return[Zv(e,o+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};class ey{constructor(e,t){let i,{strings:n,_$litType$:r}=e;this.parts=[];let o=0,s=0;const a=n.length-1,l=this.parts,[c,u]=Jv(n,r);if(this.el=ey.createElement(c,t),Kv.currentNode=this.el.content,2===r){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=Kv.nextNode())&&l.length<a;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(Mv)||t.startsWith(kv)){const n=u[s++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+Mv).split(kv),t=/([.?@])?(.*)/.exec(n);l.push({type:1,index:o,name:t[2],strings:e,ctor:"."===t[1]?oy:"?"===t[1]?ay:"@"===t[1]?ly:ry})}else l.push({type:6,index:o})}for(const t of e)i.removeAttribute(t)}if(Qv.test(i.tagName)){const e=i.textContent.split(kv),t=e.length-1;if(t>0){i.textContent=Tv?Tv.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],Dv()),Kv.nextNode(),l.push({type:2,index:++o});i.append(e[t],Dv())}}}else if(8===i.nodeType)if(i.data===Bv)l.push({type:2,index:o});else{let e=-1;for(;-1!==(e=i.data.indexOf(kv,e+1));)l.push({type:7,index:o}),e+=kv.length-1}o++}}static createElement(e,t){const i=Pv.createElement("template");return i.innerHTML=e,i}}function ty(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3?arguments[3]:void 0;var r,o,s,a;if(t===Wv)return t;let l=void 0!==n?null===(r=i._$Co)||void 0===r?void 0:r[n]:i._$Cl;const c=Lv(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,i,n)),void 0!==n?(null!==(s=(a=i)._$Co)&&void 0!==s?s:a._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=ty(e,l._$AS(e,t.values),l,n)),t}class iy{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Pv).importNode(i,!0);Kv.currentNode=r;let o=Kv.nextNode(),s=0,a=0,l=n[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new ny(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new cy(o,this,e)),this._$AV.push(t),l=n[++a]}s!==(null==l?void 0:l.index)&&(o=Kv.nextNode(),s++)}return Kv.currentNode=Pv,r}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class ny{constructor(e,t,i,n){var r;this.type=2,this._$AH=Xv,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e){e=ty(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),Lv(e)?e===Xv||null==e||""===e?(this._$AH!==Xv&&this._$AR(),this._$AH=Xv):e!==this._$AH&&e!==Wv&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):Fv(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Xv&&Lv(this._$AH)?this._$AA.nextSibling.data=e:this.$(Pv.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=ey.createElement(Zv(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.v(i);else{const e=new iy(r,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=Yv.get(e.strings);return void 0===t&&Yv.set(e.strings,t=new ey(e)),t}T(e){Ov(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new ny(this.k(Dv()),this.k(Dv()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class ry{constructor(e,t,i,n,r){this.type=1,this._$AH=Xv,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Xv}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const r=this.strings;let o=!1;if(void 0===r)e=ty(this,e,t,0),o=!Lv(e)||e!==this._$AH&&e!==Wv,o&&(this._$AH=e);else{const n=e;let s,a;for(e=r[0],s=0;s<r.length-1;s++)a=ty(this,n[i+s],t,s),a===Wv&&(a=this._$AH[s]),o||(o=!Lv(a)||a!==this._$AH[s]),a===Xv?e=Xv:e!==Xv&&(e+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}o&&!n&&this.j(e)}j(e){e===Xv?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class oy extends ry{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Xv?void 0:e}}const sy=Tv?Tv.emptyScript:"";class ay extends ry{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Xv?this.element.setAttribute(this.name,sy):this.element.removeAttribute(this.name)}}class ly extends ry{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e){var t;if((e=null!==(t=ty(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:Xv)===Wv)return;const i=this._$AH,n=e===Xv&&i!==Xv||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==Xv&&(i===Xv||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class cy{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ty(this,e)}}const uy=Ev.litHtmlPolyfillSupport;null==uy||uy(ey,ny),(null!==(Cv=Ev.litHtmlVersions)&&void 0!==Cv?Cv:Ev.litHtmlVersions=[]).push("2.8.0");const hy=(e,t,i)=>{var n,r;const o=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let s=o._$litPart$;if(void 0===s){const e=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;o._$litPart$=s=new ny(t.insertBefore(Dv(),e),e,void 0,null!=i?i:{})}return s._$AI(e),s};var dy,py;class fy extends Sv{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=hy(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return Wv}}fy.finalized=!0,fy._$litElement$=!0,null===(dy=globalThis.litElementHydrateSupport)||void 0===dy||dy.call(globalThis,{LitElement:fy});const gy=globalThis.litElementPolyfillSupport;null==gy||gy({LitElement:fy});(null!==(py=globalThis.litElementVersions)&&void 0!==py?py:globalThis.litElementVersions=[]).push("3.3.3");const my=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,_y=my&&null!=self.XRSession.prototype.requestHitTestSource,vy=null!=self.ResizeObserver,yy=null!=self.IntersectionObserver,by=_y,Ay=((()=>{const e=navigator.userAgent||navigator.vendor||self.opera;let t=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)})(),/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent)),wy=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,xy=(/Safari\//.test(navigator.userAgent),/firefox/i.test(navigator.userAgent)),Sy=/OculusBrowser/.test(navigator.userAgent),Cy=(wy&&/CriOS\//.test(navigator.userAgent),Ay&&!xy&&!Sy),Ey=Boolean(window.webkit&&window.webkit.messageHandlers),Ty=(()=>{if(wy){if(Ey)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}}return!1})(),Iy=e=>e&&"null"!==e?ky(e):null,My=()=>{if(by)return;const e=[];throw my||e.push("WebXR Device API"),_y||e.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${e.join(", ")}`)},ky=e=>new URL(e,window.location.toString()).toString(),By=(e,t)=>{let i=null;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null!=i&&self.clearTimeout(i),i=self.setTimeout((()=>{i=null,e(...r)}),t)}},Ry=(e,t,i)=>Math.max(t,Math.min(i,e)),Py=(()=>{const e=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})();var Dy=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const Ly=Symbol("currentEnvironmentMap"),Oy=Symbol("currentBackground"),Fy=Symbol("updateEnvironment"),Ny=Symbol("cancelEnvironmentUpdate"),zy=qv`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${qv`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${qv`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${qv`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,Uy=new WeakMap;function Hy(){let e,t;function i(e,t,i,n,r,o){const s=o.num_components(),a=i.num_points()*s,l=a*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(i,o,c,l,u);const h=new r(e.HEAPF32.buffer,u,a).slice();return e._free(u),{name:n,array:h,itemSize:s}}onmessage=function(n){const r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const n=r.buffer,o=r.taskConfig;t.then((e=>{const t=e.draco,s=new t.Decoder;try{const e=function(e,t,n,r){const o=r.attributeIDs,s=r.attributeTypes;let a,l;const c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeArrayToMesh(n,n.byteLength,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeArrayToPointCloud(n,n.byteLength,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in o){const n=self[s[h]];let l,c;if(r.useUniqueIDs)c=o[h],l=t.GetAttributeByUniqueId(a,c);else{if(c=t.GetAttributeId(a,e[o[h]]),-1===c)continue;l=t.GetAttribute(a,c)}const d=i(e,t,a,h,n,l);"color"===h&&(d.vertexColorSpace=r.vertexColorSpace),u.attributes.push(d)}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,i){const n=i.num_faces(),r=3*n,o=4*r,s=e._malloc(o);t.GetTrianglesUInt32Array(i,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,r).slice();return e._free(s),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),u}(t,s,new Int8Array(n),o),a=e.attributes.map((e=>e.array.buffer));e.index&&a.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},a)}catch(a){console.error(a),self.postMessage({type:"error",id:r.id,error:a.message})}finally{t.destroy(s)}}))}}}class Vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:t,msg:i,transfer:n}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(i,n)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((i=>{const n=this._getIdleWorker();-1!==n?(this._initWorker(n),this.workerStatus|=1<<n,this.workersResolve[n]=i,this.workers[n].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})}))}dispose(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const $y=9,Gy=15,Qy=16,jy=22,qy=37,Wy=43,Xy=76,Yy=83,Ky=97,Zy=100,Jy=103,eb=109,tb=165,ib=166,nb=1000066e3;class rb{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ob{constructor(e,t,i,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=n,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){void 0===t&&(t=0);const i=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,n)}}new Uint8Array([0]);const sb=[171,75,84,88,32,50,48,187,13,10,26,10];function ab(e){return(new TextDecoder).decode(e)}let lb,cb,ub;const hb={env:{emscripten_notify_memory_growth:function(e){ub=new Uint8Array(cb.exports.memory.buffer)}}};class db{init(){return lb||(lb="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+pb).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,hb))).then(this._init):WebAssembly.instantiate(Buffer.from(pb,"base64"),hb).then(this._init),lb)}_init(e){cb=e.instance,hb.env.emscripten_notify_memory_growth(0)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!cb)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,n=cb.exports.malloc(i);ub.set(e,n),t=t||Number(cb.exports.ZSTD_findDecompressedSize(n,i));const r=cb.exports.malloc(t),o=cb.exports.ZSTD_decompress(r,t,n,i),s=ub.slice(r,r+o);return cb.exports.free(n),cb.exports.free(r),s}}const pb="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",fb=new WeakMap;let gb,mb=0;class _b extends Jd{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Vy,this.workerSourceURL="",this.workerConfig=null,"undefined"!==typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new ip(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new ip(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const n=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,n]).then((e=>{let[t,i]=e;const n=_b.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(_b.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_b.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_b.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=i,this.workerPool.setWorkerCreator((()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e}))})),mb>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),mb++}return this.transcoderPending}load(e,t,i,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new ip(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),i,n)}parse(e,t,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(fb.has(e)){return fb.get(e).promise.then(t).catch(i)}this._createTexture(e).then((e=>t?t(e):null)).catch(i)}_createTextureFrom(e,t){const{faces:i,width:n,height:r,format:o,type:s,error:a,dfdFlags:l}=e;if("error"===s)return Promise.reject(a);let c;if(6===t.faceCount)c=new Xu(i,o,Re);else{const e=i[0].mipmaps;c=t.layerCount>1?new Wu(e,n,r,t.layerCount,o,Re):new qu(e,n,r,o,Re)}return c.minFilter=1===i[0].mipmaps.length?Te:ke,c.magFilter=Te,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=Ab(t),c.premultiplyAlpha=!!(1&l),c}async _createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,sb.length);if(t[0]!==sb[0]||t[1]!==sb[1]||t[2]!==sb[2]||t[3]!==sb[3]||t[4]!==sb[4]||t[5]!==sb[5]||t[6]!==sb[6]||t[7]!==sb[7]||t[8]!==sb[8]||t[9]!==sb[9]||t[10]!==sb[10]||t[11]!==sb[11])throw new Error("Missing KTX 2.0 identifier.");const i=new rb,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new ob(e,sb.length,n,!0);i.vkFormat=r._nextUint32(),i.typeSize=r._nextUint32(),i.pixelWidth=r._nextUint32(),i.pixelHeight=r._nextUint32(),i.pixelDepth=r._nextUint32(),i.layerCount=r._nextUint32(),i.faceCount=r._nextUint32();const o=r._nextUint32();i.supercompressionScheme=r._nextUint32();const s=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),d=new ob(e,sb.length+n,3*o*8,!0);for(let P=0;P<o;P++)i.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new ob(e,s,a,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},g=(f.descriptorBlockSize/4-6)/4;for(let P=0;P<g;P++){const e={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=p._nextInt32(),e.sampleUpper=p._nextInt32()):(e.sampleLower=p._nextUint32(),e.sampleUpper=p._nextUint32()),f.samples[P]=e}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(f);const m=new ob(e,l,c,!0);for(;m._offset<c;){const e=m._nextUint32(),t=m._scan(e),n=ab(t);if(i.keyValue[n]=m._nextUint8Array(e-t.byteLength-1),n.match(/^ktx/i)){const e=ab(i.keyValue[n]);i.keyValue[n]=e.substring(0,e.lastIndexOf("\0"))}m._skip(e%4?4-e%4:0)}if(h<=0)return i;const _=new ob(e,u,h,!0),v=_._nextUint16(),y=_._nextUint16(),b=_._nextUint32(),A=_._nextUint32(),w=_._nextUint32(),x=_._nextUint32(),S=[];for(let P=0;P<o;P++)S.push({imageFlags:_._nextUint32(),rgbSliceByteOffset:_._nextUint32(),rgbSliceByteLength:_._nextUint32(),alphaSliceByteOffset:_._nextUint32(),alphaSliceByteLength:_._nextUint32()});const C=u+_._offset,E=C+b,T=E+A,I=T+w,M=new Uint8Array(e.buffer,e.byteOffset+C,b),k=new Uint8Array(e.buffer,e.byteOffset+E,A),B=new Uint8Array(e.buffer,e.byteOffset+T,w),R=new Uint8Array(e.buffer,e.byteOffset+I,x);return i.globalData={endpointCount:v,selectorCount:y,imageDescs:S,endpointsData:M,selectorsData:k,tablesData:B,extendedData:R},i}(new Uint8Array(e));if(0!==i.vkFormat)return async function(e){const{vkFormat:t}=e;if(void 0===yb[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let i;2===e.supercompressionScheme&&(gb||(gb=new Promise((async e=>{const t=new db;await t.init(),e(t)}))),i=await gb);const n=[];for(let o=0;o<e.levels.length;o++){const r=Math.max(1,e.pixelWidth>>o),s=Math.max(1,e.pixelHeight>>o),a=e.pixelDepth?Math.max(1,e.pixelDepth>>o):0,l=e.levels[o];let c,u;if(0===e.supercompressionScheme)c=l.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=i.decode(l.levelData,l.uncompressedByteLength)}u=bb[t]===Ne?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):bb[t]===ze?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,n.push({data:u,width:r,height:s,depth:a})}let r;if(vb.has(yb[t]))r=0===e.pixelDepth?new jc(n[0].data,e.pixelWidth,e.pixelHeight):new Ln(n[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new qu(n,e.pixelWidth,e.pixelHeight)}return r.mipmaps=n,r.type=bb[t],r.format=yb[t],r.colorSpace=Ab(e),r.needsUpdate=!0,Promise.resolve(r)}(i);const n=t,r=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:n},[e]))).then((e=>this._createTextureFrom(e.data,i)));return fb.set(e,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),mb--,this}}_b.BasisFormat={ETC1S:0,UASTC_4x4:1},_b.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},_b.EngineFormat={RGBAFormat:je,RGBA_ASTC_4x4_Format:ft,RGBA_BPTC_Format:It,RGBA_ETC2_EAC_Format:pt,RGBA_PVRTC_4BPPV1_Format:ct,RGBA_S3TC_DXT5_Format:st,RGB_ETC1_Format:ht,RGB_ETC2_Format:dt,RGB_PVRTC_4BPPV1_Format:at,RGBA_S3TC_DXT1_Format:rt},_b.BasisWorker=function(){let e,t,i;const n=_EngineFormat,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(s){const h=s.data;switch(h.type){case"init":e=h.config,d=h.transcoderBinary,t=new Promise((e=>{i={wasmBinary:d,onRuntimeInitialized:e},BASIS(i)})).then((()=>{i.initializeBasis(),void 0===i.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:t,buffers:s,width:d,height:p,hasAlpha:f,format:g,dfdFlags:m}=function(t){const s=new i.KTX2File(new Uint8Array(t));function h(){s.close(),s.delete()}if(!s.isValid())throw h(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const d=s.isUASTC()?o.UASTC_4x4:o.ETC1S,p=s.getWidth(),f=s.getHeight(),g=s.getLayers()||1,m=s.getLevels(),_=s.getFaces(),v=s.getHasAlpha(),y=s.getDFDFlags(),{transcoderFormat:b,engineFormat:A}=function(t,i,s,u){let h,d;const p=t===o.ETC1S?a:l;for(let n=0;n<p.length;n++){const r=p[n];if(e[r.if]&&(r.basisFormat.includes(t)&&!(u&&r.transcoderFormat.length<2)&&(!r.needsPowerOfTwo||c(i)&&c(s))))return h=r.transcoderFormat[u?1:0],d=r.engineFormat[u?1:0],{transcoderFormat:h,engineFormat:d}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),h=r.RGBA32,d=n.RGBAFormat,{transcoderFormat:h,engineFormat:d}}(d,p,f,v);if(!p||!f||!m)throw h(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!s.startTranscoding())throw h(),new Error("THREE.KTX2Loader: .startTranscoding failed");const w=[],x=[];for(let e=0;e<_;e++){const t=[];for(let i=0;i<m;i++){const n=[];let r,o;for(let t=0;t<g;t++){const a=s.getImageLevelInfo(i,t,e);0!==e||0!==i||0!==t||a.origWidth%4===0&&a.origHeight%4===0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),m>1?(r=a.origWidth,o=a.origHeight):(r=a.width,o=a.height);const l=new Uint8Array(s.getImageTranscodedSizeInBytes(i,t,0,b));if(!s.transcodeImage(l,i,t,e,b,0,-1,-1))throw h(),new Error("THREE.KTX2Loader: .transcodeImage failed.");n.push(l)}const a=u(n);t.push({data:a,width:r,height:o}),x.push(a.buffer)}w.push({mipmaps:t,width:p,height:f,format:A})}return h(),{faces:w,buffers:x,width:p,height:f,hasAlpha:v,format:A,dfdFlags:y}}(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:t,width:d,height:p,hasAlpha:f,format:g,dfdFlags:m},s)}catch(t){console.error(t),self.postMessage({type:"error",id:h.id,error:t.message})}}))}var d}));const s=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[n.RGBA_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=s.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=s.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function c(e){return e<=2||0===(e&e-1)&&0!==e}function u(e){if(1===e.length)return e[0];let t=0;for(let r=0;r<e.length;r++){t+=e[r].byteLength}const i=new Uint8Array(t);let n=0;for(let r=0;r<e.length;r++){const t=e[r];i.set(t,n),n+=t.byteLength}return i}};const vb=new Set([je,Je,Ke]),yb={[eb]:je,[Ky]:je,[qy]:je,[Wy]:je,[Jy]:Je,[Yy]:Je,[Qy]:Je,[jy]:Je,[Zy]:Ke,[Xy]:Ke,[Gy]:Ke,[$y]:Ke,[nb]:ft,[ib]:vt,[tb]:vt},bb={[eb]:Ne,[Ky]:ze,[qy]:Re,[Wy]:Re,[Jy]:Ne,[Yy]:ze,[Qy]:Re,[jy]:Re,[Zy]:Ne,[Xy]:ze,[Gy]:Re,[$y]:Re,[nb]:ze,[ib]:Re,[tb]:Re};function Ab(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?ii:ni:10===t.colorPrimaries?2===t.transferFunction?ri:oi:(0===t.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),ti)}var wb,xb;const Sb=Symbol("retainerCount"),Cb=Symbol("recentlyUsed"),Eb=Symbol("evict"),Tb=Symbol("evictionThreshold"),Ib=Symbol("cache");class Mb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this[wb]=new Map,this[xb]=[],this[Ib]=e,this[Tb]=t}set evictionThreshold(e){this[Tb]=e,this[Eb]()}get evictionThreshold(){return this[Tb]}get cache(){return this[Ib]}retainerCount(e){return this[Sb].get(e)||0}reset(){this[Sb].clear(),this[Cb]=[]}retain(e){this[Sb].has(e)||this[Sb].set(e,0),this[Sb].set(e,this[Sb].get(e)+1);const t=this[Cb].indexOf(e);-1!==t&&this[Cb].splice(t,1),this[Cb].unshift(e),this[Eb]()}release(e){this[Sb].has(e)&&this[Sb].set(e,Math.max(this[Sb].get(e)-1,0)),this[Eb]()}[(wb=Sb,xb=Cb,Eb)](){if(!(this[Cb].length<this[Tb]))for(let e=this[Cb].length-1;e>=this[Tb];--e){const t=this[Cb][e];0===this[Sb].get(t)&&(this[Ib].delete(t),this[Cb].splice(e,1))}}}const kb=e=>{const t=new Map;for(const i of e.mappings)for(const e of i.variants)t.set(e,{material:null,gltfMaterialIndex:i.material});return t};class Bb{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(void 0===i.extensions||void 0===i.extensions[this.name])return null;const n=(e=>{const t=[],i=new Set;for(const n of e){let e=n,r=0;for(;i.has(e);)e=n+"."+ ++r;i.add(e),t.push(e)}return t})((i.extensions[this.name].variants||[]).map((e=>e.name)));for(const r of e.scenes)r.traverse((e=>{const n=e;if(!n.material)return;const r=t.associations.get(n);if(null==r||null==r.meshes||null==r.primitives)return;const o=i.meshes[r.meshes].primitives[r.primitives].extensions;o&&o[this.name]&&(n.userData.variantMaterials=kb(o[this.name]))}));return e.userData.variants=n,Promise.resolve()}}var Rb,Pb;Mn.DEFAULT_ANISOTROPY=4;const Db=new Map,Lb=new Map;let Ob;const Fb=new class extends Jd{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,n){const r=new ip(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),i,n)}parse(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this.decodeDracoFile(e,t,null,null,ii,i).catch(i)}decodeDracoFile(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ni,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>{};const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,s).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(Uy.has(e)){const t=Uy.get(e);if(t.key===i)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const r=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(r,o).then((i=>(n=i,new Promise(((i,o)=>{n._callbacks[r]={resolve:i,reject:o},n.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return s.catch((()=>!0)).then((()=>{n&&r&&this._releaseTask(n,r)})),Uy.set(e,{key:i,promise:s}),s}_createGeometry(e){const t=new Oo;e.index&&t.setIndex(new yo(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i],r=n.name,o=n.array,s=n.itemSize,a=new yo(o,s);"color"===r&&(this._assignVertexColorSpace(a,n.vertexColorSpace),a.normalized=o instanceof Float32Array===!1),t.setAttribute(r,a)}return t}_assignVertexColorSpace(e,t){if(t!==ii)return;const i=new so;for(let n=0,r=e.count;n<r;n++)i.fromBufferAttribute(e,n),bn.toWorkingColorSpace(i,ii),e.setXYZ(n,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new ip(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{i.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const n=Hy.toString(),r=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};let Nb;const zb=new _b;let Ub,Hb;const Vb=Symbol("loader"),$b=Symbol("evictionPolicy"),Gb=Symbol("GLTFInstance");class Qb extends qi{constructor(e){super(),this[Pb]=(new Gm).register((e=>new Bb(e))),this[Gb]=e,this[Vb].setDRACOLoader(Fb),this[Vb].setKTX2Loader(zb)}static setDRACODecoderLocation(e){Ob=e,Fb.setDecoderPath(e)}static getDRACODecoderLocation(){return Ob}static setKTX2TranscoderLocation(e){Nb=e,zb.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return Nb}static setMeshoptDecoderLocation(e){var t;Ub!==e&&(Ub=e,Hb=(t=e,new Promise(((e,i)=>{const n=document.createElement("script");document.body.appendChild(n),n.onload=e,n.onerror=i,n.async=!0,n.src=t}))).then((()=>MeshoptDecoder.ready)).then((()=>MeshoptDecoder)))}static getMeshoptDecoderLocation(){return Ub}static initializeKTX2Loader(e){zb.detectSupport(e)}static get cache(){return Db}static clearCache(){Db.forEach(((e,t)=>{this.delete(t)})),this[$b].reset()}static has(e){return Db.has(e)}static async delete(e){if(!this.has(e))return;const t=Db.get(e);Lb.delete(e),Db.delete(e);(await t).dispose()}static hasFinishedLoading(e){return!!Lb.get(e)}get[(Rb=$b,Pb=Vb,$b)](){return this.constructor[$b]}async preload(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(this[Vb].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!Db.has(e)){null!=Hb&&this[Vb].setMeshoptDecoder(await Hb);const t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const n=e=>{const t=e.loaded/e.total;i(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise(((i,r)=>{t.load(e,i,n,r)}))}(e,this[Vb],(e=>{i(.8*e)})),n=this[Gb],r=t.then((e=>n.prepare(e))).then((e=>(i(.9),new n(e)))).catch((e=>(console.error(e),new n)));Db.set(e,r)}await Db.get(e),Lb.set(e,!0),i&&i(1)}async load(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};await this.preload(e,t,i);const n=await Db.get(e),r=await n.clone();return this[$b].retain(e),r.dispose=()=>{this[$b].release(e)},r}}Qb[Rb]=new Mb(Qb);class jb extends Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new sn(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const qb=new Nn,Wb=new fr,Xb=new fr,Yb=new Nn,Kb=new Nn;class Zb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;let i,n,r,o;const s={objects:new WeakMap},a=void 0!==e.element?e.element:document.createElement("div");function l(e){e.isCSS2DObject&&(e.element.style.display="none");for(let t=0,i=e.children.length;t<i;t++)l(e.children[t])}function c(e,i,n){if(!1!==e.visible){if(e.isCSS2DObject){qb.setFromMatrixPosition(e.matrixWorld),qb.applyMatrix4(Xb);const l=qb.z>=-1&&qb.z<=1&&!0===e.layers.test(n.layers),c=e.element;c.style.display=!0===l?"":"none",!0===l&&(e.onBeforeRender(t,i,n),c.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(qb.x*r+r)+"px,"+(-qb.y*o+o)+"px)",c.parentNode!==a&&a.appendChild(c),e.onAfterRender(t,i,n));const h={distanceToCameraSquared:u(n,e)};s.objects.set(e,h)}for(let t=0,r=e.children.length;t<r;t++)c(e.children[t],i,n)}else l(e)}function u(e,t){return Yb.setFromMatrixPosition(e.matrixWorld),Kb.setFromMatrixPosition(t.matrixWorld),Yb.distanceToSquared(Kb)}a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:i,height:n}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),Wb.copy(t.matrixWorldInverse),Xb.multiplyMatrices(t.projectionMatrix,Wb),c(e,e,t),function(e){const t=function(e){const t=[];return e.traverseVisible((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){if(e.renderOrder!==t.renderOrder)return t.renderOrder-e.renderOrder;return s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),i=t.length;for(let n=0,r=t.length;n<r;n++)t[n].element.style.zIndex=i-n}(e)},this.setSize=function(e,t){i=e,n=t,r=i/2,o=n/2,a.style.width=e+"px",a.style.height=t+"px"}}}function Jb(e,t,i){let n=i;const r=new Nn;return e.updateWorldMatrix(!0,!0),e.traverseVisible((e=>{const{geometry:i}=e;if(void 0!==i){const{position:o}=i.attributes;if(void 0!==o)for(let i=0,s=o.count;i<s;i++)e.isMesh?e.getVertexPosition(i,r):r.fromBufferAttribute(o,i),e.isSkinnedMesh||r.applyMatrix4(e.matrixWorld),n=t(n,r)}})),n}let eA,tA,iA,nA;function rA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;tA||(tA=new bs(2,2,1,1)),iA||(iA=new ts({uniforms:{blitTexture:new _f(e)},vertexShader:"\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}",fragmentShader:"\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}"})),iA.uniforms.blitTexture.value=e,iA.defines.IS_SRGB=e.colorSpace==ii,iA.needsUpdate=!0,nA||(nA=new Wo(tA,iA),nA.frustumCulled=!1);const n=new ss,r=new dc;r.add(nA),null===i&&(i=eA=new cc({antialias:!1}));const o=Math.min(e.image.width,t),s=Math.min(e.image.height,t);i.setSize(o,s),i.clear(),i.render(r,n);const a=document.createElement("canvas"),l=a.getContext("2d");a.width=o,a.height=s,l.drawImage(i.domElement,0,0,o,s);const c=new Yu(a);return c.minFilter=e.minFilter,c.magFilter=e.magFilter,c.wrapS=e.wrapS,c.wrapT=e.wrapT,c.colorSpace=e.colorSpace,c.name=e.name,eA&&(eA.forceContextLoss(),eA.dispose(),eA=null),c}const oA={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class sA{constructor(){this.pluginCallbacks=[],this.register((function(e){return new UA(e)})),this.register((function(e){return new HA(e)})),this.register((function(e){return new QA(e)})),this.register((function(e){return new jA(e)})),this.register((function(e){return new qA(e)})),this.register((function(e){return new WA(e)})),this.register((function(e){return new VA(e)})),this.register((function(e){return new $A(e)})),this.register((function(e){return new GA(e)})),this.register((function(e){return new XA(e)})),this.register((function(e){return new YA(e)})),this.register((function(e){return new KA(e)})),this.register((function(e){return new ZA(e)})),this.register((function(e){return new JA(e)}))}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){const r=new zA,o=[];for(let s=0,a=this.pluginCallbacks.length;s<a;s++)o.push(this.pluginCallbacks[s](r));r.setPlugins(o),r.write(e,t,n).catch(i)}parseAsync(e,t){const i=this;return new Promise((function(n,r){i.parse(e,n,r,t)}))}}const aA=0,lA=1,cA=2,uA=3,hA=4,dA=5120,pA=5121,fA=5122,gA=5123,mA=5124,_A=5125,vA=5126,yA=34962,bA=34963,AA=9728,wA=9729,xA=9984,SA=9985,CA=9986,EA=9987,TA=33071,IA=33648,MA=10497,kA="KHR_mesh_quantization",BA={};BA[we]=AA,BA[xe]=xA,BA[Ce]=CA,BA[Te]=wA,BA[Ie]=SA,BA[ke]=EA,BA[be]=TA,BA[ye]=MA,BA[Ae]=IA;const RA={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},PA=new so;function DA(e,t){return e.length===t.length&&e.every((function(e,i){return e===t[i]}))}function LA(e){return 4*Math.ceil(e/4)}function OA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=LA(e.byteLength);if(i!==e.byteLength){const n=new Uint8Array(i);if(n.set(new Uint8Array(e)),0!==t)for(let r=e.byteLength;r<i;r++)n[r]=t;return n.buffer}return e}function FA(){return"undefined"===typeof document&&"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function NA(e,t){if(void 0!==e.toBlob)return new Promise((i=>e.toBlob(i,t)));let i;return"image/jpeg"===t?i=.92:"image/webp"===t&&(i=.8),e.convertToBlob({type:t,quality:i})}class zA{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+s}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const n=this,r=n.buffers,o=n.json;i=n.options;const s=n.extensionsUsed,a=n.extensionsRequired,l=new Blob(r,{type:"application/octet-stream"}),c=Object.keys(s),u=Object.keys(a);if(c.length>0&&(o.extensionsUsed=c),u.length>0&&(o.extensionsRequired=u),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),!0===i.binary){const e=new FileReader;e.readAsArrayBuffer(l),e.onloadend=function(){const i=OA(e.result),n=new DataView(new ArrayBuffer(8));n.setUint32(0,i.byteLength,!0),n.setUint32(4,5130562,!0);const r=OA((s=JSON.stringify(o),(new TextEncoder).encode(s).buffer),32);var s;const a=new DataView(new ArrayBuffer(8));a.setUint32(0,r.byteLength,!0),a.setUint32(4,1313821514,!0);const l=new ArrayBuffer(12),c=new DataView(l);c.setUint32(0,1179937895,!0),c.setUint32(4,2,!0);const u=12+a.byteLength+r.byteLength+n.byteLength+i.byteLength;c.setUint32(8,u,!0);const h=new Blob([l,a,r,n,i],{type:"application/octet-stream"}),d=new FileReader;d.readAsArrayBuffer(h),d.onloadend=function(){t(d.result)}}}else if(o.buffers&&o.buffers.length>0){const e=new FileReader;e.readAsDataURL(l),e.onloadend=function(){const i=e.result;o.buffers[0].uri=i,t(o)}}else t(o)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const i=this.options,n=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in r.gltfExtensions)t.extensions[e]=r.gltfExtensions[e],n[e]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===this.uids.has(e)){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new Nn;for(let i=0,n=e.count;i<n;i++)if(Math.abs(t.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),n=new Nn;for(let r=0,o=i.count;r<o;r++)n.fromBufferAttribute(i,r),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),i.setXYZ(r,n.x,n.y,n.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const n={};0===t.offset.x&&0===t.offset.y||(n.offset=t.offset.toArray(),i=!0),0!==t.rotation&&(n.rotation=t.rotation,i=!0),1===t.repeat.x&&1===t.repeat.y||(n.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(e){return e.colorSpace===ii?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof qu&&(e=rA(e)),t instanceof qu&&(t=rA(t));const n=e?e.image:null,r=t?t.image:null,o=Math.max(n?n.width:0,r?r.width:0),s=Math.max(n?n.height:0,r?r.height:0),a=FA();a.width=o,a.height=s;const l=a.getContext("2d",{willReadFrequently:!0});l.fillStyle="#00ffff",l.fillRect(0,0,o,s);const c=l.getImageData(0,0,o,s);if(n){l.drawImage(n,0,0,o,s);const t=i(e),r=l.getImageData(0,0,o,s).data;for(let e=2;e<r.length;e+=4)c.data[e]=256*t(r[e]/256)}if(r){l.drawImage(r,0,0,o,s);const e=i(t),n=l.getImageData(0,0,o,s).data;for(let t=1;t<n.length;t+=4)c.data[t]=256*e(n[t]/256)}l.putImageData(c,0,0);const u=(e||t).clone();return u.source=new En(a),u.colorSpace=ti,u.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),u}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,n,r){const o=this.json;let s;switch(o.bufferViews||(o.bufferViews=[]),t){case dA:case pA:s=1;break;case fA:case gA:s=2;break;default:s=4}let a=e.itemSize*s;r===yA&&(a=4*Math.ceil(a/4));const l=LA(n*a),c=new DataView(new ArrayBuffer(l));let u=0;for(let d=i;d<i+n;d++){for(let i=0;i<e.itemSize;i++){let n;e.itemSize>4?n=e.array[d*e.itemSize+i]:(0===i?n=e.getX(d):1===i?n=e.getY(d):2===i?n=e.getZ(d):3===i&&(n=e.getW(d)),!0===e.normalized&&(n=on.normalize(n,e.array))),t===vA?c.setFloat32(u,n,!0):t===mA?c.setInt32(u,n,!0):t===_A?c.setUint32(u,n,!0):t===fA?c.setInt16(u,n,!0):t===gA?c.setUint16(u,n,!0):t===dA?c.setInt8(u,n):t===pA&&c.setUint8(u,n),u+=s}u%a!==0&&(u+=a-u%a)}const h={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};void 0!==r&&(h.target=r),r===yA&&(h.byteStride=a),this.byteOffset+=l,o.bufferViews.push(h);return{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise((function(n){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const e=OA(r.result),o={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,n(i.bufferViews.push(o)-1)}}))}processAccessor(e,t,i,n){const r=this.json;let o;if(e.array.constructor===Float32Array)o=vA;else if(e.array.constructor===Int32Array)o=mA;else if(e.array.constructor===Uint32Array)o=_A;else if(e.array.constructor===Int16Array)o=fA;else if(e.array.constructor===Uint16Array)o=gA;else if(e.array.constructor===Int8Array)o=dA;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);o=pA}if(void 0===i&&(i=0),void 0!==n&&n!==1/0||(n=e.count),0===n)return null;const s=function(e,t,i){const n={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=t;r<t+i;r++)for(let t=0;t<e.itemSize;t++){let i;e.itemSize>4?i=e.array[r*e.itemSize+t]:(0===t?i=e.getX(r):1===t?i=e.getY(r):2===t?i=e.getZ(r):3===t&&(i=e.getW(r)),!0===e.normalized&&(i=on.normalize(i,e.array))),n.min[t]=Math.min(n.min[t],i),n.max[t]=Math.max(n.max[t],i)}return n}(e,i,n);let a;void 0!==t&&(a=e===t.index?bA:yA);const l=this.processBufferView(e,o,i,n,a),c={bufferView:l.id,byteOffset:l.byteOffset,componentType:o,count:n,max:s.max,min:s.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(c.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(c)-1}processImage(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/png";if(null!==e){const r=this,o=r.cache,s=r.json,a=r.options,l=r.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=n+":flipY/"+i.toString();if(void 0!==c[u])return c[u];s.images||(s.images=[]);const h={mimeType:n},d=FA();d.width=Math.min(e.width,a.maxTextureSize),d.height=Math.min(e.height,a.maxTextureSize);const p=d.getContext("2d",{willReadFrequently:!0});if(!0===i&&(p.translate(0,d.height),p.scale(1,-1)),void 0!==e.data){t!==je&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>a.maxTextureSize||e.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const i=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<i.length;t+=4)i[t+0]=e.data[t+0],i[t+1]=e.data[t+1],i[t+2]=e.data[t+2],i[t+3]=e.data[t+3];p.putImageData(new ImageData(i,e.width,e.height),0,0)}else{if(!("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");p.drawImage(e,0,0,d.width,d.height)}!0===a.binary?l.push(NA(d,n).then((e=>r.processBufferViewImage(e))).then((e=>{h.bufferView=e}))):void 0!==d.toDataURL?h.uri=d.toDataURL(n):l.push(NA(d,n).then((e=>(new FileReader).readAsDataURL(e))).then((e=>{h.uri=e})));const f=s.images.push(h)-1;return c[u]=f,f}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:BA[e.magFilter],minFilter:BA[e.minFilter],wrapS:BA[e.wrapS],wrapT:BA[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){const t=this.options,i=this.cache,n=this.json;if(i.textures.has(e))return i.textures.get(e);n.textures||(n.textures=[]),e instanceof qu&&(e=rA(e,t.maxTextureSize));let r=e.userData.mimeType;"image/webp"===r&&(r="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(o.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,o)}));const s=n.textures.push(o)-1;return i.textures.set(e,s),s}processMaterial(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const n={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(DA(r,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),i={index:this.processTexture(t),channel:t.channel};this.applyTextureTransform(i,t),n.pbrMetallicRoughness.metallicRoughnessTexture=i}if(e.map){const t={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(t,e.map),n.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive;if(Math.max(t.r,t.g,t.b)>0&&(n.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const t={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(t,e.emissiveMap),n.emissiveTexture=t}}if(e.normalMap){const t={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),n.normalTexture=t}if(e.aoMap){const t={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),n.occlusionTexture=t}e.transparent?n.alphaMode="BLEND":e.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),e.side===y&&(n.doubleSided=!0),""!==e.name&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,n)}));const o=i.materials.push(n)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,i=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,b=e.material.length;y<b;y++)n.push(e.material[y].uuid);else n.push(e.material.uuid);const r=n.join(":");if(t.meshes.has(r))return t.meshes.get(r);const o=e.geometry;let s;s=e.isLineSegments?lA:e.isLineLoop?cA:e.isLine?uA:e.isPoints?aA:e.material.wireframe?lA:hA;const a={},l={},c=[],u=[],h={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");void 0===d||this.isNormalizedNormalAttribute(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let p=null;for(let y in o.attributes){if("morph"===y.slice(0,5))continue;const e=o.attributes[y];y=h[y]||y.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),t.attributes.has(this.getUID(e))){l[y]=t.attributes.get(this.getUID(e));continue}p=null;const i=e.array;"JOINTS_0"!==y||i instanceof Uint16Array||i instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new yo(new Uint16Array(i),e.itemSize,e.normalized));const n=this.processAccessor(p||e,o);null!==n&&(y.startsWith("_")||this.detectMeshQuantization(y,e),l[y]=n,t.attributes.set(this.getUID(e),n))}if(void 0!==d&&o.setAttribute("normal",d),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const i=[],n=[],r={};if(void 0!==e.morphTargetDictionary)for(const t in e.morphTargetDictionary)r[e.morphTargetDictionary[t]]=t;for(let s=0;s<e.morphTargetInfluences.length;++s){const a={};let l=!1;for(const e in o.morphAttributes){if("position"!==e&&"normal"!==e){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const i=o.morphAttributes[e][s],n=e.toUpperCase(),r=o.attributes[e];if(t.attributes.has(this.getUID(i,!0))){a[n]=t.attributes.get(this.getUID(i,!0));continue}const c=i.clone();if(!o.morphTargetsRelative)for(let e=0,t=i.count;e<t;e++)for(let n=0;n<i.itemSize;n++)0===n&&c.setX(e,i.getX(e)-r.getX(e)),1===n&&c.setY(e,i.getY(e)-r.getY(e)),2===n&&c.setZ(e,i.getZ(e)-r.getZ(e)),3===n&&c.setW(e,i.getW(e)-r.getW(e));a[n]=this.processAccessor(c,o),t.attributes.set(this.getUID(r,!0),a[n])}u.push(a),i.push(e.morphTargetInfluences[s]),void 0!==e.morphTargetDictionary&&n.push(r[s])}a.weights=i,n.length>0&&(a.extras={},a.extras.targetNames=n)}const f=Array.isArray(e.material);if(f&&0===o.groups.length)return null;let g=!1;if(f&&null===o.index){const e=[];for(let t=0,i=o.attributes.position.count;t<i;t++)e[t]=t;o.setIndex(e),g=!0}const m=f?e.material:[e.material],_=f?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,b=_.length;y<b;y++){const e={mode:s,attributes:l};if(this.serializeUserData(o,e),u.length>0&&(e.targets=u),null!==o.index){let i=this.getUID(o.index);void 0===_[y].start&&void 0===_[y].count||(i+=":"+_[y].start+":"+_[y].count),t.attributes.has(i)?e.indices=t.attributes.get(i):(e.indices=this.processAccessor(o.index,o,_[y].start,_[y].count),t.attributes.set(i,e.indices)),null===e.indices&&delete e.indices}const i=this.processMaterial(m[_[y].materialIndex]);null!==i&&(e.material=i),c.push(e)}!0===g&&o.setIndex(null),a.primitives=c,i.meshes||(i.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,a)}));const v=i.meshes.push(a)-1;return t.meshes.set(r,v),v}detectMeshQuantization(e,t){if(this.extensionsUsed[kA])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const n=e.split("_",1)[0];oA[n]&&oA[n].includes(i)&&(this.extensionsUsed[kA]=!0,this.extensionsRequired[kA]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:on.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(n.name=e.type),t.cameras.push(n)-1}processAnimation(e,t){const i=this.json,n=this.nodeMap;i.animations||(i.animations=[]);const r=(e=sA.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,o=[],s=[];for(let a=0;a<r.length;++a){const e=r[a],i=df.parseTrackName(e.name);let l=df.findNode(t,i.nodeName);const c=RA[i.propertyName];if("bones"===i.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(i.objectIndex):void 0),!l||!c){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',e.name);continue}const u=1;let h,d=e.values.length/e.times.length;c===RA.morphTargetInfluences&&(d/=l.morphTargetInfluences.length),!0===e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",d/=3):h=e.getInterpolation()===Nt?"STEP":"LINEAR",s.push({input:this.processAccessor(new yo(e.times,u)),output:this.processAccessor(new yo(e.values,d)),interpolation:h}),o.push({sampler:s.length-1,target:{node:n.get(l),path:c}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:s,channels:o}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,n=t.nodes[i.get(e)],r=e.skeleton;if(void 0===r)return null;const o=e.skeleton.bones[0];if(void 0===o)return null;const s=[],a=new Float32Array(16*r.bones.length),l=new fr;for(let c=0;c<r.bones.length;++c)s.push(i.get(r.bones[c])),l.copy(r.boneInverses[c]),l.multiply(e.bindMatrix).toArray(a,16*c);void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new yo(a,16)),joints:s,skeleton:i.get(o)});return n.skin=t.skins.length-1}processNode(e){const t=this.json,i=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const t=e.quaternion.toArray(),i=e.position.toArray(),n=e.scale.toArray();DA(t,[0,0,0,1])||(r.rotation=t),DA(i,[0,0,0])||(r.translation=i),DA(n,[1,1,1])||(r.scale=n)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===DA(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=e.matrix.elements);if(""!==e.name&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const t=this.processMesh(e);null!==t&&(r.mesh=t)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];if(r.visible||!1===i.onlyVisible){const e=this.processNode(r);null!==e&&t.push(e)}}t.length>0&&(r.children=t)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,r)}));const o=t.nodes.push(r)-1;return n.set(e,o),o}processScene(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const n={};""!==e.name&&(n.name=e.name),t.scenes.push(n);const r=[];for(let o=0,s=e.children.length;o<s;o++){const t=e.children[o];if(t.visible||!1===i.onlyVisible){const e=this.processNode(t);null!==e&&r.push(e)}}r.length>0&&(n.nodes=r),this.serializeUserData(e,n)}processObjects(e){const t=new dc;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));const i=[];for(let n=0;n<e.length;n++)e[n]instanceof dc?this.processScene(e[n]):i.push(e[n]);i.length>0&&this.processObjects(i);for(let n=0;n<this.skins.length;++n)this.processSkin(this.skins[n]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}}class UA{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const i=this.writer,n=i.json,r=i.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(1-e.penumbra)*e.angle,o.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},r[this.name]=!0);const s=n.extensions[this.name].lights;s.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:s.length-1}}}class HA{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class VA{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const t={index:i.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(t,e.clearcoatMap),r.clearcoatTexture=t}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const t={index:i.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(t,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){const t={index:i.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};1!==e.clearcoatNormalScale.x&&(t.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(t,e.clearcoatNormalMap),r.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class $A{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.dispersion)return;const i=this.writer.extensionsUsed,n={};n.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class GA{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const t={index:i.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(t,e.iridescenceMap),r.iridescenceTexture=t}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const t={index:i.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(t,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class QA{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const t={index:i.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(t,e.transmissionMap),r.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class jA{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const t={index:i.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(t,e.thicknessMap),r.thicknessTexture=t}e.attenuationDistance!==1/0&&(r.attenuationDistance=e.attenuationDistance),r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class qA{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;const i=this.writer.extensionsUsed,n={};n.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class WA{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(PA)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.specularIntensityMap){const t={index:i.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(t,e.specularIntensityMap),r.specularTexture=t}if(e.specularColorMap){const t={index:i.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(t,e.specularColorMap),r.specularColorTexture=t}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class XA{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const t={index:i.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(t,e.sheenRoughnessMap),r.sheenRoughnessTexture=t}if(e.sheenColorMap){const t={index:i.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(t,e.sheenColorMap),r.sheenColorTexture=t}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class YA{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.anisotropy)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.anisotropyMap){const t={index:i.processTexture(e.anisotropyMap)};i.applyTextureTransform(t,e.anisotropyMap),r.anisotropyTexture=t}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class KA{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;const i=this.writer.extensionsUsed,n={};n.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class ZA{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.bumpScale&&!e.bumpMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.bumpMap){const t={index:i.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(t,e.bumpMap),r.bumpTexture=t}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class JA{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,n=e,r=new Float32Array(3*n.count),o=new Float32Array(4*n.count),s=new Float32Array(3*n.count),a=new fr,l=new Nn,c=new Fn,u=new Nn;for(let d=0;d<n.count;d++)n.getMatrixAt(d,a),a.decompose(l,c,u),l.toArray(r,3*d),c.toArray(o,4*d),u.toArray(s,3*d);const h={TRANSLATION:i.processAccessor(new yo(r,3)),ROTATION:i.processAccessor(new yo(o,4)),SCALE:i.processAccessor(new yo(s,3))};n.instanceColor&&(h._COLOR_0=i.processAccessor(n.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:h},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}sA.Utils={insertKeyframe:function(e,t){const i=.001,n=e.getValueSize(),r=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+n),s=e.createInterpolant(new e.ValueBufferType(n));let a;if(0===e.times.length){r[0]=t;for(let e=0;e<n;e++)o[e]=0;a=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<i)return 0;r[0]=t,r.set(e.times,1),o.set(s.evaluate(t),0),o.set(e.values,n),a=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<i)return e.times.length-1;r[r.length-1]=t,r.set(e.times,0),o.set(e.values,0),o.set(s.evaluate(t),e.values.length),a=r.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<i)return l;if(e.times[l]<t&&e.times[l+1]>t){r.set(e.times.slice(0,l+1),0),r[l+1]=t,r.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*n),0),o.set(s.evaluate(t),(l+1)*n),o.set(e.values.slice((l+1)*n),(l+2)*n),a=l+1;break}}return e.times=r,e.values=o,a},mergeMorphTargetTracks:function(e,t){const i=[],n={},r=e.tracks;for(let o=0;o<r.length;++o){let e=r[o];const s=df.parseTrackName(e.name),a=df.findNode(t,s.nodeName);if("morphTargetInfluences"!==s.propertyName||void 0===s.propertyIndex){i.push(e);continue}if(e.createInterpolant!==e.InterpolantFactoryMethodDiscrete&&e.createInterpolant!==e.InterpolantFactoryMethodLinear){if(e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),e=e.clone(),e.setInterpolation(zt)}const l=a.morphTargetInfluences.length,c=a.morphTargetDictionary[s.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);let u;if(void 0===n[a.uuid]){u=e.clone();const t=new u.ValueBufferType(l*u.times.length);for(let e=0;e<u.times.length;e++)t[e*l+c]=u.values[e];u.name=(s.nodeName||"")+".morphTargetInfluences",u.values=t,n[a.uuid]=u,i.push(u);continue}const h=e.createInterpolant(new e.ValueBufferType(1));u=n[a.uuid];for(let t=0;t<u.times.length;t++)u.values[t*l+c]=h.evaluate(u.times[t]);for(let t=0;t<e.times.length;t++){const i=this.insertKeyframe(u,e.times[t]);u.values[i*l+c]=e.values[t]}}return e.tracks=i,e}};const ew=e=>void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter((e=>tw(e.material))),tw=e=>e&&e.isMaterial&&!Array.isArray(e);class iw{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set;for(const i of e)i.traverse((e=>{if(!ew(e))return;const i=e.userData.variantMaterials,n=e.userData.variantData;for(const[r,o]of n){const e=i.get(o.index);e&&tw(e.material)&&t.add(r)}}));t.forEach((e=>this.variantNames.push(e)))}writeMesh(e,t){if(!ew(e))return;const i=e.userData,n=i.variantMaterials,r=i.variantData,o=new Map,s=new Map,a=Array.from(r.values()).sort(((e,t)=>e.index-t.index));for(const[u,h]of a.entries())s.set(h.index,u);for(const u of r.values()){const e=n.get(u.index);if(!e||!tw(e.material))continue;const t=this.writer.processMaterial(e.material);o.has(t)||o.set(t,{material:t,variants:[]}),o.get(t).variants.push(s.get(u.index))}const l=Array.from(o.values()).map((e=>e.variants.sort(((e,t)=>e-t))&&e)).sort(((e,t)=>e.material-t.material));if(0===l.length)return;const c=tw(i.originalMaterial)?this.writer.processMaterial(i.originalMaterial):-1;for(const u of t.primitives)c>=0&&(u.material=c),u.extensions=u.extensions||{},u.extensions[this.name]={mappings:l}}afterParse(){if(0===this.variantNames.length)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map((e=>({name:e})));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class nw{constructor(e,t,i,n,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const o=t.xr.getSession();if(n&&"XRWebGLBinding"in window){const i=new us(16);e.environment=i.texture;const n=t.getContext();switch(o.preferredReflectionFormat){case"srgba8":n.getExtension("EXT_sRGB");break;case"rgba16f":n.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(o,n),this.lightProbe.addEventListener("reflectionchange",(()=>{this.updateReflection()}))}o.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const e=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/e,i.primaryLightIntensity.y/e,i.primaryLightIntensity.z/e),this.xrLight.directionalLight.intensity=e,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class rw extends ec{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.lightProbe=new Tp,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new xp,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,n=!1;e.xr.addEventListener("sessionstart",(()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then((r=>{i=new nw(this,e,r,t,(()=>{n=!0,this.dispatchEvent({type:"estimationstart"})}))}))})),e.xr.addEventListener("sessionend",(()=>{i&&(i.dispose(),i=null),n&&this.dispatchEvent({type:"estimationend"})})),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}class ow{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(.001,e)}update(e,t,i,n){const r=2e-4*this.naturalFrequency;if(null==e||0===n)return t;if(e===t&&0===this.velocity)return t;if(i<0)return e;const o=e-t,s=this.velocity+this.naturalFrequency*o,a=o+i*s,l=Math.exp(-this.naturalFrequency*i),c=(s-this.naturalFrequency*a)*l,u=-this.naturalFrequency*(c+s*l);return Math.abs(c)<r*Math.abs(n)&&u*o>=0?(this.velocity=0,t):(this.velocity=c,t+a*l)}}const sw=.2,aw=Math.PI/24,lw=new sn,cw=(e,t,i)=>{let n=t>0?i>0?0:-Math.PI/2:i>0?Math.PI/2:Math.PI;for(let r=0;r<=12;++r)e.push(t+.17*Math.cos(n),i+.17*Math.sin(n),0,t+sw*Math.cos(n),i+sw*Math.sin(n),0),n+=aw};class uw extends Wo{constructor(e,t){const i=new Oo,n=[],r=[],{size:o,boundingBox:s}=e,a=o.x/2,l=("back"===t?o.y:o.z)/2;cw(r,a,l),cw(r,-a,l),cw(r,-a,-l),cw(r,a,-l);const c=r.length/3;for(let d=0;d<c-2;d+=2)n.push(d,d+1,d+3,d,d+3,d+2);const u=c-2;n.push(u,u+1,1,u,1,0),i.setAttribute("position",new Io(r,3)),i.setIndex(n),super(i),this.side=t;const h=this.material;switch(h.side=y,h.transparent=!0,h.opacity=0,this.goalOpacity=0,this.opacityDamper=new ow,this.hitPlane=new Wo(new bs(2*(a+sw),2*(l+sw))),this.hitPlane.visible=!1,this.hitPlane.material.side=y,this.add(this.hitPlane),this.hitBox=new Wo(new Yo(o.x+.4,o.y+sw,o.z+.4)),this.hitBox.visible=!1,this.hitBox.material.side=y,this.add(this.hitBox),s.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=s.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=s.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(o.y+sw)/2+s.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,i){lw.set(t,-i),this.hitPlane.visible=!0;const n=e.positionAndNormalFromPoint(lw,this.hitPlane);return this.hitPlane.visible=!1,null==n?null:n.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const n=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),n}controllerIntersection(e,t){this.hitBox.visible=!0;const i=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,i}set offsetHeight(e){e-=.001,"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?.75:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}const hw=(e,t)=>({type:"number",number:e,unit:t}),dw=(()=>{const e={};return t=>{const i=t;if(i in e)return e[i];const n=[];let r=0;for(;t;){if(++r>1e3){t="";break}const e=pw(t),i=e.nodes[0];if(null==i||0===i.terms.length)break;n.push(i),t=e.remainingInput}return e[i]=n}})(),pw=(()=>{const e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,i=/^[\),]/;return n=>{const r=[];for(;n.length&&(n=n.trim(),!i.test(n));)if("("===n[0]){const{nodes:e,remainingInput:t}=_w(n);n=t,r.push({type:"function",name:{type:"ident",value:"calc"},arguments:e})}else if(e.test(n)){const e=fw(n),t=e.nodes[0];if("("===(n=e.remainingInput)[0]){const{nodes:e,remainingInput:i}=_w(n);r.push({type:"function",name:t,arguments:e}),n=i}else r.push(t)}else if(t.test(n))r.push({type:"operator",value:n[0]}),n=n.slice(1);else{const{nodes:e,remainingInput:t}="#"===n[0]?mw(n):gw(n);if(0===e.length)break;r.push(e[0]),n=t}return{nodes:[{type:"expression",terms:r}],remainingInput:n}}})(),fw=(()=>{const e=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{const i=t.match(e);return{nodes:[{type:"ident",value:null==i?t:t.substr(0,i.index)}],remainingInput:null==i?"":t.substr(i.index)}}})(),gw=(()=>{const e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,i=/^(m|mm|cm|rad|deg|[%])$/;return n=>{const r=n.match(e),o=null==r?"0":r[0],s=(n=null==o?n:n.slice(o.length)).match(t);let a=null!=s&&""!==s[0]?s[0]:null;const l=null==s?n:n.slice(a.length);return null==a||i.test(a)||(a=null),{nodes:[{type:"number",number:parseFloat(o)||0,unit:a}],remainingInput:l}}})(),mw=(()=>{const e=/^[a-f0-9]*/i;return t=>{const i=(t=t.slice(1).trim()).match(e);return{nodes:null==i?[]:[{type:"hex",value:i[0]}],remainingInput:null==i?t:t.slice(i[0].length)}}})(),_w=e=>{const t=[];for(e=e.slice(1).trim();e.length;){const i=pw(e);if(t.push(i.nodes[0]),","===(e=i.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},vw=Symbol("visitedTypes");class yw{constructor(e){this[vw]=e}walk(e,t){const i=e.slice();for(;i.length;){const e=i.shift();switch(this[vw].indexOf(e.type)>-1&&t(e),e.type){case"expression":i.unshift(...e.terms);break;case"function":i.unshift(e.name,...e.arguments)}}}}const bw=Object.freeze({type:"number",number:0,unit:null}),Aw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:i,unit:n}=e;if(isFinite(i)){if("rad"===e.unit||null==e.unit)return e}else i=t,n="rad";return{type:"number",number:("deg"===n&&null!=i?i:0)*Math.PI/180,unit:"rad"}},ww=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:n,unit:r}=e;if(isFinite(n)){if("m"===e.unit)return e}else n=i,r="m";switch(r){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*n,unit:"m"}},xw=(()=>{const e=e=>e,t={rad:e,deg:Aw,m:e,mm:ww,cm:ww};return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bw;isFinite(e.number)||(e.number=i.number,e.unit=i.unit);const{unit:n}=e;if(null==n)return e;const r=t[n];return null==r?i:r(e)}})();var Sw,Cw,Ew;const Tw=Symbol("evaluate"),Iw=Symbol("lastValue");class Mw{constructor(){this[Sw]=null}static evaluatableFor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bw;if(e instanceof Mw)return e;if("number"===e.type)return"%"===e.unit?new Rw(e,t):e;switch(e.name.value){case"calc":return new Fw(e,t);case"env":return new Dw(e)}return bw}static evaluate(e){return e instanceof Mw?e.evaluate():e}static isConstant(e){return!(e instanceof Mw)||e.isConstant}static applyIntrinsics(e,t){const{basis:i,keywords:n}=t,{auto:r}=n;return i.map(((t,i)=>{const o=null==r[i]?t:r[i];let s=e[i]?e[i]:o;if("ident"===s.type){const e=s.value;e in n&&(s=n[e][i])}return null!=s&&"ident"!==s.type||(s=o),"%"===s.unit?hw(s.number/100*t.number,t.unit):(s=xw(s,t),s.unit!==t.unit?t:s)}))}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[Iw]||(this[Iw]=this[Tw]()),this[Iw]}}Sw=Iw;const kw=Symbol("percentage"),Bw=Symbol("basis");class Rw extends Mw{constructor(e,t){super(),this[kw]=e,this[Bw]=t}get isConstant(){return!0}[Tw](){return hw(this[kw].number/100*this[Bw].number,this[Bw].unit)}}const Pw=Symbol("identNode");class Dw extends Mw{constructor(e){super(),this[Cw]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;null!=t&&"ident"===t.type&&(this[Pw]=t)}get isConstant(){return!1}[(Cw=Pw,Tw)](){if(null!=this[Pw]&&"window-scroll-y"===this[Pw].value){return{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}}return bw}}const Lw=/[\*\/]/,Ow=Symbol("evaluator");class Fw extends Mw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bw;if(super(),this[Ew]=null,1!==e.arguments.length)return;const i=e.arguments[0].terms.slice(),n=[];for(;i.length;){const e=i.shift();if(n.length>0){const i=n[n.length-1];if("operator"===i.type&&Lw.test(i.value)){const i=n.pop(),r=n.pop();if(null==r)return;n.push(new Hw(i,Mw.evaluatableFor(r,t),Mw.evaluatableFor(e,t)));continue}}n.push("operator"===e.type?e:Mw.evaluatableFor(e,t))}for(;n.length>2;){const[e,i,r]=n.splice(0,3);if("operator"!==i.type)return;n.unshift(new Hw(i,Mw.evaluatableFor(e,t),Mw.evaluatableFor(r,t)))}1===n.length&&(this[Ow]=n[0])}get isConstant(){return null==this[Ow]||Mw.isConstant(this[Ow])}[(Ew=Ow,Tw)](){return null!=this[Ow]?Mw.evaluate(this[Ow]):bw}}const Nw=Symbol("operator"),zw=Symbol("left"),Uw=Symbol("right");class Hw extends Mw{constructor(e,t,i){super(),this[Nw]=e,this[zw]=t,this[Uw]=i}get isConstant(){return Mw.isConstant(this[zw])&&Mw.isConstant(this[Uw])}[Tw](){const e=xw(Mw.evaluate(this[zw])),t=xw(Mw.evaluate(this[Uw])),{number:i,unit:n}=e,{number:r,unit:o}=t;if(null!=o&&null!=n&&o!=n)return bw;const s=n||o;let a;switch(this[Nw].value){case"+":a=i+r;break;case"-":a=i-r;break;case"/":a=i/r;break;case"*":a=i*r;break;default:return bw}return{type:"number",number:a,unit:s}}}const Vw=Symbol("evaluatables"),$w=Symbol("intrinsics");class Gw extends Mw{constructor(e,t){super(),this[$w]=t;const i=e[0],n=null!=i?i.terms:[];this[Vw]=t.basis.map(((e,t)=>{const i=n[t];return null==i?{type:"ident",value:"auto"}:"ident"===i.type?i:Mw.evaluatableFor(i,e)}))}get isConstant(){for(const e of this[Vw])if(!Mw.isConstant(e))return!1;return!0}[Tw](){const e=this[Vw].map((e=>Mw.evaluate(e)));return Mw.applyIntrinsics(e,this[$w]).map((e=>e.number))}}var Qw,jw,qw,Ww;const Xw=Symbol("instances"),Yw=Symbol("activateListener"),Kw=Symbol("deactivateListener"),Zw=Symbol("notifyInstances"),Jw=Symbol("notify"),ex=Symbol("callback");class tx{constructor(e){this[ex]=e}static[Zw](){for(const e of tx[Xw])e[Jw]()}static[(Qw=Xw,Yw)](){window.addEventListener("scroll",this[Zw],{passive:!0})}static[Kw](){window.removeEventListener("scroll",this[Zw])}observe(){0===tx[Xw].size&&tx[Yw](),tx[Xw].add(this)}disconnect(){tx[Xw].delete(this),0===tx[Xw].size&&tx[Kw]()}[Jw](){this[ex]()}}tx[Qw]=new Set;const ix=Symbol("computeStyleCallback"),nx=Symbol("astWalker"),rx=Symbol("dependencies"),ox=Symbol("onScroll");class sx{constructor(e){this[jw]={},this[qw]=new yw(["function"]),this[Ww]=()=>{this[ix]({relatedState:"window-scroll"})},this[ix]=e}observeEffectsFor(e){const t={},i=this[rx];this[nx].walk(e,(e=>{const{name:n}=e,r=e.arguments[0].terms[0];if("env"===n.value&&null!=r&&"ident"===r.type&&"window-scroll-y"===r.value)if(null==t["window-scroll"]){const e="window-scroll"in i?i["window-scroll"]:new tx(this[ox]);e.observe(),delete i["window-scroll"],t["window-scroll"]=e}}));for(const n in i){i[n].disconnect()}this[rx]=t}dispose(){for(const e in this[rx]){this[rx][e].disconnect()}}}jw=rx,qw=nx,Ww=ox;const ax=e=>{const t=e.observeEffects||!1,i=e.intrinsics instanceof Function?e.intrinsics:()=>e.intrinsics;return(n,r)=>{const o=n.updated,s=n.connectedCallback,a=n.disconnectedCallback,l=Symbol(`${r}StyleEffector`),c=Symbol(`${r}StyleEvaluator`),u=Symbol(`${r}UpdateEvaluator`),h=Symbol(`${r}EvaluateAndSync`);Object.defineProperties(n,{[l]:{value:null,writable:!0},[c]:{value:null,writable:!0},[u]:{value:function(){const e=dw(this[r]);this[c]=new Gw(e,i(this)),null==this[l]&&t&&(this[l]=new sx((()=>this[h]()))),null!=this[l]&&this[l].observeEffectsFor(e)}},[h]:{value:function(){if(null==this[c])return;const t=this[c].evaluate();this[e.updateHandler](t)}},updated:{value:function(e){e.has(r)&&(this[u](),this[h]()),o.call(this,e)}},connectedCallback:{value:function(){s.call(this),this.requestUpdate(r,this[r])}},disconnectedCallback:{value:function(){a.call(this),null!=this[l]&&(this[l].dispose(),this[l]=null)}}})}},lx=e=>e<.5?2*e*e:(4-2*e)*e-1,cx=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lx;return n=>e+(t-e)*i(n)},ux=e=>{const t=[],i=[];let n=e.initialValue;for(let r=0;r<e.keyframes.length;++r){const o=e.keyframes[r],{value:s,frames:a}=o,l=o.ease||lx,c=cx(n,s,l);t.push(c),i.push(a),n=s}return((e,t)=>{const i=t.map((n=0,e=>n+=e));var n;return t=>{t=Ry(t,0,1),t*=i[i.length-1];const n=i.findIndex((e=>e>=t)),r=n<1?0:i[n-1],o=i[n];return e[n]((t-r)/(o-r))}})(t,i)};var hx=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const dx=ux({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),px=ux({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),fx="0deg 75deg 105%",gx=["front","right","back","left"],mx=["upper-","","lower-"],_x="auto",vx="basic",yx="wiggle",bx="none",Ax=()=>({basis:[Aw(hw(30,"deg"))],keywords:{auto:[null]}}),wx=()=>({basis:[Aw(hw(12,"deg"))],keywords:{auto:[null]}}),xx=(()=>{const e=dw(fx)[0].terms,t=xw(e[0]),i=xw(e[1]);return e=>{const n=e[oI].idealCameraDistance();return{basis:[t,i,hw(n,"m")],keywords:{auto:[null,null,hw(105,"%")]}}}})(),Sx=e=>{const t=2.2*e[oI].boundingSphere.radius;return{basis:[hw(-1/0,"rad"),hw(0,"rad"),hw(t,"m")],keywords:{auto:[null,null,null]}}},Cx=e=>{const t=xx(e),i=new Gw([],t).evaluate()[2];return{basis:[hw(1/0,"rad"),hw(Math.PI,"rad"),hw(i,"m")],keywords:{auto:[null,null,null]}}},Ex=e=>{const t=e[oI].boundingBox.getCenter(new Nn);return{basis:[hw(t.x,"m"),hw(t.y,"m"),hw(t.z,"m")],keywords:{auto:[null,null,null]}}},Tx=Math.PI/2,Ix=Math.PI/3,Mx=Tx/2,kx=2*Math.PI,Bx=Symbol("controls"),Rx=Symbol("panElement"),Px=Symbol("promptElement"),Dx=Symbol("promptAnimatedContainer"),Lx=Symbol("fingerAnimatedContainers"),Ox=Symbol("deferInteractionPrompt"),Fx=Symbol("updateAria"),Nx=Symbol("a11y"),zx=Symbol("updateA11y"),Ux=Symbol("updateCameraForRadius"),Hx=Symbol("cancelPrompts"),Vx=Symbol("onChange"),$x=Symbol("onPointerChange"),Gx=Symbol("waitingToPromptUser"),Qx=Symbol("userHasInteracted"),jx=Symbol("promptElementVisibleTime"),qx=Symbol("lastPromptOffset"),Wx=Symbol("cancellationSource"),Xx=Symbol("lastSpherical"),Yx=Symbol("jumpCamera"),Kx=Symbol("initialized"),Zx=Symbol("maintainThetaPhi"),Jx=Symbol("syncCameraOrbit"),eS=Symbol("syncFieldOfView"),tS=Symbol("syncCameraTarget"),iS=Symbol("syncMinCameraOrbit"),nS=Symbol("syncMaxCameraOrbit"),rS=Symbol("syncMinFieldOfView"),oS=Symbol("syncMaxFieldOfView"),sS=new sn,aS=new Nn,lS=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),cS=Math.PI/8,uS=.04,hS={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class dS extends qi{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=hS.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new an,this.panPerPixel=0,this.spherical=new Ef,this.goalSpherical=new Ef,this.thetaDamper=new ow,this.phiDamper=new ow,this.radiusDamper=new ow,this.logFov=Math.log(lS.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new ow,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=e=>{if(this.enablePan)e.preventDefault();else for(const t of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:t.id})))},this.touchModeZoom=(e,t)=>{if(!this._disableZoom){const e=this.twoTouchDistance(this.pointers[0],this.pointers[1]),t=uS*this.zoomSensitivity*(this.lastSeparation-e)*50/this.scene.height;this.lastSeparation=e,this.userAdjustOrbit(0,0,t)}this.panPerPixel>0&&this.movePan(e,t)},this.disableScroll=e=>{e.preventDefault()},this.touchModeRotate=(e,t)=>{const{touchAction:i}=this._options;if(!this.touchDecided&&"none"!==i){this.touchDecided=!0;const n=Math.abs(e),r=Math.abs(t);if(this.changeSource===hS.USER_INTERACTION&&("pan-y"===i&&r>n||"pan-x"===i&&n>r))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(e,t)},this.onPointerDown=e=>{if(this.pointers.length>2)return;const{element:t}=this;0===this.pointers.length&&(t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=e.clientX,this.startPointerPosition.clientY=e.clientY,this.startTime=performance.now());try{t.setPointerCapture(e.pointerId)}catch(Ag){}this.pointers.push({clientX:e.clientX,clientY:e.clientY,id:e.pointerId}),this.isUserPointing=!1,"touch"===e.pointerType?(this.changeSource=e.altKey?hS.AUTOMATIC:hS.USER_INTERACTION,this.onTouchChange(e)):(this.changeSource=hS.USER_INTERACTION,this.onMouseDown(e)),this.changeSource===hS.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=e=>{const t=this.pointers.find((t=>t.id===e.pointerId));if(null==t)return;if("mouse"===e.pointerType&&0===e.buttons)return void this.onPointerUp(e);const i=this.pointers.length,n=(e.clientX-t.clientX)/i,r=(e.clientY-t.clientY)/i;0===n&&0===r||(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(this.changeSource=e.altKey?hS.AUTOMATIC:hS.USER_INTERACTION,null!==this.touchMode&&this.touchMode(n,r)):(this.changeSource=hS.USER_INTERACTION,this.panPerPixel>0?this.movePan(n,r):this.handleSinglePointerMove(n,r)))},this.onPointerUp=e=>{const{element:t}=this,i=this.pointers.findIndex((t=>t.id===e.pointerId));-1!==i&&this.pointers.splice(i,1),this.panPerPixel>0&&!e.altKey&&this.resetRadius(),0===this.pointers.length?(t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(e)):null!==this.touchMode&&this.onTouchChange(e),this.scene.element[Rx].style.opacity=0,t.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=e=>{this.changeSource=hS.USER_INTERACTION;const t=e.deltaY*(1==e.deltaMode?18:1)*uS*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,t),e.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=e=>{const{changeSource:t}=this;this.changeSource=hS.USER_INTERACTION;(e.shiftKey&&this.enablePan?this.panKeyCodeHandler(e):this.orbitZoomKeyCodeHandler(e))?(e.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=t},this._options=Object.assign({},lS),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",(()=>{}),{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ef).copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=0===t?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius;const{minimumAzimuthalAngle:n,maximumAzimuthalAngle:r,minimumPolarAngle:o,maximumPolarAngle:s,minimumRadius:a,maximumRadius:l}=this._options,{theta:c,phi:u,radius:h}=this.goalSpherical,d=Ry(e,n,r);isFinite(n)||isFinite(r)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-d)+d);const p=Ry(t,o,s),f=Ry(i,a,l);return(d!==c||p!==u||f!==h)&&(!!(isFinite(d)&&isFinite(p)&&isFinite(f))&&(this.goalSpherical.theta=d,this.goalSpherical.phi=p,this.goalSpherical.radius=f,this.goalSpherical.makeSafe(),!0))}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=Ry(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:n,phi:r,radius:o}=this.goalSpherical,{minimumRadius:s,maximumRadius:a,minimumFieldOfView:l,maximumFieldOfView:c}=this._options,u=this.spherical.theta-n,h=Math.PI-.001,d=n-Ry(e,-h-u,h-u),p=r-t,f=0===i?0:((i>0?a:s)-o)/(Math.log(i>0?c:l)-this.goalLogFov),g=o+i*(isFinite(f)?f:2*(a-s));if(this.setOrbit(d,p,g),0!==i){const e=this.goalLogFov+i;this.setFieldOfView(Math.exp(e))}}jumpToGoal(){this.update(0,1e4)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:n}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(r)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,n),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Sr(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:n}=e,{clientX:r,clientY:o}=t,s=r-i,a=o-n;return Math.sqrt(s*s+a*a)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),n=this.pixelLengthToSphericalAngle(t);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,n,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=.018*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,n=aS.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;n.multiplyScalar(r);const o=i.getTarget();o.add(n.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(o,o),i.setTarget(o.x,o.y,o.z)}recenter(e){if(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(null==i){const{cameraTarget:e}=t.element;t.element.cameraTarget="",t.element.cameraTarget=e,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(sS.set(0,0));if(null==t)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:n,phi:r}=this.spherical,o=n-e.yaw,s=aS.set(Math.sin(r)*Math.sin(o),Math.cos(r),Math.sin(r)*Math.cos(o)),a=s.dot(t.position.sub(i));i.add(s.multiplyScalar(a)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-a)}onTouchChange(e){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),e.altKey||(this.scene.element[Rx].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(2===e.button||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[Rx].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,uS*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-.04*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-cS,0);break;case"ArrowDown":this.userAdjustOrbit(0,cS,0);break;case"ArrowLeft":this.userAdjustOrbit(-cS,0,0);break;case"ArrowRight":this.userAdjustOrbit(cS,0,0);break;default:t=!1}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}}const pS=150,fS="not-presenting",gS="session-started",mS="object-placed",_S="failed",vS="tracking",yS="not-tracking",bS=new Nn,AS=new Fn,wS=new fr,xS=new Nn,SS=new ss(45,1,.1,100),CS=(new Oo).setFromPoints([new Nn(0,0,0),new Nn(0,0,-1)]),ES=new Yo;class TS extends qi{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Nn,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Nn,this.relativeOrientation=new Fn,this.scaleLine=new Ru(CS),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Nn,this.goalYaw=0,this.goalScale=1,this.xDamper=new ow,this.yDamper=new ow,this.zDamper=new ow,this.yawDamper=new ow,this.pitchDamper=new ow,this.rollDamper=new ow,this.scaleDamper=new ow,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=e=>{const t=this.presentedScene,i=e.target;if(null!=this.placementBox.controllerIntersection(t,i))null!=this.selectedController&&(this.selectedController.userData.line.visible=!1,t.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/t.pivot.scale.x,this.scaleLine.visible=!0)),i.attach(t.pivot),this.selectedController=i,t.setShadowIntensity(.01);else{const e=i===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(i.quaternion).invert().multiply(t.pivot.getWorldQuaternion(AS)),e.userData.turning=!1,i.userData.turning=!0,i.userData.line.visible=!1}},this.onControllerSelectEnd=e=>{const t=e.target;if(t.userData.turning=!1,t.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,null!=this.selectedController&&this.selectedController!=t)return;const i=this.presentedScene;i.attach(i.pivot),this.selectedController=null,this.goalYaw=Math.atan2(i.pivot.matrix.elements[8],i.pivot.matrix.elements[10]),this.goalPosition.x=i.pivot.position.x,this.goalPosition.z=i.pivot.position.z},this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new uw(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=e=>{const t=this.transientHitTestSource;if(null==t)return;const i=this.frame.getHitTestResultsForTransientInput(t),n=this.presentedScene,r=this.placementBox;if(1===i.length){this.inputSource=e.inputSource;const{axes:t}=this.inputSource.gamepad,i=r.getHit(this.presentedScene,t[0],t[1]);r.show=!0,null!=i?(this.isTranslating=!0,this.lastDragPosition.copy(i)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*t[0])}else if(2===i.length){r.show=!0,this.isTwoFingering=!0;const{separation:e}=this.fingerPolar(i);this.firstRatio=e/n.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){My();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return My(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise(((e,t)=>{requestAnimationFrame((()=>e()))}));e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),!0===t&&(this.xrLight=new rw(this.threeRenderer),this.xrLight.addEventListener("estimationstart",(()=>{if(!this.isPresenting||null==this.xrLight)return;const e=this.presentedScene;e.add(this.xrLight),e.environment=this.xrLight.environment})));const n=await this.resolveARSession();n.addEventListener("end",(()=>{this.postSessionCleanup()}),{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const o=await n.requestReferenceSpace("viewer");this.xrMode=n.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const s=20*Math.PI/180,a=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(s),z:-Math.cos(s)});n.requestHitTestSource({space:o,offsetRay:a}).then((e=>{this.initialHitSource=e})),"screen-space"!==this.xrMode&&(this.setupControllers(),this.xDamper.setDecayTime(pS),this.yDamper.setDecayTime(pS),this.zDamper.setDecayTime(pS),this.yawDamper.setDecayTime(pS),this.pitchDamper.setDecayTime(pS),this.rollDamper.setDecayTime(pS)),this.currentSession=n,this.placementBox=new uw(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:gS})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new Ru(CS);t.name="line",t.scale.z=5,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const i=t.clone();this.controller2.userData.line=i,this.controller2.add(i),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:n}=e,r=.1/Math.max(n.x,n.y,n.z),o=new Wo(ES);o.name="box",o.scale.copy(n).multiplyScalar(r),o.visible=!1,this.controller1.userData.box=o,e.add(o);const s=o.clone();this.controller2.userData.box=s,e.add(s)}}hover(e){if("screen-space"===this.xrMode||this.selectedController==e)return!1;const t=this.presentedScene,i=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(null==i||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=null==i?5:i.distance,null!=i}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise((e=>{this.resolveCleanup=e}));try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(null!=e){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,null!=t){const{element:e}=t;null!=this.xrLight&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const i=this.turntableRotation;null!=i&&(t.yaw=i);const n=this.oldShadowIntensity;null!=n&&t.setShadowIntensity(n),t.setEnvironmentAndSkybox(e[Ly],e[Oy]);const r=this.oldTarget;t.setTarget(r.x,r.y,r.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:o,height:s}=e.getBoundingClientRect();t.setSize(o,s),requestAnimationFrame((()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:hS.NONE}}))}))}this.renderer.height=0;const i=this.exitWebXRButtonContainer;null!=i&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const n=this.transientHitTestSource;null!=n&&(n.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;null!=r&&(r.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),"screen-space"!==this.xrMode&&(null!=this.controller1&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),null!=this.controller2&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:fS})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(SS),t.xrCamera=i.getCamera();const{elements:n}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(n[1],n[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const t=e.recommendedViewportScale;e.requestViewportScale(Math.max(t,.25))}const r=i.getBaseLayer();if(null!=r){const t=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(t.x,t.y,t.width,t.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:i}=e,{position:n}=t,r=e.getCamera(),{width:o,height:s}=this.overlay.getBoundingClientRect();e.setSize(o,s),r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const{theta:a}=i.getCameraOrbit(),l=r.getWorldDirection(bS);e.yaw=Math.atan2(-l.x,-l.z)-a,this.goalYaw=e.yaw;const c=Math.max(1,2*e.boundingSphere.radius);n.copy(r.position).add(l.multiplyScalar(c)),this.updateTarget();const u=e.getTarget();if(n.add(u).sub(this.oldTarget),this.goalPosition.copy(n),e.setHotspotsVisibility(!0),"screen-space"===this.xrMode){const{session:e}=this.frame;e.addEventListener("selectstart",this.onSelectStart),e.addEventListener("selectend",this.onSelectEnd),e.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((e=>{this.transientHitTestSource=e}))}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(bS.copy(t).sub(this.presentedScene.getCamera().position),bS.length()>10)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(null==i)return null;const n=wS.fromArray(i.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(n.elements[4],n.elements[6])),n.elements[5]>.75!==this.placeOnWall?xS.setFromMatrixPosition(n):null}moveToFloor(e){const t=this.initialHitSource;if(null==t)return;const i=e.getHitTestResults(t);if(0==i.length)return;const n=i[0],r=this.getHitPoint(n);null!=r&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:mS}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,n=i[0]-t[0],r=i[1]-t[1],o=Math.atan2(r,n);let s=this.lastAngle-o;return s>Math.PI?s-=2*Math.PI:s<-Math.PI&&(s+=2*Math.PI),this.lastAngle=o,{separation:Math.sqrt(n*n+r*r),deltaYaw:s}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<.2?1:t}processInput(e){const t=this.transientHitTestSource;if(null==t)return;if(!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),n=this.presentedScene,r=n.pivot.scale.x;if(this.isTwoFingering)if(i.length<2)this.isTwoFingering=!1;else{const{separation:e,deltaYaw:t}=this.fingerPolar(i);!1===this.placeOnWall&&(this.goalYaw+=t),n.canScale&&this.setScale(e)}else if(2!==i.length)if(this.isRotating){const e=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=e-this.lastAngle,this.lastAngle=e}else this.isTranslating&&i.forEach((e=>{if(e.inputSource!==this.inputSource)return;let t=null;if(e.results.length>0&&(t=this.getHitPoint(e.results[0])),null==t&&(t=this.getTouchLocation()),null!=t){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){const e=t.y-this.lastDragPosition.y;if(e<0){this.placementBox.offsetHeight=e/r,this.presentedScene.setShadowOffset(e);const i=bS.copy(n.getCamera().position),o=-e/(i.y-t.y);i.multiplyScalar(o),t.multiplyScalar(1-o).add(i)}}this.goalPosition.add(t),this.lastDragPosition.copy(t)}}));else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:e}=this.fingerPolar(i);this.firstRatio=e/r}}moveScene(e){const t=this.presentedScene,{pivot:i}=t,n=this.placementBox;if(n.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(i.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&i.quaternion.premultiply(AS.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),i.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(i.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&i.quaternion.premultiply(AS.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),i.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const e=this.controllerSeparation();this.setScale(e),this.scaleLine.scale.z=-e,this.scaleLine.lookAt(this.controller2.position)}const r=t.pivot.scale.x;if(this.goalScale!==r){const i=this.scaleDamper.update(r,this.goalScale,e,1);t.pivot.scale.set(i,i,i)}if(i.parent!==t)return;const{position:o}=i,s=t.boundingSphere.radius,a=this.goalPosition;let l=hS.NONE;if(!a.equals(o)){l=hS.USER_INTERACTION;let{x:i,y:r,z:c}=o;if(i=this.xDamper.update(i,a.x,e,s),r=this.yDamper.update(r,a.y,e,s),c=this.zDamper.update(c,a.z,e,s),o.set(i,r,c),"screen-space"===this.xrMode&&!this.isTranslating){const e=a.y-r;this.placementComplete&&!1===this.placeOnWall?(n.offsetHeight=e/t.pivot.scale.x,t.setShadowOffset(e)):0===e&&(this.placementComplete=!0,n.show=!1,t.setShadowIntensity(.8))}"screen-space"!==this.xrMode&&a.equals(o)&&t.setShadowIntensity(.8)}t.updateTarget(e),AS.setFromAxisAngle(bS.set(0,1,0),this.goalYaw);const c=t.pivot.quaternion.angleTo(AS),u=c-this.yawDamper.update(c,0,e,Math.PI);t.pivot.quaternion.rotateTowards(AS,u),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:l}}))}onWebXRFrame(e,t){if("screen-space"!==this.xrMode){const e=this.hover(this.controller1),t=this.hover(this.controller2);this.placementBox.show=(e||t)&&!this.isTwoFingering}this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),n=t.getViewerPose(i);null==n&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:yS}));const r=this.presentedScene;if(null==n||null==r||!r.element.loaded)return void this.threeRenderer.clear();!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:vS}));let o=!0;for(const s of n.views){if(this.updateView(s),o){this.moveToFloor(t),this.processInput(t);const i=e-this.lastTick;this.moveScene(i),this.renderer.preRender(r,e,i),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),o=!1}}}function IS(e){const t=new Map,i=new Map,n=e.clone();return MS(e,n,(function(e,n){t.set(n,e),i.set(e,n)})),n.traverse((function(e){if(!e.isSkinnedMesh)return;const n=e,r=t.get(e),o=r.skeleton.bones;n.skeleton=r.skeleton.clone(),n.bindMatrix.copy(r.bindMatrix),n.skeleton.bones=o.map((function(e){return i.get(e)})),n.bind(n.skeleton,n.bindMatrix)})),n}function MS(e,t,i){i(e,t);for(let n=0;n<e.children.length;n++)MS(e.children[n],t.children[n],i)}const kS=Symbol("prepared"),BS=Symbol("prepare"),RS=Symbol("preparedGLTF"),PS=Symbol("clone");class DS{constructor(e){this[RS]=e}static prepare(e){if(null==e.scene)throw new Error("Model does not have a scene");if(e[kS])return e;const t=this[BS](e);return t[kS]=!0,t}static[BS](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[RS].parser}get animations(){return this[RS].animations}get scene(){return this[RS].scene}get scenes(){return this[RS].scenes}get cameras(){return this[RS].cameras}get asset(){return this[RS].asset}get userData(){return this[RS].userData}clone(){return new(0,this.constructor)(this[PS]())}dispose(){this.scenes.forEach((e=>{e.traverse((e=>{const t=e;if(!t.material)return;(Array.isArray(t.material)?t.material:[t.material]).forEach((e=>{for(const t in e){const i=e[t];if(i instanceof Mn){const e=i.source.data;null!=e.close&&e.close(),i.dispose()}}e.dispose()})),t.geometry.dispose()}))}))}[PS](){const e=this[RS],t=IS(this.scene);LS(t,this.scene);const i=[t],n=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:n})}}const LS=(e,t)=>{OS(e,t,((e,t)=>{void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.variantData&&(e.userData.variantData=t.userData.variantData),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)}))},OS=(e,t,i)=>{i(e,t);for(let n=0;n<e.children.length;n++)OS(e.children[n],t.children[n],i)},FS=Symbol("threeGLTF"),NS=Symbol("gltf"),zS=Symbol("gltfElementMap"),US=Symbol("threeObjectMap"),HS=Symbol("parallelTraverseThreeScene"),VS=Symbol("correlateOriginalThreeGLTF"),$S=Symbol("correlateCloneThreeGLTF");class GS{constructor(e,t,i,n){this[FS]=e,this[NS]=t,this[zS]=n,this[US]=i}static from(e,t){return null!=t?this[$S](e,t):this[VS](e)}static[VS](e){const t=e.parser.json,i=e.parser.associations,n=new Map,r={name:"Default"},o={type:"materials",index:-1};for(const s of i.keys())s instanceof co&&null==i.get(s)&&(o.index<0&&(null==t.materials&&(t.materials=[]),o.index=t.materials.length,t.materials.push(r)),s.name=r.name,i.set(s,{materials:o.index}));for(const[s,a]of i){a&&(s.userData=s.userData||{},s.userData.associations=a);for(const e in a)if(null!=e&&"primitives"!==e){const i=e,r=(t[i]||[])[a[i]];if(null==r)continue;let o=n.get(r);null==o&&(o=new Set,n.set(r,o)),o.add(s)}}return new GS(e,t,i,n)}static[$S](e,t){const i=t.threeGLTF,n=t.gltf,r=JSON.parse(JSON.stringify(n)),o=new Map,s=new Map;for(let a=0;a<i.scenes.length;a++)this[HS](i.scenes[a],e.scenes[a],((e,i)=>{const n=t.threeObjectMap.get(e);if(null!=n)for(const t in n)if(null!=t&&"primitives"!==t){const e=t,a=n[e],l=r[e][a],c=o.get(i)||{};c[e]=a,o.set(i,c);const u=s.get(l)||new Set;u.add(i),s.set(l,u)}}));return new GS(e,r,o,s)}static[HS](e,t,i){const n=(e,t)=>{if(i(e,t),e.isObject3D){const r=e,o=t;if(r.material)if(Array.isArray(r.material))for(let e=0;e<r.material.length;++e)i(r.material[e],o.material[e]);else i(r.material,o.material);for(let i=0;i<e.children.length;++i)n(e.children[i],t.children[i])}};n(e,t)}get threeGLTF(){return this[FS]}get gltf(){return this[NS]}get gltfElementMap(){return this[zS]}get threeObjectMap(){return this[US]}}const QS=Symbol("correlatedSceneGraph");class jS extends DS{static[BS](e){const t=super[BS](e);null==t[QS]&&(t[QS]=GS.from(t));const{scene:i}=t,n=new or(void 0,1/0);return i.traverse((e=>{e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);const i=e;if(i.material){const{geometry:e}=i;i.castShadow=!0,i.isSkinnedMesh&&(e.boundingSphere=n,e.boundingBox=null);const r=i.material;if(!0===r.isMeshBasicMaterial&&(r.toneMapped=!1),r.shadowSide=_,r.aoMap){const{gltf:i,threeObjectMap:n}=t[QS],o=n.get(r);if(null!=i.materials&&null!=o&&null!=o.materials){const t=i.materials[o.materials];t.occlusionTexture&&0===t.occlusionTexture.texCoord&&null!=e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv)}}}})),t}get correlatedSceneGraph(){return this[RS][QS]}[PS](){const e=super[PS](),t=new Map;return e.scene.traverse((e=>{const i=e;if(i.material){const e=i.material;if(null!=e){if(t.has(e.uuid))return void(i.material=t.get(e.uuid));i.material=e.clone(),t.set(e.uuid,i.material)}}const n=e;void 0!==n.target&&n.add(n.target)})),e[QS]=GS.from(e,this.correlatedSceneGraph),e}}const qS=(e,t,i)=>{let n;switch(e){case Re:n=new Uint8ClampedArray(t*i*4);break;case ze:n=new Uint16Array(t*i*4);break;case Fe:n=new Uint32Array(t*i*4);break;case Pe:n=new Int8Array(t*i*4);break;case De:n=new Int16Array(t*i*4);break;case Oe:n=new Int32Array(t*i*4);break;case Ne:n=new Float32Array(t*i*4);break;default:throw new Error("Unsupported data type")}return n};let WS;class XS{constructor(e){var t,i,n,r,o,s,a,l,c,u,h,d,p,f,g,m;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(hse){throw this._renderer.setRenderTarget(null),hse}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const _={format:je,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(i=e.renderTargetOptions)||void 0===i?void 0:i.anisotropy:1,generateMipmaps:void 0!==(null===(n=e.renderTargetOptions)||void 0===n?void 0:n.generateMipmaps)&&(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps),magFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter)?null===(s=e.renderTargetOptions)||void 0===s?void 0:s.magFilter:Te,minFilter:void 0!==(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.minFilter)?null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter:Te,samples:void 0!==(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.samples:void 0,wrapS:void 0!==(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS)?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.wrapS:be,wrapT:void 0!==(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)?null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapT:be};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=XS.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new dc,this._camera=new Ps,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,i,n)=>{if(void 0!==WS)return WS;const r=new Rn(1,1,n);t.setRenderTarget(r);const o=new Wo(new bs,new uo({color:16777215}));t.render(o,i),t.setRenderTarget(null);const s=qS(e,r.width,r.height);return t.readRenderTargetPixels(r,0,0,r.width,r.height,s),r.dispose(),o.geometry.dispose(),o.material.dispose(),WS=0!==s[0],WS})(this._type,this._renderer,this._camera,_)){let e;if(this._type===ze)e=this._renderer.extensions.has("EXT_color_buffer_float")?Ne:void 0;void 0!==e?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ne}`),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Wo(new bs,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Rn(this.width,this.height,_),this._renderTarget.texture.mapping=void 0!==(null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping)?null===(m=e.renderTargetOptions)||void 0===m?void 0:m.mapping:pe}static instantiateRenderer(){const e=new cc;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=qS(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new jc(this.toArray(),this.width,this.height,je,this._type,(null===e||void 0===e?void 0:e.mapping)||pe,(null===e||void 0===e?void 0:e.wrapS)||be,(null===e||void 0===e?void 0:e.wrapT)||be,(null===e||void 0===e?void 0:e.magFilter)||Te,(null===e||void 0===e?void 0:e.minFilter)||Te,(null===e||void 0===e?void 0:e.anisotropy)||1,ni);return t.generateMipmaps=void 0!==(null===e||void 0===e?void 0:e.generateMipmaps)&&(null===e||void 0===e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ts&&Object.values(this.material.uniforms).forEach((e=>{e.value instanceof Mn&&e.value.dispose()})),Object.values(this.material).forEach((e=>{e instanceof Mn&&e.dispose()})),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class YS extends ts{constructor(e){let{gamma:t,offsetHdr:i,offsetSdr:n,gainMapMin:r,gainMapMax:o,maxDisplayBoost:s,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}=e;super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new Nn(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:(new Nn).fromArray(i)},offsetSdr:{value:(new Nn).fromArray(n)},gainMapMin:{value:(new Nn).fromArray(r)},gainMapMax:{value:(new Nn).fromArray(o)},weightFactor:{value:(Math.log2(s)-a)/(l-a)}},blending:b,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class KS extends Error{}class ZS extends Error{}const JS=(e,t,i)=>{var n;let r;const o=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.nodeValue;if(o)r=o;else{const n=e.getElementsByTagName(t)[0];if(!n){if(i)return i;throw new Error(`Can't find ${t} in gainmap metadata`)}{const e=n.getElementsByTagName("rdf:li");if(3!==e.length)throw new Error(`Gainmap metadata contains an array of items for ${t} but its length is not 3`);r=Array.from(e).map((e=>e.innerHTML))}}return r};class eC{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise(((t,i)=>{const n=this.options.debug,r=new DataView(e.buffer);if(65496!==r.getUint16(0))return void i(new Error("Not a valid jpeg"));const o=r.byteLength;let s,a=2,l=0;for(;a<o;){if(++l>250)return void i(new Error(`Found no marker after ${l} loops \ud83d\ude35`));if(255!==r.getUint8(a))return void i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${r.getUint8(a).toString(16)}`));if(s=r.getUint8(a+1),n&&console.log(`Marker: ${s.toString(16)}`),226===s){n&&console.log("Found APP2 marker (0xffe2)");const e=a+4;if(1297106432===r.getUint32(e)){const n=e+4;let o;if(18761===r.getUint16(n))o=!1;else{if(19789!==r.getUint16(n))return void i(new Error("No valid endianness marker found in TIFF header"));o=!0}if(42!==r.getUint16(n+2,!o))return void i(new Error("Not valid TIFF data! (no 0x002A marker)"));const s=r.getUint32(n+4,!o);if(s<8)return void i(new Error("Not valid TIFF data! (First offset less than 8)"));const a=n+s,l=r.getUint16(a,!o),c=a+2;let u=0;for(let e=c;e<c+12*l;e+=12)45057===r.getUint16(e,!o)&&(u=r.getUint32(e+8,!o));const h=a+2+12*l+4,d=[];for(let e=h;e<h+16*u;e+=16){const t={MPType:r.getUint32(e,!o),size:r.getUint32(e+4,!o),dataOffset:r.getUint32(e+8,!o),dependantImages:r.getUint32(e+12,!o),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=n+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,d.push(t)}if(this.options.extractNonFII&&d.length){const e=new Blob([r]),i=[];for(const t of d){if(t.isFII&&!this.options.extractFII)continue;const n=e.slice(t.start,t.end+1,"image/jpeg");i.push(n)}t(i)}}}a+=2+r.getUint16(a+2)}}))}}const tC=async e=>{const t=(e=>{var t,i;let n;n="undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let r=n.indexOf("<x:xmpmeta");const o=new DOMParser;for(;-1!==r;){const e=n.indexOf("x:xmpmeta>",r);n.slice(r,e+10);const s=n.slice(r,e+10);try{const e=o.parseFromString(s,"text/xml").getElementsByTagName("rdf:Description")[0],n=JS(e,"hdrgm:GainMapMin","0"),r=JS(e,"hdrgm:GainMapMax"),a=JS(e,"hdrgm:Gamma","1"),l=JS(e,"hdrgm:OffsetSDR","0.015625"),c=JS(e,"hdrgm:OffsetHDR","0.015625");let u=null===(t=e.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===t?void 0:t.nodeValue;u||(u="0");const h=null===(i=e.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===i?void 0:i.nodeValue;if(!h)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(n)?n.map((e=>parseFloat(e))):[parseFloat(n),parseFloat(n),parseFloat(n)],gainMapMax:Array.isArray(r)?r.map((e=>parseFloat(e))):[parseFloat(r),parseFloat(r),parseFloat(r)],gamma:Array.isArray(a)?a.map((e=>parseFloat(e))):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map((e=>parseFloat(e))):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map((e=>parseFloat(e))):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(u),hdrCapacityMax:parseFloat(h)}}catch(hse){}r=n.indexOf("<x:xmpmeta",e)}})(e);if(!t)throw new ZS("Gain map XMP metadata not found");const i=new eC({extractFII:!0,extractNonFII:!0}),n=await i.extract(e);if(2!==n.length)throw new KS("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:t}},iC=e=>new Promise(((t,i)=>{const n=document.createElement("img");n.onload=()=>{t(n)},n.onerror=e=>{i(e)},n.src=URL.createObjectURL(e)}));class nC extends Jd{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Kd}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new YS({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Mn,sdr:new Mn});return new XS({width:16,height:16,type:ze,colorSpace:ni,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,n){const r=n?new Blob([n],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let s,a,l=!1;if("undefined"===typeof createImageBitmap){const e=await Promise.all([r?iC(r):Promise.resolve(void 0),iC(o)]);a=e[0],s=e[1],l=!0}else{const e=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);a=e[0],s=e[1]}const c=new Mn(a||new ImageData(2,2),pe,be,be,Te,Be,je,Re,1,ni);c.flipY=l,c.needsUpdate=!0;const u=new Mn(s,pe,be,be,Te,Be,je,Re,1,ii);u.flipY=l,u.needsUpdate=!0,e.width=s.width,e.height=s.height,e.material.gainMap=c,e.material.sdr=u,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class rC extends nC{load(e,t,i,n){const r=this.prepareQuadRenderer(),o=new ip(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,(async i=>{if("string"===typeof i)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const o=new Uint8Array(i);let s,a,l;try{const e=await tC(o);s=e.sdr,a=e.gainMap,l=e.metadata}catch(hse){if(!(hse instanceof ZS||hse instanceof KS))throw hse;console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},s=o}try{await this.render(r,l,s,a)}catch(c){return this.manager.itemError(e),"function"===typeof n&&n(c),void r.disposeOnDemandRenderer()}"function"===typeof t&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()}),i,(t=>{this.manager.itemError(e),"function"===typeof n&&n(t)})),r}}class oC extends ap{constructor(e){super(e),this.type=ze}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},i=function(e,t,i){t=t||1024;let n=e.pos,r=-1,o=0,s="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(r=a.indexOf("\n"))&&o<t&&n<e.byteLength;)s+=a,o+=a.length,n+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<r&&(!1!==i&&(e.pos+=o+r+1),s+a.slice(0,r))},n=function(e,t,i,n){const r=e[t+3],o=Math.pow(2,r-128)/255;i[n+0]=e[t+0]*o,i[n+1]=e[t+1]*o,i[n+2]=e[t+2]*o,i[n+3]=1},r=function(e,t,i,n){const r=e[t+3],o=Math.pow(2,r-128)/255;i[n+0]=mo.toHalfFloat(Math.min(e[t+0]*o,65504)),i[n+1]=mo.toHalfFloat(Math.min(e[t+1]*o,65504)),i[n+2]=mo.toHalfFloat(Math.min(e[t+2]*o,65504)),i[n+3]=mo.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const s=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=i(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),a.valid|=1,a.programtype=c[1],a.string+=l+"\n";l=i(e),!1!==l;)if(a.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(n))&&(a.gamma=parseFloat(c[1])),(c=l.match(r))&&(a.exposure=parseFloat(c[1])),(c=l.match(o))&&(a.valid|=2,a.format=c[1]),(c=l.match(s))&&(a.valid|=4,a.height=parseInt(c[1],10),a.width=parseInt(c[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=l+"\n";return 2&a.valid||t(3,"missing format specifier"),4&a.valid||t(3,"missing image size specifier"),a}(o),a=s.width,l=s.height,c=function(e,i,n){const r=i;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);r!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const o=new Uint8Array(4*i*n);o.length||t(4,"unable to allocate buffer space");let s=0,a=0;const l=4*r,c=new Uint8Array(4),u=new Uint8Array(l);let h=n;for(;h>0&&a<e.byteLength;){a+4>e.byteLength&&t(1),c[0]=e[a++],c[1]=e[a++],c[2]=e[a++],c[3]=e[a++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==r||t(3,"bad rgbe scanline format");let i,n=0;for(;n<l&&a<e.byteLength;){i=e[a++];const r=i>128;if(r&&(i-=128),(0===i||n+i>l)&&t(3,"bad scanline data"),r){const t=e[a++];for(let e=0;e<i;e++)u[n++]=t}else u.set(e.subarray(a,a+i),n),n+=i,a+=i}const d=r;for(let e=0;e<d;e++){let t=0;o[s]=u[e+t],t+=r,o[s+1]=u[e+t],t+=r,o[s+2]=u[e+t],t+=r,o[s+3]=u[e+t],s+=4}h--}return o}(o.subarray(o.pos),a,l);let u,h,d;switch(this.type){case Ne:d=c.length/4;const e=new Float32Array(4*d);for(let i=0;i<d;i++)n(c,4*i,e,4*i);u=e,h=Ne;break;case ze:d=c.length/4;const t=new Uint16Array(4*d);for(let i=0;i<d;i++)r(c,4*i,t,4*i);u=t,h=ze;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:a,height:l,data:u,header:s.string,gamma:s.gamma,exposure:s.exposure,type:h}}setDataType(e){return this.type=e,this}load(e,t,i,n){return super.load(e,(function(e,i){switch(e.type){case Ne:case ze:e.colorSpace=ni,e.minFilter=Te,e.magFilter=Te,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)}),i,n)}}const sC={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},aC={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class lC extends dc{constructor(e){super(),this.position.y=-3.5;const t=new Yo;t.deleteAttribute("uv");const i=new wd({metalness:0,side:v}),n=new wd({metalness:0}),r="legacy"==e?sC:aC,o=new Ap(16777215,r.topLight.intensity,28,2);o.position.set(...r.topLight.position),this.add(o);const s=new Wo(t,i);s.position.set(...r.room.position),s.scale.set(...r.room.scale),this.add(s);for(const a of r.boxes){const e=new Wo(t,n);e.position.set(...a.position),e.rotation.set(0,a.rotation,0),e.scale.set(...a.scale),this.add(e)}for(const a of r.lights){const e=new Wo(t,this.createAreaLightMaterial(a.intensity));e.position.set(...a.position),e.scale.set(...a.scale),this.add(e)}}createAreaLightMaterial(e){const t=new uo;return t.color.setScalar(e),t}}const cC=20,uC=/\.hdr(\.js)?$/;class hC{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return null==this._ldrLoader&&(this._ldrLoader=new lp),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return null==this._imageLoader&&(this._imageLoader=new rC(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return null==this._hdrLoader&&(this._hdrLoader=new oC,this._hdrLoader.setDataType(ze)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(null==this._lottieLoader){const{LottieLoader:e}=await import(this.lottieLoaderUrl);this._lottieLoader=new e}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const i=await new Promise(((i,n)=>this.ldrLoader(t).load(e,i,(()=>{}),n)));return i.name=e,i.flipY=!1,i}async loadLottie(e,t,i){const n=await this.getLottieLoader(i);n.setQuality(t);const r=await new Promise(((t,i)=>n.load(e,t,(()=>{}),i)));return r.name=e,r}async loadEquirect(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{const n=uC.test(e),r=n?this.hdrLoader(t):this.imageLoader(t),o=await new Promise(((t,n)=>r.load(e,(e=>{const{renderTarget:i}=e;if(null!=i){const{texture:n}=i;e.dispose(!1),t(n)}else t(e)}),(e=>{i(e.loaded/e.total*.9)}),n)));return i(1),o.name=e,o.mapping=me,n||(o.colorSpace=ii),o}finally{i&&i(1)}}async generateEnvironmentMapAndSkybox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="legacy"!==t;"legacy"!==t&&"neutral"!==t||(t=null),t=Iy(t);let o,s=Promise.resolve(null);e&&(s=this.loadEquirectFromUrl(e,n,i)),o=t?this.loadEquirectFromUrl(t,n,i):e?this.loadEquirectFromUrl(e,n,i):r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[a,l]=await Promise.all([o,s]);if(null==a)throw new Error("Failed to load environment map.");return{environmentMap:a,skybox:l}}async loadEquirectFromUrl(e,t,i){if(!this.skyboxCache.has(e)){const n=this.loadEquirect(e,t,i);this.skyboxCache.set(e,n)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>setTimeout(t,e)))}();const i=this.threeRenderer,n=new us(256,{generateMipmaps:!1,type:ze,format:je,colorSpace:ni,depthBuffer:!0}),r=new ls(.1,100,n),o=r.renderTarget.texture;o.name=t;const s=i.outputColorSpace,a=i.toneMapping;return i.toneMapping=ne,i.outputColorSpace=ni,r.update(i,e),this.blurCubemap(n,.04),i.toneMapping=a,i.outputColorSpace=s,o}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new lC("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new lC("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(cC);const e=new Yo,t=new Wo(e,this.blurMaterial);this.blurScene=new dc,this.blurScene.add(t)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,n){const r=e.width,o=isFinite(i)?Math.PI/(2*r):2*Math.PI/39,s=i/o,a=isFinite(i)?1+Math.floor(3*s):cC;a>cC&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${a} samples when the maximum is set to 20`);const l=[];let c=0;for(let h=0;h<cC;++h){const e=h/s,t=Math.exp(-e*e/2);l.push(t),0==h?c+=t:h<a&&(c+=2*t)}for(let h=0;h<l.length;h++)l[h]=l[h]/c;const u=this.blurMaterial.uniforms;u.envMap.value=e.texture,u.samples.value=a,u.weights.value=l,u.latitudinal.value="latitudinal"===n,u.dTheta.value=o;new ls(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new Nn(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:b,depthTest:!1,depthWrite:!1,side:v})}async dispose(){for(const[,e]of this.skyboxCache){(await e).dispose()}null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}}const dC=[1,.79,.62,.5,.4,.31,.25],pC="high-performance";class fC extends qi{constructor(e){super(),this.loader=new Qb(jS),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=e=>{this.dispatchEvent({type:"contextlost",sourceEvent:e})},this.onWebGLContextRestored=()=>{var e;null===(e=this.textureUtils)||void 0===e||e.dispose(),this.textureUtils=new hC(this.threeRenderer);for(const t of this.scenes)t.element[Fy]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new cc({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=ae}catch(t){console.warn(t)}this.arRenderer=new TS(this),this.textureUtils=this.canRender?new hC(this.threeRenderer):null,Qb.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton||(this._singleton=new fC({powerPreference:(self.ModelViewerElement||{}).powerPreference||pC,debug:Py()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new fC({powerPreference:(self.ModelViewerElement||{}).powerPreference||pC,debug:Py()});for(const t of e)t.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return dC[this.scaleStep]}set minScale(e){let t=1;for(;t<dC.length&&!(dC[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new sn;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop(((e,t)=>this.render(e,t)))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[rI]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:n}=r;n.modelIsVisible&&null==r.externalRenderer&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const n=t>1;if(null!=i){const t=n&&!this.multipleScenesVisible,r=!i.element.modelIsVisible;if(t||r){const{width:t,height:n}=this.sceneSize(i);this.copyPixels(i,t,n),e.parentElement.removeChild(e)}}this.multipleScenesVisible=n}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const r of this.scenes){const{element:e}=r;e[QT](e.getBoundingClientRect())}let i=0,n=0;for(const r of this.scenes)i=Math.max(i,r.width),n=Math.max(n,r.height);if(i!==this.width||n!==this.height||t!==this.dpr){this.width=i,this.height=n,this.dpr=t,i=Math.ceil(i*t),n=Math.ceil(n*t),this.canRender&&this.threeRenderer.setSize(i,n,!1);for(const t of this.scenes){const{canvas:r}=t;r.width=i,r.height=n,t.forceRescale(),null===(e=t.effectRenderer)||void 0===e||e.setSize(i,n)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Ry(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(0==e.scaleStep)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}rescaleCanvas(e){const t=dC[e.scaleStep],i=Math.ceil(this.width/t),n=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${n}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${n}px`;const o=this.dpr*t,s=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:o,minimumDpr:this.dpr*dC[this.lastStep],pixelWidth:Math.ceil(e.width*o),pixelHeight:Math.ceil(e.height*o),reason:s}}))}sceneSize(e){const{dpr:t}=this,i=dC[e.scaleStep];return{width:Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*i*t),this.canvas3D.height)}}copyPixels(e,t,i){const n=e.context;null!=n?(n.clearRect(0,0,t,i),n.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")):console.log("could not acquire 2d context")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:n,exposure:r,toneMapping:o}=e;n[aI](t,i);const s="number"===typeof r&&!Number.isNaN(r),a=n.environmentImage,l=n.skyboxImage,c=o===ue&&("neutral"===a||"legacy"===a||!a&&!l);this.threeRenderer.toneMappingExposure=(s?r:1)*(c?1.3:1)}render(e,t){if(null!=t)return void this.arRenderer.onWebXRFrame(e,t);const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:n}=this;for(const r of this.orderedScenes()){const{element:t}=r;if(!t.loaded||!t.modelIsVisible&&r.renderCount>0)continue;if(this.preRender(r,e,i),!this.shouldRender(r))continue;if(null!=r.externalRenderer){const e=r.getCamera();e.updateMatrix();const{matrix:t,projectionMatrix:i}=e,n=t.elements.slice(),o=r.getTarget();n[12]+=o.x,n[13]+=o.y,n[14]+=o.z,r.externalRenderer.render({viewMatrix:n,projectionMatrix:i.elements});continue}if(!t.modelIsVisible&&!this.multipleScenesVisible)for(const e of this.scenes)e.element.modelIsVisible&&e.queueRender();const{width:o,height:s}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-s,o,s),null!=r.effectRenderer?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&0===r.renderCount?this.copyPixels(r,o,s):n.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(n),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}const gC=Symbol("correlatedObjects"),mC=Symbol("onUpdate");class _C{constructor(e,t){this[mC]=e,this[gC]=t}}const vC=new uo,yC=new bs(2,2);let bC=0;const AC=Symbol("threeTexture"),wC=Symbol("threeTextures");Symbol("applyTexture");class xC extends _C{get[AC](){var e;return null===(e=this[gC])||void 0===e?void 0:e.values().next().value}get[wC](){return this[gC]}constructor(e,t){super(e,new Set(t?[t]:[])),this[AC].image.src||(this[AC].image.src=t.name?t.name:"adhoc_image"+bC++),this[AC].image.name||(this[AC].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[AC].image.name||""}get uri(){return this[AC].image.src}get bufferView(){return this[AC].image.bufferView}get element(){const e=this[AC];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[AC];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return null!=this.uri?"external":"embedded"}set name(e){for(const t of this[wC])t.image.name=e}update(){const e=this[AC];e&&e.isCanvasTexture&&!e.animation&&(this[AC].needsUpdate=!0,this[mC]())}async createThumbnail(e,t){const i=new dc;vC.map=this[AC];const n=new Wo(yC,vC);i.add(n);const r=new Ps(-1,1,1,-1,0,1),{threeRenderer:o}=fC.singleton,s=new Rn(e,t);o.setRenderTarget(s),o.render(i,r),o.setRenderTarget(null);const a=new Uint8Array(e*t*4);o.readRenderTargetPixels(s,0,0,e,t,a),LT.width=e,LT.height=t;const l=LT.getContext("2d"),c=l.createImageData(e,t);return c.data.set(a),l.putImageData(c,0,0),new Promise((async(e,t)=>{LT.toBlob((i=>{if(!i)return t("Failed to capture thumbnail.");e(URL.createObjectURL(i))}),"image/png")}))}}var SC,CC;!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.NearestMipmapNearest=9984]="NearestMipmapNearest",e[e.LinearMipmapNearest=9985]="LinearMipmapNearest",e[e.NearestMipmapLinear=9986]="NearestMipmapLinear",e[e.LinearMipmapLinear=9987]="LinearMipmapLinear"}(SC||(SC={})),function(e){e[e.ClampToEdge=33071]="ClampToEdge",e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.Repeat=10497]="Repeat"}(CC||(CC={}));const EC=new Map([[CC.Repeat,ye],[CC.ClampToEdge,be],[CC.MirroredRepeat,Ae]]),TC=new Map([[ye,CC.Repeat],[be,CC.ClampToEdge],[Ae,CC.MirroredRepeat]]),IC=new Map([[SC.Nearest,we],[SC.Linear,Te],[SC.NearestMipmapNearest,xe],[SC.LinearMipmapNearest,Ie],[SC.NearestMipmapLinear,Ce],[SC.LinearMipmapLinear,ke]]),MC=new Map([[we,SC.Nearest],[Te,SC.Linear],[xe,SC.NearestMipmapNearest],[Ie,SC.LinearMipmapNearest],[Ce,SC.NearestMipmapLinear],[ke,SC.LinearMipmapLinear]]),kC=new Map([[SC.Nearest,we],[SC.Linear,Te]]),BC=new Map([[we,SC.Nearest],[Te,SC.Linear]]),RC=e=>MC.has(e),PC=e=>BC.has(e),DC=e=>TC.has(e),LC=Symbol("threeTexture"),OC=Symbol("threeTextures"),FC=Symbol("setProperty");class NC extends _C{get[LC](){var e;return null===(e=this[gC])||void 0===e?void 0:e.values().next().value}get[OC](){return this[gC]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[LC].name||""}get minFilter(){return MC.get(this[LC].minFilter)}get magFilter(){return BC.get(this[LC].magFilter)}get wrapS(){return TC.get(this[LC].wrapS)}get wrapT(){return TC.get(this[LC].wrapT)}get rotation(){return this[LC].rotation}get scale(){return mI(this[LC].repeat)}get offset(){return mI(this[LC].offset)}setMinFilter(e){this[FC]("minFilter",IC.get(e))}setMagFilter(e){this[FC]("magFilter",kC.get(e))}setWrapS(e){this[FC]("wrapS",EC.get(e))}setWrapT(e){this[FC]("wrapT",EC.get(e))}setRotation(e){null==e&&(e=0),this[FC]("rotation",e)}setScale(e){null==e&&(e={u:1,v:1}),this[FC]("repeat",new sn(e.u,e.v))}setOffset(e){null==e&&(e={u:0,v:0}),this[FC]("offset",new sn(e.u,e.v))}[FC](e,t){if(((e,t)=>{switch(e){case"minFilter":return RC(t);case"magFilter":return PC(t);case"wrapS":case"wrapT":return DC(t);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${e}" on Sampler`)}})(e,t))for(const i of this[OC])i[e]=t,i.needsUpdate=!0;this[mC]()}}const zC=Symbol("image"),UC=Symbol("sampler"),HC=Symbol("threeTexture");class VC extends _C{constructor(e,t){super(e,new Set(t?[t]:[])),this[UC]=new NC(e,t),this[zC]=new xC(e,t)}get[HC](){var e;return null===(e=this[gC])||void 0===e?void 0:e.values().next().value}get name(){return this[HC].name||""}set name(e){for(const t of this[gC])t.name=e}get sampler(){return this[UC]}get source(){return this[zC]}}var $C,GC,QC;const jC=Symbol("texture"),qC=Symbol("transform"),WC=Symbol("materials"),XC=Symbol("usage"),YC=Symbol("onUpdate"),KC=Symbol("activeVideo");var ZC;!function(e){e[e.Base=0]="Base",e[e.MetallicRoughness=1]="MetallicRoughness",e[e.Normal=2]="Normal",e[e.Occlusion=3]="Occlusion",e[e.Emissive=4]="Emissive",e[e.Clearcoat=5]="Clearcoat",e[e.ClearcoatRoughness=6]="ClearcoatRoughness",e[e.ClearcoatNormal=7]="ClearcoatNormal",e[e.SheenColor=8]="SheenColor",e[e.SheenRoughness=9]="SheenRoughness",e[e.Transmission=10]="Transmission",e[e.Thickness=11]="Thickness",e[e.Specular=12]="Specular",e[e.SpecularColor=13]="SpecularColor",e[e.Iridescence=14]="Iridescence",e[e.IridescenceThickness=15]="IridescenceThickness",e[e.Anisotropy=16]="Anisotropy"}(ZC||(ZC={}));class JC{constructor(e,t,i,n){this[$C]=null,this[GC]={rotation:0,scale:new sn(1,1),offset:new sn(0,0)},this[QC]=!1,i&&(this[qC].rotation=i.rotation,this[qC].scale.copy(i.repeat),this[qC].offset.copy(i.offset),this[jC]=new VC(e,i)),this[YC]=e,this[WC]=n,this[XC]=t}get texture(){return this[jC]}setTexture(e){var t,i;const n=null!=e?e.source[AC]:null,r=null===(t=this[jC])||void 0===t?void 0:t.source[AC];if(null!=r&&r.isVideoTexture?this[KC]=!1:(null===(i=this[jC])||void 0===i?void 0:i.source.animation)&&this[jC].source.animation.removeEventListener("enterFrame",this[YC]),this[jC]=e,null!=n&&n.isVideoTexture){const e=n.image;if(this[KC]=!0,null!=e.requestVideoFrameCallback){const t=()=>{this[KC]&&(this[YC](),e.requestVideoFrameCallback(t))};e.requestVideoFrameCallback(t)}else{const e=()=>{this[KC]&&(this[YC](),requestAnimationFrame(e))};requestAnimationFrame(e)}}else null!=(null===e||void 0===e?void 0:e.source.animation)&&e.source.animation.addEventListener("enterFrame",this[YC]);let o=ii;if(this[WC])for(const s of this[WC]){switch(this[XC]){case ZC.Base:s.map=n;break;case ZC.MetallicRoughness:o=ni,s.metalnessMap=n,s.roughnessMap=n;break;case ZC.Normal:o=ni,s.normalMap=n;break;case ZC.Occlusion:o=ni,s.aoMap=n;break;case ZC.Emissive:s.emissiveMap=n;break;case ZC.Clearcoat:s.clearcoatMap=n;break;case ZC.ClearcoatRoughness:s.clearcoatRoughnessMap=n;break;case ZC.ClearcoatNormal:s.clearcoatNormalMap=n;break;case ZC.SheenColor:s.sheenColorMap=n;break;case ZC.SheenRoughness:s.sheenRoughnessMap=n;break;case ZC.Transmission:s.transmissionMap=n;break;case ZC.Thickness:s.thicknessMap=n;break;case ZC.Specular:s.specularIntensityMap=n;break;case ZC.SpecularColor:s.specularColorMap=n;break;case ZC.Iridescence:s.iridescenceMap=n;break;case ZC.IridescenceThickness:s.iridescenceThicknessMap=n;break;case ZC.Anisotropy:s.anisotropyMap=n}s.needsUpdate=!0}n&&(n.colorSpace=o,n.rotation=this[qC].rotation,n.repeat=this[qC].scale,n.offset=this[qC].offset),this[YC]()}}$C=jC,GC=qC,QC=KC;const eE=Symbol("threeMaterial"),tE=Symbol("threeMaterials"),iE=Symbol("baseColorTexture"),nE=Symbol("metallicRoughnessTexture");class rE extends _C{constructor(e,t){super(e,t);const{map:i,metalnessMap:n}=t.values().next().value;this[iE]=new JC(e,ZC.Base,i,t),this[nE]=new JC(e,ZC.MetallicRoughness,n,t)}get[tE](){return this[gC]}get[eE](){var e;return null===(e=this[gC])||void 0===e?void 0:e.values().next().value}get baseColorFactor(){const e=[0,0,0,this[eE].opacity];return this[eE].color.toArray(e),e}get metallicFactor(){return this[eE].metalness}get roughnessFactor(){return this[eE].roughness}get baseColorTexture(){return this[iE]}get metallicRoughnessTexture(){return this[nE]}setBaseColorFactor(e){const t=new so;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[tE])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[mC]()}setMetallicFactor(e){for(const t of this[tE])t.metalness=e;this[mC]()}setRoughnessFactor(e){for(const t of this[tE])t.roughness=e;this[mC]()}}var oE,sE;const aE=Symbol("pbrMetallicRoughness"),lE=Symbol("normalTexture"),cE=Symbol("occlusionTexture"),uE=Symbol("emissiveTexture"),hE=Symbol("backingThreeMaterial"),dE=Symbol("applyAlphaCutoff"),pE=Symbol("getAlphaMode"),fE=Symbol("lazyLoadGLTFInfo"),gE=Symbol("initialize"),mE=Symbol("getLoadedMaterial"),_E=Symbol("ensureMaterialIsLoaded"),vE=Symbol("gltfIndex"),yE=Symbol("setActive"),bE=Symbol("variantIndices"),AE=Symbol("isActive"),wE=Symbol("modelVariants"),xE=Symbol("name"),SE=Symbol("pbrTextures");class CE extends _C{constructor(e,t,i,n,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;super(e,r),this[oE]=new Set,this[sE]=new Map,this[vE]=t,this[AE]=i,this[wE]=n,this[xE]=o,null==s?this[gE]():this[fE]=s}get[(oE=bE,sE=SE,hE)](){return this[gC].values().next().value}[gE](){const e=this[mC],t=this[gC];this[aE]=new rE(e,t);const{normalMap:i,aoMap:n,emissiveMap:r}=t.values().next().value;this[lE]=new JC(e,ZC.Normal,i,t),this[cE]=new JC(e,ZC.Occlusion,n,t),this[uE]=new JC(e,ZC.Emissive,r,t);const o=i=>{this[SE].set(i,new JC(e,i,null,t))};o(ZC.Clearcoat),o(ZC.ClearcoatRoughness),o(ZC.ClearcoatNormal),o(ZC.SheenColor),o(ZC.SheenRoughness),o(ZC.Transmission),o(ZC.Thickness),o(ZC.Specular),o(ZC.SpecularColor),o(ZC.Iridescence),o(ZC.IridescenceThickness),o(ZC.Anisotropy)}async[mE](){if(null!=this[fE]){const e=await this[fE].doLazyLoad();return this[gE](),this[fE]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new so;return e instanceof Array?t.fromArray(e):t.set(e),t}[_E](){if(null!=this[fE])throw new Error(`Material "${this.name}" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[mE]()}get isLoaded(){return null==this[fE]}get isActive(){return this[AE]}[yE](e){this[AE]=e}get name(){return this[xE]||""}set name(e){if(this[xE]=e,null!=this[gC])for(const t of this[gC])t.name=e}get pbrMetallicRoughness(){return this[_E](),this[aE]}get normalTexture(){return this[_E](),this[lE]}get occlusionTexture(){return this[_E](),this[cE]}get emissiveTexture(){return this[_E](),this[uE]}get emissiveFactor(){return this[_E](),this[hE].emissive.toArray()}get index(){return this[vE]}hasVariant(e){const t=this[wE].get(e);return null!=t&&this[bE].has(t.index)}setEmissiveFactor(e){this[_E]();const t=this.colorFromRgb(e);for(const i of this[gC])i.emissive.set(t);this[mC]()}[pE](){return this[hE].transparent?"BLEND":this[hE].alphaTest>0?"MASK":"OPAQUE"}[dE](){this[_E]();for(const e of this[gC])"MASK"===this[pE]()?void 0==e.alphaTest&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[_E]();for(const t of this[gC])t.alphaTest=e,t.needsUpdate=!0;this[dE](),this[mC]()}getAlphaCutoff(){return this[_E](),this[hE].alphaTest}setDoubleSided(e){this[_E]();for(const t of this[gC])t.side=e?y:_,t.needsUpdate=!0;this[mC]()}getDoubleSided(){return this[_E](),this[hE].side==y}setAlphaMode(e){this[_E]();const t=(e,t)=>{e.transparent=t,e.depthWrite=!t};for(const i of this[gC])t(i,"BLEND"===e),i.alphaTest="MASK"===e?.5:void 0,i.needsUpdate=!0;this[mC]()}getAlphaMode(){return this[_E](),this[pE]()}get emissiveStrength(){return this[_E](),this[hE].emissiveIntensity}setEmissiveStrength(e){this[_E]();for(const t of this[gC])t.emissiveIntensity=e;this[mC]()}get clearcoatFactor(){return this[_E](),this[hE].clearcoat}get clearcoatRoughnessFactor(){return this[_E](),this[hE].clearcoatRoughness}get clearcoatTexture(){return this[_E](),this[SE].get(ZC.Clearcoat)}get clearcoatRoughnessTexture(){return this[_E](),this[SE].get(ZC.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[_E](),this[SE].get(ZC.ClearcoatNormal)}get clearcoatNormalScale(){return this[_E](),this[hE].clearcoatNormalScale.x}setClearcoatFactor(e){this[_E]();for(const t of this[gC])t.clearcoat=e;this[mC]()}setClearcoatRoughnessFactor(e){this[_E]();for(const t of this[gC])t.clearcoatRoughness=e;this[mC]()}setClearcoatNormalScale(e){this[_E]();for(const t of this[gC])t.clearcoatNormalScale=new sn(e,e);this[mC]()}get ior(){return this[_E](),this[hE].ior}setIor(e){this[_E]();for(const t of this[gC])t.ior=e;this[mC]()}get sheenColorFactor(){return this[_E](),this[hE].sheenColor.toArray()}get sheenColorTexture(){return this[_E](),this[SE].get(ZC.SheenColor)}get sheenRoughnessFactor(){return this[_E](),this[hE].sheenRoughness}get sheenRoughnessTexture(){return this[_E](),this[SE].get(ZC.SheenRoughness)}setSheenColorFactor(e){this[_E]();const t=this.colorFromRgb(e);for(const i of this[gC])i.sheenColor.set(t),i.sheen=1;this[mC]()}setSheenRoughnessFactor(e){this[_E]();for(const t of this[gC])t.sheenRoughness=e,t.sheen=1;this[mC]()}get transmissionFactor(){return this[_E](),this[hE].transmission}get transmissionTexture(){return this[_E](),this[SE].get(ZC.Transmission)}setTransmissionFactor(e){this[_E]();for(const t of this[gC])t.transmission=e;this[mC]()}get thicknessFactor(){return this[_E](),this[hE].thickness}get thicknessTexture(){return this[_E](),this[SE].get(ZC.Thickness)}get attenuationDistance(){return this[_E](),this[hE].attenuationDistance}get attenuationColor(){return this[_E](),this[hE].attenuationColor.toArray()}setThicknessFactor(e){this[_E]();for(const t of this[gC])t.thickness=e;this[mC]()}setAttenuationDistance(e){this[_E]();for(const t of this[gC])t.attenuationDistance=e;this[mC]()}setAttenuationColor(e){this[_E]();const t=this.colorFromRgb(e);for(const i of this[gC])i.attenuationColor.set(t);this[mC]()}get specularFactor(){return this[_E](),this[hE].specularIntensity}get specularTexture(){return this[_E](),this[SE].get(ZC.Specular)}get specularColorFactor(){return this[_E](),this[hE].specularColor.toArray()}get specularColorTexture(){return this[_E](),this[SE].get(ZC.SheenColor)}setSpecularFactor(e){this[_E]();for(const t of this[gC])t.specularIntensity=e;this[mC]()}setSpecularColorFactor(e){this[_E]();const t=this.colorFromRgb(e);for(const i of this[gC])i.specularColor.set(t);this[mC]()}get iridescenceFactor(){return this[_E](),this[hE].iridescence}get iridescenceTexture(){return this[_E](),this[SE].get(ZC.Iridescence)}get iridescenceIor(){return this[_E](),this[hE].iridescenceIOR}get iridescenceThicknessMinimum(){return this[_E](),this[hE].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[_E](),this[hE].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[_E](),this[SE].get(ZC.IridescenceThickness)}setIridescenceFactor(e){this[_E]();for(const t of this[gC])t.iridescence=e;this[mC]()}setIridescenceIor(e){this[_E]();for(const t of this[gC])t.iridescenceIOR=e;this[mC]()}setIridescenceThicknessMinimum(e){this[_E]();for(const t of this[gC])t.iridescenceThicknessRange[0]=e;this[mC]()}setIridescenceThicknessMaximum(e){this[_E]();for(const t of this[gC])t.iridescenceThicknessRange[1]=e;this[mC]()}get anisotropyStrength(){return this[_E](),this[hE].anisotropy}get anisotropyRotation(){return this[_E](),this[hE].anisotropyRotation}get anisotropyTexture(){return this[_E](),this[SE].get(ZC.Anisotropy)}setAnisotropyStrength(e){this[_E]();for(const t of this[gC])t.anisotropy=e;this[mC]()}setAnisotropyRotation(e){this[_E]();for(const t of this[gC])t.anisotropyRotation=e;this[mC]()}}class EE{constructor(e){this.name="",this.children=new Array,this.name=e}}class TE extends EE{constructor(e,t,i,n){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:o,threeObjectMap:s}=n;this.parser=o.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const a=s.get(e.material);null!=a.materials?this.initialMaterialIdx=this.activeMaterialIdx=a.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const l=e.userData.associations||{};if(null==l.meshes)return void console.error("Mesh is missing primitive index association");const c=((r.meshes||[])[l.meshes].primitives||[])[l.primitives];if(null!=c){if(null!=c.material)this.materials.set(c.material,t[c.material]);else{const e=t.findIndex((e=>"Default"===e.name));e>=0?this.materials.set(e,t[e]):console.warn("gltfPrimitive has no material!")}if(c.extensions&&c.extensions.KHR_materials_variants){const e=c.extensions.KHR_materials_variants,n=o.parser.json.extensions.KHR_materials_variants.variants;for(const r of e.mappings){const e=t[r.material];this.materials.set(r.material,e);for(const t of r.variants){const{name:r}=n[t];this.variantToMaterialMap.set(t,e),e[bE].add(t),i.has(r)||i.set(r,{name:r,index:t})}}}}else console.error("Mesh primitive definition is missing.")}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const i=t[gC],n=await t[mE]();this.mesh.material=null!=n?n:i.values().next().value,this.parser.assignFinalMaterial(this.mesh),i.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(null==e)return this.setActiveMaterial(this.initialMaterialIdx);if(null!=this.variantToMaterialMap&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(null!=this.variantToMaterialMap&&null!=e){const t=this.variantToMaterialMap.get(e);if(null!=t)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(null!=this.variantToMaterialMap)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(null!=t.material)continue;const i=await this.enableVariantHelper(e);null!=i&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const i=this.modelVariants.get(t).index;return e[bE].add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;null!=t&&t.delete(e)}}updateVariantUserData(e,t){t[bE].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map;this.mesh.userData.variantMaterials.set(e,{material:t[gC].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return null==t||!this.variantInfo.has(t.index)||(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1)}}var IE,ME,kE,BE,RE,PE;const DE=Symbol("materials"),LE=Symbol("hierarchy"),OE=Symbol("roots"),FE=Symbol("primitives"),NE=(Symbol("loadVariant"),Symbol("prepareVariantsForExport")),zE=Symbol("switchVariant"),UE=Symbol("materialFromPoint"),HE=Symbol("nodeFromPoint"),VE=Symbol("nodeFromIndex"),$E=Symbol("variantData"),GE=Symbol("availableVariants"),QE=Symbol("modelOnUpdate"),jE=Symbol("cloneMaterial");class qE{constructor(e,t,i,n){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=n}}class WE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};this[IE]=new Array,this[ME]=new Array,this[kE]=new Array,this[BE]=new Array,this[RE]=()=>{},this[PE]=new Map,this[QE]=t;const{gltf:i,threeGLTF:n,gltfElementMap:r}=e;for(const[a,l]of i.materials.entries()){const e=r.get(l);if(null!=e)this[DE].push(new CE(t,a,!0,this[$E],e,l.name));else{const e=(i.materials||[])[a],o=new Set;r.set(e,o);const s=async()=>{const e=await n.parser.getDependency("material",a);return o.add(e),e};this[DE].push(new CE(t,a,!1,this[$E],o,l.name,new qE(i,r,e,s)))}}const o=new Map,s=new Array;for(const a of n.scene.children)s.push(a);for(;s.length>0;){const t=s.pop();let i=null;t instanceof Wo?(i=new TE(t,this.materials,this[$E],e),this[FE].push(i)):i=new EE(t.name);const n=o.get(t);null!=n?n.children.push(i):this[OE].push(i),this[LE].push(i);for(const e of t.children)s.push(e),o.set(t,i)}}get materials(){return this[DE]}[(IE=DE,ME=LE,kE=OE,BE=FE,RE=QE,PE=$E,GE)](){const e=Array.from(this[$E].values());return e.sort(((e,t)=>e.index-t.index)),e.map((e=>e.name))}getMaterialByName(e){const t=this[DE].filter((t=>t.name===e));return t.length>0?t[0]:null}[VE](e,t){const i=this[LE].find((i=>{if(i instanceof TE){const{meshes:n,primitives:r}=i.mesh.userData.associations;if(n==e&&r==t)return!0}return!1}));return null==i?null:i}[HE](e){return this[LE].find((t=>{if(t instanceof TE){if(t.mesh===e.object)return!0}return!1}))}[UE](e){return this[HE](e).getActiveMaterial()}async[zE](e){for(const t of this[FE])await t.enableVariant(e);for(const t of this.materials)t[yE](!1);for(const t of this[FE])this.materials[t.getActiveMaterial().index][yE](!0)}async[NE](){const e=new Array;for(const t of this[FE])e.push(t.instantiateVariants());await Promise.all(e)}[jE](e,t){const i=this.materials[e];i.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");const n=i[gC],r=new Set;for(const[s,a]of n.entries()){const e=a.clone();e.name=t+(n.size>1?"_inst"+s:""),r.add(e)}const o=new CE(this[QE],this[DE].length,!1,this[$E],r,t);return this[DE].push(o),o}createMaterialInstanceForVariant(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=null;for(const o of this[FE]){const n=this[$E].get(i);null!=n&&o.variantInfo.has(n.index)||null!=o.getMaterial(e)&&(this.hasVariant(i)||this.createVariant(i),null==r&&(r=this[jE](e,t)),o.addVariant(r,i))}if(n&&null!=r){r[yE](!0),this.materials[e][yE](!1);for(const e of this[FE])e.enableVariant(i)}return r}createVariant(e){this[$E].has(e)?console.warn(`Variant '${e}'' already exists`):this[$E].set(e,{name:e,index:this[$E].size})}hasVariant(e){return this[$E].has(e)}setMaterialToVariant(e,t){if(null!=this[GE]().find((e=>e===t)))if(e<0||e>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const i of this[FE]){const n=i.getMaterial(e);null!=n&&i.addVariant(n,t)}else console.warn(`Can't add material to '${t}', the variant does not exist.'`)}updateVariantName(e,t){const i=this[$E].get(e);null!=i&&(i.name=t,this[$E].set(t,i),this[$E].delete(e))}deleteVariant(e){const t=this[$E].get(e);if(null!=t){for(const i of this.materials)i.hasVariant(e)&&i[bE].delete(t.index);for(const e of this[FE])e.deleteVariant(t.index);this[$E].delete(e)}}}var XE=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const YE=Symbol("currentGLTF"),KE=Symbol("originalGltfJson"),ZE=Symbol("model"),JE=Symbol("getOnUpdateMethod"),eT=Symbol("buildTexture");class tT extends Wo{constructor(){super(void 0,new uo({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&null!=this.geometry&&null!=this.map}updateGeometry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.height,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.radius,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;e==this.height&&t==this.radius&&i==this.resolution||(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=function(e,t,i){const n=new dd(t,2*i,i);n.scale(1,1,-1);const r=n.getAttribute("position"),o=new Nn;for(let s=0;s<r.count;++s)if(o.fromBufferAttribute(r,s),o.y<0){const t=3*-e/2,i=o.y<t?-e/o.y:1-o.y*o.y/(3*t*t);o.multiplyScalar(i),o.toArray(r.array,3*s)}return r.needsUpdate=!0,n}(e,t,i)))}}const iT=new Nn,nT=new Nn,rT=new Nn,oT=new an,sT=new to,aT=new Fn;class lT extends jb{constructor(e){super(document.createElement("div")),this.normal=new Nn(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(e){if(null==e)return;const t=dw(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,xw(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(null==e)return;const t=dw(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(){const{mesh:e,tri:t,bary:i}=this;if(null==e||null==t||null==i)return;e.getVertexPosition(t.x,iT),e.getVertexPosition(t.y,nT),e.getVertexPosition(t.z,rT),iT.toArray(oT.elements,0),nT.toArray(oT.elements,3),rT.toArray(oT.elements,6),this.position.copy(i).applyMatrix3(oT);const n=this.parent;n.worldToLocal(e.localToWorld(this.position)),sT.set(iT,nT,rT),sT.getNormal(this.normal).transformDirection(e.matrixWorld);const r=n.parent;aT.setFromAxisAngle(iT.set(0,1,0),-r.rotation.y),this.normal.applyQuaternion(aT)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach((t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,n=i.dataset.visibilityAttribute;if(null!=n){const t=`data-${n}`;i.toggleAttribute(t,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))})),this.initialized=!0}}const cT={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},uT={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"};Math.PI,Math.PI;function hT(e,t,i){return(1-i)*e+i*t}class dT extends Hr{constructor(e,t,i){super(),this.camera=new Ps,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Gl,this.horizontalBlurMaterial=new ts(cT),this.verticalBlurMaterial=new ts(uT),this.intensity=0,this.softness=1,this.boundingBox=new Hn,this.size=new Nn,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:n}=this;n.rotation.x=Math.PI/2,n.left=-.5,n.right=.5,n.bottom=-.5,n.top=.5,this.add(n);const r=new bs,o=new uo({opacity:1,transparent:!0,side:v});this.floor=new Wo(r,o),this.floor.userData.noHit=!0,n.add(this.floor),this.blurPlane=new Wo(r),this.blurPlane.visible=!1,n.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:n,size:r,rotation:o,position:s}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(s),"back"===i){const{min:e,max:t}=n;[e.y,e.z]=[e.z,e.y],[t.y,t.z]=[t.z,t.y],[r.y,r.z]=[r.z,r.y],o.x=Math.PI/2,o.y=Math.PI}else o.x=0,o.y=0;if(this.isAnimated){const e=n.min.y,t=n.max.y;r.y=this.maxDimension,n.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),n.min.y=e,n.max.y=t,r.set(this.maxDimension,t-e,this.maxDimension)}"bottom"===i?s.y=n.min.y:s.z=n.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,n=this.isAnimated?2:1,r=n*Math.pow(2,9-3*e);this.setMapSize(r);const o=t.y/2,s=t.y*n;i.near=0,i.far=hT(s,o,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=2);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),n=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10+i,o=10+n;if(null==this.renderTarget||this.renderTarget.width===r&&this.renderTarget.height===o||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){const e={format:je};this.renderTarget=new Rn(r,o,e),this.renderTargetBlur=new Rn(r,o,e),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/i),t.z*(1+10/n),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*hT(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return.001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const n=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=n,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:n,renderTarget:r,renderTargetBlur:o,blurPlane:s}=this;s.visible=!0,s.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(o),e.render(s,t),s.material=n,n.uniforms.v.value=1/this.renderTarget.height,n.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(s,t),s.visible=!1}dispose(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}const pT=new Nn,fT=new Nn,gT=new Nn,mT=new xf,_T=new Nn,vT=new sn;class yT extends dc{constructor(e){let{canvas:t,element:i,width:n,height:r}=e;super(),this.annotationRenderer=new Zb,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new ss(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new Hr,this.target=new Hr,this.animationNames=[],this.boundingBox=new Hn,this.boundingSphere=new or,this.size=new Nn,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=ae,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Nn,this.targetDamperX=new ow,this.targetDamperY=new ow,this.targetDamperZ=new ow,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new tT,this.name="ModelScene",this.element=i,this.canvas=t,this.camera=new ss(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(n,r),this.target.name="Target",this.mixer=new mf(this.target);const{domElement:o}=this.annotationRenderer,{style:s}=o;s.display="none",s.pointerEvents="none",s.position="absolute",s.top="0",this.element.shadowRoot.querySelector(".default").appendChild(o),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!e||e===this.url)return void i(1);if(this.reset(),this.url=e,null!=this.externalRenderer){const e=await this.externalRenderer.load(i);return this.boundingSphere.radius=e.framedRadius,void(this.idealAspect=e.fieldOfViewAspect)}null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{t=await new Promise((async(t,n)=>{this.cancelPendingSourceChange=()=>n();try{t(await this.element[uI].loader.load(e,this.element,i))}catch(r){n(r)}}))}catch(s){if(null==s)return;throw s}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=t,null!=t&&(this._model=t.scene,this.target.add(t.scene));const{animations:n}=t,r=new Map,o=[];for(const a of n)r.set(a.name,a),o.push(a.name);this.animations=n,this.animationsByName=r,this.animationNames=o,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;null!=e&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;null!=t&&(t.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[YE]=null,this.element[KE]=null,this.element[ZE]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,null!=this.externalRenderer){const i=window.devicePixelRatio;this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Hn;e.traverse((e=>{const i=e;if(!i.material)return;if(!i.material.transparent)return;t.setFromObject(i);const n=t.getSize(_T),r=Math.min(n.x,n.y,n.z);Math.max(n.x,n.y,n.z)<100*r||this.markBakedShadow(i)}))}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new Hn;this.boundingBox.getSize(this.size);for(const n of this.bakedShadows)i.setFromObject(n),i.min.y<e.y+this.size.y/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z||i.min.z<e.z+this.size.z/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(n)}applyTransform(){const{model:e}=this;if(null==e)return;const t=dw(this.element.orientation)[0].terms,i=xw(t[0]).number,n=xw(t[1]).number,r=xw(t[2]).number;e.quaternion.setFromEuler(new Sr(n,r,i,"YXZ"));const o=dw(this.element.scale)[0].terms;e.scale.set(o[0].number,o[1].number,o[2].number)}updateBoundingBox(){const{model:e}=this;if(null==e)return;this.target.remove(e),this.findBakedShadows(e);const t=(e,t)=>e.expandByPoint(t);this.setBakedShadowVisibility(!1),this.boundingBox=Jb(e,t,new Hn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach((e=>this.unmarkBakedShadow(e))),this.boundingBox=Jb(e,t,new Hn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(null==e)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());this.boundingSphere.radius=Math.sqrt(Jb(e,((e,i)=>Math.max(e,t.distanceToSquared(i))),0));this.idealAspect=Jb(e,((e,i)=>{i.sub(t);const n=Math.sqrt(i.x*i.x+i.z*i.z);return Math.max(e,n/(this.idealCameraDistance()-Math.abs(i.y)))}),0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shadowIntensity<=0;for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(null!=this.xrCamera)vT.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();vT.set((e-i.x)/this.width,(t-i.y)/this.height)}return vT.multiplyScalar(2).subScalar(1),vT.y*=-1,vT}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[uI].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(null!=this.groundedSkybox.parent?10:1)}setGroundedSkybox(){const e=dw(this.element.skyboxHeight)[0].terms[0],t=xw(e).number,i=10*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const n=this.boundingSphere.radius/10;let{x:r,y:o,z:s}=i;return r=this.targetDamperX.update(r,t.x,e,n),o=this.targetDamperY.update(o,t.y,e,n),s=this.targetDamperZ.update(s,t.z,e,n),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-s,this.target.position.set(r,o,s),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:n}=this.position;this.yaw=Math.atan2(e-i,t-n)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===Ft&&1===(1&e)?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null==this._currentGLTF)return;const{animations:r}=this;if(null==r||0===r.length)return;let o=null;if(null!=e&&(o=this.animationsByName.get(e),null==o)){const t=parseInt(e);!isNaN(t)&&t>=0&&t<r.length&&(o=r[t])}null==o&&(o=r[0]);try{const{currentAnimationAction:e}=this,r=this.mixer.clipAction(o,this);this.currentAnimationAction=r,this.element.paused?this.mixer.stopAllAction():(r.paused=!1,null!=e&&r!==e?r.crossFadeFrom(e,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),r.setLoop(i,n),r.enabled=!0,r.clampWhenFinished=!0,r.play()}catch(s){console.error(s)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(null!=e){const t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;null!=t&&1==t.needsUpdate&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(e<=0&&null==this.shadow))){if(null==this.shadow){const e="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new dT(this,this.shadowSoftness,e)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;null!=t&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;null!=t&&t.setOffset(e)}getHit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return mT.intersectObject(e,!0).find((e=>e.object.visible&&!e.object.userData.noHit))}hitFromController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return mT.setFromXRController(e),this.getHit(t)}hitFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return mT.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;var i;const n=this.hitFromPoint(e,t);if(null==n)return null;return{position:n.point,normal:null!=n.face?n.face.normal.clone().applyNormalMatrix((new an).getNormalMatrix(n.object.matrixWorld)):mT.ray.direction.clone().multiplyScalar(-1),uv:null!==(i=n.uv)&&void 0!==i?i:null}}surfaceFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;const i=this.element.model;if(null==i)return null;const n=this.hitFromPoint(e,t);if(null==n||null==n.face)return null;const r=i[HE](n),{meshes:o,primitives:s}=r.mesh.userData.associations,a=new Nn,l=new Nn,c=new Nn,{a:u,b:h,c:d}=n.face,p=n.object;p.getVertexPosition(u,a),p.getVertexPosition(h,l),p.getVertexPosition(d,c);const f=new to(a,l,c),g=new Nn;return f.getBarycoord(p.worldToLocal(n.point),g),`${o} ${s} ${u} ${h} ${d} ${g.x.toFixed(3)} ${g.y.toFixed(3)} ${g.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,n=t.length;i<n;i++){const n=t[i];n instanceof lT&&e(n)}}updateSurfaceHotspot(e){if(null==e.surface||null==this.element.model)return;const t=dw(e.surface)[0].terms;if(8!=t.length)return void console.warn(e.surface+" does not have exactly 8 numbers.");const i=this.element.model[VE](t[0].number,t[1].number);if(null==i)return void console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");const n=i.mesh.geometry.attributes.position.count,r=new Nn(t[2].number,t[3].number,t[4].number);if(r.x>=n||r.y>=n||r.z>=n)return void console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");const o=new Nn(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=r,e.bary=o,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots((e=>{e.updateSurface()}))}updateHotspotsVisibility(e){this.forHotspots((t=>{pT.copy(e),fT.setFromMatrixPosition(t.matrixWorld),pT.sub(fT),gT.copy(t.normal).transformDirection(this.target.matrixWorld),pT.dot(gT)<0?t.hide():t.show()}))}orientHotspots(e){this.forHotspots((t=>{t.orient(e)}))}setHotspotsVisibility(e){this.forHotspots((t=>{t.visible=e}))}updateSchema(e){var t;const{schemaElement:i,element:n}=this,{alt:r,poster:o,iosSrc:s}=n;if(null!=e){const n=[{"@type":"MediaObject",contentUrl:e,encodingFormat:"gltf"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];s&&n.push({"@type":"MediaObject",contentUrl:s,encodingFormat:"model/vnd.usdz+zip"});const a={"@context":"http://schema.org/","@type":"3DModel",image:null!==o&&void 0!==o?o:void 0,name:null!==r&&void 0!==r?r:void 0,encoding:n};i.textContent=JSON.stringify(a),document.head.appendChild(i)}else null!=i.parentElement&&i.parentElement.removeChild(i)}}class bT extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),1===this.ongoingActivityCount&&this.announceTotalProgress(t,0,e),i=>{let n;return n=Math.max(Ry(i,0,1),t.progress),n!==t.progress&&this.announceTotalProgress(t,n,e),t.progress}}announceTotalProgress(e,t,i){let n=0,r=0;1==t&&(e.completed=!0);for(const a of this.ongoingActivities){const{progress:e}=a;n+=1-e,a.completed&&r++}const o=e.progress;e.progress=t,this.totalProgress+=(t-o)*(1-this.totalProgress)/n;const s=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:s,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var AT,wT,xT,ST,CT,ET,TT,IT,MT,kT,BT,RT,PT,DT=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const LT=document.createElement("canvas"),OT=Symbol("fallbackResizeHandler"),FT=Symbol("defaultAriaLabel"),NT=Symbol("resizeObserver"),zT=Symbol("clearModelTimeout"),UT=Symbol("onContextLost"),HT=Symbol("loaded"),VT=Symbol("status"),$T=Symbol("onFocus"),GT=Symbol("onBlur"),QT=Symbol("updateSize"),jT=Symbol("intersectionObserver"),qT=Symbol("isElementInViewport"),WT=Symbol("announceModelVisibility"),XT=Symbol("ariaLabel"),YT=Symbol("altDefaulted"),KT=Symbol("statusElement"),ZT=Symbol("updateStatus"),JT=Symbol("loadedTime"),eI=Symbol("updateSource"),tI=Symbol("markLoaded"),iI=Symbol("container"),nI=Symbol("input"),rI=Symbol("canvas"),oI=Symbol("scene"),sI=Symbol("needsRender"),aI=Symbol("tick"),lI=Symbol("onModelLoad"),cI=Symbol("onResize"),uI=Symbol("renderer"),hI=Symbol("progressTracker"),dI=Symbol("getLoaded"),pI=Symbol("getModelIsVisible"),fI=Symbol("shouldAttemptPreload"),gI=e=>({x:e.x,y:e.y,z:e.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),mI=e=>({u:e.x,v:e.y,toString(){return`${this.u} ${this.v}`}});class _I extends Sv{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[AT]=!1,this[wT]=!1,this[xT]=0,this[ST]="",this[CT]=null,this[ET]=By((()=>{const e=this.getBoundingClientRect();this[QT](e)}),50),this[TT]=By((e=>{const t=this.modelIsVisible;t!==e&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:t}}))}),0),this[IT]=null,this[MT]=null,this[kT]=new bT,this[BT]=()=>{this[KT].textContent=this[VT]},this[RT]=()=>{this[KT].textContent=""},this[PT]=e=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:e.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;let t,i;if((e=>{hy(zy,e)})(e),this[iI]=e.querySelector(".container"),this[nI]=e.querySelector(".userInput"),this[rI]=e.querySelector("canvas"),this[KT]=e.querySelector("#status"),this[FT]=this[nI].getAttribute("aria-label"),this.isConnected){const e=this.getBoundingClientRect();t=e.width,i=e.height}else t=300,i=150;this[oI]=new yT({canvas:this[rI],element:this,width:t,height:i}),Promise.resolve().then((()=>{this[QT](this.getBoundingClientRect())})),vy&&(this[NT]=new ResizeObserver((e=>{if(!this[uI].isPresenting)for(let t of e)t.target===this&&this[QT](t.contentRect)}))),yy?this[jT]=new IntersectionObserver((e=>{for(let t of e)if(t.target===this){const e=this.modelIsVisible;this[qT]=t.isIntersecting,this[WT](e),this[qT]&&!this.loaded&&this[eI]()}}),{root:null,rootMargin:"0px",threshold:1e-5}):this[qT]=!0}static get is(){return"model-viewer"}static set modelCacheSize(e){Qb[$b].evictionThreshold=e}static get modelCacheSize(){return Qb[$b].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),fC.singleton.minScale=e}static get minimumRenderScale(){return fC.singleton.minScale}get loaded(){return this[dI]()}get[(AT=qT,wT=HT,xT=JT,ST=VT,CT=zT,ET=OT,TT=WT,IT=NT,MT=jT,kT=hI,uI)](){return fC.singleton}get modelIsVisible(){return this[pI]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),vy?this[NT].observe(this):self.addEventListener("resize",this[OT]),yy&&this[jT].observe(this),this.addEventListener("focus",this[$T]),this.addEventListener("blur",this[GT]);const e=this[uI];e.addEventListener("contextlost",this[UT]),e.registerScene(this[oI]),null!=this[zT]&&(self.clearTimeout(this[zT]),this[zT]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),vy?this[NT].unobserve(this):self.removeEventListener("resize",this[OT]),yy&&this[jT].unobserve(this),this.removeEventListener("focus",this[$T]),this.removeEventListener("blur",this[GT]);const e=this[uI];e.removeEventListener("contextlost",this[UT]),e.unregisterScene(this[oI]),this[zT]=self.setTimeout((()=>{this[oI].dispose(),this[zT]=null}),10)}updated(e){super.updated(e),e.has("src")&&(null==this.src?(this[HT]=!1,this[JT]=0,this[oI].reset()):this.src!==this[oI].url&&(this[HT]=!1,this[JT]=0,this[eI]())),e.has("alt")&&this[nI].setAttribute("aria-label",this[XT]),e.has("generateSchema")&&(this.generateSchema?this[oI].updateSchema(this.src):this[oI].updateSchema(null))}toDataURL(e,t){return this[uI].displayCanvas(this[oI]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,n=e?e.idealAspect:void 0,{width:r,height:o,idealAspect:s,aspect:a}=this[oI],{dpr:l,scaleFactor:c}=this[uI];let u=r*c*l,h=o*c*l,d=0,p=0;if(!0===n)if(s>a){const e=h;h=Math.round(u/s),p=(e-h)/2}else{const e=u;u=Math.round(h*s),d=(e-u)/2}LT.width=u,LT.height=h;try{return new Promise((async(e,n)=>{LT.getContext("2d").drawImage(this[uI].displayCanvas(this[oI]),d,p,u,h,0,0,u,h),LT.toBlob((t=>{if(!t)return n(new Error("Unable to retrieve canvas blob"));e(t)}),t,i)}))}finally{this[QT]({width:r,height:o})}}registerEffectComposer(e){e.setRenderer(this[uI].threeRenderer),e.setMainCamera(this[oI].getCamera()),e.setMainScene(this[oI]),this[oI].effectRenderer=e}unregisterEffectComposer(){this[oI].effectRenderer=null}registerRenderer(e){this[oI].externalRenderer=e}unregisterRenderer(){this[oI].externalRenderer=null}get[XT](){return this[YT]}get[YT](){return null==this.alt||"null"===this.alt?this[FT]:this.alt}[dI](){return this[HT]}[pI](){return this.loaded&&this[qT]}[fI](){return!!this.src&&this[qT]}[QT](e){let{width:t,height:i}=e;0!==t&&0!==i&&(this[iI].style.width=`${t}px`,this[iI].style.height=`${i}px`,this[cI]({width:t,height:i}))}[aI](e,t){var i;null===(i=this[oI].effectRenderer)||void 0===i||i.beforeRender(e,t)}[tI](){this[HT]||(this[HT]=!0,this[JT]=performance.now())}[sI](){this[oI].queueRender()}[lI](){}[ZT](e){this[VT]=e;const t=this.getRootNode();null!=t&&t.activeElement===this&&this[KT].textContent!=e&&(this[KT].textContent=e)}[(BT=$T,RT=GT,cI)](e){this[oI].setSize(e.width,e.height)}async[(PT=UT,eI)](){const e=this[oI];if(this.loaded||!this[fI]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[ZT]("Loading"),e.stopAnimation();const t=this[hI].beginActivity("model-load"),i=this.src;try{const n=e.setSource(i,(e=>t(.95*Ry(e,0,1)))),r=this[Fy]();await Promise.all([n,r]),this[tI](),this[lI](),this.updateComplete.then((()=>{this.dispatchEvent(new CustomEvent("before-render"))})),await new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),e()}))}))}))}catch(n){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:n}}))}finally{t(1)}}}DT([av({type:String})],_I.prototype,"alt",void 0),DT([av({type:String})],_I.prototype,"src",void 0),DT([av({type:Boolean,attribute:"with-credentials"})],_I.prototype,"withCredentials",void 0),DT([av({type:Boolean,attribute:"generate-schema"})],_I.prototype,"generateSchema",void 0);var vI=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const yI=Symbol("changeAnimation"),bI=Symbol("paused"),AI={repetitions:1/0,pingpong:!1},wI=Symbol("hotspotMap"),xI=Symbol("mutationCallback"),SI=Symbol("observer"),CI=Symbol("addHotspot"),EI=Symbol("removeHotspot"),TI=new fr;class II{parse(e,t,i,n){this.parseAsync(e,n).then(t).catch(i)}async parseAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const i={},n="model.usda";i[n]=null;let r=BI();r+=function(e){const t=!0===e.includeAnchoringProperties?`\n\t\ttoken preliminary:anchoring:type = "${e.ar.anchoring.type}"\n\t\ttoken preliminary:planeAnchoring:alignment = "${e.ar.planeAnchoring.alignment}"\n\t`:"";return`def Xform "Root"\n{\n\tdef Scope "Scenes" (\n\t\tkind = "sceneLibrary"\n\t)\n\t{\n\t\tdef Xform "Scene" (\n\t\t\tcustomData = {\n\t\t\t\tbool preliminary_collidesWithEnvironment = 0\n\t\t\t\tstring sceneName = "Scene"\n\t\t\t}\n\t\t\tsceneName = "Scene"\n\t\t)\n\t\t{${t}\n`}(t);const o={},s={};e.traverseVisible((e=>{if(e.isMesh){const t=e.geometry,n=e.material;if(n.isMeshStandardMaterial){const s="geometries/Geometry_"+t.id+".usda";if(!(s in i)){const e=function(e){const t=function(e){const t="Geometry",i=e.attributes,n=i.position.count;return`\n\tdef Mesh "${t}"\n\t{\n\t\tint[] faceVertexCounts = [${function(e){const t=null!==e.index?e.index.count:e.attributes.position.count;return Array(t/3).fill(3).join(", ")}(e)}]\n\t\tint[] faceVertexIndices = [${function(e){const t=e.index,i=[];if(null!==t)for(let n=0;n<t.count;n++)i.push(t.getX(n));else{const t=e.attributes.position.count;for(let e=0;e<t;e++)i.push(e)}return i.join(", ")}(e)}]\n\t\tnormal3f[] normals = [${DI(i.normal,n)}] (\n\t\t\tinterpolation = "vertex"\n\t\t)\n\t\tpoint3f[] points = [${DI(i.position,n)}]\n${function(e){let t="";for(let n=0;n<4;n++){const i=n>0?n:"",r=e["uv"+i];void 0!==r&&(t+=`\n\t\ttexCoord2f[] primvars:st${i} = [${LI(r)}] (\n\t\t\tinterpolation = "vertex"\n\t\t)`)}const i=e.color;if(void 0!==i){t+=`\n\tcolor3f[] primvars:displayColor = [${DI(i,i.count)}] (\n\t\tinterpolation = "vertex"\n\t\t)`}return t}(i)}\n\t\tuniform token subdivisionScheme = "none"\n\t}\n`}(e);return`\ndef "Geometry"\n{\n${t}\n}\n`}(t);i[s]=function(e){let t=BI();return t+=e,pm(t)}(e)}n.uuid in o||(o[n.uuid]=n),r+=function(e,t,i){const n="Object_"+e.id,r=RI(e.matrixWorld);e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e);return`def Xform "${n}" (\n\tprepend references = @./geometries/Geometry_${t.id}.usda@</Geometry>\n\tprepend apiSchemas = ["MaterialBindingAPI"]\n)\n{\n\tmatrix4d xformOp:transform = ${r}\n\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\trel material:binding = </Materials/Material_${i.id}>\n}\n\n`}(e,t,n)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",e)}else e.isCamera&&(r+=function(e){const t=e.name?e.name:"Camera_"+e.id,i=RI(e.matrixWorld);e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e);return e.isOrthographicCamera?`def Camera "${t}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${i}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\t\t\tfloat2 clippingRange = (${e.near.toPrecision(kI)}, ${e.far.toPrecision(kI)})\n\t\t\tfloat horizontalAperture = ${(10*(Math.abs(e.left)+Math.abs(e.right))).toPrecision(kI)}\n\t\t\tfloat verticalAperture = ${(10*(Math.abs(e.top)+Math.abs(e.bottom))).toPrecision(kI)}\n\t\t\ttoken projection = "orthographic"\n\t\t}\n\t\n\t`:`def Camera "${t}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${i}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\t\t\tfloat2 clippingRange = (${e.near.toPrecision(kI)}, ${e.far.toPrecision(kI)})\n\t\t\tfloat focalLength = ${e.getFocalLength().toPrecision(kI)}\n\t\t\tfloat focusDistance = ${e.focus.toPrecision(kI)}\n\t\t\tfloat horizontalAperture = ${e.getFilmWidth().toPrecision(kI)}\n\t\t\ttoken projection = "perspective"\n\t\t\tfloat verticalAperture = ${e.getFilmHeight().toPrecision(kI)}\n\t\t}\n\t\n\t`}(e))})),r+="\n\t\t}\n\t}\n}\n\n",r+=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];for(const r in e){const o=e[r];n.push(OI(o,t,i))}return`def "Materials"\n{\n${n.join("")}\n}\n\n`}(o,s,t.quickLookCompatible),i[n]=pm(r),r=null;for(const l in s){let e=s[l];!0===e.isCompressedTexture&&(e=rA(e));const n=MI(e.image,e.flipY,t.maxTextureSize),r=await new Promise((e=>n.toBlob(e,"image/png",1)));i[`textures/Texture_${l}.png`]=new Uint8Array(await r.arrayBuffer())}let a=0;for(const l in i){const e=i[l];a+=34+l.length;const t=63&a;if(4!==t){const n=new Uint8Array(64-t);i[l]=[e,{extra:{12345:n}}]}a=e.length}return function(e,t){t||(t={});var i={},n=[];um(e,"",i,t);var r=0,o=0;for(var s in i){var a=i[s],l=a[0],c=a[1],u=0==c.level?0:8,h=(x=pm(s)).length,d=c.comment,p=d&&pm(d),f=p&&p.length,g=fm(c.extra);h>65535&&$g(11);var m=u?lm(l,c):l,_=m.length,v=nm();v.p(l),n.push(om(c,{size:l.length,crc:v.d(),c:m,f:x,m:p,u:h!=s.length||p&&d.length!=f,o:r,compression:u})),r+=30+h+g+_,o+=76+2*(h+g)+(f||0)+_}for(var y=new fg(o+22),b=r,A=o-r,w=0;w<n.length;++w){var x=n[w];gm(y,x.o,x,x.f,x.u,x.c.length);var S=30+x.f.length+fm(x.extra);y.set(x.c,x.o+S),gm(y,r,x,x.f,x.u,x.c.length,x.o,x.m),r+=16+S+(x.m?x.m.length:0)}return mm(y,r,n.length,A,b),y}(i,{level:0})}}function MI(e,t,i){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const n=i/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=e.width*Math.min(1,n),r.height=e.height*Math.min(1,n);const o=r.getContext("2d");return!0===t&&(o.translate(0,r.height),o.scale(1,-1)),o.drawImage(e,0,0,r.width,r.height),r}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const kI=7;function BI(){return'#usda 1.0\n(\n\tcustomLayerData = {\n\t\tstring creator = "Three.js USDZExporter"\n\t}\n\tdefaultPrim = "Root"\n\tmetersPerUnit = 1\n\tupAxis = "Y"\n)\n\n'}function RI(e){const t=e.elements;return`( ${PI(t,0)}, ${PI(t,4)}, ${PI(t,8)}, ${PI(t,12)} )`}function PI(e,t){return`(${e[t+0]}, ${e[t+1]}, ${e[t+2]}, ${e[t+3]})`}function DI(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");const i=[];for(let n=0;n<e.count;n++){const t=e.getX(n),r=e.getY(n),o=e.getZ(n);i.push(`(${t.toPrecision(kI)}, ${r.toPrecision(kI)}, ${o.toPrecision(kI)})`)}return i.join(", ")}function LI(e){const t=[];for(let i=0;i<e.count;i++){const n=e.getX(i),r=e.getY(i);t.push(`(${n.toPrecision(kI)}, ${1-r.toPrecision(kI)})`)}return t.join(", ")}function OI(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n="\t\t\t",r=[],o=[];function s(n,r,o){const s=n.source.id+"_"+n.flipY;t[s]=n;const a=n.channel>0?"st"+n.channel:"st",l={1e3:"repeat",1001:"clamp",1002:"mirror"},c=n.repeat.clone(),u=n.offset.clone(),h=n.rotation,d=Math.sin(h),p=Math.cos(h);return u.y=1-u.y-c.y,i?(u.x=u.x/c.x,u.y=u.y/c.y,u.x+=d/c.x,u.y+=p-1):(u.x+=d*c.x,u.y+=(1-p)*c.y),`\n\t\tdef Shader "PrimvarReader_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdPrimvarReader_float2"\n\t\t\tfloat2 inputs:fallback = (0.0, 0.0)\n\t\t\ttoken inputs:varname = "${a}"\n\t\t\tfloat2 outputs:result\n\t\t}\n\n\t\tdef Shader "Transform2d_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdTransform2d"\n\t\t\ttoken inputs:in.connect = </Materials/Material_${e.id}/PrimvarReader_${r}.outputs:result>\n\t\t\tfloat inputs:rotation = ${(h*(180/Math.PI)).toFixed(kI)}\n\t\t\tfloat2 inputs:scale = ${NI(c)}\n\t\t\tfloat2 inputs:translation = ${NI(u)}\n\t\t\tfloat2 outputs:result\n\t\t}\n\n\t\tdef Shader "Texture_${n.id}_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdUVTexture"\n\t\t\tasset inputs:file = @textures/Texture_${s}.png@\n\t\t\tfloat2 inputs:st.connect = </Materials/Material_${e.id}/Transform2d_${r}.outputs:result>\n\t\t\t${void 0!==o?"float4 inputs:scale = "+function(e){return`(${e.r}, ${e.g}, ${e.b}, 1.0)`}(o):""}\n\t\t\ttoken inputs:sourceColorSpace = "${n.colorSpace===ti?"raw":"sRGB"}"\n\t\t\ttoken inputs:wrapS = "${l[n.wrapS]}"\n\t\t\ttoken inputs:wrapT = "${l[n.wrapT]}"\n\t\t\tfloat outputs:r\n\t\t\tfloat outputs:g\n\t\t\tfloat outputs:b\n\t\t\tfloat3 outputs:rgb\n\t\t\t${e.transparent||e.alphaTest>0?"float outputs:a":""}\n\t\t}`}return e.side===y&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",e),null!==e.map?(r.push(`${n}color3f inputs:diffuseColor.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:rgb>`),e.transparent?r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`):e.alphaTest>0&&(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`),r.push(`${n}float inputs:opacityThreshold = ${e.alphaTest}`)),o.push(s(e.map,"diffuse",e.color))):r.push(`${n}color3f inputs:diffuseColor = ${FI(e.color)}`),null!==e.emissiveMap?(r.push(`${n}color3f inputs:emissiveColor.connect = </Materials/Material_${e.id}/Texture_${e.emissiveMap.id}_emissive.outputs:rgb>`),o.push(s(e.emissiveMap,"emissive",new so(e.emissive.r*e.emissiveIntensity,e.emissive.g*e.emissiveIntensity,e.emissive.b*e.emissiveIntensity)))):e.emissive.getHex()>0&&r.push(`${n}color3f inputs:emissiveColor = ${FI(e.emissive)}`),null!==e.normalMap&&(r.push(`${n}normal3f inputs:normal.connect = </Materials/Material_${e.id}/Texture_${e.normalMap.id}_normal.outputs:rgb>`),o.push(s(e.normalMap,"normal"))),null!==e.aoMap&&(r.push(`${n}float inputs:occlusion.connect = </Materials/Material_${e.id}/Texture_${e.aoMap.id}_occlusion.outputs:r>`),o.push(s(e.aoMap,"occlusion",new so(e.aoMapIntensity,e.aoMapIntensity,e.aoMapIntensity)))),null!==e.roughnessMap?(r.push(`${n}float inputs:roughness.connect = </Materials/Material_${e.id}/Texture_${e.roughnessMap.id}_roughness.outputs:g>`),o.push(s(e.roughnessMap,"roughness",new so(e.roughness,e.roughness,e.roughness)))):r.push(`${n}float inputs:roughness = ${e.roughness}`),null!==e.metalnessMap?(r.push(`${n}float inputs:metallic.connect = </Materials/Material_${e.id}/Texture_${e.metalnessMap.id}_metallic.outputs:b>`),o.push(s(e.metalnessMap,"metallic",new so(e.metalness,e.metalness,e.metalness)))):r.push(`${n}float inputs:metallic = ${e.metalness}`),null!==e.alphaMap?(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.alphaMap.id}_opacity.outputs:r>`),r.push(`${n}float inputs:opacityThreshold = 0.0001`),o.push(s(e.alphaMap,"opacity"))):r.push(`${n}float inputs:opacity = ${e.opacity}`),e.isMeshPhysicalMaterial&&(null!==e.clearcoatMap?(r.push(`${n}float inputs:clearcoat.connect = </Materials/Material_${e.id}/Texture_${e.clearcoatMap.id}_clearcoat.outputs:r>`),o.push(s(e.clearcoatMap,"clearcoat",new so(e.clearcoat,e.clearcoat,e.clearcoat)))):r.push(`${n}float inputs:clearcoat = ${e.clearcoat}`),null!==e.clearcoatRoughnessMap?(r.push(`${n}float inputs:clearcoatRoughness.connect = </Materials/Material_${e.id}/Texture_${e.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),o.push(s(e.clearcoatRoughnessMap,"clearcoatRoughness",new so(e.clearcoatRoughness,e.clearcoatRoughness,e.clearcoatRoughness)))):r.push(`${n}float inputs:clearcoatRoughness = ${e.clearcoatRoughness}`),r.push(`${n}float inputs:ior = ${e.ior}`)),`\n\tdef Material "Material_${e.id}"\n\t{\n\t\tdef Shader "PreviewSurface"\n\t\t{\n\t\t\tuniform token info:id = "UsdPreviewSurface"\n${r.join("\n")}\n\t\t\tint inputs:useSpecularWorkflow = 0\n\t\t\ttoken outputs:surface\n\t\t}\n\n\t\ttoken outputs:surface.connect = </Materials/Material_${e.id}/PreviewSurface.outputs:surface>\n\n${o.join("\n")}\n\n\t}\n`}function FI(e){return`(${e.r}, ${e.g}, ${e.b})`}function NI(e){return`(${e.x}, ${e.y})`}var zI=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let UI=!1,HI=!1;const VI="#model-viewer-no-ar-fallback",$I=(GI=["quick-look","scene-viewer","webxr","none"],e=>{try{const t=dw(e),i=(t.length?t[0].terms:[]).filter((e=>e&&"ident"===e.type)).map((e=>e.value)).filter((e=>GI.indexOf(e)>-1));return new Set(i)}catch(t){}return new Set});var GI;const QI="quick-look",jI="scene-viewer",qI="webxr",WI="none",XI=Symbol("arButtonContainer"),YI=Symbol("enterARWithWebXR"),KI=Symbol("openSceneViewer"),ZI=Symbol("openIOSARQuickLook"),JI=Symbol("canActivateAR"),eM=Symbol("arMode"),tM=Symbol("arModes"),iM=Symbol("arAnchor"),nM=Symbol("preload"),rM=Symbol("onARButtonContainerClick"),oM=Symbol("onARStatus"),sM=Symbol("onARTracking"),aM=Symbol("onARTap"),lM=Symbol("selectARMode"),cM=Symbol("triggerLoad");var uM=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const hM="auto",dM="auto",pM="eager",fM=Symbol("defaultProgressBarElement"),gM=Symbol("posterContainerElement"),mM=Symbol("defaultPosterElement"),_M=Symbol("shouldDismissPoster"),vM=Symbol("hidePoster"),yM=Symbol("modelIsRevealed"),bM=Symbol("updateProgressBar"),AM=Symbol("ariaLabelCallToAction"),wM=Symbol("onProgress");var xM=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const SM=Math.PI/32,CM={basis:[Aw(hw(SM,"rad"))],keywords:{auto:[null]}},EM=Symbol("autoRotateStartTime"),TM=Symbol("radiansPerSecond"),IM=Symbol("syncRotationRate"),MM=Symbol("onCameraChange"),kM=(e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this[t]=new Map,this[i]=e=>{e.forEach((e=>{e instanceof MutationRecord&&"childList"!==e.type||(e.addedNodes.forEach((e=>{this[CI](e)})),e.removedNodes.forEach((e=>{this[EI](e)})),this[sI]())}))},this[n]=new MutationObserver(this[xI])}connectedCallback(){super.connectedCallback();for(let t=0;t<this.children.length;++t)this[CI](this.children[t]);const{ShadyDOM:e}=self;null==e?this[SI].observe(this,{childList:!0}):this[SI]=e.observeChildren(this,this[xI])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:e}=self;null==e?this[SI].disconnect():e.unobserveChildren(this[SI])}[(t=wI,i=xI,n=SI,lI)](){super[lI]();const e=this[oI];e.forHotspots((t=>{e.updateSurfaceHotspot(t)}))}[aI](e,t){super[aI](e,t);const i=this[oI],{annotationRenderer:n}=i,r=i.getCamera();i.shouldRender()&&(i.animateSurfaceHotspots(),i.updateHotspotsVisibility(r.position),n.domElement.style.display="",n.render(i,r))}updateHotspot(e){const t=this[wI].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),t.surface=e.surface,this[oI].updateSurfaceHotspot(t),this[sI]())}queryHotspot(e){const t=this[wI].get(e);if(null==t)return null;const i=gI(t.position),n=gI(t.normal),r=t.facingCamera,o=this[oI],s=o.getCamera(),a=new Nn;a.setFromMatrixPosition(t.matrixWorld),a.project(s);const l=o.width/2,c=o.height/2;a.x=a.x*l+l,a.y=-a.y*c+c;const u=gI(new Nn(a.x,a.y,a.z));return Number.isFinite(u.x)&&Number.isFinite(u.y)?{position:i,normal:n,canvasPosition:u,facingCamera:r}:null}positionAndNormalFromPoint(e,t){const i=this[oI],n=i.getNDC(e,t),r=i.positionAndNormalFromPoint(n);if(null==r)return null;TI.copy(i.target.matrixWorld).invert();const o=gI(r.position.applyMatrix4(TI)),s=gI(r.normal.transformDirection(TI));let a=null;return null!=r.uv&&(a=mI(r.uv)),{position:o,normal:s,uv:a}}surfaceFromPoint(e,t){const i=this[oI],n=i.getNDC(e,t);return i.surfaceFromPoint(n)}[CI](e){if(!(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")))return;let t=this[wI].get(e.slot);null!=t?t.increment():(t=new lT({name:e.slot,position:e.dataset.position,normal:e.dataset.normal,surface:e.dataset.surface}),this[wI].set(e.slot,t),this[oI].addHotspot(t)),this[oI].queueRender()}[EI](e){if(!(e instanceof HTMLElement))return;const t=this[wI].get(e.slot);t&&(t.decrement()&&(this[oI].removeHotspot(t),this[wI].delete(e.slot)),this[oI].queueRender())}}return r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this[t]=void 0,this[i]=null,this[n]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[ZE]}get availableVariants(){return this.model?this.model[GE]():[]}get originalGltfJson(){return this[KE]}[(t=ZE,i=YE,n=KE,JE)](){return()=>{this[sI]()}}[eT](e){return e.colorSpace=ii,e.wrapS=ye,e.wrapT=ye,new VC(this[JE](),e)}async createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";const{textureUtils:i}=this[uI],n=await i.loadImage(e,this.withCredentials);return n.userData.mimeType=t,this[eT](n)}async createLottieTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const{textureUtils:i}=this[uI],n=await i.loadLottie(e,t,this.withCredentials);return this[eT](n)}createVideoTexture(e){const t=document.createElement("video");t.crossOrigin=this.withCredentials?"use-credentials":"anonymous",t.src=e,t.muted=!0,t.playsInline=!0,t.loop=!0,t.play();const i=new Qu(t);return this[eT](i)}createCanvasTexture(){const e=document.createElement("canvas"),t=new Yu(e);return this[eT](t)}async updated(e){if(super.updated(e),e.has("variantName")){const e=this[hI].beginActivity("variant-update");e(.1);const t=this[ZE],{variantName:i}=this;null!=t&&(await t[zE](i),this[sI](),this.dispatchEvent(new CustomEvent("variant-applied"))),e(1)}if(e.has("orientation")||e.has("scale")){if(!this.loaded)return;const e=this[oI];e.applyTransform(),e.updateBoundingBox(),e.updateShadow(),this[uI].arRenderer.onUpdateScene(),this[sI]()}}[lI](){super[lI]();const{currentGLTF:e}=this[oI];if(null!=e){const{correlatedSceneGraph:t}=e;null!=t&&e!==this[YE]&&(this[ZE]=new WE(t,this[JE]()),this[KE]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")}this[YE]=e}async exportScene(e){const t=this[oI];return new Promise((async(i,n)=>{const r={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(r,e),r.animations=t.animations,r.truncateDrawRange=!0;const o=t.shadow;let s=!1;null!=o&&(s=o.visible,o.visible=!1),await this[ZE][NE]();(new sA).register((e=>new iw(e))).parse(t.model,(e=>i(new Blob([r.binary?e:JSON.stringify(e)],{type:r.binary?"application/octet-stream":"application/json"}))),(()=>n("glTF export failed")),r),null!=o&&(o.visible=s)}))}materialFromPoint(e,t){const i=this[ZE];if(null==i)return null;const n=this[oI],r=n.getNDC(e,t),o=n.hitFromPoint(r);return null==o||null==o.face?null:i[UE](o)}}return XE([av({type:String,attribute:"variant-name"})],r.prototype,"variantName",void 0),XE([av({type:String,attribute:"orientation"})],r.prototype,"orientation",void 0),XE([av({type:String,attribute:"scale"})],r.prototype,"scale",void 0),r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[t]=performance.now(),this[i]=0,this[n]=e=>{this.autoRotate&&"user-interaction"===e.detail.source&&(this[EM]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[MM]),this[EM]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[MM]),this[EM]=performance.now()}updated(e){super.updated(e),e.has("autoRotate")&&(this[EM]=performance.now())}[(t=EM,i=TM,IM)](e){this[TM]=e[0]}[aI](e,t){if(super[aI](e,t),!this.autoRotate||!this[pI]()||this[uI].isPresenting)return;const i=Math.min(t,e-this[EM]-this.autoRotateDelay);i>0&&(this[oI].yaw=this.turntableRotation+this[TM]*i*.001)}get turntableRotation(){return this[oI].yaw}resetTurntableRotation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[oI].yaw=e}}return n=MM,xM([av({type:Boolean,attribute:"auto-rotate"})],r.prototype,"autoRotate",void 0),xM([av({type:Number,attribute:"auto-rotate-delay"})],r.prototype,"autoRotateDelay",void 0),xM([ax({intrinsics:CM,updateHandler:IM}),av({type:String,attribute:"rotation-per-second"})],r.prototype,"rotationPerSecond",void 0),r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this.toneMapping="auto",this.skyboxHeight="0",this[t]=null,this[i]=null,this[n]=null}updated(e){super.updated(e),e.has("shadowIntensity")&&(this[oI].setShadowIntensity(.5*this.shadowIntensity),this[sI]()),e.has("shadowSoftness")&&(this[oI].setShadowSoftness(this.shadowSoftness),this[sI]()),e.has("exposure")&&(this[oI].exposure=this.exposure,this[sI]()),e.has("toneMapping")&&(this[oI].toneMapping="aces"===this.toneMapping?ae:"agx"===this.toneMapping?ce:ue,this[sI]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[fI]()&&this[Fy](),e.has("skyboxHeight")&&(this[oI].setGroundedSkybox(),this[sI]())}hasBakedShadow(){return this[oI].bakedShadows.size>0}async[(t=Ly,i=Oy,n=Ny,Fy)](){const{skyboxImage:e,environmentImage:t}=this;null!=this[Ny]&&(this[Ny](),this[Ny]=null);const{textureUtils:i}=this[uI];if(null==i)return;const n=this[hI].beginActivity("environment-update");try{const{environmentMap:r,skybox:o}=await i.generateEnvironmentMapAndSkybox(Iy(e),t,(e=>n(Ry(e,0,1))),this.withCredentials);this[Ly]!==r&&(this[Ly]=r,this.dispatchEvent(new CustomEvent("environment-change"))),this[Oy]=null!=o?o.name===r.name?r:o:null,this[oI].setEnvironmentAndSkybox(this[Ly],this[Oy])}catch(r){if(r instanceof Error)throw this[oI].setEnvironmentAndSkybox(null,null),r}finally{n(1)}}}return Dy([av({type:String,attribute:"environment-image"})],r.prototype,"environmentImage",void 0),Dy([av({type:String,attribute:"skybox-image"})],r.prototype,"skyboxImage",void 0),Dy([av({type:Number,attribute:"shadow-intensity"})],r.prototype,"shadowIntensity",void 0),Dy([av({type:Number,attribute:"shadow-softness"})],r.prototype,"shadowSoftness",void 0),Dy([av({type:Number})],r.prototype,"exposure",void 0),Dy([av({type:String,attribute:"tone-mapping"})],r.prototype,"toneMapping",void 0),Dy([av({type:String,attribute:"skybox-height"})],r.prototype,"skyboxHeight",void 0),r})((e=>{var t,i,n,r,o,s,a,l,c,u,h,d,p,f,g,m,_,v;class y extends e{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=fx,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=_x,this.interactionPromptStyle=yx,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=bx,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this.a11y=null,this[t]=this.shadowRoot.querySelector(".interaction-prompt"),this[i]=this.shadowRoot.querySelector("#prompt"),this[n]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[r]=this.shadowRoot.querySelector(".pan-target"),this[o]=0,this[s]=1/0,this[a]=!1,this[l]=!1,this[c]=hS.AUTOMATIC,this[u]=new dS(this[oI].camera,this[nI],this[oI]),this[h]=new Ef,this[d]=!1,this[p]=!1,this[f]=!1,this[g]={},this[m]=()=>{const e=this[Bx].changeSource;this[Wx]=e,e===hS.USER_INTERACTION&&(this[Qx]=!0,this[Ox]())},this[_]=()=>{this[Fx](),this[sI]();const e=this[Bx].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:e}}))},this[v]=e=>{this[iI].classList.toggle("pointer-tumbling","pointer-change-start"===e.type)}}get inputSensitivity(){return this[Bx].inputSensitivity}set inputSensitivity(e){this[Bx].inputSensitivity=e}getCameraOrbit(){const{theta:e,phi:t,radius:i}=this[Xx];return{theta:e,phi:t,radius:i,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return gI(this[uI].isPresenting?this[uI].arRenderer.target:this[oI].getDynamicTarget())}getFieldOfView(){return this[Bx].getFieldOfView()}getMinimumFieldOfView(){return this[Bx].options.minimumFieldOfView}getMaximumFieldOfView(){return this[Bx].options.maximumFieldOfView}getIdealAspect(){return this[oI].idealAspect}jumpCameraToGoal(){this[Yx]=!0,this.requestUpdate(Yx,!1)}resetInteractionPrompt(){this[qx]=0,this[jx]=1/0,this[Qx]=!1,this[Gx]=this.interactionPrompt===_x&&this.cameraControls}zoom(e){const t=new WheelEvent("wheel",{deltaY:-30*e});this[nI].dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this[Bx].addEventListener("user-interaction",this[Hx]),this[Bx].addEventListener("pointer-change-start",this[$x]),this[Bx].addEventListener("pointer-change-end",this[$x])}disconnectedCallback(){super.disconnectedCallback(),this[Bx].removeEventListener("user-interaction",this[Hx]),this[Bx].removeEventListener("pointer-change-start",this[$x]),this[Bx].removeEventListener("pointer-change-end",this[$x])}updated(e){super.updated(e);const t=this[Bx],i=this[oI];if(e.has("cameraControls")&&(this.cameraControls?(t.enableInteraction(),this.interactionPrompt===_x&&(this[Gx]=!0)):(t.disableInteraction(),this[Ox]()),this[nI].setAttribute("aria-label",this[XT])),e.has("disableZoom")&&(t.disableZoom=this.disableZoom),e.has("disablePan")&&(t.enablePan=!this.disablePan),e.has("disableTap")&&(t.enableTap=!this.disableTap),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===_x&&this.cameraControls&&!this[Qx]?this[Gx]=!0:this[Ox]()),e.has("interactionPromptStyle")&&(this[Dx].style.opacity=this.interactionPromptStyle==vx?"1":"0"),e.has("touchAction")){const e=this.touchAction;t.applyOptions({touchAction:e}),t.updateTouchActionStyle()}e.has("orbitSensitivity")&&(t.orbitSensitivity=this.orbitSensitivity),e.has("zoomSensitivity")&&(t.zoomSensitivity=this.zoomSensitivity),e.has("panSensitivity")&&(t.panSensitivity=this.panSensitivity),e.has("interpolationDecay")&&(t.setDamperDecayTime(this.interpolationDecay),i.setTargetDamperDecayTime(this.interpolationDecay)),e.has("a11y")&&this[zx](),!0===this[Yx]&&Promise.resolve().then((()=>{t.jumpToGoal(),i.jumpToGoal(),this[Vx](),this[Yx]=!1}))}async updateFraming(){const e=this[oI],t=e.adjustedFoV(e.framedFoVDeg);await e.updateFraming();const i=e.adjustedFoV(e.framedFoVDeg),n=this[Bx].getFieldOfView()/t;this[Bx].setFieldOfView(i*n),this[Zx]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(e,t,i){const n=this[nI],r=this[Lx];if("1"===r[0].style.opacity)return void console.warn("interact() failed because an existing interaction is running.");const o=new Array;o.push({x:ux(t.x),y:ux(t.y)});const s=[{x:o[0].x(0),y:o[0].y(0)}];null!=i&&(o.push({x:ux(i.x),y:ux(i.y)}),s.push({x:o[1].x(0),y:o[1].y(0)}));let a=performance.now();const{width:l,height:c}=this[oI],u=this.getBoundingClientRect(),h=e=>{for(const[t,i]of s.entries()){const{style:o}=r[t];o.transform=`translateX(${l*i.x}px) translateY(${c*i.y}px)`,"pointerdown"===e?o.opacity="1":"pointerup"===e&&(o.opacity="0");const s={pointerId:t-5678,pointerType:"touch",target:n,clientX:l*i.x+u.x,clientY:c*i.y+u.y,altKey:!0};n.dispatchEvent(new PointerEvent(e,s))}},d=()=>{const t=this[Wx];if(t!==hS.AUTOMATIC||!n.isConnected){for(const e of this[Lx])e.style.opacity="0";return h("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),void document.removeEventListener("visibilitychange",p)}const i=Math.min(1,(performance.now()-a)/e);for(const[e,n]of s.entries())n.x=o[e].x(i),n.y=o[e].y(i);h("pointermove"),i<1?requestAnimationFrame(d):(h("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:hS.AUTOMATIC}})),document.removeEventListener("visibilitychange",p))},p=()=>{let e=0;"hidden"===document.visibilityState?e=performance.now()-a:a=performance.now()-e};document.addEventListener("visibilitychange",p),h("pointerdown"),this[Wx]=hS.AUTOMATIC,requestAnimationFrame(d)}[(t=Px,i=Dx,n=Lx,r=Rx,o=qx,s=jx,a=Qx,l=Gx,c=Wx,u=Bx,h=Xx,d=Yx,p=Kx,f=Zx,g=Nx,eS)](e){const t=this[Bx],i=this[oI];i.framedFoVDeg=180*e[0]/Math.PI,t.changeSource=hS.NONE,t.setFieldOfView(i.adjustedFoV(i.framedFoVDeg)),this[Hx]()}[Jx](e){const t=this[Bx];if(this[Zx]){const{theta:t,phi:i}=this.getCameraOrbit();e[0]=t,e[1]=i,this[Zx]=!1}t.changeSource=hS.NONE,t.setOrbit(e[0],e[1],e[2]),this[Hx]()}[iS](e){this[Bx].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}[nS](e){this[Bx].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[Ux](e[2]),this.jumpCameraToGoal()}[rS](e){this[Bx].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}[oS](e){const t=this[oI].adjustedFoV(180*e[0]/Math.PI);this[Bx].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[tS](e){const[t,i,n]=e;this[uI].arRenderer.isPresenting||this[oI].setTarget(t,i,n),this[Bx].changeSource=hS.NONE,this[uI].arRenderer.updateTarget(),this[Hx]()}[aI](e,t){if(super[aI](e,t),this[uI].isPresenting||!this[pI]())return;const i=this[Bx],n=this[oI],r=performance.now();if(this[Gx]&&this.loaded&&r>this[JT]+this.interactionPromptThreshold&&(this[Gx]=!1,this[jx]=r,this[Px].classList.add("visible")),isFinite(this[jx])&&this.interactionPromptStyle===yx){const e=(r-this[jx])/5e3%1,t=dx(e),o=px(e);if(this[Dx].style.opacity=`${o}`,t!==this[qx]){const e=t*n.width*.05,r=(t-this[qx])*Math.PI/16;this[Dx].style.transform=`translateX(${e}px)`,i.changeSource=hS.AUTOMATIC,i.adjustOrbit(r,0,0),this[qx]=t}}const o=i.update(e,t),s=n.updateTarget(t);(o||s)&&this[Vx]()}[Ox](){this[Gx]=!1,this[Px].classList.remove("visible"),this[jx]=1/0}[Ux](e){const t=Math.max(this[oI].farRadius(),e),i=Math.abs(2*t);this[Bx].updateNearFar(0,i)}[Fx](){const{theta:e,phi:t}=this[Bx].getCameraSpherical(this[Xx]),i=(4+Math.floor((e%kx+Mx)/Tx))%4,n=Math.floor(t/Ix),r=`${mx[n]}${gx[i]}`,o=r;o in this[Nx]?this[ZT](this[Nx][o]):this[ZT](`View from stage ${r}`)}get[XT](){let e=". Use mouse, touch or arrow keys to move.";return"interaction-prompt"in this[Nx]&&(e=`. ${this[Nx]["interaction-prompt"]}`),super[XT].replace(/\.$/,"")+(this.cameraControls?e:"")}async[cI](e){const t=this[Bx],i=this[oI],n=i.adjustedFoV(i.framedFoVDeg);super[cI](e);const r=i.adjustedFoV(i.framedFoVDeg)/n,o=t.getFieldOfView()*(isFinite(r)?r:1);t.updateAspect(this[oI].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[Bx].setFieldOfView(o),this.jumpCameraToGoal()}[lI](){super[lI](),this[Kx]?this[Zx]=!0:this[Kx]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(m=Hx,_=Vx,v=$x,zx)](){if("string"===typeof this.a11y)if(this.a11y.startsWith("{"))try{this[Nx]=JSON.parse(this.a11y)}catch(e){console.warn("Error parsing a11y JSON:",e)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Nx]={};else"object"===typeof this.a11y&&null!=this.a11y?this[Nx]=Object.assign({},this.a11y):this[Nx]={};this[nI].setAttribute("aria-label",this[XT])}}return hx([av({type:Boolean,attribute:"camera-controls"})],y.prototype,"cameraControls",void 0),hx([ax({intrinsics:xx,observeEffects:!0,updateHandler:Jx}),av({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],y.prototype,"cameraOrbit",void 0),hx([ax({intrinsics:Ex,observeEffects:!0,updateHandler:tS}),av({type:String,attribute:"camera-target",hasChanged:()=>!0})],y.prototype,"cameraTarget",void 0),hx([ax({intrinsics:Ax,observeEffects:!0,updateHandler:eS}),av({type:String,attribute:"field-of-view",hasChanged:()=>!0})],y.prototype,"fieldOfView",void 0),hx([ax({intrinsics:Sx,updateHandler:iS}),av({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],y.prototype,"minCameraOrbit",void 0),hx([ax({intrinsics:Cx,updateHandler:nS}),av({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],y.prototype,"maxCameraOrbit",void 0),hx([ax({intrinsics:wx,updateHandler:rS}),av({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],y.prototype,"minFieldOfView",void 0),hx([ax({intrinsics:Ax,updateHandler:oS}),av({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],y.prototype,"maxFieldOfView",void 0),hx([av({type:Number,attribute:"interaction-prompt-threshold"})],y.prototype,"interactionPromptThreshold",void 0),hx([av({type:String,attribute:"interaction-prompt"})],y.prototype,"interactionPrompt",void 0),hx([av({type:String,attribute:"interaction-prompt-style"})],y.prototype,"interactionPromptStyle",void 0),hx([av({type:Number,attribute:"orbit-sensitivity"})],y.prototype,"orbitSensitivity",void 0),hx([av({type:Number,attribute:"zoom-sensitivity"})],y.prototype,"zoomSensitivity",void 0),hx([av({type:Number,attribute:"pan-sensitivity"})],y.prototype,"panSensitivity",void 0),hx([av({type:String,attribute:"touch-action"})],y.prototype,"touchAction",void 0),hx([av({type:Boolean,attribute:"disable-zoom"})],y.prototype,"disableZoom",void 0),hx([av({type:Boolean,attribute:"disable-pan"})],y.prototype,"disablePan",void 0),hx([av({type:Boolean,attribute:"disable-tap"})],y.prototype,"disableTap",void 0),hx([av({type:Number,attribute:"interpolation-decay"})],y.prototype,"interpolationDecay",void 0),hx([av()],y.prototype,"a11y",void 0),y})((e=>{var t,i,n,r,o,s,a,l,c,u;class h extends e{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".ar-button"),this[n]=document.createElement("a"),this[r]=new Set,this[o]=WI,this[s]=!1,this[a]=e=>{e.preventDefault(),this.activateAR()},this[l]=e=>{let{status:t}=e;t!==fS&&this[uI].arRenderer.presentedScene!==this[oI]||(this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}})),t===fS?this.removeAttribute("ar-tracking"):t===gS&&this.setAttribute("ar-tracking",vS))},this[c]=e=>{let{status:t}=e;this.setAttribute("ar-tracking",t),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:t}}))},this[u]=e=>{"_apple_ar_quicklook_button_tapped"==e.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[eM]!==WI}connectedCallback(){super.connectedCallback(),this[uI].arRenderer.addEventListener("status",this[oM]),this.setAttribute("ar-status",fS),this[uI].arRenderer.addEventListener("tracking",this[sM]),this[iM].addEventListener("message",this[aM])}disconnectedCallback(){super.disconnectedCallback(),this[uI].arRenderer.removeEventListener("status",this[oM]),this[uI].arRenderer.removeEventListener("tracking",this[sM]),this[iM].removeEventListener("message",this[aM])}update(e){super.update(e),e.has("arScale")&&(this[oI].canScale="fixed"!==this.arScale),e.has("arPlacement")&&(this[oI].updateShadow(),this[sI]()),e.has("arModes")&&(this[tM]=$I(this.arModes)),(e.has("ar")||e.has("arModes")||e.has("src")||e.has("iosSrc"))&&this[lM]()}async activateAR(){switch(this[eM]){case QI:await this[ZI]();break;case qI:await this[YI]();break;case jI:this[KI]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(t=JI,i=XI,n=iM,r=tM,o=eM,s=nM,a=rM,l=oM,c=sM,u=aM,lM)](){var e;let t=WI;if(this.ar){if(null!=this.src)for(const i of this[tM]){if("webxr"===i&&by&&!UI&&await this[uI].arRenderer.supportsPresentation()){t=qI;break}if("scene-viewer"===i&&!HI&&(Cy||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(null===(e=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)||void 0===e?void 0:e.includes("XR")))){t=jI;break}if("quick-look"===i&&Ty){t=QI;break}}t===WI&&null!=this.iosSrc&&Ty&&(t=QI)}if(t!==WI)this[XI].classList.add("enabled"),this[XI].addEventListener("click",this[rM]);else if(this[XI].classList.contains("enabled")){this[XI].removeEventListener("click",this[rM]),this[XI].classList.remove("enabled");const e=_S;this.setAttribute("ar-status",e),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:e}}))}this[eM]=t}async[YI](){console.log("Attempting to present in AR with WebXR..."),await this[cM]();try{this[XI].removeEventListener("click",this[rM]);const{arRenderer:e}=this[uI];e.placeOnWall="wall"===this.arPlacement,await e.present(this[oI],this.xrEnvironment)}catch(e){console.warn("Error while trying to present in AR with WebXR"),console.error(e),await this[uI].arRenderer.stopPresenting(),UI=!0,console.warn("Falling back to next ar-mode"),await this[lM](),this.activateAR()}finally{this[lM]()}}async[cM](){this.loaded||(this[nM]=!0,this[eI](),await function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((n=>{e.addEventListener(t,(function r(o){i&&!i(o)||(n(o),e.removeEventListener(t,r))}))}))}(this,"load"),this[nM]=!1)}[fI](){return super[fI]()||this[nM]}[KI](){const e=self.location.toString(),t=new URL(e),i=new URL(this.src,e);i.hash&&(i.hash="");const n=new URLSearchParams(i.search);if(t.hash=VI,n.set("mode","ar_preferred"),n.has("disable_occlusion")||n.set("disable_occlusion","true"),"fixed"===this.arScale&&n.set("resizable","false"),"wall"===this.arPlacement&&n.set("enable_vertical_placement","true"),n.has("sound")){const t=new URL(n.get("sound"),e);n.set("sound",t.toString())}if(n.has("link")){const t=new URL(n.get("link"),e);n.set("link",t.toString())}const r=`intent://arvr.google.com/scene-viewer/1.2?${n.toString()+"&file="+encodeURIComponent(i.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(t.toString())};end;`;self.addEventListener("hashchange",(()=>{self.location.hash===VI&&(HI=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[lM]())}),{once:!0}),this[iM].setAttribute("href",r),console.log("Attempting to present in AR with Scene Viewer..."),this[iM].click()}async[ZI](){const e=!this.iosSrc;this[XI].classList.remove("enabled");const t=e?await this.prepareUSDZ():this.iosSrc,i=new URL(t,self.location.toString());if(e){const e=self.location.toString(),t=new URL(e),n=new URL(this.src,t);n.hash&&(i.hash=n.hash)}"fixed"===this.arScale&&(i.hash&&(i.hash+="&"),i.hash+="allowsContentScaling=0");const n=this[iM];n.setAttribute("rel","ar");const r=document.createElement("img");n.appendChild(r),n.setAttribute("href",i.toString()),e&&n.setAttribute("download","model.usdz"),n.style.display="none",n.isConnected||this.shadowRoot.appendChild(n),console.log("Attempting to present in AR with Quick Look..."),n.click(),n.removeChild(r),e&&URL.revokeObjectURL(t),this[XI].classList.add("enabled")}async prepareUSDZ(){const e=this[hI].beginActivity("usdz-conversion");await this[cM]();const{model:t,shadow:i,target:n}=this[oI];if(null==t)return"";let r=!1;null!=i&&(r=i.visible,i.visible=!1),e(.2);const o=new II;n.remove(t),t.position.copy(n.position),t.updateWorldMatrix(!1,!0);const s=await o.parseAsync(t);t.position.set(0,0,0),n.add(t);const a=new Blob([s],{type:"model/vnd.usdz+zip"}),l=URL.createObjectURL(a);return e(1),null!=i&&(i.visible=r),l}}return zI([av({type:Boolean,attribute:"ar"})],h.prototype,"ar",void 0),zI([av({type:String,attribute:"ar-scale"})],h.prototype,"arScale",void 0),zI([av({type:String,attribute:"ar-placement"})],h.prototype,"arPlacement",void 0),zI([av({type:String,attribute:"ar-modes"})],h.prototype,"arModes",void 0),zI([av({type:String,attribute:"ios-src"})],h.prototype,"iosSrc",void 0),zI([av({type:Boolean,attribute:"xr-environment"})],h.prototype,"xrEnvironment",void 0),h})((e=>{var t,i,n,r,o,s,a,l;class c extends e{constructor(){super(...arguments),this.poster=null,this.reveal=hM,this.loading=dM,this[t]=!1,this[i]=!1,this[n]=this.shadowRoot.querySelector(".slot.poster"),this[r]=this.shadowRoot.querySelector("#default-poster"),this[o]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[s]=this[mM].getAttribute("aria-label"),this[a]=((e,t)=>{let i=null;const n=function(){null==i&&(e(...arguments),i=self.setTimeout((()=>i=null),t))};return n.flush=()=>{null!=i&&(self.clearTimeout(i),i=null)},n})((e=>{const t=this[fM].parentNode;requestAnimationFrame((()=>{this[fM].style.transform=`scaleX(${e})`,0===e&&(t.removeChild(this[fM]),t.appendChild(this[fM])),this[fM].classList.toggle("hide",1===e)}))}),100),this[l]=e=>{const t=e.detail.totalProgress,i=e.detail.reason;1===t&&(this[bM].flush(),this.loaded&&(this[_M]||this.reveal===hM)&&this[vM]()),this[bM](t),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t,reason:i}}))};const e=self.ModelViewerElement||{},c=e.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";Qb.setDRACODecoderLocation(c);const u=e.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";Qb.setKTX2TranscoderLocation(u),e.meshoptDecoderLocation&&Qb.setMeshoptDecoderLocation(e.meshoptDecoderLocation);const h=e.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";fC.singleton.textureUtils.lottieLoaderUrl=h}static set dracoDecoderLocation(e){Qb.setDRACODecoderLocation(e)}static get dracoDecoderLocation(){return Qb.getDRACODecoderLocation()}static set ktx2TranscoderLocation(e){Qb.setKTX2TranscoderLocation(e)}static get ktx2TranscoderLocation(){return Qb.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(e){Qb.setMeshoptDecoderLocation(e)}static get meshoptDecoderLocation(){return Qb.getMeshoptDecoderLocation()}static set lottieLoaderLocation(e){fC.singleton.textureUtils.lottieLoaderUrl=e}static get lottieLoaderLocation(){return fC.singleton.textureUtils.lottieLoaderUrl}static mapURLs(e){fC.singleton.loader[Vb].manager.setURLModifier(e)}dismissPoster(){this.loaded?this[vM]():(this[_M]=!0,this[eI]())}showPoster(){const e=this[gM];if(e.classList.contains("show"))return;e.classList.add("show"),this[nI].classList.remove("show");const t=this[mM];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden");const i=this.modelIsVisible;this[yM]=!1,this[WT](i)}getDimensions(){return gI(this[oI].size)}getBoundingBoxCenter(){return gI(this[oI].boundingBox.getCenter(new Nn))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[hI].addEventListener("progress",this[wM])}disconnectedCallback(){super.disconnectedCallback(),this[hI].removeEventListener("progress",this[wM])}async updated(e){super.updated(e),e.has("poster")&&null!=this.poster&&(this[mM].style.backgroundImage=`url(${this.poster})`),e.has("alt")&&this[mM].setAttribute("aria-label",this[YT]),(e.has("reveal")||e.has("loading"))&&this[eI]()}[(t=yM,i=_M,n=gM,r=mM,o=fM,s=AM,a=bM,l=wM,fI)](){return!!this.src&&(this[_M]||this.loading===pM||this.reveal===hM&&this[qT])}[vM](){this[_M]=!1;const e=this[gM];if(!e.classList.contains("show"))return;e.classList.remove("show"),this[nI].classList.add("show");const t=this.modelIsVisible;this[yM]=!0,this[WT](t);const i=this.getRootNode();i&&i.activeElement===this&&this[nI].focus();const n=this[mM];n.setAttribute("aria-hidden","true"),n.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[pI](){return super[pI]()&&this[yM]}}return uM([av({type:String})],c.prototype,"poster",void 0),uM([av({type:String})],c.prototype,"reveal",void 0),uM([av({type:String})],c.prototype,"loading",void 0),c})((e=>{var t;class i extends e{constructor(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];super(i),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[t]=!0,this[oI].subscribeMixerEvent("loop",(e=>{const t=e.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:t}}))})),this[oI].subscribeMixerEvent("finished",(()=>{this[bI]=!0,this.dispatchEvent(new CustomEvent("finished"))}))}get availableAnimations(){return this.loaded?this[oI].animationNames:[]}get duration(){return this[oI].duration}get paused(){return this[bI]}get currentTime(){return this[oI].animationTime}set currentTime(e){this[oI].animationTime=e,this[sI]()}get timeScale(){return this[oI].animationTimeScale}set timeScale(e){this[oI].animationTimeScale=e}pause(){this[bI]||(this[bI]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(e){this.availableAnimations.length>0&&(this[bI]=!1,this[yI](e),this.dispatchEvent(new CustomEvent("play")))}[(t=bI,lI)](){super[lI](),this[bI]=!0,null!=this.animationName&&this[yI](),this.autoplay&&this.play()}[aI](e,t){super[aI](e,t),this[bI]||!this[pI]()&&!this[uI].isPresenting||(this[oI].updateAnimation(t/1e3),this[sI]())}updated(e){super.updated(e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[yI]()}[yI](){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AI;var t;const i=null!==(t=e.repetitions)&&void 0!==t?t:1/0,n=e.pingpong?Ft:1===i?Lt:Ot;this[oI].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,n,i),this[bI]&&(this[oI].updateAnimation(0),this[sI]())}}return vI([av({type:Boolean})],i.prototype,"autoplay",void 0),vI([av({type:String,attribute:"animation-name"})],i.prototype,"animationName",void 0),vI([av({type:Number,attribute:"animation-crossfade-duration"})],i.prototype,"animationCrossfadeDuration",void 0),i})(_I))))))));customElements.define("model-viewer",kM);const BM=new Set(["children","localName","ref","style","className"]),RM=new WeakMap,PM=(e,t,i,n,r)=>{const o=r?.[t];void 0===o?(e[t]=i,null==i&&t in HTMLElement.prototype&&e.removeAttribute(t)):i!==n&&((e,t,i)=>{let n=RM.get(e);void 0===n&&RM.set(e,n=new Map);let r=n.get(t);void 0!==i?void 0===r?(n.set(t,r={handleEvent:i}),e.addEventListener(t,r)):r.handleEvent=i:void 0!==r&&(n.delete(t),e.removeEventListener(t,r))})(e,o,i)},DM=e=>{let{react:t,tagName:i,elementClass:n,events:r,displayName:o}=e;const s=new Set(Object.keys(r??{})),a=t.forwardRef(((e,o)=>{const a=t.useRef(new Map),l=t.useRef(null),c={},u={};for(const[t,i]of Object.entries(e))BM.has(t)?c["className"===t?"class":t]=i:s.has(t)||t in n.prototype?u[t]=i:c[t]=i;return t.useLayoutEffect((()=>{if(null===l.current)return;const t=new Map;for(const i in u)PM(l.current,i,e[i],a.current.get(i),r),a.current.delete(i),t.set(i,e[i]);for(const[e,i]of a.current)PM(l.current,e,void 0,i,r);a.current=t})),t.useLayoutEffect((()=>{l.current?.removeAttribute("defer-hydration")}),[]),c.suppressHydrationWarning=!0,t.createElement(i,{...c,ref:t.useCallback((e=>{l.current=e,"function"==typeof o?o(e):null!==o&&(o.current=e)}),[o])})}));return a.displayName=o??n.name,a};var LM=function(){return LM=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},LM.apply(this,arguments)};Object.create;function OM(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var FM=i(324),NM=i.n(FM),zM="-ms-",UM="-moz-",HM="-webkit-",VM="comm",$M="rule",GM="decl",QM="@keyframes",jM=Math.abs,qM=String.fromCharCode,WM=Object.assign;function XM(e){return e.trim()}function YM(e,t){return(e=t.exec(e))?e[0]:e}function KM(e,t,i){return e.replace(t,i)}function ZM(e,t,i){return e.indexOf(t,i)}function JM(e,t){return 0|e.charCodeAt(t)}function ek(e,t,i){return e.slice(t,i)}function tk(e){return e.length}function ik(e){return e.length}function nk(e,t){return t.push(e),e}function rk(e,t){return e.filter((function(e){return!YM(e,t)}))}var ok=1,sk=1,ak=0,lk=0,ck=0,uk="";function hk(e,t,i,n,r,o,s,a){return{value:e,root:t,parent:i,type:n,props:r,children:o,line:ok,column:sk,length:s,return:"",siblings:a}}function dk(e,t){return WM(hk("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function pk(e){for(;e.root;)e=dk(e.root,{children:[e]});nk(e,e.siblings)}function fk(){return ck=lk>0?JM(uk,--lk):0,sk--,10===ck&&(sk=1,ok--),ck}function gk(){return ck=lk<ak?JM(uk,lk++):0,sk++,10===ck&&(sk=1,ok++),ck}function mk(){return JM(uk,lk)}function _k(){return lk}function vk(e,t){return ek(uk,e,t)}function yk(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bk(e){return ok=sk=1,ak=tk(uk=e),lk=0,[]}function Ak(e){return uk="",e}function wk(e){return XM(vk(lk-1,Ck(91===e?e+2:40===e?e+1:e)))}function xk(e){for(;(ck=mk())&&ck<33;)gk();return yk(e)>2||yk(ck)>3?"":" "}function Sk(e,t){for(;--t&&gk()&&!(ck<48||ck>102||ck>57&&ck<65||ck>70&&ck<97););return vk(e,_k()+(t<6&&32==mk()&&32==gk()))}function Ck(e){for(;gk();)switch(ck){case e:return lk;case 34:case 39:34!==e&&39!==e&&Ck(ck);break;case 40:41===e&&Ck(e);break;case 92:gk()}return lk}function Ek(e,t){for(;gk()&&e+ck!==57&&(e+ck!==84||47!==mk()););return"/*"+vk(t,lk-1)+"*"+qM(47===e?e:gk())}function Tk(e){for(;!yk(mk());)gk();return vk(e,lk)}function Ik(e,t){for(var i="",n=0;n<e.length;n++)i+=t(e[n],n,e,t)||"";return i}function Mk(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case GM:return e.return=e.return||e.value;case VM:return"";case QM:return e.return=e.value+"{"+Ik(e.children,n)+"}";case $M:if(!tk(e.value=e.props.join(",")))return""}return tk(i=Ik(e.children,n))?e.return=e.value+"{"+i+"}":""}function kk(e,t,i){switch(function(e,t){return 45^JM(e,0)?(((t<<2^JM(e,0))<<2^JM(e,1))<<2^JM(e,2))<<2^JM(e,3):0}(e,t)){case 5103:return HM+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return HM+e+e;case 4789:return UM+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return HM+e+UM+e+zM+e+e;case 5936:switch(JM(e,t+11)){case 114:return HM+e+zM+KM(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return HM+e+zM+KM(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return HM+e+zM+KM(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return HM+e+zM+e+e;case 6165:return HM+e+zM+"flex-"+e+e;case 5187:return HM+e+KM(e,/(\w+).+(:[^]+)/,HM+"box-$1$2"+zM+"flex-$1$2")+e;case 5443:return HM+e+zM+"flex-item-"+KM(e,/flex-|-self/g,"")+(YM(e,/flex-|baseline/)?"":zM+"grid-row-"+KM(e,/flex-|-self/g,""))+e;case 4675:return HM+e+zM+"flex-line-pack"+KM(e,/align-content|flex-|-self/g,"")+e;case 5548:return HM+e+zM+KM(e,"shrink","negative")+e;case 5292:return HM+e+zM+KM(e,"basis","preferred-size")+e;case 6060:return HM+"box-"+KM(e,"-grow","")+HM+e+zM+KM(e,"grow","positive")+e;case 4554:return HM+KM(e,/([^-])(transform)/g,"$1"+HM+"$2")+e;case 6187:return KM(KM(KM(e,/(zoom-|grab)/,HM+"$1"),/(image-set)/,HM+"$1"),e,"")+e;case 5495:case 3959:return KM(e,/(image-set\([^]*)/,HM+"$1$`$1");case 4968:return KM(KM(e,/(.+:)(flex-)?(.*)/,HM+"box-pack:$3"+zM+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+HM+e+e;case 4200:if(!YM(e,/flex-|baseline/))return zM+"grid-column-align"+ek(e,t)+e;break;case 2592:case 3360:return zM+KM(e,"template-","")+e;case 4384:case 3616:return i&&i.some((function(e,i){return t=i,YM(e.props,/grid-\w+-end/)}))?~ZM(e+(i=i[t].value),"span",0)?e:zM+KM(e,"-start","")+e+zM+"grid-row-span:"+(~ZM(i,"span",0)?YM(i,/\d+/):+YM(i,/\d+/)-+YM(e,/\d+/))+";":zM+KM(e,"-start","")+e;case 4896:case 4128:return i&&i.some((function(e){return YM(e.props,/grid-\w+-start/)}))?e:zM+KM(KM(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return KM(e,/(.+)-inline(.+)/,HM+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tk(e)-1-t>6)switch(JM(e,t+1)){case 109:if(45!==JM(e,t+4))break;case 102:return KM(e,/(.+:)(.+)-([^]+)/,"$1"+HM+"$2-$3$1"+UM+(108==JM(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ZM(e,"stretch",0)?kk(KM(e,"stretch","fill-available"),t,i)+e:e}break;case 5152:case 5920:return KM(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,i,n,r,o,s,a){return zM+i+":"+n+a+(r?zM+i+"-span:"+(o?s:+s-+n)+a:"")+e}));case 4949:if(121===JM(e,t+6))return KM(e,":",":"+HM)+e;break;case 6444:switch(JM(e,45===JM(e,14)?18:11)){case 120:return KM(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+HM+(45===JM(e,14)?"inline-":"")+"box$3$1"+HM+"$2$3$1"+zM+"$2box$3")+e;case 100:return KM(e,":",":"+zM)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return KM(e,"scroll-","scroll-snap-")+e}return e}function Bk(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case GM:return void(e.return=kk(e.value,e.length,i));case QM:return Ik([dk(e,{value:KM(e.value,"@","@"+HM)})],n);case $M:if(e.length)return function(e,t){return e.map(t).join("")}(i=e.props,(function(t){switch(YM(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":pk(dk(e,{props:[KM(t,/:(read-\w+)/,":-moz-$1")]})),pk(dk(e,{props:[t]})),WM(e,{props:rk(i,n)});break;case"::placeholder":pk(dk(e,{props:[KM(t,/:(plac\w+)/,":"+HM+"input-$1")]})),pk(dk(e,{props:[KM(t,/:(plac\w+)/,":-moz-$1")]})),pk(dk(e,{props:[KM(t,/:(plac\w+)/,zM+"input-$1")]})),pk(dk(e,{props:[t]})),WM(e,{props:rk(i,n)})}return""}))}}function Rk(e){return Ak(Pk("",null,null,null,[""],e=bk(e),0,[0],e))}function Pk(e,t,i,n,r,o,s,a,l){for(var c=0,u=0,h=s,d=0,p=0,f=0,g=1,m=1,_=1,v=0,y="",b=r,A=o,w=n,x=y;m;)switch(f=v,v=gk()){case 40:if(108!=f&&58==JM(x,h-1)){-1!=ZM(x+=KM(wk(v),"&","&\f"),"&\f",jM(c?a[c-1]:0))&&(_=-1);break}case 34:case 39:case 91:x+=wk(v);break;case 9:case 10:case 13:case 32:x+=xk(f);break;case 92:x+=Sk(_k()-1,7);continue;case 47:switch(mk()){case 42:case 47:nk(Lk(Ek(gk(),_k()),t,i,l),l);break;default:x+="/"}break;case 123*g:a[c++]=tk(x)*_;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==_&&(x=KM(x,/\f/g,"")),p>0&&tk(x)-h&&nk(p>32?Ok(x+";",n,i,h-1,l):Ok(KM(x," ","")+";",n,i,h-2,l),l);break;case 59:x+=";";default:if(nk(w=Dk(x,t,i,c,u,r,a,y,b=[],A=[],h,o),o),123===v)if(0===u)Pk(x,t,w,w,b,o,h,a,A);else switch(99===d&&110===JM(x,3)?100:d){case 100:case 108:case 109:case 115:Pk(e,w,w,n&&nk(Dk(e,w,w,0,0,r,a,y,r,b=[],h,A),A),r,A,h,a,n?b:A);break;default:Pk(x,w,w,w,[""],A,0,a,A)}}c=u=p=0,g=_=1,y=x="",h=s;break;case 58:h=1+tk(x),p=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==fk())continue;switch(x+=qM(v),v*g){case 38:_=u>0?1:(x+="\f",-1);break;case 44:a[c++]=(tk(x)-1)*_,_=1;break;case 64:45===mk()&&(x+=wk(gk())),d=mk(),u=h=tk(y=x+=Tk(_k())),v++;break;case 45:45===f&&2==tk(x)&&(g=0)}}return o}function Dk(e,t,i,n,r,o,s,a,l,c,u,h){for(var d=r-1,p=0===r?o:[""],f=ik(p),g=0,m=0,_=0;g<n;++g)for(var v=0,y=ek(e,d+1,d=jM(m=s[g])),b=e;v<f;++v)(b=XM(m>0?p[v]+" "+y:KM(y,/&\f/g,p[v])))&&(l[_++]=b);return hk(e,t,i,0===r?$M:a,l,c,u,h)}function Lk(e,t,i,n){return hk(e,t,i,VM,qM(ck),ek(e,2,-2),0,n)}function Ok(e,t,i,n,r){return hk(e,t,i,GM,ek(e,0,n),ek(e,n+1,-1),n,r)}var Fk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Nk="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",zk="active",Uk="data-styled-version",Hk="6.1.13",Vk="/*!sc*/\n",$k="undefined"!=typeof window&&"HTMLElement"in window,Gk=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Qk=(new Set,Object.freeze([])),jk=Object.freeze({});function qk(e,t,i){return void 0===i&&(i=jk),e.theme!==i.theme&&e.theme||t||i.theme}var Wk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Xk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Yk=/(^-|-$)/g;function Kk(e){return e.replace(Xk,"-").replace(Yk,"")}var Zk=/(a)(d)/gi,Jk=function(e){return String.fromCharCode(e+(e>25?39:97))};function eB(e){var t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=Jk(t%52)+i;return(Jk(t%52)+i).replace(Zk,"$1-$2")}var tB,iB=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},nB=function(e){return iB(5381,e)};function rB(e){return eB(nB(e)>>>0)}function oB(e){return e.displayName||e.name||"Component"}function sB(e){return"string"==typeof e&&!0}var aB="function"==typeof Symbol&&Symbol.for,lB=aB?Symbol.for("react.memo"):60115,cB=aB?Symbol.for("react.forward_ref"):60112,uB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pB=((tB={})[cB]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tB[lB]=dB,tB);function fB(e){return("type"in(t=e)&&t.type.$$typeof)===lB?dB:"$$typeof"in e?pB[e.$$typeof]:uB;var t}var gB=Object.defineProperty,mB=Object.getOwnPropertyNames,_B=Object.getOwnPropertySymbols,vB=Object.getOwnPropertyDescriptor,yB=Object.getPrototypeOf,bB=Object.prototype;function AB(e,t,i){if("string"!=typeof t){if(bB){var n=yB(t);n&&n!==bB&&AB(e,n,i)}var r=mB(t);_B&&(r=r.concat(_B(t)));for(var o=fB(e),s=fB(t),a=0;a<r.length;++a){var l=r[a];if(!(l in hB||i&&i[l]||s&&l in s||o&&l in o)){var c=vB(t,l);try{gB(e,l,c)}catch(e){}}}}return e}function wB(e){return"function"==typeof e}function xB(e){return"object"==typeof e&&"styledComponentId"in e}function SB(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function CB(e,t){if(0===e.length)return"";for(var i=e[0],n=1;n<e.length;n++)i+=t?t+e[n]:e[n];return i}function EB(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function TB(e,t,i){if(void 0===i&&(i=!1),!i&&!EB(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=TB(e[n],t[n]);else if(EB(t))for(var n in t)e[n]=TB(e[n],t[n]);return e}function IB(e,t){Object.defineProperty(e,"toString",{value:t})}function MB(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var kB=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,r=n;e>=r;)if((r<<=1)<0)throw MB(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(i),this.length=r;for(var o=n;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),n=i+t;this.groupSizes[e]=0;for(var r=i;r<n;r++)this.tag.deleteRule(i)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var i=this.groupSizes[e],n=this.indexOfGroup(e),r=n+i,o=n;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(Vk);return t},e}(),BB=new Map,RB=new Map,PB=1,DB=function(e){if(BB.has(e))return BB.get(e);for(;RB.has(PB);)PB++;var t=PB++;return BB.set(e,t),RB.set(t,e),t},LB=function(e,t){PB=t+1,BB.set(e,t),RB.set(t,e)},OB="style[".concat(Nk,"][").concat(Uk,'="').concat(Hk,'"]'),FB=new RegExp("^".concat(Nk,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),NB=function(e,t,i){for(var n,r=i.split(","),o=0,s=r.length;o<s;o++)(n=r[o])&&e.registerName(t,n)},zB=function(e,t){for(var i,n=(null!==(i=t.textContent)&&void 0!==i?i:"").split(Vk),r=[],o=0,s=n.length;o<s;o++){var a=n[o].trim();if(a){var l=a.match(FB);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(LB(u,c),NB(e,u,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(a)}}},UB=function(e){for(var t=document.querySelectorAll(OB),i=0,n=t.length;i<n;i++){var r=t[i];r&&r.getAttribute(Nk)!==zk&&(zB(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function HB(){return i.nc}var VB=function(e){var t=document.head,i=e||t,n=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Nk,"]")));return t[t.length-1]}(i),o=void 0!==r?r.nextSibling:null;n.setAttribute(Nk,zk),n.setAttribute(Uk,Hk);var s=HB();return s&&n.setAttribute("nonce",s),i.insertBefore(n,o),n},$B=function(){function e(e){this.element=VB(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,i=0,n=t.length;i<n;i++){var r=t[i];if(r.ownerNode===e)return r}throw MB(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),GB=function(){function e(e){this.element=VB(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),QB=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),jB=$k,qB={isServer:!$k,useCSSOMInjection:!Gk},WB=function(){function e(e,t,i){void 0===e&&(e=jk),void 0===t&&(t={});var n=this;this.options=LM(LM({},qB),e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&$k&&jB&&(jB=!1,UB(this)),IB(this,(function(){return function(e){for(var t=e.getTag(),i=t.length,n="",r=function(i){var r=function(e){return RB.get(e)}(i);if(void 0===r)return"continue";var o=e.names.get(r),s=t.getGroup(i);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(Nk,".g").concat(i,'[id="').concat(r,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),n+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(Vk)},o=0;o<i;o++)r(o);return n}(n)}))}return e.registerId=function(e){return DB(e)},e.prototype.rehydrate=function(){!this.server&&$k&&UB(this)},e.prototype.reconstructWithOptions=function(t,i){return void 0===i&&(i=!0),new e(LM(LM({},this.options),t),this.gs,i&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,i=e.target;return e.isServer?new QB(i):t?new $B(i):new GB(i)}(this.options),new kB(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(DB(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},e.prototype.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(DB(e),i)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(DB(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),XB=/&/g,YB=/^\s*\/\/.*$/gm;function KB(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=KB(e.children,t)),e}))}function ZB(e){var t,i,n,r=void 0===e?jk:e,o=r.options,s=void 0===o?jk:o,a=r.plugins,l=void 0===a?Qk:a,c=function(e,n,r){return r.startsWith(i)&&r.endsWith(i)&&r.replaceAll(i,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===$M&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(XB,i).replace(n,c))})),s.prefix&&u.push(Bk),u.push(Mk);var h=function(e,r,o,a){void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,i=r,n=new RegExp("\\".concat(i,"\\b"),"g");var l=e.replace(YB,""),c=Rk(o||r?"".concat(o," ").concat(r," { ").concat(l," }"):l);s.namespace&&(c=KB(c,s.namespace));var h,d=[];return Ik(c,function(e){var t=ik(e);return function(i,n,r,o){for(var s="",a=0;a<t;a++)s+=e[a](i,n,r,o)||"";return s}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=l.length?l.reduce((function(e,t){return t.name||MB(15),iB(e,t.name)}),5381).toString():"",h}var JB=new WB,eR=ZB(),tR=r.createContext({shouldForwardProp:void 0,styleSheet:JB,stylis:eR}),iR=(tR.Consumer,r.createContext(void 0));function nR(){return(0,r.useContext)(tR)}function rR(e){var t=(0,r.useState)(e.stylisPlugins),i=t[0],n=t[1],o=nR().styleSheet,s=(0,r.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,r.useMemo)((function(){return ZB({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:i})}),[e.enableVendorPrefixes,e.namespace,i]);(0,r.useEffect)((function(){NM()(i,e.stylisPlugins)||n(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return r.createElement(tR.Provider,{value:l},r.createElement(iR.Provider,{value:a},e.children))}var oR=function(){function e(e,t){var i=this;this.inject=function(e,t){void 0===t&&(t=eR);var n=i.name+t.hash;e.hasNameForId(i.id,n)||e.insertRules(i.id,n,t(i.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,IB(this,(function(){throw MB(12,String(i.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=eR),this.name+e.hash},e}(),sR=function(e){return e>="A"&&e<="Z"};function aR(e){for(var t="",i=0;i<e.length;i++){var n=e[i];if(1===i&&"-"===n&&"-"===e[0])return e;sR(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var lR=function(e){return null==e||!1===e||""===e},cR=function(e){var t,i,n=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!lR(o)&&(Array.isArray(o)&&o.isCss||wB(o)?n.push("".concat(aR(r),":"),o,";"):EB(o)?n.push.apply(n,OM(OM(["".concat(r," {")],cR(o),!1),["}"],!1)):n.push("".concat(aR(r),": ").concat((t=r,null==(i=o)||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||t in Fk||t.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return n};function uR(e,t,i,n){return lR(e)?[]:xB(e)?[".".concat(e.styledComponentId)]:wB(e)?!wB(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:uR(e(t),t,i,n):e instanceof oR?i?(e.inject(i,n),[e.getName(n)]):[e]:EB(e)?cR(e):Array.isArray(e)?Array.prototype.concat.apply(Qk,e.map((function(e){return uR(e,t,i,n)}))):[e.toString()];var r}function hR(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(wB(i)&&!xB(i))return!1}return!0}var dR=nB(Hk),pR=function(){function e(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&hR(e),this.componentId=t,this.baseHash=iB(dR,t),this.baseStyle=i,WB.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,i){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=SB(n,this.staticRulesId);else{var r=CB(uR(this.rules,e,t,i)),o=eB(iB(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=i(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}n=SB(n,o),this.staticRulesId=o}else{for(var a=iB(this.baseHash,i.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=CB(uR(u,e,t,i));a=iB(a,h+c),l+=h}}if(l){var d=eB(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,i(l,".".concat(d),void 0,this.componentId)),n=SB(n,d)}}return n},e}(),fR=r.createContext(void 0);fR.Consumer;var gR={};new Set;function mR(e,t,i){var n=xB(e),o=e,s=!sB(e),a=t.attrs,l=void 0===a?Qk:a,c=t.componentId,u=void 0===c?function(e,t){var i="string"!=typeof e?"sc":Kk(e);gR[i]=(gR[i]||0)+1;var n="".concat(i,"-").concat(rB(Hk+i+gR[i]));return t?"".concat(t,"-").concat(n):n}(t.displayName,t.parentComponentId):c,h=t.displayName,d=void 0===h?function(e){return sB(e)?"styled.".concat(e):"Styled(".concat(oB(e),")")}(e):h,p=t.displayName&&t.componentId?"".concat(Kk(t.displayName),"-").concat(t.componentId):t.componentId||u,f=n&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(n&&o.shouldForwardProp){var m=o.shouldForwardProp;if(t.shouldForwardProp){var _=t.shouldForwardProp;g=function(e,t){return m(e,t)&&_(e,t)}}else g=m}var v=new pR(i,p,n?o.componentStyle:void 0);function y(e,t){return function(e,t,i){var n=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=r.useContext(fR),h=nR(),d=e.shouldForwardProp||h.shouldForwardProp,p=qk(t,u,s)||jk,f=function(e,t,i){for(var n,r=LM(LM({},t),{className:void 0,theme:i}),o=0;o<e.length;o+=1){var s=wB(n=e[o])?n(r):n;for(var a in s)r[a]="className"===a?SB(r[a],s[a]):"style"===a?LM(LM({},r[a]),s[a]):s[a]}return t.className&&(r.className=SB(r.className,t.className)),r}(n,t,p),g=f.as||c,m={};for(var _ in f)void 0===f[_]||"$"===_[0]||"as"===_||"theme"===_&&f.theme===p||("forwardedAs"===_?m.as=f.forwardedAs:d&&!d(_,g)||(m[_]=f[_]));var v=function(e,t){var i=nR();return e.generateAndInjectStyles(t,i.styleSheet,i.stylis)}(o,f),y=SB(a,l);return v&&(y+=" "+v),f.className&&(y+=" "+f.className),m[sB(g)&&!Wk.has(g)?"class":"className"]=y,m.ref=i,(0,r.createElement)(g,m)}(b,e,t)}y.displayName=d;var b=r.forwardRef(y);return b.attrs=f,b.componentStyle=v,b.displayName=d,b.shouldForwardProp=g,b.foldedComponentIds=n?SB(o.foldedComponentIds,o.styledComponentId):"",b.styledComponentId=p,b.target=n?o.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=n?function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0,r=t;n<r.length;n++)TB(e,r[n],!0);return e}({},o.defaultProps,e):e}}),IB(b,(function(){return".".concat(b.styledComponentId)})),s&&AB(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function _R(e,t){for(var i=[e[0]],n=0,r=t.length;n<r;n+=1)i.push(t[n],e[n+1]);return i}var vR=function(e){return Object.assign(e,{isCss:!0})};function yR(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(wB(e)||EB(e))return vR(uR(_R(Qk,OM([e],t,!0))));var n=e;return 0===t.length&&1===n.length&&"string"==typeof n[0]?uR(n):vR(uR(_R(n,t)))}function bR(e,t,i){if(void 0===i&&(i=jk),!t)throw MB(1,t);var n=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,i,yR.apply(void 0,OM([n],r,!1)))};return n.attrs=function(n){return bR(e,t,LM(LM({},i),{attrs:Array.prototype.concat(i.attrs,n).filter(Boolean)}))},n.withConfig=function(n){return bR(e,t,LM(LM({},i),n))},n}var AR=function(e){return bR(mR,e)},wR=AR;Wk.forEach((function(e){wR[e]=AR(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=hR(e),WB.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,i,n){var r=n(CB(uR(this.rules,t,i,n)),""),o=this.componentId+e;i.insertRules(o,o,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,i,n){e>2&&WB.registerId(this.componentId+e),this.removeStyles(e,i),this.createStyles(e,t,i,n)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var i=HB(),n=CB([i&&'nonce="'.concat(i,'"'),"".concat(Nk,'="true"'),"".concat(Uk,'="').concat(Hk,'"')].filter(Boolean)," ");return"<style ".concat(n,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw MB(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw MB(2);var i=e.instance.toString();if(!i)return[];var n=((t={})[Nk]="",t[Uk]=Hk,t.dangerouslySetInnerHTML={__html:i},t),o=HB();return o&&(n.nonce=o),[r.createElement("style",LM({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new WB({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw MB(2);return r.createElement(rR,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw MB(3)}})(),"__sc-".concat(Nk,"__");var xR=i(950),SR=i(579),CR=i(391);e=i.hmd(e);var ER=function(e,t,i){if(void 0===i&&(i=null),e.length<=t)return e;var n=t-(i=i||"...").length,r=Math.ceil(n/2),o=Math.floor(n/2);return e.substr(0,r)+i+e.substr(e.length-o)};function TR(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function IR(e,t){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function MR(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function kR(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}"function"==typeof SuppressedError&&SuppressedError;var BR,RR=wR.div(BR||(BR=kR(["\n  width: 100%;\n  height: 100%;\n\n  > model-viewer {\n    width: 100%;\n    height: 100%;\n  }\n"],["\n  width: 100%;\n  height: 100%;\n\n  > model-viewer {\n    width: 100%;\n    height: 100%;\n  }\n"])));function PR(){return PR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},PR.apply(null,arguments)}function DR(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}const LR=(0,r.forwardRef)(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(NR);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):(0,r.isValidElement)(e)?e.props.children:null:t));return(0,r.createElement)(OR,PR({},n,{ref:t}),(0,r.isValidElement)(e)?(0,r.cloneElement)(e,void 0,i):null)}return(0,r.createElement)(OR,PR({},n,{ref:t}),i)}));LR.displayName="Slot";const OR=(0,r.forwardRef)(((e,t)=>{const{children:i,...n}=e;return(0,r.isValidElement)(i)?(0,r.cloneElement)(i,{...zR(n,i.props),ref:DR(t,i.ref)}):r.Children.count(i)>1?r.Children.only(null):null}));OR.displayName="SlotClone";const FR=e=>{let{children:t}=e;return(0,r.createElement)(r.Fragment,null,t)};function NR(e){return(0,r.isValidElement)(e)&&e.type===FR}function zR(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}const UR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=(0,r.forwardRef)(((e,i)=>{const{asChild:n,...o}=e,s=n?LR:t;return(0,r.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,r.createElement)(s,PR({},o,{ref:i}))}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{}),HR=(0,r.forwardRef)(((e,t)=>{var i;const{container:n=(null===globalThis||void 0===globalThis||null===(i=globalThis.document)||void 0===i?void 0:i.body),...o}=e;return n?xR.createPortal((0,r.createElement)(UR.div,PR({},o,{ref:t})),n):null})),VR=HR;var $R=Object.prototype.hasOwnProperty;function GR(e,t){var i,n;if(e===t)return!0;if(e&&t&&(i=e.constructor)===t.constructor){if(i===Date)return e.getTime()===t.getTime();if(i===RegExp)return e.toString()===t.toString();if(i===Array){if((n=e.length)===t.length)for(;n--&&GR(e[n],t[n]););return-1===n}if(!i||"object"==typeof e){for(i in n=0,e){if($R.call(e,i)&&++n&&!$R.call(t,i))return!1;if(!(i in t)||!GR(e[i],t[i]))return!1}return Object.keys(t).length===n}}return e!=e&&t!=t}function QR(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(t,i[n])||!Object.is(e[i[n]],t[i[n]]))return!1;return!0}var jR=function(e,t,i,n){this.name=e,this.fn=t,this.args=i,this.modifiers=n};function qR(e,t){return void 0===t&&(t="simple"),"object"==typeof e?e[t]:e}function WR(e,t,i){if(e.length){var n=e.shift(),r=WR(e,t,i);return n.perform(r,i)}return qR(t)}function XR(e,t,i){if(e.length){var n=e.shift(),r=XR(e,t,i);return n.performAsync(r,i)}return function(e){return Promise.resolve(qR(t,"async")(e))}}jR.prototype._test=function(e){var t=this.fn;try{WR(this.modifiers.slice(),t,this)(e)}catch(e){t=function(){return!1}}try{return WR(this.modifiers.slice(),t,this)(e)}catch(e){return!1}},jR.prototype._check=function(e){try{WR(this.modifiers.slice(),this.fn,this)(e)}catch(e){if(WR(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!WR(this.modifiers.slice(),this.fn,this)(e))throw null},jR.prototype._testAsync=function(e){var t=this;return new Promise((function(i,n){XR(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?i(e):n(null)})).catch((function(e){return n(e)}))}))};var YR=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},KR=function(e){function t(i,n,r,o){for(var s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];e.call(this,s),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=i,this.value=n,this.cause=r,this.target=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ZR=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function JR(e,t,i,n){if(t.length){var r=t.shift();r._testAsync(e).then((function(){JR(e,t,i,n)}),(function(t){n(new KR(r,e,t))}))}else i(e)}ZR.prototype._applyRule=function(e,t){var i=this;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return i.chain.push(new jR(t,e.apply(i,n),n,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},ZR.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new YR(t,e.simple,e.async)),this},ZR.prototype._clone=function(){return new ZR(this.chain.slice(),this.nextRuleModifiers.slice())},ZR.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},ZR.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(i){try{i._check(e)}catch(av){t.push(new KR(i,e,av))}})),t},ZR.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(i){throw new KR(t,e,i)}}))},ZR.prototype.testAsync=function(e){var t=this;return new Promise((function(i,n){JR(e,t.chain.slice(),i,n)}))};var eP=function(e,t){return!(!t||"string"!=typeof e||0!==e.trim().length)||null==e};function tP(){return"undefined"!=typeof Proxy?nP(new ZR):rP(new ZR)}var iP={};function nP(e){return new Proxy(e,{get:function(t,i){if(i in t)return t[i];var n=nP(e._clone());return i in oP?n._applyModifier(oP[i],i):i in iP?n._applyRule(iP[i],i):i in lP?n._applyRule(lP[i],i):void 0}})}function rP(e){var t=function(e,t){return Object.keys(e).forEach((function(i){t[i]=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return rP(t._clone())._applyRule(e[i],i).apply(void 0,n)}})),t},i=t(lP,e),n=t(iP,i);return Object.keys(oP).forEach((function(e){Object.defineProperty(n,e,{get:function(){return rP(n._clone())._applyModifier(oP[e],e)}})})),n}tP.extend=function(e){Object.assign(iP,e)},tP.clearCustomRules=function(){iP={}};var oP={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return aP(t).some((function(t){try{return e(t)}catch(e){return!1}}))}},async:function(e){return function(t){return Promise.all(aP(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(e){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&aP(t).every(e)}},async:function(e){return function(t){return Promise.all(aP(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(i){return sP(t)&&i&&"object"==typeof i?Object.keys(t.args[0]).length===Object.keys(i).length&&e(i):e(i)}},async:function(e,t){return function(i){return Promise.resolve(e(i)).then((function(e){return sP(t)&&i&&"object"==typeof i?Object.keys(t.args[0]).length===Object.keys(i).length&&e:e})).catch((function(){return!1}))}}}};function sP(e){return e&&"schema"===e.name&&e.args.length>0&&"object"==typeof e.args[0]}function aP(e){return"string"==typeof e?e.split(""):e}var lP={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"==typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||uP)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return cP("string")},boolean:function(){return cP("boolean")},undefined:function(){return cP("undefined")},null:function(){return cP("null")},array:function(){return cP("array")},object:function(){return cP("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"==typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(i){return i.length>=e&&i.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(i){return i>=e&&i<=t}},range:function(e,t){return function(i){return i>=e&&i<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2==0}},odd:function(){return function(e){return e%2!=0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var i=[];if(Object.keys(e).forEach((function(n){var r=e[n];try{r.check((t||{})[n])}catch(e){e.target=n,i.push(e)}})),i.length>0)throw i;return!0},async:function(t){var i=[],n=Object.keys(e).map((function(n){return e[n].testAsync((t||{})[n]).catch((function(e){e.target=n,i.push(e)}))}));return Promise.all(n).then((function(){if(i.length>0)throw i;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(i){return eP(i,t)||void 0===e.check(i)},async:function(i){return eP(i,t)||e.testAsync(i)}}}};function cP(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function uP(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var hP="colors",dP="sizes",pP="space",fP={gap:pP,gridGap:pP,columnGap:pP,gridColumnGap:pP,rowGap:pP,gridRowGap:pP,inset:pP,insetBlock:pP,insetBlockEnd:pP,insetBlockStart:pP,insetInline:pP,insetInlineEnd:pP,insetInlineStart:pP,margin:pP,marginTop:pP,marginRight:pP,marginBottom:pP,marginLeft:pP,marginBlock:pP,marginBlockEnd:pP,marginBlockStart:pP,marginInline:pP,marginInlineEnd:pP,marginInlineStart:pP,padding:pP,paddingTop:pP,paddingRight:pP,paddingBottom:pP,paddingLeft:pP,paddingBlock:pP,paddingBlockEnd:pP,paddingBlockStart:pP,paddingInline:pP,paddingInlineEnd:pP,paddingInlineStart:pP,top:pP,right:pP,bottom:pP,left:pP,scrollMargin:pP,scrollMarginTop:pP,scrollMarginRight:pP,scrollMarginBottom:pP,scrollMarginLeft:pP,scrollMarginX:pP,scrollMarginY:pP,scrollMarginBlock:pP,scrollMarginBlockEnd:pP,scrollMarginBlockStart:pP,scrollMarginInline:pP,scrollMarginInlineEnd:pP,scrollMarginInlineStart:pP,scrollPadding:pP,scrollPaddingTop:pP,scrollPaddingRight:pP,scrollPaddingBottom:pP,scrollPaddingLeft:pP,scrollPaddingX:pP,scrollPaddingY:pP,scrollPaddingBlock:pP,scrollPaddingBlockEnd:pP,scrollPaddingBlockStart:pP,scrollPaddingInline:pP,scrollPaddingInlineEnd:pP,scrollPaddingInlineStart:pP,fontSize:"fontSizes",background:hP,backgroundColor:hP,backgroundImage:hP,borderImage:hP,border:hP,borderBlock:hP,borderBlockEnd:hP,borderBlockStart:hP,borderBottom:hP,borderBottomColor:hP,borderColor:hP,borderInline:hP,borderInlineEnd:hP,borderInlineStart:hP,borderLeft:hP,borderLeftColor:hP,borderRight:hP,borderRightColor:hP,borderTop:hP,borderTopColor:hP,caretColor:hP,color:hP,columnRuleColor:hP,fill:hP,outline:hP,outlineColor:hP,stroke:hP,textDecorationColor:hP,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:dP,minBlockSize:dP,maxBlockSize:dP,inlineSize:dP,minInlineSize:dP,maxInlineSize:dP,width:dP,minWidth:dP,maxWidth:dP,height:dP,minHeight:dP,maxHeight:dP,flexBasis:dP,gridTemplateColumns:dP,gridTemplateRows:dP,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},gP=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,mP=()=>{const e=Object.create(null);return function(t,i){const n=(e=>JSON.stringify(e,gP))(t);for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return n in e?e[n]:e[n]=i(t,...o)}},_P=Symbol.for("sxs.internal"),vP=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),yP=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:bP}=Object.prototype,AP=e=>e.includes("-")?e:e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),wP=/\s+(?![^()]*\))/,xP=e=>t=>e(..."string"==typeof t?String(t).split(wP):[t]),SP={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:xP(((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e}))),marginInline:xP(((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e}))),maxSize:xP(((e,t)=>({maxBlockSize:e,maxInlineSize:t||e}))),minSize:xP(((e,t)=>({minBlockSize:e,minInlineSize:t||e}))),paddingBlock:xP(((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e}))),paddingInline:xP(((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e})))},CP=/([\d.]+)([^]*)/,EP=(e,t)=>e.length?e.reduce(((e,i)=>(e.push(...t.map((e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(e)?`:is(${i})`:i):i+" "+e))),e)),[]):t,TP=(e,t)=>e in IP&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,n,r)=>i+("stretch"===n?`-moz-available${r};${AP(e)}:${i}-webkit-fill-available`:`-moz-fit-content${r};${AP(e)}:${i}fit-content`)+r)):String(t),IP={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},MP=e=>e?e+"-":"",kP=(e,t,i)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((e,n,r,o,s)=>"$"==o==!!r?e:(n||"--"==o?"calc(":"")+"var(--"+("$"===o?MP(t)+(s.includes("$")?"":MP(i))+s.replace(/\$/g,"-"):s)+")"+(n||"--"==o?"*"+(n||"")+(r||"1")+")":""))),BP=/\s*,\s*(?![^()]*\))/,RP=Object.prototype.toString,PP=(e,t,i,n,r)=>{let o,s,a;const l=(e,t,i)=>{let c,u;const h=e=>{for(c in e){const f=64===c.charCodeAt(0),g=f&&Array.isArray(e[c])?e[c]:[e[c]];for(u of g){const e=/[A-Z]/.test(p=c)?p:p.replace(/-[^]/g,(e=>e[1].toUpperCase())),g="object"==typeof u&&u&&u.toString===RP&&(!n.utils[e]||!t.length);if(e in n.utils&&!g){const t=n.utils[e];if(t!==s){s=t,h(t(u)),s=null;continue}}else if(e in SP){const t=SP[e];if(t!==a){a=t,h(t(u)),a=null;continue}}if(f&&(d=c.slice(1)in n.media?"@media "+n.media[c.slice(1)]:c,c=d.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((e,t,i,n,r,o)=>{const s=CP.test(t),a=.0625*(s?-1:1),[l,c]=s?[n,t]:[t,n];return"("+("="===i[0]?"":">"===i[0]===s?"max-":"min-")+l+":"+("="!==i[0]&&1===i.length?c.replace(CP,((e,t,n)=>Number(t)+a*(">"===i?1:-1)+n)):c)+(r?") and ("+(">"===r[0]?"min-":"max-")+l+":"+(1===r.length?o.replace(CP,((e,t,i)=>Number(t)+a*(">"===r?-1:1)+i)):o):"")+")"}))),g){const e=f?i.concat(c):[...i],n=f?[...t]:EP(t,c.split(BP));void 0!==o&&r(DP(...o)),o=void 0,l(u,n,e)}else void 0===o&&(o=[[],t,i]),c=f||36!==c.charCodeAt(0)?c:`--${MP(n.prefix)}${c.slice(1).replace(/\$/g,"-")}`,u=g?u:"number"==typeof u?u&&e in LP?String(u)+"px":String(u):kP(TP(e,null==u?"":u),n.prefix,n.themeMap[e]),o[0].push(`${f?`${c} `:`${AP(c)}:`}${u}`)}}var d,p};h(e),void 0!==o&&r(DP(...o)),o=void 0};l(e,t,i)},DP=(e,t,i)=>`${i.map((e=>`${e}{`)).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(i.length?i.length+1:0).join("}")}`,LP={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},OP=e=>String.fromCharCode(e+(e>25?39:97)),FP=e=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=OP(t%52)+i;return OP(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(e))>>>0),NP=["themed","global","styled","onevar","resonevar","allvar","inline"],zP=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},UP=e=>{let t;const i=()=>{const{cssRules:e}=t.sheet;return[].map.call(e,((i,n)=>{const{cssText:r}=i;let o="";if(r.startsWith("--sxs"))return"";if(e[n-1]&&(o=e[n-1].cssText).startsWith("--sxs")){if(!i.cssRules.length)return"";for(const e in t.rules)if(t.rules[e].group===i)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${r}`;return i.cssRules.length?`${o}${r}`:""}return r})).join("")},n=()=>{if(t){const{rules:e,sheet:i}=t;if(!i.deleteRule){for(;3===Object(Object(i.cssRules)[0]).type;)i.cssRules.splice(0,1);i.cssRules=[]}for(const t in e)delete e[t]}const r=Object(e).styleSheets||[];for(const e of r)if(zP(e)){for(let r=0,o=e.cssRules;o[r];++r){const s=Object(o[r]);if(1!==s.type)continue;const a=Object(o[r+1]);if(4!==a.type)continue;++r;const{cssText:l}=s;if(!l.startsWith("--sxs"))continue;const c=l.slice(14,-3).trim().split(/\s+/),u=NP[c[0]];u&&(t||(t={sheet:e,reset:n,rules:{},toString:i}),t.rules[u]={group:a,index:r,cache:new Set(c)})}if(t)break}if(!t){const r=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,r(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,(e=>e.cssText)).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:r("","text/css"),rules:{},reset:n,toString:i}}const{sheet:o,rules:s}=t;for(let e=NP.length-1;e>=0;--e){const t=NP[e];if(!s[t]){const i=NP[e+1],n=s[i]?s[i].index:o.cssRules.length;o.insertRule("@media{}",n),o.insertRule(`--sxs{--sxs:${e}}`,n),s[t]={group:o.cssRules[n+1],index:n,cache:new Set([e])}}HP(s[t])}};return n(),t},HP=e=>{const t=e.group;let i=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,i),++i}catch(e){}}},VP=Symbol(),$P=mP(),GP=(e,t)=>$P(e,(()=>function(){let i={type:null,composers:new Set};for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const t of r)if(null!=t)if(t[_P]){null==i.type&&(i.type=t[_P].type);for(const e of t[_P].composers)i.composers.add(e)}else t.constructor!==Object||t.$$typeof?null==i.type&&(i.type=t):i.composers.add(QP(t,e));return null==i.type&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),jP(e,i,t)})),QP=(e,t)=>{let{variants:i,compoundVariants:n,defaultVariants:r,...o}=e;const s=`${MP(t.prefix)}c-${FP(o)}`,a=[],l=[],c=Object.create(null),u=[];for(const p in r)c[p]=String(r[p]);if("object"==typeof i&&i)for(const p in i){h=c,d=p,bP.call(h,d)||(c[p]="undefined");const e=i[p];for(const t in e){const i={[p]:String(t)};"undefined"===String(t)&&u.push(p);const n=e[t],r=[i,n,!yP(n)];a.push(r)}}var h,d;if("object"==typeof n&&n)for(const p of n){let{css:e,...t}=p;e="object"==typeof e&&e||{};for(const n in t)t[n]=String(t[n]);const i=[t,e,!yP(e)];l.push(i)}return[s,o,a,l,c,u]},jP=(e,t,i)=>{const[n,r,o,s]=qP(t.composers),a="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let i=0;i<t[VP].length;i++){const[n,r]=t[VP][i];e.rules[n].apply(r)}return t[VP]=[],null}return t[VP]=[],t.rules={},NP.forEach((e=>t.rules[e]={apply:i=>t[VP].push([e,i])})),t})(i):null,l=(a||i).rules,c=`.${n}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=u=>{u="object"==typeof u&&u||XP;const{css:h,...d}=u,p={};for(const e in o)if(delete d[e],e in u){let t=u[e];"object"==typeof t&&t?p[e]={"@initial":o[e],...t}:(t=String(t),p[e]="undefined"!==t||s.has(e)?t:o[e])}else p[e]=o[e];const f=new Set([...r]);for(const[n,r,o,s]of t.composers){i.rules.styled.cache.has(n)||(i.rules.styled.cache.add(n),PP(r,[`.${n}`],[],e,(e=>{l.styled.apply(e)})));const t=WP(o,p,e.media),a=WP(s,p,e.media,!0);for(const r of t)if(void 0!==r)for(const[t,o,s]of r){const r=`${n}-${FP(o)}-${t}`;f.add(r);const a=(s?i.rules.resonevar:i.rules.onevar).cache,c=s?l.resonevar:l.onevar;a.has(r)||(a.add(r),PP(o,[`.${r}`],[],e,(e=>{c.apply(e)})))}for(const r of a)if(void 0!==r)for(const[t,o]of r){const r=`${n}-${FP(o)}-${t}`;f.add(r),i.rules.allvar.cache.has(r)||(i.rules.allvar.cache.add(r),PP(o,[`.${r}`],[],e,(e=>{l.allvar.apply(e)})))}}if("object"==typeof h&&h){const t=`${n}-i${FP(h)}-css`;f.add(t),i.rules.inline.cache.has(t)||(i.rules.inline.cache.add(t),PP(h,[`.${t}`],[],e,(e=>{l.inline.apply(e)})))}for(const e of String(u.className||"").trim().split(/\s+/))e&&f.add(e);const g=d.className=[...f].join(" ");return{type:t.type,className:g,selector:c,props:d,toString:()=>g,deferredInjector:a}};return vP(u,{className:n,selector:c,[_P]:t,toString:()=>(i.rules.styled.cache.has(n)||u(),n)})},qP=e=>{let t="";const i=[],n={},r=[];for(const[o,,,,s,a]of e){""===t&&(t=o),i.push(o),r.push(...a);for(const e in s){const t=s[e];(void 0===n[e]||"undefined"!==t||a.includes(t))&&(n[e]=t)}}return[t,i,n,new Set(r)]},WP=(e,t,i,n)=>{const r=[];e:for(let[o,s,a]of e){if(a)continue;let e,l=0,c=!1;for(e in o){const n=o[e];let r=t[e];if(r!==n){if("object"!=typeof r||!r)continue e;{let e,t,o=0;for(const s in r){if(n===String(r[s])){if("@initial"!==s){const e=s.slice(1);(t=t||[]).push(e in i?i[e]:s.replace(/^@media ?/,"")),c=!0}l+=o,e=!0}++o}if(t&&t.length&&(s={["@media "+t.join(", ")]:s}),!e)continue e}}}(r[l]=r[l]||[]).push([n?"cv":`${e}-${o[e]}`,s,c])}return r},XP={},YP=mP(),KP=(e,t)=>YP(e,(()=>function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];const o=()=>{for(let i of n){i="object"==typeof i&&i||{};let n=FP(i);if(!t.rules.global.cache.has(n)){if(t.rules.global.cache.add(n),"@import"in i){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let n of[].concat(i["@import"]))n=n.includes('"')||n.includes("'")?n:`"${n}"`,t.sheet.insertRule(`@import ${n};`,e++);delete i["@import"]}PP(i,[],[],e,(e=>{t.rules.global.apply(e)}))}}return""};return vP(o,{toString:o})})),ZP=mP(),JP=(e,t)=>ZP(e,(()=>i=>{const n=`${MP(e.prefix)}k-${FP(i)}`,r=()=>{if(!t.rules.global.cache.has(n)){t.rules.global.cache.add(n);const r=[];PP(i,[],[],e,(e=>r.push(e)));const o=`@keyframes ${n}{${r.join("")}}`;t.rules.global.apply(o)}return n};return vP(r,{get name(){return r()},toString:r})})),eD=class{constructor(e,t,i,n){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==i?"":String(i),this.prefix=null==n?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+MP(this.prefix)+MP(this.scale)+this.token}toString(){return this.computedValue}},tD=mP(),iD=(e,t)=>tD(e,(()=>(i,n)=>{n="object"==typeof i&&i||Object(n);const r=`.${i=(i="string"==typeof i?i:"")||`${MP(e.prefix)}t-${FP(n)}`}`,o={},s=[];for(const t in n){o[t]={};for(const i in n[t]){const r=`--${MP(e.prefix)}${t}-${i}`,a=kP(String(n[t][i]),e.prefix,t);o[t][i]=new eD(i,a,t,e.prefix),s.push(`${r}:${a}`)}}const a=()=>{if(s.length&&!t.rules.themed.cache.has(i)){t.rules.themed.cache.add(i);const r=`${n===e.theme?":root,":""}.${i}{${s.join(";")}}`;t.rules.themed.apply(r)}return i};return{...o,get className(){return a()},selector:r,toString:a}})),nD=mP(),rD=mP();const oD={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function sD(e,t,i){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*i):e*t*i/(t+i*e)}function aD(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===n?function(e,t,i){return Math.max(t,Math.min(e,i))}(e,t,i):e<t?-sD(t-e,i-t,n)+t:e>i?+sD(e-i,i-t,n)+i:e}function lD(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function cD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function uD(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?cD(Object(i),!0).forEach((function(t){lD(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cD(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const hD={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function dD(e){return e?e[0].toUpperCase()+e.slice(1):""}const pD=["enter","leave"];const fD=["gotpointercapture","lostpointercapture"];function gD(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const n=fD.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(n);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:i}}function mD(e){return"touches"in e}function _D(e){return mD(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function vD(e){return mD(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function yD(e){const t=vD(e);return mD(e)?t.identifier:t.pointerId}function bD(e){const t=vD(e);return[t.clientX,t.clientY]}function AD(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"function"==typeof e?e(...i):e}function wD(){}function xD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?wD:1===t.length?t[0]:function(){let e;for(const i of t)e=i.apply(this,arguments)||e;return e}}function SD(e,t){return Object.assign({},t,e||{})}class CD{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:n}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?AD(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:n}=this;t.args=this.args;let r=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:n,metaKey:r,ctrlKey:o}=e;Object.assign(t,{shiftKey:i,altKey:n,metaKey:r,ctrlKey:o})}return t}(e)),n.down=n.pressed=n.buttons%2==1||n.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);oD.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[o,s]=t._movement,[a,l]=i.threshold,{_step:c,values:u}=t;if(i.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=a&&u[0]),!1===c[1]&&(c[1]=Math.abs(s)>=l&&u[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=a&&Math.sign(o)*a),!1===c[1]&&(c[1]=Math.abs(s)>=l&&Math.sign(s)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[e,t]=u;h[0]=!1!==c[0]?e-c[0]:0,h[1]=!1!==c[1]?t-c[1]:0}else h[0]=!1!==c[0]?o-c[0]:0,h[1]=!1!==c[1]?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=AD(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[f,g]=t.offset,[[m,_],[v,y]]=t._bounds;t.overflow=[f<m?-1:f>_?1:0,g<v?-1:g>y?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const b=t._active&&i.rubberband||[0,0];if(t.offset=function(e,t,i){let[n,r]=t,[o,s]=i;const[[a,l],[c,u]]=e;return[aD(n,a,l,o),aD(r,c,u,s)]}(t._bounds,t.offset,b),t.delta=oD.sub(t.offset,d),this.computeMovement(),p&&(!t.last||r>32)){t.delta=oD.sub(t.offset,d);const e=t.delta.map(Math.abs);oD.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[e[0]/r,e[1]/r],t.timeDelta=r)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const n=this.handler(uD(uD(uD({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class ED extends CD{constructor(){super(...arguments),lD(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=oD.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=oD.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const n="object"==typeof i.axisThreshold?i.axisThreshold[_D(e)]:i.axisThreshold;t.axis=function(e,t){let[i,n]=e;const r=Math.abs(i),o=Math.abs(n);return r>o&&r>t?"x":o>r&&o>t?"y":void 0}(t._movement,n)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const TD=e=>e,ID={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:(e,t,i)=>uD(uD({},i.shared.eventOptions),e),preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return oD.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?oD.toVector(e):void 0,transform(e,t,i){const n=e||i.shared.transform;return this.hasCustomTransform=!!n,n||TD},threshold:e=>oD.toVector(e,0)},MD=uD(uD({},ID),{},{axis(e,t,i){let{axis:n}=i;if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"==typeof e)return t=>MD.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:n=-1/0,bottom:r=1/0}=e;return[[t,i],[n,r]]}}),kD={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}},BD="undefined"!=typeof window&&window.document&&window.document.createElement;function RD(){return BD&&"ontouchstart"in window}const PD={isBrowser:BD,gesture:function(){try{return"constructor"in GestureEvent}catch(hse){return!1}}(),touch:RD(),touchscreen:RD()||BD&&window.navigator.maxTouchPoints>1,pointer:BD&&"onpointerdown"in window,pointerLock:BD&&"exitPointerLock"in window.document},DD={mouse:0,touch:0,pen:8},LD=uD(uD({},MD),{},{device(e,t,i){let{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}=i;return this.pointerLock=r&&PD.pointerLock,PD.touch&&n?"touch":this.pointerLock?"mouse":PD.pointer&&!o?"pointer":PD.touch?"touch":"mouse"},preventScrollAxis(e,t,i){let{preventScroll:n}=i;if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,PD.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,i){let{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}=i;return this.pointerButtons=r,this.keys=o,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,i){let{filterTaps:n=!1,tapsThreshold:r=3,axis:o}=i;const s=oD.toVector(e,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe(){let{velocity:e=.5,distance:t=50,duration:i=250}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{velocity:this.transform(oD.toVector(e)),distance:this.transform(oD.toVector(t)),duration:i}},delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?uD(uD({},DD),e):DD,keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});uD(uD({},ID),{},{device(e,t,i){let{shared:n,pointer:{touch:r=!1}={}}=i;if(n.target&&!PD.touch&&PD.gesture)return"gesture";if(PD.touch&&r)return"touch";if(PD.touchscreen){if(PD.pointer)return"pointer";if(PD.touch)return"touch"}},bounds(e,t,i){let{scaleBounds:n={},angleBounds:r={}}=i;const o=e=>{const t=SD(AD(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},s=e=>{const t=SD(AD(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[o(),s()]:e=>[o(e),s(e)]},threshold(e,t,i){return this.lockDirection="lock"===i.axis,oD.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),uD(uD({},MD),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),uD(uD({},MD),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const OD=new Map,FD=new Map,ND={key:"drag",engine:class extends ED{constructor(){super(...arguments),lD(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),n={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=MD.bounds(n)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const n=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),n&&n.size>1&&i._pointerActive||(this.start(e),this.setupPointer(e),i._pointerId=yD(e),i._pointerActive=!0,this.computeValues(bD(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==_D(e)?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const n=yD(e);if(void 0!==t._pointerId&&n!==t._pointerId)return;const r=bD(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=oD.sub(r,t._values),this.computeValues(r)),oD.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):i.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===i.preventScrollAxis||"xy"===i.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const n=yD(e);if(void 0!==t._pointerId&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[r,o]=t._distance;if(t.tap=r<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[e,n]=t._delta,[r,o]=t._movement,[s,a]=i.swipe.velocity,[l,c]=i.swipe.distance,u=i.swipe.duration;if(t.elapsedTime<u){const i=Math.abs(e/t.timeDelta),u=Math.abs(n/t.timeDelta);i>s&&Math.abs(r)>l&&(t.swipe[0]=Math.sign(e)),u>a&&Math.abs(o)>c&&(t.swipe[1]=Math.sign(n))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=kD[e.key];if(t){const i=this.state,n=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,n),i._keyboardActive=!0,oD.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in kD&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:LD};const zD={target(e){if(e)return()=>"current"in e?e.current:e},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:PD.isBrowser?window:void 0},eventOptions:function(){let{passive:e=!0,capture:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{passive:e,capture:t}},transform:e=>e},UD=["target","eventOptions","window","enabled","transform"];function HD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const i={};for(const[n,r]of Object.entries(t))switch(typeof r){case"function":i[n]=r.call(i,e[n],n,e);break;case"object":i[n]=HD(e[n],r);break;case"boolean":r&&(i[n]=e[n])}return i}class VD{constructor(e,t){lD(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,n,r){const o=this._listeners,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=hD[e];return e+(i&&i[t]||t)}(t,i),a=uD(uD({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);e.addEventListener(s,n,a);const l=()=>{e.removeEventListener(s,n,a),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class $D{constructor(){lD(this,"_timeouts",new Map)}add(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;for(var n=arguments.length,r=new Array(n>3?n-3:0),o=3;o<n;o++)r[o-3]=arguments[o];this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class GD{constructor(e){lD(this,"gestures",new Set),lD(this,"_targetEventStore",new VD(this)),lD(this,"gestureEventStores",{}),lD(this,"gestureTimeoutStores",{}),lD(this,"handlers",{}),lD(this,"config",{}),lD(this,"pointerIds",new Set),lD(this,"touchIds",new Set),lD(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&QD(e,"drag"),t.wheel&&QD(e,"wheel"),t.scroll&&QD(e,"scroll"),t.move&&QD(e,"move"),t.pinch&&QD(e,"pinch"),t.hover&&QD(e,"hover")}(this,e)}setEventIds(e){return mD(e)?(this.touchIds=new Set(function(e){return function(e){return Array.from(e.touches).filter((t=>{var i,n;return t.target===e.currentTarget||(null===(i=e.currentTarget)||void 0===i||null===(n=i.contains)||void 0===n?void 0:n.call(i,t.target))}))}(e).map((e=>e.identifier))}(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e,{target:r,eventOptions:o,window:s,enabled:a,transform:l}=n,c=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(n,UD);if(i.shared=HD({target:r,eventOptions:o,window:s,enabled:a,transform:l},zD),t){const e=FD.get(t);i[t]=HD(uD({shared:i.shared},c),e)}else for(const u in c){const e=FD.get(u);e&&(i[u]=HD(uD({shared:i.shared},c[u]),e))}return i}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=this.config.shared,r={};let o;if(!n.target||(o=n.target(),o)){if(n.enabled){for(const i of this.gestures){const e=this.config[i],n=jD(r,e.eventOptions,!!o);e.enabled&&new(OD.get(i))(this,t,i).bind(n)}const e=jD(r,n.eventOptions,!!o);for(const i in this.nativeHandlers)e(i,"",(e=>this.nativeHandlers[i](uD(uD({},this.state.shared),{},{event:e,args:t}))),void 0,!0)}for(const e in r)r[e]=xD(...r[e]);if(!o)return r;for(const e in r){const{device:t,capture:i,passive:n}=gD(e);this._targetEventStore.add(o,t,"",r[e],{capture:i,passive:n})}}}}function QD(e,t){e.gestures.add(t),e.gestureEventStores[t]=new VD(e,t),e.gestureTimeoutStores[t]=new $D}const jD=(e,t,i)=>function(n,r,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var l,c;const u=null!==(l=s.capture)&&void 0!==l?l:t.capture,h=null!==(c=s.passive)&&void 0!==c?c:t.passive;let d=a?n:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=hD[e],r=n&&n[t]||t;return"on"+dD(e)+dD(r)+(function(){let e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!pD.includes(e)}(i,r)?"Capture":"")}(n,r,u);i&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(o)};function qD(e,t){let{checkForDefaultPrevented:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if(e?.(n),!1===i||!n.defaultPrevented)return t?.(n)}}function WD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}function XD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.useCallback(WD(...t),t)}function YD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t[0];if(1===t.length)return n;const o=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const i=e.reduce(((e,i)=>{let{useScope:n,scopeName:r}=i;return{...e,...n(t)[`__scope${r}`]}}),{});return r.useMemo((()=>({[`__scope${n.scopeName}`]:i})),[i])}};return o.scopeName=n.scopeName,o}function KD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}function ZD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.useCallback(KD(...t),t)}var JD=r.forwardRef(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(iL);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,SR.jsx)(eL,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,SR.jsx)(eL,{...n,ref:t,children:i})}));JD.displayName="Slot";var eL=r.forwardRef(((e,t)=>{const{children:i,...n}=e;if(r.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i);return r.cloneElement(i,{...nL(n,i.props),ref:t?KD(t,e):e})}return r.Children.count(i)>1?r.Children.only(null):null}));eL.displayName="SlotClone";var tL=e=>{let{children:t}=e;return(0,SR.jsx)(SR.Fragment,{children:t})};function iL(e){return r.isValidElement(e)&&e.type===tL}function nL(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}var rL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=r.forwardRef(((e,i)=>{const{asChild:n,...r}=e,o=n?JD:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,SR.jsx)(o,{...r,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{});function oL(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),r.useMemo((()=>function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.current?.(...i)}),[])}var sL,aL="dismissableLayer.update",lL=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cL=r.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=e,u=r.useContext(lL),[h,d]=r.useState(null),p=h?.ownerDocument??globalThis?.document,[,f]=r.useState({}),g=ZD(t,(e=>d(e))),m=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(_),y=h?m.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,A=y>=v,w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const i=oL(e),n=r.useRef(!1),o=r.useRef((()=>{}));return r.useEffect((()=>{const e=e=>{if(e.target&&!n.current){let n=function(){dL("dismissableLayer.pointerDownOutside",i,r,{discrete:!0})};const r={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",o.current),o.current=n,t.addEventListener("click",o.current,{once:!0})):n()}else t.removeEventListener("click",o.current);n.current=!1},r=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",o.current)}}),[t,i]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,i=[...u.branches].some((e=>e.contains(t)));A&&!i&&(o?.(e),a?.(e),e.defaultPrevented||l?.())}),p),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const i=oL(e),n=r.useRef(!1);return r.useEffect((()=>{const e=e=>{e.target&&!n.current&&dL("dismissableLayer.focusOutside",i,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,i]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...u.branches].some((e=>e.contains(t)))||(s?.(e),a?.(e),e.defaultPrevented||l?.())}),p);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const i=oL(e);r.useEffect((()=>{const e=e=>{"Escape"===e.key&&i(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[i,t])}((e=>{y===u.layers.size-1&&(n?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),p),r.useEffect((()=>{if(h)return i&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(sL=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),hL(),()=>{i&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=sL)}}),[h,p,i,u]),r.useEffect((()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),hL())}),[h,u]),r.useEffect((()=>{const e=()=>f({});return document.addEventListener(aL,e),()=>document.removeEventListener(aL,e)}),[]),(0,SR.jsx)(rL.div,{...c,ref:g,style:{pointerEvents:b?A?"auto":"none":void 0,...e.style},onFocusCapture:qD(e.onFocusCapture,x.onFocusCapture),onBlurCapture:qD(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:qD(e.onPointerDownCapture,w.onPointerDownCapture)})}));cL.displayName="DismissableLayer";var uL=r.forwardRef(((e,t)=>{const i=r.useContext(lL),n=r.useRef(null),o=ZD(t,n);return r.useEffect((()=>{const e=n.current;if(e)return i.branches.add(e),()=>{i.branches.delete(e)}}),[i.branches]),(0,SR.jsx)(rL.div,{...e,ref:o})}));function hL(){const e=new CustomEvent(aL);document.dispatchEvent(e)}function dL(e,t,i,n){let{discrete:r}=n;const o=i.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&o.addEventListener(e,t,{once:!0}),r?function(e,t){e&&xR.flushSync((()=>e.dispatchEvent(t)))}(o,s):o.dispatchEvent(s)}uL.displayName="DismissableLayerBranch";var pL=Boolean(globalThis?.document)?r.useLayoutEffect:()=>{},fL=o["useId".toString()]||(()=>{}),gL=0;const mL=["top","right","bottom","left"],_L=Math.min,vL=Math.max,yL=Math.round,bL=Math.floor,AL=e=>({x:e,y:e}),wL={left:"right",right:"left",bottom:"top",top:"bottom"},xL={start:"end",end:"start"};function SL(e,t,i){return vL(e,_L(t,i))}function CL(e,t){return"function"==typeof e?e(t):e}function EL(e){return e.split("-")[0]}function TL(e){return e.split("-")[1]}function IL(e){return"x"===e?"y":"x"}function ML(e){return"y"===e?"height":"width"}function kL(e){return["top","bottom"].includes(EL(e))?"y":"x"}function BL(e){return IL(kL(e))}function RL(e){return e.replace(/start|end/g,(e=>xL[e]))}function PL(e){return e.replace(/left|right|bottom|top/g,(e=>wL[e]))}function DL(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function LL(e){const{x:t,y:i,width:n,height:r}=e;return{width:n,height:r,top:i,left:t,right:t+n,bottom:i+r,x:t,y:i}}function OL(e,t,i){let{reference:n,floating:r}=e;const o=kL(t),s=BL(t),a=ML(s),l=EL(t),c="y"===o,u=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,d=n[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-r.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-r.width,y:h};break;default:p={x:n.x,y:n.y}}switch(TL(t)){case"start":p[s]-=d*(i&&c?-1:1);break;case"end":p[s]+=d*(i&&c?-1:1)}return p}async function FL(e,t){var i;void 0===t&&(t={});const{x:n,y:r,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=CL(t,e),f=DL(p),g=a[d?"floating"===h?"reference":"floating":h],m=LL(await o.getClippingRect({element:null==(i=await(null==o.isElement?void 0:o.isElement(g)))||i?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_="floating"===h?{x:n,y:r,width:s.floating.width,height:s.floating.height}:s.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),y=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},b=LL(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:v,strategy:l}):_);return{top:(m.top-b.top+f.top)/y.y,bottom:(b.bottom-m.bottom+f.bottom)/y.y,left:(m.left-b.left+f.left)/y.x,right:(b.right-m.right+f.right)/y.x}}function NL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function zL(e){return mL.some((t=>e[t]>=0))}function UL(){return"undefined"!=typeof window}function HL(e){return GL(e)?(e.nodeName||"").toLowerCase():"#document"}function VL(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function $L(e){var t;return null==(t=(GL(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function GL(e){return!!UL()&&(e instanceof Node||e instanceof VL(e).Node)}function QL(e){return!!UL()&&(e instanceof Element||e instanceof VL(e).Element)}function jL(e){return!!UL()&&(e instanceof HTMLElement||e instanceof VL(e).HTMLElement)}function qL(e){return!(!UL()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof VL(e).ShadowRoot)}function WL(e){const{overflow:t,overflowX:i,overflowY:n,display:r}=eO(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!["inline","contents"].includes(r)}function XL(e){return["table","td","th"].includes(HL(e))}function YL(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function KL(e){const t=ZL(),i=QL(e)?eO(e):e;return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!t&&!!i.backdropFilter&&"none"!==i.backdropFilter||!t&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some((e=>(i.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(i.contain||"").includes(e)))}function ZL(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function JL(e){return["html","body","#document"].includes(HL(e))}function eO(e){return VL(e).getComputedStyle(e)}function tO(e){return QL(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function iO(e){if("html"===HL(e))return e;const t=e.assignedSlot||e.parentNode||qL(e)&&e.host||$L(e);return qL(t)?t.host:t}function nO(e){const t=iO(e);return JL(t)?e.ownerDocument?e.ownerDocument.body:e.body:jL(t)&&WL(t)?t:nO(t)}function rO(e,t,i){var n;void 0===t&&(t=[]),void 0===i&&(i=!0);const r=nO(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),s=VL(r);if(o){const e=oO(s);return t.concat(s,s.visualViewport||[],WL(r)?r:[],e&&i?rO(e):[])}return t.concat(r,rO(r,[],i))}function oO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sO(e){const t=eO(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=jL(e),o=r?e.offsetWidth:i,s=r?e.offsetHeight:n,a=yL(i)!==o||yL(n)!==s;return a&&(i=o,n=s),{width:i,height:n,$:a}}function aO(e){return QL(e)?e:e.contextElement}function lO(e){const t=aO(e);if(!jL(t))return AL(1);const i=t.getBoundingClientRect(),{width:n,height:r,$:o}=sO(t);let s=(o?yL(i.width):i.width)/n,a=(o?yL(i.height):i.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const cO=AL(0);function uO(e){const t=VL(e);return ZL()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:cO}function hO(e,t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1);const r=e.getBoundingClientRect(),o=aO(e);let s=AL(1);t&&(n?QL(n)&&(s=lO(n)):s=lO(e));const a=function(e,t,i){return void 0===t&&(t=!1),!(!i||t&&i!==VL(e))&&t}(o,i,n)?uO(o):AL(0);let l=(r.left+a.x)/s.x,c=(r.top+a.y)/s.y,u=r.width/s.x,h=r.height/s.y;if(o){const e=VL(o),t=n&&QL(n)?VL(n):n;let i=e,r=oO(i);for(;r&&n&&t!==i;){const e=lO(r),t=r.getBoundingClientRect(),n=eO(r),o=t.left+(r.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,h*=e.y,l+=o,c+=s,i=VL(r),r=oO(i)}}return LL({width:u,height:h,x:l,y:c})}function dO(e,t){const i=tO(e).scrollLeft;return t?t.left+i:hO($L(e)).left+i}function pO(e,t,i){void 0===i&&(i=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(i?0:dO(e,n)),y:n.top+t.scrollTop}}function fO(e,t,i){let n;if("viewport"===t)n=function(e,t){const i=VL(e),n=$L(e),r=i.visualViewport;let o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;const e=ZL();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,i);else if("document"===t)n=function(e){const t=$L(e),i=tO(e),n=e.ownerDocument.body,r=vL(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=vL(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-i.scrollLeft+dO(e);const a=-i.scrollTop;return"rtl"===eO(n).direction&&(s+=vL(t.clientWidth,n.clientWidth)-r),{width:r,height:o,x:s,y:a}}($L(e));else if(QL(t))n=function(e,t){const i=hO(e,!0,"fixed"===t),n=i.top+e.clientTop,r=i.left+e.clientLeft,o=jL(e)?lO(e):AL(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:r*o.x,y:n*o.y}}(t,i);else{const i=uO(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return LL(n)}function gO(e,t){const i=iO(e);return!(i===t||!QL(i)||JL(i))&&("fixed"===eO(i).position||gO(i,t))}function mO(e,t,i){const n=jL(t),r=$L(t),o="fixed"===i,s=hO(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=AL(0);if(n||!n&&!o)if(("body"!==HL(t)||WL(r))&&(a=tO(t)),n){const e=hO(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=dO(r));const c=!r||n||o?AL(0):pO(r,a);return{x:s.left+a.scrollLeft-l.x-c.x,y:s.top+a.scrollTop-l.y-c.y,width:s.width,height:s.height}}function _O(e){return"static"===eO(e).position}function vO(e,t){if(!jL(e)||"fixed"===eO(e).position)return null;if(t)return t(e);let i=e.offsetParent;return $L(e)===i&&(i=i.ownerDocument.body),i}function yO(e,t){const i=VL(e);if(YL(e))return i;if(!jL(e)){let t=iO(e);for(;t&&!JL(t);){if(QL(t)&&!_O(t))return t;t=iO(t)}return i}let n=vO(e,t);for(;n&&XL(n)&&_O(n);)n=vO(n,t);return n&&JL(n)&&_O(n)&&!KL(n)?i:n||function(e){let t=iO(e);for(;jL(t)&&!JL(t);){if(KL(t))return t;if(YL(t))return null;t=iO(t)}return null}(e)||i}const bO={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:i,offsetParent:n,strategy:r}=e;const o="fixed"===r,s=$L(n),a=!!t&&YL(t.floating);if(n===s||a&&o)return i;let l={scrollLeft:0,scrollTop:0},c=AL(1);const u=AL(0),h=jL(n);if((h||!h&&!o)&&(("body"!==HL(n)||WL(s))&&(l=tO(n)),jL(n))){const e=hO(n);c=lO(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}const d=!s||h||o?AL(0):pO(s,l,!0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:i.y*c.y-l.scrollTop*c.y+u.y+d.y}},getDocumentElement:$L,getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:n,strategy:r}=e;const o="clippingAncestors"===i?YL(t)?[]:function(e,t){const i=t.get(e);if(i)return i;let n=rO(e,[],!1).filter((e=>QL(e)&&"body"!==HL(e))),r=null;const o="fixed"===eO(e).position;let s=o?iO(e):e;for(;QL(s)&&!JL(s);){const t=eO(s),i=KL(s);i||"fixed"!==t.position||(r=null),(o?!i&&!r:!i&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||WL(s)&&!i&&gO(e,s))?n=n.filter((e=>e!==s)):r=t,s=iO(s)}return t.set(e,n),n}(t,this._c):[].concat(i),s=[...o,n],a=s[0],l=s.reduce(((e,i)=>{const n=fO(t,i,r);return e.top=vL(n.top,e.top),e.right=_L(n.right,e.right),e.bottom=_L(n.bottom,e.bottom),e.left=vL(n.left,e.left),e}),fO(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:yO,getElementRects:async function(e){const t=this.getOffsetParent||yO,i=this.getDimensions,n=await i(e.floating);return{reference:mO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:i}=sO(e);return{width:t,height:i}},getScale:lO,isElement:QL,isRTL:function(e){return"rtl"===eO(e).direction}};const AO=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:r,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:i,platform:n,elements:r}=e,o=await(null==n.isRTL?void 0:n.isRTL(r.floating)),s=EL(i),a=TL(i),l="y"===kL(i),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,h=CL(t,e);let{mainAxis:d,crossAxis:p,alignmentAxis:f}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}(t,e);return s===(null==(i=a.offset)?void 0:i.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:s}}}}},wO=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:r}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:i}=e;return{x:t,y:i}}},...l}=CL(e,t),c={x:i,y:n},u=await FL(t,l),h=kL(EL(r)),d=IL(h);let p=c[d],f=c[h];if(o){const e="y"===d?"bottom":"right";p=SL(p+u["y"===d?"top":"left"],p,p-u[e])}if(s){const e="y"===h?"bottom":"right";f=SL(f+u["y"===h?"top":"left"],f,f-u[e])}const g=a.fn({...t,[d]:p,[h]:f});return{...g,data:{x:g.x-i,y:g.y-n,enabled:{[d]:o,[h]:s}}}}}},xO=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:r,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...m}=CL(e,t);if(null!=(i=o.arrow)&&i.alignmentOffset)return{};const _=EL(r),v=kL(a),y=EL(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),A=d||(y||!g?[PL(a)]:function(e){const t=PL(e);return[RL(e),t,RL(t)]}(a)),w="none"!==f;!d&&w&&A.push(...function(e,t,i,n){const r=TL(e);let o=function(e,t,i){const n=["left","right"],r=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return i?t?r:n:t?n:r;case"left":case"right":return t?o:s;default:return[]}}(EL(e),"start"===i,n);return r&&(o=o.map((e=>e+"-"+r)),t&&(o=o.concat(o.map(RL)))),o}(a,g,f,b));const x=[a,...A],S=await FL(t,m),C=[];let E=(null==(n=o.flip)?void 0:n.overflows)||[];if(u&&C.push(S[_]),h){const e=function(e,t,i){void 0===i&&(i=!1);const n=TL(e),r=BL(e),o=ML(r);let s="x"===r?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=PL(s)),[s,PL(s)]}(r,s,b);C.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:r,overflows:C}],!C.every((e=>e<=0))){var T,I;const e=((null==(T=o.flip)?void 0:T.index)||0)+1,t=x[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let i=null==(I=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:I.placement;if(!i)switch(p){case"bestFit":{var M;const e=null==(M=E.filter((e=>{if(w){const t=kL(e.placement);return t===v||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:M[0];e&&(i=e);break}case"initialPlacement":i=a}if(r!==i)return{reset:{placement:i}}}return{}}}},SO=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var i,n;const{placement:r,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=CL(e,t),u=await FL(t,c),h=EL(r),d=TL(r),p="y"===kL(r),{width:f,height:g}=o.floating;let m,_;"top"===h||"bottom"===h?(m=h,_=d===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,m="end"===d?"top":"bottom");const v=g-u.top-u.bottom,y=f-u.left-u.right,b=_L(g-u[m],v),A=_L(f-u[_],y),w=!t.middlewareData.shift;let x=b,S=A;if(null!=(i=t.middlewareData.shift)&&i.enabled.x&&(S=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(x=v),w&&!d){const e=vL(u.left,0),t=vL(u.right,0),i=vL(u.top,0),n=vL(u.bottom,0);p?S=f-2*(0!==e||0!==t?e+t:vL(u.left,u.right)):x=g-2*(0!==i||0!==n?i+n:vL(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:x});const C=await s.getDimensions(a.floating);return f!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}},CO=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:n="referenceHidden",...r}=CL(e,t);switch(n){case"referenceHidden":{const e=NL(await FL(t,{...r,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:zL(e)}}}case"escaped":{const e=NL(await FL(t,{...r,altBoundary:!0}),i.floating);return{data:{escapedOffsets:e,escaped:zL(e)}}}default:return{}}}}},EO=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:r,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=CL(e,t)||{};if(null==c)return{};const h=DL(u),d={x:i,y:n},p=BL(r),f=ML(p),g=await s.getDimensions(c),m="y"===p,_=m?"top":"left",v=m?"bottom":"right",y=m?"clientHeight":"clientWidth",b=o.reference[f]+o.reference[p]-d[p]-o.floating[f],A=d[p]-o.reference[p],w=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let x=w?w[y]:0;x&&await(null==s.isElement?void 0:s.isElement(w))||(x=a.floating[y]||o.floating[f]);const S=b/2-A/2,C=x/2-g[f]/2-1,E=_L(h[_],C),T=_L(h[v],C),I=E,M=x-g[f]-T,k=x/2-g[f]/2+S,B=SL(I,k,M),R=!l.arrow&&null!=TL(r)&&k!==B&&o.reference[f]/2-(k<I?E:T)-g[f]/2<0,P=R?k<I?k-I:k-M:0;return{[p]:d[p]+P,data:{[p]:B,centerOffset:k-B-P,...R&&{alignmentOffset:P}},reset:R}}}),TO=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:r,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=CL(e,t),u={x:i,y:n},h=kL(r),d=IL(h);let p=u[d],f=u[h];const g=CL(a,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const e="y"===d?"height":"width",t=o.reference[d]-o.floating[e]+m.mainAxis,i=o.reference[d]+o.reference[e]-m.mainAxis;p<t?p=t:p>i&&(p=i)}if(c){var _,v;const e="y"===d?"width":"height",t=["top","left"].includes(EL(r)),i=o.reference[h]-o.floating[e]+(t&&(null==(_=s.offset)?void 0:_[h])||0)+(t?0:m.crossAxis),n=o.reference[h]+o.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[h])||0)-(t?m.crossAxis:0);f<i?f=i:f>n&&(f=n)}return{[d]:p,[h]:f}}}};var IO="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function MO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let i,n,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;0!=n--;)if(!MO(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),i=r.length,i!==Object.keys(t).length)return!1;for(n=i;0!=n--;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=i;0!=n--;){const i=r[n];if(("_owner"!==i||!e.$$typeof)&&!MO(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function kO(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function BO(e,t){const i=kO(e);return Math.round(t*i)/i}function RO(e){const t=r.useRef(e);return IO((()=>{t.current=e})),t}const PO=e=>({name:"arrow",options:e,fn(t){const{element:i,padding:n}="function"==typeof e?e(t):e;return i&&(r=i,{}.hasOwnProperty.call(r,"current"))?null!=i.current?EO({element:i.current,padding:n}).fn(t):{}:i?EO({element:i,padding:n}).fn(t):{};var r}}),DO=(e,t)=>({...wO(e),options:[e,t]}),LO=(e,t)=>({...TO(e),options:[e,t]}),OO=(e,t)=>({...xO(e),options:[e,t]}),FO=(e,t)=>({...SO(e),options:[e,t]}),NO=(e,t)=>({...CO(e),options:[e,t]}),zO=(e,t)=>({...PO(e),options:[e,t]});function UO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}var HO=r.forwardRef(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(GO);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,SR.jsx)(VO,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,SR.jsx)(VO,{...n,ref:t,children:i})}));HO.displayName="Slot";var VO=r.forwardRef(((e,t)=>{const{children:i,...n}=e;if(r.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i);return r.cloneElement(i,{...QO(n,i.props),ref:t?UO(t,e):e})}return r.Children.count(i)>1?r.Children.only(null):null}));VO.displayName="SlotClone";var $O=e=>{let{children:t}=e;return(0,SR.jsx)(SR.Fragment,{children:t})};function GO(e){return r.isValidElement(e)&&e.type===$O}function QO(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}var jO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=r.forwardRef(((e,i)=>{const{asChild:n,...r}=e,o=n?HO:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,SR.jsx)(o,{...r,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{}),qO=r.forwardRef(((e,t)=>{const{children:i,width:n=10,height:r=5,...o}=e;return(0,SR.jsx)(jO.svg,{...o,ref:t,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:(0,SR.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));qO.displayName="Arrow";var WO=qO;function XO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}function YO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.useCallback(XO(...t),t)}function KO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t[0];if(1===t.length)return n;const o=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const i=e.reduce(((e,i)=>{let{useScope:n,scopeName:r}=i;return{...e,...n(t)[`__scope${r}`]}}),{});return r.useMemo((()=>({[`__scope${n.scopeName}`]:i})),[i])}};return o.scopeName=n.scopeName,o}var ZO=r.forwardRef(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(tF);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,SR.jsx)(JO,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,SR.jsx)(JO,{...n,ref:t,children:i})}));ZO.displayName="Slot";var JO=r.forwardRef(((e,t)=>{const{children:i,...n}=e;if(r.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i);return r.cloneElement(i,{...iF(n,i.props),ref:t?XO(t,e):e})}return r.Children.count(i)>1?r.Children.only(null):null}));JO.displayName="SlotClone";var eF=e=>{let{children:t}=e;return(0,SR.jsx)(SR.Fragment,{children:t})};function tF(e){return r.isValidElement(e)&&e.type===eF}function iF(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}var nF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=r.forwardRef(((e,i)=>{const{asChild:n,...r}=e,o=n?ZO:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,SR.jsx)(o,{...r,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{}),rF="Popper",[oF,sF]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];const n=()=>{const t=i.map((e=>r.createContext(e)));return function(i){const n=i?.[e]||t;return r.useMemo((()=>({[`__scope${e}`]:{...i,[e]:n}})),[i,n])}};return n.scopeName=e,[function(t,n){const o=r.createContext(n),s=i.length;function a(t){const{scope:i,children:n,...a}=t,l=i?.[e][s]||o,c=r.useMemo((()=>a),Object.values(a));return(0,SR.jsx)(l.Provider,{value:c,children:n})}return i=[...i,n],a.displayName=t+"Provider",[a,function(i,a){const l=a?.[e][s]||o,c=r.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${i}\` must be used within \`${t}\``)}]},KO(n,...t)]}(rF),[aF,lF]=oF(rF),cF=e=>{const{__scopePopper:t,children:i}=e,[n,o]=r.useState(null);return(0,SR.jsx)(aF,{scope:t,anchor:n,onAnchorChange:o,children:i})};cF.displayName=rF;var uF="PopperAnchor",hF=r.forwardRef(((e,t)=>{const{__scopePopper:i,virtualRef:n,...o}=e,s=lF(uF,i),a=r.useRef(null),l=YO(t,a);return r.useEffect((()=>{s.onAnchorChange(n?.current||a.current)})),n?null:(0,SR.jsx)(nF.div,{...o,ref:l})}));hF.displayName=uF;var dF="PopperContent",[pF,fF]=oF(dF),gF=r.forwardRef(((e,t)=>{const{__scopePopper:i,side:n="bottom",sideOffset:o=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:g,...m}=e,_=lF(dF,i),[v,y]=r.useState(null),b=YO(t,(e=>y(e))),[A,w]=r.useState(null),x=function(e){const[t,i]=r.useState(void 0);return pL((()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let r,o;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,o=t.blockSize}else r=e.offsetWidth,o=e.offsetHeight;i({width:r,height:o})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)}),[e]),t}(A),S=x?.width??0,C=x?.height??0,E=n+("center"!==s?"-"+s:""),T="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],M=I.length>0,k={padding:T,boundary:I.filter(yF),altBoundary:M},{refs:B,floatingStyles:R,placement:P,isPositioned:D,middlewareData:L}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:o,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,d]=r.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=r.useState(n);MO(p,n)||f(n);const[g,m]=r.useState(null),[_,v]=r.useState(null),y=r.useCallback((e=>{e!==x.current&&(x.current=e,m(e))}),[]),b=r.useCallback((e=>{e!==S.current&&(S.current=e,v(e))}),[]),A=s||g,w=a||_,x=r.useRef(null),S=r.useRef(null),C=r.useRef(h),E=null!=c,T=RO(c),I=RO(o),M=RO(u),k=r.useCallback((()=>{if(!x.current||!S.current)return;const e={placement:t,strategy:i,middleware:p};I.current&&(e.platform=I.current),((e,t,i)=>{const n=new Map,r={platform:bO,...i},o={...r.platform,_c:n};return(async(e,t,i)=>{const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:s}=i,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:h}=OL(c,n,l),d=n,p={},f=0;for(let g=0;g<a.length;g++){const{name:i,fn:o}=a[g],{x:m,y:_,data:v,reset:y}=await o({x:u,y:h,initialPlacement:n,placement:d,strategy:r,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=m?m:u,h=null!=_?_:h,p={...p,[i]:{...p[i],...v}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(d=y.placement),y.rects&&(c=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:r}):y.rects),({x:u,y:h}=OL(c,d,l))),g=-1)}return{x:u,y:h,placement:d,strategy:r,middlewareData:p}})(e,t,{...r,platform:o})})(x.current,S.current,e).then((e=>{const t={...e,isPositioned:!1!==M.current};B.current&&!MO(C.current,t)&&(C.current=t,xR.flushSync((()=>{d(t)})))}))}),[p,t,i,I,M]);IO((()=>{!1===u&&C.current.isPositioned&&(C.current.isPositioned=!1,d((e=>({...e,isPositioned:!1}))))}),[u]);const B=r.useRef(!1);IO((()=>(B.current=!0,()=>{B.current=!1})),[]),IO((()=>{if(A&&(x.current=A),w&&(S.current=w),A&&w){if(T.current)return T.current(A,w,k);k()}}),[A,w,k,T,E]);const R=r.useMemo((()=>({reference:x,floating:S,setReference:y,setFloating:b})),[y,b]),P=r.useMemo((()=>({reference:A,floating:w})),[A,w]),D=r.useMemo((()=>{const e={position:i,left:0,top:0};if(!P.floating)return e;const t=BO(P.floating,h.x),n=BO(P.floating,h.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...kO(P.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:t,top:n}}),[i,l,P.floating,h.x,h.y]);return r.useMemo((()=>({...h,update:k,refs:R,elements:P,floatingStyles:D})),[h,k,R,P,D])}({strategy:"fixed",placement:E,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,t,i,n){void 0===n&&(n={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=aO(e),u=r||o?[...c?rO(c):[],...rO(t)]:[];u.forEach((e=>{r&&e.addEventListener("scroll",i,{passive:!0}),o&&e.addEventListener("resize",i)}));const h=c&&a?function(e,t){let i,n=null;const r=$L(e);function o(){var e;clearTimeout(i),null==(e=n)||e.disconnect(),n=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const{left:c,top:u,width:h,height:d}=e.getBoundingClientRect();if(a||t(),!h||!d)return;const p={rootMargin:-bL(u)+"px "+-bL(r.clientWidth-(c+h))+"px "+-bL(r.clientHeight-(u+d))+"px "+-bL(c)+"px",threshold:vL(0,_L(1,l))||1};let f=!0;function g(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return s();t?s(!1,t):i=setTimeout((()=>{s(!1,1e-7)}),1e3)}f=!1}try{n=new IntersectionObserver(g,{...p,root:r.ownerDocument})}catch(e){n=new IntersectionObserver(g,p)}n.observe(e)}(!0),o}(c,i):null;let d,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[n]=e;n&&n.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),i()})),c&&!l&&f.observe(c),f.observe(t));let g=l?hO(e):null;return l&&function t(){const n=hO(e);!g||n.x===g.x&&n.y===g.y&&n.width===g.width&&n.height===g.height||i(),g=n,d=requestAnimationFrame(t)}(),i(),()=>{var e;u.forEach((e=>{r&&e.removeEventListener("scroll",i),o&&e.removeEventListener("resize",i)})),null==h||h(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(d)}}(...t,{animationFrame:"always"===f})},elements:{reference:_.anchor},middleware:[(O={mainAxis:o+C,alignmentAxis:a},{...AO(O),options:[O,undefined]}),c&&DO({mainAxis:!0,crossAxis:!1,limiter:"partial"===d?LO():void 0,...k}),c&&OO({...k}),FO({...k,apply:e=>{let{elements:t,rects:i,availableWidth:n,availableHeight:r}=e;const{width:o,height:s}=i.reference,a=t.floating.style;a.setProperty("--radix-popper-available-width",`${n}px`),a.setProperty("--radix-popper-available-height",`${r}px`),a.setProperty("--radix-popper-anchor-width",`${o}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),A&&zO({element:A,padding:l}),bF({arrowWidth:S,arrowHeight:C}),p&&NO({strategy:"referenceHidden",...k})]});var O;const[F,N]=AF(P),z=oL(g);pL((()=>{D&&z?.()}),[D,z]);const U=L.arrow?.x,H=L.arrow?.y,V=0!==L.arrow?.centerOffset,[$,G]=r.useState();return pL((()=>{v&&G(window.getComputedStyle(v).zIndex)}),[v]),(0,SR.jsx)("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:D?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,SR.jsx)(pF,{scope:i,placedSide:F,onArrowChange:w,arrowX:U,arrowY:H,shouldHideArrow:V,children:(0,SR.jsx)(nF.div,{"data-side":F,"data-align":N,...m,ref:b,style:{...m.style,animation:D?void 0:"none"}})})})}));gF.displayName=dF;var mF="PopperArrow",_F={top:"bottom",right:"left",bottom:"top",left:"right"},vF=r.forwardRef((function(e,t){const{__scopePopper:i,...n}=e,r=fF(mF,i),o=_F[r.placedSide];return(0,SR.jsx)("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:(0,SR.jsx)(WO,{...n,ref:t,style:{...n.style,display:"block"}})})}));function yF(e){return null!==e}vF.displayName=mF;var bF=e=>({name:"transformOrigin",options:e,fn(t){const{placement:i,rects:n,middlewareData:r}=t,o=0!==r.arrow?.centerOffset,s=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,c]=AF(i),u={start:"0%",center:"50%",end:"100%"}[c],h=(r.arrow?.x??0)+s/2,d=(r.arrow?.y??0)+a/2;let p="",f="";return"bottom"===l?(p=o?u:`${h}px`,f=-a+"px"):"top"===l?(p=o?u:`${h}px`,f=`${n.floating.height+a}px`):"right"===l?(p=-a+"px",f=o?u:`${d}px`):"left"===l&&(p=`${n.floating.width+a}px`,f=o?u:`${d}px`),{data:{x:p,y:f}}}});function AF(e){const[t,i="center"]=e.split("-");return[t,i]}var wF=cF,xF=hF,SF=gF,CF=vF,EF=r.forwardRef(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(MF);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,SR.jsx)(TF,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,SR.jsx)(TF,{...n,ref:t,children:i})}));EF.displayName="Slot";var TF=r.forwardRef(((e,t)=>{const{children:i,...n}=e;if(r.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i);return r.cloneElement(i,{...kF(n,i.props),ref:t?WD(t,e):e})}return r.Children.count(i)>1?r.Children.only(null):null}));TF.displayName="SlotClone";var IF=e=>{let{children:t}=e;return(0,SR.jsx)(SR.Fragment,{children:t})};function MF(e){return r.isValidElement(e)&&e.type===IF}function kF(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}var BF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=r.forwardRef(((e,i)=>{const{asChild:n,...r}=e,o=n?EF:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,SR.jsx)(o,{...r,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{}),RF=e=>{const{present:t,children:i}=e,n=function(e){const[t,i]=r.useState(),n=r.useRef({}),o=r.useRef(e),s=r.useRef("none"),a=e?"mounted":"unmounted",[l,c]=function(e,t){return r.useReducer(((e,i)=>t[e][i]??e),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect((()=>{const e=PF(n.current);s.current="mounted"===l?e:"none"}),[l]),pL((()=>{const t=n.current,i=o.current;if(i!==e){const n=s.current,r=PF(t);c(e?"MOUNT":"none"===r||"none"===t?.display?"UNMOUNT":i&&n!==r?"ANIMATION_OUT":"UNMOUNT"),o.current=e}}),[e,c]),pL((()=>{if(t){let e;const i=t.ownerDocument.defaultView??window,r=r=>{const s=PF(n.current).includes(r.animationName);if(r.target===t&&s&&(c("ANIMATION_END"),!o.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=i.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},a=e=>{e.target===t&&(s.current=PF(n.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{i.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}c("ANIMATION_END")}),[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:r.useCallback((e=>{e&&(n.current=getComputedStyle(e)),i(e)}),[])}}(t),o="function"==typeof i?i({present:n.isPresent}):r.Children.only(i),s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.useCallback(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}(...t),t)}(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(o));return"function"==typeof i||n.isPresent?r.cloneElement(o,{ref:s}):null};function PF(e){return e?.animationName||"none"}function DF(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}RF.displayName="Presence";var LF=r.forwardRef(((e,t)=>{const{children:i,...n}=e,o=r.Children.toArray(i),s=o.find(NF);if(s){const e=s.props.children,i=o.map((t=>t===s?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,SR.jsx)(OF,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,SR.jsx)(OF,{...n,ref:t,children:i})}));LF.displayName="Slot";var OF=r.forwardRef(((e,t)=>{const{children:i,...n}=e;if(r.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}(i);return r.cloneElement(i,{...zF(n,i.props),ref:t?DF(t,e):e})}return r.Children.count(i)>1?r.Children.only(null):null}));OF.displayName="SlotClone";var FF=e=>{let{children:t}=e;return(0,SR.jsx)(SR.Fragment,{children:t})};function NF(e){return r.isValidElement(e)&&e.type===FF}function zF(e,t){const i={...t};for(const n in t){const r=e[n],o=t[n];/^on[A-Z]/.test(n)?r&&o?i[n]=function(){o(...arguments),r(...arguments)}:r&&(i[n]=r):"style"===n?i[n]={...r,...o}:"className"===n&&(i[n]=[r,o].filter(Boolean).join(" "))}return{...e,...i}}var UF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=r.forwardRef(((e,i)=>{const{asChild:n,...r}=e,o=n?LF:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,SR.jsx)(o,{...r,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{}),HF=r.forwardRef(((e,t)=>(0,SR.jsx)(UF.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));HF.displayName="VisuallyHidden";var VF=HF,[$F,GF]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];const n=()=>{const t=i.map((e=>r.createContext(e)));return function(i){const n=i?.[e]||t;return r.useMemo((()=>({[`__scope${e}`]:{...i,[e]:n}})),[i,n])}};return n.scopeName=e,[function(t,n){const o=r.createContext(n),s=i.length;i=[...i,n];const a=t=>{const{scope:i,children:n,...a}=t,l=i?.[e]?.[s]||o,c=r.useMemo((()=>a),Object.values(a));return(0,SR.jsx)(l.Provider,{value:c,children:n})};return a.displayName=t+"Provider",[a,function(i,a){const l=a?.[e]?.[s]||o,c=r.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${i}\` must be used within \`${t}\``)}]},YD(n,...t)]}("Tooltip",[sF]),QF=sF(),jF="tooltip.open",[qF,WF]=$F("TooltipProvider"),XF="Tooltip",[YF,KF]=$F(XF),ZF=e=>{const{__scopeTooltip:t,children:i,open:n,defaultOpen:o=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:l}=e,c=WF(XF,e.__scopeTooltip),u=QF(t),[h,d]=r.useState(null),p=function(){const[e,t]=r.useState(fL());return pL((()=>{t((e=>e??String(gL++)))}),[void 0]),e?`radix-${e}`:""}(),f=r.useRef(0),g=a??c.disableHoverableContent,m=l??c.delayDuration,_=r.useRef(!1),[v=!1,y]=function(e){let{prop:t,defaultProp:i,onChange:n=()=>{}}=e;const[o,s]=function(e){let{defaultProp:t,onChange:i}=e;const n=r.useState(t),[o]=n,s=r.useRef(o),a=oL(i);return r.useEffect((()=>{s.current!==o&&(a(o),s.current=o)}),[o,s,a]),n}({defaultProp:i,onChange:n}),a=void 0!==t,l=a?t:o,c=oL(n);return[l,r.useCallback((e=>{if(a){const i="function"==typeof e?e(t):e;i!==t&&c(i)}else s(e)}),[a,t,s,c])]}({prop:n,defaultProp:o,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(jF))):c.onClose(),s?.(e)}}),b=r.useMemo((()=>v?_.current?"delayed-open":"instant-open":"closed"),[v]),A=r.useCallback((()=>{window.clearTimeout(f.current),f.current=0,_.current=!1,y(!0)}),[y]),w=r.useCallback((()=>{window.clearTimeout(f.current),f.current=0,y(!1)}),[y]),x=r.useCallback((()=>{window.clearTimeout(f.current),f.current=window.setTimeout((()=>{_.current=!0,y(!0),f.current=0}),m)}),[m,y]);return r.useEffect((()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)}),[]),(0,SR.jsx)(wF,{...u,children:(0,SR.jsx)(YF,{scope:t,contentId:p,open:v,stateAttribute:b,trigger:h,onTriggerChange:d,onTriggerEnter:r.useCallback((()=>{c.isOpenDelayed?x():A()}),[c.isOpenDelayed,x,A]),onTriggerLeave:r.useCallback((()=>{g?w():(window.clearTimeout(f.current),f.current=0)}),[w,g]),onOpen:A,onClose:w,disableHoverableContent:g,children:i})})};ZF.displayName=XF;var JF="TooltipTrigger",eN=r.forwardRef(((e,t)=>{const{__scopeTooltip:i,...n}=e,o=KF(JF,i),s=WF(JF,i),a=QF(i),l=XD(t,r.useRef(null),o.onTriggerChange),c=r.useRef(!1),u=r.useRef(!1),h=r.useCallback((()=>c.current=!1),[]);return r.useEffect((()=>()=>document.removeEventListener("pointerup",h)),[h]),(0,SR.jsx)(xF,{asChild:!0,...a,children:(0,SR.jsx)(BF.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:l,onPointerMove:qD(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(u.current||s.isPointerInTransitRef.current||(o.onTriggerEnter(),u.current=!0))})),onPointerLeave:qD(e.onPointerLeave,(()=>{o.onTriggerLeave(),u.current=!1})),onPointerDown:qD(e.onPointerDown,(()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})})),onFocus:qD(e.onFocus,(()=>{c.current||o.onOpen()})),onBlur:qD(e.onBlur,o.onClose),onClick:qD(e.onClick,o.onClose)})})}));eN.displayName=JF;var[tN,iN]=$F("TooltipPortal",{forceMount:void 0}),nN="TooltipContent",rN=r.forwardRef(((e,t)=>{const i=iN(nN,e.__scopeTooltip),{forceMount:n=i.forceMount,side:r="top",...o}=e,s=KF(nN,e.__scopeTooltip);return(0,SR.jsx)(RF,{present:n||s.open,children:s.disableHoverableContent?(0,SR.jsx)(lN,{side:r,...o,ref:t}):(0,SR.jsx)(oN,{side:r,...o,ref:t})})})),oN=r.forwardRef(((e,t)=>{const i=KF(nN,e.__scopeTooltip),n=WF(nN,e.__scopeTooltip),o=r.useRef(null),s=XD(t,o),[a,l]=r.useState(null),{trigger:c,onClose:u}=i,h=o.current,{onPointerInTransitChange:d}=n,p=r.useCallback((()=>{l(null),d(!1)}),[d]),f=r.useCallback(((e,t)=>{const i=e.currentTarget,n={x:e.clientX,y:e.clientY},r=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n=[];switch(t){case"top":n.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":n.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":n.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":n.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i})}return n}(n,function(e,t){const i=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(i,n,r,o)){case o:return"left";case r:return"right";case i:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,i.getBoundingClientRect())),o=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(i.y-n.y)>=(e.y-n.y)*(i.x-n.x)))break;t.pop()}t.push(i)}t.pop();const i=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;i.length>=2;){const e=i[i.length-1],n=i[i.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;i.pop()}i.push(t)}return i.pop(),1===t.length&&1===i.length&&t[0].x===i[0].x&&t[0].y===i[0].y?t:t.concat(i)}(t)}([...r,...function(e){const{top:t,right:i,bottom:n,left:r}=e;return[{x:r,y:t},{x:i,y:t},{x:i,y:n},{x:r,y:n}]}(t.getBoundingClientRect())]);l(o),d(!0)}),[d]);return r.useEffect((()=>()=>p()),[p]),r.useEffect((()=>{if(c&&h){const e=e=>f(e,h),t=e=>f(e,c);return c.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}}),[c,h,f,p]),r.useEffect((()=>{if(a){const e=e=>{const t=e.target,i={x:e.clientX,y:e.clientY},n=c?.contains(t)||h?.contains(t),r=!function(e,t){const{x:i,y:n}=e;let r=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const e=t[o].x,a=t[o].y,l=t[s].x,c=t[s].y;a>n!=c>n&&i<(l-e)*(n-a)/(c-a)+e&&(r=!r)}return r}(i,a);n?p():r&&(p(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[c,h,a,u,p]),(0,SR.jsx)(lN,{...e,ref:s})})),[sN,aN]=$F(XF,{isInside:!1}),lN=r.forwardRef(((e,t)=>{const{__scopeTooltip:i,children:n,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=e,c=KF(nN,i),u=QF(i),{onClose:h}=c;return r.useEffect((()=>(document.addEventListener(jF,h),()=>document.removeEventListener(jF,h))),[h]),r.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,h]),(0,SR.jsx)(cL,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:(0,SR.jsxs)(SF,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,SR.jsx)(IF,{children:n}),(0,SR.jsx)(sN,{scope:i,isInside:!0,children:(0,SR.jsx)(VF,{id:c.contentId,role:"tooltip",children:o||n})})]})})}));rN.displayName=nN;var cN="TooltipArrow",uN=r.forwardRef(((e,t)=>{const{__scopeTooltip:i,...n}=e,r=QF(i);return aN(cN,i).isInside?null:(0,SR.jsx)(CF,{...r,...n,ref:t})}));uN.displayName=cN;var hN=ZF,dN=eN,pN=rN,fN=uN;function gN(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}let mN;!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(mN||(mN={}));const _N={[mN.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[mN.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[mN.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[mN.DUPLICATE_KEYS]:(e,t,i)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${i}\`. Even nested keys need to be unique. Rename one of the keys.`],[mN.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[mN.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[mN.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[mN.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[mN.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[mN.INPUT_TYPE_OVERRIDE]:(e,t,i)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${i}\`.`],[mN.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function vN(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const[o,...s]=_N[t](...n);console[e]("LEVA: "+o,...s)}const yN=vN.bind(null,"warn"),bN=vN.bind(null,"log"),AN=["value"],wN=["schema"],xN=["value"],SN=[],CN={};function EN(e){let{value:t}=e,i=gN(e,AN);for(let n of SN){const e=n(t,i);if(e)return e}}function TN(e,t){let{schema:i}=t,n=gN(t,wN);e in CN?yN(mN.ALREADY_REGISTERED_TYPE,e):(SN.push(((t,n)=>i(t,n)&&e)),CN[e]=n)}function IN(e,t,i,n){const{normalize:r}=CN[e];if(r)return r(t,i,n);if("object"!=typeof t||!("value"in t))return{value:t};const{value:o}=t;return{value:o,settings:gN(t,xN)}}function MN(e,t,i){const{format:n}=CN[e];return n?n(t,i):t}function kN(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function BN(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function RN(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?BN(Object(i),!0).forEach((function(t){kN(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BN(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const PN=(e,t,i)=>e>i?i:e<t?t:e,DN=e=>{if(""===e||"number"==typeof e)return e;try{const t=QN(e);if(!isNaN(t))return t}catch(e){}return parseFloat(e)},LN=Math.log(10);function ON(e){let t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10==0;)t/=10;const i=Math.floor(Math.log(t)/LN)+1,n=Math.floor(Math.log10(Math.abs(e))),r=Math.pow(10,n-i);return Math.max(r,.001)}const FN=(e,t,i)=>i===t?0:(PN(e,t,i)-t)/(i-t),NN=(e,t,i)=>e*(i-t)+t,zN=/\(([0-9+\-*/^ .]+)\)/,UN=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,HN=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,VN=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,$N=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,GN=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function QN(e){if(isNaN(Number(e))){if(zN.test(e)){const t=e.replace(zN,((e,t)=>String(QN(t))));return QN(t)}if(UN.test(e))return QN(e.replace(UN,((e,t,i)=>String(Math.pow(Number(t),Number(i))))));if(HN.test(e)){return QN(e.replace(HN,((e,t,i)=>String(Number(t)*Number(i)))))}if(VN.test(e)){return QN(e.replace(VN,((e,t,i)=>{if(0!=i)return String(Number(t)/Number(i));throw new Error("Division by zero")})))}if($N.test(e)){return QN(e.replace($N,((e,t,i)=>String(Number(t)+Number(i)))))}if(GN.test(e)){return QN(e.replace(GN,((e,t,i)=>String(Number(t)-Number(i)))))}return Number(e)}return Number(e)}function jN(e){return"[object Object]"===Object.prototype.toString.call(e)}let qN,WN;!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(qN||(qN={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(WN||(WN={}));const XN=["type","__customInput"],YN=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],KN=["type"];function ZN(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;var r,o;if("object"!=typeof e||Array.isArray(e))return{type:n,input:e,options:RN({key:t,label:t,optional:!1,disabled:!1,order:0},i)};if("__customInput"in e){const{type:i,__customInput:n}=e;return ZN(n,t,gN(e,XN),i)}const{render:s,label:a,optional:l,order:c=0,disabled:u,hint:h,onChange:d,onEditStart:p,onEditEnd:f,transient:g}=e,m=gN(e,YN),_=RN({render:s,key:t,label:null!=a?a:t,hint:h,transient:null!=g?g:!!d,onEditStart:p,onEditEnd:f,disabled:u,optional:l,order:c},i);let v,{type:y}=m,b=gN(m,KN);return y=null!=n?n:y,y in qN?{type:y,input:b,options:_}:(v=n&&jN(b)&&"value"in b?b.value:jN(A=b)&&0===Object.keys(A).length?void 0:b,{type:y,input:v,options:RN(RN({},_),{},{onChange:d,optional:null!==(r=_.optional)&&void 0!==r&&r,disabled:null!==(o=_.disabled)&&void 0!==o&&o})});var A}function JN(e,t,i,n,r){const{value:o,type:s,settings:a}=e;e.value=tz({type:s,value:o,settings:a},t,i,n),e.fromPanel=r}const ez=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function tz(e,t,i,n){let{type:r,value:o,settings:s}=e;const a="SELECT"!==r&&"function"==typeof t?t(o):t;let l;try{l=function(e,t,i,n,r,o){const{sanitize:s}=CN[e];return s?s(t,i,n,r,o):t}(r,a,s,o,i,n)}catch(r){throw new ez(`The value \`${t}\` did not result in a correct value.`,o,r)}return GR(l,o)?o:l}const iz=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0;return function(){const r=arguments,o=i&&!n,s=()=>e.apply(this,r);window.clearTimeout(n),n=window.setTimeout(s,t),o&&s()}},nz=e=>e.shiftKey?5:e.altKey?.2:1,rz=["value"],oz=["min","max"],sz=(e,t)=>{let{min:i=-1/0,max:n=1/0,suffix:r}=t;const o=parseFloat(e);if(""===e||isNaN(o))throw Error("Invalid number");const s=PN(o,i,n);return r?s+r:s},az=e=>{let{value:t}=e,i=gN(e,rz);const{min:n=-1/0,max:r=1/0}=i,o=gN(i,oz);let s=parseFloat(t);const a="string"==typeof t?t.substring((""+s).length):void 0;s=PN(s,n,r);let l=i.step;l||(Number.isFinite(n)?l=Number.isFinite(r)?+(Math.abs(r-n)/100).toPrecision(1):+(Math.abs(s-n)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-s)/100).toPrecision(1)));const c=l?10*ON(l):ON(s);return l=l||c/10,{value:a?s+a:s,settings:RN({initialValue:s,step:l,pad:Math.round(PN(Math.log10(1/c),0,2)),min:n,max:r,suffix:a},o)}},lz=(e,t)=>{let{step:i,initialValue:n}=t;return n+Math.round((e-n)/i)*i};var cz=Object.freeze({__proto__:null,schema:e=>{if("number"==typeof e)return!0;if("string"==typeof e){const t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:sz,format:(e,t)=>{let{pad:i=0,suffix:n}=t;const r=parseFloat(e).toFixed(i);return n?r+n:r},normalize:az,sanitizeStep:lz});function uz(){return uz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},uz.apply(this,arguments)}const hz=(0,r.createContext)({});function dz(){return(0,r.useContext)(hz)}const pz=(0,r.createContext)(null),fz=(0,r.createContext)(null),gz=(0,r.createContext)(null);function mz(){return(0,r.useContext)(fz)}function _z(e,t){const[i,n]=e.split(" "),r={};return"none"!==i&&(r.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${"default"!==i&&i||t.borderColor}`),n&&(r.backgroundColor=n),r}const vz={$inputStyle:()=>e=>_z(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>_z(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>_z(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>_z(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:yz,css:bz,createTheme:Az,globalCss:wz,keyframes:xz}=(e=>{const t=(e=>{let t=!1;const i=nD(e,(e=>{t=!0;const i="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",n="object"==typeof e.media&&e.media||{},r="object"==typeof e.root?e.root||null:globalThis.document||null,o="object"==typeof e.theme&&e.theme||{},s={prefix:i,media:n,theme:o,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...fP},utils:"object"==typeof e.utils&&e.utils||{}},a=UP(r),l={css:GP(s,a),globalCss:KP(s,a),keyframes:JP(s,a),createTheme:iD(s,a),reset(){a.reset(),l.theme.toString()},theme:{},sheet:a,config:s,prefix:i,getCssText:a.toString,toString:a.toString};return String(l.theme=l.createTheme(o)),l}));return t||i.reset(),i})(e);return t.styled=(e=>{let{config:t,sheet:i}=e;return rD(t,(()=>{const e=GP(t,i);return function(){const t=e(...arguments),i=t[_P].type,n=r.forwardRef(((e,n)=>{const o=e&&e.as||i,{props:s,deferredInjector:a}=t(e);return delete s.as,s.ref=n,a?r.createElement(r.Fragment,null,r.createElement(o,s),r.createElement(a,null)):r.createElement(o,s)}));return n.className=t.className,n.displayName=`Styled.${i.displayName||i.name||i}`,n.selector=t.selector,n.toString=()=>t.selector,n[_P]=t[_P],n}}))})(t),t})({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:RN(RN({},vz),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":vz.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":vz.$focusStyle()(e)}),$hover:e=>({"&:hover":vz.$hoverStyle()(e)}),$active:e=>({"&:active":vz.$activeStyle()(e)})})}),Sz=wz({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Cz(e,t){const{theme:i}=(0,r.useContext)(pz);if(!(e in i)||!(t in i[e]))return yN(mN.THEME_ERROR,e,t),"";let n=t;for(;;){let t=i[e][n];if("string"!=typeof t||"$"!==t.charAt(0))return t;n=t.substr(1)}}const Ez=yz("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Tz=yz("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Ez}`]:{paddingLeft:0}}),Iz=yz(Tz,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Mz=yz("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),kz=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Bz=["onUpdate"];function Rz(e){let{innerLabel:t,value:i,onUpdate:n,onChange:o,onKeyDown:s,type:a,id:l,inputType:c="text",rows:u=0}=e,h=gN(e,kz);const{id:d,emitOnEditStart:p,emitOnEditEnd:f,disabled:g}=dz(),m=l||d,_=(0,r.useRef)(null),v=u>0,y=v?"textarea":"input",b=(0,r.useCallback)((e=>t=>{const i=t.currentTarget.value;e(i)}),[]);r.useEffect((()=>{const e=_.current,t=b((e=>{n(e),f()}));return null==e||e.addEventListener("blur",t),()=>null==e?void 0:e.removeEventListener("blur",t)}),[b,n,f]);const A=(0,r.useCallback)((e=>{"Enter"===e.key&&b(n)(e)}),[b,n]),w=Object.assign({as:y},v?{rows:u}:{},h);return r.createElement(Mz,{textArea:v},t&&"string"==typeof t?r.createElement(Tz,null,t):t,r.createElement(Ez,uz({levaType:a,ref:_,id:m,type:c,autoComplete:"off",spellCheck:"false",value:i,onChange:b(o),onFocus:()=>p(),onKeyPress:A,onKeyDown:s,disabled:g},w)))}function Pz(e){let{onUpdate:t}=e,i=gN(e,Bz);const n=(0,r.useCallback)((e=>t(DN(e))),[t]),o=(0,r.useCallback)((e=>{const i="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(i){e.preventDefault();const n=e.altKey?.1:e.shiftKey?10:1;t((e=>parseFloat(e)+i*n))}}),[t]);return r.createElement(Rz,uz({},i,{onUpdate:n,onKeyDown:o,type:"number"}))}const Dz=yz("div",{}),Lz=yz("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Oz=yz("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Lz}::after`]:{opacity:.6},[`${Dz}:hover > & + ${Lz}::after`]:{opacity:.6},[`${Dz}:hover > & > svg`]:{opacity:1}}),Fz=yz("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Dz}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Nz=yz("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${Fz} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),zz=yz(Nz,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Uz=yz("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Hz=yz("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Vz=yz("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),$z=yz("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Vz}`]:{pointerEvents:"auto"}}}}}),Gz=yz("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Qz=yz("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),jz=yz(fN,{fill:"$toolTipBackground"});function qz(e){let{children:t}=e;const{className:i}=(0,r.useContext)(pz);return r.createElement(VR,{className:i},t)}const Wz=["align"];function Xz(){const{id:e,disable:t,disabled:i}=dz();return r.createElement(r.Fragment,null,r.createElement(Hz,{id:e+"__disable",type:"checkbox",checked:!i,onChange:()=>t(!i)}),r.createElement("label",{htmlFor:e+"__disable"}))}function Yz(e){const{id:t,optional:i,hint:n}=dz(),o=e.htmlFor||(t?{htmlFor:t}:null),s=n||"string"!=typeof e.children?null:{title:e.children};return r.createElement(r.Fragment,null,i&&r.createElement(Xz,null),void 0!==n?r.createElement(hN,null,r.createElement(dN,{asChild:!0},r.createElement(Vz,uz({},o,e))),r.createElement(pN,{side:"top",sideOffset:2},r.createElement(Qz,null,n,r.createElement(jz,null)))):r.createElement(Vz,uz({},o,s,e)))}function Kz(e){let{align:t}=e,i=gN(e,Wz);const{value:n,label:o,key:s,disabled:a}=dz(),{hideCopyButton:l}=(0,r.useContext)(gz),c=!l&&void 0!==s,[u,h]=(0,r.useState)(!1);return r.createElement(Uz,{align:t,onPointerLeave:()=>h(!1)},r.createElement(Yz,i),c&&!a&&r.createElement("div",{title:`Click to copy ${"string"==typeof o?o:s} value`},u?r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),r.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):r.createElement("svg",{onClick:async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:null!=n?n:""})),h(!0)}catch(e){yN(mN.CLIPBOARD_ERROR,{[s]:n})}},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),r.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Zz=["toggled"],Jz=yz("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function eU(e){let{toggled:t}=e,i=gN(e,Zz);return r.createElement(Jz,uz({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},i),r.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const tU=["input"];function iU(e){let{input:t}=e,i=gN(e,tU);return t?r.createElement(zz,i):r.createElement(Nz,i)}function nU(e){let{value:t,type:i,settings:n,setValue:o}=e;const[s,a]=(0,r.useState)(MN(i,t,n)),l=(0,r.useRef)(t),c=(0,r.useRef)(n);c.current=n;const u=(0,r.useCallback)((e=>a(MN(i,e,c.current))),[i]),h=(0,r.useCallback)((e=>{try{o(e)}catch(e){const{type:t,previousValue:i}=e;if("LEVA_ERROR"!==t)throw e;u(i)}}),[u,o]);return(0,r.useEffect)((()=>{GR(t,l.current)||u(t),l.current=t}),[t,u]),{displayValue:s,onChange:a,onUpdate:h}}function rU(e,t){const{emitOnEditStart:i,emitOnEditEnd:n}=dz();return function(e,t){var i;return i=ND,OD.set(i.key,i.engine),FD.set(i.key,i.resolver),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const o=r.useMemo((()=>new GD(e)),[]);if(o.applyHandlers(e,n),o.applyConfig(t,i),r.useEffect(o.effect.bind(o)),r.useEffect((()=>o.clean.bind(o)),[]),void 0===t.target)return o.bind.bind(o)}({drag:e},t||{},"drag")}((t=>{t.first&&(document.body.classList.add("leva__panel__dragged"),null==i||i());const r=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null==n||n()),r}),t)}function oU(){const e=(0,r.useRef)(null),t=(0,r.useRef)({x:0,y:0}),i=(0,r.useCallback)((i=>{Object.assign(t.current,i),e.current&&(e.current.style.transform=`translate3d(${t.current.x}px, ${t.current.y}px, 0)`)}),[]);return[e,i]}const sU=["__refCount"],aU=(e,t)=>e[t]?gN(e[t],sU):null,lU=yz("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),cU=yz("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),uU=yz("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),hU=yz("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),dU=yz("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function pU(e){let{value:t,min:i,max:n,onDrag:o,step:s,initialValue:a}=e;const l=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useRef)(0),h=Cz("sizes","scrubberWidth"),d=rU((e=>{let{event:r,first:d,xy:[p],movement:[f],memo:g}=e;if(d){const{width:e,left:o}=l.current.getBoundingClientRect();u.current=e-parseFloat(h),g=(null==r?void 0:r.target)===c.current?t:NN((p-o)/e,i,n)}const m=g+NN(f/u.current,0,n-i);return o(lz(m,{step:s,initialValue:a})),g})),p=FN(t,i,n);return r.createElement(hU,uz({ref:l},d()),r.createElement(cU,null,r.createElement(dU,{style:{left:0,right:100*(1-p)+"%"}})),r.createElement(uU,{ref:c,style:{left:`calc(${p} * (100% - ${h}))`}}))}const fU=r.memo((e=>{let{label:t,onUpdate:i,step:n,innerLabelTrim:o}=e;const[s,a]=(0,r.useState)(!1),l=rU((e=>{let{active:t,delta:[r],event:o,memo:s=0}=e;return a(t),s+=r/2,Math.abs(s)>=1&&(i((e=>parseFloat(e)+Math.floor(s)*n*nz(o))),s=0),s}));return r.createElement(Iz,uz({dragging:s,title:t.length>1?t:""},l()),t.slice(0,o))}));function gU(e){let{label:t,id:i,displayValue:n,onUpdate:o,onChange:s,settings:a,innerLabelTrim:l=1}=e;const c=l>0&&r.createElement(fU,{label:t,step:a.step,onUpdate:o,innerLabelTrim:l});return r.createElement(Pz,{id:i,value:String(n),onUpdate:o,onChange:s,innerLabel:c})}const{sanitizeStep:mU}=cz;var _U=RN({component:function(){const e=dz(),{label:t,value:i,onUpdate:n,settings:o,id:s}=e,{min:a,max:l}=o,c=l!==1/0&&a!==-1/0;return r.createElement(iU,{input:!0},r.createElement(Kz,null,t),r.createElement(lU,{hasRange:c},c&&r.createElement(pU,uz({value:parseFloat(i),onDrag:n},o)),r.createElement(gU,uz({},e,{id:s,label:"value",innerLabelTrim:c?0:1}))))}},gN(cz,["sanitizeStep"])),vU=Object.freeze({__proto__:null,schema:(e,t)=>tP().schema({options:tP().passesAnyOf(tP().object(),tP().array())}).test(t),sanitize:(e,t)=>{let{values:i}=t;if(i.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:(e,t)=>{let{values:i}=t;return i.indexOf(e)},normalize:e=>{let t,i,{value:n,options:r}=e;return Array.isArray(r)?(i=r,t=r.map((e=>String(e)))):(i=Object.values(r),t=Object.keys(r)),"value"in e?i.includes(n)||(t.unshift(String(n)),i.unshift(n)):n=i[0],Object.values(r).includes(n)||(r[String(n)]=n),{value:n,settings:{keys:t,values:i}}}});const yU=yz("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),bU=yz("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),AU=yz("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${bU}:focus + &`]:{$focusStyle:""},[`${bU}:hover + &`]:{$hoverStyle:""}});function wU(e){let{displayValue:t,value:i,onUpdate:n,id:o,settings:s,disabled:a}=e;const{keys:l,values:c}=s,u=(0,r.useRef)();return i===c[t]&&(u.current=l[t]),r.createElement(yU,null,r.createElement(bU,{id:o,value:t,onChange:e=>n(c[Number(e.currentTarget.value)]),disabled:a},l.map(((e,t)=>r.createElement("option",{key:e,value:t},e)))),r.createElement(AU,null,u.current),r.createElement(eU,{toggled:!0}))}var xU=RN({component:function(){const{label:e,value:t,displayValue:i,onUpdate:n,id:o,disabled:s,settings:a}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(wU,{id:o,value:t,displayValue:i,onUpdate:n,settings:a,disabled:s}))}},vU),SU=Object.freeze({__proto__:null,schema:e=>tP().string().test(e),sanitize:e=>{if("string"!=typeof e)throw Error("Invalid string");return e},normalize:e=>{let{value:t,editable:i=!0,rows:n=!1}=e;return{value:t,settings:{editable:i,rows:"number"==typeof n?n:n?5:0}}}});const CU=["displayValue","onUpdate","onChange","editable"],EU=yz("div",{whiteSpace:"pre-wrap"});function TU(e){let{displayValue:t,onUpdate:i,onChange:n,editable:o=!0}=e,s=gN(e,CU);return o?r.createElement(Rz,uz({value:t,onUpdate:i,onChange:n},s)):r.createElement(EU,null,t)}var IU=RN({component:function(){const{label:e,settings:t,displayValue:i,onUpdate:n,onChange:o}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(TU,uz({displayValue:i,onUpdate:n,onChange:o},t)))}},SU),MU=Object.freeze({__proto__:null,schema:e=>tP().boolean().test(e),sanitize:e=>{if("boolean"!=typeof e)throw Error("Invalid boolean");return e}});const kU=yz("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function BU(e){let{value:t,onUpdate:i,id:n,disabled:o}=e;return r.createElement(kU,null,r.createElement("input",{id:n,type:"checkbox",checked:t,onChange:e=>i(e.currentTarget.checked),disabled:o}),r.createElement("label",{htmlFor:n},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var RU=RN({component:function(){const{label:e,value:t,onUpdate:i,disabled:n,id:o}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(BU,{value:t,onUpdate:i,id:o,disabled:n}))}},MU);const PU=["locked"];function DU(e){let{value:t,id:i,valueKey:n,settings:o,onUpdate:s,innerLabelTrim:a}=e;const l=(0,r.useRef)(t[n]);l.current=t[n];const c=(0,r.useCallback)((e=>s({[n]:tz({type:"NUMBER",value:l.current,settings:o},e)})),[s,o,n]),u=nU({type:"NUMBER",value:t[n],settings:o,setValue:c});return r.createElement(gU,{id:i,label:n,value:t[n],displayValue:u.displayValue,onUpdate:u.onUpdate,onChange:u.onChange,settings:o,innerLabelTrim:a})}const LU=yz("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function OU(e){let{locked:t}=e,i=gN(e,PU);return r.createElement("svg",uz({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),t?r.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):r.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function FU(e){let{value:t,onUpdate:i,settings:n,innerLabelTrim:o}=e;const{id:s,setSettings:a}=dz(),{lock:l,locked:c}=n;return r.createElement(LU,{withLock:l},l&&r.createElement(OU,{locked:c,onClick:()=>a({locked:!c})}),Object.keys(t).map(((e,a)=>r.createElement(DU,{id:0===a?s:`${s}.${e}`,key:e,valueKey:e,value:t,settings:n[e],onUpdate:i,innerLabelTrim:o}))))}const NU=(e,t)=>{const i={};let n=0,r=1/0;Object.entries(e).forEach((e=>{let[o,s]=e;i[o]=az(RN({value:s},t[o])).settings,n=Math.max(n,i[o].step),r=Math.min(r,i[o].pad)}));for(let o in i){const{step:e,min:s,max:a}=t[o]||{};isFinite(e)||isFinite(s)&&isFinite(a)||(i[o].step=n,i[o].pad=r)}return i},zU=["lock"],UU=["value"];function HU(e){const t=tP().array().length(e).every.number();return i=>t.test(i)||(t=>{if(!t||"object"!=typeof t)return!1;const i=Object.values(t);return i.length===e&&i.every((e=>isFinite(e)))})(i)}function VU(e,t,i){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce(((e,i,n)=>Object.assign(e,{[t[n]]:i})),{})}(e,i)}function $U(e){return{schema:HU(e.length),normalize:t=>{let{value:i}=t;return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{lock:n=!1}=t,r=gN(t,zU),o=Array.isArray(e)?"array":"object",s="object"===o?Object.keys(e):i,a=VU(e,"object",s),l=(e=>!!e&&("step"in e||"min"in e||"max"in e))(r)?s.reduce(((e,t)=>Object.assign(e,{[t]:r})),{}):r;return{value:"array"===o?e:a,settings:RN(RN({},NU(a,l)),{},{format:o,keys:s,lock:n,locked:!1})}}(i,gN(t,UU),e)},format:(e,t)=>((e,t)=>VU(e,"object",t.keys))(e,t),sanitize:(e,t,i)=>((e,t,i)=>{const n=VU(e,"object",t.keys);for(let s in n)n[s]=sz(n[s],t[s]);const r=Object.keys(n);let o={};if(r.length===t.keys.length)o=n;else{const e=VU(i,"object",t.keys);if(1===r.length&&t.locked){const t=r[0],i=n[t],s=e[t],a=0!==s?i/s:1;for(let n in e)n===t?o[t]=i:o[n]=e[n]*a}else o=RN(RN({},e),n)}return VU(o,t.format,t.keys)})(e,t,i)}}var GU={grad:.9,turn:360,rad:360/(2*Math.PI)},QU=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},jU=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},qU=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e>t?e:t},WU=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},XU=function(e){return{r:qU(e.r,0,255),g:qU(e.g,0,255),b:qU(e.b,0,255),a:qU(e.a)}},YU=function(e){return{r:jU(e.r),g:jU(e.g),b:jU(e.b),a:jU(e.a,3)}},KU=/^#([0-9a-f]{3,8})$/i,ZU=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},JU=function(e){var t=e.r,i=e.g,n=e.b,r=e.a,o=Math.max(t,i,n),s=o-Math.min(t,i,n),a=s?o===t?(i-n)/s:o===i?2+(n-t)/s:4+(t-i)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:r}},eH=function(e){var t=e.h,i=e.s,n=e.v,r=e.a;t=t/360*6,i/=100,n/=100;var o=Math.floor(t),s=n*(1-i),a=n*(1-(t-o)*i),l=n*(1-(1-t+o)*i),c=o%6;return{r:255*[n,a,s,s,l,n][c],g:255*[l,n,n,a,s,s][c],b:255*[s,s,l,n,n,a][c],a:r}},tH=function(e){return{h:WU(e.h),s:qU(e.s,0,100),l:qU(e.l,0,100),a:qU(e.a)}},iH=function(e){return{h:jU(e.h),s:jU(e.s),l:jU(e.l),a:jU(e.a,3)}},nH=function(e){return eH((i=(t=e).s,{h:t.h,s:(i*=((n=t.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:t.a}));var t,i,n},rH=function(e){return{h:(t=JU(e)).h,s:(r=(200-(i=t.s))*(n=t.v)/100)>0&&r<200?i*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,i,n,r},oH=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sH=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aH=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lH=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cH={string:[[function(e){var t=KU.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?jU(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?jU(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=aH.exec(e)||lH.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:XU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=oH.exec(e)||sH.exec(e);if(!t)return null;var i,n,r=tH({h:(i=t[1],n=t[2],void 0===n&&(n="deg"),Number(i)*(GU[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return nH(r)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,n=e.b,r=e.a,o=void 0===r?1:r;return QU(t)&&QU(i)&&QU(n)?XU({r:Number(t),g:Number(i),b:Number(n),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,i=e.s,n=e.l,r=e.a,o=void 0===r?1:r;if(!QU(t)||!QU(i)||!QU(n))return null;var s=tH({h:Number(t),s:Number(i),l:Number(n),a:Number(o)});return nH(s)},"hsl"],[function(e){var t=e.h,i=e.s,n=e.v,r=e.a,o=void 0===r?1:r;if(!QU(t)||!QU(i)||!QU(n))return null;var s=function(e){return{h:WU(e.h),s:qU(e.s,0,100),v:qU(e.v,0,100),a:qU(e.a)}}({h:Number(t),s:Number(i),v:Number(n),a:Number(o)});return eH(s)},"hsv"]]},uH=function(e,t){for(var i=0;i<t.length;i++){var n=t[i][0](e);if(n)return[n,t[i][1]]}return[null,void 0]},hH=function(e){return"string"==typeof e?uH(e.trim(),cH.string):"object"==typeof e&&null!==e?uH(e,cH.object):[null,void 0]},dH=function(e,t){var i=rH(e);return{h:i.h,s:qU(i.s+100*t,0,100),l:i.l,a:i.a}},pH=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},fH=function(e,t){var i=rH(e);return{h:i.h,s:i.s,l:qU(i.l+100*t,0,100),a:i.a}},gH=function(){function e(e){this.parsed=hH(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return jU(pH(this.rgba),2)},e.prototype.isDark=function(){return pH(this.rgba)<.5},e.prototype.isLight=function(){return pH(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=YU(this.rgba)).r,i=e.g,n=e.b,o=(r=e.a)<1?ZU(jU(255*r)):"","#"+ZU(t)+ZU(i)+ZU(n)+o;var e,t,i,n,r,o},e.prototype.toRgb=function(){return YU(this.rgba)},e.prototype.toRgbString=function(){return t=(e=YU(this.rgba)).r,i=e.g,n=e.b,(r=e.a)<1?"rgba("+t+", "+i+", "+n+", "+r+")":"rgb("+t+", "+i+", "+n+")";var e,t,i,n,r},e.prototype.toHsl=function(){return iH(rH(this.rgba))},e.prototype.toHslString=function(){return t=(e=iH(rH(this.rgba))).h,i=e.s,n=e.l,(r=e.a)<1?"hsla("+t+", "+i+"%, "+n+"%, "+r+")":"hsl("+t+", "+i+"%, "+n+"%)";var e,t,i,n,r},e.prototype.toHsv=function(){return e=JU(this.rgba),{h:jU(e.h),s:jU(e.s),v:jU(e.v),a:jU(e.a,3)};var e},e.prototype.invert=function(){return mH({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),mH(dH(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),mH(dH(this.rgba,-e))},e.prototype.grayscale=function(){return mH(dH(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),mH(fH(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),mH(fH(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?mH({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):jU(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=rH(this.rgba);return"number"==typeof e?mH({h:e,s:t.s,l:t.l,a:t.a}):jU(t.h)},e.prototype.isEqual=function(e){return this.toHex()===mH(e).toHex()},e}(),mH=function(e){return e instanceof gH?e:new gH(e)},_H=[];function vH(){return(vH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function yH(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(i=o[n])>=0||(r[i]=e[i]);return r}function bH(e){var t=(0,r.useRef)(e),i=(0,r.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,i.current}var AH=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),e>i?i:e<t?t:e},wH=function(e){return"touches"in e},xH=function(e){return e&&e.ownerDocument.defaultView||self},SH=function(e,t,i){var n=e.getBoundingClientRect(),r=wH(t)?function(e,t){for(var i=0;i<e.length;i++)if(e[i].identifier===t)return e[i];return e[0]}(t.touches,i):t;return{left:AH((r.pageX-(n.left+xH(e).pageXOffset))/n.width),top:AH((r.pageY-(n.top+xH(e).pageYOffset))/n.height)}},CH=function(e){!wH(e)&&e.preventDefault()},EH=r.memo((function(e){var t=e.onMove,i=e.onKey,n=yH(e,["onMove","onKey"]),o=(0,r.useRef)(null),s=bH(t),a=bH(i),l=(0,r.useRef)(null),c=(0,r.useRef)(!1),u=(0,r.useMemo)((function(){var e=function(e){CH(e),(wH(e)?e.touches.length>0:e.buttons>0)&&o.current?s(SH(o.current,e,l.current)):i(!1)},t=function(){return i(!1)};function i(i){var n=c.current,r=xH(o.current),s=i?r.addEventListener:r.removeEventListener;s(n?"touchmove":"mousemove",e),s(n?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,n=o.current;if(n&&(CH(t),!function(e,t){return t&&!wH(e)}(t,c.current)&&n)){if(wH(t)){c.current=!0;var r=t.changedTouches||[];r.length&&(l.current=r[0].identifier)}n.focus(),s(SH(n,t,l.current)),i(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),a({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},i]}),[a,s]),h=u[0],d=u[1],p=u[2];return(0,r.useEffect)((function(){return p}),[p]),r.createElement("div",vH({},n,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:o,onKeyDown:d,tabIndex:0,role:"slider"}))})),TH=function(e){return e.filter(Boolean).join(" ")},IH=function(e){var t=e.color,i=e.left,n=e.top,o=void 0===n?.5:n,s=TH(["react-colorful__pointer",e.className]);return r.createElement("div",{className:s,style:{top:100*o+"%",left:100*i+"%"}},r.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},MH=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=Math.pow(10,t)),Math.round(i*e)/i},kH=function(e){var t=e.s,i=e.v,n=e.a,r=(200-t)*i/100;return{h:MH(e.h),s:MH(r>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0),l:MH(r/2),a:MH(n,2)}},BH=function(e){var t=kH(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},RH=function(e){var t=kH(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},PH=function(e){var t=e.h,i=e.s,n=e.v,r=e.a;t=t/360*6,i/=100,n/=100;var o=Math.floor(t),s=n*(1-i),a=n*(1-(t-o)*i),l=n*(1-(1-t+o)*i),c=o%6;return{r:MH(255*[n,a,s,s,l,n][c]),g:MH(255*[l,n,n,a,s,s][c]),b:MH(255*[s,s,l,n,n,a][c]),a:MH(r,2)}},DH=function(e){var t=e.r,i=e.g,n=e.b,r=e.a,o=Math.max(t,i,n),s=o-Math.min(t,i,n),a=s?o===t?(i-n)/s:o===i?2+(n-t)/s:4+(t-i)/s:0;return{h:MH(60*(a<0?a+6:a)),s:MH(o?s/o*100:0),v:MH(o/255*100),a:r}},LH=r.memo((function(e){var t=e.hue,i=e.onChange,n=TH(["react-colorful__hue",e.className]);return r.createElement("div",{className:n},r.createElement(EH,{onMove:function(e){i({h:360*e.left})},onKey:function(e){i({h:AH(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":MH(t),"aria-valuemax":"360","aria-valuemin":"0"},r.createElement(IH,{className:"react-colorful__hue-pointer",left:t/360,color:BH({h:t,s:100,v:100,a:1})})))})),OH=r.memo((function(e){var t=e.hsva,i=e.onChange,n={backgroundColor:BH({h:t.h,s:100,v:100,a:1})};return r.createElement("div",{className:"react-colorful__saturation",style:n},r.createElement(EH,{onMove:function(e){i({s:100*e.left,v:100-100*e.top})},onKey:function(e){i({s:AH(t.s+100*e.left,0,100),v:AH(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+MH(t.s)+"%, Brightness "+MH(t.v)+"%"},r.createElement(IH,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:BH(t)})))})),FH=function(e,t){if(e===t)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0};function NH(e,t,i){var n=bH(i),o=(0,r.useState)((function(){return e.toHsva(t)})),s=o[0],a=o[1],l=(0,r.useRef)({color:t,hsva:s});(0,r.useEffect)((function(){if(!e.equal(t,l.current.color)){var i=e.toHsva(t);l.current={hsva:i,color:t},a(i)}}),[t,e]),(0,r.useEffect)((function(){var t;FH(s,l.current.hsva)||e.equal(t=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:t},n(t))}),[s,e,n]);var c=(0,r.useCallback)((function(e){a((function(t){return Object.assign({},t,e)}))}),[]);return[s,c]}var zH="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,UH=new Map,HH=function(e){zH((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!UH.has(t)){var n=t.createElement("style");n.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',UH.set(t,n);var r=i.nc;r&&n.setAttribute("nonce",r),t.head.appendChild(n)}}),[])},VH=function(e){var t=e.className,i=e.colorModel,n=e.color,o=void 0===n?i.defaultColor:n,s=e.onChange,a=yH(e,["className","colorModel","color","onChange"]),l=(0,r.useRef)(null);HH(l);var c=NH(i,o,s),u=c[0],h=c[1],d=TH(["react-colorful",t]);return r.createElement("div",vH({},a,{ref:l,className:d}),r.createElement(OH,{hsva:u,onChange:h}),r.createElement(LH,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},$H=function(e){var t=e.className,i=e.hsva,n=e.onChange,o={backgroundImage:"linear-gradient(90deg, "+RH(Object.assign({},i,{a:0}))+", "+RH(Object.assign({},i,{a:1}))+")"},s=TH(["react-colorful__alpha",t]),a=MH(100*i.a);return r.createElement("div",{className:s},r.createElement("div",{className:"react-colorful__alpha-gradient",style:o}),r.createElement(EH,{onMove:function(e){n({a:e.left})},onKey:function(e){n({a:AH(i.a+e.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},r.createElement(IH,{className:"react-colorful__alpha-pointer",left:i.a,color:RH(i)})))},GH=function(e){var t=e.className,i=e.colorModel,n=e.color,o=void 0===n?i.defaultColor:n,s=e.onChange,a=yH(e,["className","colorModel","color","onChange"]),l=(0,r.useRef)(null);HH(l);var c=NH(i,o,s),u=c[0],h=c[1],d=TH(["react-colorful",t]);return r.createElement("div",vH({},a,{ref:l,className:d}),r.createElement(OH,{hsva:u,onChange:h}),r.createElement(LH,{hue:u.h,onChange:h}),r.createElement($H,{hsva:u,onChange:h,className:"react-colorful__last-control"}))},QH={defaultColor:{r:0,g:0,b:0,a:1},toHsva:DH,fromHsva:PH,equal:FH},jH=function(e){return r.createElement(GH,vH({},e,{colorModel:QH}))},qH={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return DH({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=PH(e)).r,g:t.g,b:t.b};var t},equal:FH},WH=function(e){return r.createElement(VH,vH({},e,{colorModel:qH}))};function XH(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var YH,KH,ZH,JH,eV,tV={exports:{}};function iV(){return KH?YH:(KH=1,YH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}var nV=XH((eV||(eV=1,tV.exports=function(){if(JH)return ZH;JH=1;var e=iV();function t(){}function i(){}return i.resetWarningCache=t,ZH=function(){function n(t,i,n,r,o,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return n}n.isRequired=n;var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:i,resetWarningCache:t};return o.PropTypes=o,o}}()()),tV.exports)),rV=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function oV(e,t){var i=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var i=t.split(".").pop().toLowerCase(),n=rV.get(i);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof i.path){var n=e.webkitRelativePath;Object.defineProperty(i,"path",{value:"string"==typeof t?t:"string"==typeof n&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return i}var sV=[".DS_Store","Thumbs.db"];function aV(e){return"object"==typeof e&&null!==e}function lV(e){return dV(e.target.files).map((function(e){return oV(e)}))}function cV(e){return TR(this,void 0,void 0,(function(){return IR(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return oV(e)}))]}}))}))}function uV(e,t){return TR(this,void 0,void 0,(function(){var i;return IR(this,(function(n){switch(n.label){case 0:return null===e?[2,[]]:e.items?(i=dV(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,i]:[4,Promise.all(i.map(pV))]):[3,2];case 1:return[2,hV(fV(n.sent()))];case 2:return[2,hV(dV(e.files).map((function(e){return oV(e)})))]}}))}))}function hV(e){return e.filter((function(e){return-1===sV.indexOf(e.name)}))}function dV(e){if(null===e)return[];for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push(n)}return t}function pV(e){if("function"!=typeof e.webkitGetAsEntry)return gV(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?_V(t):gV(e)}function fV(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(MR(arguments[t]));return e}(e,Array.isArray(t)?fV(t):[t])}),[])}function gV(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var i=oV(t);return Promise.resolve(i)}function mV(e){return TR(this,void 0,void 0,(function(){return IR(this,(function(t){return[2,e.isDirectory?_V(e):vV(e)]}))}))}function _V(e){var t=e.createReader();return new Promise((function(e,i){var n=[];!function r(){var o=this;t.readEntries((function(t){return TR(o,void 0,void 0,(function(){var o,s,a;return IR(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return o=l.sent(),e(o),[3,4];case 3:return s=l.sent(),i(s),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(mV)),n.push(a),r(),l.label=6;case 6:return[2]}}))}))}),(function(e){i(e)}))}()}))}function vV(e){return TR(this,void 0,void 0,(function(){return IR(this,(function(t){return[2,new Promise((function(t,i){e.file((function(i){var n=oV(i,e.fullPath);t(n)}),(function(e){i(e)}))}))]}))}))}var yV,bV={},AV=XH((yV||(yV=1,bV.__esModule=!0,bV.default=function(e,t){if(e&&t){var i=Array.isArray(t)?t:t.split(",");if(0===i.length)return!0;var n=e.name||"",r=(e.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return i.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):r===t}))}return!0}),bV));function wV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?wV(Object(i),!0).forEach((function(t){SV(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function SV(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o=[],s=!0,a=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return EV(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?EV(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EV(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var TV=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},IV=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},MV=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},kV={code:"too-many-files",message:"Too many files"};function BV(e,t){var i="application/x-moz-file"===e.type||AV(e,t);return[i,i?null:TV(t)]}function RV(e,t,i){if(PV(e.size))if(PV(t)&&PV(i)){if(e.size>i)return[!1,IV(i)];if(e.size<t)return[!1,MV(t)]}else{if(PV(t)&&e.size<t)return[!1,MV(t)];if(PV(i)&&e.size>i)return[!1,IV(i)]}return[!0,null]}function PV(e){return null!=e}function DV(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function LV(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function OV(e){e.preventDefault()}function FV(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.some((function(t){return!DV(e)&&t&&t.apply(void 0,[e].concat(n)),DV(e)}))}}function NV(e){return e="string"==typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return xV(xV({},e),{},SV({},t,[]))}),{}):{}}]}var zV=["children"],UV=["open"],HV=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],VV=["refKey","onChange","onClick"];function $V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o=[],s=!0,a=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==i.return||i.return()}finally{if(a)throw r}}return o}}(e,t)||GV(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GV(e,t){if(e){if("string"==typeof e)return QV(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?QV(e,t):void 0}}function QV(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function jV(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function qV(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?jV(Object(i),!0).forEach((function(t){WV(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jV(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function WV(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function XV(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var YV=(0,r.forwardRef)((function(e,t){var i=e.children,n=JV(XV(e,zV)),o=n.open,s=XV(n,UV);return(0,r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),r.createElement(r.Fragment,null,i(qV(qV({},s),{},{open:o})))}));YV.displayName="Dropzone";var KV={disabled:!1,getFilesFromEvent:function(e){return TR(this,void 0,void 0,(function(){return IR(this,(function(t){return aV(e)&&aV(e.dataTransfer)?[2,uV(e.dataTransfer,e.type)]:function(e){return aV(e)&&aV(e.target)}(e)?[2,lV(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"==typeof e.getFile}))?[2,cV(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};YV.defaultProps=KV,YV.propTypes={children:nV.func,accept:nV.oneOfType([nV.string,nV.arrayOf(nV.string)]),multiple:nV.bool,preventDropOnDocument:nV.bool,noClick:nV.bool,noKeyboard:nV.bool,noDrag:nV.bool,noDragEventsBubbling:nV.bool,minSize:nV.number,maxSize:nV.number,maxFiles:nV.number,disabled:nV.bool,getFilesFromEvent:nV.func,onFileDialogCancel:nV.func,onFileDialogOpen:nV.func,useFsAccessApi:nV.bool,onDragEnter:nV.func,onDragLeave:nV.func,onDragOver:nV.func,onDrop:nV.func,onDropAccepted:nV.func,onDropRejected:nV.func,validator:nV.func};var ZV={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function JV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=qV(qV({},KV),e),i=t.accept,n=t.disabled,o=t.getFilesFromEvent,s=t.maxSize,a=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,h=t.onDragLeave,d=t.onDragOver,p=t.onDrop,f=t.onDropAccepted,g=t.onDropRejected,m=t.onFileDialogCancel,_=t.onFileDialogOpen,v=t.useFsAccessApi,y=t.preventDropOnDocument,b=t.noClick,A=t.noKeyboard,w=t.noDrag,x=t.noDragEventsBubbling,S=t.validator,C=(0,r.useMemo)((function(){return"function"==typeof _?_:t$}),[_]),E=(0,r.useMemo)((function(){return"function"==typeof m?m:t$}),[m]),T=(0,r.useRef)(null),I=(0,r.useRef)(null),M=$V((0,r.useReducer)(e$,ZV),2),k=M[0],B=M[1],R=k.isFocused,P=k.isFileDialogActive,D=k.draggedFiles,L=(0,r.useRef)("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),O=function(){!L.current&&P&&setTimeout((function(){I.current&&(I.current.files.length||(B({type:"closeDialog"}),E()))}),300)};(0,r.useEffect)((function(){return window.addEventListener("focus",O,!1),function(){window.removeEventListener("focus",O,!1)}}),[I,P,E,L]);var F=(0,r.useRef)([]),N=function(e){T.current&&T.current.contains(e.target)||(e.preventDefault(),F.current=[])};(0,r.useEffect)((function(){return y&&(document.addEventListener("dragover",OV,!1),document.addEventListener("drop",N,!1)),function(){y&&(document.removeEventListener("dragover",OV),document.removeEventListener("drop",N))}}),[T,y]);var z=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Z(e),F.current=[].concat(function(e){return function(e){if(Array.isArray(e))return QV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GV(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(F.current),[e.target]),LV(e)&&Promise.resolve(o(e)).then((function(t){DV(e)&&!x||(B({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[o,u,x]),U=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Z(e);var t=LV(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&d&&d(e),!1}),[d,x]),H=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Z(e);var t=F.current.filter((function(e){return T.current&&T.current.contains(e)})),i=t.indexOf(e.target);-1!==i&&t.splice(i,1),F.current=t,t.length>0||(B({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),LV(e)&&h&&h(e))}),[T,h,x]),V=(0,r.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=$V(BV(e,i),2),o=t[0],l=t[1],c=$V(RV(e,a,s),2),u=c[0],h=c[1],d=S?S(e):null;if(o&&u&&!d)n.push(e);else{var p=[l,h];d&&(p=p.concat(d)),r.push({file:e,errors:p.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){r.push({file:e,errors:[kV]})})),n.splice(0)),B({acceptedFiles:n,fileRejections:r,type:"setFiles"}),p&&p(n,r,t),r.length>0&&g&&g(r,t),n.length>0&&f&&f(n,t)}),[B,l,i,a,s,c,p,f,g,S]),$=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),Z(e),F.current=[],LV(e)&&Promise.resolve(o(e)).then((function(t){DV(e)&&!x||V(t,e)})),B({type:"reset"})}),[o,V,x]),G=(0,r.useCallback)((function(){if(L.current){B({type:"openDialog"}),C();var e={multiple:l,types:NV(i)};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){V(e,null),B({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)&&(L.current=!1,I.current&&(I.current.value=null,I.current.click())):(E(e),B({type:"closeDialog"}))}))}else I.current&&(B({type:"openDialog"}),C(),I.current.value=null,I.current.click())}),[B,C,E,v,V,i,l]),Q=(0,r.useCallback)((function(e){T.current&&T.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),G()))}),[T,G]),j=(0,r.useCallback)((function(){B({type:"focus"})}),[]),q=(0,r.useCallback)((function(){B({type:"blur"})}),[]),W=(0,r.useCallback)((function(){b||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?setTimeout(G,0):G())}),[b,G]),X=function(e){return n?null:e},Y=function(e){return A?null:X(e)},K=function(e){return w?null:X(e)},Z=function(e){x&&e.stopPropagation()},J=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=void 0===t?"ref":t,r=e.role,o=e.onKeyDown,s=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,h=e.onDragLeave,d=e.onDrop,p=XV(e,HV);return qV(qV(WV({onKeyDown:Y(FV(o,Q)),onFocus:Y(FV(s,j)),onBlur:Y(FV(a,q)),onClick:X(FV(l,W)),onDragEnter:K(FV(c,z)),onDragOver:K(FV(u,U)),onDragLeave:K(FV(h,H)),onDrop:K(FV(d,$)),role:"string"==typeof r&&""!==r?r:"button"},i,T),n||A?{}:{tabIndex:0}),p)}}),[T,Q,j,q,W,z,U,H,$,A,w,n]),ee=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),te=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,o=e.onClick,s=XV(e,VV);return qV(qV({},WV({accept:i,multiple:l,type:"file",style:{display:"none"},onChange:X(FV(r,$)),onClick:X(FV(o,ee)),tabIndex:-1},n,I)),s)}}),[I,i,l,$,n]),ie=D.length,ne=ie>0&&function(e){var t=e.files,i=e.accept,n=e.minSize,r=e.maxSize,o=e.multiple,s=e.maxFiles;return!(!o&&t.length>1||o&&s>=1&&t.length>s)&&t.every((function(e){var t=CV(BV(e,i),1)[0],o=CV(RV(e,n,r),1)[0];return t&&o}))}({files:D,accept:i,minSize:a,maxSize:s,multiple:l,maxFiles:c}),re=ie>0&&!ne;return qV(qV({},k),{},{isDragAccept:ne,isDragReject:re,isFocused:R&&!n,getRootProps:J,getInputProps:te,rootRef:T,inputRef:I,open:X(G)})}function e$(e,t){switch(t.type){case"focus":return qV(qV({},e),{},{isFocused:!0});case"blur":return qV(qV({},e),{},{isFocused:!1});case"openDialog":return qV(qV({},ZV),{},{isFileDialogActive:!0});case"closeDialog":return qV(qV({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var i=t.isDragActive,n=t.draggedFiles;return qV(qV({},e),{},{draggedFiles:n,isDragActive:i});case"setFiles":return qV(qV({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return qV({},ZV);default:return e}}function t$(){}const i$="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;var n$,r$,o$,s$,a$,l$,c$,u$,h$,d$,p$,f$,g$,m$,_$,v$,y$,b$,A$,w$,x$,S$,C$,E$,T$,I$,M$,k$;function B$(){if(s$)return o$;s$=1;var e=r$?n$:(r$=1,n$=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)});function t(t){return!0===e(t)&&"[object Object]"===Object.prototype.toString.call(t)}return o$=function(e){var i,n;return!1!==t(e)&&"function"==typeof(i=e.constructor)&&!1!==t(n=i.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")},o$}function R$(){if(l$)return a$;l$=1;var e=B$();return a$=function(t){return e(t)||"function"==typeof t||Array.isArray(t)}}function P$(){if(b$)return y$;b$=1;var e=function(){if(v$)return _$;v$=1;var e=R$(),t=(m$||(m$=1,g$=function(e,t){if(null==e)throw new TypeError("expected first argument to be an object.");if(void 0===t||"undefined"==typeof Symbol)return e;if("function"!=typeof Object.getOwnPropertySymbols)return e;for(var i=Object.prototype.propertyIsEnumerable,n=Object(e),r=arguments.length,o=0;++o<r;)for(var s=Object(arguments[o]),a=Object.getOwnPropertySymbols(s),l=0;l<a.length;l++){var c=a[l];i.call(s,c)&&(n[c]=s[c])}return n}),g$);function i(e,t){for(var i in t)s(t,i)&&(e[i]=t[i])}function n(e){return e&&"string"==typeof e}function r(e){var t={};for(var i in e)t[i]=e[i];return t}function o(t){return t&&"object"==typeof t||e(t)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return _$=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");o(e)||(e={});for(var s=1;s<arguments.length;s++){var a=arguments[s];n(a)&&(a=r(a)),o(a)&&(i(e,a),t(e,a))}return e},_$}();function t(e,i,n,r){var o=e.indexOf(i,n);return"\\"===e.charAt(o-1)?t(e,i,o+1):o}function i(e,t){return!0===t.keepDoubleQuotes&&'"'===e||!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes}function n(e,t,i){return"function"==typeof e.keepEscaping?e.keepEscaping(t,i):!0===e.keepEscaping||"\\"===t[i+1]}return y$=function(r,o,s){if("string"!=typeof r)throw new TypeError("expected a string");"function"==typeof o&&(s=o,o=null),"string"==typeof o&&(o={sep:o});var a,l=e({sep:"."},o),c=l.quotes||['"',"'","`"];!0===l.brackets?a={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(a=l.brackets);var u,h=[],d=[],p=[""],f=l.sep,g=r.length,m=-1;function _(){if(a&&d.length)return a[d[d.length-1]]}for(;++m<g;){var v=r[m],y=r[m+1],b={val:v,idx:m,arr:p,str:r};if(h.push(b),"\\"!==v){if(a&&a[v]){d.push(v);var A=_(),w=m+1;if(-1!==r.indexOf(A,w+1))for(;d.length&&w<g;){var x=r[++w];if("\\"!==x)if(-1===c.indexOf(x)){if(A=_(),d.length&&-1===r.indexOf(A,w+1))break;a[x]?d.push(x):A===x&&d.pop()}else w=t(r,x,w+1);else x++}if(-1===(u=w)){p[p.length-1]+=v;continue}v=r.slice(m,u+1),b.val=v,b.idx=m=u}if(-1!==c.indexOf(v)){if(-1===(u=t(r,v,m+1))){p[p.length-1]+=v;continue}v=!0===i(v,l)?r.slice(m,u+1):r.slice(m+1,u),b.val=v,b.idx=m=u}"function"==typeof s&&(s(b,h),v=b.val,m=b.idx),b.val!==f||!1===b.split?p[p.length-1]+=b.val:p.push("")}else b.val=!0===n(l,r,m)?v+y:y,b.escaped=!0,"function"==typeof s&&s(b),p[p.length-1]+=b.val,m++}return p},y$}function D$(){if(I$)return T$;I$=1;var e=P$(),t=function(){if(S$)return x$;S$=1;var e=w$?A$:(w$=1,A$=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)});function t(e,t){for(var n in t)i(t,n)&&(e[n]=t[n])}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return x$=function(i){e(i)||(i={});for(var n=arguments.length,r=1;r<n;r++){var o=arguments[r];e(o)&&t(i,o)}return i},x$}(),i=B$(),n=E$?C$:(E$=1,C$=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)});function r(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}return T$=function(o,s,a){if(!n(o))return o;if(Array.isArray(s)&&(s=[].concat.apply([],s).join(".")),"string"!=typeof s)return o;for(var l=e(s,{sep:".",brackets:!0}).filter(r),c=l.length,u=-1,h=o;++u<c;){var d=l[u];u===c-1?i(h[d])&&i(a)?h[d]=t({},h[d],a):h[d]=a:(n(h[d])||(h[d]={}),h=h[d])}return o},T$}var L$=function(){if(k$)return M$;k$=1;var e=R$(),t=function(){if(d$)return h$;d$=1;var e=R$(),t=(u$||(u$=1,c$=function(e,t,i){for(var n in e)if(!1===t.call(i,e[n],n,e))break}),c$);function i(e,i){for(var o=arguments.length,s=0;++s<o;){var a=arguments[s];r(a)&&t(a,n,e)}return e}function n(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];r(e)&&r(n)?i(n,e):this[t]=e}}function r(t){return e(t)&&!Array.isArray(t)}return h$=i}(),i=function(){if(f$)return p$;function e(e){return e?Array.isArray(e)?e.join("."):e:""}return f$=1,p$=function(t,i,n,r,o){if(null===(s=t)||"object"!=typeof s&&"function"!=typeof s||!i)return t;var s;if(i=e(i),n&&(i+="."+e(n)),r&&(i+="."+e(r)),o&&(i+="."+e(o)),i in t)return t[i];for(var a=i.split("."),l=a.length,c=-1;t&&++c<l;){for(var u=a[c];"\\"===u[u.length-1];)u=u.slice(0,-1)+"."+a[++c];t=t[u]}return t},p$}(),n=D$();return M$=function(r,o,s){if(!e(r))throw new TypeError("expected an object");if("string"!=typeof o||null==s)return t.apply(null,arguments);if("string"==typeof s)return n(r,o,s),r;var a=i(r,o);return e(s)&&e(a)&&(s=t({},a,s)),n(r,o,s),r},M$}(),O$=XH(L$);const F$=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(".")};function N$(e,t){return(0,r.useMemo)(e,function(e){const t=(0,r.useRef)();return GR(e,t.current)||(t.current=e),t.current}(t))}function z$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=(0,r.useRef)(null),i=(0,r.useRef)(null),[n,o]=(0,r.useState)(!1),s=(0,r.useCallback)((()=>o(!0)),[]),a=(0,r.useCallback)((()=>o(!1)),[]);return(0,r.useLayoutEffect)((()=>{if(n){const{bottom:n,top:r,left:o}=t.current.getBoundingClientRect(),{height:s}=i.current.getBoundingClientRect(),a=n+s>window.innerHeight-40?"up":"down";i.current.style.position="fixed",i.current.style.zIndex="10000",i.current.style.left=o+"px","down"===a?i.current.style.top=n+e+"px":i.current.style.bottom=window.innerHeight-r+e+"px"}}),[e,n]),{popinRef:t,wrapperRef:i,shown:n,show:s,hide:a}}!function(e){e.forEach((function(e){_H.indexOf(e)<0&&(e(gH,cH),_H.push(e))}))}([function(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in i)n[i[r]]=r;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,s,a=n[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var l=this.toRgb(),c=1/0,u="black";if(!o.length)for(var h in i)o[h]=new e(i[h]).toRgb();for(var d in i){var p=(r=l,s=o[d],Math.pow(r.r-s.r,2)+Math.pow(r.g-s.g,2)+Math.pow(r.b-s.b,2));p<c&&(c=p,u=d)}return u}},t.string.push([function(t){var n=t.toLowerCase(),r="transparent"===n?"#0000":i[n];return r?new e(r).toRgb():null},"name"])}]);const U$={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};function H$(e,t){let{format:i,hasAlpha:n,isString:r}=t;const o=e[U$[i]+(r&&"hex"!==i?"String":"")]();return"object"!=typeof o||n?o:function(e){const t=RN({},e);return["a"].forEach((i=>i in e&&delete t[i])),t}(o)}tP.extend({color:()=>e=>mH(e).isValid()});const V$=(e,t)=>{const i=mH(e);if(!i.isValid())throw Error("Invalid color");return H$(i,t)};var $$=Object.freeze({__proto__:null,schema:e=>tP().color().test(e),sanitize:V$,format:(e,t)=>H$(mH(e),RN(RN({},t),{},{isString:!0,format:"hex"})),normalize:e=>{let{value:t}=e;const i=function(e){return hH(e)[1]}(t),n={format:"name"===i?"hex":i,hasAlpha:"object"==typeof t?"a"in t:"hex"===i&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),isString:"string"==typeof t};return{value:V$(t,n),settings:n}}});const G$=yz("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Q$=yz("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),j$=yz("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function q$(e,t){return"rgb"!==t?mH(e).toRgb():e}function W$(e){let{value:t,displayValue:i,settings:n,onUpdate:o}=e;const{emitOnEditStart:s,emitOnEditEnd:a}=dz(),{format:l,hasAlpha:c}=n,{popinRef:u,wrapperRef:h,shown:d,show:p,hide:f}=z$(),g=(0,r.useRef)(0),[m,_]=(0,r.useState)((()=>q$(t,l))),v=c?jH:WH,y=()=>{f(),a(),window.clearTimeout(g.current)};return(0,r.useEffect)((()=>()=>window.clearTimeout(g.current)),[]),r.createElement(r.Fragment,null,r.createElement(G$,{ref:u,active:d,onClick:()=>(_(q$(t,l)),p(),void s()),style:{color:i}}),d&&r.createElement(qz,null,r.createElement(Gz,{onPointerUp:y}),r.createElement(j$,{ref:h,onMouseEnter:()=>window.clearTimeout(g.current),onMouseLeave:e=>0===e.buttons&&void(g.current=window.setTimeout(y,500))},r.createElement(v,{color:m,onChange:o}))))}var X$=RN({component:function(){const{value:e,displayValue:t,label:i,onChange:n,onUpdate:o,settings:s}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,i),r.createElement(Q$,null,r.createElement(W$,{value:e,displayValue:t,onChange:n,onUpdate:o,settings:s}),r.createElement(Rz,{value:t,onChange:n,onUpdate:o})))}},$$),Y$=RN({component:function(){const{label:e,displayValue:t,onUpdate:i,settings:n}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(FU,{value:t,settings:n,onUpdate:i}))}},$U(["x","y","z"]));const K$=yz("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Z$=yz("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function J$(e){let{value:t,settings:i,onUpdate:n}=e;const o=(0,r.useRef)(),s=(0,r.useRef)(0),a=(0,r.useRef)(0),l=(0,r.useRef)(1),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(!1),[p,f]=oU(),g=(0,r.useRef)(null),m=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{if(c){const{top:e,left:t,width:i,height:n}=g.current.getBoundingClientRect();m.current.style.left=t+i/2+"px",m.current.style.top=e+n/2+"px"}}),[c]);const{keys:[_,v],joystick:y}=i,b="invertY"===y?1:-1,{[_]:{step:A},[v]:{step:w}}=i,x=Cz("sizes","joystickWidth"),S=Cz("sizes","joystickHeight"),C=.8*parseFloat(x)/2,E=.8*parseFloat(S)/2,T=(0,r.useCallback)((()=>{o.current||(d(!0),s.current&&f({x:s.current*C}),a.current&&f({y:a.current*-E}),o.current=window.setInterval((()=>{n((e=>{const t=A*s.current*l.current,i=b*w*a.current*l.current;return Array.isArray(e)?{[_]:e[0]+t,[v]:e[1]+i}:{[_]:e[_]+t,[v]:e[v]+i}}))}),16))}),[C,E,n,f,A,w,_,v,b]),I=(0,r.useCallback)((()=>{window.clearTimeout(o.current),o.current=void 0,d(!1)}),[]);(0,r.useEffect)((()=>{function e(e){l.current=nz(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.clearTimeout(o.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);const M=rU((e=>{let{first:i,active:r,delta:[o,c],movement:[h,d]}=e;i&&u(!0);const p=PN(h,-C,C),g=PN(d,-E,E);s.current=Math.abs(h)>Math.abs(p)?Math.sign(h-p):0,a.current=Math.abs(d)>Math.abs(g)?Math.sign(g-d):0;let m=t[_],y=t[v];r?(s.current||(m+=o*A*l.current,f({x:p})),a.current||(y-=b*c*w*l.current,f({y:g})),s.current||a.current?T():I(),n({[_]:m,[v]:y})):(u(!1),s.current=0,a.current=0,f({x:0,y:0}),I())}));return r.createElement(K$,uz({ref:g},M()),c&&r.createElement(qz,null,r.createElement(Z$,{ref:m,isOutOfBounds:h},r.createElement("div",null),r.createElement("span",{ref:p}))))}const eG=yz("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}}),tG=["joystick"],iG=$U(["x","y"]);var nG=RN(RN({component:function(){const{label:e,displayValue:t,onUpdate:i,settings:n}=dz();return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(eG,{withJoystick:!!n.joystick},n.joystick&&r.createElement(J$,{value:t,settings:n,onUpdate:i}),r.createElement(FU,{value:t,settings:n,onUpdate:i})))}},iG),{},{normalize:e=>{let{joystick:t=!0}=e,i=gN(e,tG);const{value:n,settings:r}=iG.normalize(i);return{value:n,settings:RN(RN({},r),{},{joystick:t})}}}),rG=Object.freeze({__proto__:null,sanitize:e=>{if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(e){return}if("string"==typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:(e,t)=>"object"==typeof t&&"image"in t,normalize:e=>{let{image:t}=e;return{value:t}}});const oG=yz("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),sG=yz("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),aG=yz("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),lG=yz("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),cG=yz("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),uG=yz("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var hG=RN({component:function(){const{label:e,value:t,onUpdate:i,disabled:n}=dz(),{popinRef:o,wrapperRef:s,shown:a,show:l,hide:c}=z$(),u=(0,r.useCallback)((e=>{e.length&&i(e[0])}),[i]),h=(0,r.useCallback)((e=>{e.stopPropagation(),i(void 0)}),[i]),{getRootProps:d,getInputProps:p,isDragAccept:f}=JV({maxFiles:1,accept:"image/*",onDrop:u,disabled:n});return r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(oG,null,r.createElement(aG,{ref:o,hasImage:!!t,onPointerDown:()=>!!t&&l(),onPointerUp:c,style:{backgroundImage:t?`url(${t})`:"none"}}),a&&!!t&&r.createElement(qz,null,r.createElement(Gz,{onPointerUp:c,style:{cursor:"pointer"}}),r.createElement(lG,{ref:s,style:{backgroundImage:`url(${t})`}})),r.createElement(sG,d({isDragAccept:f}),r.createElement("input",p()),r.createElement(cG,null,f?"drop image":"click or drop")),r.createElement(uG,{onClick:h,disabled:!t})))}},rG);const dG=tP().number(),pG=e=>({min:e[0],max:e[1]}),fG=(e,t,i)=>{let{bounds:[n,r]}=t;const o=Array.isArray(e)?pG(e):e,s={min:i[0],max:i[1]},{min:a,max:l}=RN(RN({},s),o);return[PN(Number(a),n,Math.max(n,l)),PN(Number(l),Math.min(r,a),r)]};var gG=Object.freeze({__proto__:null,schema:(e,t)=>tP().array().length(2).every.number().test(e)&&tP().schema({min:dG,max:dG}).test(t),format:pG,sanitize:fG,normalize:e=>{let{value:t,min:i,max:n}=e;const r={min:i,max:n},o=[i,n],s=RN(RN({},NU(pG(t),{min:r,max:r})),{},{bounds:o});return{value:fG(pG(t),s,t),settings:s}}});const mG=["value","bounds","onDrag"],_G=["bounds"],vG=yz("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function yG(e){let{value:t,bounds:[i,n],onDrag:o}=e,s=gN(e,mG);const a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useRef)(0),h=Cz("sizes","scrubberWidth"),d=rU((e=>{let{event:r,first:d,xy:[p],movement:[f],memo:g={}}=e;if(d){const{width:e,left:o}=a.current.getBoundingClientRect();u.current=e-parseFloat(h);const s=(null==r?void 0:r.target)===l.current||(null==r?void 0:r.target)===c.current;g.pos=NN((p-o)/e,i,n);const d=Math.abs(g.pos-t.min)-Math.abs(g.pos-t.max);g.key=d<0||0===d&&g.pos<=t.min?"min":"max",s&&(g.pos=t[g.key])}const m=g.pos+NN(f/u.current,0,n-i);return o({[g.key]:mU(m,s[g.key])}),g})),p=`calc(${FN(t.min,i,n)} * (100% - ${h} - 8px) + 4px)`,f=`calc(${1-FN(t.max,i,n)} * (100% - ${h} - 8px) + 4px)`;return r.createElement(hU,uz({ref:a},d()),r.createElement(cU,null,r.createElement(dU,{style:{left:p,right:f}})),r.createElement(uU,{position:"left",ref:l,style:{left:p}}),r.createElement(uU,{position:"right",ref:c,style:{right:f}}))}var bG=RN({component:function(){const{label:e,displayValue:t,onUpdate:i,settings:n}=dz(),o=gN(n,_G);return r.createElement(r.Fragment,null,r.createElement(iU,{input:!0},r.createElement(Kz,null,e),r.createElement(vG,null,r.createElement(yG,uz({value:t},n,{onDrag:i})),r.createElement(FU,{value:t,settings:o,onUpdate:i,innerLabelTrim:0}))))}},gG);const AG=["type","value"],wG=["onChange","transient","onEditStart","onEditEnd"],xG=new function(){const e=function(e){const t="function"==typeof e?function(e){let t;const i=new Set,n=(e,n)=>{const r="function"==typeof e?e(t):e;if(r!==t){const e=t;t=n?r:Object.assign({},t,r),i.forEach((i=>i(t,e)))}},r=()=>t,o={setState:n,getState:r,subscribe:(e,n,o)=>n||o?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function a(){const i=n(t);if(!o(s,i)){const t=s;e(s=i,t)}}return i.add(a),()=>i.delete(a)}(e,n,o):(i.add(e),()=>i.delete(e)),destroy:()=>i.clear()};return t=e(n,r,o),o}(e):e,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,n]=(0,r.useReducer)((e=>e+1),0),o=t.getState(),s=(0,r.useRef)(o),a=(0,r.useRef)(e),l=(0,r.useRef)(i),c=(0,r.useRef)(!1),u=(0,r.useRef)();let h;void 0===u.current&&(u.current=e(o));let d=!1;(s.current!==o||a.current!==e||l.current!==i||c.current)&&(h=e(o),d=!i(u.current,h)),i$((()=>{d&&(u.current=h),s.current=o,a.current=e,l.current=i,c.current=!1}));const p=(0,r.useRef)(o);i$((()=>{const e=()=>{try{const e=t.getState(),i=a.current(e);l.current(u.current,i)||(s.current=e,u.current=i,n())}catch(e){c.current=!0,n()}},i=t.subscribe(e);return t.getState()!==p.current&&e(),i}),[]);const f=d?h:u.current;return(0,r.useDebugValue)(f),f};return Object.assign(i,t),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[i,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},i}(((e,t,i)=>{const n=i.subscribe;return i.subscribe=(e,t,r)=>{let o=e;if(t){const n=(null==r?void 0:r.equalityFn)||Object.is;let s=e(i.getState());o=i=>{const r=e(i);if(!n(s,r)){const e=s;t(s=r,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return n(o)},{data:{}}})),t=(()=>{const e=new Map;return{on:(t,i)=>{let n=e.get(t);void 0===n&&(n=new Set,e.set(t,n)),n.add(i)},off:(t,i)=>{const n=e.get(t);void 0!==n&&(n.delete(i),0===n.size&&e.delete(t))},emit:function(t){const i=e.get(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(void 0!==i)for(const e of i)e(...r)}}})();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=e;const i={},n=new Set;this.getVisiblePaths=()=>{const e=this.getData(),t=Object.keys(e),r=[];Object.entries(i).forEach((e=>{let[i,n]=e;n.render&&t.some((e=>0===e.indexOf(i)))&&!n.render(this.get)&&r.push(i+".")}));const o=[];return n.forEach((t=>{t in e&&e[t].__refCount>0&&r.every((e=>-1===t.indexOf(e)))&&(!e[t].render||e[t].render(this.get))&&o.push(t)})),o},this.setOrderedPaths=e=>{e.forEach((e=>n.add(e)))},this.orderPaths=e=>(this.setOrderedPaths(e),e),this.disposePaths=t=>{e.setState((e=>{const i=e.data;return t.forEach((e=>{if(e in i){const t=i[e];t.__refCount--,0===t.__refCount&&t.type in qN&&delete i[e]}})),{data:i}}))},this.dispose=()=>{e.setState((()=>({data:{}})))},this.getFolderSettings=e=>i[e]||{},this.getData=()=>e.getState().data,this.addData=(t,i)=>{e.setState((e=>{const n=e.data;return Object.entries(t).forEach((e=>{let[t,r]=e,o=n[t];if(o){const{type:e,value:t}=r,n=gN(r,AG);e!==o.type?yN(mN.INPUT_TYPE_OVERRIDE,e):((0===o.__refCount||i)&&Object.assign(o,n),o.__refCount++)}else n[t]=RN(RN({},r),{},{__refCount:1})})),{data:n}}))},this.setValueAtPath=(t,i,n)=>{e.setState((e=>{const r=e.data;return JN(r[t],i,t,this,n),{data:r}}))},this.setSettingsAtPath=(t,i)=>{e.setState((e=>{const n=e.data;return n[t].settings=RN(RN({},n[t].settings),i),{data:n}}))},this.disableInputAtPath=(t,i)=>{e.setState((e=>{const n=e.data;return n[t].disabled=i,{data:n}}))},this.set=(t,i)=>{e.setState((e=>{const n=e.data;return Object.entries(t).forEach((e=>{let[t,r]=e;try{JN(n[t],r,void 0,void 0,i)}catch(r){}})),{data:n}}))},this.getInput=e=>{try{return this.getData()[e]}catch(t){yN(mN.PATH_DOESNT_EXIST,e)}},this.get=e=>{var t;return null===(t=this.getInput(e))||void 0===t?void 0:t.value},this.emitOnEditStart=e=>{t.emit(`onEditStart:${e}`,this.get(e),e,RN(RN({},this.getInput(e)),{},{get:this.get}))},this.emitOnEditEnd=e=>{t.emit(`onEditEnd:${e}`,this.get(e),e,RN(RN({},this.getInput(e)),{},{get:this.get}))},this.subscribeToEditStart=(e,i)=>{const n=`onEditStart:${e}`;return t.on(n,i),()=>t.off(n,i)},this.subscribeToEditEnd=(e,i)=>{const n=`onEditEnd:${e}`;return t.on(n,i),()=>t.off(n,i)};const o=(e,t,n)=>{const r={};return Object.entries(e).forEach((e=>{let[s,a]=e;if(""===s)return yN(mN.EMPTY_KEY);let l=F$(t,s);if(a.type===qN.FOLDER){const e=o(a.schema,l,n);Object.assign(r,e),l in i||(i[l]=a.settings)}else if(s in n)yN(mN.DUPLICATE_KEYS,s,l,n[s].path);else{const e=function(e,t,i,n){const r=ZN(e,t),{type:o,input:s,options:a}=r;if(o)return o in qN?r:{type:o,input:IN(o,s,i,n),options:a};let l=EN(s);return l?{type:l,input:IN(l,s,i,n),options:a}:(l=EN({value:s}),!!l&&{type:l,input:IN(l,{value:s},i,n),options:a})}(a,s,l,r);if(e){const{type:t,options:i,input:o}=e,{onChange:a,transient:c,onEditStart:u,onEditEnd:h}=i,d=gN(i,wG);r[l]=RN(RN(RN({type:t},d),o),{},{fromPanel:!0}),n[s]={path:l,onChange:a,transient:c,onEditStart:u,onEditEnd:h}}else yN(mN.UNKNOWN_INPUT,l,a)}})),r};this.getDataFromSchema=e=>{const t={};return[o(e,"",t),t]}},SG={collapsed:!1};function CG(e,t){return{type:qN.FOLDER,schema:e,settings:RN(RN({},SG),t)}}const EG=e=>"__levaInput"in e,TG=["type","label","path","valueKey","value","settings","setValue","disabled"];function IG(e){let{type:t,label:i,path:n,valueKey:o,value:s,settings:a,setValue:l,disabled:c}=e,u=gN(e,TG);const{displayValue:h,onChange:d,onUpdate:p}=nU({type:t,value:s,settings:a,setValue:l}),f=CN[t].component;return f?r.createElement(hz.Provider,{value:RN({key:o,path:n,id:""+n,label:i,displayValue:h,value:s,onChange:d,onUpdate:p,settings:a,setValue:l,disabled:c},u)},r.createElement($z,{disabled:c},r.createElement(f,null))):(yN(mN.NO_COMPONENT_FOR_TYPE,t,n),null)}const MG=yz("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}}),kG=yz("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),BG=yz("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),RG=yz("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),PG=(0,r.forwardRef)((function(e,t){let{initialValue:i}=e;const n=Cz("colors","highlight3"),o=Cz("colors","elevation2"),s=Cz("colors","highlight1"),[a,l]=(0,r.useMemo)((()=>[mH(s).alpha(.4).toRgbString(),mH(s).alpha(.1).toRgbString()]),[s]),c=(0,r.useRef)([i]),u=(0,r.useRef)(i),h=(0,r.useRef)(i),d=(0,r.useRef)(),p=(0,r.useCallback)(((e,t)=>{if(!e)return;const{width:i,height:r}=e,s=new Path2D,d=i/100,p=.05*r;for(let n=0;n<c.current.length;n++){const e=d*n,t=r-FN(c.current[n],u.current,h.current)*(r-2*p)-p;s.lineTo(e,t)}t.clearRect(0,0,i,r);const f=new Path2D(s);f.lineTo(d*(c.current.length+1),r),f.lineTo(0,r),f.lineTo(0,0);const g=t.createLinearGradient(0,0,0,r);g.addColorStop(0,a),g.addColorStop(1,l),t.fillStyle=g,t.fill(f),t.strokeStyle=o,t.lineJoin="round",t.lineWidth=14,t.stroke(s),t.strokeStyle=n,t.lineWidth=2,t.stroke(s)}),[n,o,a,l]),[f,g]=function(e){const t=(0,r.useRef)(null),i=(0,r.useRef)(null),n=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{const r=iz((()=>{t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,i.current)}),250);return window.addEventListener("resize",r),n.current||(r(),n.current=!0),()=>window.removeEventListener("resize",r)}),[e]),(0,r.useEffect)((()=>{i.current=t.current.getContext("2d")}),[]),[t,i]}(p);return(0,r.useImperativeHandle)(t,(()=>({frame:e=>{(void 0===u.current||e<u.current)&&(u.current=e),(void 0===h.current||e>h.current)&&(h.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(c.current,e),d.current=requestAnimationFrame((()=>p(f.current,g.current)))}})),[f,g,p]),(0,r.useEffect)((()=>()=>cancelAnimationFrame(d.current)),[]),r.createElement(RG,{ref:f})})),DG=e=>Number.isFinite(e)?e.toPrecision(2):e.toString(),LG=(0,r.forwardRef)((function(e,t){let{initialValue:i}=e;const[n,o]=(0,r.useState)(DG(i));return(0,r.useImperativeHandle)(t,(()=>({frame:e=>o(DG(e))})),[]),r.createElement("div",null,n)}));function OG(e){return"function"==typeof e?e():e.current}const FG=["type","label","key"],NG={[qN.BUTTON]:function(e){let{onClick:t,settings:i,label:n}=e;const o=mz();return r.createElement(iU,null,r.createElement(MG,{disabled:i.disabled,onClick:()=>t(o.get)},n))},[qN.BUTTON_GROUP]:function(e){const{label:t,opts:i}=(e=>{let{label:t,opts:i}=e,n="string"==typeof t&&""===t.trim()?null:t,r=i;return"object"==typeof i.opts&&(void 0!==r.label&&(n=i.label),r=i.opts),{label:n,opts:r}})(e),n=mz();return r.createElement(iU,{input:!!t},t&&r.createElement(Kz,null,t),r.createElement(kG,null,Object.entries(i).map((e=>{let[t,i]=e;return r.createElement(BG,{key:t,onClick:()=>i(n.get)},t)}))))},[qN.MONITOR]:function(e){let{label:t,objectOrFn:i,settings:n}=e;const o=(0,r.useRef)(),s=(0,r.useRef)(OG(i));return(0,r.useEffect)((()=>{const e=window.setInterval((()=>{var e;document.hidden||null===(e=o.current)||void 0===e||e.frame(OG(i))}),n.interval);return()=>window.clearInterval(e)}),[i,n.interval]),r.createElement(iU,{input:!0},r.createElement(Kz,{align:"top"},t),n.graph?r.createElement(PG,{ref:o,initialValue:s.current}):r.createElement(LG,{ref:o,initialValue:s.current}))}},zG=r.memo((e=>{let{path:t}=e;const[i,{set:n,setSettings:o,disable:s,storeId:a,emitOnEditStart:l,emitOnEditEnd:c}]=function(e){const t=mz(),[i,n]=(0,r.useState)(aU(t.getData(),e)),o=(0,r.useCallback)((i=>t.setValueAtPath(e,i,!0)),[e,t]),s=(0,r.useCallback)((i=>t.setSettingsAtPath(e,i)),[e,t]),a=(0,r.useCallback)((i=>t.disableInputAtPath(e,i)),[e,t]),l=(0,r.useCallback)((()=>t.emitOnEditStart(e)),[e,t]),c=(0,r.useCallback)((()=>t.emitOnEditEnd(e)),[e,t]);return(0,r.useEffect)((()=>{n(aU(t.getData(),e));const i=t.useStore.subscribe((t=>aU(t.data,e)),n,{equalityFn:QR});return()=>i()}),[t,e]),[i,{set:o,setSettings:s,disable:a,storeId:t.storeId,emitOnEditStart:l,emitOnEditEnd:c}]}(t);if(!i)return null;const{type:u,label:h,key:d}=i,p=gN(i,FG);if(u in qN){const e=NG[u];return r.createElement(e,uz({label:h,path:t},p))}return u in CN?r.createElement(IG,uz({key:a+t,type:u,label:h,storeId:a,path:t,valueKey:d,setValue:n,setSettings:o,disable:s,emitOnEditStart:l,emitOnEditEnd:c},p)):(bN(mN.UNSUPPORTED_INPUT,u,t),null)}));function UG(e){let{toggle:t,toggled:i,name:n}=e;return r.createElement(Oz,{onClick:()=>t()},r.createElement(eU,{toggled:i}),r.createElement("div",null,n))}const HG=e=>{let{name:t,path:i,tree:n}=e;const o=mz(),s=F$(i,t),{collapsed:a,color:l}=o.getFolderSettings(s),[c,u]=(0,r.useState)(!a),h=(0,r.useRef)(null),d=Cz("colors","folderWidgetColor"),p=Cz("colors","folderTextColor");return(0,r.useLayoutEffect)((()=>{h.current.style.setProperty("--leva-colors-folderWidgetColor",l||d),h.current.style.setProperty("--leva-colors-folderTextColor",l||p)}),[l,d,p]),r.createElement(Dz,{ref:h},r.createElement(UG,{name:t,toggled:c,toggle:()=>u((e=>!e))}),r.createElement(VG,{parent:s,tree:n,toggled:c}))},VG=r.memo((e=>{let{isRoot:t=!1,fill:i=!1,flat:n=!1,parent:o,tree:s,toggled:a}=e;const{wrapperRef:l,contentRef:c}=function(e){const t=(0,r.useRef)(null),i=(0,r.useRef)(null),n=(0,r.useRef)(!0);return(0,r.useLayoutEffect)((()=>{e||(t.current.style.height="0px",t.current.style.overflow="hidden")}),[]),(0,r.useEffect)((()=>{if(n.current)return void(n.current=!1);let r;const o=t.current,s=()=>{e&&(o.style.removeProperty("height"),o.style.removeProperty("overflow"),i.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};o.addEventListener("transitionend",s,{once:!0});const{height:a}=i.current.getBoundingClientRect();return o.style.height=a+"px",e||(o.style.overflow="hidden",r=window.setTimeout((()=>o.style.height="0px"),50)),()=>{o.removeEventListener("transitionend",s),clearTimeout(r)}}),[e]),{wrapperRef:t,contentRef:i}}(a),u=mz(),h=e=>{let[t,i]=e;var n;return(EG(i)?null===(n=u.getInput(i.path))||void 0===n?void 0:n.order:u.getFolderSettings(F$(o,t)).order)||0},d=Object.entries(s).sort(((e,t)=>h(e)-h(t)));return r.createElement(Lz,{ref:l,isRoot:t,fill:i,flat:n},r.createElement(Fz,{ref:c,isRoot:t,toggled:a},d.map((e=>{let[t,i]=e;return EG(i)?r.createElement(zG,{key:i.path,valueKey:i.valueKey,path:i.path}):r.createElement(HG,{key:t,name:t,path:o,tree:i})}))))})),$G=yz("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${zz}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),GG=yz("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),QG=yz("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),jG=yz("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${GG}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),qG=yz("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),WG=yz("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),XG=r.forwardRef(((e,t)=>{let{setFilter:i,toggle:n}=e;const[o,s]=(0,r.useState)(""),a=(0,r.useMemo)((()=>iz(i,250)),[i]);return(0,r.useEffect)((()=>{a(o)}),[o,a]),r.createElement(r.Fragment,null,r.createElement(qG,{ref:t,value:o,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:e=>e.stopPropagation(),onChange:e=>{const t=e.currentTarget.value;n(!0),s(t)}}),r.createElement(GG,{onClick:()=>(i(""),void s("")),style:{visibility:o?"visible":"hidden"}},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function YG(e){let{setFilter:t,onDrag:i,onDragStart:n,onDragEnd:o,toggle:s,toggled:a,title:l,drag:c,filterEnabled:u,from:h}=e;const[d,p]=(0,r.useState)(!1),f=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e,t;d?null===(e=f.current)||void 0===e||e.focus():null===(t=f.current)||void 0===t||t.blur()}),[d]);const g=rU((e=>{let{offset:[t,r],first:s,last:a}=e;i({x:t,y:r}),s&&n({x:t,y:r}),a&&o({x:t,y:r})}),{filterTaps:!0,from:e=>{let{offset:[t,i]}=e;return[(null==h?void 0:h.x)||t,(null==h?void 0:h.y)||i]}});return(0,r.useEffect)((()=>{const e=e=>{"L"===e.key&&e.shiftKey&&e.metaKey&&p((e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]),r.createElement(r.Fragment,null,r.createElement(QG,{mode:c?"drag":void 0},r.createElement(GG,{active:!a,onClick:()=>s()},r.createElement(eU,{toggled:a,width:12,height:8})),r.createElement(WG,uz({},c?g():{},{drag:c,filterEnabled:u}),void 0===l&&c?r.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},r.createElement("circle",{cx:"2",cy:"2",r:"2"}),r.createElement("circle",{cx:"14",cy:"2",r:"2"}),r.createElement("circle",{cx:"26",cy:"2",r:"2"}),r.createElement("circle",{cx:"2",cy:"12",r:"2"}),r.createElement("circle",{cx:"14",cy:"12",r:"2"}),r.createElement("circle",{cx:"26",cy:"12",r:"2"})):l),u&&r.createElement(GG,{active:d,onClick:()=>p((e=>!e))},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},r.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),r.createElement(jG,{toggled:d},r.createElement(XG,{ref:f,setFilter:t,toggle:s})))}const KG=["store","hidden","theme","collapsed"];function ZG(e){let{store:t,hidden:i=!1,theme:n,collapsed:o=!1}=e,s=gN(e,KG);const a=N$((()=>function(e){const t={colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}};if(!e)return{theme:t,className:""};Object.keys(e).forEach((i=>{Object.assign(t[i],e[i])}));const i=Az(t);return{theme:t,className:i.className}}(n)),[n]),[l,c]=(0,r.useState)(!o),u="object"==typeof o?!o.collapsed:l,h=(0,r.useMemo)((()=>"object"==typeof o?e=>{"function"==typeof e?o.onChange(!e(!o.collapsed)):o.onChange(!e)}:c),[o]);return!t||i?null:r.createElement(pz.Provider,{value:a},r.createElement(JG,uz({store:t},s,{toggled:u,setToggle:h,rootClass:a.className})))}const JG=r.memo((e=>{let{store:t,rootClass:i,fill:n=!1,flat:o=!1,neverHide:s=!1,oneLineLabels:a=!1,titleBar:l={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:c=!1,toggled:u,setToggle:h}=e;var d,p;const f=(e=>{const[t,i]=(0,r.useState)(e.getVisiblePaths());return(0,r.useEffect)((()=>{i(e.getVisiblePaths());const t=e.useStore.subscribe(e.getVisiblePaths,i,{equalityFn:QR});return()=>t()}),[e]),t})(t),[g,m]=(0,r.useState)(""),_=(0,r.useMemo)((()=>((e,t)=>{const i={},n=t?t.toLowerCase():null;return e.forEach((e=>{const[t,r]=function(e){const t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e);(!n||t.toLowerCase().indexOf(n)>-1)&&O$(i,r,{[t]:{__levaInput:!0,path:e}})})),i})(f,g)),[f,g]),[v,y]=oU(),b=s||f.length>0,A="object"==typeof l&&l.title||void 0,w="object"!=typeof l||null===(d=l.drag)||void 0===d||d,x="object"!=typeof l||null===(p=l.filter)||void 0===p||p,S="object"==typeof l&&l.position||void 0,C="object"==typeof l&&l.onDrag||void 0,E="object"==typeof l&&l.onDragStart||void 0,T="object"==typeof l&&l.onDragEnd||void 0;return r.useEffect((()=>{y({x:null==S?void 0:S.x,y:null==S?void 0:S.y})}),[S,y]),Sz(),r.createElement(gz.Provider,{value:{hideCopyButton:c}},r.createElement($G,{ref:v,className:i,fill:n,flat:o,oneLineLabels:a,hideTitleBar:!l,style:{display:b?"block":"none"}},l&&r.createElement(YG,{onDrag:e=>{y(e),null==C||C(e)},onDragStart:e=>null==E?void 0:E(e),onDragEnd:e=>null==T?void 0:T(e),setFilter:m,toggle:e=>h((t=>null!=e?e:!t)),toggled:u,title:A,drag:w,filterEnabled:x,from:S}),b&&r.createElement(fz.Provider,{value:t},r.createElement(VG,{isRoot:!0,fill:n,flat:o,tree:_,toggled:u}))))})),eQ=["isRoot"];let tQ=!1,iQ=null;function nQ(e){let{isRoot:t=!1}=e,i=gN(e,eQ);return(0,r.useEffect)((()=>(tQ=!0,!t&&iQ&&(iQ.remove(),iQ=null),()=>{t||(tQ=!1)})),[t]),r.createElement(ZG,uz({store:xG},i))}function rQ(e,t,i,n,o){const{folderName:s,schema:a,folderSettings:l,hookSettings:c,deps:u}=function(e,t,i,n,r){let o,s,a,l,c;return s=e,o=t,Array.isArray(i)?c=i:i&&("store"in i?(l=i,c=n):(a=i,Array.isArray(n)?c=n:(l=n,c=r))),{schema:o,folderName:s,folderSettings:a,hookSettings:l,deps:c||[]}}(e,t,i,n,o),h="function"==typeof a,d=(0,r.useRef)(!1),p=(0,r.useRef)(!0),f=N$((()=>{d.current=!0;const e="function"==typeof a?a():a;return s?{[s]:CG(e,l)}:e}),u);!function(e){(0,r.useEffect)((()=>{e&&!tQ&&(iQ||(iQ=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(iQ),function(e,t){const i=console.error;console.error=()=>{},xR.render(e,t),console.error=i}(r.createElement(nQ,{isRoot:!0}),iQ))),tQ=!0)}),[e])}(!(null!=c&&c.store));const[g]=(0,r.useState)((()=>(null==c?void 0:c.store)||xG)),[m,_]=(0,r.useMemo)((()=>g.getDataFromSchema(f)),[g,f]),[v,y,b,A,w]=(0,r.useMemo)((()=>{const e=[],t=[],i={},n={},r={};return Object.values(_).forEach((o=>{let{path:s,onChange:a,onEditStart:l,onEditEnd:c,transient:u}=o;e.push(s),a?(i[s]=a,u||t.push(s)):t.push(s),l&&(n[s]=l),c&&(r[s]=c)})),[e,t,i,n,r]}),[_]),x=(0,r.useMemo)((()=>g.orderPaths(v)),[v,g]),S=function(e,t,i){const n=e.useStore((e=>function(e,t){return Object.entries(function(e,t){return t.reduce(((t,i)=>(e&&e.hasOwnProperty(i)&&(t[i]=e[i]),t)),{})}(e,t)).reduce(((e,t)=>{let[,{value:i,disabled:n,key:r}]=t;return e[r]=n?void 0:i,e}),{})}(RN(RN({},i),e.data),t)),QR);return n}(g,y,m),C=(0,r.useCallback)((e=>{const t=Object.entries(e).reduce(((e,t)=>{let[i,n]=t;return Object.assign(e,{[_[i].path]:n})}),{});g.set(t,!1)}),[g,_]),E=(0,r.useCallback)((e=>g.get(_[e].path)),[g,_]);return(0,r.useEffect)((()=>{const e=!p.current&&d.current;return g.addData(m,e),p.current=!1,d.current=!1,()=>g.disposePaths(x)}),[g,x,m]),(0,r.useEffect)((()=>{const e=[];return Object.entries(b).forEach((t=>{let[i,n]=t;n(g.get(i),i,RN({initial:!0,get:g.get},g.getInput(i)));const r=g.useStore.subscribe((e=>{const t=e.data[i];return[t.disabled?void 0:t.value,t]}),(e=>{let[t,r]=e;return n(t,i,RN({initial:!1,get:g.get},r))}),{equalityFn:QR});e.push(r)})),()=>e.forEach((e=>e()))}),[g,b]),(0,r.useEffect)((()=>{const e=[];return Object.entries(A).forEach((t=>{let[i,n]=t;return e.push(g.subscribeToEditStart(i,n))})),Object.entries(w).forEach((t=>{let[i,n]=t;return e.push(g.subscribeToEditEnd(i,n))})),()=>e.forEach((e=>e()))}),[A,w,g]),h?[S,C,E]:S}TN(WN.SELECT,xU),TN(WN.IMAGE,hG),TN(WN.NUMBER,_U),TN(WN.COLOR,X$),TN(WN.STRING,IU),TN(WN.BOOLEAN,RU),TN(WN.INTERVAL,bG),TN(WN.VECTOR3D,Y$),TN(WN.VECTOR2D,nG);var oQ,sQ,aQ=DM({tagName:"model-viewer",elementClass:kM,react:r}),lQ=function(e){var t=rQ("Environment",{background:"#fff",Light:CG({intensity:{min:0,max:5,step:.1,value:1}})},{collapsed:!0}),i=t.intensity,n=t.background;return r.createElement(RR,{style:{backgroundColor:n}},r.createElement(aQ,{src:e.src,"camera-controls":!0,"disable-tap":!0,"camera-orbit":"0deg 90deg auto","max-camera-orbit":"Infinity 157.5deg auto","min-camera-orbit":"-Infinity 22.5deg auto","camera-target":"0m 0m 0m","shadow-intensity":"0",exposure:i,alt:"3D image","interaction-prompt":"none"}))};const cQ=window,uQ=cQ.ShadowRoot&&(void 0===cQ.ShadyCSS||cQ.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,hQ=Symbol(),dQ=new WeakMap;let pQ=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==hQ)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(uQ&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=dQ.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&dQ.set(t,e))}return e}toString(){return this.cssText}};const fQ=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=1===e.length?e[0]:i.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new pQ(r,e,hQ)},gQ=uQ?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return new pQ("string"==typeof(i=t)?i:i+"",void 0,hQ);var i})(e):e;var mQ;const _Q=window,vQ=_Q.trustedTypes,yQ=vQ?vQ.emptyScript:"",bQ=_Q.reactiveElementPolyfillSupport,AQ={toAttribute(e,t){switch(t){case Boolean:e=e?yQ:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},wQ=(e,t)=>t!==e&&(t==t||e==e),xQ={attribute:!0,type:String,converter:AQ,reflect:!1,hasChanged:wQ},SQ="finalized";let CQ=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xQ;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||xQ}static finalize(){if(this.hasOwnProperty(SQ))return!1;this[SQ]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(gQ(e))}else void 0!==e&&t.push(gQ(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return i=t,n=this.constructor.elementStyles,uQ?i.adoptedStyleSheets=n.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):n.forEach((e=>{const t=document.createElement("style"),n=cQ.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=e.cssText,i.appendChild(t)})),t;var i,n}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xQ;var n;const r=this.constructor._$Ep(e,i);if(void 0!==r&&!0===i.reflect){const o=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:AQ).toAttribute(t,i.type);this._$El=e,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(void 0!==r&&this._$El!==r){const e=n.getPropertyOptions(r),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:AQ;this._$El=r,this[r]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||wQ)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};var EQ;CQ[SQ]=!0,CQ.elementProperties=new Map,CQ.elementStyles=[],CQ.shadowRootOptions={mode:"open"},null==bQ||bQ({ReactiveElement:CQ}),(null!==(mQ=_Q.reactiveElementVersions)&&void 0!==mQ?mQ:_Q.reactiveElementVersions=[]).push("1.6.3");const TQ=window,IQ=TQ.trustedTypes,MQ=IQ?IQ.createPolicy("lit-html",{createHTML:e=>e}):void 0,kQ="$lit$",BQ=`lit$${(Math.random()+"").slice(9)}$`,RQ="?"+BQ,PQ=`<${RQ}>`,DQ=document,LQ=()=>DQ.createComment(""),OQ=e=>null===e||"object"!=typeof e&&"function"!=typeof e,FQ=Array.isArray,NQ=e=>FQ(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),zQ="[ \t\n\f\r]",UQ=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,HQ=/-->/g,VQ=/>/g,$Q=RegExp(`>|${zQ}(?:([^\\s"'>=/]+)(${zQ}*=${zQ}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),GQ=/'/g,QQ=/"/g,jQ=/^(?:script|style|textarea|title)$/i,qQ=e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return{_$litType$:e,strings:t,values:n}},WQ=qQ(1),XQ=qQ(2),YQ=Symbol.for("lit-noChange"),KQ=Symbol.for("lit-nothing"),ZQ=new WeakMap,JQ=DQ.createTreeWalker(DQ,129,null,!1);function ej(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==MQ?MQ.createHTML(t):t}const tj=(e,t)=>{const i=e.length-1,n=[];let r,o=2===t?"<svg>":"",s=UQ;for(let a=0;a<i;a++){const t=e[a];let i,l,c=-1,u=0;for(;u<t.length&&(s.lastIndex=u,l=s.exec(t),null!==l);)u=s.lastIndex,s===UQ?"!--"===l[1]?s=HQ:void 0!==l[1]?s=VQ:void 0!==l[2]?(jQ.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=$Q):void 0!==l[3]&&(s=$Q):s===$Q?">"===l[0]?(s=null!=r?r:UQ,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,i=l[1],s=void 0===l[3]?$Q:'"'===l[3]?QQ:GQ):s===QQ||s===GQ?s=$Q:s===HQ||s===VQ?s=UQ:(s=$Q,r=void 0);const h=s===$Q&&e[a+1].startsWith("/>")?" ":"";o+=s===UQ?t+PQ:c>=0?(n.push(i),t.slice(0,c)+kQ+t.slice(c)+BQ+h):t+BQ+(-2===c?(n.push(void 0),a):h)}return[ej(e,o+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};let ij=class e{constructor(t,i){let n,{strings:r,_$litType$:o}=t;this.parts=[];let s=0,a=0;const l=r.length-1,c=this.parts,[u,h]=tj(r,o);if(this.el=e.createElement(u,i),JQ.currentNode=this.el.content,2===o){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=JQ.nextNode())&&c.length<l;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(kQ)||t.startsWith(BQ)){const i=h[a++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+kQ).split(BQ),t=/([.?@])?(.*)/.exec(i);c.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?aj:"?"===t[1]?cj:"@"===t[1]?uj:sj})}else c.push({type:6,index:s})}for(const t of e)n.removeAttribute(t)}if(jQ.test(n.tagName)){const e=n.textContent.split(BQ),t=e.length-1;if(t>0){n.textContent=IQ?IQ.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],LQ()),JQ.nextNode(),c.push({type:2,index:++s});n.append(e[t],LQ())}}}else if(8===n.nodeType)if(n.data===RQ)c.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(BQ,e+1));)c.push({type:7,index:s}),e+=BQ.length-1}s++}}static createElement(e,t){const i=DQ.createElement("template");return i.innerHTML=e,i}};function nj(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3?arguments[3]:void 0;var r,o,s,a;if(t===YQ)return t;let l=void 0!==n?null===(r=i._$Co)||void 0===r?void 0:r[n]:i._$Cl;const c=OQ(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,i,n)),void 0!==n?(null!==(s=(a=i)._$Co)&&void 0!==s?s:a._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=nj(e,l._$AS(e,t.values),l,n)),t}let rj=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:DQ).importNode(i,!0);JQ.currentNode=r;let o=JQ.nextNode(),s=0,a=0,l=n[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new oj(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new hj(o,this,e)),this._$AV.push(t),l=n[++a]}s!==(null==l?void 0:l.index)&&(o=JQ.nextNode(),s++)}return JQ.currentNode=DQ,r}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}},oj=class e{constructor(e,t,i,n){var r;this.type=2,this._$AH=KQ,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e){e=nj(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),OQ(e)?e===KQ||null==e||""===e?(this._$AH!==KQ&&this._$AR(),this._$AH=KQ):e!==this._$AH&&e!==YQ&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):NQ(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==KQ&&OQ(this._$AH)?this._$AA.nextSibling.data=e:this.$(DQ.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=ij.createElement(ej(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.v(i);else{const e=new rj(r,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=ZQ.get(e.strings);return void 0===t&&ZQ.set(e.strings,t=new ij(e)),t}T(t){FQ(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let n,r=0;for(const o of t)r===i.length?i.push(n=new e(this.k(LQ()),this.k(LQ()),this,this.options)):n=i[r],n._$AI(o),r++;r<i.length&&(this._$AR(n&&n._$AB.nextSibling,r),i.length=r)}_$AR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}},sj=class{constructor(e,t,i,n,r){this.type=1,this._$AH=KQ,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=KQ}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const r=this.strings;let o=!1;if(void 0===r)e=nj(this,e,t,0),o=!OQ(e)||e!==this._$AH&&e!==YQ,o&&(this._$AH=e);else{const n=e;let s,a;for(e=r[0],s=0;s<r.length-1;s++)a=nj(this,n[i+s],t,s),a===YQ&&(a=this._$AH[s]),o||(o=!OQ(a)||a!==this._$AH[s]),a===KQ?e=KQ:e!==KQ&&(e+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}o&&!n&&this.j(e)}j(e){e===KQ?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}},aj=class extends sj{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===KQ?void 0:e}};const lj=IQ?IQ.emptyScript:"";let cj=class extends sj{constructor(){super(...arguments),this.type=4}j(e){e&&e!==KQ?this.element.setAttribute(this.name,lj):this.element.removeAttribute(this.name)}},uj=class extends sj{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e){var t;if((e=null!==(t=nj(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:KQ)===YQ)return;const i=this._$AH,n=e===KQ&&i!==KQ||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==KQ&&(i===KQ||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}},hj=class{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){nj(this,e)}};const dj={O:kQ,P:BQ,A:RQ,C:1,M:tj,L:rj,R:NQ,D:nj,I:oj,V:sj,H:cj,N:uj,U:aj,F:hj},pj=TQ.litHtmlPolyfillSupport;null==pj||pj(ij,oj),(null!==(EQ=TQ.litHtmlVersions)&&void 0!==EQ?EQ:TQ.litHtmlVersions=[]).push("2.8.0");const fj=(e,t,i)=>{var n,r;const o=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let s=o._$litPart$;if(void 0===s){const e=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;o._$litPart$=s=new oj(t.insertBefore(LQ(),e),e,void 0,null!=i?i:{})}return s._$AI(e),s};var gj,mj;let _j=class extends CQ{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fj(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return YQ}};_j.finalized=!0,_j._$litElement$=!0,null===(gj=globalThis.litElementHydrateSupport)||void 0===gj||gj.call(globalThis,{LitElement:_j});const vj=globalThis.litElementPolyfillSupport;null==vj||vj({LitElement:_j}),(null!==(mj=globalThis.litElementVersions)&&void 0!==mj?mj:globalThis.litElementVersions=[]).push("3.3.3");const yj=e=>t=>{return"function"==typeof t?(i=e,n=t,customElements.define(i,n),n):((e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(t){customElements.define(e,t)}}})(e,t);var i,n},bj=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function Aj(e){return(t,i)=>{return void 0!==i?(n=e,r=i,void t.constructor.createProperty(r,n)):bj(e,t);var n,r}}function wj(e,t){return(e=>{let{finisher:t,descriptor:i}=e;return(e,n)=>{var r;if(void 0===n){const n=null!==(r=e.originalKey)&&void 0!==r?r:e.key,o=null!=i?{kind:"method",placement:"prototype",key:n,descriptor:i(e.key)}:{...e,key:n};return null!=t&&(o.finisher=function(e){t(e,n)}),o}{const r=e.constructor;void 0!==i&&Object.defineProperty(e,n,i(n)),null==t||t(r,n)}}})({descriptor:t=>({get(){var t,i;return null!==(i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==i?i:null},enumerable:!0,configurable:!0})})}var xj;null===(xj=window.HTMLSlotElement)||void 0===xj||xj.prototype.assignedElements;const Sj="srgb",Cj="srgb-linear",Ej="display-p3",Tj="display-p3-linear",Ij="linear",Mj="srgb",kj="rec709",Bj=7680,Rj=35044;class Pj{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const Dj=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function Lj(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Dj[255&e]+Dj[e>>8&255]+Dj[e>>16&255]+Dj[e>>24&255]+"-"+Dj[255&t]+Dj[t>>8&255]+"-"+Dj[t>>16&15|64]+Dj[t>>24&255]+"-"+Dj[63&i|128]+Dj[i>>8&255]+"-"+Dj[i>>16&255]+Dj[i>>24&255]+Dj[255&n]+Dj[n>>8&255]+Dj[n>>16&255]+Dj[n>>24&255]).toLowerCase()}function Oj(e,t,i){return Math.max(t,Math.min(i,e))}function Fj(e,t,i){return(1-i)*e+i*t}function Nj(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function zj(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class Uj{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Uj.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oj(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*n+e.x,this.y=r*n+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hj{constructor(e,t,i,n,r,o,s,a,l){Hj.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,s,a,l)}set(e,t,i,n,r,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=a,c[6]=i,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],p=i[8],f=n[0],g=n[3],m=n[6],_=n[1],v=n[4],y=n[7],b=n[2],A=n[5],w=n[8];return r[0]=o*f+s*_+a*b,r[3]=o*g+s*v+a*A,r[6]=o*m+s*y+a*w,r[1]=l*f+c*_+u*b,r[4]=l*g+c*v+u*A,r[7]=l*m+c*y+u*w,r[2]=h*f+d*_+p*b,r[5]=h*g+d*v+p*A,r[8]=h*m+d*y+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-i*r*c+i*s*a+n*r*l-n*o*a}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,h=s*a-c*r,d=l*r-o*a,p=t*u+i*h+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(n*l-c*i)*f,e[2]=(s*i-n*o)*f,e[3]=h*f,e[4]=(c*t-n*a)*f,e[5]=(n*r-s*t)*f,e[6]=d*f,e[7]=(i*a-l*t)*f,e[8]=(o*t-i*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,o,s){const a=Math.cos(r),l=Math.sin(r);return this.set(i*a,i*l,-i*(a*o+l*s)+o+e,-n*l,n*a,-n*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Vj.makeScale(e,t)),this}rotate(e){return this.premultiply(Vj.makeRotation(-e)),this}translate(e,t){return this.premultiply(Vj.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Vj=new Hj;function $j(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const Gj=(new Hj).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Qj=(new Hj).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jj={[Cj]:{transfer:Ij,primaries:kj,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e,fromReference:e=>e},[Sj]:{transfer:Mj,primaries:kj,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Tj]:{transfer:Ij,primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.applyMatrix3(Qj),fromReference:e=>e.applyMatrix3(Gj)},[Ej]:{transfer:Mj,primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.convertSRGBToLinear().applyMatrix3(Qj),fromReference:e=>e.applyMatrix3(Gj).convertLinearToSRGB()}},qj=new Set([Cj,Tj]),Wj={enabled:!0,_workingColorSpace:Cj,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!qj.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;const n=jj[t].toReference;return(0,jj[i].fromReference)(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return jj[e].primaries},getTransfer:function(e){return""===e?Ij:jj[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._workingColorSpace;return e.fromArray(jj[t].luminanceCoefficients)}};function Xj(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Yj(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Kj;class Zj{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Kj&&(Kj=$j("canvas")),Kj.width=e.width,Kj.height=e.height;const i=Kj.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Kj}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=$j("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*Xj(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Xj(t[e]/255)):t[e]=Xj(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Jj=0;class eq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Jj++}),this.uuid=Lj(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(tq(n[t].image)):e.push(tq(n[t]))}else e=tq(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function tq(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Zj.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iq=0;class nq extends Pj{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nq.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nq.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:nq.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iq++}),this.uuid=Lj(),this.name="",this.source=new eq(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Uj(0,0),this.repeat=new Uj(1,1),this.center=new Uj(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hj,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}nq.DEFAULT_IMAGE=null,nq.DEFAULT_MAPPING=300,nq.DEFAULT_ANISOTROPY=1;class rq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;rq.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*n+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],g=a[6],m=a[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-g)<o){if(Math.abs(c+h)<s&&Math.abs(u+f)<s&&Math.abs(p+g)<s&&Math.abs(l+d+m-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,_=(m+1)/2,v=(c+h)/4,y=(u+f)/4,b=(p+g)/4;return e>a&&e>_?e<o?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=v/i,r=y/i):a>_?a<o?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(a),i=v/n,r=b/n):_<o?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(_),i=y/r,n=b/r),this.set(i,n,r,t),this}let _=Math.sqrt((g-p)*(g-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(u-f)/_,this.z=(h-c)/_,this.w=Math.acos((l+d+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class oq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,o,s){let a=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-s;const t=a*h+l*d+c*p+u*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*i);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*i;if(a=a*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,o){const s=i[n],a=i[n+1],l=i[n+2],c=i[n+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=s*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-a*u,e[t+3]=c*p-s*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e._x,n=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(i/2),c=s(n/2),u=s(r/2),h=a(i/2),d=a(n/2),p=a(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=i+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(r-l)*e,this._z=(o-n)*e}else if(i>s&&i>u){const e=2*Math.sqrt(1+i-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-i-u);this._w=(r-l)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-i-s);this._w=(o-n)/e,this._x=(r+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oj(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=i*c+o*s+n*l-r*a,this._y=n*c+o*a+r*s-i*l,this._z=r*c+o*l+i*a-n*s,this._w=o*c-i*s-n*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,o=this._w;let s=o*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=i*u+this._x*h,this._y=n*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class sq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;sq.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lq.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lq.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*n-s*i),c=2*(s*t-r*n),u=2*(r*i-o*t);return this.x=t+a*l+o*u-s*c,this.y=i+a*c+s*l-r*u,this.z=n+a*u+r*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return aq.copy(this).projectOnVector(e),this.sub(aq)}reflect(e){return this.sub(aq.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oj(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aq=new sq,lq=new oq;class cq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sq(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sq(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(hq.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(hq.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=hq.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const n=i.getAttribute("position");if(!0===t&&void 0!==n&&!0!==e.isInstancedMesh)for(let t=0,i=n.count;t<i;t++)!0===e.isMesh?e.getVertexPosition(t,hq):hq.fromBufferAttribute(n,t),hq.applyMatrix4(e.matrixWorld),this.expandByPoint(hq);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),dq.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),dq.copy(i.boundingBox)),dq.applyMatrix4(e.matrixWorld),this.union(dq)}const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,hq),hq.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yq),bq.subVectors(this.max,yq),pq.subVectors(e.a,yq),fq.subVectors(e.b,yq),gq.subVectors(e.c,yq),mq.subVectors(fq,pq),_q.subVectors(gq,fq),vq.subVectors(pq,gq);let t=[0,-mq.z,mq.y,0,-_q.z,_q.y,0,-vq.z,vq.y,mq.z,0,-mq.x,_q.z,0,-_q.x,vq.z,0,-vq.x,-mq.y,mq.x,0,-_q.y,_q.x,0,-vq.y,vq.x,0];return!!xq(t,pq,fq,gq,bq)&&(t=[1,0,0,0,1,0,0,0,1],!!xq(t,pq,fq,gq,bq)&&(Aq.crossVectors(mq,_q),t=[Aq.x,Aq.y,Aq.z],xq(t,pq,fq,gq,bq)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hq).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(hq).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(uq[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),uq[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),uq[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),uq[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),uq[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),uq[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),uq[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),uq[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(uq)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const uq=[new sq,new sq,new sq,new sq,new sq,new sq,new sq,new sq],hq=new sq,dq=new cq,pq=new sq,fq=new sq,gq=new sq,mq=new sq,_q=new sq,vq=new sq,yq=new sq,bq=new sq,Aq=new sq,wq=new sq;function xq(e,t,i,n,r){for(let o=0,s=e.length-3;o<=s;o+=3){wq.fromArray(e,o);const s=r.x*Math.abs(wq.x)+r.y*Math.abs(wq.y)+r.z*Math.abs(wq.z),a=t.dot(wq),l=i.dot(wq),c=n.dot(wq);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const Sq=new cq,Cq=new sq,Eq=new sq;class Tq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sq,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Sq.setFromPoints(e).getCenter(i);let n=0;for(let r=0,o=e.length;r<o;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cq.subVectors(e,this.center);const t=Cq.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(Cq,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Eq.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cq.copy(e.center).add(Eq)),this.expandByPoint(Cq.copy(e.center).sub(Eq))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Iq=new sq,Mq=new sq,kq=new sq,Bq=new sq,Rq=new sq,Pq=new sq,Dq=new sq;class Lq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sq,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sq(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Iq)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Iq.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Iq.copy(this.origin).addScaledVector(this.direction,t),Iq.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){Mq.copy(e).add(t).multiplyScalar(.5),kq.copy(t).sub(e).normalize(),Bq.copy(this.origin).sub(Mq);const r=.5*e.distanceTo(t),o=-this.direction.dot(kq),s=Bq.dot(this.direction),a=-Bq.dot(kq),l=Bq.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*a-s,h=o*s-a,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-o*r+s)),h=u>0?-r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-a),r),d=h*(h+2*a)+l):(u=Math.max(0,-(o*r+s)),h=u>0?r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,u),n&&n.copy(Mq).addScaledVector(kq,h),d}intersectSphere(e,t){Iq.subVectors(e.center,this.origin);const i=Iq.dot(this.direction),n=Iq.dot(Iq)-i*i,r=e.radius*e.radius;if(n>r)return null;const o=Math.sqrt(r-n),s=i-o,a=i+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||r>n?null:((r>i||isNaN(i))&&(i=r),(o<n||isNaN(n))&&(n=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),i>a||s>n?null:((s>i||i!=i)&&(i=s),(a<n||n!=n)&&(n=a),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,Iq)}intersectTriangle(e,t,i,n,r){Rq.subVectors(t,e),Pq.subVectors(i,e),Dq.crossVectors(Rq,Pq);let o,s=this.direction.dot(Dq);if(s>0){if(n)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Bq.subVectors(this.origin,e);const a=o*this.direction.dot(Pq.crossVectors(Bq,Pq));if(a<0)return null;const l=o*this.direction.dot(Rq.cross(Bq));if(l<0)return null;if(a+l>s)return null;const c=-o*Bq.dot(Dq);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Oq{constructor(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g){Oq.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g)}set(e,t,i,n,r,o,s,a,l,c,u,h,d,p,f,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=n,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=l,m[6]=c,m[10]=u,m[14]=h,m[3]=d,m[7]=p,m[11]=f,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Oq).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Fq.setFromMatrixColumn(e,0).length(),r=1/Fq.setFromMatrixColumn(e,1).length(),o=1/Fq.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,i=o*u,n=s*c,r=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=n+i*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,i=a*u,n=l*c,r=l*u;t[0]=e+r*s,t[4]=n*s-i,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=i*s-n,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,i=a*u,n=l*c,r=l*u;t[0]=e-r*s,t[4]=-o*u,t[8]=n+i*s,t[1]=i+n*s,t[5]=o*c,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,i=o*u,n=s*c,r=s*u;t[0]=a*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=a*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,i=o*l,n=s*a,r=s*l;t[0]=a*c,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){const e=o*a,i=o*l,n=s*a,r=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=i*u-n,t[2]=n*u-i,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zq,e,Uq)}lookAt(e,t,i){const n=this.elements;return $q.subVectors(e,t),0===$q.lengthSq()&&($q.z=1),$q.normalize(),Hq.crossVectors(i,$q),0===Hq.lengthSq()&&(1===Math.abs(i.z)?$q.x+=1e-4:$q.z+=1e-4,$q.normalize(),Hq.crossVectors(i,$q)),Hq.normalize(),Vq.crossVectors($q,Hq),n[0]=Hq.x,n[4]=Vq.x,n[8]=$q.x,n[1]=Hq.y,n[5]=Vq.y,n[9]=$q.y,n[2]=Hq.z,n[6]=Vq.z,n[10]=$q.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],s=i[4],a=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],p=i[2],f=i[6],g=i[10],m=i[14],_=i[3],v=i[7],y=i[11],b=i[15],A=n[0],w=n[4],x=n[8],S=n[12],C=n[1],E=n[5],T=n[9],I=n[13],M=n[2],k=n[6],B=n[10],R=n[14],P=n[3],D=n[7],L=n[11],O=n[15];return r[0]=o*A+s*C+a*M+l*P,r[4]=o*w+s*E+a*k+l*D,r[8]=o*x+s*T+a*B+l*L,r[12]=o*S+s*I+a*R+l*O,r[1]=c*A+u*C+h*M+d*P,r[5]=c*w+u*E+h*k+d*D,r[9]=c*x+u*T+h*B+d*L,r[13]=c*S+u*I+h*R+d*O,r[2]=p*A+f*C+g*M+m*P,r[6]=p*w+f*E+g*k+m*D,r[10]=p*x+f*T+g*B+m*L,r[14]=p*S+f*I+g*R+m*O,r[3]=_*A+v*C+y*M+b*P,r[7]=_*w+v*E+y*k+b*D,r[11]=_*x+v*T+y*B+b*L,r[15]=_*S+v*I+y*R+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*a*u-n*l*u-r*s*h+i*l*h+n*s*d-i*a*d)+e[7]*(+t*a*d-t*l*h+r*o*h-n*o*d+n*l*c-r*a*c)+e[11]*(+t*l*u-t*s*d-r*o*u+i*o*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*a*u+t*s*h+n*o*u-i*o*h+i*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],g=e[14],m=e[15],_=u*g*l-f*h*l+f*a*d-s*g*d-u*a*m+s*h*m,v=p*h*l-c*g*l-p*a*d+o*g*d+c*a*m-o*h*m,y=c*f*l-p*u*l+p*s*d-o*f*d-c*s*m+o*u*m,b=p*u*a-c*f*a-p*s*h+o*f*h+c*s*g-o*u*g,A=t*_+i*v+n*y+r*b;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/A;return e[0]=_*w,e[1]=(f*h*r-u*g*r-f*n*d+i*g*d+u*n*m-i*h*m)*w,e[2]=(s*g*r-f*a*r+f*n*l-i*g*l-s*n*m+i*a*m)*w,e[3]=(u*a*r-s*h*r-u*n*l+i*h*l+s*n*d-i*a*d)*w,e[4]=v*w,e[5]=(c*g*r-p*h*r+p*n*d-t*g*d-c*n*m+t*h*m)*w,e[6]=(p*a*r-o*g*r-p*n*l+t*g*l+o*n*m-t*a*m)*w,e[7]=(o*h*r-c*a*r+c*n*l-t*h*l-o*n*d+t*a*d)*w,e[8]=y*w,e[9]=(p*u*r-c*f*r-p*i*d+t*f*d+c*i*m-t*u*m)*w,e[10]=(o*f*r-p*s*r+p*i*l-t*f*l-o*i*m+t*s*m)*w,e[11]=(c*s*r-o*u*r-c*i*l+t*u*l+o*i*d-t*s*d)*w,e[12]=b*w,e[13]=(c*f*n-p*u*n+p*i*h-t*f*h-c*i*g+t*u*g)*w,e[14]=(p*s*n-o*f*n-p*i*a+t*f*a+o*i*g-t*s*g)*w,e[15]=(o*u*n-c*s*n+c*i*a-t*u*a-o*i*h+t*s*h)*w,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+i,l*s-n*a,l*a+n*s,0,l*s+n*a,c*s+i,c*a-n*o,0,l*a-n*s,c*a+n*o,r*a*a+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,o){return this.set(1,i,r,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,u=s+s,h=r*l,d=r*c,p=r*u,f=o*c,g=o*u,m=s*u,_=a*l,v=a*c,y=a*u,b=i.x,A=i.y,w=i.z;return n[0]=(1-(f+m))*b,n[1]=(d+y)*b,n[2]=(p-v)*b,n[3]=0,n[4]=(d-y)*A,n[5]=(1-(h+m))*A,n[6]=(g+_)*A,n[7]=0,n[8]=(p+v)*w,n[9]=(g-_)*w,n[10]=(1-(h+f))*w,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=Fq.set(n[0],n[1],n[2]).length();const o=Fq.set(n[4],n[5],n[6]).length(),s=Fq.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Nq.copy(this);const a=1/r,l=1/o,c=1/s;return Nq.elements[0]*=a,Nq.elements[1]*=a,Nq.elements[2]*=a,Nq.elements[4]*=l,Nq.elements[5]*=l,Nq.elements[6]*=l,Nq.elements[8]*=c,Nq.elements[9]*=c,Nq.elements[10]*=c,t.setFromRotationMatrix(Nq),i.x=r,i.y=o,i.z=s,this}makePerspective(e,t,i,n,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3;const a=this.elements,l=2*r/(t-e),c=2*r/(i-n),u=(t+e)/(t-e),h=(i+n)/(i-n);let d,p;if(2e3===s)d=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(2001!==s)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-r),p=-o*r/(o-r)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,n,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3;const a=this.elements,l=1/(t-e),c=1/(i-n),u=1/(o-r),h=(t+e)*l,d=(i+n)*c;let p,f;if(2e3===s)p=(o+r)*u,f=-2*u;else{if(2001!==s)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=f,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fq=new sq,Nq=new Oq,zq=new sq(0,0,0),Uq=new sq(1,1,1),Hq=new sq,Vq=new sq,$q=new sq,Gq=new Oq,Qq=new oq;class jq{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jq.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e.elements,r=n[0],o=n[4],s=n[8],a=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(Oj(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Oj(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Oj(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Oj(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Oj(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Oj(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Gq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Gq,t,i)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Qq.setFromEuler(this),this.setFromQuaternion(Qq,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}jq.DEFAULT_ORDER="XYZ";class qq{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let Wq=0;const Xq=new sq,Yq=new oq,Kq=new Oq,Zq=new sq,Jq=new sq,eW=new sq,tW=new oq,iW=new sq(1,0,0),nW=new sq(0,1,0),rW=new sq(0,0,1),oW={type:"added"},sW={type:"removed"},aW={type:"childadded",child:null},lW={type:"childremoved",child:null};class cW extends Pj{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Wq++}),this.uuid=Lj(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cW.DEFAULT_UP.clone();const e=new sq,t=new jq,i=new oq,n=new sq(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Oq},normalMatrix:{value:new Hj}}),this.matrix=new Oq,this.matrixWorld=new Oq,this.matrixAutoUpdate=cW.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=cW.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qq,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Yq.setFromAxisAngle(e,t),this.quaternion.multiply(Yq),this}rotateOnWorldAxis(e,t){return Yq.setFromAxisAngle(e,t),this.quaternion.premultiply(Yq),this}rotateX(e){return this.rotateOnAxis(iW,e)}rotateY(e){return this.rotateOnAxis(nW,e)}rotateZ(e){return this.rotateOnAxis(rW,e)}translateOnAxis(e,t){return Xq.copy(e).applyQuaternion(this.quaternion),this.position.add(Xq.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(iW,e)}translateY(e){return this.translateOnAxis(nW,e)}translateZ(e){return this.translateOnAxis(rW,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Kq.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zq.copy(e):Zq.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Jq.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Kq.lookAt(Jq,Zq,this.up):Kq.lookAt(Zq,Jq,this.up),this.quaternion.setFromRotationMatrix(Kq),n&&(Kq.extractRotation(n.matrixWorld),Yq.setFromRotationMatrix(Kq),this.quaternion.premultiply(Yq.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(oW),aW.child=e,this.dispatchEvent(aW),aW.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(sW),lW.child=e,this.dispatchEvent(lW),lW.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Kq.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Kq.multiply(e.parent.matrixWorld)),e.applyMatrix4(Kq),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(oW),aW.child=e,this.dispatchEvent(aW),aW.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&i.push(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jq,e,eW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jq,tW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),n.maxInstanceCount=this._maxInstanceCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(n.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),null!==this.boundingBox&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=o(e.geometries),n=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),a.length>0&&(i.shapes=a),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),u.length>0&&(i.nodes=u)}return i.object=n,i;function o(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++){const t=e.children[i];this.add(t.clone())}return this}}cW.DEFAULT_UP=new sq(0,1,0),cW.DEFAULT_MATRIX_AUTO_UPDATE=!0,cW.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uW=new sq,hW=new sq,dW=new sq,pW=new sq,fW=new sq,gW=new sq,mW=new sq,_W=new sq,vW=new sq,yW=new sq,bW=new rq,AW=new rq,wW=new rq;class xW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sq,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sq,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sq;this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),uW.subVectors(e,t),n.cross(uW);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){uW.subVectors(n,t),hW.subVectors(i,t),dW.subVectors(e,t);const o=uW.dot(uW),s=uW.dot(hW),a=uW.dot(dW),l=hW.dot(hW),c=hW.dot(dW),u=o*l-s*s;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return null!==this.getBarycoord(e,t,i,n,pW)&&pW.x>=0&&pW.y>=0&&pW.x+pW.y<=1}static getInterpolation(e,t,i,n,r,o,s,a){return null===this.getBarycoord(e,t,i,n,pW)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,pW.x),a.addScaledVector(o,pW.y),a.addScaledVector(s,pW.z),a)}static getInterpolatedAttribute(e,t,i,n,r,o){return bW.setScalar(0),AW.setScalar(0),wW.setScalar(0),bW.fromBufferAttribute(e,t),AW.fromBufferAttribute(e,i),wW.fromBufferAttribute(e,n),o.setScalar(0),o.addScaledVector(bW,r.x),o.addScaledVector(AW,r.y),o.addScaledVector(wW,r.z),o}static isFrontFacing(e,t,i,n){return uW.subVectors(i,t),hW.subVectors(e,t),uW.cross(hW).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uW.subVectors(this.c,this.b),hW.subVectors(this.a,this.b),.5*uW.cross(hW).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xW.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xW.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,r){return xW.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return xW.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xW.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let o,s;fW.subVectors(n,i),gW.subVectors(r,i),_W.subVectors(e,i);const a=fW.dot(_W),l=gW.dot(_W);if(a<=0&&l<=0)return t.copy(i);vW.subVectors(e,n);const c=fW.dot(vW),u=gW.dot(vW);if(c>=0&&u<=c)return t.copy(n);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(i).addScaledVector(fW,o);yW.subVectors(e,r);const d=fW.dot(yW),p=gW.dot(yW);if(p>=0&&d<=p)return t.copy(r);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(i).addScaledVector(gW,s);const g=c*p-d*u;if(g<=0&&u-c>=0&&d-p>=0)return mW.subVectors(r,n),s=(u-c)/(u-c+(d-p)),t.copy(n).addScaledVector(mW,s);const m=1/(g+f+h);return o=f*m,s=h*m,t.copy(i).addScaledVector(fW,o).addScaledVector(gW,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const SW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},CW={h:0,s:0,l:0},EW={h:0,s:0,l:0};function TW(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class IW{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sj;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Wj.toWorkingColorSpace(this,t),this}setRGB(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wj.workingColorSpace;return this.r=e,this.g=t,this.b=i,Wj.toWorkingColorSpace(this,n),this}setHSL(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wj.workingColorSpace;if(e=(e%1+1)%1,t=Oj(t,0,1),i=Oj(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=TW(r,n,e+1/3),this.g=TW(r,n,e),this.b=TW(r,n,e-1/3)}return Wj.toWorkingColorSpace(this,n),this}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sj;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,i);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,i);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=t[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,i);if(6===r)return this.setHex(parseInt(n,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sj;const i=SW[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xj(e.r),this.g=Xj(e.g),this.b=Xj(e.b),this}copyLinearToSRGB(e){return this.r=Yj(e.r),this.g=Yj(e.g),this.b=Yj(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sj;return Wj.fromWorkingColorSpace(MW.copy(this),e),65536*Math.round(Oj(255*MW.r,0,255))+256*Math.round(Oj(255*MW.g,0,255))+Math.round(Oj(255*MW.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sj;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wj.workingColorSpace;Wj.fromWorkingColorSpace(MW.copy(this),t);const i=MW.r,n=MW.g,r=MW.b,o=Math.max(i,n,r),s=Math.min(i,n,r);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case i:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-i)/e+2;break;case r:a=(i-n)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wj.workingColorSpace;return Wj.fromWorkingColorSpace(MW.copy(this),t),e.r=MW.r,e.g=MW.g,e.b=MW.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sj;Wj.fromWorkingColorSpace(MW.copy(this),e);const t=MW.r,i=MW.g,n=MW.b;return e!==Sj?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(CW),this.setHSL(CW.h+e,CW.s+t,CW.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(CW),e.getHSL(EW);const i=Fj(CW.h,EW.h,t),n=Fj(CW.s,EW.s,t),r=Fj(CW.l,EW.l,t);return this.setHSL(i,n,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const MW=new IW;IW.NAMES=SW;let kW=0;class BW extends Pj{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kW++}),this.uuid=Lj(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new IW(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bj,this.stencilZFail=Bj,this.stencilZPass=Bj,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bj&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Bj&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Bj&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class RW extends BW{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new IW(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new jq,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const PW=new sq,DW=new Uj;class LW{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=Rj,this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)DW.fromBufferAttribute(this,t),DW.applyMatrix3(e),this.setXY(t,DW.x,DW.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)PW.fromBufferAttribute(this,t),PW.applyMatrix3(e),this.setXYZ(t,PW.x,PW.y,PW.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)PW.fromBufferAttribute(this,t),PW.applyMatrix4(e),this.setXYZ(t,PW.x,PW.y,PW.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)PW.fromBufferAttribute(this,t),PW.applyNormalMatrix(e),this.setXYZ(t,PW.x,PW.y,PW.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)PW.fromBufferAttribute(this,t),PW.transformDirection(e),this.setXYZ(t,PW.x,PW.y,PW.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Nj(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=zj(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Nj(t,this.array)),t}setX(e,t){return this.normalized&&(t=zj(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Nj(t,this.array)),t}setY(e,t){return this.normalized&&(t=zj(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Nj(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zj(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Nj(t,this.array)),t}setW(e,t){return this.normalized&&(t=zj(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array),n=zj(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array),n=zj(n,this.array),r=zj(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Rj&&(e.usage=this.usage),e}}class OW extends LW{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class FW extends LW{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class NW extends LW{constructor(e,t,i){super(new Float32Array(e),t,i)}}let zW=0;const UW=new Oq,HW=new cW,VW=new sq,$W=new cq,GW=new cq,QW=new sq;class jW extends Pj{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zW++}),this.uuid=Lj(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(function(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}(e)?FW:OW)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Hj).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return UW.makeRotationFromQuaternion(e),this.applyMatrix4(UW),this}rotateX(e){return UW.makeRotationX(e),this.applyMatrix4(UW),this}rotateY(e){return UW.makeRotationY(e),this.applyMatrix4(UW),this}rotateZ(e){return UW.makeRotationZ(e),this.applyMatrix4(UW),this}translate(e,t,i){return UW.makeTranslation(e,t,i),this.applyMatrix4(UW),this}scale(e,t,i){return UW.makeScale(e,t,i),this.applyMatrix4(UW),this}lookAt(e){return HW.lookAt(e),HW.updateMatrix(),this.applyMatrix4(HW.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(VW).negate(),this.translate(VW.x,VW.y,VW.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new NW(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new cq);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new sq(-1/0,-1/0,-1/0),new sq(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const e=t[i];$W.setFromBufferAttribute(e),this.morphTargetsRelative?(QW.addVectors(this.boundingBox.min,$W.min),this.boundingBox.expandByPoint(QW),QW.addVectors(this.boundingBox.max,$W.max),this.boundingBox.expandByPoint(QW)):(this.boundingBox.expandByPoint($W.min),this.boundingBox.expandByPoint($W.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Tq);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new sq,1/0);if(e){const i=this.boundingSphere.center;if($W.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const i=t[e];GW.setFromBufferAttribute(i),this.morphTargetsRelative?(QW.addVectors($W.min,GW.min),$W.expandByPoint(QW),QW.addVectors($W.max,GW.max),$W.expandByPoint(QW)):($W.expandByPoint(GW.min),$W.expandByPoint(GW.max))}$W.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)QW.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(QW));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)QW.fromBufferAttribute(o,t),s&&(VW.fromBufferAttribute(e,t),QW.add(VW)),n=Math.max(n,i.distanceToSquared(QW))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,n=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new LW(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let x=0;x<i.count;x++)s[x]=new sq,a[x]=new sq;const l=new sq,c=new sq,u=new sq,h=new Uj,d=new Uj,p=new Uj,f=new sq,g=new sq;function m(e,t,n){l.fromBufferAttribute(i,e),c.fromBufferAttribute(i,t),u.fromBufferAttribute(i,n),h.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,n),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),g.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(o),s[e].add(f),s[t].add(f),s[n].add(f),a[e].add(g),a[t].add(g),a[n].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:e.count}]);for(let x=0,S=_.length;x<S;++x){const t=_[x],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)m(e.getX(n+0),e.getX(n+1),e.getX(n+2))}const v=new sq,y=new sq,b=new sq,A=new sq;function w(e){b.fromBufferAttribute(n,e),A.copy(b);const t=s[e];v.copy(t),v.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(A,t);const i=y.dot(a[e])<0?-1:1;o.setXYZW(e,v.x,v.y,v.z,i)}for(let x=0,S=_.length;x<S;++x){const t=_[x],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)w(e.getX(n+0)),w(e.getX(n+1)),w(e.getX(n+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new LW(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new sq,r=new sq,o=new sq,s=new sq,a=new sq,l=new sq,c=new sq,u=new sq;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),s.fromBufferAttribute(i,d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),s.add(c),a.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)QW.fromBufferAttribute(e,t),QW.normalize(),e.setXYZ(t,QW.x,QW.y,QW.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,o=new i.constructor(t.length*n);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n;for(let e=0;e<n;e++)o[a++]=i[s++]}return new LW(o,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jW,i=this.index.array,n=this.attributes;for(const s in n){const r=e(n[s],i);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const n=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],i);n.push(r)}t.morphAttributes[s]=n}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const a in i){const t=i[a];e.data.attributes[a]=t.toJSON(e.data)}const n={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];i.push(r.toJSON(e.data))}i.length>0&&(n[a]=i,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const l in n){const e=n[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],i=r[l];for(let n=0,r=i.length;n<r;n++)e.push(i[n].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qW=new Oq,WW=new Lq,XW=new Tq,YW=new sq,KW=new sq,ZW=new sq,JW=new sq,eX=new sq,tX=new sq,iX=new sq,nX=new sq;class rX extends cW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jW,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new RW;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const s=this.morphTargetInfluences;if(r&&s){tX.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=s[i],a=r[i];0!==n&&(eX.fromBufferAttribute(a,e),o?tX.addScaledVector(eX,n):tX.addScaledVector(eX.sub(t),n))}t.add(tX)}return t}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),XW.copy(i.boundingSphere),XW.applyMatrix4(r),WW.copy(e.ray).recast(e.near),!1===XW.containsPoint(WW.origin)){if(null===WW.intersectSphere(XW,YW))return;if(WW.origin.distanceToSquared(YW)>(e.far-e.near)**2)return}qW.copy(r).invert(),WW.copy(e.ray).applyMatrix4(qW),null!==i.boundingBox&&!1===WW.intersectsBox(i.boundingBox)||this._computeIntersections(e,t,WW)}}_computeIntersections(e,t,i){let n;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],a=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3)n=oX(this,a,e,i,l,c,u,s.getX(o),s.getX(o+1),s.getX(o+2)),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}else for(let p=Math.max(0,d.start),f=Math.min(s.count,d.start+d.count);p<f;p+=3)n=oX(this,o,e,i,l,c,u,s.getX(p),s.getX(p+1),s.getX(p+2)),n&&(n.faceIndex=Math.floor(p/3),t.push(n));else if(void 0!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],s=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3)n=oX(this,s,e,i,l,c,u,o,o+1,o+2),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}else for(let p=Math.max(0,d.start),f=Math.min(a.count,d.start+d.count);p<f;p+=3)n=oX(this,o,e,i,l,c,u,p,p+1,p+2),n&&(n.faceIndex=Math.floor(p/3),t.push(n))}}function oX(e,t,i,n,r,o,s,a,l,c){e.getVertexPosition(a,KW),e.getVertexPosition(l,ZW),e.getVertexPosition(c,JW);const u=function(e,t,i,n,r,o,s,a){let l;if(l=1===t.side?n.intersectTriangle(s,o,r,!0,a):n.intersectTriangle(r,o,s,0===t.side,a),null===l)return null;nX.copy(a),nX.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(nX);return c<i.near||c>i.far?null:{distance:c,point:nX.clone(),object:e}}(e,t,i,n,KW,ZW,JW,iX);if(u){const e=new sq;xW.getBarycoord(iX,KW,ZW,JW,e),r&&(u.uv=xW.getInterpolatedAttribute(r,a,l,c,e,new Uj)),o&&(u.uv1=xW.getInterpolatedAttribute(o,a,l,c,e,new Uj)),s&&(u.normal=xW.getInterpolatedAttribute(s,a,l,c,e,new sq),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const t={a:a,b:l,c:c,normal:new sq,materialIndex:0};xW.getNormal(KW,ZW,JW,t.normal),u.face=t,u.barycoord=e}return u}class sX extends cW{constructor(){super(),this.isGroup=!0,this.type="Group"}}class aX{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Rj,this.updateRanges=[],this.version=0,this.uuid=Lj()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lj()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lj()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const lX=new sq;class cX{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)lX.fromBufferAttribute(this,t),lX.applyMatrix4(e),this.setXYZ(t,lX.x,lX.y,lX.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)lX.fromBufferAttribute(this,t),lX.applyNormalMatrix(e),this.setXYZ(t,lX.x,lX.y,lX.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)lX.fromBufferAttribute(this,t),lX.transformDirection(e),this.setXYZ(t,lX.x,lX.y,lX.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Nj(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=zj(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=zj(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=zj(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=zj(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=zj(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Nj(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Nj(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Nj(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Nj(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array),n=zj(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=zj(t,this.array),i=zj(i,this.array),n=zj(n,this.array),r=zj(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new LW(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cX(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class uX extends BW{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new IW(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let hX;const dX=new sq,pX=new sq,fX=new sq,gX=new Uj,mX=new Uj,_X=new Oq,vX=new sq,yX=new sq,bX=new sq,AX=new Uj,wX=new Uj,xX=new Uj;class SX extends cW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uX;if(super(),this.isSprite=!0,this.type="Sprite",void 0===hX){hX=new jW;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new aX(e,5);hX.setIndex([0,1,2,0,2,3]),hX.setAttribute("position",new cX(t,3,0,!1)),hX.setAttribute("uv",new cX(t,2,3,!1))}this.geometry=hX,this.material=e,this.center=new Uj(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pX.setFromMatrixScale(this.matrixWorld),_X.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),fX.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&pX.multiplyScalar(-fX.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const o=this.center;CX(vX.set(-.5,-.5,0),fX,o,pX,n,r),CX(yX.set(.5,-.5,0),fX,o,pX,n,r),CX(bX.set(.5,.5,0),fX,o,pX,n,r),AX.set(0,0),wX.set(1,0),xX.set(1,1);let s=e.ray.intersectTriangle(vX,yX,bX,!1,dX);if(null===s&&(CX(yX.set(-.5,.5,0),fX,o,pX,n,r),wX.set(0,1),s=e.ray.intersectTriangle(vX,bX,yX,!1,dX),null===s))return;const a=e.ray.origin.distanceTo(dX);a<e.near||a>e.far||t.push({distance:a,point:dX.clone(),uv:xW.getInterpolation(dX,vX,yX,bX,AX,wX,xX,new Uj),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function CX(e,t,i,n,r,o){gX.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(mX.x=o*gX.x-r*gX.y,mX.y=r*gX.x+o*gX.y):mX.copy(gX),e.copy(t),e.x+=mX.x,e.y+=mX.y,e.applyMatrix4(_X)}class EX extends BW{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new IW(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const TX=new sq,IX=new sq,MX=new Oq,kX=new Lq,BX=new Tq,RX=new sq,PX=new sq;class DX extends cW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jW,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EX;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)TX.fromBufferAttribute(t,e-1),IX.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=TX.distanceTo(IX);e.setAttribute("lineDistance",new NW(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),BX.copy(i.boundingSphere),BX.applyMatrix4(n),BX.radius+=r,!1===e.ray.intersectsSphere(BX))return;MX.copy(n).invert(),kX.copy(e.ray).applyMatrix4(MX);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=this.isLineSegments?2:1,c=i.index,u=i.attributes.position;if(null!==c){const i=Math.max(0,o.start),n=Math.min(c.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=c.getX(r),n=c.getX(r+1),o=LX(this,e,kX,a,i,n);o&&t.push(o)}if(this.isLineLoop){const r=c.getX(n-1),o=c.getX(i),s=LX(this,e,kX,a,r,o);s&&t.push(s)}}else{const i=Math.max(0,o.start),n=Math.min(u.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=LX(this,e,kX,a,r,r+1);i&&t.push(i)}if(this.isLineLoop){const r=LX(this,e,kX,a,n-1,i);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function LX(e,t,i,n,r,o){const s=e.geometry.attributes.position;if(TX.fromBufferAttribute(s,r),IX.fromBufferAttribute(s,o),i.distanceSqToSegment(TX,IX,RX,PX)>n)return;RX.applyMatrix4(e.matrixWorld);const a=t.ray.origin.distanceTo(RX);return a<t.near||a>t.far?void 0:{distance:a,point:PX.clone().applyMatrix4(e.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:e}}class OX extends nq{constructor(e,t,i,n,r,o,s,a,l){super(e,t,i,n,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class FX extends jW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};const l=this;n=Math.floor(n),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],g=i/2;let m=0;function _(i){const r=p,o=new Uj,f=new sq;let _=0;const v=!0===i?e:t,y=!0===i?1:-1;for(let e=1;e<=n;e++)u.push(0,g*y,0),h.push(0,y,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=n;e++){const t=e/n*a+s,i=Math.cos(t),r=Math.sin(t);f.x=v*r,f.y=g*y,f.z=v*i,u.push(f.x,f.y,f.z),h.push(0,y,0),o.x=.5*i+.5,o.y=.5*r*y+.5,d.push(o.x,o.y),p++}for(let e=0;e<n;e++){const t=r+e,n=b+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),_+=3}l.addGroup(m,_,!0===i?1:2),m+=_}!function(){const o=new sq,_=new sq;let v=0;const y=(t-e)/i;for(let l=0;l<=r;l++){const c=[],m=l/r,v=m*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,r=t*a+s,l=Math.sin(r),f=Math.cos(r);_.x=v*l,_.y=-m*i+g,_.z=v*f,u.push(_.x,_.y,_.z),o.set(l,y,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-m),c.push(p++)}f.push(c)}for(let i=0;i<n;i++)for(let n=0;n<r;n++){const r=f[n][i],o=f[n+1][i],s=f[n+1][i+1],a=f[n][i+1];e>0&&(c.push(r,o,a),v+=3),t>0&&(c.push(o,s,a),v+=3)}l.addGroup(m,v,0),m+=v}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new NW(u,3)),this.setAttribute("normal",new NW(h,3)),this.setAttribute("uv",new NW(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FX(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class NX extends EX{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const zX=new Oq;class UX{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Lq(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new qq,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return zX.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zX),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return VX(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(HX),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n=0,r=e.length;n<r;n++)VX(e[n],this,i,t);return i.sort(HX),i}}function HX(e,t){return e.distance-t.distance}function VX(e,t,i,n){let r=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,i)&&(r=!1),!0===r&&!0===n){const n=e.children;for(let e=0,r=n.length;e<r;e++)VX(n[e],t,i,!0)}}const $X=new sq;let GX,QX;class jX extends cW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sq(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sq(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===GX&&(GX=new jW,GX.setAttribute("position",new NW([0,0,0,0,1,0],3)),QX=new FX(0,.5,1,5,1),QX.translate(0,-.5,0)),this.position.copy(t),this.line=new DX(GX,new EX({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rX(QX,new RW({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$X.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($X,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"169"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="169");var qX,WX="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof i.g?i.g:"undefined"!=typeof self?self:{},XX={exports:{}},YX="object"==typeof Reflect?Reflect:null,KX=YX&&"function"==typeof YX.apply?YX.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};qX=YX&&"function"==typeof YX.ownKeys?YX.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var ZX=Number.isNaN||function(e){return e!=e};function JX(){JX.init.call(this)}XX.exports=JX,XX.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,o),n(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}var s,a;cY(e,t,o,{once:!0}),"error"!==t&&(a=r,"function"==typeof(s=e).on&&cY(s,"error",a,{once:!0}))}))},JX.EventEmitter=JX,JX.prototype._events=void 0,JX.prototype._eventsCount=0,JX.prototype._maxListeners=void 0;var eY=10;function tY(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function iY(e){return void 0===e._maxListeners?JX.defaultMaxListeners:e._maxListeners}function nY(e,t,i,n){var r,o,s,a;if(tY(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),s=o[t]),void 0===s)s=o[t]=i,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(r=iY(e))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function rY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function oY(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=rY.bind(n);return r.listener=i,n.wrapFn=r,r}function sY(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):lY(r,r.length)}function aY(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function lY(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function cY(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){n.once&&e.removeEventListener(t,r),i(o)}))}}Object.defineProperty(JX,"defaultMaxListeners",{enumerable:!0,get:function(){return eY},set:function(e){if("number"!=typeof e||e<0||ZX(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");eY=e}}),JX.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},JX.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||ZX(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},JX.prototype.getMaxListeners=function(){return iY(this)},JX.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)KX(a,this,t);else{var l=a.length,c=lY(a,l);for(i=0;i<l;++i)KX(c[i],this,t)}return!0},JX.prototype.addListener=function(e,t){return nY(this,e,t,!1)},JX.prototype.on=JX.prototype.addListener,JX.prototype.prependListener=function(e,t){return nY(this,e,t,!0)},JX.prototype.once=function(e,t){return tY(t),this.on(e,oY(this,e,t)),this},JX.prototype.prependOnceListener=function(e,t){return tY(t),this.prependListener(e,oY(this,e,t)),this},JX.prototype.removeListener=function(e,t){var i,n,r,o,s;if(tY(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){s=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},JX.prototype.off=JX.prototype.removeListener,JX.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},JX.prototype.listeners=function(e){return sY(this,e,!0)},JX.prototype.rawListeners=function(e){return sY(this,e,!1)},JX.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):aY.call(e,t)},JX.prototype.listenerCount=aY,JX.prototype.eventNames=function(){return this._eventsCount>0?qX(this._events):[]};var uY=XX.exports;const hY=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>e.apply(this,r)),i)}};class dY extends uY.EventEmitter{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mousedown",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;super(),this._isHoldEvent=!1,this._holdTimeoutId=-1,this._doubleClickTimeoutId=-1,this._numClick=0,e.addEventListener(t,this._handleMouseDown.bind(this)),e.addEventListener(i,this._handleMouseClick.bind(this)),this._delay=n}_handleMouseDown(){this._isHoldEvent=!1,window.clearTimeout(this._doubleClickTimeoutId),this._holdTimeoutId=window.setTimeout((()=>{this._isHoldEvent=!0,this.emit("pointerevent-is-hold-event")}),this._delay)}_handleMouseClick(e){if(this._isHoldEvent)return this._numClick=0,void(this._isHoldEvent=!1);window.clearTimeout(this._holdTimeoutId),this._numClick++,1===this._numClick?this._doubleClickTimeoutId=window.setTimeout((()=>{this._numClick=0,this.emit("single-click",e)}),this._delay):(this._numClick=0,this.emit("double-click",e))}}function pY(e){return e*(180/Math.PI)}var fY=Object.defineProperty,gY=Object.getOwnPropertyDescriptor,mY=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?gY(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&fY(t,i,o),o};function _Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=document.createElement("canvas");i.width=64,i.height=64;const n=i.getContext("2d");if(null==n)return;if(n.beginPath(),n.arc(32,32,16,0,2*Math.PI),n.closePath(),n.fillStyle=e.getStyle(),n.fill(),null!==t){const e=20;n.font=e+"px Arial";const r=n.measureText(t),o=r.width,s=r.actualBoundingBoxAscent-r.actualBoundingBoxDescent,a=(i.width-o)/2,l=(i.height+s)/2;n.fillStyle="#ffffff",n.fillText(t,a,l)}const r=new OX(i);return new uX({map:r,toneMapped:!1})}let vY=class extends kM{constructor(){super(),this._coordinateAxes=[],this._coordinateLabel=[],this._lastSphericalPosition={theta:-1,phi:-1,radius:-1},this._lastFieldOfViewInDeg=-1,this._referenceFieldOfViewInRad=-1,this._referenceMaxRadius=-1,this._isRadiusConst=!1,this._maxZoomLevel=100,this._minZoomLevel=.5,this._currentZoomLevel=1,this._minPhiInDeg=0,this._maxPhiInDeg=1800,this._deltaX=0,this._deltaY=0,this._emitCamOrbitAngleChanged=hY((()=>{console.log("Cam Phi Theta",pY(this._lastSphericalPosition.phi),pY(this._lastSphericalPosition.theta)),this.dispatchEvent(new Event("cam-orbit-angle-changed"))}),250),this.addEventListener("load",this._handleModelLoaded),this.addEventListener("camera-change",this._handleCameraChanged);const e=new dY(this);e.on("single-click",this._handleSceneClicked.bind(this)),this.addEventListener("pointerup",(()=>this[nI].style.cursor="default")),this.addEventListener("pointerdown",(()=>this[nI].style.cursor="pointer")),e.on("pointerevent-is-hold-event",(()=>{console.log("Single click over"),this[nI].style.cursor="grabbing"}))}firstUpdated(){this[oI].add(this.measurementTool.sceneElementGroup),this.measurementTool.on("scene-update-requested",(()=>this.updateRendering())),this.measurementTool.on("calculate-hotspot-requested",this._intersectObject.bind(this)),this.measurementTool.on("hotspot-added",this._handleHotspotAdded.bind(this))}connectWithSettings(e){e.modelOrientation.on("model-orientation-changed",(e=>{this.orientation=e.angleInRadAsString(),this.measurementTool.eulerOrientation=e})),e.environment3D.on("change-axes-visibility-requested",this._changeAxesVisibility.bind(this)),e.environment3D.on("change-viewer-background-color-requested",this._changeBackgroundColor.bind(this)),e.environment3D.on("change-exposure-requested",(e=>this.exposure=e));const[t,i]=e.environment3D.backgroundColor;this._changeBackgroundColor(t,i)}resize(e,t){this.style.height=e+"px",this.style.width=t+"px",this[oI].idealAspect=this[oI].aspect}getCamera(){return this[oI].camera}setReferenceFieldOfView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e==this._referenceFieldOfViewInRad)return void(t&&(this.fieldOfView=e+"rad"));this._referenceFieldOfViewInRad=e,this[oI].idealAspect=this[oI].aspect,this.minFieldOfView=e/this._maxZoomLevel+"rad",this.maxFieldOfView=e/this._minZoomLevel+"rad",t&&(this.fieldOfView=e+"rad");const i=this.getDimensions(),n=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z);this.clientWidth>this.clientHeight?this._referenceMaxRadius=n/e:this._referenceMaxRadius=n/e*this.clientHeight/this.clientWidth,this._isRadiusConst||(this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+this._referenceMaxRadius+"m")}rotateModel(e,t){const i=2*Math.PI/this[oI].height,n=i*e,r=i*t,o=this[Bx];o.changeSource=hS.USER_INTERACTION,o.adjustOrbit(n,r,0)}zoomTo(e){-1!=this._referenceFieldOfViewInRad?(this._currentZoomLevel=e,this[oI].idealAspect=this[oI].aspect,this.fieldOfView=this._referenceFieldOfViewInRad/e+"rad"):console.log("Return 3d  zoom, ",this._currentZoomLevel)}setViewerOffset(e,t){this._deltaX==e&&this._deltaY==t||(this._deltaX=e,this._deltaY=t,this[oI].camera.setViewOffset(this.clientWidth,this.clientHeight,e,t,this.clientWidth,this.clientHeight),this.updateRendering())}updateRendering(){this[oI].queueRender()}setMinZoomLevel(e){if(this._minZoomLevel!=e&&-1!=this._referenceFieldOfViewInRad){const t=this._referenceFieldOfViewInRad/e,i=this.getFieldOfView()/180*Math.PI;if(t<i)if(0==this._isRadiusConst){const e=this.getCameraOrbit(),n=this.getCameraOrbit().radius;e.radius=n*i/t,this.cameraOrbit=e.toString()}else this.fieldOfView=t+"rad";this.maxFieldOfView=t+"rad",this._minZoomLevel=e}}setCameraOrbitPos(e){this._isRadiusConst&&(this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+e.radius+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e.radius+"m"),this.cameraOrbit=e.toString()}updateRadiusMode(e){if(e!=this._isRadiusConst)if(this._isRadiusConst=e,e){const e=this.getCameraOrbit().radius;this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+e+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e+"m"}else{this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto";const e=this._referenceMaxRadius>0?this._referenceMaxRadius+"m":"auto";this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e}}_changeAxesVisibility(e){this._changeCoordinateVisibility(e),this.updateRendering()}_changeBackgroundColor(e,t){console.log("Change background color",e,t),this.style.background=t?"radial-gradient(circle at center, "+t+", "+e+")":e}_handleHotspotAdded(e){e.addEventListener("hotspot-position-changed",(()=>{this.updateHotspot({name:e.slot,position:e.dataset.position,normal:e.dataset.normal})})),this.appendChild(e)}_intersectObject(e,t){const i=this.getCameraTarget();console.log("Current translation 2",i),e.x-=i.x,e.y-=i.y,e.z-=i.z,this[oI].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const n=new UX(e,t).intersectObject(this[oI],!0);this[oI].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements();const r=n.find((e=>e.object.visible&&!e.object.userData.shadow));if(null==r||null==r.face)return void console.log("Object intersection not found, not adding point from 3D scene.");let o,s;null==r.uv?(o=r.point,s=r.face.normal):(r.face.normal.applyNormalMatrix((new Hj).getNormalMatrix(r.object.matrixWorld)),o=r.point,s=r.face.normal),o.x+=i.x,o.y+=i.y,o.z+=i.z,this.measurementTool.addPointFrom3DScene(o,s,!1)}_coordinateLabelIsClicked(e){if(0==this._coordinateAxes.length||!this._coordinateAxes[0].visible)return!1;const t=this[oI].getNDC(e.clientX,e.clientY),i=new UX;i.setFromCamera(t,this.getCamera());const n=i.intersectObjects(this._coordinateLabel,!0);if(console.log("Label hit?",n.length),0==n.length)return!1;const r=n[0].object,o=this.getCameraOrbit();switch(r.userData.type){case"posX":o.phi=.5*Math.PI,o.theta=.5*Math.PI;break;case"posY":o.phi=0,o.theta=0;break;case"posZ":o.phi=.5*Math.PI,o.theta=0;break;case"negX":o.phi=.5*Math.PI,o.theta=1.5*Math.PI;break;case"negY":o.phi=Math.PI,o.theta=0;break;case"negZ":o.phi=.5*Math.PI,o.theta=Math.PI;break;default:console.log("default")}return this.cameraOrbit=o.toString(),this._emitCamOrbitAngleChanged(),!0}_handleSceneClicked(e){if(console.log("Single Click into scene"),this._coordinateLabelIsClicked(e))return;if(!this.measurementTool.isEditModeActive)return;const t=e.clientX,i=e.clientY;this[oI].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const n=this.positionAndNormalFromPoint(t,i);if(this[oI].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements(),null==n)return void console.log("no hit result: mouse = ",t,", ",i);const{position:r,normal:o}=n;this.measurementTool.addPointFrom3DScene(r,o)}_addCoordinateElements(){this._coordinateAxes.forEach((e=>{this[oI].add(e)})),this._coordinateLabel.forEach((e=>{this[oI].add(e)}))}_removeCoordinateElements(){this._coordinateAxes.forEach((e=>{this[oI].remove(e)})),this._coordinateLabel.forEach((e=>{this[oI].remove(e)}))}_changeCoordinateVisibility(e){this._coordinateAxes.forEach((t=>{t.visible=e})),this._coordinateLabel.forEach((t=>{t.visible=e}))}_handleModelLoaded(){const e=this.getDimensions(),t=.5*Math.max(Math.max(e.x,e.y),e.z);this._coordinateAxes.push(new jX(new sq(t,0,0),new sq(-t,0,0),2*t,"red",.5,.25)),this._coordinateAxes.push(new jX(new sq(0,t,0),new sq(0,-t,0),2*t,"green",.5,.25)),this._coordinateAxes.push(new jX(new sq(0,0,t),new sq(0,0,-t),2*t,"blue",.5,.25)),this._coordinateAxes.forEach((e=>{e.visible=!1}));const i=new sq(.5,.5,.5),n=new Oq;n.scale(i);const r=new SX(_Y(new IW("red"),"X"));r.userData.type="posX",r.applyMatrix4(n),r.position.x=t,this._coordinateLabel.push(r);const o=new SX(_Y(new IW(1,.2,.2),"-x"));o.userData.type="negX",o.applyMatrix4(n),o.position.x=-t,this._coordinateLabel.push(o);const s=new SX(_Y(new IW("green"),"y"));s.userData.type="posY",s.applyMatrix4(n),s.position.y=t,this._coordinateLabel.push(s);const a=new SX(_Y(new IW(.2,1,.2),"-y"));a.userData.type="negY",a.applyMatrix4(n),a.position.y=-t,this._coordinateLabel.push(a);const l=new SX(_Y(new IW("blue"),"z"));l.userData.type="posZ",l.applyMatrix4(n),l.position.z=t,this._coordinateLabel.push(l);const c=new SX(_Y(new IW(.2,.2,1),"-z"));c.userData.type="negZ",c.applyMatrix4(n),c.position.z=-t,this._coordinateLabel.push(c),this._coordinateLabel.forEach((e=>{e.visible=!1})),this._addCoordinateElements(),this._lastSphericalPosition=this.getCameraOrbit(),this[oI].idealAspect=this[oI].aspect,this[oI].queueRender(),this._emitCamOrbitAngleChanged(),this[nI].style.cursor="default",this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg auto"}_handleCameraChanged(e){this.measurementTool.translation=(new sq).setFromMatrixPosition(this[oI].target.matrixWorld);const t=this.getCameraOrbit(),i=this.getFieldOfView();if("user-interaction"!=e.detail.source)return this._lastSphericalPosition=t,void(this._lastFieldOfViewInDeg=i);this._lastSphericalPosition.phi==t.phi&&this._lastSphericalPosition.theta==t.theta||(console.log("CamChanged",this.getCameraOrbit(),this._lastSphericalPosition),t.radius>0&&this._emitCamOrbitAngleChanged()),this._lastSphericalPosition.radius==t.radius&&this._lastFieldOfViewInDeg!=i&&(this._currentZoomLevel=pY(this._referenceFieldOfViewInRad)/i,console.log("FOV change",this._currentZoomLevel,pY(this._referenceFieldOfViewInRad),i),this.dispatchEvent(new CustomEvent("fov-based-zoom-changed",{detail:{zoomLevel:this._currentZoomLevel}}))),this._lastSphericalPosition=t,this._lastFieldOfViewInDeg=i}};vY.styles=fQ``,mY([Aj({type:Object})],vY.prototype,"measurementTool",2),vY=mY([yj("viewer-3d")],vY);var yY={exports:{}};!function(e){function t(e){return new t.Viewer(e)}var i,n,r,o;!function(e){e.version={versionStr:"5.0.0",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("0",10)};var i,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null==e?String(e):n[r.call(e)]||"object"},e.isPlainObject=function(i){if(!i||"object"!==t.type(i)||i.nodeType||e.isWindow(i))return!1;if(i.constructor&&!o.call(i,"constructor")&&!o.call(i.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in i)n=r;return void 0===n||o.call(i,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(i=document.createElement("canvas"),!(!e.isFunction(i.getContext)||!i.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var t=0;if(e.supportsAddEventListener)try{var i={get capture(){return t++,!1},get once(){return t++,!1},get passive(){return t++,!1}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(e){t=0}return t>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(i,1)/n}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(t),function(e){e.extend=function(){var i,n,r,o,s,a,l=arguments[0]||{},c=arguments.length,u=!1,h=1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},h=2),"object"==typeof l||t.isFunction(l)||(l={}),c===h&&(l=this,--h);h<c;h++)if(null!==(i=arguments[h])||void 0!==i)for(n in i){var d=Object.getOwnPropertyDescriptor(i,n);void 0!==d?d.get||d.set?Object.defineProperty(l,n,d):l!==(o=d.value)&&(u&&o&&(t.isPlainObject(o)||(s=t.isArray(o)))?(r=l[n],s?(s=!1,a=r&&t.isArray(r)?r:[]):a=r&&t.isPlainObject(r)?r:{},l[n]=t.extend(u,a,o)):void 0!==o&&(l[n]=o)):e.console.warn('Could not copy inherited property "'+n+'".')}return l},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(e,t){return function(){var i=arguments;return void 0===i&&(i=[]),t.apply(e,i)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(t){return e._viewers.get(this.getElement(t))},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(t){var i,n,r=new e.Point;for(n=o(t=e.getElement(t),i="fixed"===e.getElementStyle(t).position);n;)r.x+=t.offsetLeft,r.y+=t.offsetTop,i&&(r=r.plus(e.getPageScroll())),n=o(t=n,i="fixed"===e.getElementStyle(t).position);return r},getElementOffset:function(t){var i,n,r=(t=e.getElement(t))&&t.ownerDocument,o={top:0,left:0};return r?(i=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new e.Point(o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0),o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0))):new e.Point},getElementSize:function(t){return t=e.getElement(t),new e.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return(t=e.getElement(t)).currentStyle}:function(t){return t=e.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var i={};return e.getCssPropertyWithVendorPrefix=function(t){if(void 0!==i[t])return i[t];var n=document.createElement("div").style,r=null;if(void 0!==n[t])r=t;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],s=e.capitalizeFirstLetter(t),a=0;a<o.length;a++){var l=o[a]+s;if(void 0!==n[l]){r=l;break}}return i[t]=r,r},e.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var i=e%t;return i<0&&(i+=t),i},pointInElement:function(t,i){t=e.getElement(t);var n=e.getElementOffset(t),r=e.getElementSize(t);return i.x>=n.x&&i.x<n.x+r.x&&i.y<n.y+r.y&&i.y>=n.y},getMousePosition:function(t){if("number"==typeof t.pageX)e.getMousePosition=function(t){var i=new e.Point;return i.x=t.pageX,i.y=t.pageY,i};else{if("number"!=typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(t){var i=new e.Point;return i.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,i}}return e.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(i.scrollLeft||i.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(t){if(void 0!==window.scrollTo)e.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var i=e.getPageScroll();if(i.x===t.x&&i.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var n=e.getPageScroll();if(n.x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,(n=e.getPageScroll()).x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});e.setPageScroll=function(e){}}e.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!i.clientWidth&&!i.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(t){t=e.getElement(t);var i=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(i[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(i[1].style,{display:"table-row"}),e.extend(i[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),i[0].appendChild(i[1]),i[1].appendChild(i[2]),i[2].appendChild(t),i[0]},makeNeutralElement:function(e){var t=document.createElement(e),i=t.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",t},now:function(){return Date.now?e.now=Date.now:e.now=function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(t){var i=e.makeNeutralElement("img");return i.src=t,i},setElementOpacity:function(t,i,n){var r;t=e.getElement(t),n&&!e.Browser.alpha&&(i=Math.round(i)),e.Browser.opacity?t.style.opacity=i<1?i:"":i<1?(r="alpha(opacity="+Math.round(100*i)+")",t.style.filter=r):t.style.filter=""},setElementTouchActionNone:function(t){void 0!==(t=e.getElement(t)).style.touchAction?t.style.touchAction="none":void 0!==t.style.msTouchAction&&(t.style.msTouchAction="none")},setElementPointerEvents:function(t,i){void 0!==(t=e.getElement(t)).style&&void 0!==t.style.pointerEvents&&(t.style.pointerEvents=i)},setElementPointerEventsNone:function(t){e.setElementPointerEvents(t,"none")},addClass:function(t,i){(t=e.getElement(t)).className?-1===(" "+t.className+" ").indexOf(" "+i+" ")&&(t.className+=" "+i):t.className=i},indexOf:function(e,t,i){return Array.prototype.indexOf?this.indexOf=function(e,t,i){return e.indexOf(t,i)}:this.indexOf=function(e,t,i){var n,r,o=i||0;if(!e)throw new TypeError;if(0===(r=e.length)||o>=r)return-1;for(o<0&&(o=r-Math.abs(o)),n=o;n<r;n++)if(e[n]===t)return n;return-1},this.indexOf(e,t,i)},removeClass:function(t,i){var n,r,o=[];for(n=(t=e.getElement(t)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==i&&o.push(n[r]);t.className=o.join(" ")},normalizeEventListenerOptions:function(t){return void 0!==t?"boolean"==typeof t?e.supportsEventListenerOptions?{capture:t}:t:e.supportsEventListenerOptions?t:void 0!==t.capture&&t.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).addEventListener(i,n,r)};if(document.documentElement.attachEvent&&document.attachEvent)return function(t,i,n){(t=e.getElement(t)).attachEvent("on"+i,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).removeEventListener(i,n,r)};if(document.documentElement.detachEvent&&document.detachEvent)return function(t,i,n){(t=e.getElement(t)).detachEvent("on"+i,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e.preventDefault()},eventIsCanceled:function(e){return e.defaultPrevented},stopEvent:function(e){e.stopPropagation()},createCallback:function(e,t){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var i,n=[];for(i=2;i<arguments.length;i++)n.push(arguments[i]);return function(){var i,r=n.concat([]);for(i=0;i<arguments.length;i++)r.push(arguments[i]);return t.apply(e,r)}},getUrlParameter:function(e){return r[e]||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return e.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(t,i,n){var r,o,s,a;e.isPlainObject(t)&&(i=t.success,n=t.error,r=t.withCredentials,o=t.headers,s=t.responseType||null,a=t.postData||null,t=t.url);var l=e.getUrlProtocol(t),c=e.createAjaxRequest();if(!e.isFunction(i))throw new Error("makeAjaxRequest requires a success callback");c.onreadystatechange=function(){4===c.readyState&&(c.onreadystatechange=function(){},c.status>=200&&c.status<300||0===c.status&&"http:"!==l&&"https:"!==l?i(c):e.isFunction(n)?n(c):e.console.error("AJAX request returned %d: %s",c.status,t))};var u=a?"POST":"GET";try{if(c.open(u,t,!0),s&&(c.responseType=s),o)for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&o[h]&&c.setRequestHeader(h,o[h]);r&&(c.withCredentials=!0),c.send(a)}catch(t){e.console.error("%s while making AJAX request: %s",t.name,t.message),c.onreadystatechange=function(){},e.isFunction(n)&&n(c,t)}return c},jsonp:function(t){var i,n=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=t.callbackName||"openseadragon"+e.now(),s=window[o],a="$1"+o+"$2",l=t.param||"callback",c=t.callback;n=n.replace(/(=)\?(&|$)|\?\?/i,a),n+=(/\?/.test(n)?"&":"?")+l+"="+o,window[o]=function(t){if(s)window[o]=s;else try{delete window[o]}catch(e){}c&&e.isFunction(c)&&c(t)},i=document.createElement("script"),void 0===t.async&&!1===t.async||(i.async="async"),t.scriptCharset&&(i.charset=t.scriptCharset),i.src=n,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0)},r.insertBefore(i,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(!window.DOMParser)throw new Error("Browser doesn't support XML DOM.");return e.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")},e.parseXml(t)},parseJSON:function(t){return e.parseJSON=window.JSON.parse,e.parseJSON(t)},imageFormatSupported:function(e){return!!n[(e=e||"").toLowerCase()]},setImageFormatsSupported:function(t){e.extend(n,t)}});var i=function(e){};e.console=window.console||{log:i,debug:i,info:i,warn:i,error:i,assert:i},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var n={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},r={};function o(e,t){return t&&e!==document.body?document.body:e.offsetParent}!function(){var t=navigator.appVersion,i=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(i.substring(i.indexOf("MSIE")+5,i.indexOf(";",i.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(i.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edge")+5))):i.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edg")+4))):i.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(i.substring(i.indexOf("Firefox")+8))):i.indexOf("Safari")>=0?(e.Browser.vendor=i.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(i.substring(i.substring(0,i.indexOf("Safari")).lastIndexOf("/")+1,i.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(t)}var n,o,s,a=window.location.search.substring(1).split("&");for(s=0;s<a.length;s++)if((o=(n=a[s]).indexOf("="))>0){var l=n.substring(0,o),c=n.substring(o+1);try{r[l]=decodeURIComponent(c)}catch(t){e.console.error("Ignoring malformed URL parameter: %s=%s",l,c)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.console.error("Internet Explorer is not supported by OpenSeadragon")}(),function(t){var i=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(i&&n)e.requestAnimationFrame=function(){return i.apply(t,arguments)},e.cancelAnimationFrame=function(){return n.apply(t,arguments)};else{var r,o=[],s=[],a=0;e.requestAnimationFrame=function(t){return o.push([++a,t]),r||(r=setInterval((function(){if(o.length){var t=e.now(),i=s;for(s=o,o=i;s.length;)s.shift()[1](t)}else clearInterval(r),r=void 0}),20)),a},e.cancelAnimationFrame=function(e){var t,i;for(t=0,i=o.length;t<i;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,i=s.length;t<i;t+=1)if(s[t][0]===e)return void s.splice(t,1)}}}(window)}(t),i=WX,n=function(){return t},e.exports?e.exports=n():i.OpenSeadragon=n(),function(e){class t{constructor(e){e||(e=[0,0,0,0,0,0,0,0,0]),this.values=e}static makeIdentity(){return new t([1,0,0,0,1,0,0,0,1])}static makeTranslation(e,i){return new t([1,0,0,0,1,0,e,i,1])}static makeRotation(e){var i=Math.cos(e),n=Math.sin(e);return new t([i,-n,0,n,i,0,0,0,1])}static makeScaling(e,i){return new t([e,0,0,0,i,0,0,0,1])}multiply(e){let i=this.values,n=e.values;var r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=n[0],f=n[1],g=n[2],m=n[3],_=n[4],v=n[5],y=n[6],b=n[7],A=n[8];return new t([p*r+f*a+g*u,p*o+f*l+g*h,p*s+f*c+g*d,m*r+_*a+v*u,m*o+_*l+v*h,m*s+_*c+v*d,y*r+b*a+A*u,y*o+b*l+A*h,y*s+b*c+A*d])}}e.Mat3=t}(t),r=t,o={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.fullscreenElement},o.requestFullScreen=function(e){return e.requestFullscreen().catch((function(e){r.console.error("Fullscreen request failed: ",e)}))},o.exitFullScreen=function(){document.exitFullscreen().catch((function(e){r.console.error("Error while exiting fullscreen: ",e)}))},o.fullScreenEventName="fullscreenchange",o.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.msFullscreenElement},o.requestFullScreen=function(e){return e.msRequestFullscreen()},o.exitFullScreen=function(){document.msExitFullscreen()},o.fullScreenEventName="MSFullscreenChange",o.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.webkitFullscreenElement},o.requestFullScreen=function(e){return e.webkitRequestFullscreen()},o.exitFullScreen=function(){document.webkitExitFullscreen()},o.fullScreenEventName="webkitfullscreenchange",o.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},o.requestFullScreen=function(e){return e.webkitRequestFullScreen()},o.exitFullScreen=function(){document.webkitCancelFullScreen()},o.fullScreenEventName="webkitfullscreenchange",o.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.mozFullScreenElement},o.requestFullScreen=function(e){return e.mozRequestFullScreen()},o.exitFullScreen=function(){document.mozCancelFullScreen()},o.fullScreenEventName="mozfullscreenchange",o.fullScreenErrorEventName="mozfullscreenerror"),o.isFullScreen=function(){return null!==o.getFullScreenElement()},o.cancelFullScreen=function(){r.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),o.exitFullScreen()},r.extend(r,o),function(e){e.EventSource=function(){this.events={},this._rejectedEventList={}},e.EventSource.prototype={addOnceHandler:function(e,t,i,n,r){var o=this;n=n||1;var s=0,a=function(i){return++s===n&&o.removeHandler(e,a),t(i)};return this.addHandler(e,a,i,r)},addHandler:function(t,i,n,r){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;var o=this.events[t];if(o||(this.events[t]=o=[]),i&&e.isFunction(i)){var s=o.length,a={handler:i,userData:n||null,priority:r||0};for(o[s]=a;s>0&&o[s-1].priority<o[s].priority;)o[s]=o[s-1],o[s-1]=a,s--}return!0},removeHandler:function(t,i){var n,r=this.events[t],o=[];if(r&&e.isArray(r)){for(n=0;n<r.length;n++)r[n].handler!==i&&o.push(r[n]);this.events[t]=o}},numberOfHandlers:function(e){var t=this.events[e];return t?t.length:0},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,i){var n,r=t.length;for(n=0;n<r;n++)t[n]&&(i.eventSource=e,i.userData=t[n].userData,t[n].handler(i))}):null},raiseEvent:function(t,i){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;var n=this.getHandler(t);return n&&n(this,i||{}),!0},rejectEventHandler(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._rejectedEventList[e]=t},allowEventHandler(e){delete this._rejectedEventList[e]}}}(t),function(e){var t={};e.MouseTracker=function(i){var n=arguments;e.isPlainObject(i)||(i={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(i.element),this.clickTimeThreshold=i.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=i.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=i.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=i.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=i.userData||null,this.stopDelay=i.stopDelay||50,this.preProcessEventHandler=i.preProcessEventHandler||null,this.contextMenuHandler=i.contextMenuHandler||null,this.enterHandler=i.enterHandler||null,this.leaveHandler=i.leaveHandler||null,this.exitHandler=i.exitHandler||null,this.overHandler=i.overHandler||null,this.outHandler=i.outHandler||null,this.pressHandler=i.pressHandler||null,this.nonPrimaryPressHandler=i.nonPrimaryPressHandler||null,this.releaseHandler=i.releaseHandler||null,this.nonPrimaryReleaseHandler=i.nonPrimaryReleaseHandler||null,this.moveHandler=i.moveHandler||null,this.scrollHandler=i.scrollHandler||null,this.clickHandler=i.clickHandler||null,this.dblClickHandler=i.dblClickHandler||null,this.dragHandler=i.dragHandler||null,this.dragEndHandler=i.dragEndHandler||null,this.pinchHandler=i.pinchHandler||null,this.stopHandler=i.stopHandler||null,this.keyDownHandler=i.keyDownHandler||null,this.keyUpHandler=i.keyUpHandler||null,this.keyHandler=i.keyHandler||null,this.focusHandler=i.focusHandler||null,this.blurHandler=i.blurHandler||null;var r=this;t[this.hash]={click:function(t){var i,n;L(r,n={originalEvent:i=t,eventType:"click",pointerType:"mouse",isEmulated:!1}),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i),n.stopPropagation&&e.stopEvent(i)},dblclick:function(t){var i,n;L(r,n={originalEvent:i=t,eventType:"dblclick",pointerType:"mouse",isEmulated:!1}),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i),n.stopPropagation&&e.stopEvent(i)},keydown:function(t){var i,n,o,s;o=null,L(i=r,s={originalEvent:n=t,eventType:"keydown",pointerType:"",isEmulated:!1}),!i.keyDownHandler||s.preventGesture||s.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:s.preventDefault||s.defaultPrevented,userData:i.userData},i.keyDownHandler(o)),(o&&o.preventDefault||s.preventDefault&&!s.defaultPrevented)&&e.cancelEvent(n),s.stopPropagation&&e.stopEvent(n)},keyup:function(t){var i,n,o,s;o=null,L(i=r,s={originalEvent:n=t,eventType:"keyup",pointerType:"",isEmulated:!1}),!i.keyUpHandler||s.preventGesture||s.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:s.preventDefault||s.defaultPrevented,userData:i.userData},i.keyUpHandler(o)),(o&&o.preventDefault||s.preventDefault&&!s.defaultPrevented)&&e.cancelEvent(n),s.stopPropagation&&e.stopEvent(n)},keypress:function(t){var i,n,o,s;o=null,L(i=r,s={originalEvent:n=t,eventType:"keypress",pointerType:"",isEmulated:!1}),!i.keyHandler||s.preventGesture||s.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:s.preventDefault||s.defaultPrevented,userData:i.userData},i.keyHandler(o)),(o&&o.preventDefault||s.preventDefault&&!s.defaultPrevented)&&e.cancelEvent(n),s.stopPropagation&&e.stopEvent(n)},focus:function(e){var t,i,n;L(t=r,n={originalEvent:i=e,eventType:"focus",pointerType:"",isEmulated:!1}),t.focusHandler&&!n.preventGesture&&t.focusHandler({eventSource:t,originalEvent:i,userData:t.userData})},blur:function(e){var t,i,n;L(t=r,n={originalEvent:i=e,eventType:"blur",pointerType:"",isEmulated:!1}),t.blurHandler&&!n.preventGesture&&t.blurHandler({eventSource:t,originalEvent:i,userData:t.userData})},contextmenu:function(t){var i,n,o,s;o=null,L(i=r,s={originalEvent:n=t,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1}),!i.contextMenuHandler||s.preventGesture||s.defaultPrevented||(o={eventSource:i,position:b(v(n),i.element),originalEvent:s.originalEvent,preventDefault:s.preventDefault||s.defaultPrevented,userData:i.userData},i.contextMenuHandler(o)),(o&&o.preventDefault||s.preventDefault&&!s.defaultPrevented)&&e.cancelEvent(n),s.stopPropagation&&e.stopEvent(n)},wheel:function(e){var t;x(r,t=e,t)},mousewheel:function(e){w(r,e)},DOMMouseScroll:function(e){w(r,e)},MozMousePixelScroll:function(e){w(r,e)},losecapture:function(t){var i,n,o,s;i=r,n=t,o={id:e.MouseTracker.mousePointerId,type:"mouse"},L(i,s={originalEvent:n,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1}),n.target===i.element&&O(i,o,!1),s.stopPropagation&&e.stopEvent(n)},mouseenter:function(e){S(r,e)},mouseleave:function(e){C(r,e)},mouseover:function(e){E(r,e)},mouseout:function(e){T(r,e)},mousedown:function(e){I(r,e)},mouseup:function(e){M(r,e)},mousemove:function(e){B(r,e)},touchstart:function(t){!function(t,i){var n,r,o,s=i.changedTouches.length,a=t.getActivePointersListByType("touch");n=e.now(),a.getLength()>i.touches.length-s&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var l={originalEvent:i,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(L(t,l),r=0;r<s;r++)F(t,l,o={id:i.changedTouches[r].identifier,type:"touch",isPrimary:0===a.getLength(),currentPos:v(i.changedTouches[r]),currentTime:n}),z(t,l,o,0),O(t,o,!0);l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(i),l.stopPropagation&&e.stopEvent(i)}(r,t)},touchend:function(t){!function(t,i){var n,r,o,s=i.changedTouches.length;n=e.now();var a={originalEvent:i,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(L(t,a),r=0;r<s;r++)U(t,a,o={id:i.changedTouches[r].identifier,type:"touch",currentPos:v(i.changedTouches[r]),currentTime:n},0),O(t,o,!1),N(t,a,o);a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(i),a.stopPropagation&&e.stopEvent(i)}(r,t)},touchmove:function(t){!function(t,i){var n,r,o=i.changedTouches.length;n=e.now();var s={originalEvent:i,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(L(t,s),r=0;r<o;r++)H(t,s,{id:i.changedTouches[r].identifier,type:"touch",currentPos:v(i.changedTouches[r]),currentTime:n});s.preventDefault&&!s.defaultPrevented&&e.cancelEvent(i),s.stopPropagation&&e.stopEvent(i)}(r,t)},touchcancel:function(t){!function(t,i){var n,r=i.changedTouches.length,o={originalEvent:i,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(L(t,o),n=0;n<r;n++)V(t,o,{id:i.changedTouches[n].identifier,type:"touch"});o.stopPropagation&&e.stopEvent(i)}(r,t)},gesturestart:function(t){var i;i=t,e.eventIsCanceled(i)||i.preventDefault()},gesturechange:function(t){var i;i=t,e.eventIsCanceled(i)||i.preventDefault()},gotpointercapture:function(t){var i,n,o;L(i=r,o={originalEvent:n=t,eventType:"gotpointercapture",pointerType:m(n),isEmulated:!1}),n.target===i.element&&O(i,{id:n.pointerId,type:m(n)},!0),o.stopPropagation&&e.stopEvent(n)},lostpointercapture:function(t){var i,n,o;L(i=r,o={originalEvent:n=t,eventType:"lostpointercapture",pointerType:m(n),isEmulated:!1}),n.target===i.element&&O(i,{id:n.pointerId,type:m(n)},!1),o.stopPropagation&&e.stopEvent(n)},pointerenter:function(e){S(r,e)},pointerleave:function(e){C(r,e)},pointerover:function(e){E(r,e)},pointerout:function(e){T(r,e)},pointerdown:function(e){I(r,e)},pointerup:function(e){M(r,e)},pointermove:function(e){B(r,e)},pointercancel:function(t){var i,n,o,s;i=r,o={id:(n=t).pointerId,type:m(n)},L(i,s={originalEvent:n,eventType:"pointercancel",pointerType:o.type,isEmulated:!1}),V(i,s,o),s.stopPropagation&&e.stopEvent(n)},pointerupcaptured:function(t){var i,n;n=t,(i=r).getActivePointersListByType(m(n)).getById(n.pointerId)&&k(i,n),e.stopEvent(n)},pointermovecaptured:function(t){var i,n;n=t,(i=r).getActivePointersListByType(m(n)).getById(n.pointerId)&&R(i,n),e.stopEvent(n)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),i.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){d(this),this.element=null,t[this.hash]=null,delete t[this.hash]},isTracking:function(){return t[this.hash].tracking},setTracking:function(i){return i?function(i){var n,r,o=t[i.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.addEvent(i.element,n,o[n],n===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});h(i),o.tracking=!0}}(this):d(this),this},getActivePointersListByType:function(i){var n,r,o=t[this.hash],s=o?o.activePointersLists.length:0;for(n=0;n<s;n++)if(o.activePointersLists[n].type===i)return o.activePointersLists[n];return r=new e.MouseTracker.GesturePointList(i),o&&o.activePointersLists.push(r),r},getActivePointerCount:function(){var e,i=t[this.hash],n=i.activePointersLists.length,r=0;for(e=0;e<n;e++)r+=i.activePointersLists[e].getLength();return r},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var i,n,r,o,s,a,l,c=function(){try{return window.self!==window.top}catch(e){return!0}}();function u(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}function h(e){var i,n,r,o,s,a=t[e.hash],l=a.activePointersLists.length;for(i=0;i<l;i++)if((r=a.activePointersLists[i]).getLength()>0){for(s=[],o=r.asArray(),n=0;n<o.length;n++)s.push(o[n]);for(n=0;n<s.length;n++)D(e,r,s[n])}for(i=0;i<l;i++)a.activePointersLists.pop();a.sentDragEvent=!1}function d(i){var n,r,o=t[i.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.removeEvent(i.element,n,o[n],!1);h(i),o.tracking=!1}}function p(e,i){var n=t[e.hash];if("pointerevent"===i)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("mouse"===i)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("touch"===i)return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function f(t,i){var n,r;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(r=t.getActivePointersListByType(i.type).getById(i.id))||!r.captured)return;try{t.element.releasePointerCapture(i.id)}catch(e){}}else t.element.releaseCapture();else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),c&&u(window.top)&&e.removeEvent(window.top,n.upName,n.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0);O(t,i,!1)}function g(t){return e.MouseTracker.havePointerEvents?t.pointerId:e.MouseTracker.mousePointerId}function m(t){return e.MouseTracker.havePointerEvents&&t.pointerType?t.pointerType:"mouse"}function _(t){return!e.MouseTracker.havePointerEvents||t.isPrimary}function v(t){return e.getMousePosition(t)}function y(e,t){return b(v(e),t)}function b(t,i){var n=e.getElementOffset(i);return t.minus(n)}function A(t,i){return new e.Point((t.x+i.x)/2,(t.y+i.y)/2)}function w(t,i){var n={target:i.target||i.srcElement,type:"wheel",shiftKey:i.shiftKey||!1,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX?i.pageX:i.clientX,pageY:i.pageY?i.pageY:i.clientY,deltaMode:"MozMousePixelScroll"===i.type?0:1,deltaX:0,deltaZ:0};"mousewheel"===e.MouseTracker.wheelEventName?n.deltaY=-i.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:n.deltaY=i.detail,x(t,n,i)}function x(t,i,n){var r,o,s=null;r=i.deltaY?i.deltaY<0?1:-1:0,L(t,o={originalEvent:i,eventType:"wheel",pointerType:"mouse",isEmulated:i!==n}),!t.scrollHandler||o.preventGesture||o.defaultPrevented||(s={eventSource:t,pointerType:"mouse",position:y(i,t.element),scroll:r,shift:i.shiftKey,isTouchEvent:!1,originalEvent:n,preventDefault:o.preventDefault||o.defaultPrevented,userData:t.userData},t.scrollHandler(s)),o.stopPropagation&&e.stopEvent(n),(s&&s.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(n)}function S(t,i){var n={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerenter",pointerType:n.type,isEmulated:!1};L(t,r),F(t,r,n)}function C(t,i){var n={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerleave",pointerType:n.type,isEmulated:!1};L(t,r),N(t,r,n)}function E(t,i){var n,r,o,s,a,l={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},c={originalEvent:i,eventType:"pointerover",pointerType:l.type,isEmulated:!1};L(t,c),r=c,o=l,(a=(s=(n=t).getActivePointersListByType(o.type)).getById(o.id))?o=a:(o.captured=!1,o.insideElementPressed=!1),n.overHandler&&n.overHandler({eventSource:n,pointerType:o.type,position:b(o.currentPos,n.element),buttons:s.buttons,pointers:n.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===o.type,originalEvent:r.originalEvent,userData:n.userData}),c.preventDefault&&!c.defaultPrevented&&e.cancelEvent(i),c.stopPropagation&&e.stopEvent(i)}function T(t,i){var n,r,o,s,a,l={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},c={originalEvent:i,eventType:"pointerout",pointerType:l.type,isEmulated:!1};L(t,c),r=c,o=l,(a=(s=(n=t).getActivePointersListByType(o.type)).getById(o.id))?o=a:(o.captured=!1,o.insideElementPressed=!1),n.outHandler&&n.outHandler({eventSource:n,pointerType:o.type,position:o.currentPos&&b(o.currentPos,n.element),buttons:s.buttons,pointers:n.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===o.type,originalEvent:r.originalEvent,userData:n.userData}),c.preventDefault&&!c.defaultPrevented&&e.cancelEvent(i),c.stopPropagation&&e.stopEvent(i)}function I(t,i){var n={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r=e.MouseTracker.havePointerEvents&&"touch"===n.type,o={originalEvent:i,eventType:"pointerdown",pointerType:n.type,isEmulated:!1};L(t,o),z(t,o,n,i.button),o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(i),o.stopPropagation&&e.stopEvent(i),o.shouldCapture&&(r?O(t,n,!0):function(t,i){var n;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{t.element.setPointerCapture(i.id)}catch(t){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else t.element.setCapture(!0);else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),c&&u(window.top)&&e.addEvent(window.top,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0);O(t,i,!0)}(t,n))}function M(e,t){k(e,t)}function k(t,i){var n,r={originalEvent:i,eventType:"pointerup",pointerType:(n={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()}).type,isEmulated:!1};L(t,r),U(t,r,n,i.button),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i),r.shouldReleaseCapture&&(i.target===t.element?f(t,n):O(t,n,!1))}function B(e,t){R(e,t)}function R(t,i){var n={id:g(i),type:m(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointermove",pointerType:n.type,isEmulated:!1};L(t,r),H(t,r,n),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i)}function P(e,t){return t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function D(t,i,n){var r,o=i.getById(n.id);return o?(o.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),f(t,o)),i.removeContact(),r=i.removeById(n.id)):r=i.getLength(),r}function L(t,i){i.eventSource=t,i.eventPhase=i.originalEvent&&void 0!==i.originalEvent.eventPhase?i.originalEvent.eventPhase:0,i.defaultPrevented=e.eventIsCanceled(i.originalEvent),i.shouldCapture=!1,i.shouldReleaseCapture=!1,i.userData=t.userData,function(e,t){switch(t.eventType){case"pointermove":case"pointerdown":case"pointerup":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"wheel":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasScrollHandler,t.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":t.isStoppable=!0,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"click":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.clickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"dblclick":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.dblClickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;default:t.isStoppable=!1,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1}}(t,i),t.preProcessEventHandler&&t.preProcessEventHandler(i)}function O(t,i,n){var r=t.getActivePointersListByType(i.type),o=r.getById(i.id);o?n&&!o.captured?(o.captured=!0,r.captureCount++):!n&&o.captured&&(o.captured=!1,r.captureCount--,r.captureCount<0&&(r.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function F(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))?(n.insideElement=!0,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime,i=n):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,P(r,i)),e.enterHandler&&e.enterHandler({eventSource:e,pointerType:i.type,position:b(i.currentPos,e.element),buttons:r.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==r.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData})}function N(e,t,i){var n,r,o=e.getActivePointersListByType(i.type);(n=o.getById(i.id))?(n.captured?(n.insideElement=!1,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime):D(e,o,n),i=n):(i.captured=!1,i.insideElementPressed=!1),(e.leaveHandler||e.exitHandler)&&(r={eventSource:e,pointerType:i.type,position:i.currentPos&&b(i.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==o.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData},e.leaveHandler&&e.leaveHandler(r),e.exitHandler&&e.exitHandler(r))}function z(i,n,r,o){var s,a=t[i.hash],l=i.getActivePointersListByType(r.type);if(void 0!==n.originalEvent.buttons?l.buttons=n.originalEvent.buttons:0===o?l.buttons|=1:1===o?l.buttons|=4:2===o?l.buttons|=2:3===o?l.buttons|=8:4===o?l.buttons|=16:5===o&&(l.buttons|=32),0!==o)return n.shouldCapture=!1,n.shouldReleaseCapture=!1,void(!i.nonPrimaryPressHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,i.nonPrimaryPressHandler({eventSource:i,pointerType:r.type,position:b(r.currentPos,i.element),button:o,buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData})));(s=l.getById(r.id))?(s.insideElementPressed=!0,s.insideElement=!0,s.originalTarget=n.originalEvent.target,s.contactPos=r.currentPos,s.contactTime=r.currentTime,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime,r=s):(r.captured=!1,r.insideElementPressed=!0,r.insideElement=!0,r.originalTarget=n.originalEvent.target,P(l,r)),l.addContact(),n.preventGesture||n.defaultPrevented?(n.shouldCapture=!1,n.shouldReleaseCapture=!1):(n.shouldCapture=!0,n.shouldReleaseCapture=!1,n.preventDefault=!0,(i.dragHandler||i.dragEndHandler||i.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(i,r),1===l.contacts?i.pressHandler&&!n.preventGesture&&i.pressHandler({eventSource:i,pointerType:r.type,position:b(r.contactPos,i.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData}):2===l.contacts&&i.pinchHandler&&"touch"===r.type&&(a.pinchGPoints=l.asArray(),a.lastPinchDist=a.currentPinchDist=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos),a.lastPinchCenter=a.currentPinchCenter=A(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos)))}function U(i,n,r,o){var s,a,l,c,u=t[i.hash],h=i.getActivePointersListByType(r.type),d=!1;if(void 0!==n.originalEvent.buttons?h.buttons=n.originalEvent.buttons:0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),n.shouldCapture=!1,0!==o)return n.shouldReleaseCapture=!1,void(!i.nonPrimaryReleaseHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,i.nonPrimaryReleaseHandler({eventSource:i,pointerType:r.type,position:b(r.currentPos,i.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData})));(l=h.getById(r.id))?(h.removeContact(),l.captured&&(d=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=r.currentPos,l.currentTime=r.currentTime,l.insideElement||D(i,h,l),s=l.currentPos,a=l.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,P(h,r),l=r),n.preventGesture||n.defaultPrevented||(d?(n.shouldReleaseCapture=!0,n.preventDefault=!0,(i.dragHandler||i.dragEndHandler||i.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(i,l),0===h.contacts?(i.releaseHandler&&s&&i.releaseHandler({eventSource:i,pointerType:l.type,position:b(s,i.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),i.dragEndHandler&&u.sentDragEvent&&i.dragEndHandler({eventSource:i,pointerType:l.type,position:b(l.currentPos,i.element),speed:l.speed,direction:l.direction,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),u.sentDragEvent=!1,(i.clickHandler||i.dblClickHandler)&&l.insideElement&&(c=a-l.contactTime<=i.clickTimeThreshold&&l.contactPos.distanceTo(s)<=i.clickDistThreshold,i.clickHandler&&i.clickHandler({eventSource:i,pointerType:l.type,position:b(l.currentPos,i.element),quick:c,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,originalTarget:l.originalTarget,userData:i.userData}),i.dblClickHandler&&c&&(h.clicks++,1===h.clicks?(u.lastClickPos=s,u.dblClickTimeOut=setTimeout((function(){h.clicks=0}),i.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(u.dblClickTimeOut),h.clicks=0,u.lastClickPos.distanceTo(s)<=i.dblClickDistThreshold&&i.dblClickHandler({eventSource:i,pointerType:l.type,position:b(l.currentPos,i.element),shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),u.lastClickPos=null)))):2===h.contacts&&i.pinchHandler&&"touch"===l.type&&(u.pinchGPoints=h.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=A(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos))):(n.shouldReleaseCapture=!1,i.releaseHandler&&s&&(i.releaseHandler({eventSource:i,pointerType:l.type,position:b(s,i.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),n.preventDefault=!0)))}function H(e,i,n){var r,o,s,a=t[e.hash],l=e.getActivePointersListByType(n.type);void 0!==i.originalEvent.buttons&&(l.buttons=i.originalEvent.buttons),(r=l.getById(n.id))&&(r.lastPos=r.currentPos,r.lastTime=r.currentTime,r.currentPos=n.currentPos,r.currentTime=n.currentTime,i.shouldCapture=!1,i.shouldReleaseCapture=!1,e.stopHandler&&"mouse"===n.type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout((function(){var t,r,o;t=e,r=i.originalEvent,o=n.type,t.stopHandler&&t.stopHandler({eventSource:t,pointerType:o,position:y(r,t.element),buttons:t.getActivePointersListByType(o).buttons,isTouchEvent:"touch"===o,originalEvent:r,userData:t.userData})}),e.stopDelay)),0===l.contacts?e.moveHandler&&e.moveHandler({eventSource:e,pointerType:n.type,position:b(n.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===n.type,originalEvent:i.originalEvent,userData:e.userData}):1===l.contacts?(e.moveHandler&&(r=l.asArray()[0],e.moveHandler({eventSource:e,pointerType:r.type,position:b(r.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:e.userData})),!e.dragHandler||i.preventGesture||i.defaultPrevented||(s=(r=l.asArray()[0]).currentPos.minus(r.lastPos),e.dragHandler({eventSource:e,pointerType:r.type,position:b(r.currentPos,e.element),buttons:l.buttons,delta:s,speed:r.speed,direction:r.direction,shift:i.originalEvent.shiftKey,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:e.userData}),i.preventDefault=!0,a.sentDragEvent=!0)):2===l.contacts&&(e.moveHandler&&(o=l.asArray(),e.moveHandler({eventSource:e,pointerType:o[0].type,position:b(A(o[0].currentPos,o[1].currentPos),e.element),buttons:l.buttons,isTouchEvent:"touch"===o[0].type,originalEvent:i.originalEvent,userData:e.userData})),!e.pinchHandler||"touch"!==n.type||i.preventGesture||i.defaultPrevented||(s=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos))!==a.currentPinchDist&&(a.lastPinchDist=a.currentPinchDist,a.currentPinchDist=s,a.lastPinchCenter=a.currentPinchCenter,a.currentPinchCenter=A(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos),e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:a.pinchGPoints,lastCenter:b(a.lastPinchCenter,e.element),center:b(a.currentPinchCenter,e.element),lastDistance:a.lastPinchDist,distance:a.currentPinchDist,shift:i.originalEvent.shiftKey,originalEvent:i.originalEvent,userData:e.userData}),i.preventDefault=!0)))}function V(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))&&D(e,r,n)}e.MouseTracker.gesturePointVelocityTracker=(i=[],n=0,r=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},s=function(){var t,n,o,s,a,l,c=i.length,u=e.now();for(s=u-r,r=u,t=0;t<c;t++)(o=(n=i[t]).gPoint).direction=Math.atan2(o.currentPos.y-n.lastPos.y,o.currentPos.x-n.lastPos.x),a=n.lastPos.distanceTo(o.currentPos),n.lastPos=o.currentPos,l=1e3*a/(s+1),o.speed=.75*l+.25*o.speed},{addPoint:function(t,a){var l=o(t,a);i.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===i.length&&(r=e.now(),n=window.setInterval(s,50))},removePoint:function(e,t){var r,s=o(e,t),a=i.length;for(r=0;r<a;r++)if(i[r].guid===s){i.splice(r,1),0==--a&&window.clearInterval(n);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=(a=document.createElement("div"),e.isFunction(a.setPointerCapture)&&e.isFunction(a.releasePointerCapture)),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=(l=document.createElement("div"),e.isFunction(l.setCapture)&&e.isFunction(l.releaseCapture)),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(t),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,i,n){var r=t.parentNode;"number"==typeof i&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=void 0===i.attachToViewer||i.attachToViewer,this.autoFade=void 0===i.autoFade||i.autoFade,this.element=t,this.anchor=i.anchor,this.container=n,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof i.top?i.top+"px":i.top,this.wrapper.style.left="number"==typeof i.left?i.left+"px":i.left,this.wrapper.style.height="number"==typeof i.height?i.height+"px":i.height,this.wrapper.style.width="number"==typeof i.width?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){e.setElementOpacity(this.wrapper,t,!0)}}}(t),function(e){function t(e,t){var i,n=e.controls;for(i=n.length-1;i>=0;i--)if(n[i].element===t)return i;return-1}e.ControlDock=function(t){var i,n,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),"static"===e.getElementStyle(this.element).position&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),n=0;n<r.length;n++)i=r[n],this.controls[i]=e.makeNeutralElement("div"),this.controls[i].style.position="absolute",i.match("left")&&(this.controls[i].style.left="0px"),i.match("right")&&(this.controls[i].style.right="0px"),i.match("top")&&(this.controls[i].style.top="0px"),i.match("bottom")&&(this.controls[i].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(i,n){var r=null;if(!(t(this,i=e.getElement(i))>=0)){switch(n.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:default:case e.ControlAnchor.NONE:r=this.container,i.style.margin="0px",i.style.padding="0px"}this.controls.push(new e.Control(i,n,r)),i.style.display="inline-block"}},removeControl:function(i){var n=t(this,i=e.getElement(i));return n>=0&&(this.controls[n].destroy(),this.controls.splice(n,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(t),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(t),function(e){var i={},n=1;function r(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function o(t,i){if(i instanceof e.Overlay)return i;var n=null;if(i.element)n=e.getElement(i.element);else{var r=i.id?i.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(n=e.getElement(i.id))||((n=document.createElement("a")).href="#/overlay/"+r),n.id=r,e.addClass(n,i.className?i.className:"openseadragon-overlay")}var o=i.location,s=i.width,a=i.height;if(!o){var l=i.x,c=i.y;if(void 0!==i.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(i.px,i.py,s||0,a||0));l=u.x,c=u.y,s=void 0!==s?u.width:void 0,a=void 0!==a?u.height:void 0}o=new e.Point(l,c)}var h=i.placement;return h&&"string"===e.type(h)&&(h=e.Placement[i.placement.toUpperCase()]),new e.Overlay({element:n,location:o,placement:h,onDraw:i.onDraw,checkResize:i.checkResize,width:s,height:a,rotationMode:i.rotationMode})}function s(e,t){var i;for(i=e.length-1;i>=0;i--)if(e[i].element===t)return i;return-1}function a(t,i){return e.requestAnimationFrame((function(){i(t)}))}function l(t){e.requestAnimationFrame((function(){!function(t){var i,n;if(t.controlsShouldFade){for(i=1-(e.now()-t.controlsFadeBeginTime)/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),n=t.controls.length-1;n>=0;n--)t.controls[n].autoFade&&t.controls[n].setOpacity(i);i>0&&l(t)}}(t)}))}function c(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){l(t)}),t.controlsFadeDelay))}function u(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function h(){u(this)}function d(){c(this)}function p(e){var t={tracker:e.eventSource,position:e.position,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.raiseEvent("canvas-contextmenu",t),e.preventDefault=t.preventDefault}function f(t){var i={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",i),i.preventDefaultAction||t.ctrl||t.alt||t.meta)t.preventDefault=!1;else switch(t.keyCode){case 38:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 40:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 37:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 39:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 87:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 83:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 65:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 68:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 82:t.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),t.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:t.preventDefault=!1}}function g(e){var t={originalEvent:e.originalEvent};this.raiseEvent("canvas-key-press",t)}function m(t){var n;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x);var r={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,originalTarget:t.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",r),!r.preventDefaultAction&&this.viewport&&t.quick&&(!0===(n=this.gestureSettingsByDeviceType(t.pointerType)).clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),n.dblClickDragToZoom&&(!0===i[this.hash].draggingToZoom?(i[this.hash].lastClickTime=null,i[this.hash].draggingToZoom=!1):i[this.hash].lastClickTime=e.now()))}function _(e){var t,i={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",i),!i.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function v(e){var t,n={tracker:e.eventSource,pointerType:e.pointerType,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",n),t=this.gestureSettingsByDeviceType(e.pointerType),!n.preventDefaultAction&&this.viewport)if(t.dblClickDragToZoom&&i[this.hash].draggingToZoom){var r=Math.pow(this.zoomPerDblClickDrag,e.delta.y/50);this.viewport.zoomBy(r)}else if(t.dragToPan&&!i[this.hash].draggingToZoom){if(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var o=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=o.x,this.viewport.centerSpringY.target.value+=o.y;var s=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=o.x,this.viewport.centerSpringY.target.value-=o.y,s.xConstrained&&(e.delta.x=0),s.yConstrained&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function y(t){var n,r={tracker:t.eventSource,pointerType:t.pointerType,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",r),n=this.gestureSettingsByDeviceType(t.pointerType),!r.preventDefaultAction&&this.viewport){if(!i[this.hash].draggingToZoom&&n.dragToPan&&n.flickEnabled&&t.speed>=n.flickMinSpeed){var o=0;this.panHorizontal&&(o=n.flickMomentum*t.speed*Math.cos(t.direction));var s=0;this.panVertical&&(s=n.flickMomentum*t.speed*Math.sin(t.direction));var a=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),l=this.viewport.pointFromPixel(new e.Point(a.x-o,a.y-s));this.viewport.panTo(l,!1)}this.viewport.applyConstraints()}n.dblClickDragToZoom&&!0===i[this.hash].draggingToZoom&&(i[this.hash].draggingToZoom=!1)}function b(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function A(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(t){if(this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent}),this.gestureSettingsByDeviceType(t.pointerType).dblClickDragToZoom){var n=i[this.hash].lastClickTime,r=e.now();if(null===n)return;r-n<this.dblClickTimeThreshold&&(i[this.hash].draggingToZoom=!0),i[this.hash].lastClickTime=null}}function x(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function C(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){var t,i,n,r={tracker:e.eventSource,pointerType:e.pointerType,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",r),this.viewport&&(!(t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom||r.preventDefaultPanAction&&r.preventDefaultZoomAction||(i=this.viewport.pointFromPixel(e.center,!0),t.zoomToRefPoint&&!r.preventDefaultPanAction&&(n=this.viewport.pointFromPixel(e.lastCenter,!0).minus(i),this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.panBy(n,!0)),r.preventDefaultZoomAction||this.viewport.zoomBy(e.distance/e.lastDistance,i,!0),this.viewport.applyConstraints()),t.pinchRotate&&!r.preventDefaultRotateAction)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),s=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);i=this.viewport.pointFromPixel(e.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(o-s)*(180/Math.PI),i,!0)}}function T(e){this.raiseEvent("canvas-focus",{tracker:e.eventSource,originalEvent:e.originalEvent})}function I(e){this.raiseEvent("canvas-blur",{tracker:e.eventSource,originalEvent:e.originalEvent})}function M(t){var i,n,r,o;(o=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=o,i={tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",i),!i.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),t.preventDefault=i.preventDefault):t.preventDefault=!0}function k(e){i[this.hash].mouseInside=!0,u(this),this.raiseEvent("container-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function B(e){e.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||c(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function R(t){!function(t){if(!t._opening&&i[t.hash]){if(t.autoResize||i[t.hash].forceResize){var n;if(t._autoResizePolling){n=r(t.container);var o=i[t.hash].prevContainerSize;n.equals(o)||(i[t.hash].needsResize=!0)}i[t.hash].needsResize&&function(t,n){var r,o=t.viewport,s=o.getZoom(),a=o.getCenter();if(o.resize(n,t.preserveImageSizeOnResize),o.panTo(a,!0),t.preserveImageSizeOnResize)r=i[t.hash].prevContainerSize.x/n.x;else{var l=new e.Point(0,0),c=new e.Point(i[t.hash].prevContainerSize.x,i[t.hash].prevContainerSize.y).distanceTo(l);r=new e.Point(n.x,n.y).distanceTo(l)/c*i[t.hash].prevContainerSize.x/n.x}o.zoomTo(s*r,null,!0),i[t.hash].prevContainerSize=n,i[t.hash].forceRedraw=!0,i[t.hash].needsResize=!1,i[t.hash].forceResize=!1}(t,n||r(t.container))}var s=t.viewport.update(),a=t.world.update(s)||s;s&&t.raiseEvent("viewport-change"),t.referenceStrip&&(a=t.referenceStrip.update(t.viewport)||a);var l=i[t.hash].animating;!l&&a&&(t.raiseEvent("animation-start"),u(t));var h,d=l&&!a;d&&(i[t.hash].animating=!1),(a||d||i[t.hash].forceRedraw||t.world.needsDraw())&&((h=t).imageLoader.clear(),h.world.draw(),h.raiseEvent("update-viewport",{}),t._drawOverlays(),t.navigator&&t.navigator.update(t.viewport),i[t.hash].forceRedraw=!1,a&&t.raiseEvent("animation")),d&&(t.raiseEvent("animation-finish"),i[t.hash].mouseInside||c(t)),i[t.hash].animating=a}}(t),t.isOpen()?t._updateRequestId=a(t,R):t._updateRequestId=!1}function P(e,t){return e?e+t:t}function D(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,F(this)}function L(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,F(this)}function O(){i[this.hash].zooming=!1}function F(t){e.requestAnimationFrame(e.delegate(t,N))}function N(){var t,n,r;i[this.hash].zooming&&this.viewport&&(n=(t=e.now())-i[this.hash].lastZoomTime,r=Math.pow(i[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=t,F(this))}function z(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function U(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function H(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function V(){this.viewport&&this.viewport.goHome()}function $(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function G(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e+=this.rotationIncrement:e-=this.rotationIncrement,this.viewport.setRotation(e)}}function Q(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e-=this.rotationIncrement:e+=this.rotationIncrement,this.viewport.setRotation(e)}}function j(){this.viewport.toggleFlip()}e.Viewer=function(t){var o,s,l,u=arguments,h=this;if(e.isPlainObject(t)||(t={id:u[0],xmlPath:u.length>1?u[1]:void 0,prefixUrl:u.length>2?u[2]:void 0,controls:u.length>3?u[3]:void 0,overlays:u.length>4?u[4]:void 0}),t.config&&(e.extend(!0,t,t.config),delete t.config),t.drawerOptions=Object.assign({},["useCanvas"].reduce(((e,i)=>(e[i]=t[i],delete t[i],e)),{}),t.drawerOptions),e.extend(!0,this,{id:t.id,hash:t.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,t),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");void 0!==i[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var i=e.getString("Errors.OpenFailed",t.eventSource,t.message);h._showMessage(i)})),e.ControlDock.call(this,t),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(s=this.canvas.style).width="100%",s.height="100%",s.overflow="hidden",s.position="absolute",s.top="0px",s.left="0px",e.setElementTouchActionNone(this.canvas),""!==t.tabIndex&&(this.canvas.tabIndex=void 0===t.tabIndex?0:t.tabIndex),this.container.className="openseadragon-container",(l=this.container.style).width="100%",l.height="100%",l.position="relative",l.overflow="hidden",l.left="0px",l.top="0px",l.textAlign="left",e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,p),keyDownHandler:e.delegate(this,f),keyHandler:e.delegate(this,g),clickHandler:e.delegate(this,m),dblClickHandler:e.delegate(this,_),dragHandler:e.delegate(this,v),dragEndHandler:e.delegate(this,y),enterHandler:e.delegate(this,b),leaveHandler:e.delegate(this,A),pressHandler:e.delegate(this,w),releaseHandler:e.delegate(this,x),nonPrimaryPressHandler:e.delegate(this,S),nonPrimaryReleaseHandler:e.delegate(this,C),scrollHandler:e.delegate(this,M),pinchHandler:e.delegate(this,E),focusHandler:e.delegate(this,T),blurHandler:e.delegate(this,I)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,k),leaveHandler:e.delegate(this,B)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=r(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver((function(){i[h.hash].needsResize=!0})),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){h.source=h.world.getItemAt(0).source,i[h.hash].forceRedraw=!0,h._updateRequestId||(h._updateRequestId=a(h,R))})),this.world.addHandler("remove-item",(function(e){h.world.getItemCount()?h.source=h.world.getItemAt(0).source:h.source=null,i[h.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){h.viewport&&h.viewport._setContentBounds(h.world.getHomeBounds(),h.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){h.source=h.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:t.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(e.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=e.HTMLDrawer),delete this.drawerOptions.useCanvas);let d=Array.isArray(this.drawer)?this.drawer:[this.drawer];0===d.length&&(d=[e.DEFAULT_SETTINGS.drawer].flat(),e.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const e of d)if(this.requestDrawer(e,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw e.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(o=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(o=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),o=0;o<this.customControls.length;o++)this.addControl(this.customControls[o].id,{anchor:this.customControls[o].anchor});e.requestAnimationFrame((function(){c(h)})),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(t,i){var n=this;if(this.close(),!t)return this;if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===i||isNaN(i)||(this.initialPage=i),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(t)||(t=[t]),!t.length)return this;this._opening=!0;for(var r,s=t.length,a=0,l=0,c=function(){if(a+l===s)if(a){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var i=0;i<n.overlays.length;i++)n.currentOverlays[i]=o(n,n.overlays[i]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(a++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)n.addOverlay(t.tileSource.overlays[r]);i&&i(e),c()};var o=t.error;t.error=function(e){l++,r||(r=e),o&&o(e),c()},n.addTiledImage(t)},h=0;h<t.length;h++)u(t[h]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(t,i){const n=(i=e.extend(!0,{mainDrawer:!0,redrawImmediately:!0,drawerOptions:null},i)).mainDrawer,r=i.redrawImmediately,o=i.drawerOptions,s=this.drawer;let a=null;if(t&&t.prototype instanceof e.DrawerBase?(a=t,t="custom"):"string"==typeof t&&(a=e.determineDrawer(t)),a||e.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),a&&a.isSupported()){s&&n&&s.destroy();const e=new a({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:o||this.drawerOptions[t]});return n&&(this.drawer=e,r&&this.forceRedraw()),e}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?u(this):c(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},setAjaxHeaders:function(t,i){if(null===t&&(t={}),e.isPlainObject(t)){if(void 0===i&&(i=!0),this.ajaxHeaders=t,i){for(var n=0;n<this.world.getItemCount();n++)this.world.getItemAt(n)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var r in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[r].setAjaxHeaders(this.ajaxHeaders,!0)}}else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},addButton:function(e){this.buttonGroup.addButton(e)},isFullPage:function(){return i[this.hash]&&i[this.hash].fullPage},setFullPage:function(t){var n,r,o=document.body,s=o.style,a=document.documentElement.style,l=this;if(t===this.isFullPage())return this;var c={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",c),c.preventDefaultAction)return this;if(t&&this.element){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=a.margin,s.margin="0",a.margin="0",this.bodyPadding=s.padding,this.docPadding=a.padding,s.padding="0",a.padding="0",this.bodyWidth=s.width,this.docWidth=a.width,s.width="100%",a.width="100%",this.bodyHeight=s.height,this.docHeight=a.height,s.height="100%",a.height="100%",this.bodyDisplay=s.display,s.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,n=o.childNodes.length,r=0;r<n;r++)this.previousBody.push(o.childNodes[0]),o.removeChild(o.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,o.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),o.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,k)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,a.margin=this.docMargin,s.padding=this.bodyPadding,a.padding=this.docPadding,s.width=this.bodyWidth,a.width=this.docWidth,s.height=this.bodyHeight,a.height=this.docHeight,s.display=this.bodyDisplay,o.removeChild(this.element),n=this.previousBody.length,r=0;r<n;r++)o.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(o.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var u=0,h=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++u<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(h)};e.requestAnimationFrame(h),i[this.hash].fullPage=!1,e.delegate(this,B)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var i=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),i.setFullPage(!1),i.isFullPage()&&(i.element.style.width=i.fullPageStyleWidth,i.element.style.height=i.fullPageStyleHeight)),i.navigator&&i.viewport&&setTimeout((function(){i.navigator.update(i.viewport)})),i.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var i=this;t.replace&&(t.replaceItem=i.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(t.ajaxHeaders)||(t.ajaxHeaders={});var n={options:t};function r(e){for(var r=0;r<i._loadQueue.length;r++)if(i._loadQueue[r]===n){i._loadQueue.splice(r,1);break}0===i._loadQueue.length&&o(n),i.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){i.collectionMode&&(i.world.arrange({immediately:e.options.collectionImmediately,rows:i.collectionRows,columns:i.collectionColumns,layout:i.collectionLayout,tileSize:i.collectionTileSize,tileMargin:i.collectionTileMargin}),i.world.setAutoRefigureSizes(!0))}function s(){for(var t,n,r;i._loadQueue.length&&(t=i._loadQueue[0]).tileSource;){if(i._loadQueue.splice(0,1),t.options.replace){var s=i.world.getIndexOfItem(t.options.replaceItem);-1!==s&&(t.options.index=s),i.world.removeItem(t.options.replaceItem)}n=new e.TiledImage({viewer:i,source:t.tileSource,viewport:i.viewport,drawer:i.drawer,tileCache:i.tileCache,imageLoader:i.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,flipped:t.options.flipped,compositeOperation:t.options.compositeOperation,springStiffness:i.springStiffness,animationTime:i.animationTime,minZoomImageRatio:i.minZoomImageRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,maxTilesPerFrame:i.maxTilesPerFrame,immediateRender:i.immediateRender,blendTime:i.blendTime,alwaysBlend:i.alwaysBlend,minPixelRatio:i.minPixelRatio,smoothTileEdgesMinZoom:i.smoothTileEdgesMinZoom,iOSDevice:i.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:i.debugMode,subPixelRoundingForTransparency:i.subPixelRoundingForTransparency}),i.collectionMode&&i.world.setAutoRefigureSizes(!1),i.navigator&&(r=e.extend({},t.options,{replace:!1,originalTiledImage:n,tileSource:t.tileSource}),i.navigator.addTiledImage(r)),i.world.addItem(n,{index:t.options.index}),0===i._loadQueue.length&&o(t),1!==i.world.getItemCount()||i.preserveViewport||i.viewport.goHome(!0),t.options.success&&t.options.success({item:n})}}e.isArray(t.tileSource)?setTimeout((function(){r({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(n),function(t,i,n,r,o){var s=t;if("string"===e.type(i))if(i.match(/^\s*<.*>\s*$/))i=e.parseXml(i);else if(i.match(/^\s*[{[].*[}\]]\s*$/))try{var a=e.parseJSON(i);i=a}catch(e){}function l(e,t){e.ready?r(e):(e.addHandler("ready",(function(){r(e)})),e.addHandler("open-failed",(function(e){o({message:e.message,source:t})})))}setTimeout((function(){if("string"===e.type(i))(i=new e.TileSource({url:i,crossOriginPolicy:void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:n.ajaxHeaders?n.ajaxHeaders:t.ajaxHeaders,splitHashDataForPost:t.splitHashDataForPost,success:function(e){r(e.tileSource)}})).addHandler("open-failed",(function(e){o(e)}));else if(e.isPlainObject(i)||i.nodeType)if(void 0!==i.crossOriginPolicy||void 0===n.crossOriginPolicy&&void 0===t.crossOriginPolicy||(i.crossOriginPolicy=void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy),void 0===i.ajaxWithCredentials&&(i.ajaxWithCredentials=t.ajaxWithCredentials),e.isFunction(i.getTileUrl)){var a=new e.TileSource(i);a.getTileUrl=i.getTileUrl,r(a)}else{var c=e.TileSource.determineType(s,i);if(!c)return void o({message:"Unable to load TileSource",source:i});var u=c.prototype.configure.apply(s,[i]);l(new c(u),i)}else l(i,i)}))}(this,t.tileSource,t,(function(e){n.tileSource=e,s()}),(function(e){e.options=t,r(e),s()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var i=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete i.url,this.addTiledImage(i)},addLayer:function(t){var i=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var n=e.extend({},t,{success:function(e){i.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){i.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(n),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,i){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,i)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},forceResize:function(){i[this.hash].needsResize=!0,i[this.hash].forceResize=!0},bindSequenceControls:function(){var t=e.delegate(this,h),i=e.delegate(this,d),n=e.delegate(this,this.goToNextPage),r=e.delegate(this,this.goToPreviousPage),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:P(this.prefixUrl,o.previous.REST),srcGroup:P(this.prefixUrl,o.previous.GROUP),srcHover:P(this.prefixUrl,o.previous.HOVER),srcDown:P(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:i}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:P(this.prefixUrl,o.next.REST),srcGroup:P(this.prefixUrl,o.next.GROUP),srcHover:P(this.prefixUrl,o.next.HOVER),srcDown:P(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:t,onBlur:i}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,D),i=e.delegate(this,O),n=e.delegate(this,z),r=e.delegate(this,L),o=e.delegate(this,U),s=e.delegate(this,V),a=e.delegate(this,$),l=e.delegate(this,G),c=e.delegate(this,Q),u=e.delegate(this,j),p=e.delegate(this,h),f=e.delegate(this,d),g=this.navImages,m=[],_=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(_=!1),this.showZoomControl&&(m.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:P(this.prefixUrl,g.zoomIn.REST),srcGroup:P(this.prefixUrl,g.zoomIn.GROUP),srcHover:P(this.prefixUrl,g.zoomIn.HOVER),srcDown:P(this.prefixUrl,g.zoomIn.DOWN),onPress:t,onRelease:i,onClick:n,onEnter:t,onExit:i,onFocus:p,onBlur:f})),m.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:P(this.prefixUrl,g.zoomOut.REST),srcGroup:P(this.prefixUrl,g.zoomOut.GROUP),srcHover:P(this.prefixUrl,g.zoomOut.HOVER),srcDown:P(this.prefixUrl,g.zoomOut.DOWN),onPress:r,onRelease:i,onClick:o,onEnter:r,onExit:i,onFocus:p,onBlur:f}))),this.showHomeControl&&m.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:P(this.prefixUrl,g.home.REST),srcGroup:P(this.prefixUrl,g.home.GROUP),srcHover:P(this.prefixUrl,g.home.HOVER),srcDown:P(this.prefixUrl,g.home.DOWN),onRelease:s,onFocus:p,onBlur:f})),this.showFullPageControl&&m.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:P(this.prefixUrl,g.fullpage.REST),srcGroup:P(this.prefixUrl,g.fullpage.GROUP),srcHover:P(this.prefixUrl,g.fullpage.HOVER),srcDown:P(this.prefixUrl,g.fullpage.DOWN),onRelease:a,onFocus:p,onBlur:f})),this.showRotationControl&&(m.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:P(this.prefixUrl,g.rotateleft.REST),srcGroup:P(this.prefixUrl,g.rotateleft.GROUP),srcHover:P(this.prefixUrl,g.rotateleft.HOVER),srcDown:P(this.prefixUrl,g.rotateleft.DOWN),onRelease:l,onFocus:p,onBlur:f})),m.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:P(this.prefixUrl,g.rotateright.REST),srcGroup:P(this.prefixUrl,g.rotateright.GROUP),srcHover:P(this.prefixUrl,g.rotateright.HOVER),srcDown:P(this.prefixUrl,g.rotateright.DOWN),onRelease:c,onFocus:p,onBlur:f}))),this.showFlipControl&&m.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:P(this.prefixUrl,g.flip.REST),srcGroup:P(this.prefixUrl,g.flip.GROUP),srcHover:P(this.prefixUrl,g.flip.HOVER),srcDown:P(this.prefixUrl,g.flip.DOWN),onRelease:u,onFocus:p,onBlur:f})),_?(this.buttonGroup=new e.ButtonGroup({buttons:m,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,H)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=m),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,i,n,r){var a;if(a=e.isPlainObject(t)?t:{element:t,location:i,placement:n,onDraw:r},t=e.getElement(a.element),s(this.currentOverlays,t)>=0)return this;var l=o(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(t,n,r){var o;return t=e.getElement(t),(o=s(this.currentOverlays,t))>=0&&(this.currentOverlays[o].update(n,r),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:n,placement:r})),this},removeOverlay:function(t){var n;return t=e.getElement(t),(n=s(this.currentOverlays,t))>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var i;return t=e.getElement(t),(i=s(this.currentOverlays,t))>=0?this.currentOverlays[i]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var i=e.makeNeutralElement("div");i.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(i),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var t=e.pixelDensityRatio,i=e.getCurrentPixelDensityRatio();t!==i&&(e.pixelDensityRatio=i,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)},goToNextPage:function(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)},isAnimating:function(){return i[this.hash].animating}}),e.determineDrawer=function(i){for(let n in t){const r=t[n],o=r.prototype;if(o&&o instanceof t.DrawerBase&&e.isFunction(o.getType)&&o.getType.call(r)===i)return r}return null}}(t),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var i=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(i.x=this.viewer.viewport.getCenter(!0).x):i.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(i),this.viewer.viewport.applyConstraints()}}function i(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function n(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){var t={tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.viewer.raiseEvent("navigator-scroll",t),e.preventDefault=t.preventDefault}function o(e,t){s(e,"rotate("+t+"deg)")}function s(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(s){var a,l,c,u,h,d,p=s.viewer,f=this;function g(e,t){o(f.displayRegionContainer,e),o(f.displayRegion,-e),f.viewport.setRotation(e,t)}s.element||s.id?(s.element?(s.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),s.element.id?s.id=s.element.id:s.id="navigator-"+e.now(),this.element=s.element):this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",(s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:s.animationTime,autoResize:!1,minZoomImageRatio:1,background:s.background,opacity:s.opacity,borderColor:s.borderColor,displayRegionColor:s.displayRegionColor})).minPixelRatio=this.minPixelRatio=p.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!==e.ControlAnchor.NONE&&(c=this.element.style,u=this.borderWidth,c.margin="0px",c.border=u+"px solid "+s.borderColor,c.padding="0px",c.background=s.background,c.opacity=s.opacity,c.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",h=this.displayRegion.style,d=this.borderWidth,h.position="relative",h.top="0px",h.left="0px",h.fontSize="0px",h.overflow="hidden",h.border=d+"px solid "+s.displayRegionColor,h.margin="0px",h.padding="0px",h.background="transparent",h.float="left",h.cssFloat="left",h.zIndex=999999999,h.cursor="default",h.boxSizing="content-box",e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),p.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!==e.ControlAnchor.NONE,s.width&&s.height?(this.setWidth(s.width),this.setHeight(s.height)):this._resizeWithViewer&&(a=e.getElementSize(p.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a,l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate&&(g(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0,!0),s.viewer.addHandler("rotate",(function(e){g(e.degrees,e.immediately)}))),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,i),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",(function(){f.viewport&&f.viewport.goHome(!0)})),p.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=f.world.getItemAt(e.previousIndex);f.world.setItemIndex(t,e.newIndex)}),1)})),p.world.addHandler("remove-item",(function(e){var t=e.item,i=f._getMatchingItem(t);i&&f.world.removeItem(i)})),this.update(p.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){s(this.displayRegion,e),s(this.canvas,e),s(this.element,e)},update:function(t){var i,n,r,s,a,l;if(t||(t=this.viewer.viewport),i=e.getElementSize(this.viewer.element),this._resizeWithViewer&&i.x&&i.y&&!i.equals(this.oldViewerSize)&&(this.oldViewerSize=i,this.maintainSizeRatio||!this.elementArea?(n=i.x*this.sizeRatio,r=i.y*this.sizeRatio):(n=Math.sqrt(this.elementArea*(i.x/i.y)),r=this.elementArea/n),this.element.style.width=Math.round(n)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=n*r),this.updateSize()),t&&this.viewport){if(s=t.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(s.getTopLeft(),!1),l=this.viewport.pixelFromPointNoRotate(s.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var c=t.getRotation(!0);o(this.displayRegion,-c)}var u=this.displayRegion.style;u.display=this.world.getItemCount()?"block":"none",u.top=a.y.toFixed(2)+"px",u.left=a.x.toFixed(2)+"px";var h=l.x-a.x,d=l.y-a.y;u.width=Math.round(Math.max(h,0))+"px",u.height=Math.round(Math.max(d,0))+"px"}},addTiledImage:function(t){var i=this,n=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;function r(){i._matchBounds(t,n)}t._originalForNavigator=n,i._matchBounds(t,n,!0),i._matchOpacity(t,n),i._matchCompositeOperation(t,n),n.addHandler("bounds-change",r),n.addHandler("clip-change",r),n.addHandler("opacity-change",(function(){i._matchOpacity(t,n)})),n.addHandler("composite-operation-change",(function(){i._matchCompositeOperation(t,n)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(e){for(var t,i=this.world.getItemCount(),n=0;n<i;n++)if((t=this.world.getItemAt(n))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,i){var n=t.getBoundsNoRotate();e.setPosition(n.getTopLeft(),i),e.setWidth(n.width,i),e.setRotation(t.getRotation(),i),e.setClip(t.getClip()),e.setFlip(t.getFlip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(t),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(i){var n,r=i.split("."),o=null,s=arguments,a=t;for(n=0;n<r.length-1;n++)a=a[r[n]]||{};return"string"!=typeof(o=a[r[n]])&&(e.console.error("Untranslated source string:",i),o=""),o.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""}))},setString:function(e,i){var n,r=e.split("."),o=t;for(n=0;n<r.length-1;n++)o[r[n]]||(o[r[n]]={}),o=o[r[n]];o[r[n]]=i}})}(t),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,i){var n,r;if(i=i||new e.Point(0,0),t%90==0)switch(e.positiveModulo(t,360)){case 0:n=1,r=0;break;case 90:n=0,r=1;break;case 180:n=-1,r=0;break;case 270:n=0,r=-1}else{var o=t*Math.PI/180;n=Math.cos(o),r=Math.sin(o)}var s=n*(this.x-i.x)-r*(this.y-i.y)+i.x,a=r*(this.x-i.x)+n*(this.y-i.y)+i.y;return new e.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(t),function(e){e.TileSource=function(t,i,n,r,o,s){var a,l,c=this,u=arguments;if(a=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",(function(e){c.success(e)})),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},setMaxLevel:function(e){this.maxLevel=e,this._memoizeLevelScale()},getLevelScale:function(e){return this._memoizeLevelScale(),this.getLevelScale(e)},_memoizeLevelScale:function(){var e,t={};for(e=0;e<=this.maxLevel;e++)t[e]=1/Math.pow(2,this.maxLevel-e);this.getLevelScale=function(e){return t[e]}},getNumTiles:function(t){var i=this.getLevelScale(t),n=Math.ceil(i*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(i*this.dimensions.y/this.getTileHeight(t));return new e.Point(n,r)},getPixelRatio:function(t){var i=this.dimensions.times(this.getLevelScale(t)),n=1/i.x*e.pixelDensityRatio,r=1/i.y*e.pixelDensityRatio;return new e.Point(n,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,i){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),o=i.x*r,s=i.y*r,a=Math.floor(o/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));return i.x>=1&&(a=this.getNumTiles(t).x-1),i.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)},getTileBounds:function(t,i,n,r){var o=this.dimensions.times(this.getLevelScale(t)),s=this.getTileWidth(t),a=this.getTileHeight(t),l=0===i?0:s*i-this.tileOverlap,c=0===n?0:a*n-this.tileOverlap,u=s+(0===i?1:2)*this.tileOverlap,h=a+(0===n?1:2)*this.tileOverlap,d=1/o.x;return u=Math.min(u,o.x-l),h=Math.min(h,o.y-c),r?new e.Rect(0,0,u,h):new e.Rect(l*d,c*d,u*d,h*d)},getImageInfo:function(t){var i,n,r,o,s,a,l,c=this;t&&(l=(a=(s=t.split("/"))[s.length-1]).lastIndexOf("."))>-1&&(s[s.length-1]=a.slice(0,l));var u=null;if(this.splitHashDataForPost){var h=t.indexOf("#");-1!==h&&(u=t.substring(h+1),t=t.substr(0,h))}n=function(i){"string"==typeof i&&(i=e.parseXml(i));var n=e.TileSource.determineType(c,i,t);n?(void 0===(o=n.prototype.configure.apply(c,[i,t,u])).ajaxWithCredentials&&(o.ajaxWithCredentials=c.ajaxWithCredentials),r=new n(o),c.ready=!0,c.raiseEvent("ready",{tileSource:r})):c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(i=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:i,callback:n})):e.makeAjaxRequest({url:t,postData:u,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var i=function(t){var i,n,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw i=404===(o=t.status)?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,i));if(r.match(/^\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(e){n=t.responseText}else if(r.match(/\s*[{[].*/))try{n=e.parseJSON(r)}catch(e){n=r}else n=r;return n}(t);n(i)},error:function(i,n){var r;try{r="HTTP "+i.status+" attempting to load TileSource: "+t}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource: "+t}e.console.error(r),c.raiseEvent("open-failed",{message:r,source:t,postData:u})}})},supports:function(e,t){return!1},configure:function(e,t,i){throw new Error("Method not implemented.")},getTileUrl:function(e,t,i){throw new Error("Method not implemented.")},getTilePostData:function(e,t,i){return null},getTileAjaxHeaders:function(e,t,i){return{}},getTileHashKey:function(e,t,i,n,r,o){return s="string"!=typeof n?e+"/"+t+"_"+i:n,r?s+"+"+JSON.stringify(r):s;var s},tileExists:function(e,t,i){var n=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&i>=0&&t<n.x&&i<n.y},hasTransparency:function(e,t,i,n){return!!e||t.match(".png")},downloadTileStart:function(t){var i=t.userData,n=new Image;i.image=n,i.request=null;var r=function(e){n?(n.onload=n.onerror=n.onabort=null,t.finish(e?null:n,i.request,e)):t.finish(null,i.request,"Image load failed: undefined Image instance.")};n.onload=function(){r()},n.onabort=n.onerror=function(){r("Image load aborted.")},t.loadWithAjax?i.request=e.makeAjaxRequest({url:t.src,withCredentials:t.ajaxWithCredentials,headers:t.ajaxHeaders,responseType:"arraybuffer",postData:t.postData,success:function(e){var t;try{t=new window.Blob([e.response])}catch(n){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===n.name&&i){var o=new i;o.append(e.response),t=o.getBlob()}}0===t.size?r("Empty image response."):n.src=(window.URL||window.webkitURL).createObjectURL(t)},error:function(e){r("Image load aborted - XHR error")}}):(!1!==t.crossOriginPolicy&&(n.crossOrigin=t.crossOriginPolicy),n.src=t.src)},downloadTileAbort:function(e){e.userData.request&&e.userData.request.abort();var t=e.userData.image;e.userData.image&&(t.onload=t.onerror=t.onabort=null)},createTileCache:function(e,t,i){e._data=t},destroyTileCache:function(e){e._data=null,e._renderedContext=null},getTileCacheData:function(e){return e._data},getTileCacheDataAsImage:function(e){return e._data},getTileCacheDataAsContext2D:function(e){if(!e._renderedContext){var t=document.createElement("canvas");t.width=e._data.width,t.height=e._data.height,e._renderedContext=t.getContext("2d"),e._renderedContext.drawImage(e._data,0,0),e._data=null}return e._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(i,n,r){var o;for(o in t)if(o.match(/.+TileSource$/)&&e.isFunction(t[o])&&e.isFunction(t[o].prototype.supports)&&t[o].prototype.supports.call(i,n,r))return t[o];return e.console.error("No TileSource was able to open %s %s",r,n),null}}(t),function(e){function t(t,i){var n,r,o=i.Image,s=o.Url,a=o.Format,l=o.Size,c=o.DisplayRect||[],u=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;r<c.length;r++)n=c[r].Rect,f.push(new e.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),parseInt(n.MinLevel,10),parseInt(n.MaxLevel,10)));return e.extend(!0,{width:u,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:f},i)}e.DziTileSource=function(t,i,n,r,o,s,a,l,c){var u,h,d,p;if(p=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=p.tilesUrl,this.fileFormat=p.fileFormat,this.displayRects=p.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(d=(h=this.displayRects[u]).minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);e.TileSource.apply(this,[p])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var i;return e.Image?i=e.Image.xmlns:e.documentElement&&("Image"!==e.documentElement.localName&&"Image"!==e.documentElement.tagName||(i=e.documentElement.namespaceURI)),-1!==(i=(i||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==i.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(i,n,r){var o;return o=e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s,a,l,c=n.documentElement,u=c.localName||c.tagName,h=n.documentElement.namespaceURI,d=null,p=[];if("Image"===u)try{if(void 0===(a=c.getElementsByTagName("Size")[0])&&(a=c.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(d.Image.Format))throw new Error(e.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(void 0===(r=c.getElementsByTagName("DisplayRect"))&&(r=c.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)void 0===(s=(o=r[l]).getElementsByTagName("Rect")[0])&&(s=o.getElementsByTagNameNS(h,"Rect")[0]),p.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),t(0,d)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===u)throw new Error(e.getString("Errors.Dzc"));if("Error"===u){var f=c.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}(0,i),n&&!o.tilesUrl&&(o.tilesUrl=n.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),-1!==n.search(/\.(dzi|xml|js)\?/)?o.queryParams=n.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,i){return[this.tilesUrl,e,"/",t,"_",i,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,i){var n,r,o,s,a,l,c,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(c=u.length-1;c>=0;c--)if(!(e<(n=u[c]).minLevel||e>n.maxLevel)&&(r=this.getLevelScale(e),o=n.x*r,s=n.y*r,a=o+n.width*r,l=s+n.height*r,o=Math.floor(o/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),l=Math.ceil(l/this._tileWidth),o<=t&&t<a&&s<=i&&i<l))return!0;return!1}})}(t),function(e){function i(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,i=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),n=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(n=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(n=-1!==e.extraFeatures.indexOf("sizeByWh")),!i||n}function n(e){for(var t=[],i=0;i<e.sizes.length;i++)t.push({url:e._id+"/full/"+e.sizes[i].width+","+(3===e.version?e.sizes[i].height:"")+"/0/default."+e.tileFormat,width:e.sizes[i].width,height:e.sizes[i].height});return t.sort((function(e,t){return e.width-t.width}))}function r(t,i,n){var o,s;if(3===t.nodeType&&n)(s=t.nodeValue.trim()).match(/^\d*$/)&&(s=Number(s)),i[n]?(e.isArray(i[n])||(i[n]=[i[n]]),i[n].push(s)):i[n]=s;else if(1===t.nodeType)for(o=0;o<t.childNodes.length;o++)r(t.childNodes[o],i,t.nodeName)}e.IIIFTileSource=function(t){if(e.extend(!0,this,t),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(t.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=t.version,this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var o=0;o<this.tiles[r].scaleFactors.length;o++){var s=this.tiles[r].scaleFactors[o];this.scale_factors.push(s),t.tileSizePerScaleFactor[s]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(i(t)){for(var a=Math.min(this.height,this.width),l=[256,512,1024],c=[],u=0;u<l.length;u++)l[u]<=a&&c.push(l[u]);c.length>0?t.tileSize=Math.max.apply(null,c):t.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,t.levels=n(this),e.extend(!0,t,{width:t.levels[t.levels.length-1].width,height:t.levels[t.levels.length-1].height,tileSize:Math.max(t.height,t.width),tileOverlap:0,minLevel:0,maxLevel:t.levels.length-1}),this.levels=t.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!t.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var h=Math.max.apply(null,this.scale_factors);t.maxLevel=Math.round(Math.log(h)*Math.LOG2E)}else t.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));if(this.sizes){var d=this.sizes.length;d!==t.maxLevel&&d!==t.maxLevel+1||(this.levelSizes=this.sizes.slice().sort(((e,t)=>e.width-t.width)),d===t.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!!(e.protocol&&"http://iiif.io/api/image"===e.protocol||e["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"===e["@context"]||"http://iiif.io/api/image/1/context.json"===e["@context"])||e.profile&&0===e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||e.identifier&&e.width&&e.height||e.documentElement&&"info"===e.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"===e.documentElement.namespaceURI)},configure:function(i,n,o){if(e.isPlainObject(i)){if(i["@context"]){var s=i["@context"];if(Array.isArray(s))for(var a=0;a<s.length;a++)if("string"==typeof s[a]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(s[a])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===s[a])){s=s[a];break}switch(s){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":i.version=1;break;case"http://iiif.io/api/image/2/context.json":i.version=2;break;case"http://iiif.io/api/image/3/context.json":i.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=n.replace("/info.json",""),i.version=1;if(i.preferredFormats)for(var l=0;l<i.preferredFormats.length;l++)if(t.imageFormatSupported(i.preferredFormats[l])){i.tileFormat=i.preferredFormats[l];break}return i}var c=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var i=t.documentElement,n=null;if("info"===i.tagName)try{return r(i,n={}),n}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(i);return c["@context"]="http://iiif.io/api/image/1.0/context.json",c["@id"]=n.replace("/info.xml",""),c.version=1,c},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var i=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(i=this.levels[t].width/this.levels[this.maxLevel].width),i}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid)return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0);if(this.levelSizes){var i=this.levelSizes[t],n=Math.ceil(i.width/this.getTileWidth(t)),r=Math.ceil(i.height/this.getTileHeight(t));return new e.Point(n,r)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,i){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.levelSizes[t].width,o=i.x*r,s=i.y*r,a=Math.floor(o/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));return i.x>=1&&(a=this.getNumTiles(t).x-1),i.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)}return e.TileSource.prototype.getTileAtPoint.call(this,t,i)},getTileUrl:function(e,t,i){if(this.emulateLegacyImagePyramid){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}var r,o,s,a,l,c,u,h,d,p,f,g,m,_,v,y=Math.pow(.5,this.maxLevel-e);return this.levelSizes?(r=this.levelSizes[e].width,o=this.levelSizes[e].height):(r=Math.ceil(this.width*y),o=Math.ceil(this.height*y)),s=this.getTileWidth(e),a=this.getTileHeight(e),l=Math.round(s/y),c=Math.round(a/y),v=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,r<s&&o<a?(g=2===this.version&&r===this.width?"full":3===this.version&&r===this.width&&o===this.height?"max":3===this.version?r+","+o:r+",",u="full"):(h=t*l,d=i*c,p=Math.min(l,this.width-h),f=Math.min(c,this.height-d),u=0===t&&0===i&&p===this.width&&f===this.height?"full":[h,d,p,f].join(","),m=Math.min(s,r-t*s),_=Math.min(a,o-i*a),g=2===this.version&&m===this.width?"full":3===this.version&&m===this.width&&_===this.height?"max":3===this.version?m+","+_:m+","),[this._id,u,g,"0",v].join("/")},__testonly__:{canBeTiled:i,constructLevels:n}})}(t),function(e){e.OsmTileSource=function(t,i,n,r,o){var s;(s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){return this.tilesUrl+(e-8)+"/"+t+"/"+i+".png"}})}(t),function(e){e.TmsTileSource=function(t,i,n,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),c=256*Math.ceil(s.height/256);a=l>c?l/256:c/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=c,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(n-i)+".png"}})}(t),function(e){e.ZoomifyTileSource=function(e){void 0===e.tileSize&&(e.tileSize=256),void 0===e.fileFormat&&(e.fileFormat="jpg",this.fileFormat=e.fileFormat);var i={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(i.x,10)>e.tileSize||parseInt(i.y,10)>e.tileSize;)i.x=Math.floor(i.x/2),i.y=Math.floor(i.y/2),e.imageSizes.push({x:i.x,y:i.y}),e.gridSize.push(this._getGridSize(i.x,i.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,t.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,i){return{x:Math.ceil(e/i),y:Math.ceil(t/i)}},_calculateAbsoluteTileNumber:function(e,t,i){for(var n=0,r={},o=0;o<e;o++)n+=(r=this.gridSize[o]).x*r.y;return n+((r=this.gridSize[e]).x*i+t)},supports:function(e,t){return e.type&&"zoomifytileservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n,r=this._calculateAbsoluteTileNumber(e,t,i);return n=Math.floor(r/256),this.tilesUrl+"TileGroup"+n+"/"+e+"-"+t+"-"+i+"."+this.fileFormat}})}(t),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var i,n,r;e.isArray(t)&&(i={type:"legacy-image-pyramid",levels:t}),i.levels=function(t){var i,n,r=[];for(n=0;n<t.length;n++)(i=t[n]).height&&i.width&&i.url?r.push({url:i.url,width:Number(i.width),height:Number(i.height)}):e.console.error("Unsupported image format: %s",i.url?i.url:"<no URL>");return r.sort((function(e,t){return e.height-t.height}))}(i.levels),i.levels.length>0?(n=i.levels[i.levels.length-1].width,r=i.levels[i.levels.length-1].height):(n=0,r=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:n,height:r,tileSize:Math.max(r,n),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"===e.type||e.documentElement&&"legacy-image-pyramid"===e.documentElement.getAttribute("type")},configure:function(i,n,r){return e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,c=[];if("image"===a)try{for(l={type:s.getAttribute("type"),levels:[]},c=s.getElementsByTagName("level"),o=0;o<c.length;o++)r=c[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return t(0,l)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}(0,i)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}})}(t),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t,i){return e},getImageInfo:function(t){var i=this._image=new Image,n=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),e.addEvent(i,"load",(function(){n.width=i.naturalWidth,n.height=i.naturalHeight,n.aspectRatio=n.width/n.height,n.dimensions=new e.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})})),e.addEvent(i,"error",(function(){n.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),i.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n},getContext2D:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].context2D),n},destroy:function(e){this._freeupCanvasMemory(e)},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas)return delete this._image,t;var i=this._image.naturalWidth,n=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=i,r.height=n,o.drawImage(this._image,0,0,i,n),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;i>=2&&n>=2;){i=Math.floor(i/2),n=Math.floor(n/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=i,s.height=n,a.drawImage(r,0,0,i,n),t.splice(0,0,{context2D:a,width:i,height:n}),r=s,o=a}return t},_freeupCanvasMemory:function(e){for(var t=0;t<this.levels.length;t++)this.levels[t].context2D&&(this.levels[t].context2D.canvas.height=0,this.levels[t].context2D.canvas.width=0,e&&e.raiseEvent("image-unloaded",{context2D:this.levels[t].context2D}))}})}(t),function(e){e.TileSourceCollection=function(t,i,n,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(t),function(e){function t(i){e.requestAnimationFrame((function(){var n,r;(n=i).shouldFade&&(r=1-(e.now()-n.fadeBeginTime)/n.fadeLength,r=Math.min(1,r),r=Math.max(0,r),n.imgGroup&&e.setElementOpacity(n.imgGroup,r,!0),r>0&&t(n))}))}function i(t,i){var n;t.element.disabled||(i>=e.ButtonState.GROUP&&t.currentState===e.ButtonState.REST&&((n=t).shouldFade=!1,n.imgGroup&&e.setElementOpacity(n.imgGroup,1,!0),t.currentState=e.ButtonState.GROUP),i>=e.ButtonState.HOVER&&t.currentState===e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),i>=e.ButtonState.DOWN&&t.currentState===e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function n(i,n){var r;i.element.disabled||(n<=e.ButtonState.HOVER&&i.currentState===e.ButtonState.DOWN&&(i.imgDown&&(i.imgDown.style.visibility="hidden"),i.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&i.currentState===e.ButtonState.HOVER&&(i.imgHover&&(i.imgHover.style.visibility="hidden"),i.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&i.currentState===e.ButtonState.GROUP&&((r=i).shouldFade=!0,r.fadeBeginTime=e.now()+r.fadeDelay,window.setTimeout((function(){t(r)}),r.fadeDelay),i.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var r=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(i(r,e.ButtonState.DOWN),r.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||i(r,e.ButtonState.HOVER)},focusHandler:function(e){r.tracker.enterHandler(e),r.raiseEvent("focus",{originalEvent:e.originalEvent})},leaveHandler:function(t){n(r,e.ButtonState.GROUP),t.insideElementPressed&&r.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){r.tracker.leaveHandler(e),r.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){i(r,e.ButtonState.DOWN),r.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(n(r,e.ButtonState.HOVER),r.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?n(r,e.ButtonState.GROUP):i(r,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&r.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){13===e.keyCode?(r.raiseEvent("click",{originalEvent:e.originalEvent}),r.raiseEvent("release",{originalEvent:e.originalEvent}),e.preventDefault=!0):e.preventDefault=!1}}),n(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){i(this,e.ButtonState.GROUP)},notifyGroupExit:function(){n(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(t),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var i,n=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",i=0;i<n.length;i++)this.element.appendChild(n[i].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},leaveHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(e){this.buttons.push(e),this.element.appendChild(e.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var e=this.buttons.pop();this.element.removeChild(e.element),e.destroy()}this.tracker.destroy(),this.element=null}}}(t),function(e){e.Rect=function(t,i,n,r,o){var s,a;this.x="number"==typeof t?t:0,this.y="number"==typeof i?i:0,this.width="number"==typeof n?n:0,this.height="number"==typeof r?r:0,this.degrees="number"==typeof o?o:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(s=this.getTopRight(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(s=this.getBottomRight(),this.x=s.x,this.y=s.y,this.degrees-=180):this.degrees>=90&&(s=this.getBottomLeft(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(t,i,n){var r=t.distanceTo(i),o=t.distanceTo(n),s=i.minus(t),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,r,o,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),r=Math.min(i.x,n.x),o=Math.min(i.y,n.y),s=Math.max(i.x+i.width,n.x+n.width),a=Math.max(i.y+i.height,n.y+n.height);return new e.Rect(r,o,s-r,a-o)},intersection:function(t){var i=1e-10,n=[],r=this.getTopLeft();t.containsPoint(r,i)&&n.push(r);var o=this.getTopRight();t.containsPoint(o,i)&&n.push(o);var s=this.getBottomLeft();t.containsPoint(s,i)&&n.push(s);var a=this.getBottomRight();t.containsPoint(a,i)&&n.push(a);var l=t.getTopLeft();this.containsPoint(l,i)&&n.push(l);var c=t.getTopRight();this.containsPoint(c,i)&&n.push(c);var u=t.getBottomLeft();this.containsPoint(u,i)&&n.push(u);var h=t.getBottomRight();this.containsPoint(h,i)&&n.push(h);for(var d=this._getSegments(),p=t._getSegments(),f=0;f<d.length;f++)for(var g=d[f],m=0;m<p.length;m++){var _=p[m],v=y(g[0],g[1],_[0],_[1]);v&&n.push(v)}function y(t,n,r,o){var s=n.minus(t),a=o.minus(r),l=-a.x*s.y+s.x*a.y;if(0===l)return null;var c=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/l,u=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/l;return-1e-10<=c&&c<=1-i&&-1e-10<=u&&u<=1-i?new e.Point(t.x+u*s.x,t.y+u*s.y):null}if(0===n.length)return null;for(var b=n[0].x,A=n[0].x,w=n[0].y,x=n[0].y,S=1;S<n.length;S++){var C=n[S];C.x<b&&(b=C.x),C.x>A&&(A=C.x),C.y<w&&(w=C.y),C.y>x&&(x=C.y)}return new e.Rect(b,w,A-b,x-w)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight();return[[e,t],[t,n],[n,i],[i,e]]},rotate:function(t,i){if(0===(t=e.positiveModulo(t,360)))return this.clone();i=i||this.getCenter();var n=this.getTopLeft().rotate(t,i),r=this.getTopRight().rotate(t,i).minus(n);r=r.apply((function(e){return Math.abs(e)<1e-15?0:e}));var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(n.x,n.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),i=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,i.x,n.x,r.x),s=Math.max(t.x,i.x,n.x,r.x),a=Math.min(t.y,i.y,n.y,r.y),l=Math.max(t.y,i.y,n.y,r.y);return new e.Rect(o,a,s-o,l-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),i=Math.floor(t.x),n=Math.floor(t.y),r=Math.ceil(t.width+t.x-i),o=Math.ceil(t.height+t.y-n);return new e.Rect(i,n,r,o)},containsPoint:function(e,t){t=t||0;var i=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),o=n.minus(i),s=r.minus(i);return(e.x-i.x)*o.x+(e.y-i.y)*o.y>=-t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y<=t&&(e.x-i.x)*s.x+(e.y-i.y)*s.y>=-t&&(e.x-r.x)*s.x+(e.y-r.y)*s.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(t),function(e){var t={};function i(e){var t;e.quick&&(t="horizontal"===this.scroll?Math.floor(e.position.x/(this.panelWidth+4)):Math.floor(e.position.y/this.panelHeight),this.viewer.goToPage(t)),this.element.focus()}function n(t){if(this.dragging=!0,this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-t.delta.x>0?i>-(r-a.x)&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.x<0&&i<0&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.y>0?n>-(s-a.y)&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y)):-t.delta.y<0&&n<0&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y))}}function r(t){if(this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?t.scroll>0?i>-(r-a.x)&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0&&i<0&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0?n>a.y-s&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll)):t.scroll>0&&n<0&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll)),t.preventDefault=!0}}function o(t,i,n){var r,o,s,a,l,c;for(r="horizontal"===t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(i/r)+5,l=o=(o=(s=Math.ceil((Math.abs(n)+i)/r)+1)-o)<0?0:o;l<s&&l<t.panels.length;l++)if(!(c=t.panels[l]).activePanel){var u,h=t.viewer.tileSources[l];u=h.referenceStripThumbnailUrl?{type:"image",url:h.referenceStripThumbnailUrl}:h,a=new e.Viewer({id:c.id,tileSources:[u],element:c,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,drawer:"canvas"}),e.setElementPointerEventsNone(a.canvas),e.setElementPointerEventsNone(a.container),a.innerTracker.setTracking(!1),a.outerTracker.setTracking(!1),t.miniViewers[c.id]=a,c.activePanel=!0}}function s(e){var t=e.eventSource.element;"horizontal"===this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px"}function a(t){var i=t.eventSource.element;"horizontal"===this.scroll?i.style.marginBottom="-"+e.getElementSize(i).y/2+"px":i.style.marginLeft="-"+e.getElementSize(i).x/2+"px"}function l(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 38:case 39:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 40:case 37:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}function c(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 61:case 48:case 119:case 87:case 100:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 45:case 115:case 83:case 97:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}e.ReferenceStrip=function(u){var h,d,p,f=u.viewer,g=e.getElementSize(f.element);for(u.id||(u.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=u.id,this.element.className="referencestrip"),u=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},u,{element:this.element}),e.extend(this,u),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=f,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,i),dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,s),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,l),keyHandler:e.delegate(this,c),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),u.width&&u.height?(this.element.style.width=u.width+"px",this.element.style.height=u.height+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===u.scroll?(this.element.style.width=g.x*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.height=g.y*u.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.width=g.x*u.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<f.tileSources.length;p++)(h=e.makeNeutralElement("div")).id=this.element.id+"-"+p,h.style.width=this.panelWidth+"px",h.style.height=this.panelHeight+"px",h.style.display="inline",h.style.float="left",h.style.cssFloat="left",h.style.padding="2px",e.setElementTouchActionNone(h),e.setElementPointerEventsNone(h),this.element.appendChild(h),h.activePanel=!1,this.panels.push(h);o(this,"vertical"===this.scroll?g.y:g.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(t){var i,n=this.element.querySelector("#"+this.element.id+"-"+t),r=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),c=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==n&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=n,this.currentSelected.style.background="#999","horizontal"===this.scroll?(i=Number(t)*(this.panelWidth+3))>c+r.x-this.panelWidth?(i=Math.min(i,a-r.x),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):i<c&&(i=Math.max(0,i-r.x/2),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):(i=Number(t)*(this.panelHeight+3))>u+r.y-this.panelHeight?(i=Math.min(i,l-r.y),this.element.style.marginTop=-i+"px",o(this,r.y,-i)):i<u&&(i=Math.max(0,i-r.y/2),this.element.style.marginTop=-i+"px",o(this,r.y,-i)),this.currentPage=t,s.call(this,{eventSource:this.tracker}))},update:function(){return!!t[this.id].animating},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(t),function(e){e.DisplayRect=function(t,i,n,r,o,s){e.Rect.apply(this,[t,i,n,r]),this.minLevel=o,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(t),function(e){e.Spring=function(t){var i=arguments;"object"!=typeof t&&(t={initial:i.length&&"number"==typeof i[0]?i[0]:void 0,springStiffness:i.length>1?i[1].springStiffness:5,animationTime:i.length>1?i[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){let t,i;if(this.current.time=e.now(),this._exponential?(t=this.start._logValue,i=this.target._logValue):(t=this.start.value,i=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let e=t+(i-t)*(n=this.springStiffness,r=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(n*-r))/(1-Math.exp(-n)));this._exponential?this.current.value=Math.exp(e):this.current.value=e}var n,r;return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(t),function(e){e.ImageJob=function(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},t),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var e=this,t=this.abort;this.jobId=window.setTimeout((function(){e.finish(null,null,"Image load exceeded timeout ("+e.timeout+" ms)")}),this.timeout),this.abort=function(){e.source.downloadTileAbort(e),"function"==typeof t&&t()},this.source.downloadTileStart(this)},finish:function(e,t,i){this.data=e,this.request=t,this.errorMsg=i,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(t){if(!t.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var i=e.TileSource.prototype;t.source={downloadTileStart:i.downloadTileStart,downloadTileAbort:i.downloadTileAbort}}var n=this,r={src:t.src,tile:t.tile||{},source:t.source,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,postData:t.postData,callback:function(e){var i,r,o,s;i=n,r=e,o=t.callback,""!==r.errorMsg&&(null===r.data||void 0===r.data)&&r.tries<1+i.tileRetryMax&&i.failedTiles.push(r),i.jobsInProgress--,(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.jobQueue.length>0&&((s=i.jobQueue.shift()).start(),i.jobsInProgress++),i.tileRetryMax>0&&0===i.jobQueue.length&&(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.failedTiles.length>0&&(s=i.failedTiles.shift(),setTimeout((function(){s.start()}),i.tileRetryDelay),i.jobsInProgress++),o(r.data,r.errorMsg,r.request)},abort:t.abort,timeout:this.timeout},o=new e.ImageJob(r);!this.jobLimit||this.jobsInProgress<this.jobLimit?(o.start(),this.jobsInProgress++):this.jobQueue.push(o)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(t),function(e){e.Tile=function(i,n,r,o,s,a,l,c,u,h,d,p){this.level=i,this.x=n,this.y=r,this.bounds=o,this.positionedBounds=new t.Rect(o.x,o.y,o.width,o.height),this.sourceBounds=h,this.exists=s,this._url=a,this.postData=d,this.context2D=l,this.loadWithAjax=c,this.ajaxHeaders=u,void 0===p&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),p=e.TileSource.prototype.getTileHashKey(i,n,r,a,u,d)),this.cacheKey=p,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return"function"==typeof this._url?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,i,n){var r=Math.max(1,Math.ceil((n.x-i.x)/2)),o=Math.max(1,Math.ceil((n.y-i.y)/2));return new e.Point(r,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(t),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,i,n){var r;r=e.isPlainObject(t)?t:{element:t,location:i,placement:n},this.element=r.element,this.element.innerHTML="<div>"+this.element.innerHTML+"</div>",this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,i){var n=e.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?t.x-=i.x/2:n.isRight&&(t.x-=i.x),n.isVerticallyCentered?t.y-=i.y/2:n.isBottom&&(t.y-=i.y))},destroy:function(){var t=this.element,i=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(i.display="none",document.body.appendChild(t))),this.onDraw=null,i.top="",i.left="",i.position="",null!==this.width&&(i.width=""),null!==this.height&&(i.height="");var n=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");n&&r&&(i[n]="",i[r]="")},drawHTML:function(t,i){var n=this.element;n.parentNode!==t&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,t.appendChild(n),this.style.position="absolute",this.size=e.getElementSize(n));var r=this._getOverlayPositionAndSize(i),o=r.position,s=this.size=r.size,a="";i.overlayPreserveContentDirection&&(a=i.flipped?" scaleX(-1)":" scaleX(1)");var l=i.flipped?-r.rotate:r.rotate,c=i.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(o,s,this.element);else{var u=this.style,h=n.firstChild.style;u.left=o.x+"px",u.top=o.y+"px",null!==this.width&&(u.width=s.x+"px"),null!==this.height&&(u.height=s.y+"px");var d=e.getCssPropertyWithVendorPrefix("transformOrigin"),p=e.getCssPropertyWithVendorPrefix("transform");d&&p&&(l&&!i.flipped?(h[p]="",u[d]=this._getTransformOrigin(),u[p]="rotate("+l+"deg)"):!l&&i.flipped?(h[p]=a,u[d]=this._getTransformOrigin(),u[p]=c):l&&i.flipped?(h[p]=a,u[d]=this._getTransformOrigin(),u[p]="rotate("+l+"deg)"+c):(h[p]="",u[d]="",u[p]="")),u.display="block"}},_getOverlayPositionAndSize:function(t){var i=t.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(t);this.adjust(i,n);var r=0;if(t.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(i.x,i.y,n.x,n.y),s=this._getBoundingBox(o,t.getRotation(!0));i=s.getTopLeft(),n=s.getSize()}else r=t.getRotation(!0);return t.flipped&&(i.x=t.getContainerSize().x-i.x),{position:i,size:n,rotate:r}},_getSizeInPixels:function(t){var i=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(i=r.x),null!==this.height&&(n=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(i=o.x),null===this.height&&(n=o.y)}return new e.Point(i,n)},_getBoundingBox:function(e,t){var i=this._getPlacementPoint(e);return e.rotate(t,i).getBoundingBox()},_getPlacementPoint:function(t){var i=new e.Point(t.x,t.y),n=e.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?i.x+=t.width/2:n.isRight&&(i.x+=t.width),n.isVerticallyCentered?i.y+=t.height/2:n.isBottom&&(i.y+=t.height)),i},_getTransformOrigin:function(){var t="",i=e.Placement.properties[this.placement];return i?(i.isLeft?t="left":i.isRight&&(t="right"),i.isTop?t+=" top":i.isBottom&&(t+=" bottom"),t):t},update:function(t,i){var n=e.isPlainObject(t)?t:{location:t,placement:i};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,n=this.height;if(null===i||null===n){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===i&&(i=r.x),null===n&&(n=r.y)}var o=this.location.clone();return this.adjust(o,new e.Point(i,n)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,i,n))},_adjustBoundsForRotation:function(t,i){if(!t||0===t.getRotation(!0)||this.rotationMode===e.OverlayRotationMode.EXACT)return i;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return i;var n=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}return i.rotate(-t.getRotation(!0),this._getPlacementPoint(i))}}}(t),function(e){const t=e;t.DrawerBase=class{constructor(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required"),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,this.options=t.options||{},this.container=e.getElement(t.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",e.setElementOpacity(this.canvas,this.viewer.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return e.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){e.console.error("Drawer.getType must be implemented by child class")}static isSupported(){e.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return e.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(t){e.console.error("Drawer.draw must be implemented by child class")}canRotate(){e.console.error("Drawer.canRotate must be implemented by child class")}destroy(){e.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(e){return!1}setImageSmoothingEnabled(t){e.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(t){e.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){e.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===e.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===e.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===e.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===e.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===e.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(t){var i=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)}viewportCoordToDrawerCoord(t){var i=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)}_calculateCanvasSize(){var i=e.pixelDensityRatio,n=this.viewport.getContainerSize();return new t.Point(Math.round(n.x*i),Math.round(n.y*i))}_raiseTiledImageDrawnEvent(e,t){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:e,tiles:t})}_raiseDrawerErrorEvent(e,t){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:e,drawer:this,error:t})}}}(t),function(e){const t=e;class i extends t.DrawerBase{constructor(e){super(e),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(e){return!0}_createDrawingElement(){return e.makeNeutralElement("div")}draw(e){var t=this;this._prepareNewFrame(),e.forEach((function(e){0!==e.opacity&&t._drawTiles(e)}))}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(e){var t=e.getTilesToDraw().map((e=>e.tile));if(0!==e.opacity&&(0!==t.length||e.placeholderFillStyle))for(var i=t.length-1;i>=0;i--){var n=t[i];this._drawTile(n),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:n})}}_drawTile(t){e.console.assert(t,"[Drawer._drawTile] tile is required");let i=this.canvas;if(t.cacheImageRecord)if(t.loaded){if(!t.element){var n=t.getImage();if(!n)return;t.element=e.makeNeutralElement("div"),t.imgElement=n.cloneNode(),t.imgElement.style.msInterpolationMode="nearest-neighbor",t.imgElement.style.width="100%",t.imgElement.style.height="100%",t.style=t.element.style,t.style.position="absolute"}t.element.parentNode!==i&&i.appendChild(t.element),t.imgElement.parentNode!==t.element&&t.element.appendChild(t.imgElement),t.style.top=t.position.y+"px",t.style.left=t.position.x+"px",t.style.height=t.size.y+"px",t.style.width=t.size.x+"px",t.flipped&&(t.style.transform="scaleX(-1)"),e.setElementOpacity(t.element,t.opacity)}else e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString());else e.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",t.toString())}}e.HTMLDrawer=i}(t),function(e){const t=e;class i extends t.DrawerBase{constructor(e){super(e),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return e.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),i=this._calculateCanvasSize();return t.width=i.x,t.height=i.y,t}draw(e){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const t of e)0!==t.opacity&&this._drawTiles(t)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(e){return!0}setImageSmoothingEnabled(e){this._imageSmoothingEnabled=!!e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(t){var i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(e,t,i,n){this.viewer.raiseEvent("tile-drawing",{tiledImage:e,context:t,tile:i,rendered:n})}_prepareNewFrame(){var e=this._calculateCanvasSize();if((this.canvas.width!==e.x||this.canvas.height!==e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(e,t){var i=this._getContext(e);if(t)i.clearRect(t.x,t.y,t.width,t.height);else{var n=i.canvas;i.clearRect(0,0,n.width,n.height)}}_drawTiles(t){var i=t.getTilesToDraw().map((e=>e.tile));if(0!==t.opacity&&(0!==i.length||t.placeholderFillStyle)){var s,a,l,c=i[0];c&&(s=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&t.source.hasTransparency(c.context2D,c.getUrl(),c.ajaxHeaders,c.postData));var u,h=this.viewport.getZoom(!0),d=t.viewportToImageZoom(h);i.length>1&&d>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&(s=!0,a=c.getScaleForEdgeSmoothing(),l=c.getTranslationForEdgeSmoothing(a,this._getCanvasSize(!1),this._getCanvasSize(!0))),s&&(a||(u=(u=this.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox()).times(e.pixelDensityRatio)),this._clear(!0,u)),a||this._setRotations(t,s);var p=!1;if(t._clip){this._saveContext(s);var f=t.imageToViewportRectangle(t._clip,!0);f=f.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var g=this.viewportToDrawerRectangle(f);a&&(g=g.times(a)),l&&(g=g.translate(l)),this._setClip(g,s),p=!0}if(t._croppingPolygons){var m=this;p||this._saveContext(s);try{var _=t._croppingPolygons.map((function(e){return e.map((function(e){var i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),n=m.viewportCoordToDrawerCoord(i);return a&&(n=n.times(a)),l&&(n=n.plus(l)),n}))}));this._clipWithPolygons(_,s)}catch(t){e.console.error(t)}p=!0}if(t._hasOpaqueTile=!1,t.placeholderFillStyle&&!1===t._hasOpaqueTile){let e=this.viewportToDrawerRectangle(t.getBoundsNoRotate(!0));a&&(e=e.times(a)),l&&(e=e.translate(l));let i=null;i="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,this.context):t.placeholderFillStyle,this._drawRectangle(e,i,s)}var v=function(t){if("number"==typeof t)return o(t);if(!t||!e.Browser)return n;var i=t[e.Browser.vendor];return r(i)&&(i=t["*"]),o(i)}(t.subPixelRoundingForTransparency),y=!1;v===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?y=!0:v===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(y=!(this.viewer&&this.viewer.isAnimating()));for(var b=0;b<i.length;b++)c=i[b],this._drawTile(c,t,s,a,l,y,t.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:c});p&&this._restoreContext(s),a||(t.getRotation(!0)%360!=0&&this._restoreRotationChanges(s),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(s)),s&&(a&&this._setRotations(t),this.blendSketch({opacity:t.opacity,scale:a,translate:l,compositeOperation:t.compositeOperation,bounds:u}),a&&(t.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(t,i),this._raiseTiledImageDrawnEvent(t,i)}}_drawDebugInfo(t,i){if(t.debugMode)for(var n=i.length-1;n>=0;n--){var r=i[n];try{this._drawDebugInfoOnTile(r,i.length,n,t)}catch(t){e.console.error(t)}}}_clipWithPolygons(e,t){var i=this._getContext(t);i.beginPath();for(const n of e)for(const[e,t]of n.entries())i[0===e?"moveTo":"lineTo"](t.x,t.y);i.clip()}_drawTile(t,i,n,r,o,s,a){e.console.assert(t,"[Drawer._drawTile] tile is required"),e.console.assert(i,"[Drawer._drawTile] drawingHandler is required");var l=this._getContext(n);r=r||1,this._drawTileToCanvas(t,l,i,r,o,s,a)}_drawTileToCanvas(t,i,n,r,o,s,a){var l,c,u,h=t.position.times(e.pixelDensityRatio),d=t.size.times(e.pixelDensityRatio);t.context2D||t.cacheImageRecord?(l=t.getCanvasContext(),t.loaded&&l?(i.save(),"number"==typeof r&&1!==r&&(h=h.times(r),d=d.times(r)),o instanceof e.Point&&(h=h.plus(o)),1===i.globalAlpha&&t.hasTransparency&&(s&&(h.x=Math.round(h.x),h.y=Math.round(h.y),d.x=Math.round(d.x),d.y=Math.round(d.y)),i.clearRect(h.x,h.y,d.x,d.y)),this._raiseTileDrawingEvent(n,i,t,l),t.sourceBounds?(c=Math.min(t.sourceBounds.width,l.canvas.width),u=Math.min(t.sourceBounds.height,l.canvas.height)):(c=l.canvas.width,u=l.canvas.height),i.translate(h.x+d.x/2,0),t.flipped&&i.scale(-1,1),i.drawImage(l.canvas,0,0,c,u,-d.x/2,h.y,d.x,d.y),i.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString())):e.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",t.toString())}_getContext(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var i=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var n=this;this.viewer.addHandler("rotate",(function e(){if(0!==n.viewport.getRotation()){n.viewer.removeHandler("rotate",e);var t=n._calculateSketchCanvasSize();n.sketchCanvas.width=t.x,n.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t}_saveContext(e){this._getContext(e).save()}_restoreContext(e){this._getContext(e).restore()}_setClip(e,t){var i=this._getContext(t);i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()}_drawRectangle(e,t,i){var n=this._getContext(i);n.save(),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height),n.restore()}blendSketch(t,i,n,r){var o=t;e.isPlainObject(o)||(o={opacity:t,scale:i,translate:n,compositeOperation:r}),t=o.opacity,r=o.compositeOperation;var s=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),s)s.x<0&&(s.width+=s.x,s.x=0),s.x+s.width>this.canvas.width&&(s.width=this.canvas.width-s.x),s.y<0&&(s.height+=s.y,s.y=0),s.y+s.height>this.canvas.height&&(s.height=this.canvas.height-s.y),this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{i=o.scale||1;var a=(n=o.translate)instanceof e.Point?n:new e.Point(0,0),l=0,c=0;if(n){var u=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;l=Math.round(u/2),c=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,a.x-l*i,a.y-c*i,(this.canvas.width+2*l)*i,(this.canvas.height+2*c)*i,-l,-c,this.canvas.width+2*l,this.canvas.height+2*c)}this.context.restore()}_drawDebugInfoOnTile(t,i,n,r){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[o],s.fillStyle=this.debugGridColor[o],this._setRotations(r),this._viewportFlipped&&this._flip({point:t.position.plus(t.size.divide(2))}),s.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;s.translate(a,l);const c=this.viewport.getRotation(!0);s.rotate(Math.PI/180*-c),s.translate(-a,-l),0===t.x&&0===t.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),s.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),s.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),s.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),s.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),s.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),s.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),s.restore()}_updateImageSmoothingEnabled(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(t){var i=this._getContext(t).canvas;return new e.Point(i.width,i.height)}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:t,saveContext:i}),i=!1),e.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:t,saveContext:i})}_offsetForRotation(t){var i=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._getContext(t.useSketch);n.save(),n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)}_flip(t){var i=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._getContext(t.useSketch);n.translate(i.x,0),n.scale(-1,1),n.translate(-i.x,0)}_restoreRotationChanges(e){this._getContext(e).restore()}_calculateCanvasSize(){var t=e.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:Math.round(i.x*t),y:Math.round(i.y*t)}}_calculateSketchCanvasSize(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}e.CanvasDrawer=i;var n=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function r(t){return t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function o(e){return r(e)?n:e}}(t),function(e){const t=e;t.WebGLDrawer=class extends t.DrawerBase{constructor(e){super(e),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._boundToTileReady=e=>this._tileReadyHandler(e),this._boundToImageUnloaded=e=>this._imageUnloadedHandler(e),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let e=this._gl;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(let n=0;n<t;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),Array.from(this._TextureMap.keys()).forEach((e=>{this._cleanupImageData(e)})),e.deleteBuffer(this._secondPass.bufferOutputPosition),e.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let i=e.getExtension("WEBGL_lose_context");i&&i.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let t=document.createElement("canvas"),i=e.isFunction(t.getContext)&&t.getContext("webgl"),n=i&&i.getExtension("WEBGL_lose_context");return n&&n.loseContext(),!!i}getType(){return"webgl"}minimumOverlapRequired(e){return e.isTainted()}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),i=this._calculateCanvasSize();return t.width=i.x,t.height=i.y,t}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(t){let i=this._gl,n=this.viewport.getBoundsNoRotate(!0),r=this.viewport.getCenter(!0),o=this.viewport.getRotation(!0)*Math.PI/180,s=this.viewport.flipped?-1:1,a=e.Mat3.makeTranslation(-r.x,-r.y),l=e.Mat3.makeScaling(2/n.width*s,-2/n.height),c=e.Mat3.makeRotation(-o),u=l.multiply(c).multiply(a);i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let h=!1;t.forEach(((t,n)=>{if(t.isTainted()){h&&(this._outputContext.drawImage(this._renderingCanvas,0,0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT),h=!1);const e=this._getBackupCanvasDrawer();e.draw([t]),this._outputContext.drawImage(e.canvas,0,0)}else{let r=t.getTilesToDraw();if(t.placeholderFillStyle&&!1===t._hasOpaqueTile&&this._drawPlaceholder(t),0===r.length||0===t.getOpacity())return;let o=r[0],s=t.compositeOperation||this.viewer.compositeOperation||t._clip||t._croppingPolygons||t.debugMode,a=s||t.opacity<1||o.hasTransparency;s&&(h&&this._outputContext.drawImage(this._renderingCanvas,0,0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT)),i.useProgram(this._firstPass.shaderProgram),a?(i.bindFramebuffer(i.FRAMEBUFFER,this._glFrameBuffer),i.clear(i.COLOR_BUFFER_BIT)):i.bindFramebuffer(i.FRAMEBUFFER,null);let l=u,c=t.getRotation(!0);if(c%360!=0){let i=e.Mat3.makeRotation(-c*Math.PI/180),n=t.getBoundsNoRotate(!0).getCenter(),r=e.Mat3.makeTranslation(n.x,n.y),o=e.Mat3.makeTranslation(-n.x,-n.y),s=r.multiply(i).multiply(o);l=u.multiply(s)}let d=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(d<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${d}). This could happen\n                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let p=new Float32Array(12*d),f=new Array(d),g=new Array(d),m=new Array(d);for(let e=0;e<r.length;e++){let n=r[e].tile,o=e%d,s=o+1,a=n.getCanvasContext(),c=a?this._TextureMap.get(a.canvas):null;if(c||(this._tileReadyHandler({tile:n,tiledImage:t}),c=a?this._TextureMap.get(a.canvas):null),c&&this._getTileData(n,t,c,l,o,p,f,g,m),s===d||e===r.length-1){for(let e=0;e<=s;e++)i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,f[e]);i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),i.bufferData(i.ARRAY_BUFFER,p,i.DYNAMIC_DRAW),g.forEach(((e,t)=>{i.uniformMatrix3fv(this._firstPass.uTransformMatrices[t],!1,e)})),i.uniform1fv(this._firstPass.uOpacities,new Float32Array(m)),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),i.vertexAttribPointer(this._firstPass.aOutputPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),i.vertexAttribPointer(this._firstPass.aTexturePosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferIndex),i.vertexAttribPointer(this._firstPass.aIndex,1,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6*s)}}a&&(i.useProgram(this._secondPass.shaderProgram),i.bindFramebuffer(i.FRAMEBUFFER,null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,t.opacity),i.bindBuffer(i.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),i.vertexAttribPointer(this._secondPass.aTexturePosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),i.vertexAttribPointer(this._firstPass.aOutputPosition,2,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6)),h=!0,s&&(this._applyContext2dPipeline(t,r,n),h=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT)),0===n&&this._raiseTiledImageDrawnEvent(t,r.map((e=>e.tile)))}})),h&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(e){}drawDebuggingRect(t){let i=this._outputContext;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}_getTextureDataFromTile(e){return e.getCanvasContext().canvas}_applyContext2dPipeline(e,t,i){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=0===i?null:e.compositeOperation||this.viewer.compositeOperation,e._croppingPolygons||e._clip?(this._renderToClippingCanvas(e),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),e.debugMode){const i=this.viewer.viewport.getFlip();i&&this._flip(),this._drawDebugInfo(t,e,i),i&&this._flip()}}_getTileData(t,i,n,r,o,s,a,l,c){let u=n.texture,h=n.position;s.set(h,12*o);let d=this._calculateOverlapFraction(t,i),p=t.positionedBounds.width*d.x,f=t.positionedBounds.height*d.y,g=t.positionedBounds.x+(0===t.x?0:p),m=t.positionedBounds.y+(0===t.y?0:f),_=t.positionedBounds.x+t.positionedBounds.width-(t.isRightMost?0:p)-g,v=t.positionedBounds.y+t.positionedBounds.height-(t.isBottomMost?0:f)-m,y=new e.Mat3([_,0,0,0,v,0,g,m,1]);if(t.flipped){let t=e.Mat3.makeTranslation(.5,0),i=e.Mat3.makeTranslation(-.5,0),n=t.multiply(e.Mat3.makeScaling(-1,1)).multiply(i);y=y.multiply(n)}let b=r.multiply(y);c[o]=t.opacity,a[o]=u,l[o]=b.values}_setupRenderer(){let t=this._gl;t||e.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._renderToTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._glFrameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._glFrameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._renderToTexture,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let e=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);const t=`\n            attribute vec2 a_output_position;\n            attribute vec2 a_texture_position;\n            attribute float a_index;\n\n            ${[...Array(e).keys()].map((e=>`uniform mat3 u_matrix_${e};`)).join("\n")} // create a uniform mat3 for each potential tile to draw\n\n            varying vec2 v_texture_position;\n            varying float v_image_index;\n\n            void main() {\n\n                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()\n\n                ${[...Array(e).keys()].map((e=>`${e>0?"else ":""}if(int(a_index) == ${e}) { transform_matrix = u_matrix_${e}; }`)).join("\n")}\n\n                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);\n\n                v_texture_position = a_texture_position;\n                v_image_index = a_index;\n            }\n            `,i=`\n            precision mediump float;\n\n            // our textures\n            uniform sampler2D u_images[${e}];\n            // our opacities\n            uniform float u_opacities[${e}];\n\n            // the varyings passed in from the vertex shader.\n            varying vec2 v_texture_position;\n            varying float v_image_index;\n\n            void main() {\n                // can't index directly with a variable, need to use a loop iterator hack\n                for(int i = 0; i < ${e}; ++i){\n                    if(i == int(v_image_index)){\n                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];\n                    }\n                }\n            }\n            `;let n=this._gl,r=this.constructor.initShaderProgram(n,t,i);n.useProgram(r),this._firstPass={shaderProgram:r,aOutputPosition:n.getAttribLocation(r,"a_output_position"),aTexturePosition:n.getAttribLocation(r,"a_texture_position"),aIndex:n.getAttribLocation(r,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map((e=>n.getUniformLocation(r,`u_matrix_${e}`))),uImages:n.getUniformLocation(r,"u_images"),uOpacities:n.getUniformLocation(r,"u_opacities"),bufferOutputPosition:n.createBuffer(),bufferTexturePosition:n.createBuffer(),bufferIndex:n.createBuffer()},n.uniform1iv(this._firstPass.uImages,[...Array(e).keys()]);let o=new Float32Array(12*e);for(let a=0;a<e;++a)o.set(Float32Array.from(this._unitQuad),12*a);n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),n.bufferData(n.ARRAY_BUFFER,o,n.STATIC_DRAW),n.enableVertexAttribArray(this._firstPass.aOutputPosition),n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),n.enableVertexAttribArray(this._firstPass.aTexturePosition),n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferIndex);let s=[...Array(this._glNumTextures).keys()].map((e=>Array(6).fill(e))).flat();n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),n.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){let t=this._gl,i=this.constructor.initShaderProgram(t,"\n            attribute vec2 a_output_position;\n            attribute vec2 a_texture_position;\n\n            uniform mat3 u_matrix;\n\n            varying vec2 v_texture_position;\n\n            void main() {\n                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);\n\n                v_texture_position = a_texture_position;\n            }\n            ","\n            precision mediump float;\n\n            // our texture\n            uniform sampler2D u_image;\n\n            // the texCoords passed in from the vertex shader.\n            varying vec2 v_texture_position;\n\n            // the opacity multiplier for the image\n            uniform float u_opacity_multiplier;\n\n            void main() {\n                gl_FragColor = texture2D(u_image, v_texture_position);\n                gl_FragColor *= u_opacity_multiplier;\n            }\n            ");t.useProgram(i),this._secondPass={shaderProgram:i,aOutputPosition:t.getAttribLocation(i,"a_output_position"),aTexturePosition:t.getAttribLocation(i,"a_texture_position"),uMatrix:t.getUniformLocation(i,"u_matrix"),uImage:t.getUniformLocation(i,"u_image"),uOpacityMultiplier:t.getUniformLocation(i,"u_opacity_multiplier"),bufferOutputPosition:t.createBuffer(),bufferTexturePosition:t.createBuffer()},t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.STATIC_DRAW),t.enableVertexAttribArray(this._secondPass.aOutputPosition),t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.DYNAMIC_DRAW),t.enableVertexAttribArray(this._secondPass.aTexturePosition);let n=e.Mat3.makeScaling(2,2).multiply(e.Mat3.makeTranslation(-.5,-.5));t.uniformMatrix3fv(this._secondPass.uMatrix,!1,n.values)}_resizeRenderer(){let e=this._gl,t=this._renderingCanvas.width,i=this._renderingCanvas.height;e.viewport(0,0,t,i),e.deleteTexture(this._renderToTexture),this._renderToTexture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._renderToTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this._glFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let e=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this.viewer.addHandler("resize",(function(){e._outputCanvas!==e.viewer.drawer.canvas&&(e._outputCanvas.style.width=e.viewer.drawer.canvas.clientWidth+"px",e._outputCanvas.style.height=e.viewer.drawer.canvas.clientHeight+"px");let t=e._calculateCanvasSize();e._outputCanvas.width===t.x&&e._outputCanvas.height===t.y||(e._outputCanvas.width=t.x,e._outputCanvas.height=t.y),e._renderingCanvas.style.width=e._outputCanvas.clientWidth+"px",e._renderingCanvas.style.height=e._outputCanvas.clientHeight+"px",e._renderingCanvas.width=e._clippingCanvas.width=e._outputCanvas.width,e._renderingCanvas.height=e._clippingCanvas.height=e._outputCanvas.height,e._resizeRenderer()}))}_makeQuadVertexBuffer(e,t,i,n){return new Float32Array([e,n,t,n,e,i,e,i,t,n,t,i])}_tileReadyHandler(t){let i=t.tile,n=t.tiledImage;if(n.isTainted())return;let r=i.getCanvasContext(),o=r&&r.canvas;if(o&&!e.isCanvasTainted(o)){if(!this._TextureMap.get(o)){let e,t,s,a=this._gl,l=a.createTexture(),c=n.source.tileOverlap;if(i.sourceBounds?(t=Math.min(i.sourceBounds.width,o.width)/o.width,s=Math.min(i.sourceBounds.height,o.height)/o.height):(t=1,s=1),c>0){let r=this._calculateOverlapFraction(i,n),o=(0===i.x?0:r.x)*t,a=(0===i.y?0:r.y)*s,l=(i.isRightMost?1:1-r.x)*t,c=(i.isBottomMost?1:1-r.y)*s;e=this._makeQuadVertexBuffer(o,l,a,c)}else e=1===t&&1===s?this._unitQuad:this._makeQuadVertexBuffer(0,t,0,s);let u={texture:l,position:e};this._TextureMap.set(o,u),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,l),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this._uploadImageData(r)}}else n.isTainted()||(n.setTainted(!0),e.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(n,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."))}_calculateOverlapFraction(e,t){let i=t.source.tileOverlap,n=e.sourceBounds.width,r=e.sourceBounds.height;return{x:i/(n+((0===e.x?0:i)+(e.isRightMost?0:i))),y:i/(r+((0===e.y?0:i)+(e.isBottomMost?0:i)))}}_uploadImageData(t){let i=this._gl,n=t.canvas;try{if(!n)throw t;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)}catch(t){e.console.error("Error uploading image data to WebGL",t)}}_imageUnloadedHandler(e){let t=e.context2D.canvas;this._cleanupImageData(t)}_cleanupImageData(e){let t=this._TextureMap.get(e);this._TextureMap.delete(e),t&&this._gl.deleteTexture(t.texture)}_setClip(){}_renderToClippingCanvas(t){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}if(t._clip){let e=[{x:t._clip.x,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y+t._clip.height},{x:t._clip.x,y:t._clip.y+t._clip.height}].map((e=>{let i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(i)}));this._clippingContext.beginPath(),e.forEach(((e,t)=>{this._clippingContext[0===t?"moveTo":"lineTo"](e.x,e.y)})),this._clippingContext.clip(),this._setClip()}if(t._croppingPolygons){let e=t._croppingPolygons.map((e=>e.map((e=>{let i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(i)}))));this._clippingContext.beginPath(),e.forEach((e=>{e.forEach(((e,t)=>{this._clippingContext[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(e){var t=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:t}),t=!1),e.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),saveContext:t})}_offsetForRotation(t){var i=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._outputContext;n.save(),n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)}_flip(t){var i=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._outputContext;n.translate(i.x,0),n.scale(-1,1),n.translate(-i.x,0)}_drawDebugInfo(t,i,n){for(var r=t.length-1;r>=0;r--){var o=t[r].tile;try{this._drawDebugInfoOnTile(o,t.length,r,i,n)}catch(t){e.console.error(t)}}}_drawDebugInfoOnTile(t,i,n,r,o){var s=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[s],a.fillStyle=this.debugGridColor[s],this._setRotations(r),o&&this._flip({point:t.position.plus(t.size.divide(2))}),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var l=(t.position.x+t.size.x/2)*e.pixelDensityRatio,c=(t.position.y+t.size.y/2)*e.pixelDensityRatio;a.translate(l,c);const u=this.viewport.getRotation(!0);a.rotate(Math.PI/180*-u),a.translate(-l,-c),0===t.x&&0===t.y&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),a.restore()}_drawPlaceholder(e){const t=e.getBounds(!0),i=this.viewportToDrawerRectangle(e.getBounds(!0)),n=this._outputContext;let r;r="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,n):e.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),n.fillStyle=r,n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y),n.fillRect(i.x,i.y,i.width,i.height),this._restoreRotationChanges()}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){this._outputContext.restore()}static initShaderProgram(t,i,n){function r(t,i,n){const r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(e.console.error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(r)}`),t.deleteShader(r),null)}const o=r(t,t.VERTEX_SHADER,i),s=r(t,t.FRAGMENT_SHADER,n),a=t.createProgram();return t.attachShader(a,o),t.attachShader(a,s),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)?a:(e.console.error(`Unable to initialize the shader program: ${t.getProgramInfoLog(a)}`),null)}}}(t),function(e){e.Viewport=function(t){var i=arguments;i.length&&i[0]instanceof e.Point&&(t={containerSize:i[0],contentSize:i[1],config:i[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,t.initialDegrees=t.degrees,delete t.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:t.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(t){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(t)},resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,i){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,i)},_setContentBounds:function(t,i){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=t.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),n=i/this.getAspectRatio();return new e.Rect(t.x-i/2,t.y-n/2,i,n)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation(e))},getBoundsNoRotate:function(t){var i=this.getCenter(t),n=1/this.getZoom(t),r=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-r/2,n,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(e),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),i=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/i,t.y-=this._margins.top/i,t.width+=(this._margins.left+this._margins.right)/i,t.height+=(this._margins.top+this._margins.bottom)/i,t},getCenter:function(t){var i,n,r,o,s,a,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(i=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(n=this.getZoom()))/this.getAspectRatio(),s=new e.Rect(l.x-r/2,l.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,s).minus(i).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*n),c.plus(a)):c},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var t=this.viewportToViewerElementRectangle(e).getBoundingBox(),i=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),n=!1,r=!1;if(this.wrapHorizontal);else{var o,s,a,l=t.x+t.width,c=i.x+i.width;o=t.width>i.width?this.visibilityRatio*i.width:this.visibilityRatio*t.width,s=i.x-l+o,a=c-t.x-o,o>i.width?(t.x+=(s+a)/2,n=!0):a<0?(t.x+=a,n=!0):s>0&&(t.x+=s,n=!0)}if(this.wrapVertical);else{var u,h,d,p=t.y+t.height,f=i.y+i.height;u=t.height>i.height?this.visibilityRatio*i.height:this.visibilityRatio*t.height,h=i.y-p+u,d=f-t.y-u,u>i.height?(t.y+=(h+d)/2,r=!0):d<0?(t.y+=d,r=!0):h>0&&(t.y+=h,r=!0)}var g=n||r,m=g?this.viewerElementToViewportRectangle(t):e.clone();return m.xConstrained=n,m.yConstrained=r,m.constraintApplied=g,m},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),i=this._applyZoomConstraints(t);t!==i&&this.zoomTo(i,this.zoomPoint,e);var n=this.getConstrainedBounds(!1);return n.constraintApplied&&(this.fitBounds(n,e),this._raiseConstraintsEvent(e)),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,i){var n=(i=i||{}).immediately||!1,r=i.constraints||!1,o=this.getAspectRatio(),s=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var l=1/a.width;if(n)return this.panTo(s,!0),this.zoomTo(l,null,!0),r&&this.applyConstraints(!0),this;var c=this.getCenter(!0),u=this.getZoom(!0);this.panTo(c,!0),this.zoomTo(u,null,!0);var h=this.getBounds(),d=this.getZoom();if(0===d||Math.abs(l/d-1)<1e-8)return this.zoomTo(l,null,!0),this.panTo(s,n),r&&this.applyConstraints(!1),this;if(r){this.panTo(s,!1),l=this._applyZoomConstraints(l),this.zoomTo(l,null,!1);var p=this.getConstrainedBounds();this.panTo(c,!0),this.zoomTo(u,null,!0),this.fitBounds(p)}else{var f=a.rotate(-this.getRotation()).getTopLeft().times(l).minus(h.getTopLeft().times(d)).divide(l-d);this.zoomTo(l,f,n)}return this},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var i=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,t)},fitHorizontally:function(t){var i=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,i){var n=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(t),i)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,i){return this.zoomTo(this.zoomSpring.target.value*e,t,i)},zoomTo:function(t,i,n){var r=this;return this.zoomPoint=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n?this._adjustCenterSpringsForZoomPoint((function(){r.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:i,immediately:n}),this},setRotation:function(e,t){return this.rotateTo(e,null,t)},getRotation:function(e){return e?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(e,t,i){return this.rotateTo(e,t,i)},rotateTo:function(t,i,n){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===t&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n)if(this.rotationPivot){if(!(t-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(t)}else this.degreesSpring.resetTo(t);else{var r=e.positiveModulo(this.degreesSpring.current.value,360),o=e.positiveModulo(t,360),s=o-r;s>180?o-=360:s<-180&&(o+=360);var a=r-o;this.degreesSpring.resetTo(t+a),this.degreesSpring.springTo(t)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t,immediately:!!n,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(e,t,i){return this.rotateTo(this.degreesSpring.target.value+e,t,i)},resize:function(e,t){var i,n=this.getBoundsNoRotate(),r=n;this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(i=e.x/this.containerSize.x,r.width=n.width*i,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t});var o=this.fitBounds(r,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:e,maintain:t}),o},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,t||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue()},_rotateAboutPivot:function(e){var t=!0===e,i=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),t?this.degreesSpring.update():this.degreesSpring.resetTo(e);var n=this.degreesSpring.current.value-this._oldDegrees,r=i.rotate(-1*n).times(-1);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y)},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var i=this.pixelFromPoint(this.zoomPoint,!0).minus(t),n=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation(t)),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation(t))},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,i){return t.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(!0),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,i){var n=this.getBoundsNoRotate(i);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(t),this.getCenter(t))},_viewportToImageDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/n,i*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(t,i){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,i,!0)}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*n,i/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(t,i){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,i,!0)}var r=this._imageToViewportDelta(t,i);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s)return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,i,n,r,!0)}var a=this.imageToViewportCoordinates(o.x,o.y),l=this._imageToViewportDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewportToImageRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s)return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,i,n,r,!0)}var a=this.viewportToImageCoordinates(o.x,o.y),l=this._viewportToImageDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===i)return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}var n=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(1===i)return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.console.assert(!isNaN(t),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),isNaN(t)||(this.maxZoomPixelRatio=t,i&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(n))}}}(t),function(e){e.TiledImage=function(i){this._initialized=!1,e.console.assert(i.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(i.drawer,"[TiledImage] options.drawer is required"),e.console.assert(i.viewer,"[TiledImage] options.viewer is required"),e.console.assert(i.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(i.source,"[TiledImage] options.source is required"),e.console.assert(!i.clip||i.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=i.tileCache,delete i.tileCache,this._drawer=i.drawer,delete i.drawer,this._imageLoader=i.imageLoader,delete i.imageLoader,i.clip instanceof e.Rect&&(this._clip=i.clip.clone()),delete i.clip;var n=i.x||0;delete i.x;var r=i.y||0;delete i.y,this.normHeight=i.source.dimensions.y/i.source.dimensions.x,this.contentAspectX=i.source.dimensions.x/i.source.dimensions.y;var o=1;i.width?(o=i.width,delete i.width,i.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete i.height)):i.height&&(o=i.height/this.normHeight,delete i.height);var s=i.fitBounds;delete i.fitBounds;var a=i.fitBoundsPlacement||t.Placement.CENTER;delete i.fitBoundsPlacement;var l=i.degrees||0;delete i.degrees;var c=i.ajaxHeaders;delete i.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:e.DEFAULT_SETTINGS.maxTilesPerFrame},i),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,a,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(c,!1),this._initialized=!0},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(e){let t=this._xSpring.update(),i=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update(),o=t||i||n||r||this._needsUpdate;if(o||e||!this._fullyLoaded){let e=this._updateLevelsForViewport();this._setFullyLoaded(e)}return this._needsUpdate=!1,!!o&&(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0)},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(e){this._isTainted=e},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var i=this.getBoundsNoRotate(t);if(this._clip){var n=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,r=this._clip.times(n);i=new e.Rect(i.x+r.x,i.y+r.y,r.width,r.height)}return i.rotate(this.getRotation(t),this._getRotationPoint(t))},getTileBounds:function(e,t,i){var n=this.source.getNumTiles(e),r=(n.x+t%n.x)%n.x,o=(n.y+i%n.y)%n.y,s=this.source.getTileBounds(e,r,o);return this.getFlip()&&(s.x=Math.max(0,1-s.x-s.width)),s.x+=(t-r)/n.x,s.y+=this._worldHeightCurrent/this._worldWidthCurrent*((i-o)/n.y),s},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var t=this.imageToWindowCoordinates(new e.Point(0,0)),i=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(i.x-t.x,i.y-t.y)},_viewportToImageDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),i*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,i,n){var r;return t instanceof e.Point?(n=i,r=t):r=new e.Point(t,i),r=r.rotate(-this.getRotation(n),this._getRotationPoint(n)),n?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,i/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,i,n){t instanceof e.Point&&(n=i,i=t.y,t=t.x);var r=this._imageToViewportDelta(t,i,n);return n?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(n),this._getRotationPoint(n))},imageToViewportRectangle:function(t,i,n,r,o){var s=t;s instanceof e.Rect?o=i:s=new e.Rect(t,i,n,r);var a=this.imageToViewportCoordinates(s.getTopLeft(),o),l=this._imageToViewportDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees+this.getRotation(o))},viewportToImageRectangle:function(t,i,n,r,o){var s=t;t instanceof e.Rect?o=i:s=new e.Rect(t,i,n,r);var a=this.viewportToImageCoordinates(s.getTopLeft(),o),l=this._viewportToImageDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var i=e.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(t.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var i=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/i,(t.y-this._ySpring.current.value)/i,t.width/i,t.height/i,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var i=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(i&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(i)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}i||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(t){return t.map((function(t){try{if((i=t)instanceof e.Point||"number"==typeof i.x&&"number"==typeof i.y)return{x:t.x,y:t.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}var i}))})),this._needsDraw=!0}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(t,i,n){i=i||e.Placement.CENTER;var r=e.Placement.properties[i],o=this.contentAspectX,s=0,a=0,l=1,c=1;if(this._clip&&(o=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,c=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(s=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(s=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var u=t.height/c,h=0;r.isHorizontallyCentered?h=(t.width-t.height*o)/2:r.isRight&&(h=t.width-t.height*o),this.setPosition(new e.Point(t.x-s+h,t.y-a),n),this.setHeight(u,n)}else{var d=t.width/l,p=0;r.isVerticallyCentered?p=(t.height-t.width/o)/2:r.isBottom&&(p=t.height-t.width/o),this.setPosition(new e.Point(t.x-s,t.y-a+p),n),this.setWidth(d,n)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(e){this.flipped=e},get flipped(){return this._flipped},set flipped(e){let t=this._flipped!==!!e;this._flipped=!!e,t&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(e){let t=this._wrapHorizontal!==!!e;this._wrapHorizontal=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(e){let t=this._wrapVertical!==!!e;this._wrapVertical=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(e){this._debugMode=!!e,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(e){this.opacity=e},get opacity(){return this._opacity},set opacity(e){e!==this.opacity&&(this._opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(0===this._opacity&&!this._preload)return!1;var e=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var t=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));e=e.intersection(t)}return e},getTilesToDraw:function(){let e=this._tilesToDraw.flat();return this._updateTilesInViewport(e),e=this._tilesToDraw.flat(),e.forEach((e=>{e.tile.beingDrawn=!0})),this._lastDrawn=e,e},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(e){e!==this._compositeOperation&&(this._compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(e){this.compositeOperation=e},setAjaxHeaders:function(t,i){null===t&&(t={}),e.isPlainObject(t)?(this._ownAjaxHeaders=t,this._updateAjaxHeaders(i)):console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},_updateAjaxHeaders:function(t){if(void 0===t&&(t=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,t){var i,n,r,o;for(var s in this.tilesMatrix)for(var a in i=this.source.getNumTiles(s),this.tilesMatrix[s])for(var l in n=(i.x+a%i.x)%i.x,this.tilesMatrix[s][a])if(r=(i.y+l%i.y)%i.y,(o=this.tilesMatrix[s][a][l]).loadWithAjax=this.loadTilesWithAjax,o.loadWithAjax){var c=this.source.getTileAjaxHeaders(s,n,r);o.ajaxHeaders=e.extend({},this.ajaxHeaders,c)}else o.ajaxHeaders=null;for(var u=0;u<this._imageLoader.jobQueue.length;u++){var h=this._imageLoader.jobQueue[u];h.loadWithAjax=h.tile.loadWithAjax,h.ajaxHeaders=h.tile.loadWithAjax?h.tile.ajaxHeaders:null}}},_setScale:function(e,t){var i=this._scaleSpring.target.value===e;if(t){if(i&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(i)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}i||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,i=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return i=Math.max(i,this.source.minLevel||0),{lowestLevel:e=Math.min(e,i),highestLevel:i}},_updateLevelsForViewport:function(){var t=this._getLevelsInterval(),i=t.lowestLevel,n=t.highestLevel,r=[],o=this.getDrawArea(),s=e.now();if(this._lastDrawn.forEach((e=>{e.tile.beingDrawn=!1})),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!o)return this._needsDraw=!1,this._fullyLoaded;var a=new Array(n-i+1);for(let e=0,y=n;y>=i;y--,e++)a[e]=y;for(let e=n+1;e<=this.source.maxLevel;e++){var l=this.tilesMatrix[e]&&this.tilesMatrix[e][0]&&this.tilesMatrix[e][0][0];if(l&&l.isBottomMost&&l.isRightMost&&l.loaded){a.push(e);break}}let c=!1;for(let e=0;e<a.length;e++){let t=a[e];var u=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t),!0).x*this._scaleSpring.current.value;if(e===a.length-1||u>=this.minPixelRatio)c=!0;else if(!c)continue;var h=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t),!1).x*this._scaleSpring.current.value,d=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,p=this.immediateRender?1:d,f=Math.min(1,(u-.5)/.5),g=p/Math.abs(p-h),m=this._updateLevel(t,f,g,o,s,r);r=m.bestTiles;var _=m.updatedTiles.filter((e=>e.loaded)),v=function(e,t,i){return function(n){return{tile:n,level:e,levelOpacity:t,currentTime:i}}}(t,f,s);if(this._tilesToDraw[t]=_.map(v),this._providesCoverage(this.coverage,t))break}return r&&r.length>0?(r.forEach((function(e){e&&!e.context2D&&this._loadTile(e,s)}),this),this._needsDraw=!0,!1):0===this._tilesLoading},_updateTilesInViewport:function(t){let i=e.now(),n=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let r=t.length?t[0].level:0;if(!this.getDrawArea())return;function o(e){let t=e.tile;if(t&&t.loaded){let o=n._blendTile(t,t.x,t.y,e.level,e.levelOpacity,i,r);n._isBlending=n._isBlending||o,n._needsDraw=n._needsDraw||o||n._wasBlending}}let s=0;for(let e=0;e<t.length;e++){let i=t[e];o(i),this._providesCoverage(this.coverage,i.level)&&(s=Math.max(s,i.level))}if(s>0)for(let e in this._tilesToDraw)e<s&&delete this._tilesToDraw[e]},_blendTile:function(e,t,i,n,r,o,s){let a,l,c=1e3*this.blendTime;return e.blendStart||(e.blendStart=o),a=o-e.blendStart,l=c?Math.min(1,a/c):1,n===s&&(l=1,a=c),this.alwaysBlend&&(l*=r),e.opacity=l,1===l&&(this._setCoverage(this.coverage,n,t,i,!0),this._hasOpaqueTile=!0),a<c},_updateLevel:function(e,t,i,n,r,o){var s=n.getBoundingBox().getTopLeft(),a=n.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:e,opacity:t,visibility:i,drawArea:n,topleft:s,bottomright:a,currenttime:r,best:o}),this._resetCoverage(this.coverage,e),this._resetCoverage(this.loadingCoverage,e);var l=this._getCornerTiles(e,s,a),c=l.topLeft,u=l.bottomRight,h=this.source.getNumTiles(e),d=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(u.x+=1,this.wrapHorizontal||(u.x=Math.min(u.x,h.x-1)));for(var p=Math.max(0,(u.x-c.x)*(u.y-c.y)),f=new Array(p),g=0,m=c.x;m<=u.x;m++)for(var _=c.y;_<=u.y;_++){var v;if(this.getFlip()){var y=(h.x+m%h.x)%h.x;v=m+h.x-y-y-1}else v=m;if(null!==n.intersection(this.getTileBounds(e,v,_))){var b=this._updateTile(v,_,e,i,d,h,r,o);o=b.bestTiles,f[g]=b.tile,g+=1}}return{bestTiles:o,updatedTiles:f}},_positionTile:function(t,i,n,r,o){var s=t.bounds.getTopLeft();s.x*=this._scaleSpring.current.value,s.y*=this._scaleSpring.current.value,s.x+=this._xSpring.current.value,s.y+=this._ySpring.current.value;var a=t.bounds.getSize();a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value,t.positionedBounds.x=s.x,t.positionedBounds.y=s.y,t.positionedBounds.width=a.x,t.positionedBounds.height=a.y;var l=n.pixelFromPointNoRotate(s,!0),c=n.pixelFromPointNoRotate(s,!1),u=n.deltaPixelsFromPointsNoRotate(a,!0),h=n.deltaPixelsFromPointsNoRotate(a,!1),d=c.plus(h.divide(2)),p=r.squaredDistanceTo(d);this.viewer.drawer.minimumOverlapRequired(this)&&(i||(u=u.plus(new e.Point(1,1))),t.isRightMost&&this.wrapHorizontal&&(u.x+=.75),t.isBottomMost&&this.wrapVertical&&(u.y+=.75)),t.position=l,t.size=u,t.squaredDistance=p,t.visibility=o},_updateTile:function(e,t,i,n,r,o,s,a){var l=this._getTile(e,t,i,s,o);this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:l}),this._setCoverage(this.coverage,i,e,t,!1);var c=l.loaded||l.loading||this._isCovered(this.loadingCoverage,i,e,t);if(this._setCoverage(this.loadingCoverage,i,e,t,c),!l.exists)return{bestTiles:a,tile:l};if(l.loaded&&1===l.opacity&&this._setCoverage(this.coverage,i,e,t,!0),this._positionTile(l,this.source.tileOverlap,this.viewport,r,n),!l.loaded)if(l.context2D)this._setTileLoaded(l);else{var u=this._tileCache.getImageRecord(l.cacheKey);u&&this._setTileLoaded(l,u.getData())}return l.loading?this._tilesLoading++:c||(a=this._compareTiles(a,l,this.maxTilesPerFrame)),{bestTiles:a,tile:l}},_getCornerTiles:function(t,i,n){var r,o,s,a;this.wrapHorizontal?(r=e.positiveModulo(i.x,1),o=e.positiveModulo(n.x,1)):(r=Math.max(0,i.x),o=Math.min(1,n.x));var l=1/this.source.aspectRatio;this.wrapVertical?(s=e.positiveModulo(i.y,l),a=e.positiveModulo(n.y,l)):(s=Math.max(0,i.y),a=Math.min(l,n.y));var c=this.source.getTileAtPoint(t,new e.Point(r,s)),u=this.source.getTileAtPoint(t,new e.Point(o,a)),h=this.source.getNumTiles(t);return this.wrapHorizontal&&(c.x+=h.x*Math.floor(i.x),u.x+=h.x*Math.floor(n.x)),this.wrapVertical&&(c.y+=h.y*Math.floor(i.y/l),u.y+=h.y*Math.floor(n.y/l)),{topLeft:c,bottomRight:u}},_getTile:function(t,i,n,r,o){var s,a,l,c,u,h,d,p,f,g,m=this.tilesMatrix,_=this.source;return m[n]||(m[n]={}),m[n][t]||(m[n][t]={}),m[n][t][i]&&!m[n][t][i].flipped==!this.flipped||(s=(o.x+t%o.x)%o.x,a=(o.y+i%o.y)%o.y,l=this.getTileBounds(n,t,i),c=_.getTileBounds(n,s,a,!0),u=_.tileExists(n,s,a),h=_.getTileUrl(n,s,a),d=_.getTilePostData(n,s,a),this.loadTilesWithAjax?(p=_.getTileAjaxHeaders(n,s,a),e.isPlainObject(this.ajaxHeaders)&&(p=e.extend({},this.ajaxHeaders,p))):p=null,f=_.getContext2D?_.getContext2D(n,s,a):void 0,g=new e.Tile(n,t,i,l,u,h,f,this.loadTilesWithAjax,p,c,d,_.getTileHashKey(n,s,a,h,p,d)),this.getFlip()?0===s&&(g.isRightMost=!0):s===o.x-1&&(g.isRightMost=!0),a===o.y-1&&(g.isBottomMost=!0),g.flipped=this.flipped,m[n][t][i]=g),(g=m[n][t][i]).lastTouchTime=r,g},_loadTile:function(e,t){var i=this;e.loading=!0,this._imageLoader.addJob({src:e.getUrl(),tile:e,source:this.source,postData:e.postData,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(n,r,o){i._onTileLoad(e,t,n,r,o)},abort:function(){e.loading=!1}})},_onTileLoad:function(t,i,n,r,o){return n?(t.exists=!0,i<this.lastResetTime?(e.console.warn("Ignoring tile %s loaded before reset: %s",t,t.getUrl()),void(t.loading=!1)):(s=this.source.getClosestLevel(),void this._setTileLoaded(t,n,s,o))):(e.console.error("Tile %s failed to load: %s - error: %s",t,t.getUrl(),r),this.viewer.raiseEvent("tile-load-failed",{tile:t,tiledImage:this,time:i,message:r,tileRequest:o}),t.loading=!1,void(t.exists=!1));var s},_setTileLoaded:function(t,i,n,r){var o=0,s=!1,a=this;function l(){return s&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),o++,c}function c(){0==--o&&(t.loading=!1,t.loaded=!0,t.hasTransparency=a.source.hasTransparency(t.context2D,t.getUrl(),t.ajaxHeaders,t.postData),t.context2D||a._tileCache.cacheTile({data:i,tile:t,cutoff:n,tiledImage:a}),a.viewer.raiseEvent("tile-ready",{tile:t,tiledImage:a,tileRequest:r}),a._needsDraw=!0)}var u=l();this.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:this,tileRequest:r,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),i},data:i,getCompletionCallback:l}),s=!0,u()},_compareTiles:function(e,t,i){return e?(e.push(t),this._sortTiles(e),e.length>i&&e.pop(),e):[t]},_sortTiles:function(e){e.sort((function(e,t){return null===e?1:null===t?-1:e.visibility===t.visibility?e.squaredDistance-t.squaredDistance:t.visibility-e.visibility}))},_providesCoverage:function(e,t,i,n){var r,o,s,a;if(!e[t])return!1;if(void 0===i||void 0===n){for(s in r=e[t])if(Object.prototype.hasOwnProperty.call(r,s))for(a in o=r[s])if(Object.prototype.hasOwnProperty.call(o,a)&&!o[a])return!1;return!0}return void 0===e[t][i]||void 0===e[t][i][n]||!0===e[t][i][n]},_isCovered:function(e,t,i,n){return void 0===i||void 0===n?this._providesCoverage(e,t+1):this._providesCoverage(e,t+1,2*i,2*n)&&this._providesCoverage(e,t+1,2*i,2*n+1)&&this._providesCoverage(e,t+1,2*i+1,2*n)&&this._providesCoverage(e,t+1,2*i+1,2*n+1)},_setCoverage:function(t,i,n,r,o){t[i]?(t[i][n]||(t[i][n]={}),t[i][n][r]=o):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",i)},_resetCoverage:function(e,t){e[t]={}}})}(t),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},i=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.data,"[ImageRecord] options.data is required"),this._tiles=[],t.create.apply(null,[this,t.data,t.ownerTile]),this._destroyImplementation=t.destroy.bind(null,this),this.getImage=t.getImage.bind(null,this),this.getData=t.getData.bind(null,this),this.getRenderedContext=t.getRenderedContext.bind(null,this)};i.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var i=0;i<this._tiles.length;i++)if(this._tiles[i]===t)return void this._tiles.splice(i,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){e.console.assert(n,"[TileCache.cacheTile] options is required"),e.console.assert(n.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(n.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(n.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=n.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[n.tile.cacheKey];if(s||(n.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),n.data=n.image),e.console.assert(n.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),s=this._imagesLoaded[n.tile.cacheKey]=new i({data:n.data,ownerTile:n.tile,create:n.tiledImage.source.createTileCache,destroy:n.tiledImage.source.destroyTileCache,getImage:n.tiledImage.source.getTileCacheDataAsImage,getData:n.tiledImage.source.getTileCacheData,getRenderedContext:n.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),s.addTile(n.tile),n.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,c,u,h,d,p=null,f=-1,g=null,m=this._tilesLoaded.length-1;m>=0;m--)(a=(d=this._tilesLoaded[m]).tile).level<=r||a.beingDrawn||(p?(u=a.lastTouchTime,l=p.lastTouchTime,h=a.level,c=p.level,(u<l||u===l&&h>c)&&(p=a,f=m,g=d)):(p=a,f=m,g=d));p&&f>=0&&(this._unloadTile(g),o=f)}this._tilesLoaded[o]=new t({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){var i;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n=0;n<this._tilesLoaded.length;++n)(i=this._tilesLoaded[n]).tiledImage===t&&(this._unloadTile(i),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var i=t.tile,n=t.tiledImage;let r=i.getCanvasContext&&i.getCanvasContext();i.unload(),i.cacheImageRecord=null;var o=this._imagesLoaded[i.cacheKey];o&&(o.removeTile(i),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[i.cacheKey],this._imagesLoadedCount--,r&&(r.canvas.width=0,r.canvas.height=0,n.viewer.raiseEvent("image-unloaded",{context2D:r,tile:i}))),n.viewer.raiseEvent("tile-unloaded",{tile:i,tiledImage:n}))}}}(t),function(e){e.World=function(t){var i=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,i){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(i=i||{}).index){var n=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(n,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,i){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==i,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(t);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(i,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:n,newIndex:i}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var i=e.indexOf(this._items,t);-1!==i&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var i=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<i.length;t++)e=i[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(e){for(var t=!1,i=0;i<this._items.length;i++)t=this._items[i].update(e)||t;return t},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach((e=>{this._needsDraw=e.setDrawn()||this._needsDraw}))},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var i,n=(t=t||{}).immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=a+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);i=!t.rows&&s?s:Math.ceil(this._items.length/o);var c,u,h,d,p,f=0,g=0;this.setAutoRefigureSizes(!1);for(var m=0;m<this._items.length;m++)m&&m%i==0&&("horizontal"===r?(g+=l,f=0):(f+=l,g=0)),d=(h=(u=(c=this._items[m]).getBounds()).width>u.height?a:a*(u.width/u.height))*(u.height/u.width),p=new e.Point(f+(a-h)/2,g+(a-d)/2),c.setPosition(p,n),c.setWidth(h,n),"horizontal"===r?f+=l:g+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var s=r.getClippedBounds().getBoundingBox(),a=s.x,l=s.y,c=s.x+s.width,u=s.y+s.height,h=1;h<this._items.length;h++)o=(r=this._items[h]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),s=r.getClippedBounds().getBoundingBox(),a=Math.min(a,s.x),l=Math.min(l,s.y),c=Math.max(c,s.x+s.width),u=Math.max(u,s.y+s.height);this._homeBounds=new e.Rect(a,l,c-a,u-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(t)&&this._contentSize.equals(i)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(t)}(yY);const bY=(AY=yY.exports)&&AY.__esModule&&Object.prototype.hasOwnProperty.call(AY,"default")?AY.default:AY;var AY,wY=Object.defineProperty,xY=Object.getOwnPropertyDescriptor,SY=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?xY(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&wY(t,i,o),o};let CY=class extends _j{constructor(){super(...arguments),this.src2D="",this._imageFiles=[],this._currentImageIdx=-1,this._currentSyncRotationAngle=0,this._imageCenter=new bY.Point(0,0),this._deltaX=0,this._deltaY=0,this._minZoomLevel=-1,this._lastDoublePressPointer={clientX:-1,clientY:-1,id:-1},this._lastDoublePressTimeStamp=0,this._isDown=!1,this._viewer=null,this._viewerHomeBounds=new bY.Rect(0,0,0,0,0),this._checkIfZoomIsInvalid=hY((()=>{if(null==this._viewer)return;const e=this._viewer.viewport;e.getZoom(!0)<e.getMinZoom()&&(console.log("Zoom is invalid",e.getZoom(!0)),e.applyConstraints())}),250),this._checkIfCenterPosIsUpdated=hY((()=>{const[e,t]=this.getImageCenter();this._deltaX==e&&this._deltaY==t||(this._deltaX=e,this._deltaY=t,this.dispatchEvent(new CustomEvent("image-shifted",{detail:{deltaX:e,deltaY:t}})))}),15)}render(){return WQ`
      <div id="image_viewer" @pointermove="${this._handlePointerMove}"></div>
      <div id="overlay"></div>
    `}firstUpdated(){const e=this.renderRoot.querySelector("#image_viewer");null!=e?(this._viewer=bY({element:e,autoResize:!0,showFullPageControl:!1,showZoomControl:!1,showHomeControl:!1,showNavigator:!1,navigatorPosition:"TOP_LEFT",minZoomImageRatio:1,maxZoomLevel:100,imageSmoothingEnabled:!1,visibilityRatio:1,constrainDuringPan:!0,defaultZoomLevel:0,placeholderFillStyle:"#FF8800",preserveViewport:!0,loadTilesWithAjax:!0,imageLoaderLimit:1,zoomPerScroll:1.4,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsPen:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsUnknown:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},preserveOverlays:!0}),console.log("Viewer 2D",this._viewer,this.clientHeight,this.clientWidth),this._viewer.addHandler("resize",this._handleImageResizeEvent.bind(this)),this._viewer.addHandler("tile-loaded",this._handleTileLoaded.bind(this)),this._viewer.addHandler("zoom",this._handleZoomChanged.bind(this)),this._viewer.addHandler("rotate",this._checkIfMinZoomChanged.bind(this)),this._viewer.addHandler("update-viewport",this._checkIfCenterPosIsUpdated.bind(this)),this._viewer.addHandler("canvas-press",function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=0;return function(){n++,1===n?t=window.setTimeout((()=>{n=0}),i):(window.clearTimeout(t),e(...arguments),n=0)}}(this._handleCanvasDoublePressEvent.bind(this))),this._viewer.addHandler("viewport-change",this._handleViewportChangedEvent.bind(this)),this._viewer.addOverlay(this.hotspotOverlay,new bY.Point(0,0),bY.Placement.CENTER),this.hotspotOverlay.style.opacity="0",new dY(this.parentElement,"pointerdown").on("single-click",this._handleSingleClickEvent.bind(this)),this.measurementTool.on("change-image-hotspot-visibility",(e=>this.hotspotOverlay.style.opacity=e?"1":"0")),this.measurementTool.on("update-image-hotspot-position-requested",this._updateImageHotspotPosition.bind(this))):console.log("coudn't find element #image_viewer")}connectWithSettings(e){e.imageRotation.on("rotation-angle-changed",this.rotateImage.bind(this))}resize(e,t,i){this.style.height=e+"px",this.style.width=t+"px",this.style.transform=i,this._checkIfZoomIsInvalid()}setImageFiles(e){this._imageFiles=e,console.log("Image Files has been set")}async loadNextImage(e){if(e>=this._imageFiles.length)return void console.log("Image with index",e,"cannot be loaded because only",this._imageFiles.length,"images exist");if(this._currentImageIdx==e)return;if(this._currentImageIdx=e,null==this._viewer)return;const t=await this.viewSettings.resolve2dFileURL(this._imageFiles[this._currentImageIdx]);this._viewer.open({type:"image",url:t}),console.log("Loaded image",t)}rotateImage(e){this._currentSyncRotationAngle!=e&&(this._currentSyncRotationAngle=e,null!=this._viewer&&(this._viewer.viewport.setRotation(this._currentSyncRotationAngle),this._checkIfZoomIsInvalid()))}updatePointerEventsState(e){var t;null==(t=this._viewer)||t.setMouseNavEnabled(!e)}zoomImage(e){null!=this._viewer&&this._viewer.viewport.getZoom()!=e&&(console.log("Zooom image, ",e),this._viewer.viewport.zoomTo(e,void 0,!0))}getZoomLevel(){return null==this._viewer?1:this._viewer.viewport.getZoom()}getImageCenter(){if(null==this._viewer)return[0,0];const e=this._viewer.viewport.imageToViewerElementCoordinates(this._imageCenter);return[.5*this.clientWidth-e.x,.5*this.clientHeight-e.y]}_handlePointerMove(e){if(null==this._viewer||this._viewer.isMouseNavEnabled()||e.pointerId!=this._lastDoublePressPointer.id||!this._isDown)return;const t=e.clientX-this._lastDoublePressPointer.clientX,i=e.clientY-this._lastDoublePressPointer.clientY;0===t&&0===i||(this._lastDoublePressPointer.clientX=e.clientX,this._lastDoublePressPointer.clientY=e.clientY,this.dispatchEvent(new CustomEvent("pointer-move-in-disable-mode",{detail:{dx:t,dy:i}})))}_handlePointerUpAfterDoublePress(e){this._isDown=!1,null==this._viewer||this._viewer.isMouseNavEnabled()||e.timeStamp-this._lastDoublePressTimeStamp>700&&this.dispatchEvent(new Event("double-press-completed"))}_updateImageHotspotPosition(e,t){console.log("Hotspot update-image-hotspot-position",e,t),null!=this._viewer&&this._viewer.updateOverlay(this.hotspotOverlay,this._viewer.viewport.imageToViewportCoordinates(e,t),bY.Placement.CENTER)}_handleSingleClickEvent(e){if(null==this._viewer||!this.measurementTool.isEditModeActive)return void console.log("Single click event: ignoring, viewer null or measurement tool not active.");const t=this.parentElement.getBoundingClientRect(),i=this._viewer.viewport.pointFromPixel(new bY.Point(e.clientX-t.x,e.clientY-t.y)),n=this._viewer.viewport.viewportToImageCoordinates(i);this.measurementTool.addPointFromImage(n.x,n.y),this._viewer.updateOverlay(this.hotspotOverlay,i,bY.Placement.CENTER),console.log("Hotspot in image added")}_handleCanvasDoublePressEvent(e){this._isDown=!0;const t=e.originalEvent;this._lastDoublePressPointer={clientX:t.clientX,clientY:t.clientX,id:t.pointerId},this.dispatchEvent(new CustomEvent("double-press",{detail:{pointerEvent:t}})),null!=this._viewer&&(console.log("Add event handler"),this._lastDoublePressTimeStamp=t.timeStamp,this.parentElement.addEventListener("pointerup",this._handlePointerUpAfterDoublePress.bind(this),{once:!0}))}_handleViewportChangedEvent(){null!=this._viewer&&(this._viewerHomeBounds.equals(this._viewer.viewport.getHomeBounds())||(this._viewerHomeBounds=this._viewer.viewport.getHomeBounds(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:this._viewer.viewport.getZoom(!1)}}))))}_handleImageResizeEvent(){this._checkIfMinZoomChanged()}_handleTileLoaded(e){this._checkIfZoomIsInvalid(),this._checkIfMinZoomChanged(),this._checkIfCenterPosIsUpdated();const t=e.tiledImage.source.dimensions;this._imageCenter.x=.5*t.x,this._imageCenter.y=.5*t.y}_checkIfMinZoomChanged(){null!=this._viewer&&this._minZoomLevel!=this._viewer.viewport.getMinZoom()&&(this._minZoomLevel=this._viewer.viewport.getMinZoom(),console.log("emit min zoom changed",this._minZoomLevel),this.dispatchEvent(new CustomEvent("min-zoom-level-changed",{detail:{zoomLevel:this._minZoomLevel}})))}_handleZoomChanged(e){null!=this._viewer&&1!=e.immediately?(console.log("image zoom changed 1",e.zoom),this._checkIfZoomIsInvalid(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:e.zoom}}))):console.log("Return zoom",e.zoom)}};CY.styles=fQ`
    :host {
      background-color: black;
    }

    #image_viewer {
      height: inherit;
      width: inherit;
      background-color: transparent;
    }

    .hotspot {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 0;
    }

    #overlay {
      display: none;
      background-color: transparent;
      opacity: 0;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: 3px solid rgb(0, 128, 200);
    }
  `,SY([Aj()],CY.prototype,"src2D",2),SY([wj("#image_viewer")],CY.prototype,"parentElement",2),SY([wj("#overlay")],CY.prototype,"hotspotOverlay",2),SY([Aj({type:Object})],CY.prototype,"measurementTool",2),SY([Aj({type:Object})],CY.prototype,"viewSettings",2),CY=SY([yj("viewer-2d")],CY);const EY=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return{_$litDirective$:e,values:i}};let TY=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}},IY=class extends TY{constructor(e){if(super(e),this.et=KQ,2!==e.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===KQ||null==e)return this.ft=void 0,this.et=e;if(e===YQ)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.ft;this.et=e;const t=[e];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}};IY.directiveName="unsafeHTML",IY.resultType=1;const MY=EY(IY);let kY=class extends IY{};kY.directiveName="unsafeSVG",kY.resultType=2;const BY=EY(kY),RY=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,i=arguments.length>2?arguments[2]:void 0,n=document.querySelector(e);return n||(n=i?i():document.createElement(e),t.insertBefore(n,t.firstChild))},PY=()=>{const e=document.createElement("meta");return e.setAttribute("name","ui5-shared-resources"),e.setAttribute("content",""),e},DY=(e,t)=>{const i=e.split(".");let n=typeof document>"u"?null:RY('meta[name="ui5-shared-resources"]',document.head,PY);if(!n)return t;for(let r=0;r<i.length;r++){const e=i[r],o=r===i.length-1;Object.prototype.hasOwnProperty.call(n,e)||(n[e]=o?t:{}),n=n[e]}return n};var LY=(e=>(e["SAP-icons"]="SAP-icons-v4",e.horizon="SAP-icons-v5",e["SAP-icons-TNT"]="tnt",e.BusinessSuiteInAppSymbols="business-suite",e))(LY||{});const OY=e=>LY[e]?LY[e]:e;var FY={},NY=FY.hasOwnProperty,zY=FY.toString,UY=NY.toString,HY=UY.call(Object),VY=function(e){var t,i;return!(!e||"[object Object]"!==zY.call(e)||(t=Object.getPrototypeOf(e))&&("function"!=typeof(i=NY.call(t,"constructor")&&t.constructor)||UY.call(i)!==HY))},$Y=Object.create(null),GY=function(e,t,i,n){var r,o,s,a,l,c,u=arguments[2]||{},h=3,d=arguments.length,p=arguments[0]||!1,f=arguments[1]?void 0:$Y;for("object"!=typeof u&&"function"!=typeof u&&(u={});h<d;h++)if(null!=(l=arguments[h]))for(a in l)r=u[a],s=l[a],"__proto__"!==a&&u!==s&&(p&&s&&(VY(s)||(o=Array.isArray(s)))?(o?(o=!1,c=r&&Array.isArray(r)?r:[]):c=r&&VY(r)?r:{},u[a]=GY(p,arguments[1],c,s)):s!==f&&(u[a]=s));return u};const QY=function(e,t){return GY(!0,!1,...arguments)};let jY=class{constructor(){this._eventRegistry=new Map}attachEvent(e,t){const i=this._eventRegistry,n=i.get(e);Array.isArray(n)?n.includes(t)||n.push(t):i.set(e,[t])}detachEvent(e,t){const i=this._eventRegistry,n=i.get(e);if(!n)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&i.delete(e)}fireEvent(e,t){const i=this._eventRegistry.get(e);return i?i.map((e=>e.call(this,t))):[]}fireEventAsync(e,t){return Promise.all(this.fireEvent(e,t))}isHandlerAttached(e,t){const i=this._eventRegistry.get(e);return!!i&&i.includes(t)}hasListeners(e){return!!this._eventRegistry.get(e)}},qY=class{constructor(){}};const WY=new Map,XY=new Map,YY=new Map,KY=new jY,ZY=e=>`componentFeatureLoad_${e}`,JY=e=>WY.get(e),eK=e=>XY.get(e),tK="sap_horizon",iK=["sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_horizon_exp","sap_horizon_dark_exp","sap_horizon_hcb_exp","sap_horizon_hcw_exp"],nK="en",rK="en",oK=["ar","ar_EG","ar_SA","bg","ca","cnr","cs","da","de","de_AT","de_CH","el","el_CY","en","en_AU","en_GB","en_HK","en_IE","en_IN","en_NZ","en_PG","en_SG","en_ZA","es","es_AR","es_BO","es_CL","es_CO","es_MX","es_PE","es_UY","es_VE","et","fa","fi","fr","fr_BE","fr_CA","fr_CH","fr_LU","he","hi","hr","hu","id","it","it_CH","ja","kk","ko","lt","lv","ms","mk","nb","nl","nl_BE","pl","pt","pt_PT","ro","ru","ru_UA","sk","sl","sr","sr_Latn","sv","th","tr","uk","vi","zh_CN","zh_HK","zh_SG","zh_TW"],sK=typeof document>"u",aK=()=>sK?"":window.location.href;var lK=(e=>(e.Full="full",e.Basic="basic",e.Minimal="minimal",e.None="none",e))(lK||{});const cK=new jY,uK=e=>{cK.attachEvent("configurationReset",e)};let hK=!1,dK={animationMode:lK.Full,theme:tK,themeRoot:void 0,rtl:void 0,language:void 0,timezone:void 0,calendarType:void 0,secondaryCalendarType:void 0,noConflict:!1,formatSettings:{},fetchDefaultLanguage:!1,defaultFontLoading:!0,enableDefaultTooltips:!0};const pK=new Map;pK.set("true",!0),pK.set("false",!1);const fK=(e,t,i)=>{const n=t.toLowerCase(),r=e.split(`${i}-`)[1];var o;pK.has(t)&&(t=pK.get(n)),"theme"===r?(dK.theme=(o=t,"theme"===r&&o.includes("@")?o.split("@")[0]:o),t&&t.includes("@")&&(dK.themeRoot=(e=>(e=>{let t;try{if(e.startsWith(".")||e.startsWith("/"))t=new URL(e,aK()).toString();else{const i=new URL(e),n=i.origin;t=n&&(e=>{const t=(()=>{const e=document.querySelector('META[name="sap-allowedThemeOrigins"]');return e&&e.getAttribute("content")})();return t&&t.split(",").some((t=>"*"===t||e===t.trim()))})(n)?i.toString():((e,t)=>{const i=new URL(e).pathname;return new URL(i,t).toString()})(i.toString(),aK())}return t.endsWith("/")||(t=`${t}/`),`${t}UI5/`}catch{}})(e.split("@")[1]))(t))):dK[r]=t},gK=()=>{typeof document>"u"||hK||(mK(),hK=!0)},mK=e=>{(()=>{const e=document.querySelector("[data-ui5-config]")||document.querySelector("[data-id='sap-ui-config']");let t;if(e){try{t=JSON.parse(e.innerHTML)}catch{console.warn("Incorrect data-sap-ui-config format. Please use JSON")}t&&(dK=QY(dK,t))}})(),(()=>{const e=new URLSearchParams(sK?"":window.location.search);e.forEach(((e,t)=>{const i=t.split("sap-").length;0===i||i===t.split("sap-ui-").length||fK(t,e,"sap")})),e.forEach(((e,t)=>{t.startsWith("sap-ui")&&fK(t,e,"sap-ui")}))})(),(()=>{const e=JY("OpenUI5Support");if(!e||!e.isOpenUI5Detected())return;const t=e.getConfigurationSettingsObject();dK=QY(dK,t)})()},_K={version:"2.4.0",major:2,minor:4,patch:0,suffix:"",isNext:!1,buildTime:1730643247};let vK={include:[/^ui5-/],exclude:[]};const yK=new Map,bK=e=>{if(!yK.has(e)){const t=vK.include.some((t=>e.match(t)))&&!vK.exclude.some((t=>e.match(t)));yK.set(e,t)}return yK.get(e)},AK=e=>{const t=`v${_K.version.replaceAll(".","-")}`;return e.replaceAll(/(--_?ui5)([^,:)\s]+)/g,`$1-${t}$2`)};let wK;const xK=new Map,SK=DY("Runtimes",[]),CK=()=>wK,EK=(e,t)=>{const i=`${e},${t}`;if(xK.has(i))return xK.get(i);const n=SK[e],r=SK[t];if(!n||!r)throw new Error("Invalid runtime index supplied");if(n.isNext||r.isNext)return n.buildTime-r.buildTime;const o=n.major-r.major;if(o)return o;const s=n.minor-r.minor;if(s)return s;const a=n.patch-r.patch;if(a)return a;const l=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare(n.suffix,r.suffix);return xK.set(i,l),l},TK=DY("Tags",new Map),IK=new Set;let MK,kK=new Map;const BK=()=>[...IK.values()],RK=new Set,PK=new Set,DK=new jY,LK=new class{constructor(){this.list=[],this.lookup=new Set}add(e){this.lookup.has(e)||(this.list.push(e),this.lookup.add(e))}remove(e){this.lookup.has(e)&&(this.list=this.list.filter((t=>t!==e)),this.lookup.delete(e))}shift(){const e=this.list.shift();if(e)return this.lookup.delete(e),e}isEmpty(){return 0===this.list.length}isAdded(e){return this.lookup.has(e)}process(e){let t;const i=new Map;for(t=this.shift();t;){const n=i.get(t)||0;if(n>10)throw new Error("Web component processed too many times this task, max allowed is: 10");e(t),i.set(t,n+1),t=this.shift()}}};let OK,FK,NK,zK;const UK=async e=>{LK.add(e),await VK()},HK=e=>{DK.fireEvent("beforeComponentRender",e),PK.add(e),e._render()},VK=async()=>{zK||(zK=new Promise((e=>{window.requestAnimationFrame((()=>{LK.process(HK),zK=null,e(),NK||(NK=setTimeout((()=>{NK=void 0,LK.isEmpty()&&GK()}),200))}))}))),await zK},$K=async()=>{await(()=>{const e=BK().map((e=>customElements.whenDefined(e)));return Promise.all(e)})(),await(OK||(OK=new Promise((e=>{FK=e,window.requestAnimationFrame((()=>{LK.isEmpty()&&(OK=void 0,e())}))})),OK))},GK=()=>{LK.isEmpty()&&FK&&(FK(),FK=void 0,OK=void 0)},QK=typeof document>"u",jK=(e,t)=>t?`${e}|${t}`:e,qK=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const r="string"==typeof e?e:e.content,o=CK(),s=new CSSStyleSheet;s.replaceSync(r),s._ui5StyleId=jK(t,i),n&&(s._ui5RuntimeIndex=o,s._ui5Theme=n),document.adoptedStyleSheets=[...document.adoptedStyleSheets,s]},WK=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!!QK||!!document.adoptedStyleSheets.find((i=>i._ui5StyleId===jK(e,t)))},XK=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;WK(t,i)?function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const r="string"==typeof e?e:e.content,o=CK(),s=document.adoptedStyleSheets.find((e=>e._ui5StyleId===jK(t,i)));if(s)if(n){const e=s._ui5RuntimeIndex;(s._ui5Theme!==n||void 0===(a=e)||1===EK(CK(),parseInt(a)))&&(s.replaceSync(r||""),s._ui5RuntimeIndex=String(o),s._ui5Theme=n)}else s.replaceSync(r||"");var a}(e,t,i,n):qK(e,t,i,n)},YK=new jY,KK="themeRegistered",ZK=new Map,JK=new Map,eZ=new Map,tZ=new Set,iZ=new Set,nZ=(e,t,i)=>{var n;JK.set(`${e}/${t}`,i),tZ.add(e),iZ.add(t),n=t,YK.fireEvent(KK,n)},rZ=async(e,t,i)=>{const n=`${e}_${t}_${i||""}`,r=ZK.get(n);if(void 0!==r)return r;if(!iZ.has(t)){const i=[...iZ.values()].join(", ");return console.warn(`You have requested a non-registered theme ${t} - falling back to ${tK}. Registered themes are: ${i}`),oZ(e,tK)}const[o,s]=await Promise.all([oZ(e,t),i?oZ(e,i,!0):void 0]),a=((e,t)=>{if(void 0===e)return t;if(void 0===t)return e;const i="string"==typeof t?t:t.content;return"string"==typeof e?`${e} ${i}`:{content:`${e.content} ${i}`,packageName:e.packageName,fileName:e.fileName}})(o,s);return a&&ZK.set(n,a),a},oZ=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(i?eZ:JK).get(`${e}/${t}`);if(!n)return void(i||console.error(`Theme [${t}] not registered for package [${e}]`));let r;try{r=await n(t)}catch(t){return void console.error(e,t.message)}return r._||r},sZ=()=>tZ,aZ=new Set,lZ=()=>{const e=(()=>{let e=document.querySelector(".sapThemeMetaData-Base-baseLib")||document.querySelector(".sapThemeMetaData-UI5-sap-ui-core");if(e)return getComputedStyle(e).backgroundImage;e=document.createElement("span"),e.style.display="none",e.classList.add("sapThemeMetaData-Base-baseLib"),document.body.appendChild(e);let t=getComputedStyle(e).backgroundImage;return"none"===t&&(e.classList.add("sapThemeMetaData-UI5-sap-ui-core"),t=getComputedStyle(e).backgroundImage),document.body.removeChild(e),t})();if(!e||"none"===e)return;const t=(e=>{const t=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)$/i.exec(e);if(t&&t.length>=2){let e=t[1];if(e=e.replace(/\\"/g,'"'),"{"!==e.charAt(0)&&"}"!==e.charAt(e.length-1))try{e=decodeURIComponent(e)}catch{return void(aZ.has("decode")||(console.warn("Malformed theme metadata string, unable to decodeURIComponent"),aZ.add("decode")))}try{return JSON.parse(e)}catch{aZ.has("parse")||(console.warn("Malformed theme metadata string, unable to parse JSON"),aZ.add("parse"))}}})(e);return t?(e=>{let t,i;try{t=e.Path.match(/\.([^.]+)\.css_variables$/)[1],i=e.Extends[0]}catch{return void(aZ.has("object")||(console.warn("Malformed theme metadata Object",e),aZ.add("object")))}return{themeName:t,baseThemeName:i}})(t):void 0},cZ=new jY;let uZ;uK((()=>{uZ=void 0}));const hZ=()=>(void 0===uZ&&(gK(),uZ=dK.themeRoot),uZ),dZ="@ui5/webcomponents-theming",pZ=async e=>{const t=await(async e=>{var t;const i=lZ();if(i)return i;const n=JY("OpenUI5Support");if(n&&n.isOpenUI5Detected()){if(n.cssVariablesLoaded())return{themeName:null==(t=n.getConfigurationSettingsObject())?void 0:t.theme,baseThemeName:""}}else if(hZ())return await(async e=>{const t=document.querySelector(`[sap-ui-webcomponents-theme="${e}"]`);var i;t&&document.head.removeChild(t),await((e,t)=>{const i=document.createElement("link");return i.type="text/css",i.rel="stylesheet",t&&Object.entries(t).forEach((e=>i.setAttribute(...e))),i.href=e,document.head.appendChild(i),new Promise((e=>{i.addEventListener("load",e),i.addEventListener("error",e)}))})((i=e,`${hZ()}Base/baseLib/${i}/css_variables.css`),{"sap-ui-webcomponents-theme":e})})(e),lZ()})(e);t&&e===t.themeName?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.adoptedStyleSheets=document.adoptedStyleSheets.filter((i=>i._ui5StyleId!==jK(e,t)))}("data-ui5-theme-properties",dZ):await(async e=>{if(!sZ().has(dZ))return;const t=await rZ(dZ,e);t&&XK(t,"data-ui5-theme-properties",dZ,e)})(e);const i=(n=e,iZ.has(n)?e:t&&t.baseThemeName);var n;await(async(e,t)=>{const i=[...sZ()].map((async i=>{if(i===dZ)return;const n=await rZ(i,e,t);n&&XK(n,`data-ui5-component-properties-${CK()}`,i)}));return Promise.all(i)})(i||tK,t&&t.themeName===e?e:void 0),(e=>{cZ.fireEvent("themeLoaded",e)})(e)},fZ={packageName:"@ui5/webcomponents-base",fileName:"FontFace.css",content:"@font-face{font-family:\"72\";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular.woff2?ui5-webcomponents) format(\"woff2\"),local(\"72\");unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:\"72full\";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular-full.woff2?ui5-webcomponents) format(\"woff2\"),local('72-full')}@font-face{font-family:\"72\";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:\"72full\";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72-Bold';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Boldfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72-Light';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Light');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Lightfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72Mono';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular.woff2?ui5-webcomponents) format('woff2'),local('72Mono');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Monofull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:'72Mono-Bold';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold.woff2?ui5-webcomponents) format('woff2'),local('72Mono-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Mono-Boldfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:\"72Black\";font-style:bold;font-weight:900;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black.woff2?ui5-webcomponents) format(\"woff2\"),local('72Black');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Blackfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:\"72-SemiboldDuplex\";src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-SemiboldDuplex.woff2?ui5-webcomponents) format(\"woff2\"),local('72-SemiboldDuplex');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}"},gZ={packageName:"@ui5/webcomponents-base",fileName:"OverrideFontFace.css",content:"@font-face{font-family:'72override';unicode-range:U+0102-0103,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EB7,U+1EB8-1EC7,U+1EC8-1ECB,U+1ECC-1EE3,U+1EE4-1EF1,U+1EF4-1EF7;src:local('Arial'),local('Helvetica'),local('sans-serif')}"};let mZ;uK((()=>{mZ=void 0}));const _Z={packageName:"@ui5/webcomponents-base",fileName:"SystemCSSVars.css",content:":root{--_ui5_content_density:cozy}.sapUiSizeCompact,.ui5-content-density-compact,[data-ui5-compact-size]{--_ui5_content_density:compact}"},vZ=typeof document>"u",yZ={get userAgent(){return vZ?"":navigator.userAgent},get touch(){return!vZ&&("ontouchstart"in window||navigator.maxTouchPoints>0)},get chrome(){return!vZ&&/(Chrome|CriOS)/.test(yZ.userAgent)},get firefox(){return!vZ&&/Firefox/.test(yZ.userAgent)},get safari(){return!vZ&&!yZ.chrome&&/(Version|PhantomJS)\/(\d+\.\d+).*Safari/.test(yZ.userAgent)},get webkit(){return!vZ&&/webkit/.test(yZ.userAgent)},get windows(){return!vZ&&-1!==navigator.platform.indexOf("Win")},get macOS(){return!vZ&&!!navigator.userAgent.match(/Macintosh|Mac OS X/i)},get iOS(){return!(vZ||!navigator.platform.match(/iPhone|iPad|iPod/)&&(!yZ.userAgent.match(/Mac/)||!("ontouchend"in document)))},get android(){return!vZ&&!yZ.windows&&/Android/.test(yZ.userAgent)},get androidPhone(){return!vZ&&yZ.android&&/(?=android)(?=.*mobile)/i.test(yZ.userAgent)},get ipad(){return!vZ&&(/ipad/i.test(yZ.userAgent)||/Macintosh/i.test(yZ.userAgent)&&"ontouchend"in document)},_isPhone:()=>(SZ(),yZ.touch&&!wZ)};let bZ,AZ,wZ;const xZ=()=>{if(vZ||!yZ.windows)return!1;if(void 0===bZ){const e=yZ.userAgent.match(/Windows NT (\d+).(\d)/);bZ=e?parseFloat(e[1]):0}return bZ>=8},SZ=()=>{if(vZ)return!1;if(void 0===wZ){if(yZ.ipad)return void(wZ=!0);if(yZ.touch){if(xZ())return void(wZ=!0);if(yZ.chrome&&yZ.android)return void(wZ=!/Mobile Safari\/[.0-9]+/.test(yZ.userAgent));let e=window.devicePixelRatio?window.devicePixelRatio:1;return yZ.android&&(()=>{if(vZ||!yZ.webkit)return!1;if(void 0===AZ){const e=yZ.userAgent.match(/(webkit)[ /]([\w.]+)/);AZ=e?parseFloat(e[1]):0}return AZ>=537.1})()&&(e=1),void(wZ=Math.min(window.screen.width/e,window.screen.height/e)>=600)}wZ=-1!==yZ.userAgent.indexOf("Touch")||yZ.android&&!yZ.androidPhone}},CZ=()=>yZ.touch,EZ=()=>yZ.safari,TZ=()=>yZ._isPhone(),IZ=()=>!vZ&&(SZ(),!((yZ.touch||xZ())&&wZ||TZ())||xZ()),MZ=()=>yZ.iOS;let kZ,BZ=!1,RZ=!1;const PZ=new jY,DZ=async()=>(void 0!==kZ||(kZ=new Promise((async e=>{if((()=>{if(void 0===wK){wK=SK.length;const e=_K;SK.push({...e,get scopingSuffix(){},get registeredTags(){return BK()},get scopingRules(){return vK},alias:"",description:`Runtime ${wK} - ver ${e.version}`})}})(),typeof document>"u")return void e();var t;t=LZ,YK.attachEvent(KK,t);const i=JY("OpenUI5Support"),n=!!i&&i.isOpenUI5Detected(),r=JY("F6Navigation");i&&await i.init(),r&&!n&&r.init(),await new Promise((e=>{document.body?e():document.addEventListener("DOMContentLoaded",(()=>{e()}))})),await pZ(FZ()),i&&i.attachListeners(),(()=>{const e=JY("OpenUI5Support");(!e||!e.isOpenUI5Detected())&&(()=>{const e=document.querySelector("head>style[data-ui5-font-face]");void 0===mZ&&(gK(),mZ=dK.defaultFontLoading),!mZ||e||WK("data-ui5-font-face")||qK(fZ,"data-ui5-font-face")})(),WK("data-ui5-font-face-override")||qK(gZ,"data-ui5-font-face-override")})(),WK("data-ui5-system-css-vars")||qK(_Z,"data-ui5-system-css-vars"),EZ()&&MZ()&&!BZ&&(document.body.addEventListener("touchstart",(()=>{})),BZ=!0),e(),RZ=!0,PZ.fireEvent("boot")}))),kZ),LZ=e=>{RZ&&e===FZ()&&pZ(FZ())};let OZ;uK((()=>{OZ=void 0}));const FZ=()=>(void 0===OZ&&(gK(),OZ=dK.theme),OZ);var NZ=(e=>(e.SAPIconsV4="SAP-icons-v4",e.SAPIconsV5="SAP-icons-v5",e.SAPIconsTNTV2="tnt-v2",e.SAPIconsTNTV3="tnt-v3",e.SAPBSIconsV1="business-suite-v1",e.SAPBSIconsV2="business-suite-v2",e))(NZ||{});const zZ=new Map;zZ.set("SAP-icons",{legacy:"SAP-icons-v4",sap_horizon:"SAP-icons-v5"}),zZ.set("tnt",{legacy:"tnt-v2",sap_horizon:"tnt-v3"}),zZ.set("business-suite",{legacy:"business-suite-v1",sap_horizon:"business-suite-v2"});const UZ=new Map,HZ=e=>{const t=(i=FZ(),UZ.get(i));var i;return!e&&t?OY(t):(e=>{const t=(()=>{var e,t;const i=FZ();return(e=>iK.includes(e))(i)?!i.startsWith("sap_horizon"):!(null==(t=null==(e=lZ())?void 0:e.baseThemeName)?void 0:t.startsWith("sap_horizon"))})()?"legacy":"sap_horizon";return zZ.has(e)?zZ.get(e)[t]:e})(e||"SAP-icons")},VZ=typeof document>"u",$Z=new jY,GZ=e=>{$Z.attachEvent("languageChange",e)};let QZ,jZ;uK((()=>{QZ=void 0,jZ=void 0}));const qZ=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;let WZ=class{constructor(e){const t=qZ.exec(e.replace(/_/g,"-"));if(null===t)throw new Error(`The given language ${e} does not adhere to BCP-47.`);this.sLocaleId=e,this.sLanguage=t[1]||nK,this.sScript=t[2]||"",this.sRegion=t[3]||"",this.sVariant=t[4]&&t[4].slice(1)||null,this.sExtension=t[5]&&t[5].slice(1)||null,this.sPrivateUse=t[6]||null,this.sLanguage&&(this.sLanguage=this.sLanguage.toLowerCase()),this.sScript&&(this.sScript=this.sScript.toLowerCase().replace(/^[a-z]/,(e=>e.toUpperCase()))),this.sRegion&&(this.sRegion=this.sRegion.toUpperCase())}getLanguage(){return this.sLanguage}getScript(){return this.sScript}getRegion(){return this.sRegion}getVariant(){return this.sVariant}getVariantSubtags(){return this.sVariant?this.sVariant.split("-"):[]}getExtension(){return this.sExtension}getExtensionSubtags(){return this.sExtension?this.sExtension.slice(2).split("-"):[]}getPrivateUse(){return this.sPrivateUse}getPrivateUseSubtags(){return this.sPrivateUse?this.sPrivateUse.slice(2).split("-"):[]}hasPrivateUseSubtag(e){return this.getPrivateUseSubtags().indexOf(e)>=0}toString(){const e=[this.sLanguage];return this.sScript&&e.push(this.sScript),this.sRegion&&e.push(this.sRegion),this.sVariant&&e.push(this.sVariant),this.sExtension&&e.push(this.sExtension),this.sPrivateUse&&e.push(this.sPrivateUse),e.join("-")}};const XZ=new Map,YZ=e=>(XZ.has(e)||XZ.set(e,new WZ(e)),XZ.get(e)),KZ=e=>{const t=(void 0===QZ&&(gK(),QZ=dK.language),QZ);return t?YZ(t):(e=>{try{if(e&&"string"==typeof e)return YZ(e)}catch{}return new WZ(rK)})((()=>{if(VZ)return nK;const e=navigator.languages;return e&&e[0]||navigator.language||nK})())},ZZ=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i,JZ=/(?:^|-)(saptrc|sappsd)(?:-|$)/i,eJ={he:"iw",yi:"ji",nb:"no",sr:"sh"},tJ=e=>{if(!e)return rK;if("zh_HK"===e)return"zh_TW";const t=e.lastIndexOf("_");return t>=0?e.slice(0,t):e!==rK?rK:""},iJ=new Set,nJ=new Set,rJ=new Map,oJ=new Map,sJ=new Map,aJ=(e,t)=>{rJ.set(e,t)},lJ=(e,t)=>{const i=`${e}/${t}`;return sJ.has(i)},cJ=(e,t)=>t!==nK&&!lJ(e,t),uJ=async e=>{const t=KZ().getLanguage(),i=KZ().getRegion(),n=KZ().getVariant();let r=t+(i?`-${i}`:"")+(n?`-${n}`:"");if(cJ(e,r))for(r=(e=>{let t;if(!e)return rK;if("string"==typeof e&&(t=ZZ.exec(e.replace(/_/g,"-")))){let e=t[1].toLowerCase(),i=t[3]?t[3].toUpperCase():void 0;const n=t[2]?t[2].toLowerCase():void 0,r=t[4]?t[4].slice(1):void 0,o=t[6];return e=eJ[e]||e,o&&(t=JZ.exec(o))||r&&(t=JZ.exec(r))?`en_US_${t[1].toLowerCase()}`:("zh"===e&&!i&&("hans"===n?i="CN":"hant"===n&&(i="TW")),e+(i?"_"+i+(r?"_"+r.replace("-","_"):""):""))}return rK})(r);cJ(e,r);)r=tJ(r);const o=(void 0===jZ&&(gK(),jZ=dK.fetchDefaultLanguage),jZ);if(r!==nK||o)if(lJ(e,r))try{const t=await((e,t)=>{const i=`${e}/${t}`,n=sJ.get(i);return n&&!oJ.get(i)&&oJ.set(i,n(t)),oJ.get(i)})(e,r);aJ(e,t)}catch(s){const e=s;nJ.has(e.message)||(nJ.add(e.message),console.error(e.message))}else s=e,iJ.has(s)||(console.warn(`[${s}]: Message bundle assets are not configured. Falling back to English texts.`,` Add \`import "${s}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`),iJ.add(s));else aJ(e,null);var s};GZ((e=>{const t=[...rJ.keys()];return Promise.all(t.map(uJ))}));const hJ=/('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g,dJ=new Map;let pJ=class{constructor(e){this.packageName=e}getText(e){if("string"==typeof e&&(e={key:e,defaultText:e}),!e||!e.key)return"";const t=(i=this.packageName,rJ.get(i));for(var i,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t&&!t[e.key]&&console.warn(`Key ${e.key} not found in the i18n bundle, the default text will be used`),((e,t)=>(t=t||[],e.replace(hJ,((e,i,n,r,o)=>{if(i)return"'";if(n)return n.replace(/''/g,"'");if(r){const e="string"==typeof r?parseInt(r):r;return String(t[e])}throw new Error(`[i18n]: pattern syntax error at pos ${o}`)}))))(t&&t[e.key]?t[e.key]:e.defaultText||e.key,r)}};const fJ=async e=>(await uJ(e),(e=>{if(dJ.has(e))return dJ.get(e);const t=new pJ(e);return dJ.set(e,t),t})(e)),gJ=new Map,mJ=DY("SVGIcons.registry",new Map),_J=DY("SVGIcons.promises",new Map),vJ="ICON_NOT_FOUND",yJ=e=>{Object.keys(e.data).forEach((t=>{const i=e.data[t];bJ(t,{pathData:i.path||i.paths,ltr:i.ltr,accData:i.acc,collection:e.collection,packageName:e.packageName})}))},bJ=(e,t)=>{const i=`${t.collection}/${e}`;mJ.set(i,{pathData:t.pathData,ltr:t.ltr,accData:t.accData,packageName:t.packageName,customTemplate:t.customTemplate,viewBox:t.viewBox,collection:t.collection})},AJ=e=>{let t;return e.startsWith("sap-icon://")&&(e=e.replace("sap-icon://","")),[e,t]=e.split("/").reverse(),e=e.replace("icon-",""),t&&(t=OY(t)),{name:e,collection:t}},wJ=e=>{const{name:t,collection:i}=AJ(e);return SJ(i,t)},xJ=async e=>{const{name:t,collection:i}=AJ(e);let n=vJ;try{n=await(async e=>{if(!_J.has(e)){if(!gJ.has(e))throw new Error(`No loader registered for the ${e} icons collection. Probably you forgot to import the "AllIcons.js" module for the respective package.`);const t=gJ.get(e);_J.set(e,t(e))}return _J.get(e)})(HZ(i))}catch(e){console.error(e.message)}return n===vJ?n:SJ(i,t)||(Array.isArray(n)?n.forEach((e=>{var t,n;yJ(e),t=i,n={[e.themeFamily||"legacy"]:e.collection},zZ.has(t)?zZ.set(t,{...n,...zZ.get(t)}):zZ.set(t,n)})):yJ(n),SJ(i,t))},SJ=(e,t)=>{const i=`${HZ(e)}/${t}`;return mJ.get(i)},CJ=new Map,EJ=new Map,TJ=new Map,IJ=e=>{if(!CJ.has(e)){const t=kJ(e.split("-"));CJ.set(e,t)}return CJ.get(e)},MJ=e=>{if(!EJ.has(e)){const t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();EJ.set(e,t)}return EJ.get(e)},kJ=e=>e.map(((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(""),BJ=e=>{const t=TJ.get(e);if(t)return t;const i=IJ(e),n=i.charAt(0).toUpperCase()+i.slice(1);return TJ.set(e,n),n},RJ=e=>e instanceof HTMLSlotElement?e.assignedNodes({flatten:!0}).filter((e=>e instanceof HTMLElement)):[e],PJ=e=>e.reduce(((e,t)=>e.concat(RJ(t))),[]);let DJ=class{constructor(e){this.metadata=e}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const e={};if(this.slotsAreManaged()){const t=this.getSlots();for(const[i,n]of Object.entries(t)){const t=n.propertyName||i;e[t]=[],e[IJ(t)]=e[t]}}return this._initialState=e,e}static validateSlotValue(e,t){return LJ(e,t)}getPureTag(){return this.metadata.tag||""}getFeatures(){return this.metadata.features||[]}getTag(){const e=this.metadata.tag;if(!e)return"";const t=void bK(e);return t?`${e}-${t}`:e}hasAttribute(e){const t=this.getProperties()[e];return t.type!==Object&&t.type!==Array&&!t.noAttribute}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(MJ)}canSlotText(){var e;return(null==(e=this.getSlots().default)?void 0:e.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some((e=>e.individualSlots))}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}needsCLDR(){return!!this.metadata.cldr}getShadowRootOptions(){return this.metadata.shadowRootOptions||{}}isFormAssociated(){return!!this.metadata.formAssociated}shouldInvalidateOnChildChange(e,t,i){const n=this.getSlots()[e].invalidateOnChildChange;if(void 0===n)return!1;if("boolean"==typeof n)return n;if("object"==typeof n){if("property"===t){if(void 0===n.properties)return!1;if("boolean"==typeof n.properties)return n.properties;if(Array.isArray(n.properties))return n.properties.includes(i);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if("slot"===t){if(void 0===n.slots)return!1;if("boolean"==typeof n.slots)return n.slots;if(Array.isArray(n.slots))return n.slots.includes(i);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}getI18n(){return this.metadata.i18n||(this.metadata.i18n={}),this.metadata.i18n}};const LJ=(e,t)=>(e&&RJ(e).forEach((e=>{if(!(e instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)})),e),OJ=e=>{DY("CustomStyle.eventProvider",new jY).attachEvent("CustomCSSChange",e)};OJ((e=>{(async e=>{PK.forEach((t=>{const i=t.constructor,n=i.getMetadata().getTag(),r=(a=i,RK.has(a)),o=i.getMetadata().isLanguageAware(),s=i.getMetadata().isThemeAware();var a;(!e||e.tag===n||e.rtlAware&&r||e.languageAware&&o||e.themeAware&&s)&&UK(t)})),await $K()})({tag:e})}));const FJ=e=>Array.isArray(e)?e.filter((e=>!!e)).flat(10).map((e=>"string"==typeof e?e:e.content)).join(" "):"string"==typeof e?e:e.content,NJ=new Map;OJ((e=>{NJ.delete(`${e}_normal`)}));const zJ=new Map;OJ((e=>{zJ.delete(`${e}_normal`)}));const UJ=[],HJ=new WeakMap,VJ=["value-changed","click"];let $J;uK((()=>{$J=void 0}));const GJ=()=>(void 0===$J&&(gK(),$J=dK.noConflict),$J),QJ=["disabled","title","hidden","role","draggable"],jJ=e=>!(!QJ.includes(e)&&!e.startsWith("aria")&&[HTMLElement,Element,Node].some((t=>t.prototype.hasOwnProperty(e)))),qJ=(e,t)=>{if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},WJ=(e,t)=>{const i=XJ(t);return e.call(t,t,i,void 0)},XJ=e=>{const t=e.constructor,i=t.getMetadata().getPureTag(),n=t.getUniqueDependencies().map((e=>e.getMetadata().getPureTag())).filter(bK);return bK(i)&&n.push(i),n},YJ=e=>{var t,i;if(null==(t=e._internals)?void 0:t.form){if(KJ(e),!e.name)return void(null==(i=e._internals)||i.setFormValue(null));e._internals.setFormValue(e.formFormattedValue)}},KJ=async e=>{var t,i;if(null==(t=e._internals)?void 0:t.form)if(e.formValidity&&Object.keys(e.formValidity).some((e=>e))){const t=await(null==(i=e.formElementAnchor)?void 0:i.call(e));e._internals.setValidity(e.formValidity,e.formValidityMessage,t)}else e._internals.setValidity({})},ZJ=e=>{var t,i;null==(i=null==(t=e._internals)?void 0:t.form)||i.requestSubmit()},JJ=new Map,e0=new Map,t0=new Map,i0=new Set;let n0=!1;const r0={iw:"he",ji:"yi",in:"id"},o0=e=>{n0||(console.warn(`[LocaleData] Supported locale "${e}" not configured, import the "Assets.js" module from the webcomponents package you are using.`),n0=!0)},s0=(e,t)=>{JJ.set(e,t)},a0=async(e,t,i)=>{const n=((e,t,i)=>{"no"===(e=e&&r0[e]||e)&&(e="nb"),"zh"===e&&!t&&("Hans"===i?t="CN":"Hant"===i&&(t="TW")),("sh"===e||"sr"===e&&"Latn"===i)&&(e="sr",t="Latn");let n=`${e}_${t}`;return oK.includes(n)?e0.has(n)?n:(o0(n),rK):(n=e,oK.includes(n)?e0.has(n)?n:(o0(n),rK):rK)})(e,t,i),r=JY("OpenUI5Support");if(r){const e=r.getLocaleDataObject();if(e)return void s0(n,e)}try{const e=await(e=>{if(!t0.get(e)){const t=e0.get(e);if(!t)throw new Error(`CLDR data for locale ${e} is not loaded!`);t0.set(e,t(e))}return t0.get(e)})(n);s0(n,e)}catch(e){const t=e;i0.has(t.message)||(i0.add(t.message),console.error(t.message))}};e0.set("en",(async()=>(await fetch("https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json")).json())),GZ((()=>{const e=KZ();return a0(e.getLanguage(),e.getRegion(),e.getScript())}));let l0=0;const c0=new Map,u0=new Map,h0={fromAttribute:(e,t)=>t===Boolean?null!==e:t===Number?null===e?void 0:parseFloat(e):e,toAttribute:(e,t)=>t===Boolean?e?"":null:t===Object||t===Array||null==e?null:String(e)};function d0(e){this._suppressInvalidation||(this.onInvalidation(e),this._changedState.push(e),UK(this),this._invalidationEventProvider.fireEvent("invalidate",{...e,target:this}))}function p0(e,t){do{const i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;e=Object.getPrototypeOf(e)}while(e&&e!==HTMLElement.prototype)}let f0=(oQ=class extends HTMLElement{constructor(){super(),this._rendered=!1;const e=this.constructor;let t;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new jY,this._componentStateFinalizedEventProvider=new jY,this._domRefReadyPromise=new Promise((e=>{t=e})),this._domRefReadyPromise._deferredResolve=t,this._doNotSyncAttributes=new Set,this._slotsAssignedNodes=new WeakMap,this._state={...e.getMetadata().getInitialState()},this.initializedProperties=new Map,this.constructor.getMetadata().getPropertiesList().forEach((e=>{if(this.hasOwnProperty(e)){const t=this[e];this.initializedProperties.set(e,t)}})),this._internals=this.attachInternals(),this._initShadowRoot()}_initShadowRoot(){const e=this.constructor;if(e._needsShadowDOM()){const t={mode:"open"};this.attachShadow({...t,...e.getMetadata().getShadowRootOptions()}),e.getMetadata().slotsAreManaged()&&this.shadowRoot.addEventListener("slotchange",this._onShadowRootSlotChange.bind(this))}}_onShadowRootSlotChange(e){var t;(null==(t=e.target)?void 0:t.getRootNode())===this.shadowRoot&&this._processChildren()}get _id(){return this.__id||(this.__id="ui5wc_"+ ++l0),this.__id}render(){const e=this.constructor.template;return WJ(e,this)}async connectedCallback(){const e=this.constructor;this.setAttribute(e.getMetadata().getPureTag(),""),e.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const t=e.getMetadata().slotsAreManaged();this._inDOM=!0,t&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(e.asyncFinished||await e.definePromise,HK(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const e=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,e&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this._domRefReadyPromise._deferredResolve(),LK.remove(this),PK.delete(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const e=this.constructor.getMetadata();if(!e.hasSlots())return;const t=e.canSlotText(),i={childList:!0,subtree:t,characterData:t};((e,t,i)=>{const n=new MutationObserver(t);HJ.set(e,n),n.observe(e,i)})(this,this._processChildren.bind(this),i)}_stopObservingDOMChildren(){(e=>{const t=HJ.get(e);t&&(t.disconnect(),HJ.delete(e))})(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const e=this.constructor,t=e.getMetadata().getSlots(),i=e.getMetadata().canSlotText(),n=Array.from(i?this.childNodes:this.children),r=new Map,o=new Map;for(const[u,h]of Object.entries(t)){const e=h.propertyName||u;o.set(e,u),r.set(e,[...this._state[e]]),this._clearSlot(u,h)}const s=new Map,a=new Map,l=n.map((async(i,n)=>{const r=(e=>{if(!(e instanceof HTMLElement))return"default";const t=e.getAttribute("slot");if(t){const e=t.match(/^(.+?)-\d+$/);return e?e[1]:t}return"default"})(i),o=t[r];if(void 0===o){if("default"!==r){const e=Object.keys(t).join(", ");console.warn(`Unknown slotName: ${r}, ignoring`,i,`Valid values are: ${e}`)}return}if(o.individualSlots){const e=(s.get(r)||0)+1;s.set(r,e),i._individualSlot=`${r}-${e}`}if(i instanceof HTMLElement){const e=i.localName;if(e.includes("-")&&(l=e,!UJ.some((e=>l.startsWith(e))))){if(!customElements.get(e)){const t=customElements.whenDefined(e);let i=c0.get(e);i||(i=new Promise((e=>setTimeout(e,1e3))),c0.set(e,i)),await Promise.race([t,i])}customElements.upgrade(i)}}var l;if(i=e.getMetadata().constructor.validateSlotValue(i,o),g0(i)&&o.invalidateOnChildChange){const e=this._getChildChangeListener(r);i.attachInvalidate.call(i,e)}i instanceof HTMLSlotElement&&this._attachSlotChange(i,r,!!o.invalidateOnChildChange);const c=o.propertyName||r;a.has(c)?a.get(c).push({child:i,idx:n}):a.set(c,[{child:i,idx:n}])}));await Promise.all(l),a.forEach(((e,t)=>{this._state[t]=e.sort(((e,t)=>e.idx-t.idx)).map((e=>e.child)),this._state[IJ(t)]=this._state[t]}));let c=!1;for(const[u,h]of Object.entries(t)){const t=h.propertyName||u;qJ(r.get(t),this._state[t])||(d0.call(this,{type:"slot",name:o.get(t),reason:"children"}),c=!0,e.getMetadata().isFormAssociated()&&YJ(this))}c||d0.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(e,t){const i=t.propertyName||e;this._state[i].forEach((t=>{if(g0(t)){const i=this._getChildChangeListener(e);t.detachInvalidate.call(t,i)}t instanceof HTMLSlotElement&&this._detachSlotChange(t,e)})),this._state[i]=[],this._state[IJ(i)]=this._state[i]}attachInvalidate(e){this._invalidationEventProvider.attachEvent("invalidate",e)}detachInvalidate(e){this._invalidationEventProvider.detachEvent("invalidate",e)}_onChildChange(e,t){this.constructor.getMetadata().shouldInvalidateOnChildChange(e,t.type,t.name)&&d0.call(this,{type:"slot",name:e,reason:"childchange",child:t.target})}attributeChangedCallback(e,t,i){let n;if(this._doNotSyncAttributes.has(e))return;const r=this.constructor.getMetadata().getProperties(),o=e.replace(/^ui5-/,""),s=IJ(o);if(r.hasOwnProperty(s)){const e=r[s];n=(e.converter??h0).fromAttribute(i,e.type),this[s]=n}}formAssociatedCallback(){this.constructor.getMetadata().isFormAssociated()&&(e=>{(e=>"formFormattedValue"in e&&"name"in e)(e)&&YJ(e)})(this)}static get formAssociated(){return this.getMetadata().isFormAssociated()}_updateAttribute(e,t){const i=this.constructor;if(!i.getMetadata().hasAttribute(e))return;const n=i.getMetadata().getProperties()[e],r=MJ(e),o=(n.converter||h0).toAttribute(t,n.type);this._doNotSyncAttributes.add(r),null==o?this.removeAttribute(r):this.setAttribute(r,o),this._doNotSyncAttributes.delete(r)}_getChildChangeListener(e){return this._childChangeListeners.has(e)||this._childChangeListeners.set(e,this._onChildChange.bind(this,e)),this._childChangeListeners.get(e)}_getSlotChangeListener(e){return this._slotChangeListeners.has(e)||this._slotChangeListeners.set(e,this._onSlotChange.bind(this,e)),this._slotChangeListeners.get(e)}_attachSlotChange(e,t,i){const n=this._getSlotChangeListener(t);e.addEventListener("slotchange",(r=>{if(n.call(e,r),i){const i=this._slotsAssignedNodes.get(e);i&&i.forEach((e=>{if(g0(e)){const i=this._getChildChangeListener(t);e.detachInvalidate.call(e,i)}}));const n=PJ([e]);this._slotsAssignedNodes.set(e,n),n.forEach((e=>{if(g0(e)){const i=this._getChildChangeListener(t);e.attachInvalidate.call(e,i)}}))}}))}_detachSlotChange(e,t){e.removeEventListener("slotchange",this._getSlotChangeListener(t))}_onSlotChange(e){d0.call(this,{type:"slot",name:e,reason:"slotchange"})}onInvalidation(e){}updateAttributes(){const e=this.constructor.getMetadata().getProperties();for(const[t,i]of Object.entries(e))this._updateAttribute(t,this[t])}_render(){const e=this.constructor,t=e.getMetadata().hasIndividualSlots();this.initializedProperties.size>0&&(Array.from(this.initializedProperties.entries()).forEach((e=>{let[t,i]=e;delete this[t],this[t]=i})),this.initializedProperties.clear()),this._suppressInvalidation=!0;try{this.onBeforeRendering(),this._rendered||this.updateAttributes(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized")}finally{this._suppressInvalidation=!1}this._changedState=[],e._needsShadowDOM()&&(e=>{const t=e.constructor,i=e.shadowRoot,n=e.render();i?(i.adoptedStyleSheets=(e=>{const t=`${e.getMetadata().getTag()}_normal`;if(!zJ.has(t)){const i=(e=>{const t=e.getMetadata().getTag(),i=`${t}_normal`,n=JY("OpenUI5Enablement");if(!NJ.has(i)){let r="";n&&(r=FJ(n.getBusyIndicatorStyles()));const o=(e=>{const t=DY("CustomStyle.customCSSFor",{});return t[e]?t[e].join(""):""})(t)||"",s=`${FJ(e.styles)} ${o} ${r}`;NJ.set(i,s)}return NJ.get(i)})(e),n=new CSSStyleSheet;n.replaceSync(i),zJ.set(t,[n])}return zJ.get(t)})(t),t.renderer(n,i,{host:e})):console.warn("There is no shadow root to update")})(this),this._rendered=!0,t&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach((e=>{e._individualSlot&&e.setAttribute("slot",e._individualSlot)}))}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){return"function"==typeof this._getRealDomRef?this._getRealDomRef():this.shadowRoot&&0!==this.shadowRoot.children.length?this.shadowRoot.children[0]:void 0}getFocusDomRef(){const e=this.getDomRef();if(e)return e.querySelector("[data-sap-focus-ref]")||e}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(e){await this._waitForDomRef();const t=this.getFocusDomRef();t===this?HTMLElement.prototype.focus.call(this,e):t&&"function"==typeof t.focus&&t.focus(e)}fireEvent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=this._fireEvent(e,t,i,n),o=BJ(e);return o!==e?r&&this._fireEvent(o,t,i,n):r}fireDecoratorEvent(e,t){const i=this.getEventData(e),n=!!i&&i.cancelable,r=!!i&&i.bubbles,o=this._fireEvent(e,t,n,r),s=BJ(e);return s!==e?o&&this._fireEvent(s,t,n,r):o}_fireEvent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new CustomEvent(`ui5-${e}`,{detail:t,composed:!1,bubbles:n,cancelable:i}),o=this.dispatchEvent(r);if((e=>{const t=GJ();return i=e,!(VJ.includes(i)||!0!==t&&(e=>{const t=GJ();return!("boolean"!=typeof t&&t.events&&t.events.includes&&t.events.includes(e))})(e));var i})(e))return o;const s=new CustomEvent(e,{detail:t,composed:!1,bubbles:n,cancelable:i});return this.dispatchEvent(s)&&o}getEventData(e){return this.constructor.getMetadata().getEvents()[e]}getSlottedNodes(e){return PJ(this[e])}attachComponentStateFinalized(e){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",e)}detachComponentStateFinalized(e){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",e)}get effectiveDir(){return(e=>{RK.add(e)})(this.constructor),(()=>this.matches(":dir(rtl)")?"rtl":"ltr")()}get isUI5Element(){return!0}get classes(){return{}}get accessibilityInfo(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _generateAccessors(){const e=this.prototype,t=this.getMetadata().slotsAreManaged(),i=this.getMetadata().getProperties();for(const[n,r]of Object.entries(i)){jJ(n)||console.warn(`"${n}" is not a valid property name. Use a name that does not collide with DOM APIs`);const t=p0(e,n);let i,r;(null==t?void 0:t.set)&&(i=t.set),(null==t?void 0:t.get)&&(r=t.get),Object.defineProperty(e,n,{get(){return r?r.call(this):this._state[n]},set(e){const t=this.constructor,o=r?r.call(this):this._state[n];o!==e&&(i?i.call(this,e):this._state[n]=e,d0.call(this,{type:"property",name:n,newValue:e,oldValue:o}),this._rendered&&this._updateAttribute(n,e),t.getMetadata().isFormAssociated()&&YJ(this))}})}if(t){const t=this.getMetadata().getSlots();for(const[i,n]of Object.entries(t)){jJ(i)||console.warn(`"${i}" is not a valid property name. Use a name that does not collide with DOM APIs`);const t=n.propertyName||i,r={get(){return void 0!==this._state[t]?this._state[t]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}};Object.defineProperty(e,t,r),t!==IJ(t)&&Object.defineProperty(e,IJ(t),r)}}}static get dependencies(){return[]}static cacheUniqueDependencies(){const e=this.dependencies.filter(((e,t,i)=>i.indexOf(e)===t));u0.set(this,e)}static getUniqueDependencies(){return u0.has(this)||this.cacheUniqueDependencies(),u0.get(this)||[]}static async onDefine(){return Promise.resolve()}static fetchI18nBundles(){return Promise.all(Object.entries(this.getMetadata().getI18n()).map((e=>{const{bundleName:t}=e[1];return fJ(t)})))}static fetchCLDR(){return this.getMetadata().needsCLDR()?a0(KZ().getLanguage(),KZ().getRegion(),KZ().getScript()):Promise.resolve()}static define(){this.definePromise=(async()=>{await DZ();const e=await Promise.all([this.fetchI18nBundles(),this.fetchCLDR(),this.onDefine()]),[t]=e;Object.entries(this.getMetadata().getI18n()).forEach(((e,i)=>{const n=e[0];e[1].target[n]=t[i]})),this.asyncFinished=!0})();const e=this.getMetadata().getTag();this.getMetadata().getFeatures().forEach((e=>{eK(e)&&this.cacheUniqueDependencies(),((e,t,i)=>{const n=YY.get(t);(null==n?void 0:n.includes(e))||(n?n.push(e):YY.set(t,[e]),KY.attachEvent(ZY(e),i))})(e,this,this.cacheUniqueDependencies.bind(this))}));const t=(n=e,IK.has(n)),i=customElements.get(e);var n;return i&&!t?(e=>{let t=TK.get(e);void 0===t&&(t=-1),kK.has(t)||kK.set(t,new Set),kK.get(t).add(e),MK||(MK=setTimeout((()=>{(()=>{const e=SK,t=CK(),i=e[t];let n="Multiple UI5 Web Components instances detected.";e.length>1&&(n=`${n}\nLoading order (versions before 1.1.0 not listed): ${e.map((e=>`\n${e.description}`)).join("")}`),[...kK.keys()].forEach((r=>{let o,s,a;-1===r?(o=1,s={description:"Older unknown runtime"}):(o=EK(t,r),s=e[r]),a=o>0?"an older":o<0?"a newer":"the same",n=`${n}\n\n"${i.description}" failed to define ${kK.get(r).size} tag(s) as they were defined by a runtime of ${a} version "${s.description}": ${[...kK.get(r)].sort().join(", ")}.`,n=o>0?`${n}\nWARNING! If your code uses features of the above web components, unavailable in ${s.description}, it might not work as expected!`:`${n}\nSince the above web components were defined by the same or newer version runtime, they should be compatible with your code.`})),n=`${n}\n\nTo prevent other runtimes from defining tags that you use, consider using scoping or have third-party libraries use scoping: https://github.com/SAP/ui5-webcomponents/blob/main/docs/2-advanced/03-scoping.md.`,console.warn(n)})(),kK=new Map,MK=void 0}),1e3))})(e):i||(this._generateAccessors(),(e=>{IK.add(e),TK.set(e,CK())})(e),customElements.define(e,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const e=[this.metadata];let t=this;for(;t!==oQ;)t=Object.getPrototypeOf(t),e.unshift(t.metadata);const i=QY({},...e);return this._metadata=new DJ(i),this._metadata}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}},oQ.metadata={},oQ.styles="",oQ);const g0=e=>"isUI5Element"in e,m0=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{if(Object.prototype.hasOwnProperty.call(t,"metadata")||(t.metadata={}),"string"==typeof e)return void(t.metadata.tag=e);const{tag:i,languageAware:n,themeAware:r,cldr:o,fastNavigation:s,formAssociated:a,shadowRootOptions:l,features:c}=e;t.metadata.tag=i,n&&(t.metadata.languageAware=n),o&&(t.metadata.cldr=o),c&&(t.metadata.features=c),r&&(t.metadata.themeAware=r),s&&(t.metadata.fastNavigation=s),a&&(t.metadata.formAssociated=a),l&&(t.metadata.shadowRootOptions=l),["renderer","template","styles","dependencies"].forEach((i=>{e[i]&&Object.defineProperty(t,i,{get:()=>e[i]})}))}},_0=e=>(t,i)=>{const n=t.constructor;Object.prototype.hasOwnProperty.call(n,"metadata")||(n.metadata={});const r=n.metadata;r.properties||(r.properties={});const o=r.properties;o[i]||(o[i]=e??{})},v0=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=>{Object.prototype.hasOwnProperty.call(i,"metadata")||(i.metadata={});const n=i.metadata;n.events||(n.events={});const r=n.events;r[e]||(t.bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,r[e]=t)}},y0=e=>(t,i)=>{const n=t.constructor;Object.prototype.hasOwnProperty.call(n,"metadata")||(n.metadata={});const r=n.metadata;r.slots||(r.slots={});const o=r.slots;if(e&&e.default&&o.default)throw new Error("Only one slot can be the default slot.");const s=e&&e.default?"default":i;(e=e||{type:HTMLElement}).type||(e.type=HTMLElement),o[s]||(o[s]=e),e.default&&(delete o.default.default,o.default.propertyName=i),n.metadata.managedSlots=!0},b0=e=>(e.key?"Enter"===e.key:13===e.keyCode)&&!j0(e),A0=e=>(e.key?"Spacebar"===e.key||" "===e.key:32===e.keyCode)&&!j0(e),w0=e=>(e.key?"Spacebar"===e.key||" "===e.key:32===e.keyCode)&&W0(e,!1,!1,!0),x0=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&!j0(e),S0=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&!j0(e),C0=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&!j0(e),E0=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&!j0(e),T0=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&W0(e,!0,!1,!1),I0=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&W0(e,!0,!1,!1),M0=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&W0(e,!0,!1,!1),k0=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&W0(e,!0,!1,!1),B0=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&W0(e,!1,!1,!0),R0=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&W0(e,!1,!1,!0),P0=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&W0(e,!1,!1,!0),D0=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&W0(e,!1,!1,!0),L0=e=>(e.key?"Home"===e.key:36===e.keyCode)&&!j0(e),O0=e=>(e.key?"End"===e.key:35===e.keyCode)&&!j0(e),F0=e=>(e.key?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&!j0(e),N0=e=>(e.key?"Tab"===e.key:9===e.keyCode)&&!j0(e),z0=e=>(e.key?"Tab"===e.key:9===e.keyCode)&&W0(e,!1,!1,!0),U0=e=>(e.key?"Delete"===e.key:46===e.keyCode)&&!j0(e),H0=e=>(e.key?"PageUp"===e.key:33===e.keyCode)&&!j0(e),V0=e=>(e.key?"PageDown"===e.key:34===e.keyCode)&&!j0(e),$0=e=>(e.key?"+"===e.key:187===e.keyCode)||107===e.keyCode&&!j0(e),G0=e=>(e.key?"-"===e.key:219===e.keyCode)||109===e.keyCode&&!j0(e),Q0=e=>"F2"===e.key&&!j0(e),j0=e=>e.shiftKey||e.altKey||q0(e),q0=e=>!(!e.metaKey&&!e.ctrlKey),W0=(e,t,i,n)=>e.shiftKey===n&&e.altKey===i&&q0(e)===t,X0=()=>{let e=document.activeElement;for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e};var Y0=(e=>(e.Auto="Auto",e.Vertical="Vertical",e.Horizontal="Horizontal",e.Paging="Paging",e))(Y0||{}),K0=(e=>(e.Static="Static",e.Cyclic="Cyclic",e))(K0||{});let Z0=class{constructor(e,t){if(!e.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");if(this.rootWebComponent=e,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this._initBound=this._init.bind(this),this.rootWebComponent.attachComponentStateFinalized(this._initBound),"function"!=typeof t.getItemsCallback)throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||K0.Static,this._navigationMode=t.navigationMode||Y0.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[],this._skipItemsSize=t.skipItemsSize||null}setCurrentItem(e){const t=this._getItems().indexOf(e);-1!==t?(this._currentIndex=t,this._applyTabIndex()):console.warn("The provided item is not managed by ItemNavigation",e)}setRowSize(e){this._rowSize=e}_init(){this._getItems().forEach(((e,t)=>{e.forcedTabIndex=t===this._currentIndex?"0":"-1"}))}_onkeydown(e){if(!this._canNavigate())return;const t=this._navigationMode===Y0.Horizontal||this._navigationMode===Y0.Auto,i=this._navigationMode===Y0.Vertical||this._navigationMode===Y0.Auto,n="rtl"===this.rootWebComponent.effectiveDir;if(n&&x0(e)&&t)this._handleRight();else if(n&&S0(e)&&t)this._handleLeft();else if(x0(e)&&t)this._handleLeft();else if(S0(e)&&t)this._handleRight();else if(C0(e)&&i)this._handleUp();else if(E0(e)&&i)this._handleDown();else if(L0(e))this._handleHome();else if(O0(e))this._handleEnd();else if(H0(e))this._handlePageUp();else{if(!V0(e))return;this._handlePageDown()}e.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){const e=this._getItems().length;if(this._currentIndex-this._rowSize>=0)this._currentIndex-=this._rowSize;else if(this._behavior===K0.Cyclic){const t=this._currentIndex%this._rowSize;let i=(0===t?this._rowSize-1:t-1)+(Math.ceil(e/this._rowSize)-1)*this._rowSize;i>e-1&&(i-=this._rowSize),this._currentIndex=i}else this._currentIndex=0}_handleDown(){const e=this._getItems().length;if(this._currentIndex+this._rowSize<e)this._currentIndex+=this._rowSize;else if(this._behavior===K0.Cyclic){const e=(this._currentIndex%this._rowSize+1)%this._rowSize;this._currentIndex=e}else this._currentIndex=e-1}_handleLeft(){const e=this._getItems().length;this._currentIndex>0?this._currentIndex-=1:this._behavior===K0.Cyclic&&(this._currentIndex=e-1)}_handleRight(){const e=this._getItems().length;this._currentIndex<e-1?this._currentIndex+=1:this._behavior===K0.Cyclic&&(this._currentIndex=0)}_handleHome(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%e}_handleEnd(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=e-1-this._currentIndex%e}_handlePageUp(){this._rowSize>1||this._handlePageUpFlat()}_handlePageDown(){this._rowSize>1||this._handlePageDownFlat()}_handlePageUpFlat(){null!==this._skipItemsSize&&this._currentIndex+1>this._skipItemsSize?this._currentIndex-=this._skipItemsSize:this._currentIndex-=this._currentIndex}_handlePageDownFlat(){null!==this._skipItemsSize&&this._getItems().length-this._currentIndex-1>this._skipItemsSize?this._currentIndex+=this._skipItemsSize:this._currentIndex=this._getItems().length-1}_applyTabIndex(){const e=this._getItems();for(let t=0;t<e.length;t++)e[t].forcedTabIndex=t===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach((e=>{const t=this.rootWebComponent[e];this.rootWebComponent[e]=Array.isArray(t)?[...t]:{...t}}))}_focusCurrentItem(){const e=this._getCurrentItem();e&&e.focus()}_canNavigate(){const e=this._getCurrentItem(),t=X0();return e&&e===t}_getCurrentItem(){const e=this._getItems();if(!e.length)return;for(;this._currentIndex>=e.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);const t=e[this._currentIndex];if(!t)return;if(g0(t))return t.getFocusDomRef();const i=this.rootWebComponent.getDomRef();return i&&t.id?i.querySelector(`[id="${t.id}"]`):void 0}};const{I:J0}=dj,e1=()=>document.createComment(""),t1=(e,t,i)=>{var n;const r=e._$AA.parentNode,o=void 0===t?e._$AB:t._$AA;if(void 0===i){const t=r.insertBefore(e1(),o),n=r.insertBefore(e1(),o);i=new J0(t,n,e,e.options)}else{const t=i._$AB.nextSibling,s=i._$AM,a=s!==e;if(a){let t;null===(n=i._$AQ)||void 0===n||n.call(i,e),i._$AM=e,void 0!==i._$AP&&(t=e._$AU)!==s._$AU&&i._$AP(t)}if(t!==o||a){let e=i._$AA;for(;e!==t;){const t=e.nextSibling;r.insertBefore(e,o),e=t}}}return i},i1=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e._$AI(t,i),e},n1={},r1=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let i=e._$AA;const n=e._$AB.nextSibling;for(;i!==n;){const e=i.nextSibling;i.remove(),i=e}},o1=(e,t,i)=>{const n=new Map;for(let r=t;r<=i;r++)n.set(e[r],r);return n},s1=EY(class extends TY{constructor(e){if(super(e),2!==e.type)throw Error("repeat() can only be used in text expressions")}ct(e,t,i){let n;void 0===i?i=t:void 0!==t&&(n=t);const r=[],o=[];let s=0;for(const a of e)r[s]=n?n(a,s):s,o[s]=i(a,s),s++;return{values:o,keys:r}}render(e,t,i){return this.ct(e,t,i).values}update(e,t){let[i,n,r]=t;var o;const s=e._$AH,{values:a,keys:l}=this.ct(i,n,r);if(!Array.isArray(s))return this.ut=l,a;const c=null!==(o=this.ut)&&void 0!==o?o:this.ut=[],u=[];let h,d,p=0,f=s.length-1,g=0,m=a.length-1;for(;p<=f&&g<=m;)if(null===s[p])p++;else if(null===s[f])f--;else if(c[p]===l[g])u[g]=i1(s[p],a[g]),p++,g++;else if(c[f]===l[m])u[m]=i1(s[f],a[m]),f--,m--;else if(c[p]===l[m])u[m]=i1(s[p],a[m]),t1(e,u[m+1],s[p]),p++,m--;else if(c[f]===l[g])u[g]=i1(s[f],a[g]),t1(e,s[p],s[f]),f--,g++;else if(void 0===h&&(h=o1(l,g,m),d=o1(c,p,f)),h.has(c[p]))if(h.has(c[f])){const t=d.get(l[g]),i=void 0!==t?s[t]:null;if(null===i){const t=t1(e,s[p]);i1(t,a[g]),u[g]=t}else u[g]=i1(i,a[g]),t1(e,s[p],i),s[t]=null;g++}else r1(s[f]),f--;else r1(s[p]),p++;for(;g<=m;){const t=t1(e,u[m+1]);i1(t,a[g]),u[g++]=t}for(;p<=f;){const e=s[p++];null!==e&&r1(e)}return this.ut=l,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n1;e._$AH=t}(e,u),YQ}}),a1=EY(class extends TY{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,t){let[i]=t;var n,r;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in i)i[e]&&!(null===(n=this.nt)||void 0===n?void 0:n.has(e))&&this.it.add(e);return this.render(i)}const o=e.element.classList;this.it.forEach((e=>{e in i||(o.remove(e),this.it.delete(e))}));for(const s in i){const e=!!i[s];e===this.it.has(s)||(null===(r=this.nt)||void 0===r?void 0:r.has(s))||(e?(o.add(s),this.it.add(s)):(o.remove(s),this.it.delete(s)))}return YQ}}),l1=EY(class extends TY{constructor(e){var t;if(super(e),1!==e.type||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw new Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return""}update(e,t){let[i]=t;const{style:n}=e.element;if(void 0===this._previousStyleProperties){this._previousStyleProperties=new Set;for(const e in i)this._previousStyleProperties.add(e)}this._previousStyleProperties.forEach((e=>{null==i[e]&&(this._previousStyleProperties.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const r in i){const e=i[r];null!=e&&(this._previousStyleProperties.add(r),r.includes("-")?n.setProperty(r,e):n[r]=e)}return YQ}}),c1=e=>null!=e?e:KQ,u1=function(e){const t=JY("LitStatic");for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t?t.html:WQ)(e,...n)},h1=function(e){const t=JY("LitStatic");for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t?t.svg:XQ)(e,...n)},d1=(e,t,i)=>{const n=JY("OpenUI5Enablement");n&&(e=n.wrapTemplateResultInBusyMarkup(u1,i.host,e)),fj(e,t,i)},p1=(e,t,i)=>{const n=JY("LitStatic");if(n)return n.unsafeStatic((t||[]).includes(e)?`${e}-${i}`:e)},f1=e=>(t,i)=>{t.metadata.i18n||(t.metadata.i18n={}),t.metadata.i18n[i]={bundleName:e,target:t}},g1=Symbol.for(""),m1=e=>{if((null==e?void 0:e.r)===g1)return null==e?void 0:e._$litStatic$},_1=new Map,v1=e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];const o=n.length;let s,a;const l=[],c=[];let u,h=0,d=!1;for(;h<o;){for(u=t[h];h<o&&void 0!==(a=n[h],s=m1(a));)u+=s+t[++h],d=!0;h!==o&&c.push(a),l.push(u),h++}if(h===o&&l.push(t[o]),d){const e=l.join("$$lit$$");void 0===(t=_1.get(e))&&(l.raw=l,_1.set(e,t=l)),n=c}return e(t,...n)},y1=v1(WQ),b1=v1(XQ);var A1;(sQ=class{}).html=y1,sQ.svg=b1,sQ.unsafeStatic=e=>({_$litStatic$:e,r:g1}),A1=sQ,WY.set("LitStatic",A1);const w1={key:"AVATAR_TOOLTIP",defaultText:"Avatar"},x1={key:"BUSY_INDICATOR_TITLE",defaultText:"Please wait"},S1={key:"BUTTON_ARIA_TYPE_ACCEPT",defaultText:"Positive Action"},C1={key:"BUTTON_ARIA_TYPE_REJECT",defaultText:"Negative Action"},E1={key:"BUTTON_ARIA_TYPE_EMPHASIZED",defaultText:"Emphasized"},T1={key:"COLORPALETTE_CONTAINER_LABEL",defaultText:"Color Palette - Predefined Colors"},I1={key:"COLORPALETTE_POPOVER_TITLE",defaultText:"Color Palette"},M1={key:"COLORPALETTE_COLOR_LABEL",defaultText:"Color"},k1={key:"COLOR_PALETTE_DIALOG_CANCEL_BUTTON",defaultText:"Cancel"},B1={key:"COLOR_PALETTE_DIALOG_OK_BUTTON",defaultText:"OK"},R1={key:"COLOR_PALETTE_DIALOG_TITLE",defaultText:"Change Color"},P1={key:"COLOR_PALETTE_MORE_COLORS_TEXT",defaultText:"More Colors..."},D1={key:"COLOR_PALETTE_DEFAULT_COLOR_TEXT",defaultText:"Default Color"},L1={key:"COLORPICKER_ALPHA_SLIDER",defaultText:"Alpha control"},O1={key:"COLORPICKER_HUE_SLIDER",defaultText:"Hue control"},F1={key:"COLORPICKER_HEX",defaultText:"Hexadecimal"},N1={key:"COLORPICKER_RED",defaultText:"Red"},z1={key:"COLORPICKER_GREEN",defaultText:"Green"},U1={key:"COLORPICKER_BLUE",defaultText:"Blue"},H1={key:"COLORPICKER_ALPHA",defaultText:"Alpha"},V1={key:"DELETE",defaultText:"Delete"},$1={key:"GROUP_HEADER_TEXT",defaultText:"Group Header"},G1={key:"SELECT_ROLE_DESCRIPTION",defaultText:"Listbox"},Q1={key:"INPUT_SUGGESTIONS",defaultText:"Suggestions Available"},j1={key:"INPUT_SUGGESTIONS_TITLE",defaultText:"Select"},q1={key:"INPUT_SUGGESTIONS_ONE_HIT",defaultText:"1 result available"},W1={key:"INPUT_SUGGESTIONS_MORE_HITS",defaultText:"{0} results are available"},X1={key:"INPUT_SUGGESTIONS_NO_HIT",defaultText:"No results"},Y1={key:"INPUT_CLEAR_ICON_ACC_NAME",defaultText:"Clear"},K1={key:"LIST_ITEM_POSITION",defaultText:"List item {0} of {1}"},Z1={key:"LIST_ITEM_SELECTED",defaultText:"Selected"},J1={key:"LIST_ITEM_NOT_SELECTED",defaultText:"Not Selected"},e2={key:"ARIA_LABEL_LIST_ITEM_CHECKBOX",defaultText:"Multiple Selection Mode"},t2={key:"ARIA_LABEL_LIST_ITEM_RADIO_BUTTON",defaultText:"Item Selection."},i2={key:"ARIA_LABEL_LIST_SELECTABLE",defaultText:"Contains Selectable Items"},n2={key:"ARIA_LABEL_LIST_MULTISELECTABLE",defaultText:"Contains Multi-Selectable Items"},r2={key:"ARIA_LABEL_LIST_DELETABLE",defaultText:"Contains Deletable Items"},o2={key:"INPUT_AVALIABLE_VALUES",defaultText:"Available Values"},s2={key:"PANEL_ICON",defaultText:"Expand/Collapse"},a2={key:"RESPONSIVE_POPOVER_CLOSE_DIALOG_BUTTON",defaultText:"Decline"},l2={key:"SEGMENTEDBUTTON_ARIA_DESCRIPTION",defaultText:"Segmented button group"},c2={key:"SEGMENTEDBUTTON_ARIA_DESCRIBEDBY",defaultText:"Press SPACE or ENTER to select an item"},u2={key:"SEGMENTEDBUTTONITEM_ARIA_DESCRIPTION",defaultText:"Segmented button"},h2={key:"SLIDER_ARIA_DESCRIPTION",defaultText:"Slider handle"},d2={key:"LOAD_MORE_TEXT",defaultText:"More"},p2={key:"VALUE_STATE_TYPE_ERROR",defaultText:"Value State Error"},f2={key:"VALUE_STATE_TYPE_WARNING",defaultText:"Value State Warning"},g2={key:"VALUE_STATE_TYPE_SUCCESS",defaultText:"Value State Success"},m2={key:"VALUE_STATE_TYPE_INFORMATION",defaultText:"Value State Information"},_2={key:"VALUE_STATE_ERROR",defaultText:"Invalid entry"},v2={key:"VALUE_STATE_WARNING",defaultText:"Warning issued"},y2={key:"VALUE_STATE_INFORMATION",defaultText:"Informative entry"},b2={key:"VALUE_STATE_SUCCESS",defaultText:"Entry successfully validated"},A2={key:"SLIDER_TOOLTIP_INPUT_DESCRIPTION",defaultText:"Press F2 to enter a value"},w2={key:"SLIDER_TOOLTIP_INPUT_LABEL",defaultText:"Current Value"},x2={key:"STEPINPUT_DEC_ICON_TITLE",defaultText:"Decrease"},S2={key:"STEPINPUT_INC_ICON_TITLE",defaultText:"Increase"},C2={key:"DIALOG_HEADER_ARIA_ROLE_DESCRIPTION",defaultText:"Interactive Header"},E2={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE",defaultText:"Use Shift+Arrow keys to resize"},T2={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE",defaultText:"Use Arrow keys to move"},I2={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE",defaultText:"Use Arrow keys to move, Shift+Arrow keys to resize"},M2={key:"LABEL_COLON",defaultText:":"},k2={key:"FORM_CHECKABLE_REQUIRED",defaultText:"Please tick this box if you want to proceed."},B2={key:"FORM_SELECTABLE_REQUIRED",defaultText:"Please select an item in the list."},R2={key:"FORM_SELECTABLE_REQUIRED2",defaultText:"Please select one of these options."},P2={key:"FORM_TEXTFIELD_REQUIRED",defaultText:"Please fill in this field."};let D2;const L2=()=>(void 0===D2&&(gK(),D2=dK.enableDefaultTooltips),D2),O2=new WeakMap,F2=new WeakMap,N2={attributes:!0,childList:!0,characterData:!0,subtree:!0},z2=e=>{const t=e;return t.accessibleNameRef?U2(e):t.accessibleName?t.accessibleName:void 0},U2=e=>{var t;const i=(null==(t=e.accessibleNameRef)?void 0:t.split(" "))??[],n=e.getRootNode();let r="";return i.forEach(((e,t)=>{const o=n.querySelector(`[id='${e}']`),s=`${o&&o.textContent?o.textContent:""}`;s&&(r+=s,t<i.length-1&&(r+=" "))})),r},H2=e=>{var t;const i=new Set;return V2(e).forEach((e=>{i.add(e)})),((null==(t=e.accessibleNameRef)?void 0:t.split(" "))??[]).forEach((t=>{const n=$2(e,t);n&&i.add(n)})),Array.from(i)},V2=e=>{const t=e.getRootNode().querySelectorAll(`[for="${e.id}"]`);return Array.from(t)},$2=(e,t)=>e.getRootNode().querySelector(`[id='${t}']`),G2=(e,t)=>{let i=O2.get(t);if(!i){i={observer:null,callbacks:[]};const n=new MutationObserver((()=>{i.callbacks.forEach((e=>{e()}));const n=document.getElementById(t.id);e.host.id===t.getAttribute("for")||n||Q2(e,t)}));i.observer=n,n.observe(t,N2),O2.set(t,i)}i.callbacks.includes(e.callback)||i.callbacks.push(e.callback)},Q2=(e,t)=>{var i;const n=O2.get(t);n&&(n.callbacks=n.callbacks.filter((t=>t!==e.callback)),n.callbacks.length||(null==(i=n.observer)||i.disconnect(),O2.delete(t))),e.observedElements=e.observedElements.filter((e=>e!==t))},j2=e=>Array.from(e).filter((e=>e.nodeType!==Node.COMMENT_NODE&&(e.nodeType!==Node.TEXT_NODE||0!==(e.nodeValue||"").trim().length))).length>0;function q2(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-segmented-button-item-icon" name="${c1(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-segmented-button-item-icon" name="${c1(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function W2(e,t,i){return h1`<title id="${c1(this._id)}-tooltip">${c1(this.effectiveAccessibleName)}</title>`}function X2(e,t,i){return h1`${c1(this.customSvg)}`}function Y2(e,t,i,n,r){return h1`<path d="${c1(n)}"></path>`}function K2(e,t,i){return h1`${this.hasIconTooltip?W2.call(this,e,t,i):void 0}<g role="presentation">${this.customSvg?X2.call(this,e,t,i):void 0}${s1(this.pathData,((e,t)=>e._id||t),((n,r)=>Y2.call(this,e,t,i,n,r)))}</g>`}var Z2;!function(e){e.Image="Image",e.Decorative="Decorative",e.Interactive="Interactive"}(Z2||(Z2={}));const J2=Z2,e5={packageName:"@ui5/webcomponents-theming",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:':root{--sapThemeMetaData-Base-baseLib:{"Path": "Base.baseLib.sap_horizon.css_variables","PathPattern": "/%frameworkId%/%libId%/%themeId%/%fileId%.css","Extends": ["baseTheme"],"Tags": ["Fiori_3","LightColorScheme"],"FallbackThemeId": "sap_fiori_3","Engine":{"Name": "theming-engine","Version": "14.0.2"},"Version":{"Build": "11.17.1.20240715084505","Source": "11.17.1"}};--sapBrandColor: #0070f2;--sapHighlightColor: #0064d9;--sapBaseColor: #fff;--sapShellColor: #fff;--sapBackgroundColor: #f5f6f7;--sapFontFamily: "72", "72full", Arial, Helvetica, sans-serif;--sapFontSize: .875rem;--sapTextColor: #1d2d3e;--sapLinkColor: #0064d9;--sapCompanyLogo: none;--sapBackgroundImage: none;--sapBackgroundImageOpacity: 1;--sapBackgroundImageRepeat: false;--sapSelectedColor: #0064d9;--sapHoverColor: #eaecee;--sapActiveColor: #dee2e5;--sapHighlightTextColor: #fff;--sapTitleColor: #1d2d3e;--sapNegativeColor: #aa0808;--sapCriticalColor: #e76500;--sapPositiveColor: #256f3a;--sapInformativeColor: #0070f2;--sapNeutralColor: #788fa6;--sapNegativeElementColor: #f53232;--sapCriticalElementColor: #e76500;--sapPositiveElementColor: #30914c;--sapInformativeElementColor: #0070f2;--sapNeutralElementColor: #788fa6;--sapNegativeTextColor: #aa0808;--sapCriticalTextColor: #b44f00;--sapPositiveTextColor: #256f3a;--sapInformativeTextColor: #0064d9;--sapNeutralTextColor: #1d2d3e;--sapErrorColor: #aa0808;--sapWarningColor: #e76500;--sapSuccessColor: #256f3a;--sapInformationColor: #0070f2;--sapErrorBackground: #ffeaf4;--sapWarningBackground: #fff8d6;--sapSuccessBackground: #f5fae5;--sapInformationBackground: #e1f4ff;--sapNeutralBackground: #eff1f2;--sapErrorBorderColor: #e90b0b;--sapWarningBorderColor: #dd6100;--sapSuccessBorderColor: #30914c;--sapInformationBorderColor: #0070f2;--sapNeutralBorderColor: #788fa6;--sapElement_LineHeight: 2.75rem;--sapElement_Height: 2.25rem;--sapElement_BorderWidth: .0625rem;--sapElement_BorderCornerRadius: .75rem;--sapElement_Compact_LineHeight: 2rem;--sapElement_Compact_Height: 1.625rem;--sapElement_Condensed_LineHeight: 1.5rem;--sapElement_Condensed_Height: 1.375rem;--sapContent_LineHeight: 1.5;--sapContent_IconHeight: 1rem;--sapContent_IconColor: #1d2d3e;--sapContent_ContrastIconColor: #fff;--sapContent_NonInteractiveIconColor: #758ca4;--sapContent_MarkerIconColor: #5d36ff;--sapContent_MarkerTextColor: #046c7a;--sapContent_MeasureIndicatorColor: #556b81;--sapContent_Selected_MeasureIndicatorColor: #0064d9;--sapContent_Placeholderloading_Background: #ccc;--sapContent_Placeholderloading_Gradient: linear-gradient(to right, #ccc 0%, #ccc 20%, #999 50%, #ccc 80%, #ccc 100%);--sapContent_ImagePlaceholderBackground: #eaecee;--sapContent_ImagePlaceholderForegroundColor: #5b738b;--sapContent_RatedColor: #d27700;--sapContent_UnratedColor: #758ca4;--sapContent_BusyColor: #0064d9;--sapContent_FocusColor: #0032a5;--sapContent_FocusStyle: solid;--sapContent_FocusWidth: .125rem;--sapContent_ContrastFocusColor: #fff;--sapContent_ShadowColor: #223548;--sapContent_ContrastShadowColor: #fff;--sapContent_Shadow0: 0 0 .125rem 0 rgba(34,53,72,.2), 0 .125rem .25rem 0 rgba(34,53,72,.2);--sapContent_Shadow1: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .125rem .5rem 0 rgba(34,53,72,.3);--sapContent_Shadow2: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .625rem 1.875rem 0 rgba(34,53,72,.25);--sapContent_Shadow3: 0 0 0 .0625rem rgba(34,53,72,.48), 0 1.25rem 5rem 0 rgba(34,53,72,.25);--sapContent_TextShadow: 0 0 .125rem #fff;--sapContent_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapContent_HeaderShadow: 0 .125rem .125rem 0 rgba(34,53,72,.05), inset 0 -.0625rem 0 0 #d9d9d9;--sapContent_Interaction_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapContent_Selected_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapContent_Negative_Shadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapContent_Critical_Shadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapContent_Positive_Shadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapContent_Informative_Shadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapContent_Neutral_Shadow: inset 0 0 0 .0625rem rgba(120,143,166,.3);--sapContent_SearchHighlightColor: #dafdf5;--sapContent_HelpColor: #188918;--sapContent_LabelColor: #556b82;--sapContent_MonospaceFontFamily: "72Mono", "72Monofull", lucida console, monospace;--sapContent_MonospaceBoldFontFamily: "72Mono-Bold", "72Mono-Boldfull", lucida console, monospace;--sapContent_IconFontFamily: "SAP-icons";--sapContent_DisabledTextColor: rgba(29,45,62,.6);--sapContent_DisabledOpacity: .4;--sapContent_ContrastTextThreshold: .65;--sapContent_ContrastTextColor: #fff;--sapContent_ForegroundColor: #efefef;--sapContent_ForegroundBorderColor: #758ca4;--sapContent_ForegroundTextColor: #1d2d3e;--sapContent_BadgeBackground: #aa0808;--sapContent_BadgeTextColor: #fff;--sapContent_DragAndDropActiveColor: #0064d9;--sapContent_Selected_TextColor: #0064d9;--sapContent_Selected_Background: #fff;--sapContent_Selected_Hover_Background: #e3f0ff;--sapContent_Selected_ForegroundColor: #0064d9;--sapContent_ForcedColorAdjust: none;--sapContent_Illustrative_Color1: #5d36ff;--sapContent_Illustrative_Color2: #0070f2;--sapContent_Illustrative_Color3: #f58b00;--sapContent_Illustrative_Color4: #00144a;--sapContent_Illustrative_Color5: #a9b4be;--sapContent_Illustrative_Color6: #d5dadd;--sapContent_Illustrative_Color7: #ebf8ff;--sapContent_Illustrative_Color8: #fff;--sapContent_Illustrative_Color9: #64edd2;--sapContent_Illustrative_Color10: #ebf8ff;--sapContent_Illustrative_Color11: #f31ded;--sapContent_Illustrative_Color12: #00a800;--sapContent_Illustrative_Color13: #005dc9;--sapContent_Illustrative_Color14: #004da5;--sapContent_Illustrative_Color15: #cc7400;--sapContent_Illustrative_Color16: #3b0ac6;--sapContent_Illustrative_Color17: #00a58a;--sapContent_Illustrative_Color18: #d1efff;--sapContent_Illustrative_Color19: #b8e6ff;--sapContent_Illustrative_Color20: #9eddff;--sapFontLightFamily: "72-Light", "72-Lightfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBoldFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldFamily: "72-Semibold", "72-Semiboldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldDuplexFamily: "72-SemiboldDuplex", "72-SemiboldDuplexfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBlackFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapFontHeaderFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSmallSize: .75rem;--sapFontLargeSize: 1rem;--sapFontHeader1Size: 3rem;--sapFontHeader2Size: 2rem;--sapFontHeader3Size: 1.5rem;--sapFontHeader4Size: 1.25rem;--sapFontHeader5Size: 1rem;--sapFontHeader6Size: .875rem;--sapLink_TextDecoration: none;--sapLink_Hover_Color: #0064d9;--sapLink_Hover_TextDecoration: underline;--sapLink_Active_Color: #0064d9;--sapLink_Active_TextDecoration: none;--sapLink_Visited_Color: #0064d9;--sapLink_InvertedColor: #a6cfff;--sapLink_SubtleColor: #1d2d3e;--sapShell_Background: #eff1f2;--sapShell_BackgroundImage: linear-gradient(to bottom, #eff1f2, #eff1f2);--sapShell_BackgroundImageOpacity: 1;--sapShell_BackgroundImageRepeat: false;--sapShell_BorderColor: #fff;--sapShell_TextColor: #1d2d3e;--sapShell_InteractiveBackground: #eff1f2;--sapShell_InteractiveTextColor: #1d2d3e;--sapShell_InteractiveBorderColor: #556b81;--sapShell_GroupTitleTextColor: #1d2d3e;--sapShell_GroupTitleTextShadow: 0 0 .125rem #fff;--sapShell_Hover_Background: #fff;--sapShell_Active_Background: #fff;--sapShell_Active_TextColor: #0070f2;--sapShell_Selected_Background: #fff;--sapShell_Selected_TextColor: #0070f2;--sapShell_Selected_Hover_Background: #fff;--sapShell_Favicon: none;--sapShell_Navigation_Background: #fff;--sapShell_Navigation_Hover_Background: #fff;--sapShell_Navigation_SelectedColor: #0064d9;--sapShell_Navigation_Selected_TextColor: #0064d9;--sapShell_Navigation_TextColor: #1d2d3e;--sapShell_Navigation_Active_TextColor: #0064d9;--sapShell_Navigation_Active_Background: #fff;--sapShell_Shadow: 0 .125rem .125rem 0 rgba(34,53,72,.15), inset 0 -.0625rem 0 0 rgba(34,53,72,.2);--sapShell_NegativeColor: #aa0808;--sapShell_CriticalColor: #b44f00;--sapShell_PositiveColor: #256f3a;--sapShell_InformativeColor: #0064d9;--sapShell_NeutralColor: #1d2d3e;--sapShell_Assistant_ForegroundColor: #5d36ff;--sapShell_Category_1_Background: #0057d2;--sapShell_Category_1_BorderColor: #0057d2;--sapShell_Category_1_TextColor: #fff;--sapShell_Category_1_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_2_Background: #df1278;--sapShell_Category_2_BorderColor: #df1278;--sapShell_Category_2_TextColor: #fff;--sapShell_Category_2_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_3_Background: #e76500;--sapShell_Category_3_BorderColor: #e76500;--sapShell_Category_3_TextColor: #fff;--sapShell_Category_3_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_4_Background: #7800a4;--sapShell_Category_4_BorderColor: #7800a4;--sapShell_Category_4_TextColor: #fff;--sapShell_Category_4_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_5_Background: #aa2608;--sapShell_Category_5_BorderColor: #aa2608;--sapShell_Category_5_TextColor: #fff;--sapShell_Category_5_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_6_Background: #07838f;--sapShell_Category_6_BorderColor: #07838f;--sapShell_Category_6_TextColor: #fff;--sapShell_Category_6_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_7_Background: #f31ded;--sapShell_Category_7_BorderColor: #f31ded;--sapShell_Category_7_TextColor: #fff;--sapShell_Category_7_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_8_Background: #188918;--sapShell_Category_8_BorderColor: #188918;--sapShell_Category_8_TextColor: #fff;--sapShell_Category_8_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_9_Background: #002a86;--sapShell_Category_9_BorderColor: #002a86;--sapShell_Category_9_TextColor: #fff;--sapShell_Category_9_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_10_Background: #5b738b;--sapShell_Category_10_BorderColor: #5b738b;--sapShell_Category_10_TextColor: #fff;--sapShell_Category_10_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_11_Background: #d20a0a;--sapShell_Category_11_BorderColor: #d20a0a;--sapShell_Category_11_TextColor: #fff;--sapShell_Category_11_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_12_Background: #7858ff;--sapShell_Category_12_BorderColor: #7858ff;--sapShell_Category_12_TextColor: #fff;--sapShell_Category_12_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_13_Background: #a00875;--sapShell_Category_13_BorderColor: #a00875;--sapShell_Category_13_TextColor: #fff;--sapShell_Category_13_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_14_Background: #14565b;--sapShell_Category_14_BorderColor: #14565b;--sapShell_Category_14_TextColor: #fff;--sapShell_Category_14_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_15_Background: #223548;--sapShell_Category_15_BorderColor: #223548;--sapShell_Category_15_TextColor: #fff;--sapShell_Category_15_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_16_Background: #1e592f;--sapShell_Category_16_BorderColor: #1e592f;--sapShell_Category_16_TextColor: #fff;--sapShell_Category_16_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapAssistant_Color1: #5d36ff;--sapAssistant_Color2: #a100c2;--sapAssistant_BackgroundGradient: linear-gradient(#5d36ff, #a100c2);--sapAssistant_Background: #5d36ff;--sapAssistant_BorderColor: #5d36ff;--sapAssistant_TextColor: #fff;--sapAssistant_Hover_Background: #2800cf;--sapAssistant_Hover_BorderColor: #2800cf;--sapAssistant_Hover_TextColor: #fff;--sapAssistant_Active_Background: #fff;--sapAssistant_Active_BorderColor: #5d36ff;--sapAssistant_Active_TextColor: #5d36ff;--sapAssistant_Question_Background: #eae5ff;--sapAssistant_Question_BorderColor: #eae5ff;--sapAssistant_Question_TextColor: #1d2d3e;--sapAssistant_Answer_Background: #eff1f2;--sapAssistant_Answer_BorderColor: #eff1f2;--sapAssistant_Answer_TextColor: #1d2d3e;--sapAvatar_1_Background: #fff3b8;--sapAvatar_1_BorderColor: #fff3b8;--sapAvatar_1_TextColor: #a45d00;--sapAvatar_2_Background: #ffd0e7;--sapAvatar_2_BorderColor: #ffd0e7;--sapAvatar_2_TextColor: #aa0808;--sapAvatar_3_Background: #ffdbe7;--sapAvatar_3_BorderColor: #ffdbe7;--sapAvatar_3_TextColor: #ba066c;--sapAvatar_4_Background: #ffdcf3;--sapAvatar_4_BorderColor: #ffdcf3;--sapAvatar_4_TextColor: #a100c2;--sapAvatar_5_Background: #ded3ff;--sapAvatar_5_BorderColor: #ded3ff;--sapAvatar_5_TextColor: #552cff;--sapAvatar_6_Background: #d1efff;--sapAvatar_6_BorderColor: #d1efff;--sapAvatar_6_TextColor: #0057d2;--sapAvatar_7_Background: #c2fcee;--sapAvatar_7_BorderColor: #c2fcee;--sapAvatar_7_TextColor: #046c7a;--sapAvatar_8_Background: #ebf5cb;--sapAvatar_8_BorderColor: #ebf5cb;--sapAvatar_8_TextColor: #256f3a;--sapAvatar_9_Background: #ddccf0;--sapAvatar_9_BorderColor: #ddccf0;--sapAvatar_9_TextColor: #6c32a9;--sapAvatar_10_Background: #eaecee;--sapAvatar_10_BorderColor: #eaecee;--sapAvatar_10_TextColor: #556b82;--sapButton_Background: #fff;--sapButton_BorderColor: #bcc3ca;--sapButton_BorderWidth: .0625rem;--sapButton_BorderCornerRadius: .5rem;--sapButton_TextColor: #0064d9;--sapButton_Hover_Background: #eaecee;--sapButton_Hover_BorderColor: #bcc3ca;--sapButton_Hover_TextColor: #0064d9;--sapButton_IconColor: #0064d9;--sapButton_Active_Background: #fff;--sapButton_Active_BorderColor: #0064d9;--sapButton_Active_TextColor: #0064d9;--sapButton_Emphasized_Background: #0070f2;--sapButton_Emphasized_BorderColor: #0070f2;--sapButton_Emphasized_TextColor: #fff;--sapButton_Emphasized_Hover_Background: #0064d9;--sapButton_Emphasized_Hover_BorderColor: #0064d9;--sapButton_Emphasized_Hover_TextColor: #fff;--sapButton_Emphasized_Active_Background: #fff;--sapButton_Emphasized_Active_BorderColor: #0064d9;--sapButton_Emphasized_Active_TextColor: #0064d9;--sapButton_Emphasized_TextShadow: transparent;--sapButton_Emphasized_FontWeight: bold;--sapButton_Reject_Background: #ffd6e9;--sapButton_Reject_BorderColor: #ffc2de;--sapButton_Reject_TextColor: #aa0808;--sapButton_Reject_Hover_Background: #ffbddb;--sapButton_Reject_Hover_BorderColor: #ffbddb;--sapButton_Reject_Hover_TextColor: #aa0808;--sapButton_Reject_Active_Background: #fff;--sapButton_Reject_Active_BorderColor: #e90b0b;--sapButton_Reject_Active_TextColor: #aa0808;--sapButton_Reject_Selected_Background: #fff;--sapButton_Reject_Selected_BorderColor: #e90b0b;--sapButton_Reject_Selected_TextColor: #aa0808;--sapButton_Reject_Selected_Hover_Background: #ffbddb;--sapButton_Reject_Selected_Hover_BorderColor: #e90b0b;--sapButton_Accept_Background: #ebf5cb;--sapButton_Accept_BorderColor: #dbeda0;--sapButton_Accept_TextColor: #256f3a;--sapButton_Accept_Hover_Background: #e3f1b6;--sapButton_Accept_Hover_BorderColor: #e3f1b6;--sapButton_Accept_Hover_TextColor: #256f3a;--sapButton_Accept_Active_Background: #fff;--sapButton_Accept_Active_BorderColor: #30914c;--sapButton_Accept_Active_TextColor: #256f3a;--sapButton_Accept_Selected_Background: #fff;--sapButton_Accept_Selected_BorderColor: #30914c;--sapButton_Accept_Selected_TextColor: #256f3a;--sapButton_Accept_Selected_Hover_Background: #e3f1b6;--sapButton_Accept_Selected_Hover_BorderColor: #30914c;--sapButton_Lite_Background: transparent;--sapButton_Lite_BorderColor: transparent;--sapButton_Lite_TextColor: #0064d9;--sapButton_Lite_Hover_Background: #eaecee;--sapButton_Lite_Hover_BorderColor: #bcc3ca;--sapButton_Lite_Hover_TextColor: #0064d9;--sapButton_Lite_Active_Background: #fff;--sapButton_Lite_Active_BorderColor: #0064d9;--sapButton_Selected_Background: #edf6ff;--sapButton_Selected_BorderColor: #0064d9;--sapButton_Selected_TextColor: #0064d9;--sapButton_Selected_Hover_Background: #d9ecff;--sapButton_Selected_Hover_BorderColor: #0064d9;--sapButton_Attention_Background: #fff3b7;--sapButton_Attention_BorderColor: #ffeb84;--sapButton_Attention_TextColor: #b44f00;--sapButton_Attention_Hover_Background: #ffef9e;--sapButton_Attention_Hover_BorderColor: #ffef9e;--sapButton_Attention_Hover_TextColor: #b44f00;--sapButton_Attention_Active_Background: #fff;--sapButton_Attention_Active_BorderColor: #dd6100;--sapButton_Attention_Active_TextColor: #b44f00;--sapButton_Attention_Selected_Background: #fff;--sapButton_Attention_Selected_BorderColor: #dd6100;--sapButton_Attention_Selected_TextColor: #b44f00;--sapButton_Attention_Selected_Hover_Background: #ffef9e;--sapButton_Attention_Selected_Hover_BorderColor: #dd6100;--sapButton_Negative_Background: #f53232;--sapButton_Negative_BorderColor: #f53232;--sapButton_Negative_TextColor: #fff;--sapButton_Negative_Hover_Background: #e90b0b;--sapButton_Negative_Hover_BorderColor: #e90b0b;--sapButton_Negative_Hover_TextColor: #fff;--sapButton_Negative_Active_Background: #fff;--sapButton_Negative_Active_BorderColor: #f53232;--sapButton_Negative_Active_TextColor: #aa0808;--sapButton_Critical_Background: #e76500;--sapButton_Critical_BorderColor: #e76500;--sapButton_Critical_TextColor: #fff;--sapButton_Critical_Hover_Background: #dd6100;--sapButton_Critical_Hover_BorderColor: #dd6100;--sapButton_Critical_Hover_TextColor: #fff;--sapButton_Critical_Active_Background: #fff;--sapButton_Critical_Active_BorderColor: #dd6100;--sapButton_Critical_Active_TextColor: #b44f00;--sapButton_Success_Background: #30914c;--sapButton_Success_BorderColor: #30914c;--sapButton_Success_TextColor: #fff;--sapButton_Success_Hover_Background: #2c8646;--sapButton_Success_Hover_BorderColor: #2c8646;--sapButton_Success_Hover_TextColor: #fff;--sapButton_Success_Active_Background: #fff;--sapButton_Success_Active_BorderColor: #30914c;--sapButton_Success_Active_TextColor: #256f3a;--sapButton_Information_Background: #e8f3ff;--sapButton_Information_BorderColor: #b5d8ff;--sapButton_Information_TextColor: #0064d9;--sapButton_Information_Hover_Background: #d4e8ff;--sapButton_Information_Hover_BorderColor: #b5d8ff;--sapButton_Information_Hover_TextColor: #0064d9;--sapButton_Information_Active_Background: #fff;--sapButton_Information_Active_BorderColor: #0064d9;--sapButton_Information_Active_TextColor: #0064d9;--sapButton_Neutral_Background: #e8f3ff;--sapButton_Neutral_BorderColor: #b5d8ff;--sapButton_Neutral_TextColor: #0064d9;--sapButton_Neutral_Hover_Background: #d4e8ff;--sapButton_Neutral_Hover_BorderColor: #b5d8ff;--sapButton_Neutral_Hover_TextColor: #0064d9;--sapButton_Neutral_Active_Background: #fff;--sapButton_Neutral_Active_BorderColor: #0064d9;--sapButton_Neutral_Active_TextColor: #0064d9;--sapButton_Track_Background: #788fa6;--sapButton_Track_BorderColor: #788fa6;--sapButton_Track_TextColor: #fff;--sapButton_Track_Hover_Background: #637d97;--sapButton_Track_Hover_BorderColor: #637d97;--sapButton_Track_Selected_Background: #0064d9;--sapButton_Track_Selected_BorderColor: #0064d9;--sapButton_Track_Selected_TextColor: #fff;--sapButton_Track_Selected_Hover_Background: #0058c0;--sapButton_Track_Selected_Hover_BorderColor: #0058c0;--sapButton_Handle_Background: #fff;--sapButton_Handle_BorderColor: #fff;--sapButton_Handle_TextColor: #1d2d3e;--sapButton_Handle_Hover_Background: #fff;--sapButton_Handle_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Handle_Selected_Background: #edf6ff;--sapButton_Handle_Selected_BorderColor: #edf6ff;--sapButton_Handle_Selected_TextColor: #0064d9;--sapButton_Handle_Selected_Hover_Background: #edf6ff;--sapButton_Handle_Selected_Hover_BorderColor: rgba(237,246,255,.5);--sapButton_Track_Negative_Background: #f53232;--sapButton_Track_Negative_BorderColor: #f53232;--sapButton_Track_Negative_TextColor: #fff;--sapButton_Track_Negative_Hover_Background: #e90b0b;--sapButton_Track_Negative_Hover_BorderColor: #e90b0b;--sapButton_Handle_Negative_Background: #fff;--sapButton_Handle_Negative_BorderColor: #fff;--sapButton_Handle_Negative_TextColor: #aa0808;--sapButton_Handle_Negative_Hover_Background: #fff;--sapButton_Handle_Negative_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Track_Positive_Background: #30914c;--sapButton_Track_Positive_BorderColor: #30914c;--sapButton_Track_Positive_TextColor: #fff;--sapButton_Track_Positive_Hover_Background: #2c8646;--sapButton_Track_Positive_Hover_BorderColor: #2c8646;--sapButton_Handle_Positive_Background: #fff;--sapButton_Handle_Positive_BorderColor: #fff;--sapButton_Handle_Positive_TextColor: #256f3a;--sapButton_Handle_Positive_Hover_Background: #fff;--sapButton_Handle_Positive_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_TokenBackground: #fff;--sapButton_TokenBorderColor: #bcc3ca;--sapField_Background: #fff;--sapField_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #556b81, #556b81) border-box;--sapField_TextColor: #131e29;--sapField_PlaceholderTextColor: #556b82;--sapField_BorderColor: #556b81;--sapField_HelpBackground: #fff;--sapField_BorderWidth: .0625rem;--sapField_BorderStyle: none;--sapField_BorderCornerRadius: .25rem;--sapField_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapField_Hover_Background: #fff;--sapField_Hover_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #0064d9, #0064d9) border-box;--sapField_Hover_BorderColor: #0064d9;--sapField_Hover_HelpBackground: #fff;--sapField_Hover_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapField_Hover_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_Hover_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_Hover_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_Hover_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapField_Active_BorderColor: #0064d9;--sapField_Focus_Background: #fff;--sapField_Focus_BorderColor: #0032a5;--sapField_Focus_HelpBackground: #fff;--sapField_ReadOnly_Background: #eaecee;--sapField_ReadOnly_BackgroundStyle: 0 100% / .375rem .0625rem repeat-x linear-gradient(90deg, #556b81 0, #556b81 .25rem, transparent .25rem) border-box;--sapField_ReadOnly_BorderColor: #556b81;--sapField_ReadOnly_BorderStyle: none;--sapField_ReadOnly_HelpBackground: #eaecee;--sapField_RequiredColor: #ba066c;--sapField_InvalidColor: #e90b0b;--sapField_InvalidBackground: #ffeaf4;--sapField_InvalidBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #e90b0b, #e90b0b) border-box;--sapField_InvalidBorderWidth: .125rem;--sapField_InvalidBorderStyle: none;--sapField_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_WarningColor: #dd6100;--sapField_WarningBackground: #fff8d6;--sapField_WarningBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #dd6100, #dd6100) border-box;--sapField_WarningBorderWidth: .125rem;--sapField_WarningBorderStyle: none;--sapField_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_SuccessColor: #30914c;--sapField_SuccessBackground: #f5fae5;--sapField_SuccessBackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #30914c, #30914c) border-box;--sapField_SuccessBorderWidth: .0625rem;--sapField_SuccessBorderStyle: none;--sapField_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_InformationColor: #0070f2;--sapField_InformationBackground: #e1f4ff;--sapField_InformationBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #0070f2, #0070f2) border-box;--sapField_InformationBorderWidth: .125rem;--sapField_InformationBorderStyle: none;--sapField_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapGroup_TitleBackground: #fff;--sapGroup_TitleBorderColor: #a8b2bd;--sapGroup_TitleTextColor: #1d2d3e;--sapGroup_Title_FontSize: 1rem;--sapGroup_ContentBackground: #fff;--sapGroup_ContentBorderColor: #d9d9d9;--sapGroup_BorderWidth: .0625rem;--sapGroup_BorderCornerRadius: .5rem;--sapGroup_FooterBackground: transparent;--sapToolbar_Background: #fff;--sapToolbar_SeparatorColor: #d9d9d9;--sapList_HeaderBackground: #fff;--sapList_HeaderBorderColor: #a8b2bd;--sapList_HeaderTextColor: #1d2d3e;--sapList_BorderColor: #e5e5e5;--sapList_BorderWidth: .0625rem;--sapList_TextColor: #1d2d3e;--sapList_Active_TextColor: #1d2d3e;--sapList_Active_Background: #dee2e5;--sapList_SelectionBackgroundColor: #ebf8ff;--sapList_SelectionBorderColor: #0064d9;--sapList_Hover_SelectionBackground: #dcf3ff;--sapList_Background: #fff;--sapList_Hover_Background: #eaecee;--sapList_AlternatingBackground: #f5f6f7;--sapList_GroupHeaderBackground: #fff;--sapList_GroupHeaderBorderColor: #a8b2bd;--sapList_GroupHeaderTextColor: #1d2d3e;--sapList_TableGroupHeaderBackground: #eff1f2;--sapList_TableGroupHeaderBorderColor: #a8b2bd;--sapList_TableGroupHeaderTextColor: #1d2d3e;--sapList_FooterBackground: #fff;--sapList_FooterTextColor: #1d2d3e;--sapList_TableFooterBorder: #a8b2bd;--sapList_TableFixedBorderColor: #8c8c8c;--sapMessage_ErrorBorderColor: #ff8ec4;--sapMessage_WarningBorderColor: #ffe770;--sapMessage_SuccessBorderColor: #cee67e;--sapMessage_InformationBorderColor: #7bcfff;--sapPopover_BorderCornerRadius: .5rem;--sapProgress_Background: #d5dadd;--sapProgress_BorderColor: #d5dadd;--sapProgress_TextColor: #1d2d3e;--sapProgress_FontSize: .875rem;--sapProgress_NegativeBackground: #ffdbec;--sapProgress_NegativeBorderColor: #ffdbec;--sapProgress_NegativeTextColor: #1d2d3e;--sapProgress_CriticalBackground: #fff4bd;--sapProgress_CriticalBorderColor: #fff4bd;--sapProgress_CriticalTextColor: #1d2d3e;--sapProgress_PositiveBackground: #e5f2ba;--sapProgress_PositiveBorderColor: #e5f2ba;--sapProgress_PositiveTextColor: #1d2d3e;--sapProgress_InformationBackground: #cdedff;--sapProgress_InformationBorderColor: #cdedff;--sapProgress_InformationTextColor: #1d2d3e;--sapProgress_Value_Background: #617b94;--sapProgress_Value_BorderColor: #617b94;--sapProgress_Value_TextColor: #788fa6;--sapProgress_Value_NegativeBackground: #f53232;--sapProgress_Value_NegativeBorderColor: #f53232;--sapProgress_Value_NegativeTextColor: #f53232;--sapProgress_Value_CriticalBackground: #e76500;--sapProgress_Value_CriticalBorderColor: #e76500;--sapProgress_Value_CriticalTextColor: #e76500;--sapProgress_Value_PositiveBackground: #30914c;--sapProgress_Value_PositiveBorderColor: #30914c;--sapProgress_Value_PositiveTextColor: #30914c;--sapProgress_Value_InformationBackground: #0070f2;--sapProgress_Value_InformationBorderColor: #0070f2;--sapProgress_Value_InformationTextColor: #0070f2;--sapScrollBar_FaceColor: #7b91a8;--sapScrollBar_TrackColor: #fff;--sapScrollBar_BorderColor: #7b91a8;--sapScrollBar_SymbolColor: #0064d9;--sapScrollBar_Dimension: .75rem;--sapScrollBar_Hover_FaceColor: #5b728b;--sapSlider_Background: #d5dadd;--sapSlider_BorderColor: #d5dadd;--sapSlider_Selected_Background: #0064d9;--sapSlider_Selected_BorderColor: #0064d9;--sapSlider_HandleBackground: #fff;--sapSlider_HandleBorderColor: #b0d5ff;--sapSlider_RangeHandleBackground: #fff;--sapSlider_Hover_HandleBackground: #d9ecff;--sapSlider_Hover_HandleBorderColor: #b0d5ff;--sapSlider_Hover_RangeHandleBackground: #d9ecff;--sapSlider_Active_HandleBackground: #fff;--sapSlider_Active_HandleBorderColor: #0064d9;--sapSlider_Active_RangeHandleBackground: transparent;--sapPageHeader_Background: #fff;--sapPageHeader_BorderColor: #d9d9d9;--sapPageHeader_TextColor: #1d2d3e;--sapPageFooter_Background: #fff;--sapPageFooter_BorderColor: #d9d9d9;--sapPageFooter_TextColor: #1d2d3e;--sapInfobar_Background: #c2fcee;--sapInfobar_Hover_Background: #fff;--sapInfobar_Active_Background: #fff;--sapInfobar_NonInteractive_Background: #f5f6f7;--sapInfobar_TextColor: #046c7a;--sapObjectHeader_Background: #fff;--sapObjectHeader_Hover_Background: #eaecee;--sapObjectHeader_BorderColor: #d9d9d9;--sapObjectHeader_Title_TextColor: #1d2d3e;--sapObjectHeader_Title_FontSize: 1.5rem;--sapObjectHeader_Title_SnappedFontSize: 1.25rem;--sapObjectHeader_Title_FontFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapObjectHeader_Subtitle_TextColor: #556b82;--sapBlockLayer_Background: #000;--sapTile_Background: #fff;--sapTile_Hover_Background: #eaecee;--sapTile_Active_Background: #dee2e5;--sapTile_BorderColor: transparent;--sapTile_BorderCornerRadius: 1rem;--sapTile_TitleTextColor: #1d2d3e;--sapTile_TextColor: #556b82;--sapTile_IconColor: #556b82;--sapTile_SeparatorColor: #ccc;--sapTile_Interactive_BorderColor: #b3b3b3;--sapTile_OverlayBackground: #fff;--sapTile_OverlayForegroundColor: #1d2d3e;--sapAccentColor1: #d27700;--sapAccentColor2: #aa0808;--sapAccentColor3: #ba066c;--sapAccentColor4: #a100c2;--sapAccentColor5: #5d36ff;--sapAccentColor6: #0057d2;--sapAccentColor7: #046c7a;--sapAccentColor8: #256f3a;--sapAccentColor9: #6c32a9;--sapAccentColor10: #5b738b;--sapAccentBackgroundColor1: #fff3b8;--sapAccentBackgroundColor2: #ffd0e7;--sapAccentBackgroundColor3: #ffdbe7;--sapAccentBackgroundColor4: #ffdcf3;--sapAccentBackgroundColor5: #ded3ff;--sapAccentBackgroundColor6: #d1efff;--sapAccentBackgroundColor7: #c2fcee;--sapAccentBackgroundColor8: #ebf5cb;--sapAccentBackgroundColor9: #ddccf0;--sapAccentBackgroundColor10: #eaecee;--sapIndicationColor_1: #840606;--sapIndicationColor_1_Background: #840606;--sapIndicationColor_1_BorderColor: #840606;--sapIndicationColor_1_TextColor: #fff;--sapIndicationColor_1_Hover_Background: #6c0505;--sapIndicationColor_1_Active_Background: #fff;--sapIndicationColor_1_Active_BorderColor: #fb9d9d;--sapIndicationColor_1_Active_TextColor: #840606;--sapIndicationColor_1_Selected_Background: #fff;--sapIndicationColor_1_Selected_BorderColor: #fb9d9d;--sapIndicationColor_1_Selected_TextColor: #840606;--sapIndicationColor_1b: #fb9d9d;--sapIndicationColor_1b_BorderColor: #fb9d9d;--sapIndicationColor_1b_Hover_Background: #fa8585;--sapIndicationColor_2: #aa0808;--sapIndicationColor_2_Background: #aa0808;--sapIndicationColor_2_BorderColor: #aa0808;--sapIndicationColor_2_TextColor: #fff;--sapIndicationColor_2_Hover_Background: #920707;--sapIndicationColor_2_Active_Background: #fff;--sapIndicationColor_2_Active_BorderColor: #fcc4c4;--sapIndicationColor_2_Active_TextColor: #aa0808;--sapIndicationColor_2_Selected_Background: #fff;--sapIndicationColor_2_Selected_BorderColor: #fcc4c4;--sapIndicationColor_2_Selected_TextColor: #aa0808;--sapIndicationColor_2b: #fcc4c4;--sapIndicationColor_2b_BorderColor: #fcc4c4;--sapIndicationColor_2b_Hover_Background: #fbacac;--sapIndicationColor_3: #b95100;--sapIndicationColor_3_Background: #e76500;--sapIndicationColor_3_BorderColor: #e76500;--sapIndicationColor_3_TextColor: #fff;--sapIndicationColor_3_Hover_Background: #d85e00;--sapIndicationColor_3_Active_Background: #fff;--sapIndicationColor_3_Active_BorderColor: #fff2c0;--sapIndicationColor_3_Active_TextColor: #b95100;--sapIndicationColor_3_Selected_Background: #fff;--sapIndicationColor_3_Selected_BorderColor: #fff2c0;--sapIndicationColor_3_Selected_TextColor: #b95100;--sapIndicationColor_3b: #fff2c0;--sapIndicationColor_3b_BorderColor: #fff2c0;--sapIndicationColor_3b_Hover_Background: #ffeda6;--sapIndicationColor_4: #256f3a;--sapIndicationColor_4_Background: #256f3a;--sapIndicationColor_4_BorderColor: #256f3a;--sapIndicationColor_4_TextColor: #fff;--sapIndicationColor_4_Hover_Background: #1f5c30;--sapIndicationColor_4_Active_Background: #fff;--sapIndicationColor_4_Active_BorderColor: #bae8bc;--sapIndicationColor_4_Active_TextColor: #256f3a;--sapIndicationColor_4_Selected_Background: #fff;--sapIndicationColor_4_Selected_BorderColor: #bae8bc;--sapIndicationColor_4_Selected_TextColor: #256f3a;--sapIndicationColor_4b: #bae8bc;--sapIndicationColor_4b_BorderColor: #bae8bc;--sapIndicationColor_4b_Hover_Background: #a7e2a9;--sapIndicationColor_5: #0070f2;--sapIndicationColor_5_Background: #0070f2;--sapIndicationColor_5_BorderColor: #0070f2;--sapIndicationColor_5_TextColor: #fff;--sapIndicationColor_5_Hover_Background: #0064d9;--sapIndicationColor_5_Active_Background: #fff;--sapIndicationColor_5_Active_BorderColor: #d3effd;--sapIndicationColor_5_Active_TextColor: #0070f2;--sapIndicationColor_5_Selected_Background: #fff;--sapIndicationColor_5_Selected_BorderColor: #d3effd;--sapIndicationColor_5_Selected_TextColor: #0070f2;--sapIndicationColor_5b: #d3effd;--sapIndicationColor_5b_BorderColor: #d3effd;--sapIndicationColor_5b_Hover_Background: #bbe6fc;--sapIndicationColor_6: #046c7a;--sapIndicationColor_6_Background: #046c7a;--sapIndicationColor_6_BorderColor: #046c7a;--sapIndicationColor_6_TextColor: #fff;--sapIndicationColor_6_Hover_Background: #035661;--sapIndicationColor_6_Active_Background: #fff;--sapIndicationColor_6_Active_BorderColor: #cdf5ec;--sapIndicationColor_6_Active_TextColor: #046c7a;--sapIndicationColor_6_Selected_Background: #fff;--sapIndicationColor_6_Selected_BorderColor: #cdf5ec;--sapIndicationColor_6_Selected_TextColor: #046c7a;--sapIndicationColor_6b: #cdf5ec;--sapIndicationColor_6b_BorderColor: #cdf5ec;--sapIndicationColor_6b_Hover_Background: #b8f1e4;--sapIndicationColor_7: #5d36ff;--sapIndicationColor_7_Background: #5d36ff;--sapIndicationColor_7_BorderColor: #5d36ff;--sapIndicationColor_7_TextColor: #fff;--sapIndicationColor_7_Hover_Background: #481cff;--sapIndicationColor_7_Active_Background: #fff;--sapIndicationColor_7_Active_BorderColor: #e2dbff;--sapIndicationColor_7_Active_TextColor: #5d36ff;--sapIndicationColor_7_Selected_Background: #fff;--sapIndicationColor_7_Selected_BorderColor: #e2dbff;--sapIndicationColor_7_Selected_TextColor: #5d36ff;--sapIndicationColor_7b: #e2dbff;--sapIndicationColor_7b_BorderColor: #e2dbff;--sapIndicationColor_7b_Hover_Background: #cdc2ff;--sapIndicationColor_8: #a100c2;--sapIndicationColor_8_Background: #a100c2;--sapIndicationColor_8_BorderColor: #a100c2;--sapIndicationColor_8_TextColor: #fff;--sapIndicationColor_8_Hover_Background: #8c00a9;--sapIndicationColor_8_Active_Background: #fff;--sapIndicationColor_8_Active_BorderColor: #f8d6ff;--sapIndicationColor_8_Active_TextColor: #a100c2;--sapIndicationColor_8_Selected_Background: #fff;--sapIndicationColor_8_Selected_BorderColor: #f8d6ff;--sapIndicationColor_8_Selected_TextColor: #a100c2;--sapIndicationColor_8b: #f8d6ff;--sapIndicationColor_8b_BorderColor: #f8d6ff;--sapIndicationColor_8b_Hover_Background: #f4bdff;--sapIndicationColor_9: #1d2d3e;--sapIndicationColor_9_Background: #1d2d3e;--sapIndicationColor_9_BorderColor: #1d2d3e;--sapIndicationColor_9_TextColor: #fff;--sapIndicationColor_9_Hover_Background: #15202d;--sapIndicationColor_9_Active_Background: #fff;--sapIndicationColor_9_Active_BorderColor: #d9d9d9;--sapIndicationColor_9_Active_TextColor: #1d2d3e;--sapIndicationColor_9_Selected_Background: #fff;--sapIndicationColor_9_Selected_BorderColor: #d9d9d9;--sapIndicationColor_9_Selected_TextColor: #1d2d3e;--sapIndicationColor_9b: #fff;--sapIndicationColor_9b_BorderColor: #d9d9d9;--sapIndicationColor_9b_Hover_Background: #f2f2f2;--sapIndicationColor_10: #45484a;--sapIndicationColor_10_Background: #83888b;--sapIndicationColor_10_BorderColor: #83888b;--sapIndicationColor_10_TextColor: #fff;--sapIndicationColor_10_Hover_Background: #767b7e;--sapIndicationColor_10_Active_Background: #fff;--sapIndicationColor_10_Active_BorderColor: #eaecee;--sapIndicationColor_10_Active_TextColor: #45484a;--sapIndicationColor_10_Selected_Background: #fff;--sapIndicationColor_10_Selected_BorderColor: #eaecee;--sapIndicationColor_10_Selected_TextColor: #45484a;--sapIndicationColor_10b: #eaecee;--sapIndicationColor_10b_BorderColor: #eaecee;--sapIndicationColor_10b_Hover_Background: #dcdfe3;--sapLegend_WorkingBackground: #fff;--sapLegend_NonWorkingBackground: #ebebeb;--sapLegend_CurrentDateTime: #a100c2;--sapLegendColor1: #c35500;--sapLegendColor2: #d23a0a;--sapLegendColor3: #df1278;--sapLegendColor4: #840606;--sapLegendColor5: #cc00dc;--sapLegendColor6: #0057d2;--sapLegendColor7: #07838f;--sapLegendColor8: #188918;--sapLegendColor9: #5b738b;--sapLegendColor10: #7800a4;--sapLegendColor11: #a93e00;--sapLegendColor12: #aa2608;--sapLegendColor13: #ba066c;--sapLegendColor14: #8d2a00;--sapLegendColor15: #4e247a;--sapLegendColor16: #002a86;--sapLegendColor17: #035663;--sapLegendColor18: #1e592f;--sapLegendColor19: #1a4796;--sapLegendColor20: #470ced;--sapLegendBackgroundColor1: #ffef9f;--sapLegendBackgroundColor2: #feeae1;--sapLegendBackgroundColor3: #fbf6f8;--sapLegendBackgroundColor4: #fbebeb;--sapLegendBackgroundColor5: #ffe5fe;--sapLegendBackgroundColor6: #d1efff;--sapLegendBackgroundColor7: #c2fcee;--sapLegendBackgroundColor8: #f5fae5;--sapLegendBackgroundColor9: #f5f6f7;--sapLegendBackgroundColor10: #fff0fa;--sapLegendBackgroundColor11: #fff8d6;--sapLegendBackgroundColor12: #fff6f6;--sapLegendBackgroundColor13: #f7ebef;--sapLegendBackgroundColor14: #f1ecd5;--sapLegendBackgroundColor15: #f0e7f8;--sapLegendBackgroundColor16: #ebf8ff;--sapLegendBackgroundColor17: #dafdf5;--sapLegendBackgroundColor18: #ebf5cb;--sapLegendBackgroundColor19: #fafdff;--sapLegendBackgroundColor20: #eceeff;--sapChart_Background: #fff;--sapChart_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapChart_ContrastShadowColor: #fff;--sapChart_ContrastLineColor: #fff;--sapChart_LineColor_1: #e1e6eb;--sapChart_LineColor_2: #768da4;--sapChart_LineColor_3: #000001;--sapChart_Choropleth_Background: #edf0f3;--sapChart_ChoroplethRegion_Background: #758ca4;--sapChart_ChoroplethRegion_BorderColor: #edf0f3;--sapChart_Data_TextColor: #000;--sapChart_Data_ContrastTextColor: #fff;--sapChart_Data_InteractiveColor: #000001;--sapChart_Data_Active_Background: #dee2e5;--sapChart_OrderedColor_1: #3278be;--sapChart_OrderedColor_2: #c87b00;--sapChart_OrderedColor_3: #75980b;--sapChart_OrderedColor_4: #df1278;--sapChart_OrderedColor_5: #8b47d7;--sapChart_OrderedColor_6: #049f9a;--sapChart_OrderedColor_7: #0070f2;--sapChart_OrderedColor_8: #cc00dc;--sapChart_OrderedColor_9: #798c77;--sapChart_OrderedColor_10: #da6c6c;--sapChart_OrderedColor_11: #5d36ff;--sapChart_OrderedColor_12: #a68a5b;--sapChart_Bad: #f53232;--sapChart_Critical: #e26300;--sapChart_Good: #30914c;--sapChart_Neutral: #758ca4;--sapChart_Sequence_1_Plus3: #84b8eb;--sapChart_Sequence_1_Plus3_TextColor: #000;--sapChart_Sequence_1_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus2: #468acd;--sapChart_Sequence_1_Plus2_TextColor: #000;--sapChart_Sequence_1_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus1: #3c8cdd;--sapChart_Sequence_1_Plus1_TextColor: #000;--sapChart_Sequence_1_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1: #3278be;--sapChart_Sequence_1_TextColor: #fff;--sapChart_Sequence_1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_BorderColor: #3278be;--sapChart_Sequence_1_Minus1: #31669c;--sapChart_Sequence_1_Minus1_TextColor: #fff;--sapChart_Sequence_1_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus2: #31669c;--sapChart_Sequence_1_Minus2_TextColor: #fff;--sapChart_Sequence_1_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus3: #204060;--sapChart_Sequence_1_Minus3_TextColor: #fff;--sapChart_Sequence_1_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus4: #19334e;--sapChart_Sequence_1_Minus4_TextColor: #fff;--sapChart_Sequence_1_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus5: #13263a;--sapChart_Sequence_1_Minus5_TextColor: #fff;--sapChart_Sequence_1_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Plus3: #efbf72;--sapChart_Sequence_2_Plus3_TextColor: #000;--sapChart_Sequence_2_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus2: #eaaa44;--sapChart_Sequence_2_Plus2_TextColor: #000;--sapChart_Sequence_2_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus1: #e29419;--sapChart_Sequence_2_Plus1_TextColor: #000;--sapChart_Sequence_2_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2: #c87b00;--sapChart_Sequence_2_TextColor: #000;--sapChart_Sequence_2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_BorderColor: #9f6200;--sapChart_Sequence_2_Minus1: #9f6200;--sapChart_Sequence_2_Minus1_TextColor: #fff;--sapChart_Sequence_2_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus2: #7c4c00;--sapChart_Sequence_2_Minus2_TextColor: #fff;--sapChart_Sequence_2_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus3: #623c00;--sapChart_Sequence_2_Minus3_TextColor: #fff;--sapChart_Sequence_2_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus4: #623c00;--sapChart_Sequence_2_Minus4_TextColor: #fff;--sapChart_Sequence_2_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus5: #2f1d00;--sapChart_Sequence_2_Minus5_TextColor: #fff;--sapChart_Sequence_2_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Plus3: #b9d369;--sapChart_Sequence_3_Plus3_TextColor: #000;--sapChart_Sequence_3_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus2: #a6c742;--sapChart_Sequence_3_Plus2_TextColor: #000;--sapChart_Sequence_3_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus1: #8fad33;--sapChart_Sequence_3_Plus1_TextColor: #000;--sapChart_Sequence_3_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3: #75980b;--sapChart_Sequence_3_TextColor: #000;--sapChart_Sequence_3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_BorderColor: #587208;--sapChart_Sequence_3_Minus1: #587208;--sapChart_Sequence_3_Minus1_TextColor: #fff;--sapChart_Sequence_3_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus2: #3e5106;--sapChart_Sequence_3_Minus2_TextColor: #fff;--sapChart_Sequence_3_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus3: #2c3904;--sapChart_Sequence_3_Minus3_TextColor: #fff;--sapChart_Sequence_3_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus4: #212b03;--sapChart_Sequence_3_Minus4_TextColor: #fff;--sapChart_Sequence_3_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus5: #161c02;--sapChart_Sequence_3_Minus5_TextColor: #fff;--sapChart_Sequence_3_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Plus3: #f473b3;--sapChart_Sequence_4_Plus3_TextColor: #000;--sapChart_Sequence_4_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus2: #f14d9e;--sapChart_Sequence_4_Plus2_TextColor: #000;--sapChart_Sequence_4_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus1: #ee278a;--sapChart_Sequence_4_Plus1_TextColor: #000;--sapChart_Sequence_4_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4: #df1278;--sapChart_Sequence_4_TextColor: #fff;--sapChart_Sequence_4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_BorderColor: #df1278;--sapChart_Sequence_4_Minus1: #b90f64;--sapChart_Sequence_4_Minus1_TextColor: #fff;--sapChart_Sequence_4_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus2: #930c4f;--sapChart_Sequence_4_Minus2_TextColor: #fff;--sapChart_Sequence_4_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus3: #770a40;--sapChart_Sequence_4_Minus3_TextColor: #fff;--sapChart_Sequence_4_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus4: #51072c;--sapChart_Sequence_4_Minus4_TextColor: #fff;--sapChart_Sequence_4_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus5: #3a051f;--sapChart_Sequence_4_Minus5_TextColor: #fff;--sapChart_Sequence_4_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Plus3: #d5bcf0;--sapChart_Sequence_5_Plus3_TextColor: #000;--sapChart_Sequence_5_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus2: #b994e0;--sapChart_Sequence_5_Plus2_TextColor: #000;--sapChart_Sequence_5_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus1: #a679d8;--sapChart_Sequence_5_Plus1_TextColor: #000;--sapChart_Sequence_5_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5: #8b47d7;--sapChart_Sequence_5_TextColor: #fff;--sapChart_Sequence_5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_BorderColor: #8b47d7;--sapChart_Sequence_5_Minus1: #7236b5;--sapChart_Sequence_5_Minus1_TextColor: #fff;--sapChart_Sequence_5_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus2: #5e2c96;--sapChart_Sequence_5_Minus2_TextColor: #fff;--sapChart_Sequence_5_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus3: #522682;--sapChart_Sequence_5_Minus3_TextColor: #fff;--sapChart_Sequence_5_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus4: #46216f;--sapChart_Sequence_5_Minus4_TextColor: #fff;--sapChart_Sequence_5_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus5: #341358;--sapChart_Sequence_5_Minus5_TextColor: #fff;--sapChart_Sequence_5_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Plus3: #64ede9;--sapChart_Sequence_6_Plus3_TextColor: #000;--sapChart_Sequence_6_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus2: #2ee0da;--sapChart_Sequence_6_Plus2_TextColor: #000;--sapChart_Sequence_6_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus1: #05c7c1;--sapChart_Sequence_6_Plus1_TextColor: #000;--sapChart_Sequence_6_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6: #049f9a;--sapChart_Sequence_6_TextColor: #000;--sapChart_Sequence_6_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_BorderColor: #05c7c1;--sapChart_Sequence_6_Minus1: #02837f;--sapChart_Sequence_6_Minus1_TextColor: #fff;--sapChart_Sequence_6_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus2: #006663;--sapChart_Sequence_6_Minus2_TextColor: #fff;--sapChart_Sequence_6_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus3: #00514f;--sapChart_Sequence_6_Minus3_TextColor: #fff;--sapChart_Sequence_6_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus4: #003d3b;--sapChart_Sequence_6_Minus4_TextColor: #fff;--sapChart_Sequence_6_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus5: #002322;--sapChart_Sequence_6_Minus5_TextColor: #fff;--sapChart_Sequence_6_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Plus3: #68aeff;--sapChart_Sequence_7_Plus3_TextColor: #000;--sapChart_Sequence_7_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus2: #4098ff;--sapChart_Sequence_7_Plus2_TextColor: #000;--sapChart_Sequence_7_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus1: #1c85ff;--sapChart_Sequence_7_Plus1_TextColor: #000;--sapChart_Sequence_7_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7: #0070f2;--sapChart_Sequence_7_TextColor: #fff;--sapChart_Sequence_7_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_BorderColor: #0070f2;--sapChart_Sequence_7_Minus1: #0062d3;--sapChart_Sequence_7_Minus1_TextColor: #fff;--sapChart_Sequence_7_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus2: #0054b5;--sapChart_Sequence_7_Minus2_TextColor: #fff;--sapChart_Sequence_7_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus3: #00418c;--sapChart_Sequence_7_Minus3_TextColor: #fff;--sapChart_Sequence_7_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus4: #00244f;--sapChart_Sequence_7_Minus4_TextColor: #fff;--sapChart_Sequence_7_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus5: #001b3a;--sapChart_Sequence_7_Minus5_TextColor: #fff;--sapChart_Sequence_7_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Plus3: #f462ff;--sapChart_Sequence_8_Plus3_TextColor: #000;--sapChart_Sequence_8_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus2: #f034ff;--sapChart_Sequence_8_Plus2_TextColor: #000;--sapChart_Sequence_8_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus1: #ed0bff;--sapChart_Sequence_8_Plus1_TextColor: #000;--sapChart_Sequence_8_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8: #cc00dc;--sapChart_Sequence_8_TextColor: #fff;--sapChart_Sequence_8_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_BorderColor: #cc00dc;--sapChart_Sequence_8_Minus1: #a600b3;--sapChart_Sequence_8_Minus1_TextColor: #fff;--sapChart_Sequence_8_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus2: #80008a;--sapChart_Sequence_8_Minus2_TextColor: #fff;--sapChart_Sequence_8_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus3: #6d0076;--sapChart_Sequence_8_Minus3_TextColor: #fff;--sapChart_Sequence_8_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus4: #56005d;--sapChart_Sequence_8_Minus4_TextColor: #fff;--sapChart_Sequence_8_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus5: #350039;--sapChart_Sequence_8_Minus5_TextColor: #fff;--sapChart_Sequence_8_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Plus3: #bdc6bc;--sapChart_Sequence_9_Plus3_TextColor: #000;--sapChart_Sequence_9_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus2: #b5bfb4;--sapChart_Sequence_9_Plus2_TextColor: #000;--sapChart_Sequence_9_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus1: #97a695;--sapChart_Sequence_9_Plus1_TextColor: #000;--sapChart_Sequence_9_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9: #798c77;--sapChart_Sequence_9_TextColor: #000;--sapChart_Sequence_9_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_BorderColor: #798c77;--sapChart_Sequence_9_Minus1: #667664;--sapChart_Sequence_9_Minus1_TextColor: #fff;--sapChart_Sequence_9_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus2: #536051;--sapChart_Sequence_9_Minus2_TextColor: #fff;--sapChart_Sequence_9_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus3: #404a3f;--sapChart_Sequence_9_Minus3_TextColor: #fff;--sapChart_Sequence_9_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus4: #2d342c;--sapChart_Sequence_9_Minus4_TextColor: #fff;--sapChart_Sequence_9_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus5: #1e231e;--sapChart_Sequence_9_Minus5_TextColor: #fff;--sapChart_Sequence_9_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Plus3: #f1c6c6;--sapChart_Sequence_10_Plus3_TextColor: #000;--sapChart_Sequence_10_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus2: #eaadad;--sapChart_Sequence_10_Plus2_TextColor: #000;--sapChart_Sequence_10_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus1: #e28d8d;--sapChart_Sequence_10_Plus1_TextColor: #000;--sapChart_Sequence_10_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10: #da6c6c;--sapChart_Sequence_10_TextColor: #000;--sapChart_Sequence_10_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_BorderColor: #b75757;--sapChart_Sequence_10_Minus1: #b75757;--sapChart_Sequence_10_Minus1_TextColor: #000;--sapChart_Sequence_10_Minus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Minus2: #9d4343;--sapChart_Sequence_10_Minus2_TextColor: #fff;--sapChart_Sequence_10_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus3: #803737;--sapChart_Sequence_10_Minus3_TextColor: #fff;--sapChart_Sequence_10_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus4: #672c2c;--sapChart_Sequence_10_Minus4_TextColor: #fff;--sapChart_Sequence_10_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus5: #562424;--sapChart_Sequence_10_Minus5_TextColor: #fff;--sapChart_Sequence_10_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Plus3: #c0b0ff;--sapChart_Sequence_11_Plus3_TextColor: #000;--sapChart_Sequence_11_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus2: #9b83ff;--sapChart_Sequence_11_Plus2_TextColor: #000;--sapChart_Sequence_11_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus1: #8669ff;--sapChart_Sequence_11_Plus1_TextColor: #000;--sapChart_Sequence_11_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11: #5d36ff;--sapChart_Sequence_11_TextColor: #fff;--sapChart_Sequence_11_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_BorderColor: #5d36ff;--sapChart_Sequence_11_Minus1: #4b25e7;--sapChart_Sequence_11_Minus1_TextColor: #fff;--sapChart_Sequence_11_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus2: #3a17cd;--sapChart_Sequence_11_Minus2_TextColor: #fff;--sapChart_Sequence_11_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus3: #2f13a8;--sapChart_Sequence_11_Minus3_TextColor: #fff;--sapChart_Sequence_11_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus4: #250f83;--sapChart_Sequence_11_Minus4_TextColor: #fff;--sapChart_Sequence_11_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus5: #2f13a8;--sapChart_Sequence_11_Minus5_TextColor: #fff;--sapChart_Sequence_11_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Plus3: #e4ddcf;--sapChart_Sequence_12_Plus3_TextColor: #000;--sapChart_Sequence_12_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus2: #dacebb;--sapChart_Sequence_12_Plus2_TextColor: #000;--sapChart_Sequence_12_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus1: #c4b293;--sapChart_Sequence_12_Plus1_TextColor: #000;--sapChart_Sequence_12_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12: #a68a5b;--sapChart_Sequence_12_TextColor: #000;--sapChart_Sequence_12_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_BorderColor: #a68a5b;--sapChart_Sequence_12_Minus1: #8c744c;--sapChart_Sequence_12_Minus1_TextColor: #fff;--sapChart_Sequence_12_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus2: #786441;--sapChart_Sequence_12_Minus2_TextColor: #fff;--sapChart_Sequence_12_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus3: #5e4e33;--sapChart_Sequence_12_Minus3_TextColor: #fff;--sapChart_Sequence_12_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus4: #433825;--sapChart_Sequence_12_Minus4_TextColor: #fff;--sapChart_Sequence_12_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus5: #30271a;--sapChart_Sequence_12_Minus5_TextColor: #fff;--sapChart_Sequence_12_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Plus3: #fdcece;--sapChart_Sequence_Bad_Plus3_TextColor: #000;--sapChart_Sequence_Bad_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus2: #fa9d9d;--sapChart_Sequence_Bad_Plus2_TextColor: #000;--sapChart_Sequence_Bad_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus1: #f86c6c;--sapChart_Sequence_Bad_Plus1_TextColor: #000;--sapChart_Sequence_Bad_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad: #f53232;--sapChart_Sequence_Bad_TextColor: #000;--sapChart_Sequence_Bad_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_BorderColor: #f53232;--sapChart_Sequence_Bad_Minus1: #d00a0a;--sapChart_Sequence_Bad_Minus1_TextColor: #fff;--sapChart_Sequence_Bad_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus2: #a90808;--sapChart_Sequence_Bad_Minus2_TextColor: #fff;--sapChart_Sequence_Bad_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus3: #830606;--sapChart_Sequence_Bad_Minus3_TextColor: #fff;--sapChart_Sequence_Bad_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus4: #570404;--sapChart_Sequence_Bad_Minus4_TextColor: #fff;--sapChart_Sequence_Bad_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus5: #320000;--sapChart_Sequence_Bad_Minus5_TextColor: #fff;--sapChart_Sequence_Bad_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Plus3: #ffb881;--sapChart_Sequence_Critical_Plus3_TextColor: #000;--sapChart_Sequence_Critical_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus2: #ff933f;--sapChart_Sequence_Critical_Plus2_TextColor: #000;--sapChart_Sequence_Critical_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus1: #ff760c;--sapChart_Sequence_Critical_Plus1_TextColor: #000;--sapChart_Sequence_Critical_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical: #e26300;--sapChart_Sequence_Critical_TextColor: #000;--sapChart_Sequence_Critical_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_BorderColor: #e26300;--sapChart_Sequence_Critical_Minus1: #c35600;--sapChart_Sequence_Critical_Minus1_TextColor: #fff;--sapChart_Sequence_Critical_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus2: #aa4a00;--sapChart_Sequence_Critical_Minus2_TextColor: #fff;--sapChart_Sequence_Critical_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus3: #903f00;--sapChart_Sequence_Critical_Minus3_TextColor: #fff;--sapChart_Sequence_Critical_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus4: #6d3000;--sapChart_Sequence_Critical_Minus4_TextColor: #fff;--sapChart_Sequence_Critical_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus5: #492000;--sapChart_Sequence_Critical_Minus5_TextColor: #fff;--sapChart_Sequence_Critical_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Plus3: #88d79f;--sapChart_Sequence_Good_Plus3_TextColor: #000;--sapChart_Sequence_Good_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus2: #56c776;--sapChart_Sequence_Good_Plus2_TextColor: #000;--sapChart_Sequence_Good_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus1: #3ab05c;--sapChart_Sequence_Good_Plus1_TextColor: #000;--sapChart_Sequence_Good_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good: #30914c;--sapChart_Sequence_Good_TextColor: #000;--sapChart_Sequence_Good_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_BorderColor: #30914c;--sapChart_Sequence_Good_Minus1: #287a40;--sapChart_Sequence_Good_Minus1_TextColor: #fff;--sapChart_Sequence_Good_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus2: #226736;--sapChart_Sequence_Good_Minus2_TextColor: #fff;--sapChart_Sequence_Good_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus3: #1c542c;--sapChart_Sequence_Good_Minus3_TextColor: #fff;--sapChart_Sequence_Good_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus4: #13391e;--sapChart_Sequence_Good_Minus4_TextColor: #fff;--sapChart_Sequence_Good_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus5: #0a1e10;--sapChart_Sequence_Good_Minus5_TextColor: #fff;--sapChart_Sequence_Good_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Plus3: #edf0f3;--sapChart_Sequence_Neutral_Plus3_TextColor: #000;--sapChart_Sequence_Neutral_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus2: #c2ccd7;--sapChart_Sequence_Neutral_Plus2_TextColor: #000;--sapChart_Sequence_Neutral_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus1: #9aabbc;--sapChart_Sequence_Neutral_Plus1_TextColor: #000;--sapChart_Sequence_Neutral_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral: #758ca4;--sapChart_Sequence_Neutral_TextColor: #000;--sapChart_Sequence_Neutral_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_BorderColor: #758ca4;--sapChart_Sequence_Neutral_Minus1: #5b728b;--sapChart_Sequence_Neutral_Minus1_TextColor: #fff;--sapChart_Sequence_Neutral_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus2: #495e74;--sapChart_Sequence_Neutral_Minus2_TextColor: #fff;--sapChart_Sequence_Neutral_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus3: #364a5f;--sapChart_Sequence_Neutral_Minus3_TextColor: #fff;--sapChart_Sequence_Neutral_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus4: #233649;--sapChart_Sequence_Neutral_Minus4_TextColor: #fff;--sapChart_Sequence_Neutral_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus5: #1a2633;--sapChart_Sequence_Neutral_Minus5_TextColor: #fff;--sapChart_Sequence_Neutral_Minus5_TextShadow: 0 0 .125rem #223548;}\n'},t5={packageName:"@ui5/webcomponents",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:':root{--ui5-v2-4-0-avatar-hover-box-shadow-offset: 0px 0px 0px .0625rem;--ui5-v2-4-0-avatar-initials-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-border-radius-img-deduction: .0625rem;--_ui5-v2-4-0_avatar_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_focus_width: .0625rem;--_ui5-v2-4-0_avatar_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_overflow_button_focus_offset: .0625rem;--_ui5-v2-4-0_avatar_focus_offset: .1875rem;--ui5-v2-4-0-avatar-initials-border: .0625rem solid var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-border-radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_avatar_fontsize_XS: 1rem;--_ui5-v2-4-0_avatar_fontsize_S: 1.125rem;--_ui5-v2-4-0_avatar_fontsize_M: 1.5rem;--_ui5-v2-4-0_avatar_fontsize_L: 2.25rem;--_ui5-v2-4-0_avatar_fontsize_XL: 3rem;--ui5-v2-4-0-avatar-accent1: var(--sapAvatar_1_Background);--ui5-v2-4-0-avatar-accent2: var(--sapAvatar_2_Background);--ui5-v2-4-0-avatar-accent3: var(--sapAvatar_3_Background);--ui5-v2-4-0-avatar-accent4: var(--sapAvatar_4_Background);--ui5-v2-4-0-avatar-accent5: var(--sapAvatar_5_Background);--ui5-v2-4-0-avatar-accent6: var(--sapAvatar_6_Background);--ui5-v2-4-0-avatar-accent7: var(--sapAvatar_7_Background);--ui5-v2-4-0-avatar-accent8: var(--sapAvatar_8_Background);--ui5-v2-4-0-avatar-accent9: var(--sapAvatar_9_Background);--ui5-v2-4-0-avatar-accent10: var(--sapAvatar_10_Background);--ui5-v2-4-0-avatar-placeholder: var(--sapContent_ImagePlaceholderBackground);--ui5-v2-4-0-avatar-accent1-color: var(--sapAvatar_1_TextColor);--ui5-v2-4-0-avatar-accent2-color: var(--sapAvatar_2_TextColor);--ui5-v2-4-0-avatar-accent3-color: var(--sapAvatar_3_TextColor);--ui5-v2-4-0-avatar-accent4-color: var(--sapAvatar_4_TextColor);--ui5-v2-4-0-avatar-accent5-color: var(--sapAvatar_5_TextColor);--ui5-v2-4-0-avatar-accent6-color: var(--sapAvatar_6_TextColor);--ui5-v2-4-0-avatar-accent7-color: var(--sapAvatar_7_TextColor);--ui5-v2-4-0-avatar-accent8-color: var(--sapAvatar_8_TextColor);--ui5-v2-4-0-avatar-accent9-color: var(--sapAvatar_9_TextColor);--ui5-v2-4-0-avatar-accent10-color: var(--sapAvatar_10_TextColor);--ui5-v2-4-0-avatar-placeholder-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-accent1-border-color: var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-accent2-border-color: var(--sapAvatar_2_BorderColor);--ui5-v2-4-0-avatar-accent3-border-color: var(--sapAvatar_3_BorderColor);--ui5-v2-4-0-avatar-accent4-border-color: var(--sapAvatar_4_BorderColor);--ui5-v2-4-0-avatar-accent5-border-color: var(--sapAvatar_5_BorderColor);--ui5-v2-4-0-avatar-accent6-border-color: var(--sapAvatar_6_BorderColor);--ui5-v2-4-0-avatar-accent7-border-color: var(--sapAvatar_7_BorderColor);--ui5-v2-4-0-avatar-accent8-border-color: var(--sapAvatar_8_BorderColor);--ui5-v2-4-0-avatar-accent9-border-color: var(--sapAvatar_9_BorderColor);--ui5-v2-4-0-avatar-accent10-border-color: var(--sapAvatar_10_BorderColor);--ui5-v2-4-0-avatar-placeholder-border-color: var(--sapContent_ImagePlaceholderBackground);--_ui5-v2-4-0_avatar_icon_XS: var(--_ui5-v2-4-0_avatar_fontsize_XS);--_ui5-v2-4-0_avatar_icon_S: var(--_ui5-v2-4-0_avatar_fontsize_S);--_ui5-v2-4-0_avatar_icon_M: var(--_ui5-v2-4-0_avatar_fontsize_M);--_ui5-v2-4-0_avatar_icon_L: var(--_ui5-v2-4-0_avatar_fontsize_L);--_ui5-v2-4-0_avatar_icon_XL: var(--_ui5-v2-4-0_avatar_fontsize_XL);--_ui5-v2-4-0_avatar_group_button_focus_border: none;--_ui5-v2-4-0_avatar_group_focus_border_radius: .375rem;--_ui5-v2-4-0-tag-height: 1rem;--_ui5-v2-4-0-tag-icon-width: .75rem;--ui5-v2-4-0-tag-text-shadow: var(--sapContent_TextShadow);--ui5-v2-4-0-tag-contrast-text-shadow: var(--sapContent_ContrastTextShadow);--ui5-v2-4-0-tag-information-text-shadow: var(--ui5-v2-4-0-tag-text-shadow);--ui5-v2-4-0-tag-set2-color-scheme-1-color: var(--sapIndicationColor_1);--ui5-v2-4-0-tag-set2-color-scheme-1-background: var(--sapIndicationColor_1b);--ui5-v2-4-0-tag-set2-color-scheme-1-border: var(--sapIndicationColor_1b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-1-hover-background: var(--sapIndicationColor_1b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-color: var(--sapIndicationColor_1_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-1-active-background: var(--sapIndicationColor_1_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-border: var(--sapIndicationColor_1_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-color: var(--sapIndicationColor_2);--ui5-v2-4-0-tag-set2-color-scheme-2-background: var(--sapIndicationColor_2b);--ui5-v2-4-0-tag-set2-color-scheme-2-border: var(--sapIndicationColor_2b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-hover-background: var(--sapIndicationColor_2b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-color: var(--sapIndicationColor_2_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-2-active-background: var(--sapIndicationColor_2_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-border: var(--sapIndicationColor_2_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-color: var(--sapIndicationColor_3);--ui5-v2-4-0-tag-set2-color-scheme-3-background: var(--sapIndicationColor_3b);--ui5-v2-4-0-tag-set2-color-scheme-3-border: var(--sapIndicationColor_3b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-hover-background: var(--sapIndicationColor_3b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-color: var(--sapIndicationColor_3_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-3-active-background: var(--sapIndicationColor_3_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-border: var(--sapIndicationColor_3_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-color: var(--sapIndicationColor_4);--ui5-v2-4-0-tag-set2-color-scheme-4-background: var(--sapIndicationColor_4b);--ui5-v2-4-0-tag-set2-color-scheme-4-border: var(--sapIndicationColor_4b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-hover-background: var(--sapIndicationColor_4b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-color: var(--sapIndicationColor_4_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-4-active-background: var(--sapIndicationColor_4_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-border: var(--sapIndicationColor_4_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-color: var(--sapIndicationColor_5);--ui5-v2-4-0-tag-set2-color-scheme-5-background: var(--sapIndicationColor_5b);--ui5-v2-4-0-tag-set2-color-scheme-5-border: var(--sapIndicationColor_5b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-hover-background: var(--sapIndicationColor_5b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-color: var(--sapIndicationColor_5_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-5-active-background: var(--sapIndicationColor_5_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-border: var(--sapIndicationColor_5_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-color: var(--sapIndicationColor_6);--ui5-v2-4-0-tag-set2-color-scheme-6-background: var(--sapIndicationColor_6b);--ui5-v2-4-0-tag-set2-color-scheme-6-border: var(--sapIndicationColor_6b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-hover-background: var(--sapIndicationColor_6b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-color: var(--sapIndicationColor_6_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-6-active-background: var(--sapIndicationColor_6_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-border: var(--sapIndicationColor_6_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-color: var(--sapIndicationColor_7);--ui5-v2-4-0-tag-set2-color-scheme-7-background: var(--sapIndicationColor_7b);--ui5-v2-4-0-tag-set2-color-scheme-7-border: var(--sapIndicationColor_7b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-hover-background: var(--sapIndicationColor_7b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-color: var(--sapIndicationColor_7_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-7-active-background: var(--sapIndicationColor_7_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-border: var(--sapIndicationColor_7_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-color: var(--sapIndicationColor_8);--ui5-v2-4-0-tag-set2-color-scheme-8-background: var(--sapIndicationColor_8b);--ui5-v2-4-0-tag-set2-color-scheme-8-border: var(--sapIndicationColor_8b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-hover-background: var(--sapIndicationColor_8b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-color: var(--sapIndicationColor_8_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-8-active-background: var(--sapIndicationColor_8_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-border: var(--sapIndicationColor_8_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-9-color: var(--sapIndicationColor_9);--ui5-v2-4-0-tag-set2-color-scheme-9-background: var(--sapIndicationColor_9b);--ui5-v2-4-0-tag-set2-color-scheme-9-border: var(--sapIndicationColor_9b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-color: var(--sapIndicationColor_10);--ui5-v2-4-0-tag-set2-color-scheme-10-background: var(--sapIndicationColor_10b);--ui5-v2-4-0-tag-set2-color-scheme-10-border: var(--sapIndicationColor_10b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-hover-background: var(--sapIndicationColor_10b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-color: var(--sapIndicationColor_10_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-10-active-background: var(--sapIndicationColor_10_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-border: var(--sapIndicationColor_10_Active_BorderColor);--_ui5-v2-4-0-tag-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-min-width_size_l: 1.75rem;--_ui5-v2-4-0-tag-font-size_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_width_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_height_size_l:1.25rem;--_ui5-v2-4-0-tag-icon_height_size_l: 1.25rem;--_ui5-v2-4-0-tag-text_padding_size_l: .125rem .25rem;--_ui5-v2-4-0-tag-text-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-text-padding: .1875rem .25rem;--_ui5-v2-4-0-tag-padding-inline-icon-only: .313rem;--_ui5-v2-4-0-tag-text-transform: none;--_ui5-v2-4-0-tag-icon-gap: .25rem;--_ui5-v2-4-0-tag-font-size: var(--sapFontSize);--_ui5-v2-4-0-tag-font: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0-tag-font-weight: normal;--_ui5-v2-4-0-tag-letter-spacing: normal;--_ui5-v2-4-0_bar_base_height: 2.75rem;--_ui5-v2-4-0_bar_subheader_height: 3rem;--_ui5-v2-4-0_bar-start-container-padding-start: 2rem;--_ui5-v2-4-0_bar-mid-container-padding-start-end: .5rem;--_ui5-v2-4-0_bar-end-container-padding-end: 2rem;--_ui5-v2-4-0_bar-start-container-padding-start_S: 1rem;--_ui5-v2-4-0_bar-start-container-padding-start_XL: 3rem;--_ui5-v2-4-0_bar-end-container-padding-end_S: 1rem;--_ui5-v2-4-0_bar-end-container-padding-end_XL: 3rem;--_ui5-v2-4-0_bar_subheader_margin-top: -.0625rem;--_ui5-v2-4-0_breadcrumbs_margin: 0 0 .5rem 0;--_ui5-v2-4-0_busy_indicator_block_layer: color-mix(in oklch, transparent, var(--sapBlockLayer_Background) 20%);--_ui5-v2-4-0_busy_indicator_color: var(--sapContent_BusyColor);--_ui5-v2-4-0_busy_indicator_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0-calendar-legend-root-padding: .75rem;--_ui5-v2-4-0-calendar-legend-root-width: 18.5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: 0;--_ui5-v2-4-0-calendar-legend-item-root-width: 7.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border: var(--sapContent_FocusWidth) solid var(--sapContent_FocusColor);--_ui5-v2-4-0_card_box_shadow: var(--sapContent_Shadow0);--_ui5-v2-4-0_card_header_border_color: var(--sapTile_SeparatorColor);--_ui5-v2-4-0_card_header_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_card_header_focus_bottom_radius: 0px;--_ui5-v2-4-0_card_header_title_font_weight: normal;--_ui5-v2-4-0_card_header_subtitle_margin_top: .25rem;--_ui5-v2-4-0_card_hover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_card_header_focus_offset: 0px;--_ui5-v2-4-0_card_header_focus_radius: var(--_ui5-v2-4-0_card_border-radius);--_ui5-v2-4-0_card_header_title_font_family: var(--sapFontHeaderFamily);--_ui5-v2-4-0_card_header_title_font_size: var(--sapFontHeader6Size);--_ui5-v2-4-0_card_header_hover_bg: var(--sapTile_Hover_Background);--_ui5-v2-4-0_card_header_active_bg: var(--sapTile_Active_Background);--_ui5-v2-4-0_card_header_border: none;--_ui5-v2-4-0_card_border-radius: var(--sapTile_BorderCornerRadius);--_ui5-v2-4-0_card_header_padding: 1rem 1rem .75rem 1rem;--_ui5-v2-4-0_card_border: none;--ui5-v2-4-0_carousel_background_color_solid: var(--sapGroup_ContentBackground);--ui5-v2-4-0_carousel_background_color_translucent: var(--sapBackgroundColor);--ui5-v2-4-0_carousel_button_size: 2.5rem;--ui5-v2-4-0_carousel_inactive_dot_size: .25rem;--ui5-v2-4-0_carousel_inactive_dot_margin: 0 .375rem;--ui5-v2-4-0_carousel_inactive_dot_border: 1px solid var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_inactive_dot_background: var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_active_dot_border: 1px solid var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_active_dot_background: var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_navigation_button_active_box_shadow: none;--_ui5-v2-4-0_checkbox_box_shadow: none;--_ui5-v2-4-0_checkbox_transition: unset;--_ui5-v2-4-0_checkbox_focus_border: none;--_ui5-v2-4-0_checkbox_border_radius: 0;--_ui5-v2-4-0_checkbox_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_checkbox_outer_hover_background: transparent;--_ui5-v2-4-0_checkbox_inner_width_height: 1.375rem;--_ui5-v2-4-0_checkbox_inner_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_information_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_warning_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_error_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_success_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_default_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_background: var(--sapField_Background);--_ui5-v2-4-0_checkbox_wrapped_focus_padding: .375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_checkbox_compact_wrapper_padding: .5rem;--_ui5-v2-4-0_checkbox_compact_width_height: 2rem;--_ui5-v2-4-0_checkbox_compact_inner_size: 1rem;--_ui5-v2-4-0_checkbox_compact_focus_position: .375rem;--_ui5-v2-4-0_checkbox_label_offset: var(--_ui5-v2-4-0_checkbox_wrapper_padding);--_ui5-v2-4-0_checkbox_disabled_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_checkbox_default_focus_border: none;--_ui5-v2-4-0_checkbox_focus_outline_display: block;--_ui5-v2-4-0_checkbox_wrapper_padding: .6875rem;--_ui5-v2-4-0_checkbox_width_height: 2.75rem;--_ui5-v2-4-0_checkbox_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_checkbox_inner_border: solid var(--sapField_BorderWidth) var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_checkbox_checkmark_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_checkbox_hover_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_hover_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_selected_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_active_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_active_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_readonly_border: var(--sapElement_BorderWidth) var(--sapField_ReadOnly_BorderColor) dashed;--_ui5-v2-4-0_checkbox_inner_error_border: var(--sapField_InvalidBorderWidth) solid var(--sapField_InvalidColor);--_ui5-v2-4-0_checkbox_inner_error_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_warning_border: var(--sapField_WarningBorderWidth) solid var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_checkmark_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_success_border: var(--sapField_SuccessBorderWidth) solid var(--sapField_SuccessColor);--_ui5-v2-4-0_checkbox_inner_success_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_information_color: var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_border: var(--sapField_InformationBorderWidth) solid var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_checkbox_focus_position: .3125rem;--_ui5-v2-4-0_checkbox_focus_border_radius: .5rem;--_ui5-v2-4-0_checkbox_right_focus_distance: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_color-palette-item-after-focus-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-outer-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-inner-border-radius: .1875rem;--_ui5-v2-4-0_color-palette-item-after-not-focus-color: .0625rem solid var(--sapGroup_ContentBackground);--_ui5-v2-4-0_color-palette-item-container-sides-padding: .3125rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .6875rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1.5rem;--_ui5-v2-4-0_color-palette-item-container-padding: var(--_ui5-v2-4-0_color-palette-item-container-sides-padding) var(--_ui5-v2-4-0_color-palette-item-container-rows-padding);--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 9.5rem;--_ui5-v2-4-0_color-palette-button-height: 3rem;--_ui5-v2-4-0_color-palette-item-before-focus-color: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.3125rem;--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-color: .0625rem solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_color-palette-item-selected-focused-border-after: none;--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-before-focus-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-after-focus-border-radius: .3125rem;--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius: .375rem;--_ui5-v2-4-0_color-palette-item-selected-focused-border-before: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border: none;--_ui5-v2-4-0_color-palette-item-selected-focused-border: none;--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset: -.375rem -.375rem;--_ui5-v2-4-0-color-palette-item-mobile-focus-inset: 0px;--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border: none;--_ui5-v2-4-0_color_picker_circle_outer_border: .0625rem solid var(--sapContent_ContrastShadowColor);--_ui5-v2-4-0_color_picker_circle_inner_border: .0625rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_circle_inner_circle_size: .5625rem;--_ui5-v2-4-0_color_picker_slider_handle_box_shadow: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_border: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_hover: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_margin_top: -.1875rem;--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top: var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top);--_ui5-v2-4-0_color_picker_slider_container_margin_top: -11px;--_ui5-v2-4-0_color_picker_slider_handle_inline_focus: 1px solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_datepicker_icon_border: none;--_ui5-v2-4-0-datepicker-hover-background: var(--sapField_Hover_Background);--_ui5-v2-4-0-datepicker_border_radius: .25rem;--_ui5-v2-4-0-datepicker_icon_border_radius: .125rem;--_ui5-v2-4-0_daypicker_item_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_margin: 2px;--_ui5-v2-4-0_daypicker_item_border: none;--_ui5-v2-4-0_daypicker_item_selected_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_daynames_container_height: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_daypicker_item_othermonth_background_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_othermonth_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_othermonth_hover_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_now_inner_border_radius: 0;--_ui5-v2-4-0_daypicker_item_outline_width: 1px;--_ui5-v2-4-0_daypicker_item_outline_offset: 1px;--_ui5-v2-4-0_daypicker_item_now_focus_after_width: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_focus_after_height: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_selected_background: transparent;--_ui5-v2-4-0_daypicker_item_outline_focus_after: none;--_ui5-v2-4-0_daypicker_item_border_focus_after: var(--_ui5-v2-4-0_daypicker_item_outline_width) dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_width_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_height_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_outline: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset_focus_after: var(--_ui5-v2-4-0_daypicker_item_now_outline_offset);--_ui5-v2-4-0_daypicker_item_selected_between_hover_background: var(--sapList_Hover_SelectionBackground);--_ui5-v2-4-0_daypicker_item_now_not_selected_inset: 0;--_ui5-v2-4-0_daypicker_item_now_border_color: var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_border_radios: .25rem;--_ui5-v2-4-0_daypicker_special_day_top: 2.5rem;--_ui5-v2-4-0_daypicker_special_day_before_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_after_border_width: .125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_dot: .375rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.4375rem;--_ui5-v2-4-0_daypicker_item_border_radius: .4375rem;--_ui5-v2-4-0_daypicker_item_focus_border: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_border: .0625rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_not_selected_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_width: .125rem;--_ui5-v2-4-0_daypicker_item_no_selected_inset: .375rem;--_ui5-v2-4-0_daypicker_item_now_border_focus_after: .125rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_now_border_radius_focus_after: .3125rem;--_ui5-v2-4-0_day_picker_item_selected_now_border_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_day_picker_item_selected_now_border_radius_focus: .1875rem;--ui5-v2-4-0-dp-item_withsecondtype_border: .375rem;--_ui5-v2-4-0_daypicker_item_now_border: .125rem solid var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_daypicker_dayname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_weekname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_selected_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_selected_daytext_hover_background: transparent;--_ui5-v2-4-0_daypicker_item_border_radius_item: .5rem;--_ui5-v2-4-0_daypicker_item_border_radius_focus_after: .1875rem;--_ui5-v2-4-0_daypicker_item_selected_between_border: .5rem;--_ui5-v2-4-0_daypicker_item_selected_between_background: var(--sapList_SelectionBackgroundColor);--_ui5-v2-4-0_daypicker_item_selected_between_text_background: transparent;--_ui5-v2-4-0_daypicker_item_selected_between_text_font: var(--sapFontFamily);--_ui5-v2-4-0_daypicker_item_selected_text_font: var(--sapFontBoldFamily);--_ui5-v2-4-0_daypicker_item_now_box_shadow: inset 0 0 0 .35rem var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_selected_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_item_now_selected_outline_offset: -.25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_inset: .25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_border: .0625rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_now_selected_between_border_radius: .1875rem;--_ui5-v2-4-0_daypicker_item_select_between_border: 1px solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_weeekend_filter: brightness(105%);--_ui5-v2-4-0_daypicker_item_selected_hover: var(--sapList_Hover_Background);--_ui5-v2-4-0_daypicker_item_now_inset: .3125rem;--_ui5-v2-4-0-dp-item_withsecondtype_border: .25rem;--_ui5-v2-4-0_daypicker_item_selected__secondary_type_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_two_calendar_item_now_day_text_content: "";--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_width: .125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_radius: .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_focus_border_radius: .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_inset: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_now_border_radius_focus: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_focus_inset: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_select_focus_border_radius: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_inset: .125rem;--_ui5-v2-4-0_daypicker_selected_item_special_day_width: calc(100% - .125rem) ;--_ui5-v2-4-0_daypicker_special_day_border_bottom_radius: .5rem;--_ui5-v2-4-0-daypicker_item_selected_now_border_radius: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_width: calc(100% - .1875rem) ;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 2.4375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_border_radius: .25rem;--_ui5-v2-4-0_daypicker_item_now_focus_margin: 0;--_ui5-v2-4-0_daypicker_special_day_border_top: none;--_ui5-v2-4-0_daypicker_special_day_selected_border_radius_bottom: .25rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 2.125rem;--_ui5-v2-4-0_daypicker_specialday_focused_width: calc(100% - .75rem) ;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 2.3125rem;--_ui5-v2-4-0_daypicker_item_now_specialday_width: calc(100% - .5rem) ;--_ui5-v2-4-0_dialog_header_error_state_icon_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_dialog_header_information_state_icon_color: var(--sapInformativeElementColor);--_ui5-v2-4-0_dialog_header_success_state_icon_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_dialog_header_warning_state_icon_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_dialog_header_state_line_height: .0625rem;--_ui5-v2-4-0_dialog_header_focus_bottom_offset: 2px;--_ui5-v2-4-0_dialog_header_focus_top_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_left_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_right_offset: 1px;--_ui5-v2-4-0_dialog_header_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_file_uploader_value_state_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_file_uploader_hover_border: none;--_ui5-v2-4-0_table_cell_valign: center;--_ui5-v2-4-0_table_cell_min_width: 2.75rem;--_ui5-v2-4-0_table_navigated_cell_width: .1875rem;--_ui5-v2-4-0_table_shadow_border_left: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_top: inset 0 var(--sapContent_FocusWidth) var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_bottom: inset 0 -1px var(--sapContent_FocusColor);--ui5-v2-4-0-form-item-layout: 1fr 2fr;--ui5-v2-4-0-form-item-layout-span1: 1fr 11fr;--ui5-v2-4-0-form-item-layout-span2: 2fr 10fr;--ui5-v2-4-0-form-item-layout-span3: 3fr 9fr;--ui5-v2-4-0-form-item-layout-span4: 4fr 8fr;--ui5-v2-4-0-form-item-layout-span5: 5fr 7fr;--ui5-v2-4-0-form-item-layout-span6: 6fr 6fr;--ui5-v2-4-0-form-item-layout-span7: 7fr 5fr;--ui5-v2-4-0-form-item-layout-span8: 8fr 4fr;--ui5-v2-4-0-form-item-layout-span9: 9fr 3fr;--ui5-v2-4-0-form-item-layout-span10: 10fr 2fr;--ui5-v2-4-0-form-item-layout-span11: 11fr 1fr;--ui5-v2-4-0-form-item-layout-span12: 1fr;--ui5-v2-4-0-form-item-label-justify: end;--ui5-v2-4-0-form-item-label-justify-span12: start;--ui5-v2-4-0-form-item-label-padding: .125rem 0;--ui5-v2-4-0-form-item-label-padding-end: .85rem;--ui5-v2-4-0-form-item-label-padding-span12: .625rem .25rem 0 .25rem;--ui5-v2-4-0-group-header-listitem-background-color: var(--sapList_GroupHeaderBackground);--ui5-v2-4-0-icon-focus-border-radius: .25rem;--_ui5-v2-4-0_input_width: 13.125rem;--_ui5-v2-4-0_input_min_width: 2.75rem;--_ui5-v2-4-0_input_height: var(--sapElement_Height);--_ui5-v2-4-0_input_compact_height: 1.625rem;--_ui5-v2-4-0_input_value_state_error_hover_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_background_color: var(--sapField_Background);--_ui5-v2-4-0_input_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_input_placeholder_style: italic;--_ui5-v2-4-0_input_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_bottom_border_height: 0;--_ui5-v2-4-0_input_bottom_border_color: transparent;--_ui5-v2-4-0_input_focused_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_input_state_border_width: .125rem;--_ui5-v2-4-0_input_information_border_width: .125rem;--_ui5-v2-4-0_input_error_font_weight: normal;--_ui5-v2-4-0_input_warning_font_weight: normal;--_ui5-v2-4-0_input_focus_border_width: 1px;--_ui5-v2-4-0_input_error_warning_font_style: inherit;--_ui5-v2-4-0_input_error_warning_text_indent: 0;--_ui5-v2-4-0_input_disabled_color: var(--sapContent_DisabledTextColor);--_ui5-v2-4-0_input_disabled_font_weight: normal;--_ui5-v2-4-0_input_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0-input_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_input_readonly_border_color: var(--sapField_ReadOnly_BorderColor);--_ui5-v2-4-0_input_readonly_background: var(--sapField_ReadOnly_Background);--_ui5-v2-4-0_input_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_input_icon_min_width: 2.25rem;--_ui5-v2-4-0_input_compact_min_width: 2rem;--_ui5-v2-4-0_input_transition: none;--_ui5-v2-4-0-input-value-state-icon-display: none;--_ui5-v2-4-0_input_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focused_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_value_state_success_border_width: 1px;--_ui5-v2-4-0_input_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0_input_focused_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0-input-value-state-information-border-width: 1px;--_ui5-v2-4-0-input-background-image: none;--ui5-v2-4-0_input_focus_pseudo_element_content: "";--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0-input_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_icon_width: 2.25rem;--_ui5-v2-4-0-input-icons-count: 0;--_ui5-v2-4-0_input_margin_top_bottom: .1875rem;--_ui5-v2-4-0_input_tokenizer_min_width: 3.25rem;--_ui5-v2-4-0-input-border: none;--_ui5-v2-4-0_input_hover_border: none;--_ui5-v2-4-0_input_focus_border_radius: .25rem;--_ui5-v2-4-0_input_readonly_focus_border_radius: .125rem;--_ui5-v2-4-0_input_error_warning_border_style: none;--_ui5-v2-4-0_input_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focus_offset: 0;--_ui5-v2-4-0_input_readonly_focus_offset: .125rem;--_ui5-v2-4-0_input_information_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_custom_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_input_icon_wrapper_height: calc(100% - 1px) ;--_ui5-v2-4-0_input_icon_wrapper_state_height: calc(100% - 2px) ;--_ui5-v2-4-0_input_icon_wrapper_success_state_height: calc(100% - var(--_ui5-v2-4-0_input_value_state_success_border_width));--_ui5-v2-4-0_input_icon_color: var(--sapContent_IconColor);--_ui5-v2-4-0_input_icon_pressed_bg: var(--sapButton_Selected_Background);--_ui5-v2-4-0_input_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_icon_hover_bg: var(--sapField_Focus_Background);--_ui5-v2-4-0_input_icon_pressed_color: var(--sapButton_Active_TextColor);--_ui5-v2-4-0_input_icon_border_radius: .25rem;--_ui5-v2-4-0_input_icon_box_shadow: var(--sapField_Hover_Shadow);--_ui5-v2-4-0_input_icon_border: none;--_ui5-v2-4-0_input_error_icon_box_shadow: var(--sapContent_Negative_Shadow);--_ui5-v2-4-0_input_warning_icon_box_shadow: var(--sapContent_Critical_Shadow);--_ui5-v2-4-0_input_information_icon_box_shadow: var(--sapContent_Informative_Shadow);--_ui5-v2-4-0_input_success_icon_box_shadow: var(--sapContent_Positive_Shadow);--_ui5-v2-4-0_input_icon_error_pressed_color: var(--sapButton_Reject_Selected_TextColor);--_ui5-v2-4-0_input_icon_warning_pressed_color: var(--sapButton_Attention_Selected_TextColor);--_ui5-v2-4-0_input_icon_information_pressed_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_input_icon_success_pressed_color: var(--sapButton_Accept_Selected_TextColor);--_ui5-v2-4-0_link_focus_text_decoration: underline;--_ui5-v2-4-0_link_text_decoration: var(--sapLink_TextDecoration);--_ui5-v2-4-0_link_hover_text_decoration: var(--sapLink_Hover_TextDecoration);--_ui5-v2-4-0_link_focused_hover_text_decoration: none;--_ui5-v2-4-0_link_focused_hover_text_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_active_text_decoration: var(--sapLink_Active_TextDecoration);--_ui5-v2-4-0_link_outline: none;--_ui5-v2-4-0_link_focus_border-radius: .125rem;--_ui5-v2-4-0_link_focus_background_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_link_focus_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_subtle_text_decoration: underline;--_ui5-v2-4-0_link_subtle_text_decoration_hover: none;--ui5-v2-4-0_list_footer_text_color: var(--sapList_FooterTextColor);--ui5-v2-4-0-listitem-background-color: var(--sapList_Background);--ui5-v2-4-0-listitem-border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--ui5-v2-4-0-listitem-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--ui5-v2-4-0-listitem-focused-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_listitembase_focus_width: 1px;--_ui5-v2-4-0-listitembase_disabled_opacity: .5;--_ui5-v2-4-0_product_switch_item_border: none;--ui5-v2-4-0-listitem-active-border-color: var(--sapContent_FocusColor);--_ui5-v2-4-0_menu_item_padding: 0 1rem 0 .75rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: 1rem;--_ui5-v2-4-0_menu_item_additional_text_start_margin: 1rem;--_ui5-v2-4-0_menu_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_monthpicker_item_margin: .0625rem;--_ui5-v2-4-0_monthpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_monthpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_border_radius: .5rem;--_ui5-v2-4-0_message_strip_icon_width: 2.5rem;--_ui5-v2-4-0_message_strip_button_border_width: 0;--_ui5-v2-4-0_message_strip_button_border_style: none;--_ui5-v2-4-0_message_strip_button_border_color: transparent;--_ui5-v2-4-0_message_strip_button_border_radius: 0;--_ui5-v2-4-0_message_strip_padding: .4375rem 2.5rem .4375rem 2.5rem;--_ui5-v2-4-0_message_strip_padding_block_no_icon: .4375rem .4375rem;--_ui5-v2-4-0_message_strip_padding_inline_no_icon: 1rem 2.5rem;--_ui5-v2-4-0_message_strip_button_height: 1.625rem;--_ui5-v2-4-0_message_strip_border_width: 1px;--_ui5-v2-4-0_message_strip_close_button_border: none;--_ui5-v2-4-0_message_strip_icon_top: .4375rem;--_ui5-v2-4-0_message_strip_focus_width: 1px;--_ui5-v2-4-0_message_strip_focus_offset: -2px;--_ui5-v2-4-0_message_strip_close_button_top: .125rem;--_ui5-v2-4-0_message_strip_close_button_color_set_1_background: #eaecee4d;--_ui5-v2-4-0_message_strip_close_button_color_set_2_background: #eaecee80;--_ui5-v2-4-0_message_strip_close_button_color_set_1_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_close_button_color_set_1_hover_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_scheme_1_set_2_background: var(--sapIndicationColor_1b);--_ui5-v2-4-0_message_strip_scheme_1_set_2_border_color: var(--sapIndicationColor_1b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_2_set_2_background: var(--sapIndicationColor_2b);--_ui5-v2-4-0_message_strip_scheme_2_set_2_border_color: var(--sapIndicationColor_2b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_3_set_2_background: var(--sapIndicationColor_3b);--_ui5-v2-4-0_message_strip_scheme_3_set_2_border_color: var(--sapIndicationColor_3b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_4_set_2_background: var(--sapIndicationColor_4b);--_ui5-v2-4-0_message_strip_scheme_4_set_2_border_color: var(--sapIndicationColor_4b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_5_set_2_background: var(--sapIndicationColor_5b);--_ui5-v2-4-0_message_strip_scheme_5_set_2_border_color: var(--sapIndicationColor_5b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_6_set_2_background: var(--sapIndicationColor_6b);--_ui5-v2-4-0_message_strip_scheme_6_set_2_border_color: var(--sapIndicationColor_6b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_7_set_2_background: var(--sapIndicationColor_7b);--_ui5-v2-4-0_message_strip_scheme_7_set_2_border_color: var(--sapIndicationColor_7b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_8_set_2_background: var(--sapIndicationColor_8b);--_ui5-v2-4-0_message_strip_scheme_8_set_2_border_color: var(--sapIndicationColor_8b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_9_set_2_background: var(--sapIndicationColor_9b);--_ui5-v2-4-0_message_strip_scheme_9_set_2_border_color: var(--sapIndicationColor_9b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_10_set_2_background: var(--sapIndicationColor_10b);--_ui5-v2-4-0_message_strip_scheme_10_set_2_border_color: var(--sapIndicationColor_10b_BorderColor);--_ui5-v2-4-0_message_strip_close_button_right: .1875rem;--_ui5-v2-4-0_panel_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_panel_header_height: 2.75rem;--_ui5-v2-4-0_panel_button_root_width: 2.75rem;--_ui5-v2-4-0_panel_button_root_height: 2.75rem;--_ui5-v2-4-0_panel_header_padding_right: .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .25rem;--_ui5-v2-4-0_panel_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_panel_border_bottom: none;--_ui5-v2-4-0_panel_default_header_border: .0625rem solid var(--sapGroup_TitleBorderColor);--_ui5-v2-4-0_panel_outline_offset: -.125rem;--_ui5-v2-4-0_panel_border_radius_expanded: var(--sapElement_BorderCornerRadius) var(--sapElement_BorderCornerRadius) 0 0;--_ui5-v2-4-0_panel_icon_color: var(--sapButton_Lite_TextColor);--_ui5-v2-4-0_panel_focus_offset: 0px;--_ui5-v2-4-0_panel_focus_bottom_offset: -1px;--_ui5-v2-4-0_panel_content_padding: .625rem 1rem;--_ui5-v2-4-0_panel_header_background_color: var(--sapGroup_TitleBackground);--_ui5-v2-4-0_popover_background: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_popover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_popover_no_arrow_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_popup_content_padding_s: 1rem;--_ui5-v2-4-0_popup_content_padding_m_l: 2rem;--_ui5-v2-4-0_popup_content_padding_xl: 3rem;--_ui5-v2-4-0_popup_header_footer_padding_s: 1rem;--_ui5-v2-4-0_popup_header_footer_padding_m_l: 2rem;--_ui5-v2-4-0_popup_header_footer_padding_xl: 3rem;--_ui5-v2-4-0_popup_viewport_margin: 10px;--_ui5-v2-4-0_popup_header_font_weight: 400;--_ui5-v2-4-0_popup_header_prop_header_text_alignment: flex-start;--_ui5-v2-4-0_popup_header_background: var(--sapPageHeader_Background);--_ui5-v2-4-0_popup_header_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_popup_header_border: none;--_ui5-v2-4-0_popup_border_radius: .5rem;--_ui5-v2-4-0_popup_block_layer_background: var(--sapBlockLayer_Background);--_ui5-v2-4-0_popup_block_layer_opacity: .2;--_ui5-v2-4-0_progress_indicator_bar_border_max: none;--_ui5-v2-4-0_progress_indicator_icon_visibility: inline-block;--_ui5-v2-4-0_progress_indicator_side_points_visibility: block;--_ui5-v2-4-0_progress_indicator_padding: 1.25rem 0 .75rem 0;--_ui5-v2-4-0_progress_indicator_padding_novalue: .3125rem;--_ui5-v2-4-0_progress_indicator_padding_end: 1.25rem;--_ui5-v2-4-0_progress_indicator_host_height: unset;--_ui5-v2-4-0_progress_indicator_host_min_height: unset;--_ui5-v2-4-0_progress_indicator_host_box_sizing: border-box;--_ui5-v2-4-0_progress_indicator_root_position: relative;--_ui5-v2-4-0_progress_indicator_root_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_root_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_min_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_overflow: visible;--_ui5-v2-4-0_progress_indicator_bar_height: .625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_position: absolute;--_ui5-v2-4-0_progress_indicator_remaining_bar_width: 100%;--_ui5-v2-4-0_progress_indicator_remaining_bar_overflow: visible;--_ui5-v2-4-0_progress_indicator_icon_position: absolute;--_ui5-v2-4-0_progress_indicator_icon_right_position: -1.25rem;--_ui5-v2-4-0_progress_indicator_value_margin: 0 0 .1875rem 0;--_ui5-v2-4-0_progress_indicator_value_position: absolute;--_ui5-v2-4-0_progress_indicator_value_top_position: -1.3125rem;--_ui5-v2-4-0_progress_indicator_value_left_position: 0;--_ui5-v2-4-0_progress_indicator_background_none: var(--sapProgress_Background);--_ui5-v2-4-0_progress_indicator_background_error: var(--sapProgress_NegativeBackground);--_ui5-v2-4-0_progress_indicator_background_warning: var(--sapProgress_CriticalBackground);--_ui5-v2-4-0_progress_indicator_background_success: var(--sapProgress_PositiveBackground);--_ui5-v2-4-0_progress_indicator_background_information: var(--sapProgress_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_none: var(--sapProgress_Value_Background);--_ui5-v2-4-0_progress_indicator_value_state_error: var(--sapProgress_Value_NegativeBackground);--_ui5-v2-4-0_progress_indicator_value_state_warning: var(--sapProgress_Value_CriticalBackground);--_ui5-v2-4-0_progress_indicator_value_state_success: var(--sapProgress_Value_PositiveBackground);--_ui5-v2-4-0_progress_indicator_value_state_information: var(--sapProgress_Value_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_error_icon_color: var(--sapProgress_Value_NegativeTextColor);--_ui5-v2-4-0_progress_indicator_value_state_warning_icon_color: var(--sapProgress_Value_CriticalTextColor);--_ui5-v2-4-0_progress_indicator_value_state_success_icon_color: var(--sapProgress_Value_PositiveTextColor);--_ui5-v2-4-0_progress_indicator_value_state_information_icon_color: var(--sapProgress_Value_InformationTextColor);--_ui5-v2-4-0_progress_indicator_border: none;--_ui5-v2-4-0_progress_indicator_border_color_error: var(--sapErrorBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_warning: var(--sapWarningBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_success: var(--sapSuccessBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_information: var(--sapInformationBorderColor);--_ui5-v2-4-0_progress_indicator_color: var(--sapField_TextColor);--_ui5-v2-4-0_progress_indicator_bar_color: var(--sapProgress_TextColor);--_ui5-v2-4-0_progress_indicator_icon_size: var(--sapFontLargeSize);--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_rating_indicator_border_radius: .25rem;--_ui5-v2-4-0_rating_indicator_outline_offset: .125rem;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_spacing: .1875rem .1875rem;--_ui5-v2-4-0_segmented_btn_inner_border: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_border_odd_child: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_pressed_border_odd_child: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_segmented_btn_inner_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_segmented_btn_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_segmented_btn_border_color: var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_segmented_btn_hover_box_shadow: none;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_button_base_min_compact_width: 2rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Height);--_ui5-v2-4-0_button_compact_height: 1.625rem;--_ui5-v2-4-0_button_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_button_compact_padding: .4375rem;--_ui5-v2-4-0_button_emphasized_outline: 1px dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focus_offset: 1px;--_ui5-v2-4-0_button_focus_width: 1px;--_ui5-v2-4-0_button_emphasized_focused_border_before: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_emphasized_focused_active_border_color: transparent;--_ui5-v2-4-0_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focused_border_radius: .375rem;--_ui5-v2-4-0_button_focused_inner_border_radius: .375rem;--_ui5-v2-4-0_button_base_min_width: 2.25rem;--_ui5-v2-4-0_button_base_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_only_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_margin: .375rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_button_text_shadow: none;--_ui5-v2-4-0_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_button_pressed_focused_border_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_button_fontFamily: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_button_emphasized_focused_border_color: var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_radio_button_min_width: 2.75rem;--_ui5-v2-4-0_radio_button_hover_fill_error: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_warning: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_success: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_information: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_checked_fill: var(--sapSelectedColor);--_ui5-v2-4-0_radio_button_checked_error_fill: var(--sapField_InvalidColor);--_ui5-v2-4-0_radio_button_checked_success_fill: var(--sapField_SuccessColor);--_ui5-v2-4-0_radio_button_checked_information_fill: var(--sapField_InformationColor);--_ui5-v2-4-0_radio_button_warning_error_border_dash: 0;--_ui5-v2-4-0_radio_button_outer_ring_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_width: var(--sapField_BorderWidth);--_ui5-v2-4-0_radio_button_outer_ring_bg: var(--sapField_Background);--_ui5-v2-4-0_radio_button_outer_ring_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_active_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .6875rem;--_ui5-v2-4-0_radio_button_border: none;--_ui5-v2-4-0_radio_button_focus_outline: block;--_ui5-v2-4-0_radio_button_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_label_offset: 1px;--_ui5-v2-4-0_radio_button_items_align: unset;--_ui5-v2-4-0_radio_button_information_border_width: var(--sapField_InformationBorderWidth);--_ui5-v2-4-0_radio_button_border_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_radio_button_border_radius: .5rem;--_ui5-v2-4-0_radio_button_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_inner_ring_radius: 27.5%;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .6875rem;--_ui5-v2-4-0_radio_button_read_only_border_type: 4,2;--_ui5-v2-4-0_radio_button_inner_ring_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_radio_button_checked_warning_fill: var(--sapField_WarningColor);--_ui5-v2-4-0_radio_button_read_only_inner_ring_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_read_only_border_width: var(--sapElement_BorderWidth);--_ui5-v2-4-0_radio_button_hover_fill: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_radio_button_focus_dist: .375rem;--_ui5-v2-4-0_switch_height: 2.75rem;--_ui5-v2-4-0_switch_foucs_border_size: 1px;--_ui5-v2-4-0-switch-root-border-radius: 0;--_ui5-v2-4-0-switch-root-box-shadow: none;--_ui5-v2-4-0-switch-focus: "";--_ui5-v2-4-0_switch_track_border_radius: .75rem;--_ui5-v2-4-0-switch-track-border: 1px solid;--_ui5-v2-4-0_switch_track_transition: none;--_ui5-v2-4-0_switch_handle_border_radius: 1rem;--_ui5-v2-4-0-switch-handle-icon-display: none;--_ui5-v2-4-0-switch-slider-texts-display: inline;--_ui5-v2-4-0_switch_width: 3.5rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.875rem;--_ui5-v2-4-0_switch_focus_outline: none;--_ui5-v2-4-0_switch_root_after_outline: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_switch_root_after_boreder: none;--_ui5-v2-4-0_switch_root_after_boreder_radius: 1rem;--_ui5-v2-4-0_switch_root_outline_top: .5rem;--_ui5-v2-4-0_switch_root_outline_bottom: .5rem;--_ui5-v2-4-0_switch_root_outline_left: .375rem;--_ui5-v2-4-0_switch_root_outline_right: .375rem;--_ui5-v2-4-0_switch_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.625rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(-100%) translateX(1.625rem);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(-100%) translateX(1.875rem);--_ui5-v2-4-0_switch_track_width: 2.5rem;--_ui5-v2-4-0_switch_track_height: 1.5rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.875rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.5rem;--_ui5-v2-4-0_switch_track_active_background_color: var(--sapButton_Track_Selected_Background);--_ui5-v2-4-0_switch_track_inactive_background_color: var(--sapButton_Track_Background);--_ui5-v2-4-0_switch_track_hover_active_background_color: var(--sapButton_Track_Selected_Hover_Background);--_ui5-v2-4-0_switch_track_hover_inactive_background_color: var(--sapButton_Track_Hover_Background);--_ui5-v2-4-0_switch_track_active_border_color: var(--sapButton_Track_Selected_BorderColor);--_ui5-v2-4-0_switch_track_inactive_border_color: var(--sapButton_Track_BorderColor);--_ui5-v2-4-0_switch_track_hover_active_border_color: var(--sapButton_Track_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_track_hover_inactive_border_color: var(--sapButton_Track_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_accept_background_color: var(--sapButton_Track_Positive_Background);--_ui5-v2-4-0_switch_track_semantic_reject_background_color: var(--sapButton_Track_Negative_Background);--_ui5-v2-4-0_switch_track_semantic_hover_accept_background_color: var(--sapButton_Track_Positive_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_hover_reject_background_color: var(--sapButton_Track_Negative_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_accept_border_color: var(--sapButton_Track_Positive_BorderColor);--_ui5-v2-4-0_switch_track_semantic_reject_border_color: var(--sapButton_Track_Negative_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_accept_border_color: var(--sapButton_Track_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_reject_border_color: var(--sapButton_Track_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_track_icon_display: inline-block;--_ui5-v2-4-0_switch_handle_width: 1.5rem;--_ui5-v2-4-0_switch_handle_height: 1.25rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_border: var(--_ui5-v2-4-0_switch_handle_border_width) solid var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_border_width: .125rem;--_ui5-v2-4-0_switch_handle_active_background_color: var(--sapButton_Handle_Selected_Background);--_ui5-v2-4-0_switch_handle_inactive_background_color: var(--sapButton_Handle_Background);--_ui5-v2-4-0_switch_handle_hover_active_background_color: var(--sapButton_Handle_Selected_Hover_Background);--_ui5-v2-4-0_switch_handle_hover_inactive_background_color: var(--sapButton_Handle_Hover_Background);--_ui5-v2-4-0_switch_handle_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_hover_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_hover_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_accept_background_color: var(--sapButton_Handle_Positive_Background);--_ui5-v2-4-0_switch_handle_semantic_reject_background_color: var(--sapButton_Handle_Negative_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_background_color: var(--sapButton_Handle_Positive_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_background_color: var(--sapButton_Handle_Negative_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_left: .0625rem;--_ui5-v2-4-0_switch_text_font_family: var(--sapContent_IconFontFamily);--_ui5-v2-4-0_switch_text_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_switch_text_width: 1.25rem;--_ui5-v2-4-0_switch_text_with_label_font_family: "72-Condensed-Bold" , "72" , "72full" , Arial, Helvetica, sans-serif;--_ui5-v2-4-0_switch_text_with_label_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_switch_text_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_text_inactive_left: .1875rem;--_ui5-v2-4-0_switch_text_inactive_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_inactive_right: auto;--_ui5-v2-4-0_switch_text_inactive_right_alternate: 0;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_switch_text_active_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_active_right: auto;--_ui5-v2-4-0_switch_text_active_color: var(--sapButton_Handle_Selected_TextColor);--_ui5-v2-4-0_switch_text_inactive_color: var(--sapButton_Handle_TextColor);--_ui5-v2-4-0_switch_text_semantic_accept_color: var(--sapButton_Handle_Positive_TextColor);--_ui5-v2-4-0_switch_text_semantic_reject_color: var(--sapButton_Handle_Negative_TextColor);--_ui5-v2-4-0_switch_text_overflow: hidden;--_ui5-v2-4-0_switch_text_z_index: 1;--_ui5-v2-4-0_switch_text_hidden: hidden;--_ui5-v2-4-0_switch_text_min_width: none;--_ui5-v2-4-0_switch_icon_width: 1rem;--_ui5-v2-4-0_switch_icon_height: 1rem;--_ui5-v2-4-0_select_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_select_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_select_state_error_warning_border_style: solid;--_ui5-v2-4-0_select_state_error_warning_border_width: .125rem;--_ui5-v2-4-0_select_focus_width: 1px;--_ui5-v2-4-0_select_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_select_hover_icon_left_border: none;--_ui5-v2-4-0_select_option_focus_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_split_button_host_transparent_hover_background: transparent;--_ui5-v2-4-0_split_button_transparent_disabled_background: transparent;--_ui5-v2-4-0_split_button_host_default_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_host_attention_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_button_host_emphasized_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_button_host_positive_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_button_host_negative_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_button_host_transparent_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_split_text_button_border_color: transparent;--_ui5-v2-4-0_split_text_button_background_color: transparent;--_ui5-v2-4-0_split_text_button_emphasized_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_split_text_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_arrow_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_arrow_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_arrow_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_split_button_focused_border_radius: .375rem;--_ui5-v2-4-0_split_button_hover_border_radius: var(--_ui5-v2-4-0_button_border_radius);--_ui5-v2-4-0_split_button_middle_separator_width: 0;--_ui5-v2-4-0_split_button_middle_separator_left: -.0625rem;--_ui5-v2-4-0_split_button_middle_separator_hover_display: none;--_ui5-v2-4-0_split_button_text_button_width: 2.375rem;--_ui5-v2-4-0_split_button_text_button_right_border_width: .0625rem;--_ui5-v2-4-0_split_button_transparent_hover_background: var(--sapButton_Lite_Hover_Background);--_ui5-v2-4-0_split_button_transparent_hover_color: var(--sapButton_TextColor);--_ui5-v2-4-0_split_button_host_transparent_hover_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_inner_focused_border_radius_outer: .375rem;--_ui5-v2-4-0_split_button_inner_focused_border_radius_inner: .375rem;--_ui5-v2-4-0_split_button_emphasized_separator_color: transparent;--_ui5-v2-4-0_split_button_positive_separator_color: transparent;--_ui5-v2-4-0_split_button_negative_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color_default: var(--sapButton_Attention_TextColor);--_ui5-v2-4-0_split_text_button_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_right: none;--_ui5-v2-4-0_split_text_button_positive_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_middle_separator_hover_display_emphasized: none;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_header_height_text_only: var(--_ui5-v2-4-0_tc_item_text_only_height);--_ui5-v2-4-0_tc_header_height_text_with_additional_text: var(--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height);--_ui5-v2-4-0_tc_header_box_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_tc_header_background: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_header_background_translucent: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_content_background: var(--sapBackgroundColor);--_ui5-v2-4-0_tc_content_background_translucent: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_headeritem_padding: 1rem;--_ui5-v2-4-0_tc_headerItem_additional_text_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_tc_headerItem_text_selected_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_text_selected_hover_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_additional_text_font_weight: normal;--_ui5-v2-4-0_tc_headerItem_neutral_color: var(--sapNeutralTextColor);--_ui5-v2-4-0_tc_headerItem_positive_color: var(--sapPositiveTextColor);--_ui5-v2-4-0_tc_headerItem_negative_color: var(--sapNegativeTextColor);--_ui5-v2-4-0_tc_headerItem_critical_color: var(--sapCriticalTextColor);--_ui5-v2-4-0_tc_headerItem_neutral_border_color: var(--sapNeutralElementColor);--_ui5-v2-4-0_tc_headerItem_positive_border_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_tc_headerItem_negative_border_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_tc_headerItem_critical_border_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_tc_headerItem_neutral_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_neutral_color);--_ui5-v2-4-0_tc_headerItem_positive_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_positive_color);--_ui5-v2-4-0_tc_headerItem_negative_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_negative_color);--_ui5-v2-4-0_tc_headerItem_critical_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_critical_color);--_ui5-v2-4-0_tc_headerItem_transition: none;--_ui5-v2-4-0_tc_headerItem_hover_border_visibility: hidden;--_ui5-v2-4-0_tc_headerItemContent_border_radius: .125rem .125rem 0 0;--_ui5-v2-4-0_tc_headerItemContent_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_neutral_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_positive_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_negative_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_critical_border_bg: transparent;--_ui5-v2-4-0_tc_headerItemContent_border_height: 0;--_ui5-v2-4-0_tc_headerItemContent_focus_offset: 1rem;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_left: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_right: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_top: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_bottom: 0px;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_left: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_right: .625rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_top: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_bottom: .75rem;--_ui5-v2-4-0_tc_headerItemContent_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_default_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_focus_border_radius: 0;--_ui5-v2-4-0_tc_headerItemSemanticIcon_display: none;--_ui5-v2-4-0_tc_headerItemSemanticIcon_size: .75rem;--_ui5-v2-4-0_tc_mixedMode_itemText_font_family: var(--sapFontFamily);--_ui5-v2-4-0_tc_mixedMode_itemText_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_tc_mixedMode_itemText_font_weight: normal;--_ui5-v2-4-0_tc_overflowItem_positive_color: var(--sapPositiveColor);--_ui5-v2-4-0_tc_overflowItem_negative_color: var(--sapNegativeColor);--_ui5-v2-4-0_tc_overflowItem_critical_color: var(--sapCriticalColor);--_ui5-v2-4-0_tc_overflowItem_focus_offset: .125rem;--_ui5-v2-4-0_tc_overflowItem_extraIndent: 0rem;--_ui5-v2-4-0_tc_headerItemIcon_positive_selected_background: var(--sapPositiveColor);--_ui5-v2-4-0_tc_headerItemIcon_negative_selected_background: var(--sapNegativeColor);--_ui5-v2-4-0_tc_headerItemIcon_critical_selected_background: var(--sapCriticalColor);--_ui5-v2-4-0_tc_headerItemIcon_neutral_selected_background: var(--sapNeutralColor);--_ui5-v2-4-0_tc_headerItemIcon_semantic_selected_color: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_header_border_bottom: .0625rem solid var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_headerItemContent_border_bottom: .1875rem solid var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_default_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_current_color: CurrentColor;--_ui5-v2-4-0_tc_content_border_bottom: .0625rem solid var(--sapObjectHeader_BorderColor);--_ui5-v2-4-0_tc_headerItem_expand_button_margin_inline_start: 0rem;--_ui5-v2-4-0_tc_headerItem_single_click_expand_button_margin_inline_start: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_border_radius: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_separator_display: inline-block;--_ui5-v2-4-0_tc_headerItem_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_tc_headerItem_focus_border_offset: -5px;--_ui5-v2-4-0_tc_headerItemIcon_focus_border_radius: 50%;--_ui5-v2-4-0_tc_headerItem_focus_border_radius: .375rem;--_ui5-v2-4-0_tc_headeritem_text_font_weight: bold;--_ui5-v2-4-0_tc_headerItem_focus_offset: 1px;--_ui5-v2-4-0_tc_headerItem_text_hover_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_border: .125rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_selected_background: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_background_color: var(--sapContent_Selected_Background);--_ui5-v2-4-0_tc_headerItemIcon_selected_color: var(--sapContent_ContrastIconColor);--_ui5-v2-4-0_tc_mixedMode_itemText_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflow_text_color: var(--sapTextColor);--_ui5-v2-4-0_text_max_lines: initial;--_ui5-v2-4-0_textarea_state_border_width: .125rem;--_ui5-v2-4-0_textarea_information_border_width: .125rem;--_ui5-v2-4-0_textarea_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0_textarea_error_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_textarea_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_disabled_opacity: .4;--_ui5-v2-4-0_textarea_focus_pseudo_element_content: "";--_ui5-v2-4-0_textarea_min_height: 2.25rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .5625rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .4375rem;--_ui5-v2-4-0_textarea_exceeded_text_height: 1rem;--_ui5-v2-4-0_textarea_hover_border: none;--_ui5-v2-4-0_textarea_focus_border_radius: .25rem;--_ui5-v2-4-0_textarea_error_warning_border_style: none;--_ui5-v2-4-0_textarea_line_height: 1.5;--_ui5-v2-4-0_textarea_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_textarea_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_textarea_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_textarea_focus_offset: 0;--_ui5-v2-4-0_textarea_readonly_focus_offset: 1px;--_ui5-v2-4-0_textarea_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_textarea_value_state_focus_offset: 1px;--_ui5-v2-4-0_textarea_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_success_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_warning_error_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_information_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .375rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .4375rem;--_ui5-v2-4-0_textarea_padding_top_information: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .4375rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .625rem;--_ui5-v2-4-0_textarea_readonly_border_style: dashed;--_ui5-v2-4-0_time_picker_border: .0625rem solid transparent;--_ui5-v2-4-0-time_picker_border_radius: .25rem;--_ui5-v2-4-0_toast_vertical_offset: 3rem;--_ui5-v2-4-0_toast_horizontal_offset: 2rem;--_ui5-v2-4-0_toast_background: var(--sapList_Background);--_ui5-v2-4-0_toast_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_toast_offset_width: -.1875rem;--_ui5-v2-4-0_toggle_button_pressed_focussed: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_pressed_focussed_hovered: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_selected_positive_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_negative_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_attention_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_emphasized_pressed_focussed_hovered: var(--sapContent_FocusColor);--_ui5-v2-4-0_toggle_button_emphasized_text_shadow: none;--_ui5-v2-4-0_yearpicker_item_margin: .0625rem;--_ui5-v2-4-0_yearpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_yearpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_width: 6.25rem;--_ui5-v2-4-0_calendar_header_middle_button_flex: 1 1 auto;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_display: block;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_top_offset: .125rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_left_offset: .125rem;--_ui5-v2-4-0_calendar_header_arrow_button_border: none;--_ui5-v2-4-0_calendar_header_arrow_button_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_button_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_calendar_header_arrow_button_box_shadow: 0 0 .125rem 0 rgb(85 107 130 / 72%);--_ui5-v2-4-0_calendar_header_middle_button_focus_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_background: transparent;--_ui5-v2-4-0_calendar_header_middle_button_focus_outline: .125rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_background: transparent;--_ui5-v2-4-0_token_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_token_right_margin: .3125rem;--_ui5-v2-4-0_token_padding: .25rem 0;--_ui5-v2-4-0_token_left_padding: .3125rem;--_ui5-v2-4-0_token_focused_selected_border: 1px solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_focus_offset: -.25rem;--_ui5-v2-4-0_token_focus_outline_width: .0625rem;--_ui5-v2-4-0_token_hover_border_color: var(--sapButton_TokenBorderColor);--_ui5-v2-4-0_token_selected_focus_outline: none;--_ui5-v2-4-0_token_focus_outline: none;--_ui5-v2-4-0_token_outline_offset: .125rem;--_ui5-v2-4-0_token_selected_hover_border_color: var(--sapButton_Selected_BorderColor);--ui5-v2-4-0_token_focus_pseudo_element_content: "";--_ui5-v2-4-0_token_border_radius: .375rem;--_ui5-v2-4-0_token_focus_outline_border_radius: .5rem;--_ui5-v2-4-0_token_text_color: var(--sapTextColor);--_ui5-v2-4-0_token_selected_text_font_family: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_token_selected_internal_border_bottom: .125rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_selected_internal_border_bottom_radius: .1875rem;--_ui5-v2-4-0_token_text_icon_top: .0625rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.375rem;--_ui5-v2-4-0_token_readonly_padding: .25rem .3125rem;--_ui5-v2-4-0_tokenizer-popover_offset: .3125rem;--_ui5-v2-4-0_tokenizer_n_more_text_color: var(--sapLinkColor);--_ui5-v2-4-0-multi_combobox_token_margin_top: 1px;--_ui5-v2-4-0_slider_progress_container_dot_background: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_progress_border: none;--_ui5-v2-4-0_slider_padding: 1.406rem 1.0625rem;--_ui5-v2-4-0_slider_inner_height: .25rem;--_ui5-v2-4-0_slider_outer_height: 1.6875rem;--_ui5-v2-4-0_slider_progress_border_radius: .25rem;--_ui5-v2-4-0_slider_tickmark_bg: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_handle_margin_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2));--_ui5-v2-4-0_slider_handle_outline_offset: .075rem;--_ui5-v2-4-0_slider_progress_outline: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_progress_outline_offset: -.8125rem;--_ui5-v2-4-0_slider_disabled_opacity: .4;--_ui5-v2-4-0_slider_tooltip_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_range_slider_handle_background_focus: transparent;--_ui5-v2-4-0_slider_progress_box_sizing: content-box;--_ui5-v2-4-0_range_slider_focus_outline_width: 100%;--_ui5-v2-4-0_slider_progress_outline_offset_left: 0;--_ui5-v2-4-0_range_slider_focus_outline_radius: 0;--_ui5-v2-4-0_slider_progress_container_top: 0;--_ui5-v2-4-0_slider_progress_height: 100%;--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_active_progress_left: 0;--_ui5-v2-4-0_slider_active_progress_top: 0;--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top: var(--_ui5-v2-4-0_slider_progress_container_top);--_ui5-v2-4-0_slider_no_tickmarks_progress_height: var(--_ui5-v2-4-0_slider_progress_height);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border: var(--_ui5-v2-4-0_slider_active_progress_border);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left: var(--_ui5-v2-4-0_slider_active_progress_left);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top: var(--_ui5-v2-4-0_slider_active_progress_top);--_ui5-v2-4-0_slider_handle_focus_visibility: none;--_ui5-v2-4-0_slider_handle_icon_size: 1rem;--_ui5-v2-4-0_slider_progress_container_background: var(--sapSlider_Background);--_ui5-v2-4-0_slider_progress_container_dot_display: block;--_ui5-v2-4-0_slider_inner_min_width: 4rem;--_ui5-v2-4-0_slider_progress_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_before_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_after_background: var(--sapContent_MeasureIndicatorColor);--_ui5-v2-4-0_slider_handle_background: var(--sapSlider_HandleBackground);--_ui5-v2-4-0_slider_handle_icon_display: inline-block;--_ui5-v2-4-0_slider_handle_border: .0625rem solid var(--sapSlider_HandleBorderColor);--_ui5-v2-4-0_slider_handle_border_radius: .5rem;--_ui5-v2-4-0_slider_handle_height: 1.5rem;--_ui5-v2-4-0_slider_handle_width: 2rem;--_ui5-v2-4-0_slider_handle_top: -.625rem;--_ui5-v2-4-0_slider_handle_font_family: "SAP-icons";--_ui5-v2-4-0_slider_handle_hover_border: .0625rem solid var(--sapSlider_Hover_HandleBorderColor);--_ui5-v2-4-0_slider_handle_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_handle_background_focus: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_slider_handle_outline: none;--_ui5-v2-4-0_slider_handle_hover_background: var(--sapSlider_Hover_HandleBackground);--_ui5-v2-4-0_slider_tooltip_background: var(--sapField_Focus_Background);--_ui5-v2-4-0_slider_tooltip_border: none;--_ui5-v2-4-0_slider_tooltip_border_radius: .5rem;--_ui5-v2-4-0_slider_tooltip_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_range_slider_legacy_progress_focus_display: none;--_ui5-v2-4-0_range_slider_progress_focus_display: block;--_ui5-v2-4-0_slider_tickmark_in_range_bg: var(--sapSlider_Selected_BorderColor);--_ui5-v2-4-0_slider_label_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_min_width: 2rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_tooltip_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_tooltip_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_slider_handle_focus_width: 1px;--_ui5-v2-4-0_slider_start_end_point_size: .5rem;--_ui5-v2-4-0_slider_start_end_point_left: -.75rem;--_ui5-v2-4-0_slider_start_end_point_top: -.125rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_slider_tooltip_border_box: border-box;--_ui5-v2-4-0_range_slider_handle_active_background: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_range_slider_active_handle_icon_display: none;--_ui5-v2-4-0_range_slider_progress_focus_top: -15px;--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_range_slider_progress_focus_padding: 0 1rem 0 1rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_root_hover_handle_icon_display: inline-block;--_ui5-v2-4-0_range_slider_root_hover_handle_bg: var(--_ui5-v2-4-0_slider_handle_hover_background);--_ui5-v2-4-0_range_slider_root_active_handle_icon_display: none;--_ui5-v2-4-0_slider_tickmark_height: .5rem;--_ui5-v2-4-0_slider_tickmark_top: -2px;--_ui5-v2-4-0_slider_handle_box_sizing: border-box;--_ui5-v2-4-0_range_slider_handle_background: var(--sapSlider_RangeHandleBackground);--_ui5-v2-4-0_slider_tooltip_bottom: 2rem;--_ui5-v2-4-0_value_state_message_border: none;--_ui5-v2-4-0_value_state_header_border: none;--_ui5-v2-4-0_input_value_state_icon_offset: .5rem;--_ui5-v2-4-0_value_state_header_box_shadow_error: inset 0 -.0625rem var(--sapField_InvalidColor);--_ui5-v2-4-0_value_state_header_box_shadow_information: inset 0 -.0625rem var(--sapField_InformationColor);--_ui5-v2-4-0_value_state_header_box_shadow_success: inset 0 -.0625rem var(--sapField_SuccessColor);--_ui5-v2-4-0_value_state_header_box_shadow_warning: inset 0 -.0625rem var(--sapField_WarningColor);--_ui5-v2-4-0_value_state_message_icon_offset_phone: 1rem;--_ui5-v2-4-0_value_state_header_border_bottom: none;--_ui5-v2-4-0_input_value_state_icon_display: inline-block;--_ui5-v2-4-0_value_state_message_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_header_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_message_popover_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_value_state_message_icon_width: 1rem;--_ui5-v2-4-0_value_state_message_icon_height: 1rem;--_ui5-v2-4-0_value_state_header_offset: -.25rem;--_ui5-v2-4-0_value_state_message_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_value_state_message_padding_phone: .5rem .5rem .5rem 2.375rem;--_ui5-v2-4-0_value_state_message_line_height: 1.125rem;--_ui5-v2-4-0-toolbar-padding-left: .5rem;--_ui5-v2-4-0-toolbar-padding-right: .5rem;--_ui5-v2-4-0-toolbar-item-margin-left: 0;--_ui5-v2-4-0-toolbar-item-margin-right: .25rem;--_ui5-v2-4-0_step_input_min_width: 7.25rem;--_ui5-v2-4-0_step_input_padding: 2.5rem;--_ui5-v2-4-0_step_input_input_error_background_color: inherit;--_ui5-v2-4-0-step_input_button_state_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_step_input_border_style: none;--_ui5-v2-4-0_step_input_border_style_hover: none;--_ui5-v2-4-0_step_input_button_background_color: transparent;--_ui5-v2-4-0_step_input_input_border: none;--_ui5-v2-4-0_step_input_input_margin_top: 0;--_ui5-v2-4-0_step_input_button_display: inline-flex;--_ui5-v2-4-0_step_input_button_left: 0;--_ui5-v2-4-0_step_input_button_right: 0;--_ui5-v2-4-0_step_input_input_border_focused_after: .125rem solid #0070f2;--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after: 0;--_ui5-v2-4-0_step_input_input_border_radius_focused_after: .25rem;--_ui5-v2-4-0_step_input_input_information_border_color_focused_after: var(--sapField_InformationColor);--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after: var(--sapField_WarningColor);--_ui5-v2-4-0_step_input_input_success_border_color_focused_after: var(--sapField_SuccessColor);--_ui5-v2-4-0_step_input_input_error_border_color_focused_after: var(--sapField_InvalidColor);--_ui5-v2-4-0_step_input_disabled_button_background: none;--_ui5-v2-4-0_step_input_border_color_hover: none;--_ui5-v2-4-0_step_input_border_hover: none;--_ui5-v2-4-0_input_input_background_color: transparent;--_ui5-v2-4-0_load_more_padding: 0;--_ui5-v2-4-0_load_more_border: 1px top solid transparent;--_ui5-v2-4-0_load_more_border_radius: none;--_ui5-v2-4-0_load_more_outline_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_load_more_border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--_ui5-v2-4-0_calendar_height: 24.5rem;--_ui5-v2-4-0_calendar_width: 20rem;--_ui5-v2-4-0_calendar_padding: 1rem;--_ui5-v2-4-0_calendar_left_right_padding: .5rem;--_ui5-v2-4-0_calendar_top_bottom_padding: 1rem;--_ui5-v2-4-0_calendar_header_height: 3rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2.5rem;--_ui5-v2-4-0_calendar_header_padding: .25rem 0;--_ui5-v2-4-0_checkbox_root_side_padding: .6875rem;--_ui5-v2-4-0_checkbox_icon_size: 1rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .75rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2.75rem;--_ui5-v2-4-0_day_picker_item_width: 2.25rem;--_ui5-v2-4-0_day_picker_item_height: 2.875rem;--_ui5-v2-4-0_day_picker_empty_height: 3rem;--_ui5-v2-4-0_day_picker_item_justify_content: space-between;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1.8125rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .4375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-offset: -.125rem;--_ui5-v2-4-0-calendar-legend-item-box-margin: .25rem;--_ui5-v2-4-0-calendar-legend-item-box-inner-margin: .5rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .3125rem .6875rem;--_ui5-v2-4-0_datetime_picker_width: 40.0625rem;--_ui5-v2-4-0_datetime_picker_height: 25rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 19.5rem;--_ui5-v2-4-0_datetime_timeview_padding: 1rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 24.5rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 0;--_ui5-v2-4-0_dialog_content_min_height: 2.75rem;--_ui5-v2-4-0_dialog_footer_height: 2.75rem;--_ui5-v2-4-0_input_inner_padding: 0 .625rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .25rem 0 .625rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .1875rem;--_ui5-v2-4-0_list_no_data_height: 3rem;--_ui5-v2-4-0_list_item_cb_margin_right: 0;--_ui5-v2-4-0_list_item_title_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_item_img_size: 3rem;--_ui5-v2-4-0_list_item_img_top_margin: .5rem;--_ui5-v2-4-0_list_item_img_bottom_margin: .5rem;--_ui5-v2-4-0_list_item_img_hn_margin: .75rem;--_ui5-v2-4-0_list_item_dropdown_base_height: 2.5rem;--_ui5-v2-4-0_list_item_base_height: var(--sapElement_LineHeight);--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1.125rem;--_ui5-v2-4-0_list_item_icon_padding-inline-end: .5rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_group_header_list_item_height: 2.75rem;--_ui5-v2-4-0_list_busy_row_height: 3rem;--_ui5-v2-4-0_month_picker_item_height: 3rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_form_item_min_height: 2.813rem;--_ui5-v2-4-0_form_item_padding: .65rem;--_ui5-v2-4-0-form-group-heading-height: 2.75rem;--_ui5-v2-4-0_popup_default_header_height: 2.75rem;--_ui5-v2-4-0_year_picker_item_height: 3rem;--_ui5-v2-4-0_tokenizer_padding: .25rem;--_ui5-v2-4-0_token_height: 1.625rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .25rem .5rem;--_ui5-v2-4-0_token_wrapper_right_padding: .3125rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_tl_bubble_padding: 1rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -1.625rem;--_ui5-v2-4-0_tl_padding: 1rem 1rem 1rem .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: 1.625rem;--_ui5-v2-4-0_switch_focus_width_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_switch_focus_height_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_tc_item_text: 3rem;--_ui5-v2-4-0_tc_item_height: 4.75rem;--_ui5-v2-4-0_tc_item_text_only_height: 2.75rem;--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height: 3.75rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_icon_circle_size: 2.75rem;--_ui5-v2-4-0_tc_item_icon_size: 1.25rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .375rem;--_ui5-v2-4-0_textarea_margin: .25rem 0;--_ui5-v2-4-0_radio_button_height: 2.75rem;--_ui5-v2-4-0_radio_button_label_side_padding: .875rem;--_ui5-v2-4-0_radio_button_inner_size: 2.75rem;--_ui5-v2-4-0_radio_button_svg_size: 1.375rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.75rem;--ui5-v2-4-0_side_navigation_item_height: 2.75rem;--_ui5-v2-4-0-tree-indent-step: 1.5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2.75rem;--_ui5-v2-4-0-tree-toggle-box-height: 2.25rem;--_ui5-v2-4-0-tree-toggle-icon-size: 1.0625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -1.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -1.625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1.875rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -1.9375rem;--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% + 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_before_height: 100%;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.9375rem;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% + .375rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: 100%;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 1.5rem) ;--_ui5-v2-4-0-toolbar-separator-height: 2rem;--_ui5-v2-4-0-toolbar-height: 2.75rem;--_ui5-v2-4-0_toolbar_overflow_padding: .25rem .5rem;--_ui5-v2-4-0_table_cell_padding: .25rem .5rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_split_button_middle_separator_top: .625rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-height: 1.75rem;--_ui5-v2-4-0_color-palette-item-hover-height: 2.25rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 12rem;--_ui5-v2-4-0_textarea_padding_top: .5rem;--_ui5-v2-4-0_textarea_padding_bottom: .4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .5rem}[dir=rtl]{--_ui5-v2-4-0_table_shadow_border_left: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_icon_transform_scale: scale(-1, 1);--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: -.5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem .125rem 0 0;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem .25rem 0 0;--_ui5-v2-4-0_popover_downward_arrow_margin: -.4375rem .125rem 0 0;--_ui5-v2-4-0_popover_left_arrow_margin: .1875rem -.375rem 0 0;--_ui5-v2-4-0_dialog_resize_cursor:sw-resize;--_ui5-v2-4-0_menu_submenu_margin_offset: 0 -.25rem;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: 0 .25rem;--_ui5-v2-4-0-menu_item_icon_float: left;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: auto;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem}[data-ui5-compact-size],.ui5-content-density-compact,.sapUiSizeCompact{--_ui5-v2-4-0_input_min_width: 2rem;--_ui5-v2-4-0_input_icon_width: 2rem;--_ui5-v2-4-0_input_information_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_custom_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .1875rem .25rem;--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_radio_button_min_width: 2rem;--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .5rem;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .5rem;--_ui5-v2-4-0_radio_button_focus_dist: .1875rem;--_ui5-v2-4-0_switch_height: 2rem;--_ui5-v2-4-0_switch_width: 3rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.75rem;--_ui5-v2-4-0_switch_root_outline_top: .25rem;--_ui5-v2-4-0_switch_root_outline_bottom: .25rem;--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.375rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(1.375rem) translateX(-100%);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(1.875rem) translateX(-100%);--_ui5-v2-4-0_switch_track_width: 2rem;--_ui5-v2-4-0_switch_track_height: 1.25rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.75rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_width: 1.25rem;--_ui5-v2-4-0_switch_handle_height: 1rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1rem;--_ui5-v2-4-0_switch_text_font_size: var(--sapFontSize);--_ui5-v2-4-0_switch_text_width: 1rem;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .4375rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .125rem;--_ui5-v2-4-0_textarea_exceeded_text_height: .375rem;--_ui5-v2-4-0_textarea_min_height: 1.625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .0625rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .125rem;--_ui5-v2-4-0_textarea_padding_top_information: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .125rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .5rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.25rem;--_ui5-v2-4-0_tokenizer-popover_offset: .1875rem;--_ui5-v2-4-0_slider_handle_icon_size: .875rem;--_ui5-v2-4-0_slider_padding: 1rem 1.0625rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_top: -.8125rem;--_ui5-v2-4-0_slider_tooltip_bottom: 1.75rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_bar_base_height: 2.5rem;--_ui5-v2-4-0_bar_subheader_height: 2.25rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_button_base_padding: .4375rem;--_ui5-v2-4-0_button_base_min_width: 2rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_calendar_height: 18rem;--_ui5-v2-4-0_calendar_width: 17.75rem;--_ui5-v2-4-0_calendar_left_right_padding: .25rem;--_ui5-v2-4-0_calendar_top_bottom_padding: .5rem;--_ui5-v2-4-0_calendar_header_height: 2rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2rem;--_ui5-v2-4-0_calendar_header_padding: 0;--_ui5-v2-4-0-calendar-legend-root-padding: .5rem;--_ui5-v2-4-0-calendar-legend-root-width: 16.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: -.125rem;--_ui5-v2-4-0_checkbox_root_side_padding: var(--_ui5-v2-4-0_checkbox_wrapped_focus_padding);--_ui5-v2-4-0_checkbox_width_height: var(--_ui5-v2-4-0_checkbox_compact_width_height);--_ui5-v2-4-0_checkbox_wrapper_padding: var(--_ui5-v2-4-0_checkbox_compact_wrapper_padding);--_ui5-v2-4-0_checkbox_inner_width_height: var(--_ui5-v2-4-0_checkbox_compact_inner_size);--_ui5-v2-4-0_checkbox_icon_size: .75rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .5rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_day_picker_item_width: 2rem;--_ui5-v2-4-0_day_picker_item_height: 2rem;--_ui5-v2-4-0_day_picker_empty_height: 2.125rem;--_ui5-v2-4-0_day_picker_item_justify_content: flex-end;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .5rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: .75rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .5rem;--_ui5-v2-4-0_daypicker_special_day_top: 1.625rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 1.25rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 1rem;--_ui5-v2-4-0_datetime_picker_height: 20.5rem;--_ui5-v2-4-0_datetime_picker_width: 35.5rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 18.5rem;--_ui5-v2-4-0_datetime_timeview_padding: .5rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 21.125rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 3.125rem;--_ui5-v2-4-0_dialog_content_min_height: 2.5rem;--_ui5-v2-4-0_dialog_footer_height: 2.5rem;--_ui5-v2-4-0_form_item_min_height: 2rem;--_ui5-v2-4-0_form_item_padding: .25rem;--_ui5-v2-4-0-form-group-heading-height: 2rem;--_ui5-v2-4-0_input_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_input_inner_padding: 0 .5rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .2rem 0 .5rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .125rem;--_ui5-v2-4-0_input_icon_min_width: var(--_ui5-v2-4-0_input_compact_min_width);--_ui5-v2-4-0_menu_item_padding: 0 .75rem 0 .5rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: .75rem;--_ui5-v2-4-0_popup_default_header_height: 2.5rem;--_ui5-v2-4-0_textarea_margin: .1875rem 0;--_ui5-v2-4-0_list_no_data_height: 2rem;--_ui5-v2-4-0_list_item_cb_margin_right: .5rem;--_ui5-v2-4-0_list_item_title_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_img_top_margin: .55rem;--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_dropdown_base_height: 2rem;--_ui5-v2-4-0_list_item_base_height: 2rem;--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_list_busy_row_height: 2rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_month_picker_item_height: 2rem;--_ui5-v2-4-0_year_picker_item_height: 2rem;--_ui5-v2-4-0_panel_header_height: 2rem;--_ui5-v2-4-0_panel_button_root_height: 2rem;--_ui5-v2-4-0_panel_button_root_width: 2.5rem;--_ui5-v2-4-0_token_height: 1.25rem;--_ui5-v2-4-0_token_right_margin: .25rem;--_ui5-v2-4-0_token_left_padding: .25rem;--_ui5-v2-4-0_token_readonly_padding: .125rem .25rem;--_ui5-v2-4-0_token_focus_offset: -.125rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .375rem .375rem;--_ui5-v2-4-0_token_wrapper_right_padding: .25rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_token_outline_offset: -.125rem;--_ui5-v2-4-0_tl_bubble_padding: .5rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -.5rem;--_ui5-v2-4-0_tl_padding: .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: .5rem;--_ui5-v2-4-0_tc_item_text: 2rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .3125rem;--_ui5-v2-4-0_tc_item_height: 4rem;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_item_icon_circle_size: 2rem;--_ui5-v2-4-0_tc_item_icon_size: 1rem;--_ui5-v2-4-0_radio_button_height: 2rem;--_ui5-v2-4-0_radio_button_label_side_padding: .5rem;--_ui5-v2-4-0_radio_button_inner_size: 2rem;--_ui5-v2-4-0_radio_button_svg_size: 1rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.5rem;--ui5-v2-4-0_side_navigation_item_height: 2rem;--_ui5-v2-4-0_slider_handle_height: 1.25rem;--_ui5-v2-4-0_slider_handle_width: 1.5rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_progress_outline_offset: -.625rem;--_ui5-v2-4-0_slider_outer_height: 1.3125rem;--_ui5-v2-4-0_step_input_min_width: 6rem;--_ui5-v2-4-0_step_input_padding: 2rem;--_ui5-v2-4-0-tree-indent-step: .5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2rem;--_ui5-v2-4-0-tree-toggle-box-height: 1.5rem;--_ui5-v2-4-0-tree-toggle-icon-size: .8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -.75rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -.8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_height: calc(100% - 1.25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% + .9375rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% - .75rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.8625rem;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: calc(100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% - .625rem) ;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 2.5rem) ;--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height: calc(100% + 1.5rem) ;--_ui5-v2-4-0_timeline_tlgi_horizontal_line_placeholder_before_width: var(--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height);--_ui5-v2-4-0_timeline_tlgi_horizontal_compact_root_margin_left: .5rem;--_ui5-v2-4-0_timeline_tlgi_compact_root_gap: .5rem;--_ui5-v2-4-0_timeline_tlgi_root_horizontal_height: 19.375rem;--_ui5-v2-4-0_vsd_header_container: 2.5rem;--_ui5-v2-4-0_vsd_sub_header_container_height: 2rem;--_ui5-v2-4-0_vsd_header_height: 4rem;--_ui5-v2-4-0_vsd_expand_content_height: 25.4375rem;--_ui5-v2-4-0-toolbar-separator-height: 1.5rem;--_ui5-v2-4-0-toolbar-height: 2rem;--_ui5-v2-4-0_toolbar_overflow_padding: .1875rem .375rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_textarea_padding_top: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom: .125rem;--_ui5-v2-4-0_checkbox_focus_position: .25rem;--_ui5-v2-4-0_split_button_middle_separator_top: .3125rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0_slider_handle_top: -.5rem;--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: .125rem;--_ui5-v2-4-0_color-palette-item-height: 1.25rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1rem;--_ui5-v2-4-0_color-palette-item-container-sides-padding: .1875rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .8125rem;--_ui5-v2-4-0_color-palette-item-hover-height: 1.625rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 8.75rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .1875rem .5rem;--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 7.5rem;--_ui5-v2-4-0_color-palette-button-height: 2rem;--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.25rem;--_ui5-v2-4-0_color_picker_slider_container_margin_top: -9px;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 1.5625rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 1.3125rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: .25rem;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: -.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .4375rem}:root,[dir=ltr]{--_ui5-v2-4-0_rotation_90deg: rotate(90deg);--_ui5-v2-4-0_rotation_minus_90deg: rotate(-90deg);--_ui5-v2-4-0_icon_transform_scale: none;--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: .5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem 0 0 .1875rem;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem 0 0 -.375rem;--_ui5-v2-4-0_popover_downward_arrow_margin: -.375rem 0 0 .125rem;--_ui5-v2-4-0_popover_left_arrow_margin: .125rem 0 0 .25rem;--_ui5-v2-4-0_dialog_resize_cursor: se-resize;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem 0 0 .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: 0 .5rem .5rem 0;--_ui5-v2-4-0_menu_submenu_margin_offset: -.25rem 0;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: .25rem 0;--_ui5-v2-4-0-menu_item_icon_float: right;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: -.125rem}\n'};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var i5=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let n5=class extends f0{constructor(){super(...arguments),this.design="Default",this.showTooltip=!1,this.mode="Image",this.pathData=[],this.invalid=!1}_onkeydown(e){this.mode===J2.Interactive&&(b0(e)&&this.fireDecoratorEvent("click"),A0(e)&&e.preventDefault())}_onkeyup(e){this.mode===J2.Interactive&&A0(e)&&this.fireDecoratorEvent("click")}get _dir(){return this.ltr?"ltr":void 0}get effectiveAriaHidden(){return this.mode===J2.Decorative?"true":void 0}get _tabIndex(){return this.mode===J2.Interactive?"0":void 0}get effectiveAccessibleRole(){switch(this.mode){case J2.Interactive:return"button";case J2.Decorative:return"presentation";default:return"img"}}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}async onBeforeRendering(){const e=this.name;if(!e)return console.warn("Icon name property is required",this);let t=wJ(e);if(t||(t=await xJ(e)),!t)return this.invalid=!0,console.warn(`Required icon is not registered. Invalid icon name: ${this.name}`);if("ICON_NOT_FOUND"===t)return this.invalid=!0,console.warn(`Required icon is not registered. You can either import the icon as a module in order to use it e.g. "@ui5/webcomponents-icons/dist/${e.replace("sap-icon://","")}.js", or setup a JSON build step and import "@ui5/webcomponents-icons/dist/AllIcons.js".`);if(this.viewBox=t.viewBox||"0 0 512 512",t.customTemplate&&(t.pathData=[],this.customSvg=WJ(t.customTemplate,this)),this.invalid=!1,this.pathData=Array.isArray(t.pathData)?t.pathData:[t.pathData],this.accData=t.accData,this.ltr=t.ltr,this.packageName=t.packageName,this.accessibleName)this.effectiveAccessibleName=this.accessibleName;else if(this.accData){const e=await fJ(this.packageName);this.effectiveAccessibleName=e.getText(this.accData)||void 0}else this.effectiveAccessibleName=void 0}get hasIconTooltip(){return this.showTooltip&&this.effectiveAccessibleName}};i5([_0()],n5.prototype,"design",void 0),i5([_0()],n5.prototype,"name",void 0),i5([_0()],n5.prototype,"accessibleName",void 0),i5([_0({type:Boolean})],n5.prototype,"showTooltip",void 0),i5([_0()],n5.prototype,"mode",void 0),i5([_0({type:Array})],n5.prototype,"pathData",void 0),i5([_0({type:Object,noAttribute:!0})],n5.prototype,"accData",void 0),i5([_0({type:Boolean})],n5.prototype,"invalid",void 0),i5([_0({noAttribute:!0})],n5.prototype,"effectiveAccessibleName",void 0),n5=i5([m0({tag:"ui5-icon",languageAware:!0,themeAware:!0,renderer:d1,template:function(e,t,i){return u1`<svg class="ui5-icon-root" part="root" tabindex="${c1(this._tabIndex)}" dir="${c1(this._dir)}" viewBox="${c1(this.viewBox)}" role="${c1(this.effectiveAccessibleRole)}" focusable="false" preserveAspectRatio="xMidYMid meet" aria-label="${c1(this.effectiveAccessibleName)}" aria-hidden=${c1(this.effectiveAriaHidden)} xmlns="http://www.w3.org/2000/svg" @keydown=${this._onkeydown} @keyup=${this._onkeyup}>${K2.call(this,e,t,i)}</svg>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Icon.css.ts",content:':host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([hidden]){display:none}:host([invalid]){display:none}:host(:not([hidden]).ui5_hovered){opacity:.7}:host{display:inline-block;width:1rem;height:1rem;color:var(--sapContent_IconColor);fill:currentColor;outline:none}:host([design="Contrast"]){color:var(--sapContent_ContrastIconColor)}:host([design="Critical"]){color:var(--sapCriticalElementColor)}:host([design="Information"]){color:var(--sapInformativeElementColor)}:host([design="Negative"]){color:var(--sapNegativeElementColor)}:host([design="Neutral"]){color:var(--sapNeutralElementColor)}:host([design="NonInteractive"]){color:var(--sapContent_NonInteractiveIconColor)}:host([design="Positive"]){color:var(--sapPositiveElementColor)}:host([mode="Interactive"][desktop]) .ui5-icon-root:focus,:host([mode="Interactive"]) .ui5-icon-root:focus-visible{outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--ui5-v2-4-0-icon-focus-border-radius)}.ui5-icon-root{display:flex;height:100%;width:100%;outline:none;vertical-align:top}:host([mode="Interactive"]){cursor:pointer}.ui5-icon-root:not([dir=ltr]){transform:var(--_ui5-v2-4-0_icon_transform_scale);transform-origin:center}\n'}}),v0("click",{bubbles:!0})],n5),n5.define();const r5=n5;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var o5,s5=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let a5=o5=class extends f0{get ariaDescription(){return o5.i18nBundle.getText(u2)}constructor(){super(),this.disabled=!1,this.selected=!1,this.iconOnly=!1,this.nonInteractive=!1,this.posInSet=0,this.sizeOfSet=0}_onclick(e){this.disabled&&(e.preventDefault(),e.stopPropagation()),this.selected=!this.selected}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}onBeforeRendering(){this.iconOnly=!j2(this.text)}_onkeyup(e){w0(e)&&e.preventDefault()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||this.forcedTabIndex}get ariaLabelText(){return z2(this)}get showIconTooltip(){return L2()&&this.iconOnly&&!this.tooltip}};s5([_0({type:Boolean})],a5.prototype,"disabled",void 0),s5([_0({type:Boolean})],a5.prototype,"selected",void 0),s5([_0()],a5.prototype,"tooltip",void 0),s5([_0()],a5.prototype,"accessibleName",void 0),s5([_0()],a5.prototype,"accessibleNameRef",void 0),s5([_0()],a5.prototype,"icon",void 0),s5([_0({type:Boolean})],a5.prototype,"iconOnly",void 0),s5([_0({type:Boolean})],a5.prototype,"nonInteractive",void 0),s5([_0({noAttribute:!0})],a5.prototype,"forcedTabIndex",void 0),s5([_0({type:Number})],a5.prototype,"posInSet",void 0),s5([_0({type:Number})],a5.prototype,"sizeOfSet",void 0),s5([y0({type:Node,default:!0})],a5.prototype,"text",void 0),s5([f1("@ui5/webcomponents")],a5,"i18nBundle",void 0),a5=o5=s5([m0({tag:"ui5-segmented-button-item",renderer:d1,template:function(e,t,i){return u1`<li role="option" aria-roledescription="${c1(this.ariaDescription)}" aria-posinset="${c1(this.posInSet)}" aria-setsize="${c1(this.sizeOfSet)}" aria-selected="${c1(this.selected)}" class="ui5-segmented-button-item-root" aria-disabled="${c1(this.disabled)}" data-sap-focus-ref @click=${this._onclick} @keyup=${this._onkeyup} tabindex=${c1(this.tabIndexValue)} aria-label="${c1(this.ariaLabelText)}" title="${c1(this.tooltip)}">${this.icon?q2.call(this,e,t,i):void 0}<span id="${c1(this._id)}-content" class="ui5-segmented-button-item-text"><bdi><slot></slot></bdi></span></li>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButtonItem.css.ts",content:':host{vertical-align:middle}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-segmented-button-item-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:.0625rem solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-segmented-button-item-icon{color:inherit;flex-shrink:0;padding-inline-end:.375rem}:host([icon-only]) .ui5-segmented-button-item-icon{padding-inline-end:0}:host([icon-only]) .ui5-segmented-button-item-root{min-width:auto;padding:0}:host([icon-only]) .ui5-segmented-button-item-text{display:none}.ui5-segmented-button-item-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not([icon-end])) .ui5-segmented-button-item-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-icon][icon-end]) .ui5-segmented-button-item-text{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only])) .ui5-segmented-button-item-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]){pointer-events:none}:host([desktop]:not([active])) .ui5-segmented-button-item-root:focus-within:after,:host(:not([active])) .ui5-segmented-button-item-root:focus-visible:after,:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}.ui5-segmented-button-item-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([active][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([active]) .ui5-segmented-button-item-root:focus-visible:after,:host([selected][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([selected]) .ui5-segmented-button-item-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([desktop]:not(:last-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:last-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([desktop]:not(:first-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:first-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n'},dependencies:[r5]})],a5),a5.define();const l5=a5;var c5;!function(e){e.Single="Single",e.Multiple="Multiple"}(c5||(c5={}));const u5=c5;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var h5,d5=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let p5=h5=class extends f0{constructor(){super(),this.selectionMode="Single",this._itemNavigation=new Z0(this,{getItemsCallback:()=>this.navigatableItems}),this.hasPreviouslyFocusedItem=!1}onBeforeRendering(){const e=this.getSlottedNodes("items");e.forEach(((e,t,i)=>{e.posInSet=t+1,e.sizeOfSet=i.length})),this.normalizeSelection(),this.style.setProperty(AK("--_ui5_segmented_btn_items_count"),`${e.length}`)}normalizeSelection(){if(this.items.length)switch(this.selectionMode){case u5.Single:{const e=this.selectedItems,t=this._selectedItem?e.indexOf(this._selectedItem):-1;this._selectedItem&&e.length>1&&e.splice(t,1);const i=e.pop()||this.items[0];this._applySingleSelection(i);break}}}_selectItem(e){const t=e.target,i=t.hasAttribute("ui5-segmented-button-item");if(!t.disabled&&t!==this.getDomRef()&&i)return this.selectionMode===u5.Multiple?e instanceof KeyboardEvent&&(t.selected=!t.selected):this._applySingleSelection(t),this.fireDecoratorEvent("selection-change",{selectedItems:this.selectedItems}),this._itemNavigation.setCurrentItem(t),this}_applySingleSelection(e){this.items.forEach((e=>{e.selected=!1})),e.selected=!0,this._selectedItem=e}_onclick(e){this._selectItem(e)}_onkeydown(e){b0(e)?this._selectItem(e):A0(e)&&e.preventDefault()}_onkeyup(e){A0(e)&&this._selectItem(e)}_onmousedown(e){const t=e.target;t.hasAttribute("ui5-segmented-button-item")&&(this._itemNavigation.setCurrentItem(t),this.hasPreviouslyFocusedItem=!0)}_onfocusin(e){this.hasPreviouslyFocusedItem?this._itemNavigation.setCurrentItem(e.target):this.selectedItems.length&&(this._itemNavigation.setCurrentItem(this.selectedItems[0]),this.selectedItems[0].focus(),this.hasPreviouslyFocusedItem=!0)}get selectedItems(){return this.items.filter((e=>e.selected))}get navigatableItems(){return this.getSlottedNodes("items").filter((e=>!e.disabled))}get ariaDescribedBy(){return h5.i18nBundle.getText(c2)}get ariaDescription(){return h5.i18nBundle.getText(l2)}};var f5;d5([_0()],p5.prototype,"accessibleName",void 0),d5([_0()],p5.prototype,"selectionMode",void 0),d5([y0({type:HTMLElement,invalidateOnChildChange:!0,default:!0})],p5.prototype,"items",void 0),d5([f1("@ui5/webcomponents")],p5,"i18nBundle",void 0),p5=h5=d5([m0({tag:"ui5-segmented-button",languageAware:!0,renderer:d1,template:function(e,t,i){return u1`<ul @click="${this._onclick}" @mousedown="${this._onmousedown}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" class="ui5-segmented-button-root" role="listbox" aria-multiselectable="true" aria-describedby="${c1(this._id)}-invisibleText" aria-roledescription=${c1(this.ariaDescription)} aria-label=${c1(this.accessibleName)}><slot></slot><span id="${c1(this._id)}-invisibleText" class="ui5-hidden-text">${c1(this.ariaDescribedBy)}</span></ul>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButton.css.ts",content:":host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block;min-width:calc(var(--_ui5-v2-4-0_segmented_btn_items_count) * var(--_ui5-v2-4-0_button_base_min_width))}.ui5-segmented-button-root{width:inherit;display:grid;grid-template-columns:repeat(var(--_ui5-v2-4-0_segmented_btn_items_count),minmax(var(--_ui5-v2-4-0_button_base_min_width),1fr));margin:0;padding:0;background-color:var(--sapButton_Background);border-radius:var(--sapButton_BorderCornerRadius);box-shadow:inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item]){border-radius:var(--_ui5-v2-4-0_segmented_btn_inner_border_radius);border-color:var(--_ui5-v2-4-0_segmented_btn_border_color);background-color:var(--_ui5-v2-4-0_segmented_btn_background_color);height:var(--_ui5-v2-4-0_button_base_height);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:initial}::slotted([ui5-segmented-button-item]:hover){z-index:2;box-shadow:var(--_ui5-v2-4-0_segmented_btn_hover_box_shadow);border-color:var(--sapButton_Hover_BorderColor);background-color:var(--sapButton_Hover_Background)}::slotted([ui5-segmented-button-item][selected]),::slotted([ui5-segmented-button-item][active]){border-color:var(--sapButton_Selected_BorderColor);background-color:var(--sapButton_Selected_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item][selected]:hover){border-color:var(--sapButton_Selected_Hover_BorderColor);background-color:var(--sapButton_Selected_Hover_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item]:last-child){border-start-end-radius:var(--sapButton_BorderCornerRadius);border-end-end-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:first-child){border-start-start-radius:var(--sapButton_BorderCornerRadius);border-end-start-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:not(:first-child)){border-left-width:var(--_ui5-v2-4-0_segmented_btn_item_border_left);border-right-width:var(--_ui5-v2-4-0_segmented_btn_item_border_right)}::slotted([ui5-segmented-button-item][active]:not([active]):hover){border-color:var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item][active]:hover){border-color:var(--sapButton_Selected_BorderColor)}\n"},dependencies:[l5]}),v0("selection-change",{detail:{selectedItems:{type:Array}},bubbles:!0})],p5),p5.define(),function(e){e.Default="Default",e.Positive="Positive",e.Negative="Negative",e.Transparent="Transparent",e.Emphasized="Emphasized",e.Attention="Attention"}(f5||(f5={}));const g5=f5;var m5;!function(e){e.Button="Button",e.Submit="Submit",e.Reset="Reset"}(m5||(m5={}));const _5=m5;function v5(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-button-icon" name="${c1(this.icon)}" mode="${c1(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-button-icon" name="${c1(this.icon)}" mode="${c1(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function y5(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-button-end-icon" name="${c1(this.endIcon)}" mode="${c1(this.endIconMode)}" part="endIcon"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-button-end-icon" name="${c1(this.endIcon)}" mode="${c1(this.endIconMode)}" part="endIcon"></ui5-icon>`}function b5(e,t,i){return u1`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${c1(this.buttonTypeText)}</span>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var A5,w5=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let x5=!1,S5=null,C5=A5=class extends f0{constructor(){super(),this.design="Default",this.disabled=!1,this.submits=!1,this.accessibilityAttributes={},this.type="Button",this.accessibleRole="Button",this.active=!1,this.iconOnly=!1,this.hasIcon=!1,this.hasEndIcon=!1,this.nonInteractive=!1,this._iconSettings={},this.forcedTabIndex="0",this._isTouch=!1,this._cancelAction=!1,this._deactivate=()=>{S5&&S5._setActiveState(!1)},x5||(document.addEventListener("mouseup",this._deactivate),x5=!0),this._ontouchstart={handleEvent:()=>{this.nonInteractive||this._setActiveState(!0)},passive:!0}}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}async onBeforeRendering(){this.hasIcon=!!this.icon,this.hasEndIcon=!!this.endIcon,this.iconOnly=this.isIconOnly,this.buttonTitle=this.tooltip||await this.getDefaultTooltip()}_onclick(){var e;this.nonInteractive||(this._isSubmit&&ZJ(this),this._isReset&&(()=>{var e,t;null==(t=null==(e=this._internals)?void 0:e.form)||t.reset()})(),EZ()&&(null==(e=this.getDomRef())||e.focus()))}_onmousedown(){this.nonInteractive||(this._setActiveState(!0),S5=this)}_ontouchend(e){this.disabled&&(e.preventDefault(),e.stopPropagation()),this.active&&this._setActiveState(!1),S5&&S5._setActiveState(!1)}_onkeydown(e){var t;this._cancelAction="Shift"===(t=e).key||16===t.keyCode||F0(e),A0(e)||b0(e)?this._setActiveState(!0):this._cancelAction&&this._setActiveState(!1)}_onkeyup(e){this._cancelAction&&e.preventDefault(),(A0(e)||b0(e))&&this.active&&this._setActiveState(!1)}_onfocusout(){this.nonInteractive||this.active&&this._setActiveState(!1)}_setActiveState(e){!this.fireDecoratorEvent("_active-state-change")||(this.active=e)}get _hasPopup(){return this.accessibilityAttributes.hasPopup}get hasButtonType(){return this.design!==g5.Default&&this.design!==g5.Transparent}get iconMode(){return this.icon?J2.Decorative:""}get endIconMode(){return this.endIcon?J2.Decorative:""}get isIconOnly(){return!j2(this.text)}static typeTextMappings(){return{Positive:S1,Negative:C1,Emphasized:E1}}getDefaultTooltip(){if(L2())return(async e=>{if(!e)return;let t=wJ(e);return t||(t=await xJ(e)),t&&t!==vJ&&t.accData?(await fJ(t.packageName)).getText(t.accData):void 0})(this.icon)}get buttonTypeText(){return A5.i18nBundle.getText(A5.typeTextMappings()[this.design])}get effectiveAccRole(){return this.accessibleRole.toLowerCase()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||(this.nonInteractive?"-1":this.forcedTabIndex)}get showIconTooltip(){return L2()&&this.iconOnly&&!this.tooltip}get ariaLabelText(){return z2(this)}get ariaDescribedbyText(){return this.hasButtonType?"ui5-button-hiddenText-type":void 0}get _isSubmit(){return this.type===_5.Submit||this.submits}get _isReset(){return this.type===_5.Reset}};w5([_0()],C5.prototype,"design",void 0),w5([_0({type:Boolean})],C5.prototype,"disabled",void 0),w5([_0()],C5.prototype,"icon",void 0),w5([_0()],C5.prototype,"endIcon",void 0),w5([_0({type:Boolean})],C5.prototype,"submits",void 0),w5([_0()],C5.prototype,"tooltip",void 0),w5([_0()],C5.prototype,"accessibleName",void 0),w5([_0()],C5.prototype,"accessibleNameRef",void 0),w5([_0({type:Object})],C5.prototype,"accessibilityAttributes",void 0),w5([_0()],C5.prototype,"type",void 0),w5([_0()],C5.prototype,"accessibleRole",void 0),w5([_0({type:Boolean})],C5.prototype,"active",void 0),w5([_0({type:Boolean})],C5.prototype,"iconOnly",void 0),w5([_0({type:Boolean})],C5.prototype,"hasIcon",void 0),w5([_0({type:Boolean})],C5.prototype,"hasEndIcon",void 0),w5([_0({type:Boolean})],C5.prototype,"nonInteractive",void 0),w5([_0({noAttribute:!0})],C5.prototype,"buttonTitle",void 0),w5([_0({type:Object})],C5.prototype,"_iconSettings",void 0),w5([_0({noAttribute:!0})],C5.prototype,"forcedTabIndex",void 0),w5([_0({type:Boolean})],C5.prototype,"_isTouch",void 0),w5([_0({type:Boolean,noAttribute:!0})],C5.prototype,"_cancelAction",void 0),w5([y0({type:Node,default:!0})],C5.prototype,"text",void 0),w5([f1("@ui5/webcomponents")],C5,"i18nBundle",void 0),C5=A5=w5([m0({tag:"ui5-button",formAssociated:!0,languageAware:!0,renderer:d1,template:function(e,t,i){return u1`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${c1(this.tabIndexValue)} aria-expanded="${c1(this.accessibilityAttributes.expanded)}" aria-controls="${c1(this.accessibilityAttributes.controls)}" aria-haspopup="${c1(this._hasPopup)}" aria-label="${c1(this.ariaLabelText)}" aria-describedby="${c1(this.ariaDescribedbyText)}" title="${c1(this.buttonTitle)}" part="button" role="${c1(this.effectiveAccRole)}">${this.icon?v5.call(this,e,t,i):void 0}<span id="${c1(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?y5.call(this,e,t,i):void 0}${this.hasButtonType?b5.call(this,e,t,i):void 0}</button> `},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Button.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-button-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:1px solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-button-icon,.ui5-button-end-icon{color:inherit;flex-shrink:0}.ui5-button-end-icon{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([icon-only]:not([has-end-icon])) .ui5-button-root{min-width:auto;padding:0}:host([icon-only]) .ui5-button-text{display:none}.ui5-button-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not(:empty)) .ui5-button-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-end-icon]:not([has-icon]):empty) .ui5-button-end-icon{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only]):not([has-end-icon])) .ui5-button-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]:active){pointer-events:none}:host([desktop]:not([active])) .ui5-button-root:focus-within:after,:host(:not([active])) .ui5-button-root:focus-visible:after,:host([desktop][active][design="Emphasized"]) .ui5-button-root:focus-within:after,:host([active][design="Emphasized"]) .ui5-button-root:focus-visible:after,:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:before,:host([design="Emphasized"]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_emphasized_focused_border_before);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}.ui5-button-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([ui5-button][active]:not([disabled]):not([non-interactive])){background-image:none;background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([design="Positive"]){background-color:var(--sapButton_Accept_Background);border-color:var(--sapButton_Accept_BorderColor);color:var(--sapButton_Accept_TextColor)}:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Accept_Hover_Background);border-color:var(--sapButton_Accept_Hover_BorderColor);color:var(--sapButton_Accept_Hover_TextColor)}:host([ui5-button][design="Positive"][active]:not([non-interactive])){background-color:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Active_TextColor)}:host([design="Negative"]){background-color:var(--sapButton_Reject_Background);border-color:var(--sapButton_Reject_BorderColor);color:var(--sapButton_Reject_TextColor)}:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Reject_Hover_Background);border-color:var(--sapButton_Reject_Hover_BorderColor);color:var(--sapButton_Reject_Hover_TextColor)}:host([ui5-button][design="Negative"][active]:not([non-interactive])){background-color:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Attention"]){background-color:var(--sapButton_Attention_Background);border-color:var(--sapButton_Attention_BorderColor);color:var(--sapButton_Attention_TextColor)}:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Attention_Hover_Background);border-color:var(--sapButton_Attention_Hover_BorderColor);color:var(--sapButton_Attention_Hover_TextColor)}:host([ui5-button][design="Attention"][active]:not([non-interactive])){background-color:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Emphasized"]){background-color:var(--sapButton_Emphasized_Background);border-color:var(--sapButton_Emphasized_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_TextColor);font-family:var(--sapFontBoldFamily )}:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Emphasized_Hover_Background);border-color:var(--sapButton_Emphasized_Hover_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_Hover_TextColor)}:host([ui5-button][design="Empasized"][active]:not([non-interactive])){background-color:var(--sapButton_Emphasized_Active_Background);border-color:var(--sapButton_Emphasized_Active_BorderColor);color:var(--sapButton_Emphasized_Active_TextColor)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color);outline:none}:host([design="Emphasized"][desktop][active]:not([non-interactive])) .ui5-button-root:focus-within:after,:host([design="Emphasized"][active]:not([non-interactive])) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_active_border_color)}:host([design="Transparent"]){background-color:var(--sapButton_Lite_Background);color:var(--sapButton_Lite_TextColor);border-color:var(--sapButton_Lite_BorderColor)}:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Lite_Hover_Background);border-color:var(--sapButton_Lite_Hover_BorderColor);color:var(--sapButton_Lite_Hover_TextColor)}:host([ui5-button][design="Transparent"][active]:not([non-interactive])){background-color:var(--sapButton_Lite_Active_Background);border-color:var(--sapButton_Lite_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([ui5-segmented-button-item][active][desktop]) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item][active]) .ui5-button-root:focus-visible:after,:host([pressed][desktop]) .ui5-button-root:focus-within:after,:host([pressed]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([ui5-segmented-button-item][desktop]:not(:last-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:last-child)) .ui5-button-root:focus-visible:after{border-top-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([ui5-segmented-button-item][desktop]:not(:first-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:first-child)) .ui5-button-root:focus-visible:after{border-top-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n'},dependencies:[r5],shadowRootOptions:{delegatesFocus:!0}}),v0("click",{bubbles:!0}),v0("_active-state-change",{bubbles:!0,cancelable:!0})],C5),C5.define();const E5=C5,T5={key:"ICON_ADD",defaultText:"Add"},I5={key:"ICON_DECLINE",defaultText:"Decline"},M5={key:"ICON_ERROR",defaultText:"Error"};function k5(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-button-icon" name="${c1(this.icon)}" mode="${c1(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-button-icon" name="${c1(this.icon)}" mode="${c1(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function B5(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-button-end-icon" name="${c1(this.endIcon)}" mode="${c1(this.endIconMode)}" part="endIcon"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-button-end-icon" name="${c1(this.endIcon)}" mode="${c1(this.endIconMode)}" part="endIcon"></ui5-icon>`}function R5(e,t,i){return u1`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${c1(this.buttonTypeText)}</span>`}bJ("decline",{pathData:"M86 109l22-23q5-5 12-5 6 0 11 5l124 125L380 86q5-5 11-5 7 0 12 5l22 23q6 5 6 11t-6 12L301 256l124 125q6 5 6 11 0 5-6 11l-22 23q-8 5-12 5-3 0-11-5L255 301 131 426q-5 5-11 5-4 0-12-5l-22-23q-6-6-6-11 0-6 6-11l124-125L86 132q-6-6-6-12t6-11z",ltr:!1,accData:I5,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("decline",{pathData:"M292 256l117 116q7 7 7 18 0 12-7.5 19t-18.5 7q-9 0-18-7L256 292 140 409q-9 7-18 7-11 0-18.5-7.5T96 390t7-18l117-116-117-116q-7-7-7-18t7.5-18.5T122 96t18 7l116 117 116-117q7-7 18-7t18.5 7.5T416 122t-7 18z",ltr:!1,accData:I5,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("unit",{pathData:"M369.154 238q-11 0-18-8l-16-16-41 40 17 17q8 8 8 18t-8 18q-7 7-18 7t-18-7l-17-17-40 40 17 17q8 8 7.5 18t-7.5 18q-7 7-18 7t-18-7l-17-17-92 93h370V89l-90 89 17 17q8 8 8 18t-8 17q-7 8-18 8zm-340 271q-11 0-18-7 0-1-.5-1t-.5-1q-6-6-6-16t6-17l457-457 2-2q8-6 16-6 5 0 9 2l8 4q0 1 .5 1t.5 1q10 10 7 22v452q0 11-7 18t-18 7h-456zm381-101h-108l108-109v109z",ltr:!1,collection:"tnt-v2",packageName:"@ui5/webcomponents-icons-tnt"}),bJ("unit",{pathData:"M199 448l-45-45-77 77h403V77l-77 77 45 45-23 23-45-45-22 22 45 45-23 23-45-45-22 23 44 45-22 22-45-45-23 23 45 45-22 22-45-44-23 22 45 45-23 23-45-45-22 22 45 45zm217-90l-58 58h58v-58zM512 0v512H0zm-64 281v167H281z",ltr:!1,collection:"tnt-v3",packageName:"@ui5/webcomponents-icons-tnt"}),bJ("measure",{pathData:"M0 208V64h512v32h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96H96v80q0 16-16 16t-16-16V96H32v112q0 16-16 16T0 208zm0 112h304l25-49q2-5 7-5t7 5l25 49h144v32H384l16 32h112v32h-96l10 21q1 2 1 4t-1.5 4.5-6.5 2.5H253q-5 0-6.5-2.5T245 441t1-4l10-21H0v-32h272l16-32H0v-32zm292 96h88l-44-88z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("measure",{pathData:"M454 96q24 0 41 17t17 41v160q0 23-17 40t-41 17h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T442 320h12q7 0 7-6V154q0-7-7-7h-38v51q0 11-7.5 18.5T390 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T275 198v-51h-38v51q0 11-7.5 18.5T211 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T96 198v-51H58q-7 0-7 7v160q0 6 7 6h108q11 0 18.5 7.5T192 346t-7.5 18-18.5 7H58q-24 0-41-17T0 314V154q0-24 17-41t41-17h396zm-75 280q5 7 5 14 0 11-7.5 18.5T358 416H250q-11 0-18.5-7.5T224 390q0-7 5-14l54-77q8-11 21-11t21 11z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("chart-axis",{pathData:"M487.5 408q9 10 9 23t-9 23l-61 53q-5 5-11 5t-11-5-5-11.5 5-11.5l44-36h-336q-14 0-23-9.5t-9-22.5V80l-37 43q-5 5-11.5 5t-11.5-5-5-11 5-11l52-60q10-9 23-9t23 9l53 60q5 5 5 11t-5 11-11.5 5-11.5-5l-36-43v313l225-225-57 5q-16-2-16-16 0-7 4.5-11.5t10.5-4.5l80-6q13 1 22.5 10t9.5 22l-5 81q0 6-4.5 10.5t-10.5 4.5q-17 0-17-16l5-56-224 225h313l-44-37q-5-5-5-11.5t5-11.5 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("chart-axis",{pathData:"M505 391q7 7 7 19 0 11-7 18l-77 76q-8 8-18 8-11 0-18.5-7.5T384 486q0-10 8-18l33-33H102q-11 0-18-7t-7-18V87l-33 34q-7 7-18 7t-18.5-7.5T0 102q0-10 8-18L84 7q9-7 19-7 9 0 18 7l76 77q8 7 8 18t-7.5 18.5T179 128t-18-7l-33-34v261l233-233h-47q-11 0-18.5-7T288 90t7.5-18.5T314 64h108q11 0 18.5 7.5T448 90v108q0 11-7.5 18.5T422 224t-18-7.5-7-18.5v-47L164 384h261l-33-33q-8-8-8-18 0-11 7.5-18.5T410 307q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("rotate",{pathData:"M200 59q5 5 5 11 0 5-5 12l-54 54q-5 5-12 5-6 0-11-4.5t-5-11.5q0-5 5-12l27-27H80q-20 0-34 14t-14 34v77q0 16-16 16T0 211v-77q0-33 23.5-56.5T80 54h70l-27-27q-5-5-5-11t5-11q4-5 11-5 8 0 12 5zm296 133q16 0 16 16v288q0 16-16 16H208q-16 0-16-16V208q0-16 16-16h288zm-16 288V224H224v256h256z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("rotate",{pathData:"M486 192q11 0 18.5 7.5T512 218v268q0 11-7.5 18.5T486 512H218q-11 0-18.5-7.5T192 486V218q0-11 7.5-18.5T218 192h268zm-25 51H243v218h218V243zM217 62q7 7 7 18t-7 18l-55 54q-8 8-18 8-11 0-18.5-7.5T118 134q0-10 8-18l11-10H90q-17 0-28 11t-11 27v86q0 11-7 18.5T26 256t-18.5-7.5T0 230v-86q0-37 26-63.5T90 54h47l-11-10q-8-8-8-18 0-11 7.5-18.5T144 0q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var P5=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let D5=class extends E5{constructor(){super(...arguments),this.pressed=!1}_onclick(){this.pressed=!this.pressed,EZ()&&this.getDomRef().focus()}_onkeyup(e){w0(e)?e.preventDefault():super._onkeyup(e)}};P5([_0({type:Boolean})],D5.prototype,"pressed",void 0),D5=P5([m0({tag:"ui5-toggle-button",template:function(e,t,i){return u1`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  aria-pressed="${c1(this.pressed)}"  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${c1(this.tabIndexValue)} aria-expanded="${c1(this.accessibilityAttributes.expanded)}" aria-controls="${c1(this.accessibilityAttributes.controls)}" aria-haspopup="${c1(this._hasPopup)}" aria-label="${c1(this.ariaLabelText)}" aria-describedby="${c1(this.ariaDescribedbyText)}" title="${c1(this.buttonTitle)}" part="button" role="${c1(this.effectiveAccRole)}">${this.icon?k5.call(this,e,t,i):void 0}<span id="${c1(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?B5.call(this,e,t,i):void 0}${this.hasButtonType?R5.call(this,e,t,i):void 0}</button> `},styles:[E5.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ToggleButton.css.ts",content:':host(:not([hidden])){display:inline-block}:host([design="Emphasized"]:not([pressed])){text-shadow:var(--_ui5-v2-4-0_toggle_button_emphasized_text_shadow)}:host([pressed]),:host([design="Default"][pressed]),:host([design="Transparent"][pressed]),:host([design="Emphasized"][pressed]){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor);text-shadow:none}:host([pressed]:hover),:host([pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Default"][pressed]:hover),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Transparent"][pressed]:hover),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Emphasized"][pressed]:hover),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Selected_Hover_Background);border-color:var(--sapButton_Selected_Hover_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([active]:not([disabled])),:host([design="Default"][active]:not([disabled])),:host([design="Transparent"][active]:not([disabled])),:host([design="Emphasized"][active]:not([disabled])){background:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([design="Negative"][pressed]){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][active]:not([disabled])){background:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Negative"][pressed][active]:hover),:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Reject_Selected_Hover_Background);border-color:var(--sapButton_Reject_Selected_Hover_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Positive"][pressed]){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][active]:not([disabled])){background:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed][active]:hover),:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Accept_Selected_Hover_Background);border-color:var(--sapButton_Accept_Selected_Hover_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Attention"][pressed]){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][active]:not([disabled])){background:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Attention"][pressed][active]:hover),:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Attention_Selected_Hover_Background);border-color:var(--sapButton_Attention_Selected_Hover_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}\n'}]})],D5),D5.define();const L5=()=>{const e=X0();return e&&"function"==typeof e.focus?e:null},O5=(e,t)=>{let i=e;if(i.shadowRoot&&(i=Array.from(i.shadowRoot.children).find((e=>"style"!==e.localName)),!i))return!1;if(i===t)return!0;const n="slot"===i.localName?i.assignedNodes():i.children;return!!n&&Array.from(n).some((e=>O5(e,t)))},F5=(e,t)=>{let i,n;if(e instanceof MouseEvent)i=e.clientX,n=e.clientY;else{const t=e.touches[0];i=t.clientX,n=t.clientY}return o=n,(r=i)>=(s=t).left&&r<=s.right&&o>=s.top&&o<=s.bottom;var r,o,s},N5=e=>{const t=e.parentElement||e.getRootNode&&e.getRootNode().host;return t&&("isUI5Element"in(i=t)&&"_show"in i||t===document.documentElement)?t:N5(t);var i},z5=(e,t,i)=>Math.min(Math.max(e,t),Math.max(t,i)),U5=e=>{const t=getComputedStyle(e);return["size","inline-size"].indexOf(t.containerType)>-1||["transform","perspective"].indexOf(t.willChange)>-1||["layout","paint","strict","content"].indexOf(t.contain)>-1||t.transform&&"none"!==t.transform||t.perspective&&"none"!==t.perspective||t.backdropFilter&&"none"!==t.backdropFilter},H5=typeof document>"u",V5=()=>H5||document.body.classList.contains("ui5-content-native-scrollbars")?"":"::-webkit-scrollbar:horizontal {\n\theight: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar:vertical {\n\twidth: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar {\n\tbackground-color: var(--sapScrollBar_TrackColor);\n\tborder-left: none;\n}\n\n::-webkit-scrollbar-thumb {\n\tborder-radius: var(--sapElement_BorderCornerRadius);\n\tbackground-color: var(--sapScrollBar_FaceColor);\n}\n\n::-webkit-scrollbar-thumb:hover {\n\tbackground-color: var(--sapScrollBar_Hover_FaceColor);\n}\n\n::-webkit-scrollbar-corner {\n\tbackground-color: var(--sapScrollBar_TrackColor);\n}",$5=e=>e.parentElement?e.parentNode:e.parentNode.host,G5={toAttribute:e=>e instanceof HTMLElement?null:e,fromAttribute:e=>e},Q5=e=>"SLOT"!==e.nodeName&&(e.offsetWidth<=0&&e.offsetHeight<=0||e.style&&"hidden"===e.style.visibility),j5=/^(?:a|area)$/i,q5=/^(?:input|select|textarea|button)$/i,W5=e=>{if(e.disabled)return!1;const t=e.getAttribute("tabindex");return null!=t?parseInt(t)>=0:q5.test(e.nodeName)||j5.test(e.nodeName)&&!!e.href},X5=e=>e.hasAttribute("data-ui5-focus-trap"),Y5=async(e,t)=>!e||Q5(e)?null:Z5(e,!0),K5=e=>e.hasAttribute("data-ui5-focus-redirect")||!Q5(e),Z5=async(e,t,i)=>{let n,r,o,s=-1;for(e.shadowRoot?n=t?e.shadowRoot.firstChild:e.shadowRoot.lastChild:e instanceof HTMLSlotElement&&e.assignedNodes()?(r=e.assignedNodes(),s=t?0:r.length-1,n=r[s]):n=t?e.firstElementChild:e.lastElementChild;n;){const e=n;if(g0(n)&&(n=await n.getFocusDomRefAsync()),!n)return null;if(1===n.nodeType&&K5(n)&&!X5(n)){if(W5(n))return n&&"function"==typeof n.focus?n:null;if(o=await Z5(n,t),o)return o&&"function"==typeof o.focus?o:null}n=t?e.nextSibling:e.previousSibling,r&&!r[s].contains(n)&&(s=t?s+1:s-1,n=r[s])}return null};let J5;const e4=new Map,t4=()=>(J5||(J5=new window.ResizeObserver((e=>{window.requestAnimationFrame((()=>{e.forEach((e=>{const t=e4.get(e.target);t&&Promise.all(t.map((e=>e())))}))}))}))),J5);let i4=class{static register(e,t){let i=e;g0(i)&&(i=i.getDomRef()),i instanceof HTMLElement?((e,t)=>{const i=e4.get(e)||[];i.length||t4().observe(e),e4.set(e,[...i,t])})(i,t):console.warn("Cannot register ResizeHandler for element",e)}static deregister(e,t){let i=e;g0(i)&&(i=i.getDomRef()),i instanceof HTMLElement?((e,t)=>{const i=e4.get(e)||[];if(0===i.length)return;const n=i.filter((e=>e!==t));0===n.length?(t4().unobserve(e),e4.delete(e)):e4.set(e,n)})(i,t):console.warn("Cannot deregister ResizeHandler for element",e)}};const n4=new Map,r4=new Map;r4.set("S",[0,599]),r4.set("M",[600,1023]),r4.set("L",[1024,1439]),r4.set("XL",[1440,1/0]);var o4=(e=>(e.RANGE_4STEPS="4Step",e))(o4||{});const s4={RANGESETS:o4,initRangeSet:(e,t)=>{n4.set(e,t)},getCurrentRange:function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerWidth,n=n4.get(e);n||(n=n4.get("4Step"));const r=Math.floor(i);return n.forEach(((e,i)=>{r>=e[0]&&r<=e[1]&&(t=i)})),t||[...n.keys()][0]}};var a4;s4.initRangeSet(s4.RANGESETS.RANGE_4STEPS,r4),function(e){e.H1="H1",e.H2="H2",e.H3="H3",e.H4="H4",e.H5="H5",e.H6="H6"}(a4||(a4={}));const l4=a4;function c4(e,t,i){return u1`<h1 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h1>`}function u4(e,t,i){return u1`<h2 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h2>`}function h4(e,t,i){return u1`<h3 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h3>`}function d4(e,t,i){return u1`<h4 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h4>`}function p4(e,t,i){return u1`<h5 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h5>`}function f4(e,t,i){return u1`<h6 class="ui5-title-root"><span id="${c1(this._id)}-inner"><slot></slot></span></h6>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var g4=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let m4=class extends f0{constructor(){super(...arguments),this.wrappingType="Normal",this.level="H2",this.size="H5"}get h1(){return this.level===l4.H1}get h2(){return this.level===l4.H2}get h3(){return this.level===l4.H3}get h4(){return this.level===l4.H4}get h5(){return this.level===l4.H5}get h6(){return this.level===l4.H6}};g4([_0()],m4.prototype,"wrappingType",void 0),g4([_0()],m4.prototype,"level",void 0),g4([_0()],m4.prototype,"size",void 0),m4=g4([m0({tag:"ui5-title",renderer:d1,template:function(e,t,i){return u1`${this.h1?c4.call(this,e,t,i):void 0}${this.h2?u4.call(this,e,t,i):void 0}${this.h3?h4.call(this,e,t,i):void 0}${this.h4?d4.call(this,e,t,i):void 0}${this.h5?p4.call(this,e,t,i):void 0}${this.h6?f4.call(this,e,t,i):void 0}`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Title.css.ts",content:':host(:not([hidden])){display:block;cursor:text}:host{max-width:100%;color:var(--sapGroup_TitleTextColor);font-size:var(--sapFontHeader5Size);font-family:"72override",var(--sapFontHeaderFamily);text-shadow:var(--sapContent_TextShadow)}.ui5-title-root{display:inline-block;position:relative;font-weight:400;font-size:inherit;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;max-width:100%;vertical-align:bottom;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;margin:0;cursor:inherit}:host{white-space:pre-line}:host([wrapping-type="None"]){white-space:nowrap}.ui5-title-root,:host ::slotted(*){white-space:inherit}::slotted(*){font-size:inherit;font-family:inherit;text-shadow:inherit}:host([size="H1"]){font-size:var(--sapFontHeader1Size)}:host([size="H2"]){font-size:var(--sapFontHeader2Size)}:host([size="H3"]){font-size:var(--sapFontHeader3Size)}:host([size="H4"]){font-size:var(--sapFontHeader4Size)}:host([size="H5"]){font-size:var(--sapFontHeader5Size)}:host([size="H6"]){font-size:var(--sapFontHeader6Size)}\n'}})],m4),m4.define();const _4=m4;var v4;!function(e){e.None="None",e.Dialog="Dialog",e.AlertDialog="AlertDialog"}(v4||(v4={}));const y4=v4,b4=DY("OpenedPopupsRegistry",{openedRegistry:[]}),A4=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];b4.openedRegistry.some((t=>t.instance===e))||b4.openedRegistry.push({instance:e,parentPopovers:t}),E4(),1===b4.openedRegistry.length&&S4()},w4=e=>{b4.openedRegistry=b4.openedRegistry.filter((t=>t.instance!==e)),E4(),b4.openedRegistry.length||C4()},x4=e=>{b4.openedRegistry.length&&F0(e)&&(e.stopPropagation(),b4.openedRegistry[b4.openedRegistry.length-1].instance.closePopup(!0))},S4=()=>{document.addEventListener("keydown",x4)},C4=()=>{document.removeEventListener("keydown",x4)},E4=()=>{let e,t=!1;for(let i=b4.openedRegistry.length-1;i>=0;i--)e=b4.openedRegistry[i].instance,!t&&e.isModal?(e.isTopModalPopup=!0,t=!0):e.isTopModalPopup=!1};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var T4,I4=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};WK("data-ui5-popup-scroll-blocker")||qK({packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:".ui5-popup-scroll-blocker{overflow:hidden}\n"},"data-ui5-popup-scroll-blocker");const M4=new Set;let k4=T4=class extends f0{constructor(){super(),this.preventFocusRestore=!1,this.accessibleRole="Dialog",this.preventInitialFocus=!1,this.isTopModalPopup=!1,this.onPhone=!1,this.onDesktop=!1,this._opened=!1,this._open=!1,this._resizeHandler=this._resize.bind(this),this._getRealDomRef=()=>this.shadowRoot.querySelector("[root-element]")}onBeforeRendering(){this.onPhone=TZ(),this.onDesktop=IZ()}onAfterRendering(){$K().then((()=>{this._updateMediaRange()}))}onEnterDOM(){this.setAttribute("popover","manual"),i4.register(this,this._resizeHandler),IZ()&&this.setAttribute("desktop",""),this.tabIndex=-1,this.open&&this.showPopover()}onExitDOM(){this._opened&&(T4.unblockPageScrolling(this),this._removeOpenedPopup()),i4.deregister(this,this._resizeHandler)}set open(e){this._open!==e&&(this._open=e,e?this.openPopup():this.closePopup())}get open(){return this._open}async openPopup(){this._opened||!this.fireDecoratorEvent("before-open",{})||this._opened||(this._opened=!0,this.isModal&&T4.blockPageScrolling(this),this._focusedElementBeforeOpen=L5(),this._show(),this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.open=!0,await this.applyInitialFocus(),await $K(),await this.applyInitialFocus(),this.isConnected&&this.fireDecoratorEvent("open",{}))}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(e){e.preventDefault()}static blockPageScrolling(e){M4.add(e),1===M4.size&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(e){M4.delete(e),0===M4.size&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(e){this.fireDecoratorEvent("scroll",{scrollTop:e.target.scrollTop,targetRef:e.target})}_onkeydown(e){const t=e.target===this._root&&z0(e),i=b0(e)&&!this.open;(t||i)&&e.preventDefault()}_onfocusout(e){e.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(e){this.shadowRoot.contains(e.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._shouldFocusRoot&&(yZ.chrome&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const e=await Y5(this);e?e.focus():this._root.focus()}async forwardToLast(){const e=await(async e=>!e||Q5(e)?null:Z5(e,!1))(this);e?e.focus():this._root.focus()}async applyInitialFocus(){this.preventInitialFocus||await this.applyFocus()}async applyFocus(){if(this.querySelector("[autofocus]"))return;if(await this._waitForDomRef(),this.getRootNode()===this)return;let e;this.initialFocus&&(e=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),e=e||await Y5(this)||this._root,e&&(e===this._root&&(e.tabIndex=-1),e.focus())}isFocusWithin(){return(e=>{const t=L5();return!!t&&O5(e,t)})(this._root)}_updateMediaRange(){this.mediaRange=s4.getCurrentRange(s4.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_addOpenedPopup(){A4(this)}closePopup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._opened&&(!this.fireDecoratorEvent("before-close",{escPressed:e})||(this._opened=!1,this.isModal&&T4.unblockPageScrolling(this),this.hide(),this.open=!1,t||this._removeOpenedPopup(),this.preventFocusRestore||i||this.resetFocus(),this.fireDecoratorEvent("close",{})))}_removeOpenedPopup(){w4(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null)}_show(){this.isConnected&&(this.setAttribute("popover","manual"),this.showPopover())}hide(){this.isConnected&&this.hidePopover()}get _ariaLabel(){return z2(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===y4.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===y4.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{}}}get classes(){return{root:{"ui5-popup-root":!0},content:{"ui5-popup-content":!0}}}};I4([_0()],k4.prototype,"initialFocus",void 0),I4([_0({type:Boolean})],k4.prototype,"preventFocusRestore",void 0),I4([_0()],k4.prototype,"accessibleName",void 0),I4([_0()],k4.prototype,"accessibleNameRef",void 0),I4([_0()],k4.prototype,"accessibleRole",void 0),I4([_0()],k4.prototype,"mediaRange",void 0),I4([_0({type:Boolean})],k4.prototype,"preventInitialFocus",void 0),I4([_0({type:Boolean,noAttribute:!0})],k4.prototype,"isTopModalPopup",void 0),I4([y0({type:HTMLElement,default:!0})],k4.prototype,"content",void 0),I4([_0({type:Boolean})],k4.prototype,"onPhone",void 0),I4([_0({type:Boolean})],k4.prototype,"onDesktop",void 0),I4([_0({type:Boolean})],k4.prototype,"open",null),k4=T4=I4([m0({renderer:d1,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:":host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/PopupBlockLayer.css.ts",content:".ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}\n"}],template:function(e,t,i){return u1`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${l1(this.styles.root)}" class="${a1(this.classes.root)}" role="${c1(this._role)}" aria-modal="${c1(this._ariaModal)}" aria-label="${c1(this._ariaLabel)}" aria-labelledby="${c1(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><div style="${l1(this.styles.content)}" class="${a1(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`},dependencies:[_4]}),v0("before-open",{cancelable:!0}),v0("open"),v0("before-close",{detail:{escPressed:{type:Boolean}},cancelable:!0}),v0("close"),v0("scroll",{bubbles:!0})],k4);const B4=k4;var R4;!function(e){e.Start="Start",e.End="End",e.Top="Top",e.Bottom="Bottom"}(R4||(R4={}));const P4=R4;var D4;!function(e){e.Center="Center",e.Top="Top",e.Bottom="Bottom",e.Stretch="Stretch"}(D4||(D4={}));const L4=D4;var O4;!function(e){e.Center="Center",e.Start="Start",e.End="End",e.Stretch="Stretch"}(O4||(O4={}));const F4=O4;let N4;const z4=[],U4=()=>{z4.forEach((e=>{e.instance.reposition()}))},H4=e=>{const t=[...b4.openedRegistry];if(0!==t.length&&J4(t[t.length-1].instance))for(let i=t.length-1;-1!==i;i--){const n=t[i].instance;if(n.isModal||n.isOpenerClicked(e))return;if(F5(e,n.getBoundingClientRect()))break;n.closePopup()}},V4=()=>z4,$4=e=>{let t=e.parentNode;const i=[];for(;t&&t.parentNode;){for(let e=0;e<z4.length;e++)t===z4[e].instance&&i.push(t);t=t.parentNode}return i};function G4(e,t,i){return u1`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?Q4.call(this,e,t,i):j4.call(this,e,t,i)}</header>`}function Q4(e,t,i){return u1`<slot name="header"></slot>`}function j4(e,t,i){return i?u1`<${p1("ui5-title",t,i)} level="H1" class="ui5-popup-header-text">${c1(this.headerText)}</${p1("ui5-title",t,i)}>`:u1`<ui5-title level="H1" class="ui5-popup-header-text">${c1(this.headerText)}</ui5-title>`}function q4(e,t,i){return u1`${this.footer.length?W4.call(this,e,t,i):void 0}`}function W4(e,t,i){return u1`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));const X4={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:':host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-4-0_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v2-4-0_popup_header_shadow);border-bottom:var(--_ui5-v2-4-0_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v2-4-0_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{min-height:var(--_ui5-v2-4-0_popup_default_header_height);max-height:var(--_ui5-v2-4-0_popup_default_header_height);line-height:var(--_ui5-v2-4-0_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([no-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-4-0_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_xl)}\n'};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var Y4,K4=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Z4=Y4=class extends B4{static get VIEWPORT_MARGIN(){return 10}constructor(){super(),this.placement="End",this.horizontalAlign="Center",this.verticalAlign="Center",this.modal=!1,this.hideArrow=!1,this.allowTargetOverlap=!1,this.disableScrolling=!1,this.arrowTranslateX=0,this.arrowTranslateY=0,this.actualPlacement="End"}set opener(e){this._opener!==e&&(this._opener=e,e&&this.open&&this.openPopup())}get opener(){return this._opener}async openPopup(){if(this._opened)return;const e=this.getOpenerHTMLElement(this.opener);if(e){if(this.isOpenerOutsideViewport(e.getBoundingClientRect()))return await $K(),this.open=!1,void this.fireDecoratorEvent("close");this._openerRect=e.getBoundingClientRect(),await super.openPopup()}else console.warn("Valid opener id is required. It must be defined before opening the popover.")}isOpenerClicked(e){const t=e.target;if(t===this._opener)return!0;const i=t;return!(!i.getFocusDomRef||i.getFocusDomRef()!==this._opener)||e.composedPath().indexOf(this._opener)>-1}_addOpenedPopup(){(e=>{const t=$4(e);var i;A4(e,t),z4.push({instance:e,parentPopovers:t}),(i=e)&&i.shadowRoot.addEventListener("scroll",U4,{capture:!0}),1===z4.length&&(document.addEventListener("scroll",U4,{capture:!0}),document.addEventListener("mousedown",H4),N4=setInterval((()=>{U4(),"IFRAME"===X0().tagName&&V4().reverse().forEach((e=>e.instance.closePopup(!1,!1,!0)))}),300))})(this)}_removeOpenedPopup(){(e=>{const t=[e];for(let n=0;n<z4.length;n++){const i=z4[n].parentPopovers.indexOf(e);z4[n].parentPopovers.length>0&&i>-1&&t.push(z4[n].instance)}for(let n=t.length-1;n>=0;n--)for(let e=0;e<z4.length;e++){let r=-1;t[n]===z4[e].instance&&(r=e),r>=0&&(w4(z4[r].instance),(i=z4[r].instance)&&i.shadowRoot.removeEventListener("scroll",U4,{capture:!0}),z4.splice(r,1)[0].instance.closePopup(!1,!0))}var i;z4.length||(document.removeEventListener("scroll",U4,{capture:!0}),document.removeEventListener("mousedown",H4),clearInterval(N4))})(this)}getOpenerHTMLElement(e){if(void 0===e||e instanceof HTMLElement)return e;const t=this.getRootNode();return t instanceof Document?t.getElementById(e):document.getElementById(e)}shouldCloseDueToOverflow(e,t){const i={Start:t.right,End:t.left,Top:t.top,Bottom:t.bottom},n=this.getOpenerHTMLElement(this.opener),r=N5(n);let o=!1,s=!1;if(r instanceof Y4){const e=r.contentDOM.getBoundingClientRect();o=t.top>e.top+e.height,s=t.top+t.height<e.top}return i[e]<0||i[e]+32>r.innerHeight||o||s}shouldCloseDueToNoOpener(e){return 0===e.top&&0===e.bottom&&0===e.left&&0===e.right}isOpenerOutsideViewport(e){return e.bottom<0||e.top>window.innerHeight||e.right<0||e.left>window.innerWidth}_resize(){super._resize(),this.open&&this.reposition()}reposition(){this._show()}async _show(){super._show();const e=this.getOpenerHTMLElement(this.opener);if(e&&this._isUI5Element(e)&&!e.getDomRef())return;this._opened||this._showOutsideViewport();const t=this.getPopoverSize();let i;if(0===t.width||0===t.height)return;if(this.open&&(this._openerRect=e.getBoundingClientRect()),i=this._oldPlacement&&this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?this._oldPlacement:this.calcPlacement(this._openerRect,t),this._preventRepositionAndClose||this.isOpenerOutsideViewport(this._openerRect))return await this._waitForDomRef(),this.closePopup();this._oldPlacement=i,this.actualPlacement=i.placement;let n=z5(this._left,Y4.VIEWPORT_MARGIN,document.documentElement.clientWidth-t.width-Y4.VIEWPORT_MARGIN);this.actualPlacement===P4.End&&(n=Math.max(n,this._left));let r=z5(this._top,Y4.VIEWPORT_MARGIN,document.documentElement.clientHeight-t.height-Y4.VIEWPORT_MARGIN);this.actualPlacement===P4.Bottom&&(r=Math.max(r,this._top)),this.arrowTranslateX=i.arrow.x,this.arrowTranslateY=i.arrow.y,r=this._adjustForIOSKeyboard(r),Object.assign(this.style,{top:`${r}px`,left:`${n}px`}),this.horizontalAlign===F4.Stretch&&this._width&&(this.style.width=this._width),this.verticalAlign===L4.Stretch&&this._height&&(this.style.height=this._height)}_adjustForIOSKeyboard(e){if(!MZ())return e;const t=Math.ceil(this.getBoundingClientRect().top);return e+(Number.parseInt(this.style.top||"0")-t)}_getContainingBlockClientLocation(){let e=$5(this);for(;e;){if(U5(e))return e.getBoundingClientRect();e=$5(e)}return{left:0,top:0}}getPopoverSize(){const e=this.getBoundingClientRect();return{width:e.width,height:e.height}}_showOutsideViewport(){Object.assign(this.style,{top:"-10000px",left:"-10000px"})}_isUI5Element(e){return"isUI5Element"in e}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(e,t){let i=Y4.VIEWPORT_MARGIN,n=0;const r=this.allowTargetOverlap,o=document.documentElement.clientWidth,s=document.documentElement.clientHeight;let a=s,l=o;const c=this.getActualPlacement(e,t);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(e)||this.shouldCloseDueToOverflow(c,e);const u=c===P4.Top||c===P4.Bottom;this.horizontalAlign===F4.Stretch&&u?(t.width=e.width,this._width=`${e.width}px`):this.verticalAlign!==L4.Stretch||u||(t.height=e.height,this._height=`${e.height}px`);const h=this.hideArrow?0:8;switch(c){case P4.Top:i=this.getVerticalLeft(e,t),n=Math.max(e.top-t.height-h,0),r||(a=e.top-h);break;case P4.Bottom:i=this.getVerticalLeft(e,t),n=e.bottom+h,r?n=Math.max(Math.min(n,s-t.height),0):a=s-e.bottom-h;break;case P4.Start:i=Math.max(e.left-t.width-h,0),n=this.getHorizontalTop(e,t),r||(l=e.left-h);break;case P4.End:i=e.left+e.width+h,n=this.getHorizontalTop(e,t),r?i=Math.max(Math.min(i,o-t.width),0):l=o-e.right-h}u?t.width>o||i<Y4.VIEWPORT_MARGIN?i=Y4.VIEWPORT_MARGIN:i+t.width>o-Y4.VIEWPORT_MARGIN&&(i=o-Y4.VIEWPORT_MARGIN-t.width):t.height>s||n<Y4.VIEWPORT_MARGIN?n=Y4.VIEWPORT_MARGIN:n+t.height>s-Y4.VIEWPORT_MARGIN&&(n=s-Y4.VIEWPORT_MARGIN-t.height),this._maxHeight=Math.round(a-Y4.VIEWPORT_MARGIN),this._maxWidth=Math.round(l-Y4.VIEWPORT_MARGIN),(void 0===this._left||Math.abs(this._left-i)>1.5)&&(this._left=Math.round(i)),(void 0===this._top||Math.abs(this._top-n)>1.5)&&(this._top=Math.round(n));const d=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius"));return{arrow:this.getArrowPosition(e,t,i,n,u,d),top:this._top,left:this._left,placement:c}}getArrowPosition(e,t,i,n,r,o){const s=this._actualHorizontalAlign;let a=s===F4.Center||s===F4.Stretch;s===F4.End&&i<=e.left&&(a=!0),s===F4.Start&&i+t.width>=e.left+e.width&&(a=!0);let l=0;r&&a&&(l=e.left+e.width/2-i-t.width/2);let c=0;r||(c=e.top+e.height/2-n-t.height/2);const u=t.height/2-o-4;c=z5(c,-u,u);const h=t.width/2-o-4;return l=z5(l,-h,h),{x:Math.round(l),y:Math.round(c)}}fallbackPlacement(e,t,i,n){return i.left>n.width?P4.Start:e-i.right>i.left?P4.End:t-i.bottom>n.height?P4.Bottom:t-i.bottom<i.top?P4.Top:void 0}getActualPlacement(e,t){const i=this.placement;let n=i;const r=document.documentElement.clientWidth,o=document.documentElement.clientHeight;switch(i){case P4.Top:e.top<t.height&&e.top<o-e.bottom&&(n=P4.Bottom);break;case P4.Bottom:o-e.bottom<t.height&&o-e.bottom<e.top&&(n=P4.Top);break;case P4.Start:e.left<t.width&&(n=this.fallbackPlacement(r,o,e,t)||i);break;case P4.End:r-e.right<t.width&&(n=this.fallbackPlacement(r,o,e,t)||i)}return n}getVerticalLeft(e,t){const i=this._actualHorizontalAlign;let n=Y4.VIEWPORT_MARGIN;switch(i){case F4.Center:case F4.Stretch:n=e.left-(t.width-e.width)/2;break;case F4.Start:n=e.left;break;case F4.End:n=e.right-t.width}return n}getHorizontalTop(e,t){let i=0;switch(this.verticalAlign){case L4.Center:case L4.Stretch:i=e.top-(t.height-e.height)/2;break;case L4.Top:i=e.top;break;case L4.Bottom:i=e.bottom-t.height}return i}get isModal(){return this.modal}get _ariaLabelledBy(){if(!this._ariaLabel&&this._displayHeader)return"ui5-popup-header"}get styles(){return{...super.styles,root:{"max-height":this._maxHeight?`${this._maxHeight}px`:"","max-width":this._maxWidth?`${this._maxWidth}px`:""},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}}}get classes(){const e=super.classes;return e.root["ui5-popover-root"]=!0,e}get _displayHeader(){return!(!this.header.length&&!this.headerText)}get _displayFooter(){return!0}get _actualHorizontalAlign(){if("rtl"===this.effectiveDir){if(this.horizontalAlign===F4.Start)return F4.End;if(this.horizontalAlign===F4.End)return F4.Start}return this.horizontalAlign}};K4([_0()],Z4.prototype,"headerText",void 0),K4([_0()],Z4.prototype,"placement",void 0),K4([_0()],Z4.prototype,"horizontalAlign",void 0),K4([_0()],Z4.prototype,"verticalAlign",void 0),K4([_0({type:Boolean})],Z4.prototype,"modal",void 0),K4([_0({type:Boolean})],Z4.prototype,"hideArrow",void 0),K4([_0({type:Boolean})],Z4.prototype,"allowTargetOverlap",void 0),K4([_0({type:Boolean})],Z4.prototype,"disableScrolling",void 0),K4([_0({type:Number,noAttribute:!0})],Z4.prototype,"arrowTranslateX",void 0),K4([_0({type:Number,noAttribute:!0})],Z4.prototype,"arrowTranslateY",void 0),K4([_0()],Z4.prototype,"actualPlacement",void 0),K4([_0({type:Number,noAttribute:!0})],Z4.prototype,"_maxHeight",void 0),K4([_0({type:Number,noAttribute:!0})],Z4.prototype,"_maxWidth",void 0),K4([y0({type:HTMLElement})],Z4.prototype,"header",void 0),K4([y0({type:HTMLElement})],Z4.prototype,"footer",void 0),K4([_0({converter:G5})],Z4.prototype,"opener",null),Z4=Y4=K4([m0({tag:"ui5-popover",styles:[B4.styles,X4,{packageName:"@ui5/webcomponents",fileName:"themes/Popover.css.ts",content:':host{box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);background-color:var(--_ui5-v2-4-0_popover_background);max-width:calc(100vw - (100vw - 100%) - 2 * var(--_ui5-v2-4-0_popup_viewport_margin))}:host([hide-arrow]){box-shadow:var(--_ui5-v2-4-0_popover_no_arrow_box_shadow)}:host([opened][actual-placement="Top"]){margin-top:var(--_ui5-v2-4-0-popover-margin-bottom)}:host([opened][actual-placement="Bottom"]){margin-top:var(--_ui5-v2-4-0-popover-margin-top)}:host([actual-placement="Bottom"]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5rem}:host([actual-placement="Bottom"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_upward_arrow_margin)}:host([actual-placement="Start"]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement="Start"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_right_arrow_margin)}:host([actual-placement="Top"]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement="Top"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_downward_arrow_margin)}:host(:not([actual-placement])) .ui5-popover-arrow,:host([actual-placement="End"]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement])) .ui5-popover-arrow:after,:host([actual-placement="End"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--_ui5-v2-4-0_popover_background);box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);transform:rotate(-45deg)}:host([modal])::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}:host([modal]) .ui5-block-layer{display:block}\n'},V5()],template:function(e,t,i){return u1`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${l1(this.styles.root)}" class="${a1(this.classes.root)}" role="${c1(this._role)}" aria-modal="${c1(this._ariaModal)}" aria-label="${c1(this._ariaLabel)}" aria-labelledby="${c1(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${l1(this.styles.arrow)}"></span>${this._displayHeader?G4.call(this,e,t,i):void 0}<div style="${l1(this.styles.content)}" class="${a1(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?q4.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `}})],Z4);const J4=e=>"opener"in e;Z4.define();const e3=Z4;var t3=Object.defineProperty,i3=Object.getOwnPropertyDescriptor,n3=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?i3(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&t3(t,i,o),o};let r3=class extends _j{constructor(){super(...arguments),this.isColumnMode=!1}render(){return WQ`
      <div
        id="toolBar"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div
          id="btnBar"
          class="${this.isColumnMode?"hor-orientation":"ver-orientation"}"
        >
          <slot @slotchange=${this._handleSlotChange}></slot>
        </pv-tool-area>
      </div>
    `}_handleSlotChange(e){console.log("Slot changed",e)}};r3.styles=fQ`
    :host {
      max-height: 100%;
      max-width: 100%;
      --size: 13.5rem;
    }

    #btnBar.hor-orientation{
      width: 100%;
      flex-direction: row;
    }

    #btnBar.ver-orientation{
      height: 100%;
      flex-direction: column;
    }

    #btnBar
    {
      display: flex;
      gap: 0.25rem;
      pointer-events: auto;
    }

    #toolBar.hor-orientation{
      width: calc(100% - 1rem);
      height: var(--size);
      flex-direction: row;
    }

    #toolBar.ver-orientation{
      height: calc(100% - 1rem);
      width: var(--size);
      flex-direction: column;
    }

    #toolBar {
      display: flex;
      gap: 0.5625rem;
      left: 0.5rem;
      top: 0.5rem;
      position: absolute;
      pointer-events: none;
    }

    #toolBar.hor-orientation pv-tool-area{
      height: 100%;
    }

    #toolBar.ver-orientation pv-tool-area{
      width: 100%;
    }

    ui5-toggle-button{
      height: 2.5rem;
      width: 2.5rem;
    }

    ui5-toggle-button ui5-icon{
      height: 85%;
      width: 85%;
    }

    ui5-icon {
      stroke:black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%)
    }
  `,n3([Aj({type:Boolean})],r3.prototype,"isColumnMode",2),r3=n3([yj("pv-menu")],r3);var o3=Object.defineProperty,s3=Object.getOwnPropertyDescriptor,a3=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?s3(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&o3(t,i,o),o};let l3=class extends _j{constructor(){super(...arguments),this.title="",this.icon="",this.idx=0}render(){return WQ`
      <ui5-button
        data-index=${this.idx}
        tooltip=${this.title}
        id="tool-button"
        @click="${this._togglePopover}"
        icon=${this.icon}
      >
      </ui5-button>
      <ui5-popover id="tool-popover" header-text="${this.title}">
        <slot></slot>
      </ui5-popover>
    `}_togglePopover(){null!==this.toolPopover?(void 0===this.toolPopover.opener&&(this.toolPopover.opener=this.toolButton),this.toolPopover.open=!this.toolPopover.open):console.warn("Popover not found.")}updated(e){super.updated(e)}};l3.styles=fQ`
    :host {
      max-height: 100%;
      max-width: 100%;
    }
  `,a3([Aj()],l3.prototype,"title",2),a3([Aj()],l3.prototype,"icon",2),a3([Aj()],l3.prototype,"idx",2),a3([wj("#tool-popover")],l3.prototype,"toolPopover",2),a3([wj("#tool-button")],l3.prototype,"toolButton",2),l3=a3([yj("pv-menu-item")],l3),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var c3,u3=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let h3=c3=class extends f0{constructor(){super(...arguments),this.showColon=!1,this.required=!1,this.wrappingType="Normal"}_onclick(){if(!this.for)return;const e=this.getRootNode().querySelector(`[id="${this.for}"]`);e&&e.focus()}get _colonSymbol(){return c3.i18nBundle.getText(M2)}};u3([_0()],h3.prototype,"for",void 0),u3([_0({type:Boolean})],h3.prototype,"showColon",void 0),u3([_0({type:Boolean})],h3.prototype,"required",void 0),u3([_0()],h3.prototype,"wrappingType",void 0),u3([f1("@ui5/webcomponents")],h3,"i18nBundle",void 0),h3=c3=u3([m0({tag:"ui5-label",renderer:d1,template:function(e,t,i){return u1`<label class="ui5-label-root" @click=${this._onclick}><span class="ui5-label-text-wrapper"><slot></slot></span><span aria-hidden="true" class="ui5-label-required-colon" data-colon="${c1(this._colonSymbol)}"></span></label>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Label.css.ts",content:':host(:not([hidden])){display:inline-flex}:host{max-width:100%;color:var(--sapContent_LabelColor);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;cursor:text}.ui5-label-root{width:100%;cursor:inherit}:host{white-space:normal}:host([wrapping-type="None"]){white-space:nowrap}:host([wrapping-type="None"]) .ui5-label-root{display:inline-flex}:host([wrapping-type="None"]) .ui5-label-text-wrapper{text-overflow:ellipsis;overflow:hidden;display:inline-block;vertical-align:top;flex:0 1 auto;min-width:0}:host([show-colon]) .ui5-label-required-colon:before{content:attr(data-colon)}:host([required]) .ui5-label-required-colon:after{content:"*";color:var(--sapField_RequiredColor);font-size:1.25rem;font-weight:700;position:relative;font-style:normal;vertical-align:middle;line-height:0}.ui5-label-text-wrapper{padding-inline-end:.075rem}:host([required][show-colon]) .ui5-label-required-colon:after{margin-inline-start:.125rem}:host([show-colon]) .ui5-label-required-colon{margin-inline-start:-.05rem;white-space:pre}\n'},languageAware:!0})],h3),h3.define();const d3=h3;let p3,f3;const g3=e=>{e.style.position="absolute",e.style.clip="rect(1px,1px,1px,1px)",e.style.userSelect="none",e.style.left="-1000px",e.style.top="-1000px",e.style.pointerEvents="none"};(e=>{RZ?e():PZ.attachEvent("boot",e)})((()=>{p3&&f3||(p3=document.createElement("span"),f3=document.createElement("span"),p3.classList.add("ui5-invisiblemessage-polite"),f3.classList.add("ui5-invisiblemessage-assertive"),p3.setAttribute("aria-live","polite"),f3.setAttribute("aria-live","assertive"),p3.setAttribute("role","alert"),f3.setAttribute("role","alert"),g3(p3),g3(f3),RY("ui5-announcement-area").appendChild(p3),RY("ui5-announcement-area").appendChild(f3))}));var m3=(e=>(e.None="None",e.Positive="Positive",e.Critical="Critical",e.Negative="Negative",e.Information="Information",e))(m3||{});bJ("slim-arrow-down",{pathData:"M420.5 187q6-6 11-6 6 0 12 6 5 5 5 11t-5 11l-165 165q-10 9-23 9t-22-9l-166-165q-5-5-5-11.5t5-11.5 11.5-5 11.5 5l160 160q3 3 5 3 3 0 6-3z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("slim-arrow-down",{pathData:"M96 186q0-11 7.5-18.5T122 160q10 0 18 8l116 121 116-121q8-8 18-8 11 0 18.5 7.5T416 186q0 10-7 17L275 344q-8 8-19 8t-19-8L103 203q-7-7-7-17z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("error",{pathData:"M512 256q0 53-20.5 100t-55 81.5-81 54.5-99.5 20-100-20.5-81.5-55T20 355 0 256q0-54 20-100.5t55-81T156.5 20 256 0t99.5 20T437 75t55 81.5 20 99.5zM399 364q3-3 3-6t-3-6l-86-86q-3-3-3-6t3-6l81-81q3-3 3-6t-3-6l-37-37q-2-2-6-2t-6 2l-83 82q-1 3-6 3-3 0-6-3l-84-83q-1-2-6-2-4 0-6 2l-37 37q-3 3-3 6t3 6l83 82q3 3 3 6t-3 6l-83 82q-2 2-2.5 4.5l-.5 2.5q0 3 3 5l36 37q4 2 6 2 4 0 6-2l85-84q2-2 6-2t6 2l88 88q4 2 6 2t6-2z",ltr:!1,accData:M5,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("error",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm45 256l74-73q9-11 9-23 0-13-9.5-22.5T352 128q-12 0-23 9l-73 74-73-74q-10-9-23-9t-22.5 9.5T128 160q0 12 9 23l74 73-74 73q-9 10-9 23t9.5 22.5T160 384t23-9l73-74 73 74q11 9 23 9 13 0 22.5-9.5T384 352t-9-23z",ltr:!1,accData:M5,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("alert",{pathData:"M501 374q5 10 7.5 19.5T512 412v5q0 31-23 47t-50 16H74q-13 0-26-4t-23.5-12-17-20T0 417q0-13 4-22.5t9-20.5L198 38q21-38 61-38 38 0 59 38zM257 127q-13 0-23.5 8T223 161q1 7 2 12 3 25 4.5 48t3.5 61q0 11 7.5 16t16.5 5q22 0 23-21l2-36 9-85q0-18-10.5-26t-23.5-8zm0 299q20 0 31.5-12t11.5-32q0-19-11.5-31T257 339t-31.5 12-11.5 31q0 20 11.5 32t31.5 12z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("alert",{pathData:"M505 399q7 13 7 27 0 21-15.5 37.5T456 480H56q-25 0-40.5-16.5T0 426q0-14 7-27L208 59q8-14 21-20.5t27-6.5 27 6.5T304 59zm-249 17q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9zm32-240q0-14-9-23t-23-9-23 9-9 23v96q0 14 9 23t23 9 23-9 9-23v-96z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("sys-enter-2",{pathData:"M512 256q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256t20.5-100 55-81.5T157 20t99-20q53 0 100 20t81.5 54.5T492 156t20 100zm-118-87q2-4 2-7t-3-6l-36-36q-3-4-8-4t-8 5L237 294h-4l-70-52q-4-3-7-3t-4.5 2-2.5 3l-29 41q-3 3-3 6 0 5 5 8l113 95q2 2 7 2t8-4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("sys-enter-2",{pathData:"M256 0q53 0 100 20t81.5 54.5T492 156t20 100-20 100-54.5 81.5T356 492t-100 20-100-20-81.5-54.5T20 356 0 256t20-100 54.5-81.5T156 20 256 0zm150 183q10-9 10-23 0-13-9.5-22.5T384 128t-22 9L186 308l-68-63q-9-9-22-9t-22.5 9.5T64 268q0 15 10 24l90 83q11 9 22 9 13 0 22-9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("information",{pathData:"M0 256q0-53 20.5-100t55-81.5T157 20t99-20q54 0 100.5 20t81 55 54.5 81.5 20 99.5q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256zm226-89q14 11 30 11 17 0 29.5-11.5T298 138q0-19-13-31-12-12-29-12-19 0-30.5 12.5T214 138q0 17 12 29zm-34 201v33h128v-33h-32V215q0-6-7-6h-88v31h32v128h-33z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("information",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm32 224q0-14-9-23t-23-9-23 9-9 23v160q0 14 9 23t23 9 23-9 9-23V224zm-32-64q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});let _3=null,v3=!1;const y3=new Set,b3=new Set,A3=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||b3.has(e.target)||(_3=e.target)},w3=()=>{_3=null},x3=()=>{_3=null},S3=e=>{y3.add(e),v3||v3||(document.body.addEventListener("dragstart",A3),document.body.addEventListener("dragend",w3),document.body.addEventListener("drop",x3))},C3=e=>{y3.delete(e),0===y3.size&&v3&&(document.body.removeEventListener("dragstart",A3),document.body.removeEventListener("dragend",w3),document.body.removeEventListener("drop",x3),v3=!1)},E3=()=>_3;var T3=(e=>(e.On="On",e.Before="Before",e.After="After",e))(T3||{}),I3=(e=>(e.Vertical="Vertical",e.Horizontal="Horizontal",e))(I3||{});const M3=(e,t,i,n)=>{const r=Math.abs(e-t),o=Math.abs(e-i),s=Math.abs(e-n);let a=[];switch(Math.min(r,o,s)){case r:a=[T3.Before];break;case o:a=[T3.On,r<s?T3.Before:T3.After];break;case s:a=[T3.After]}return a},k3=(e,t,i)=>{let n=Number.POSITIVE_INFINITY,r=null;for(let d=0;d<e.length;d++){const o=e[d],{left:s,width:a,top:l,height:c}=o.getBoundingClientRect();let u;u=i===I3.Vertical?l+c/2:s+a/2;const h=Math.abs(t-u);h<n&&(n=h,r=o)}if(!r)return null;const{width:o,height:s,left:a,right:l,top:c,bottom:u}=r.getBoundingClientRect();let h;return h=i===I3.Vertical?M3(t,c,c+s/2,u):M3(t,a,a+o/2,l),{element:r,placements:h}},B3=e=>{let t=e;return e.shadowRoot&&e.shadowRoot.activeElement&&(t=e.shadowRoot.activeElement),t};let R3=null;var P3;!function(e){e.None="None",e.Single="Single",e.SingleStart="SingleStart",e.SingleEnd="SingleEnd",e.SingleAuto="SingleAuto",e.Multiple="Multiple",e.Delete="Delete"}(P3||(P3={}));const D3=P3;var L3;!function(e){e.Button="Button",e.Scroll="Scroll",e.None="None"}(L3||(L3={}));const O3=L3;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var F3=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let N3=class extends f0{get _positionProperty(){return this.orientation===I3.Vertical?"left":"top"}constructor(){super(),this.targetReference=null,this.ownerReference=null,this.placement="Before",this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference)return void Object.assign(this.style,{display:"none"});const{left:e,width:t,right:i,top:n,bottom:r,height:o}=this.targetReference.getBoundingClientRect(),{top:s,height:a}=this.ownerReference.getBoundingClientRect(),l={display:"",[this._positionProperty]:"",width:"",height:""};let c=0,u=!1,h=!1;if(this.orientation===I3.Vertical){switch(this.placement){case T3.Before:c=e;break;case T3.On:l.width=`${t}px`,c=e;break;case T3.After:c=i}l.height=`${o}px`}if(this.orientation===I3.Horizontal){switch(this.placement){case T3.Before:c=n;break;case T3.On:l.height=`${o}px`,c=n;break;case T3.After:c=r}l.width=`${t}px`,c-=s,c<=0&&(h=!0),c>=a&&(u=!0)}l[this._positionProperty]=`${c}px`,this.toggleAttribute("first",h),this.toggleAttribute("last",u),Object.assign(this.style,l)}get classes(){return{root:{"ui5-di-rect":this.placement===T3.On,"ui5-di-needle":this.placement!==T3.On}}}};F3([_0({type:Object})],N3.prototype,"targetReference",void 0),F3([_0({type:Object})],N3.prototype,"ownerReference",void 0),F3([_0()],N3.prototype,"placement",void 0),F3([_0()],N3.prototype,"orientation",void 0),N3=F3([m0({tag:"ui5-drop-indicator",renderer:d1,styles:{packageName:"@ui5/webcomponents",fileName:"themes/DropIndicator.css.ts",content:':host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}\n'},template:function(e,t,i){return u1`<div class="${a1(this.classes.root)}"></div>`},dependencies:[]})],N3),N3.define();const z3=N3;var U3;!function(e){e.All="All",e.Inner="Inner",e.None="None"}(U3||(U3={}));const H3=U3;var V3;!function(e){e.Top="Top",e.Bottom="Bottom"}(V3||(V3={}));const $3=V3;function G3(e,t,i){return u1`<div class="ui5-busy-indicator-busy-area" title="${c1(this.ariaTitle)}" tabindex="0" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Busy" aria-labelledby="${c1(this.labelId)}" data-sap-focus-ref>${this.textPosition.top?Q3.call(this,e,t,i):void 0}<div class="ui5-busy-indicator-circles-wrapper"><div class="ui5-busy-indicator-circle circle-animation-0"></div><div class="ui5-busy-indicator-circle circle-animation-1"></div><div class="ui5-busy-indicator-circle circle-animation-2"></div></div>${this.textPosition.bottom?q3.call(this,e,t,i):void 0}</div>`}function Q3(e,t,i){return u1`${this.text?j3.call(this,e,t,i):void 0}`}function j3(e,t,i){return i?u1`<${p1("ui5-label",t,i)} id="${c1(this._id)}-label" class="ui5-busy-indicator-text">${c1(this.text)}</${p1("ui5-label",t,i)}>`:u1`<ui5-label id="${c1(this._id)}-label" class="ui5-busy-indicator-text">${c1(this.text)}</ui5-label>`}function q3(e,t,i){return u1`${this.text?W3.call(this,e,t,i):void 0}`}function W3(e,t,i){return i?u1`<${p1("ui5-label",t,i)} id="${c1(this._id)}-label" class="ui5-busy-indicator-text">${c1(this.text)}</${p1("ui5-label",t,i)}>`:u1`<ui5-label id="${c1(this._id)}-label" class="ui5-busy-indicator-text">${c1(this.text)}</ui5-label>`}function X3(e,t,i){return u1`<span data-ui5-focus-redirect tabindex="0" @focusin="${this._redirectFocus}"></span>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var Y3,K3=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Z3=Y3=class extends f0{constructor(){super(),this.size="M",this.active=!1,this.delay=1e3,this.textPlacement="Bottom",this._isBusy=!1,this._keydownHandler=this._handleKeydown.bind(this),this._preventEventHandler=this._preventEvent.bind(this)}onEnterDOM(){this.addEventListener("keydown",this._keydownHandler,{capture:!0}),this.addEventListener("keyup",this._preventEventHandler,{capture:!0}),IZ()&&this.setAttribute("desktop","")}onExitDOM(){this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this.removeEventListener("keydown",this._keydownHandler,!0),this.removeEventListener("keyup",this._preventEventHandler,!0)}get ariaTitle(){return Y3.i18nBundle.getText(x1)}get labelId(){return this.text?`${this._id}-label`:void 0}get classes(){return{root:{"ui5-busy-indicator-root":!0}}}get textPosition(){return{top:this.text&&this.textPlacement===$3.Top,bottom:this.text&&this.textPlacement===$3.Bottom}}onBeforeRendering(){this.active?this._isBusy||this._busyTimeoutId||(this._busyTimeoutId=setTimeout((()=>{delete this._busyTimeoutId,this._isBusy=!0}),Math.max(0,this.delay))):(this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this._isBusy=!1)}_handleKeydown(e){this._isBusy&&(e.stopImmediatePropagation(),N0(e)&&(this.focusForward=!0,this.shadowRoot.querySelector("[data-ui5-focus-redirect]").focus(),this.focusForward=!1))}_preventEvent(e){this._isBusy&&e.stopImmediatePropagation()}_redirectFocus(e){this.focusForward||(e.preventDefault(),this.shadowRoot.querySelector(".ui5-busy-indicator-busy-area").focus())}};K3([_0()],Z3.prototype,"text",void 0),K3([_0()],Z3.prototype,"size",void 0),K3([_0({type:Boolean})],Z3.prototype,"active",void 0),K3([_0({type:Number})],Z3.prototype,"delay",void 0),K3([_0()],Z3.prototype,"textPlacement",void 0),K3([_0({type:Boolean})],Z3.prototype,"_isBusy",void 0),K3([f1("@ui5/webcomponents")],Z3,"i18nBundle",void 0),Z3=Y3=K3([m0({tag:"ui5-busy-indicator",languageAware:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/BusyIndicator.css.ts",content:':host(:not([hidden])){display:inline-block}:host([_is-busy]){color:var(--_ui5-v2-4-0_busy_indicator_color)}:host([size="S"]) .ui5-busy-indicator-root{min-width:1.625rem;min-height:.5rem}:host([size="S"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:1.75rem}:host([size="S"]) .ui5-busy-indicator-circle{width:.5rem;height:.5rem}:host([size="S"]) .ui5-busy-indicator-circle:first-child,:host([size="S"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.0625rem}:host(:not([size])) .ui5-busy-indicator-root,:host([size="M"]) .ui5-busy-indicator-root{min-width:3.375rem;min-height:1rem}:host([size="M"]) .ui5-busy-indicator-circle:first-child,:host([size="M"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.1875rem}:host(:not([size])[text]:not([text=""])) .ui5-busy-indicator-root,:host([size="M"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:2.25rem}:host(:not([size])) .ui5-busy-indicator-circle,:host([size="M"]) .ui5-busy-indicator-circle{width:1rem;height:1rem}:host([size="L"]) .ui5-busy-indicator-root{min-width:6.5rem;min-height:2rem}:host([size="L"]) .ui5-busy-indicator-circle:first-child,:host([size="L"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.25rem}:host([size="L"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:3.25rem}:host([size="L"]) .ui5-busy-indicator-circle{width:2rem;height:2rem}.ui5-busy-indicator-root{display:flex;justify-content:center;align-items:center;position:relative;background-color:inherit;height:inherit;border-radius:inherit}.ui5-busy-indicator-busy-area{position:absolute;z-index:99;inset:0;display:flex;justify-content:center;align-items:center;background-color:inherit;flex-direction:column;border-radius:inherit}:host(:not(:empty)) .ui5-busy-indicator-busy-area{background-color:var(--_ui5-v2-4-0_busy_indicator_block_layer)}:host([desktop]) .ui5-busy-indicator-busy-area:focus,.ui5-busy-indicator-busy-area:focus-visible{outline:var(--_ui5-v2-4-0_busy_indicator_focus_outline);outline-offset:-2px}.ui5-busy-indicator-circles-wrapper{line-height:0}.ui5-busy-indicator-circle{display:inline-block;background-color:currentColor;border-radius:50%}.ui5-busy-indicator-circle:before{content:"";width:100%;height:100%;border-radius:100%}.circle-animation-0{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11)}.circle-animation-1{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.2s}.circle-animation-2{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.4s}.ui5-busy-indicator-text{width:100%;text-align:center}:host([text-placement="Top"]) .ui5-busy-indicator-text{margin-bottom:.5rem}:host(:not([text-placement])) .ui5-busy-indicator-text,:host([text-placement="Bottom"]) .ui5-busy-indicator-text{margin-top:.5rem}@keyframes grow{0%,50%,to{-webkit-transform:scale(.5);-moz-transform:scale(.5);transform:scale(.5)}25%{-webkit-transform:scale(1);-moz-transform:scale(1);transform:scale(1)}}\n'},renderer:d1,template:function(e,t,i){return u1`<div class="${a1(this.classes.root)}">${this._isBusy?G3.call(this,e,t,i):void 0}<slot></slot>${this._isBusy?X3.call(this,e,t,i):void 0}</div> `},dependencies:[d3]})],Z3),Z3.define();const J3=Z3;function e6(e,t,i){return u1`<slot name="header" />`}function t6(e,t,i){return u1`<header id="${c1(this.headerID)}" class="ui5-list-header">${c1(this.headerText)}</header>`}function i6(e,t,i){return u1`<div id="${c1(this._id)}-before" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function n6(e,t,i){return u1`<li tabindex="0" id="${c1(this._id)}-nodata" class="ui5-list-nodata"><div id="${c1(this._id)}-nodata-text" class="ui5-list-nodata-text">${c1(this.noDataText)}</div></li>`}function r6(e,t,i){return u1`<div growing-button part="growing-button"><div part="growing-button-inner" tabindex="0" role="button" id="${c1(this._id)}-growing-btn" aria-labelledby="${c1(this._id)}-growingButton-text" ?active="${this._loadMoreActive}" @click="${this._onLoadMoreClick}" @keydown="${this._onLoadMoreKeydown}" @keyup="${this._onLoadMoreKeyup}" @mousedown="${this._onLoadMoreMousedown}" @mouseup="${this._onLoadMoreMouseup}" growing-button-inner>${this.loading?o6.call(this,e,t,i):void 0}<span id="${c1(this._id)}-growingButton-text" growing-button-text>${c1(this._growingButtonText)}</span></div></div>`}function o6(e,t,i){return i?u1`<${p1("ui5-busy-indicator",t,i)} delay="${c1(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></${p1("ui5-busy-indicator",t,i)}>`:u1`<ui5-busy-indicator delay="${c1(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></ui5-busy-indicator>`}function s6(e,t,i){return u1`<footer id="${c1(this._id)}-footer" class="ui5-list-footer">${c1(this.footerText)}</footer>`}function a6(e,t,i){return u1`<div id="${c1(this._id)}-after" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function l6(e,t,i){return i?u1`<${p1("ui5-li-group-header",t,i)} ?focused="${this.focused}" part="header">${this.hasFormattedHeader?c6.call(this,e,t,i):u6.call(this,e,t,i)}</${p1("ui5-li-group-header",t,i)}>`:u1`<ui5-li-group-header ?focused="${this.focused}" part="header">${this.hasFormattedHeader?c6.call(this,e,t,i):u6.call(this,e,t,i)}</ui5-li-group-header>`}function c6(e,t,i){return u1`<slot name="header"></slot>`}function u6(e,t,i){return u1`${c1(this.headerText)}`}var h6;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),bJ("edit",{pathData:"M475 104q5 7 5 12 0 6-5 11L150 453q-4 4-8 4L32 480l22-110q0-5 4-9L384 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L84 381l46 46z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("edit",{pathData:"M505 94q7 9 7 18 0 11-6 17L130 505q-7 7-18 7H26q-11 0-18.5-7.5T0 486v-86q1-5 1.5-8.5T6 384L382 7q9-7 18-7t18 7zM364 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(e){e.None="None",e.Positive="Positive",e.Critical="Critical",e.Negative="Negative",e.Information="Information"}(h6||(h6={}));const d6=h6;var p6;!function(e){e.Inactive="Inactive",e.Active="Active",e.Detail="Detail",e.Navigation="Navigation"}(p6||(p6={}));const f6=p6,g6=(e,t)=>{const i=t||[];return e&&e.forEach((e=>{if(e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE)return;const t=e;if(!t.hasAttribute("data-sap-no-tab-ref"))if((e=>{if(!e||e.hasAttribute("data-sap-no-tab-ref")||Q5(e))return!1;const t=e.getAttribute("tabindex");if(null!=t)return parseInt(t)>=0;const i=e.nodeName.toLowerCase();return!("a"!==i&&!/^(input|select|textarea|button|object)$/.test(i)||e.disabled)})(t)&&i.push(t),"SLOT"===t.tagName)g6(t.assignedNodes(),i);else{const e=t.shadowRoot?t.shadowRoot.children:t.children;g6([...e],i)}})),i};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var m6=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let _6=class extends f0{constructor(){super(...arguments),this.selected=!1,this.movable=!1,this.hasBorder=!1,this.disabled=!1,this.focused=!1,this.actionable=!1}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}onBeforeRendering(){this.actionable=!0}_onfocusin(e){this.fireDecoratorEvent("_request-tabindex-change",e),e.target===this.getFocusDomRef()&&this.fireDecoratorEvent("_focused",e)}_onkeydown(e){return N0(e)?this._handleTabNext(e):z0(e)?this._handleTabPrevious(e):void(this.getFocusDomRef().matches(":has(:focus-within)")||(A0(e)&&e.preventDefault(),b0(e)&&this.fireItemPress(e)))}_onkeyup(e){this.getFocusDomRef().matches(":has(:focus-within)")||A0(e)&&this.fireItemPress(e)}_onclick(e){this.getFocusDomRef().matches(":has(:focus-within)")||this.fireItemPress(e)}fireItemPress(e){!this.disabled&&this._pressable&&(b0(e)&&e.preventDefault(),this.fireDecoratorEvent("_press",{item:this,selected:this.selected,key:e.key}))}_handleTabNext(e){this.shouldForwardTabAfter()&&(this.fireDecoratorEvent("_forward-after")||e.preventDefault())}_handleTabPrevious(e){const t=e.target;this.shouldForwardTabBefore(t)&&this.fireDecoratorEvent("_forward-before")}shouldForwardTabAfter(){const e=(t=this.getFocusDomRef(),g6([...t.children]));var t;return 0===e.length||e[e.length-1]===X0()}shouldForwardTabBefore(e){return this.getFocusDomRef()===e}get classes(){return{main:{"ui5-li-root":!0,"ui5-li--focusable":this._focusable}}}get _ariaDisabled(){return!!this.disabled||void 0}get _focusable(){return!this.disabled}get _pressable(){return!0}get hasConfigurableMode(){return!1}get _effectiveTabIndex(){return this._focusable?this.selected?0:this.forcedTabIndex:-1}};m6([_0({type:Boolean})],_6.prototype,"selected",void 0),m6([_0({type:Boolean})],_6.prototype,"movable",void 0),m6([_0({type:Boolean})],_6.prototype,"hasBorder",void 0),m6([_0()],_6.prototype,"forcedTabIndex",void 0),m6([_0({type:Boolean})],_6.prototype,"disabled",void 0),m6([_0({type:Boolean})],_6.prototype,"focused",void 0),m6([_0({type:Boolean})],_6.prototype,"actionable",void 0),_6=m6([m0({renderer:d1,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemBase.css.ts",content:':host{box-sizing:border-box;height:var(--_ui5-v2-4-0_list_item_base_height);background-color:var(--ui5-v2-4-0-listitem-background-color);border-bottom:.0625rem solid transparent}:host(:not([hidden])){display:block}:host([disabled]){opacity:var(--_ui5-v2-4-0-listitembase_disabled_opacity);pointer-events:none}:host([actionable]:not([disabled]):not([ui5-li-group-header])){cursor:pointer}:host([has-border]){border-bottom:var(--ui5-v2-4-0-listitem-border-bottom)}:host([selected]){background-color:var(--sapList_SelectionBackgroundColor);border-bottom:var(--ui5-v2-4-0-listitem-selected-border-bottom)}:host([actionable]:not([active]):not([selected]):not([ui5-li-group-header]):hover){background-color:var(--sapList_Hover_Background)}:host([actionable][selected]:not([active],[data-moving]):hover){background-color:var(--sapList_Hover_SelectionBackground)}:host([active][actionable]:not([data-moving])),:host([active][actionable][selected]:not([data-moving])){background-color:var(--sapList_Active_Background)}:host([desktop]:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root.ui5-li--focusable:after,:host(:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus-visible:after,:host([desktop]:not([data-moving])) .ui5-li-root .ui5-li-content:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root .ui5-li-content:after,:host(:not([data-moving])) .ui5-li-root .ui5-li-content:focus-visible:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none}.ui5-li-root{position:relative;display:flex;align-items:center;width:100%;height:100%;padding:var(--_ui5-v2-4-0_list_item_base_padding);box-sizing:border-box;background-color:inherit}.ui5-li-root.ui5-li--focusable{outline:none}.ui5-li-content{display:flex;align-items:center;flex:auto;overflow:hidden;max-width:100%;font-family:"72override",var(--sapFontFamily);color:var(--sapList_TextColor)}.ui5-li-content .ui5-li-title{color:var(--sapList_TextColor);font-size:var(--_ui5-v2-4-0_list_item_title_size)}.ui5-li-text-wrapper{display:flex;flex-direction:row;justify-content:space-between;flex:auto;min-width:1px;line-height:normal}\n'},{packageName:"@ui5/webcomponents",fileName:"themes/DraggableElement.css.ts",content:"[draggable=true]{cursor:grab!important}[draggable=true][data-moving]{cursor:grabbing!important;opacity:var(--sapContent_DisabledOpacity)}\n"}]}),v0("_request-tabindex-change",{bubbles:!0}),v0("_press",{bubbles:!0}),v0("_focused",{bubbles:!0}),v0("_forward-after",{bubbles:!0,cancelable:!0}),v0("_forward-before",{bubbles:!0})],_6);const v6=_6;class y6{static hasGroup(e){return this.groups.has(e)}static getGroup(e){return this.groups.get(e)}static getCheckedRadioFromGroup(e){return this.checkedRadios.get(e)}static removeGroup(e){return this.checkedRadios.delete(e),this.groups.delete(e)}static addToGroup(e,t){this.hasGroup(t)?(this.enforceSingleSelection(e,t),this.getGroup(t)&&this.getGroup(t).push(e)):this.createGroup(e,t),this.updateTabOrder(t)}static removeFromGroup(e,t){const i=this.getGroup(t);if(!i)return;const n=this.getCheckedRadioFromGroup(t);i.forEach(((t,i,n)=>{if(e._id===t._id)return n.splice(i,1)})),n===e&&this.checkedRadios.set(t,null),i.length||this.removeGroup(t),this.updateTabOrder(t)}static createGroup(e,t){e.checked&&this.checkedRadios.set(t,e),this.groups.set(t,[e])}static selectNextItem(e,t){const i=this.getGroup(t);if(!i)return;const n=i.length,r=i.indexOf(e);if(n<=1)return;const o=this._nextSelectable(r,i);o&&this.updateSelectionInGroup(o,t)}static updateFormValidity(e){const t=this.getGroup(e);if(!t)return;const i=t.some((e=>e.required)),n=t.some((e=>e.checked));t.forEach((e=>{e._groupChecked=n,e._groupRequired=i}))}static updateTabOrder(e){const t=this.getGroup(e);if(!t)return;const i=t.some((e=>e.checked));t.filter((e=>!e.disabled)).forEach(((e,t)=>{e._tabIndex=i?e.checked?"0":"-1":0===t?"0":"-1"}))}static selectPreviousItem(e,t){const i=this.getGroup(t);if(!i)return;const n=i.length,r=i.indexOf(e);if(n<=1)return;const o=this._previousSelectable(r,i);o&&this.updateSelectionInGroup(o,t)}static selectItem(e,t){this.updateSelectionInGroup(e,t),this.updateTabOrder(t)}static updateSelectionInGroup(e,t){const i=this.getCheckedRadioFromGroup(t);i&&this._deselectRadio(i),this._selectRadio(e),this.checkedRadios.set(t,e)}static _deselectRadio(e){e&&(e.checked=!1)}static _selectRadio(e){e&&(e.focus(),e.checked=!0,e._checked=!0,e.fireDecoratorEvent("change"))}static _nextSelectable(e,t){if(!t)return null;let i=null;if(e===t.length-1){if(t[0].disabled||t[0].readonly)return this._nextSelectable(1,t);i=t[0]}else{if(t[e+1].disabled||t[e+1].readonly)return this._nextSelectable(e+1,t);i=t[e+1]}return i}static _previousSelectable(e,t){const i=t.length;let n=null;if(0===e){if(t[i-1].disabled||t[i-1].readonly)return this._previousSelectable(i-1,t);n=t[i-1]}else{if(t[e-1].disabled||t[e-1].readonly)return this._previousSelectable(e-1,t);n=t[e-1]}return n}static enforceSingleSelection(e,t){const i=this.getCheckedRadioFromGroup(t);e.checked?i?e!==i&&(this._deselectRadio(i),this.checkedRadios.set(t,e)):this.checkedRadios.set(t,e):e===i&&this.checkedRadios.set(t,null),this.updateTabOrder(t),this.updateFormValidity(t)}static get groups(){return this._groups||(this._groups=new Map),this._groups}static get checkedRadios(){return this._checkedRadios||(this._checkedRadios=new Map),this._checkedRadios}}function b6(e,t,i){return i?u1`<${p1("ui5-label",t,i)} id="${c1(this._id)}-label" class="ui5-radio-label" for="${c1(this._id)}" wrapping-type="${c1(this.wrappingType)}">${c1(this.text)}</${p1("ui5-label",t,i)}>`:u1`<ui5-label id="${c1(this._id)}-label" class="ui5-radio-label" for="${c1(this._id)}" wrapping-type="${c1(this.wrappingType)}">${c1(this.text)}</ui5-label>`}function A6(e,t,i){return u1`<span id="${c1(this._id)}-descr" class="ui5-hidden-text">${c1(this.valueStateText)}</span>`}function w6(e,t,i){return h1`<circle part="outer-ring" class="ui5-radio-svg-outer" cx="50%" cy="50%" r="50%" /><circle part="inner-ring" class="ui5-radio-svg-inner" cx="50%" cy="50%" />`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var x6,S6=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let C6,E6=!1,T6=x6=class extends f0{get formValidityMessage(){return x6.i18nBundle.getText(R2)}get formValidity(){return{valueMissing:this._groupRequired&&!this._groupChecked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?this.value||"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.required=!1,this.checked=!1,this.valueState="None",this.value="",this.wrappingType="Normal",this.active=!1,this._groupChecked=!1,this._groupRequired=!1,this._name="",this._checked=!1,this._deactivate=()=>{C6&&(C6.active=!1)},E6||(document.addEventListener("mouseup",this._deactivate),E6=!0)}onAfterRendering(){this.syncGroup()}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}onExitDOM(){this.syncGroup(!0)}syncGroup(e){const t=this._name,i=this.name,n=this._checked,r=this.checked;e&&y6.removeFromGroup(this,t),i!==t?(t&&y6.removeFromGroup(this,t),i&&y6.addToGroup(this,i)):i&&this.isConnected&&y6.enforceSingleSelection(this,i),this.name&&r!==n&&y6.updateTabOrder(this.name),this._name=this.name||"",this._checked=this.checked}_onclick(){return this.toggle()}_handleDown(e){const t=this.name;t&&(e.preventDefault(),y6.selectNextItem(this,t))}_handleUp(e){const t=this.name;t&&(e.preventDefault(),y6.selectPreviousItem(this,t))}_onkeydown(e){if(A0(e))return this.active=!0,e.preventDefault();if(b0(e))return this.active=!0,this.toggle();const t="rtl"===this.effectiveDir;(E0(e)||!t&&S0(e)||t&&x0(e))&&this._handleDown(e),(C0(e)||!t&&x0(e)||t&&S0(e))&&this._handleUp(e)}_onkeyup(e){A0(e)&&this.toggle(),this.active=!1}_onmousedown(){this.active=!0,C6=this}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}toggle(){return this.canToggle()?this.name?(y6.selectItem(this,this.name),this):(this.checked=!this.checked,this.fireDecoratorEvent("change"),this):this}canToggle(){return!(this.disabled||this.readonly||this.checked)}get classes(){return{inner:{"ui5-radio-inner--hoverable":!this.disabled&&!this.readonly&&IZ()}}}get effectiveAriaDisabled(){return this.disabled?"true":null}get ariaLabelText(){return[z2(this),this.text].filter(Boolean).join(" ")}get effectiveAriaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==m3.None}get valueStateText(){switch(this.valueState){case m3.Negative:return x6.i18nBundle.getText(_2);case m3.Critical:return x6.i18nBundle.getText(v2);case m3.Positive:return x6.i18nBundle.getText(b2);case m3.Information:return x6.i18nBundle.getText(y2);default:return""}}get effectiveTabIndex(){const e=this.getAttribute("tabindex");return this.disabled?"-1":this.name?this._tabIndex:e||"0"}};S6([_0({type:Boolean})],T6.prototype,"disabled",void 0),S6([_0({type:Boolean})],T6.prototype,"readonly",void 0),S6([_0({type:Boolean})],T6.prototype,"required",void 0),S6([_0({type:Boolean})],T6.prototype,"checked",void 0),S6([_0()],T6.prototype,"text",void 0),S6([_0()],T6.prototype,"valueState",void 0),S6([_0()],T6.prototype,"name",void 0),S6([_0()],T6.prototype,"value",void 0),S6([_0()],T6.prototype,"wrappingType",void 0),S6([_0()],T6.prototype,"accessibleName",void 0),S6([_0()],T6.prototype,"accessibleNameRef",void 0),S6([_0()],T6.prototype,"_tabIndex",void 0),S6([_0({type:Boolean})],T6.prototype,"active",void 0),S6([_0({type:Boolean,noAttribute:!0})],T6.prototype,"_groupChecked",void 0),S6([_0({type:Boolean,noAttribute:!0})],T6.prototype,"_groupRequired",void 0),S6([f1("@ui5/webcomponents")],T6,"i18nBundle",void 0),T6=x6=S6([m0({tag:"ui5-radio-button",languageAware:!0,formAssociated:!0,renderer:d1,template:function(e,t,i){return u1`<div class="ui5-radio-root" role="radio" aria-checked="${c1(this.checked)}" aria-disabled="${c1(this.effectiveAriaDisabled)}" aria-describedby="${c1(this.effectiveAriaDescribedBy)}" aria-label="${c1(this.ariaLabelText)}" tabindex="${c1(this.effectiveTabIndex)}" @click="${this._onclick}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @focusout="${this._onfocusout}"><div class='ui5-radio-inner ${a1(this.classes.inner)}'><svg class="ui5-radio-svg" focusable="false" aria-hidden="true">${w6.call(this,e,t,i)}</svg><input type='radio' ?required="${this.required}" ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.effectiveAriaDisabled}" name="${c1(this.name)}"  data-sap-no-tab-ref/></div>${this.text?b6.call(this,e,t,i):void 0}${this.hasValueState?A6.call(this,e,t,i):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/RadioButton.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_radio_button_min_width);max-width:100%;text-overflow:ellipsis;overflow:hidden;color:var(--_ui5-v2-4-0_radio_button_color);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([disabled])) .ui5-radio-root{cursor:pointer}:host([checked]){color:var(--_ui5-v2-4-0_radio_button_checked_fill)}:host([checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_inner_ring_color)}:host([checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_color)}:host([disabled]) .ui5-radio-root{color:var(--_ui5-v2-4-0_radio_button_color);opacity:var(--sapContent_DisabledOpacity)}:host([disabled][checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_color)}:host(:not([disabled])[desktop]) .ui5-radio-root:focus:before,:host(:not([disabled])) .ui5-radio-root:focus-visible:before{content:"";display:var(--_ui5-v2-4-0_radio_button_focus_outline);position:absolute;inset:var(--_ui5-v2-4-0_radio_button_focus_dist);pointer-events:none;border:var(--_ui5-v2-4-0_radio_button_border_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_hover_color)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])[checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}.ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer,:host([checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill)}:host([active][checked]:not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}:host([active]:not([checked]):not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_active_color)}:host([text]) .ui5-radio-root{padding-inline-end:var(--_ui5-v2-4-0_radio_button_border_width)}:host([text][desktop]) .ui5-radio-root:focus:before,:host([text]) .ui5-radio-root:focus-visible:before{inset-inline-end:0px}:host([text]) .ui5-radio-inner{padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label)}:host([checked][readonly]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_read_only_inner_ring_color)}:host([readonly]) .ui5-radio-root .ui5-radio-svg-outer{fill:var(--sapField_ReadOnly_Background);stroke:var(--sapField_ReadOnly_BorderColor);stroke-dasharray:var(--_ui5-v2-4-0_radio_button_read_only_border_type);stroke-width:var(--_ui5-v2-4-0_radio_button_read_only_border_width)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-svg-outer{stroke-width:var(--sapField_InvalidBorderWidth)}:host([value-state="Information"]) .ui5-radio-svg-outer{stroke-width:var(--_ui5-v2-4-0_radio_button_information_border_width)}:host([value-state="Negative"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_error_fill)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InvalidColor);fill:var(--sapField_InvalidBackground)}:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_error)}:host([value-state="Critical"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_warning_fill)}:host([value-state="Critical"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_WarningColor);fill:var(--sapField_WarningBackground)}:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_warning)}:host([value-state="Positive"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_success_fill)}:host([value-state="Positive"]) .ui5-radio-svg-outer,:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_SuccessColor);fill:var(--sapField_SuccessBackground)}:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_success)}:host([value-state="Information"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_information_fill)}:host([value-state="Information"]) .ui5-radio-svg-outer,:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InformationColor);fill:var(--sapField_InformationBackground)}:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_information)}:host([value-state="Negative"]) .ui5-radio-root,:host([value-state="Critical"]) .ui5-radio-root,:host([value-state="Information"]) .ui5-radio-root{stroke-dasharray:var(--_ui5-v2-4-0_radio_button_warning_error_border_dash)}.ui5-radio-root{height:auto;position:relative;display:inline-flex;flex-wrap:nowrap;outline:none;max-width:100%;box-sizing:border-box;border:var(--_ui5-v2-4-0_radio_button_border);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}.ui5-radio-inner{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding);flex-shrink:0;height:var(--_ui5-v2-4-0_radio_button_inner_size);font-size:1rem;pointer-events:none;vertical-align:top}.ui5-radio-inner{outline:none}.ui5-radio-inner input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit;margin:0}[ui5-label].ui5-radio-label{display:flex;align-items:center;padding-inline-end:var(--_ui5-v2-4-0_radio_button_label_offset);padding-block:var(--_ui5-v2-4-0_radio_button_label_side_padding);vertical-align:top;max-width:100%;pointer-events:none;color:var(--_ui5-v2-4-0_radio_button_label_color);overflow-wrap:break-word}:host([wrapping-type="None"][text]) .ui5-radio-root{height:var(--_ui5-v2-4-0_radio_button_height)}:host([wrapping-type="None"][text]) [ui5-label].ui5-radio-label{text-overflow:ellipsis;overflow:hidden}.ui5-radio-svg{height:var(--_ui5-v2-4-0_radio_button_svg_size);width:var(--_ui5-v2-4-0_radio_button_svg_size);overflow:visible;pointer-events:none}.ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_outer_ring_bg);stroke:currentColor;stroke-width:var(--_ui5-v2-4-0_radio_button_outer_ring_width)}.ui5-radio-svg-inner{fill:none;r:var(--_ui5-v2-4-0_radio_button_inner_ring_radius)}.ui5-radio-svg-outer,.ui5-radio-svg-inner{flex-shrink:0}:host(.ui5-li-singlesel-radiobtn) .ui5-radio-root .ui5-radio-inner .ui5-radio-svg-outer{fill:var(--sapList_Background)}\n'},dependencies:[d3]}),v0("change",{bubbles:!0})],T6),T6.define();const I6=T6;function M6(e,t,i){return i?u1`<div class="ui5-checkbox-display-only-icon-inner"><${p1("ui5-icon",t,i)} aria-hidden="true" name=${c1(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></${p1("ui5-icon",t,i)}></div>`:u1`<div class="ui5-checkbox-display-only-icon-inner"><ui5-icon aria-hidden="true" name=${c1(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></ui5-icon></div>`}function k6(e,t,i){return u1`<div id="${c1(this._id)}-CbBg" class="ui5-checkbox-inner">${this.isCompletelyChecked?B6.call(this,e,t,i):void 0}</div>`}function B6(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></ui5-icon>`}function R6(e,t,i){return i?u1`<${p1("ui5-label",t,i)} part="label" id="${c1(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${c1(this.wrappingType)}">${c1(this.text)}</${p1("ui5-label",t,i)}>`:u1`<ui5-label part="label" id="${c1(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${c1(this.wrappingType)}">${c1(this.text)}</ui5-label>`}function P6(e,t,i){return u1`<span id="${c1(this._id)}-descr" class="ui5-hidden-text">${c1(this.valueStateText)}</span>`}bJ("accept",{pathData:"M456 94q5 5 5 11 0 4-2 8L237 439q-4 8-8.5 8.5t-5.5.5q-7 0-12-5L60 276q-5-5-5-10l.5-3.5L61 254l25-25q6-6 12-6t11 6l96 96q5 5 12 5l4.5-.5 8.5-8.5L405 72q4-7 8.5-7.5t5.5-.5q6 0 11 4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("accept",{pathData:"M187 416q-12 0-20-9L71 299q-7-7-7-17 0-11 7.5-18.5T90 256q12 0 19 9l77 87 217-247q8-9 19-9t18.5 7.5T448 122q0 10-6 16L206 407q-7 9-19 9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("complete",{pathData:"M492 25q4 4 4 9 0 3-2 7L309 313q-3 6-7 6.5t-5 .5q-6 0-10-4L162 177q-4-5-4-9 0-5 4-9l21-21q5-5 10-5t9 5l80 80q4 4 9 4 1 0 5-.5t7-7.5L449 7q3-6 7-6.5t5-.5q5 0 9 4zm-60 295h32v128q0 14-9.5 23t-22.5 9H48q-14 0-23-9t-9-23V64q0-13 9-22.5T48 32h128v32H48v384h384V320z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("complete",{pathData:"M438 224q11 0 18.5 7.5T464 250v140q0 38-26 64t-64 26H106q-38 0-64-26t-26-64V122q0-38 26-64t64-26h237q11 0 18 7.5t7 18.5-7 18-18 7H106q-16 0-27.5 11.5T67 122v268q0 16 11.5 27.5T106 429h268q16 0 27.5-11.5T413 390V250q0-11 7-18.5t18-7.5zm32-192q11 0 18.5 7.5T496 58t-7 17L257 312q-6 8-18 8-10 0-18-8l-70-71q-7-7-7-18t7.5-18 18.5-7 18 7l51 53L452 40q8-8 18-8z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("border",{pathData:"M448 32q13 0 22.5 9t9.5 23v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-14 9-23t23-9h384zm0 32H64v384h384V64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("border",{pathData:"M390 480H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268q38 0 64 26t26 64v268q0 38-26 64t-64 26zM122 83q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122q0-17-11-28t-28-11H122z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("tri-state",{pathData:"M448 32q13 0 22.5 9.5T480 64v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-13 9-22.5T64 32h384zm0 32H64v384h384V64zM160 345V169q0-8 8-8h176q8 0 8 8v176q0 8-8 8H168q-8 0-8-8z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("tri-state",{pathData:"M390 32q38 0 64 26t26 64v268q0 38-26 64t-64 26H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268zm39 90q0-17-11-28t-28-11H122q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122zm-77 38v192H160V160h192z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var D6,L6=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let O6,F6=!1,N6=D6=class extends f0{get formValidityMessage(){return D6.i18nBundle.getText(k2)}get formValidity(){return{valueMissing:this.required&&!this.checked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.displayOnly=!1,this.required=!1,this.indeterminate=!1,this.checked=!1,this.valueState="None",this.wrappingType="Normal",this.active=!1,this._deactivate=()=>{O6&&(O6.active=!1)},F6||(document.addEventListener("mouseup",this._deactivate),F6=!0)}onEnterDOM(){IZ()&&this.setAttribute("desktop","")}_onclick(){this.toggle()}_onmousedown(){this.readonly||this.disabled||(this.active=!0,O6=this)}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}_onkeydown(e){A0(e)&&e.preventDefault(),this.readonly||this.disabled||(b0(e)&&this.toggle(),this.active=!0)}_onkeyup(e){A0(e)&&this.toggle(),this.active=!1}toggle(){if(this.canToggle()){const e={checked:this.checked,indeterminate:this.indeterminate};this.indeterminate?(this.indeterminate=!1,this.checked=!0):this.checked=!this.checked;const t=!this.fireDecoratorEvent("change"),i=!this.fireDecoratorEvent("value-changed");(t||i)&&(this.checked=e.checked,this.indeterminate=e.indeterminate)}return this}canToggle(){return!(this.disabled||this.readonly||this.displayOnly)}valueStateTextMappings(){return{Negative:D6.i18nBundle.getText(_2),Critical:D6.i18nBundle.getText(v2),Positive:D6.i18nBundle.getText(b2)}}get ariaLabelText(){return z2(this)}get classes(){return{main:{"ui5-checkbox--hoverable":!this.disabled&&!this.readonly&&IZ()}}}get ariaReadonly(){return this.readonly||this.displayOnly?"true":void 0}get effectiveAriaDisabled(){return this.disabled?"true":void 0}get effectiveAriaChecked(){return this.indeterminate&&this.checked?"mixed":this.checked}get ariaLabelledBy(){if(!this.ariaLabelText)return this.text?`${this._id}-label`:void 0}get ariaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==m3.None}get valueStateText(){if(this.valueState!==m3.None&&this.valueState!==m3.Information)return this.valueStateTextMappings()[this.valueState]}get effectiveTabIndex(){const e=this.getAttribute("tabindex");return this.disabled||this.displayOnly?void 0:e||"0"}get isCompletelyChecked(){return this.checked&&!this.indeterminate}get isDisplayOnly(){return this.displayOnly&&!this.disabled}get displayOnlyIcon(){return this.isCompletelyChecked?"complete":this.checked&&this.indeterminate?"tri-state":"border"}};L6([_0()],N6.prototype,"accessibleNameRef",void 0),L6([_0()],N6.prototype,"accessibleName",void 0),L6([_0({type:Boolean})],N6.prototype,"disabled",void 0),L6([_0({type:Boolean})],N6.prototype,"readonly",void 0),L6([_0({type:Boolean})],N6.prototype,"displayOnly",void 0),L6([_0({type:Boolean})],N6.prototype,"required",void 0),L6([_0({type:Boolean})],N6.prototype,"indeterminate",void 0),L6([_0({type:Boolean})],N6.prototype,"checked",void 0),L6([_0()],N6.prototype,"text",void 0),L6([_0()],N6.prototype,"valueState",void 0),L6([_0()],N6.prototype,"wrappingType",void 0),L6([_0()],N6.prototype,"name",void 0),L6([_0({type:Boolean})],N6.prototype,"active",void 0),L6([f1("@ui5/webcomponents")],N6,"i18nBundle",void 0),N6=D6=L6([m0({tag:"ui5-checkbox",languageAware:!0,formAssociated:!0,renderer:d1,template:function(e,t,i){return u1`<div class="ui5-checkbox-root ${a1(this.classes.main)}" role="checkbox" part="root" aria-checked="${c1(this.effectiveAriaChecked)}" aria-readonly="${c1(this.ariaReadonly)}" aria-disabled="${c1(this.effectiveAriaDisabled)}" aria-label="${c1(this.ariaLabelText)}" aria-labelledby="${c1(this.ariaLabelledBy)}" aria-describedby="${c1(this.ariaDescribedBy)}" aria-required="${c1(this.required)}" tabindex="${c1(this.effectiveTabIndex)}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click="${this._onclick}" @focusout="${this._onfocusout}">${this.isDisplayOnly?M6.call(this,e,t,i):k6.call(this,e,t,i)}<input id="${c1(this._id)}-CB" type='checkbox' ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.disabled}" tabindex="-1" aria-hidden="true" data-sap-no-tab-ref />${this.text?R6.call(this,e,t,i):void 0}${this.hasValueState?P6.call(this,e,t,i):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/CheckBox.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host(:not([hidden])){display:inline-block}:host{overflow:hidden;max-width:100%;outline:none;border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);transition:var(--_ui5-v2-4-0_checkbox_transition);cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host([disabled]){cursor:default}:host([disabled]) .ui5-checkbox-root{opacity:var(--_ui5-v2-4-0_checkbox_disabled_opacity)}:host([disabled]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_disabled_border_color)}:host([disabled]) .ui5-checkbox-label{color:var(--_ui5-v2-4-0_checkbox_disabled_label_color)}:host([readonly]:not([value-state="Critical"]):not([value-state="Negative"])) .ui5-checkbox-inner{background:var(--sapField_ReadOnly_Background);border:var(--_ui5-v2-4-0_checkbox_inner_readonly_border);color:var(--sapField_TextColor)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root{min-height:auto;box-sizing:border-box;align-items:flex-start;padding-top:var(--_ui5-v2-4-0_checkbox_root_side_padding);padding-bottom:var(--_ui5-v2-4-0_checkbox_root_side_padding)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root .ui5-checkbox-label{overflow-wrap:break-word;align-self:center}:host([desktop][text]:not([wrapping-type="None"])) .ui5-checkbox-root:focus:before,.ui5-checkbox-root[text]:focus-visible:before{inset-block:var(--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block)}:host([value-state="Negative"]) .ui5-checkbox-inner,:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InvalidBackground);border:var(--_ui5-v2-4-0_checkbox_inner_error_border);color:var(--sapField_InvalidColor)}:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_error_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-inner,:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_WarningBackground);border:var(--_ui5-v2-4-0_checkbox_inner_warning_border);color:var(--_ui5-v2-4-0_checkbox_inner_warning_color)}:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_warning_background_hover)}:host([value-state="Information"]) .ui5-checkbox-inner,:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InformationBackground);border:var(--_ui5-v2-4-0_checkbox_inner_information_border);color:var(--_ui5-v2-4-0_checkbox_inner_information_color)}:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_information_background_hover)}:host([value-state="Positive"]) .ui5-checkbox-inner,:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_SuccessBackground);border:var(--_ui5-v2-4-0_checkbox_inner_success_border);color:var(--sapField_SuccessColor)}:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_success_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-icon,:host([value-state="Critical"][indeterminate]) .ui5-checkbox-inner:after{color:var(--_ui5-v2-4-0_checkbox_checkmark_warning_color)}.ui5-checkbox-root{position:relative;display:inline-flex;align-items:center;width:100%;min-height:var(--_ui5-v2-4-0_checkbox_width_height);min-width:var(--_ui5-v2-4-0_checkbox_width_height);padding:0 var(--_ui5-v2-4-0_checkbox_wrapper_padding);outline:none;transition:var(--_ui5-v2-4-0_checkbox_transition);border:var(--_ui5-v2-4-0_checkbox_default_focus_border);border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);box-sizing:border-box}:host([desktop]) .ui5-checkbox-root:focus:before,.ui5-checkbox-root:focus-visible:before{display:var(--_ui5-v2-4-0_checkbox_focus_outline_display);content:"";position:absolute;inset-inline:var(--_ui5-v2-4-0_checkbox_focus_position);inset-block:var(--_ui5-v2-4-0_checkbox_focus_position);border:var(--_ui5-v2-4-0_checkbox_focus_outline);border-radius:var(--_ui5-v2-4-0_checkbox_focus_border_radius)}:host([text]) .ui5-checkbox-root{padding-inline-end:var(--_ui5-v2-4-0_checkbox_right_focus_distance)}:host([text]) .ui5-checkbox-root:focus:before,:host([text]) .ui5-checkbox-root:focus-visible:before{inset-inline-end:0}:host(:hover:not([disabled])){background:var(--_ui5-v2-4-0_checkbox_outer_hover_background)}.ui5-checkbox--hoverable .ui5-checkbox-label:hover{color:var(--_ui5-v2-4-0_checkbox_label_color)}:host(:not([active]):not([checked]):not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active]):not([checked])[value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_border_color)}:host(:not([active])[checked]:not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active])[checked][value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color)}:host([checked]:not([value-state])) .ui5-checkbox-inner,:host([checked][value-state="None"]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color)}:host([active]:not([checked]):not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active]:not([checked])[value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_active_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}:host([active][checked]:not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active][checked][value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}.ui5-checkbox-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);border:var(--_ui5-v2-4-0_checkbox_inner_border);border-radius:var(--_ui5-v2-4-0_checkbox_inner_border_radius);background:var(--_ui5-v2-4-0_checkbox_inner_background);color:var(--_ui5-v2-4-0_checkbox_checkmark_color);box-sizing:border-box;position:relative;cursor:inherit}:host([indeterminate][checked]) .ui5-checkbox-inner:after{content:"";background-color:currentColor;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:var(--_ui5-v2-4-0_checkbox_partially_icon_size);height:var(--_ui5-v2-4-0_checkbox_partially_icon_size)}:host input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit}.ui5-checkbox-root .ui5-checkbox-label{margin-inline-start:var(--_ui5-v2-4-0_checkbox_label_offset);cursor:inherit;text-overflow:ellipsis;overflow:hidden;pointer-events:none;color:var(--_ui5-v2-4-0_checkbox_label_color)}.ui5-checkbox-icon{width:var(--_ui5-v2-4-0_checkbox_icon_size);height:var(--_ui5-v2-4-0_checkbox_icon_size);color:currentColor;cursor:inherit;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}:host([display-only]){cursor:default}:host([display-only]) .ui5-checkbox-display-only-icon-inner [ui5-icon]{color:var(--sapTextColor)}:host([display-only]) .ui5-checkbox-display-only-icon-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);display:flex;align-items:center;justify-content:center}\n'},dependencies:[d3,r5]}),v0("change",{bubbles:!0,cancelable:!0}),v0("value-changed",{bubbles:!0,cancelable:!0})],N6),N6.define();const z6=N6;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));const U6={packageName:"@ui5/webcomponents",fileName:"themes/ListItemAdditionalText.css.ts",content:".ui5-li-additional-text{margin:0 .25rem;color:var(--sapNeutralTextColor);font-size:var(--sapFontSize);min-width:3.75rem;text-align:end;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\n"};bJ("slim-arrow-right",{pathData:"M357.5 233q10 10 10 23t-10 23l-165 165q-6 5-12 5-5 0-11-5-5-6-5-11 0-6 5-12l160-159q3-3 3-6t-3-6l-159-159q-5-5-5-11t5-11 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("slim-arrow-right",{pathData:"M186 416q-11 0-18.5-7.5T160 390q0-10 8-18l121-116-121-116q-8-8-8-18 0-11 7.5-18.5T186 96q10 0 17 7l141 134q8 8 8 19t-8 19L203 409q-7 7-17 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});var H6,V6=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let $6=H6=class extends v6{constructor(){super(),this.type="Active",this.accessibilityAttributes={},this.navigated=!1,this.active=!1,this.highlight="None",this.accessibleRole="ListItem",this._selectionMode="None",this.deactivateByKey=e=>{b0(e)&&this.deactivate()},this.deactivate=()=>{this.active&&(this.active=!1)},this._ontouchstart={handleEvent:()=>{this._onmousedown()},passive:!0}}onBeforeRendering(){super.onBeforeRendering(),this.actionable=(this.type===f6.Active||this.type===f6.Navigation)&&this._selectionMode!==D3.Delete}onEnterDOM(){super.onEnterDOM(),document.addEventListener("mouseup",this.deactivate),document.addEventListener("touchend",this.deactivate),document.addEventListener("keyup",this.deactivateByKey)}onExitDOM(){document.removeEventListener("mouseup",this.deactivate),document.removeEventListener("keyup",this.deactivateByKey),document.removeEventListener("touchend",this.deactivate)}async _onkeydown(e){if((A0(e)||b0(e))&&this._isTargetSelfFocusDomRef(e))return;super._onkeydown(e);const t=this.type===f6.Active,i=this.typeNavigation;if((A0(e)||b0(e))&&(t||i)&&this.activate(),Q0(e)){const e=X0(),t=this.getFocusDomRef();if(e===t){const e=await Y5(t);null==e||e.focus()}else t.focus()}}_onkeyup(e){super._onkeyup(e),(A0(e)||b0(e))&&this.deactivate(),this.modeDelete&&U0(e)&&this.onDelete()}_onmousedown(){this.activate()}_onmouseup(){this.getFocusDomRef().matches(":has(:focus-within)")||this.deactivate()}_ontouchend(){this._onmouseup()}_onfocusin(e){super._onfocusin(e),e.target!==this.getFocusDomRef()&&this.deactivate()}_onfocusout(e){e.target===this.getFocusDomRef()&&this.deactivate()}_ondragstart(e){e.dataTransfer&&e.target===this._listItem&&(this.setAttribute("data-moving",""),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move")}_ondragend(e){e.target===this._listItem&&this.removeAttribute("data-moving")}_isTargetSelfFocusDomRef(e){return e.target!==this.getFocusDomRef()}onMultiSelectionComponentPress(e){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:e.target.checked,selectionComponentPressed:!0})}onSingleSelectionComponentPress(e){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:!e.target.checked,selectionComponentPressed:!0})}activate(){this.type!==f6.Active&&this.type!==f6.Navigation||(this.active=!0)}onDelete(){this.fireDecoratorEvent("_selection-requested",{item:this,selectionComponentPressed:!1})}onDetailClick(){this.fireDecoratorEvent("detail-click",{item:this,selected:this.selected})}fireItemPress(e){this.isInactive||super.fireItemPress(e)}get isInactive(){return this.type===f6.Inactive||this.type===f6.Detail}get placeSelectionElementBefore(){return this._selectionMode===D3.Multiple||this._selectionMode===D3.SingleStart}get placeSelectionElementAfter(){return!this.placeSelectionElementBefore&&(this._selectionMode===D3.SingleEnd||this._selectionMode===D3.Delete)}get modeSingleSelect(){return[D3.SingleStart,D3.SingleEnd,D3.Single].includes(this._selectionMode)}get modeMultiple(){return this._selectionMode===D3.Multiple}get modeDelete(){return this._selectionMode===D3.Delete}get renderDeleteButton(){return this.modeDelete}get typeDetail(){return this.type===f6.Detail}get typeNavigation(){return this.type===f6.Navigation}get typeActive(){return this.type===f6.Active}get _ariaSelected(){if(this.modeMultiple||this.modeSingleSelect)return this.selected}get listItemAccessibleRole(){return this.accessibleRole.toLowerCase()}get ariaSelectedText(){let e;return void 0!==this._ariaSelected&&(e=this._ariaSelected?H6.i18nBundle.getText(Z1):H6.i18nBundle.getText(J1)),e}get deleteText(){return H6.i18nBundle.getText(V1)}get hasDeleteButtonSlot(){return!!this.deleteButton.length}get _accessibleNameRef(){return this.accessibleName?`${this._id}-invisibleText`:`${this._id}-content ${this._id}-invisibleText`}get _accInfo(){return{role:this.listItemAccessibleRole,ariaExpanded:void 0,ariaLevel:void 0,ariaLabel:H6.i18nBundle.getText(e2),ariaLabelRadioButton:H6.i18nBundle.getText(t2),ariaSelectedText:this.ariaSelectedText,ariaHaspopup:this.accessibilityAttributes.hasPopup,setsize:this.accessibilityAttributes.ariaSetsize,posinset:this.accessibilityAttributes.ariaPosinset,tooltip:this.tooltip}}get _hasHighlightColor(){return this.highlight!==d6.None}get hasConfigurableMode(){return!0}get _listItem(){return this.shadowRoot.querySelector("li")}};V6([_0()],$6.prototype,"type",void 0),V6([_0({type:Object})],$6.prototype,"accessibilityAttributes",void 0),V6([_0({type:Boolean})],$6.prototype,"navigated",void 0),V6([_0()],$6.prototype,"tooltip",void 0),V6([_0({type:Boolean})],$6.prototype,"active",void 0),V6([_0()],$6.prototype,"highlight",void 0),V6([_0({type:Boolean})],$6.prototype,"selected",void 0),V6([_0()],$6.prototype,"accessibleRole",void 0),V6([_0()],$6.prototype,"_selectionMode",void 0),V6([y0()],$6.prototype,"deleteButton",void 0),V6([f1("@ui5/webcomponents")],$6,"i18nBundle",void 0),$6=H6=V6([m0({languageAware:!0,styles:[v6.styles,U6,{packageName:"@ui5/webcomponents",fileName:"themes/ListItem.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([navigated]) .ui5-li-root .ui5-li-navigated{width:.1875rem;position:absolute;right:0;top:0;bottom:0;background-color:var(--sapList_SelectionBorderColor)}:host([active][actionable]) .ui5-li-root .ui5-li-icon{color:var(--sapList_Active_TextColor)}:host([active][actionable]) .ui5-li-title,:host([active][actionable]) .ui5-li-desc,:host([active][actionable]) .ui5-li-additional-text{color:var(--sapList_Active_TextColor)}:host([additional-text-state="Critical"]) .ui5-li-additional-text{color:var(--sapCriticalTextColor)}:host([additional-text-state="Positive"]) .ui5-li-additional-text{color:var(--sapPositiveTextColor)}:host([additional-text-state="Negative"]) .ui5-li-additional-text{color:var(--sapNegativeTextColor)}:host([additional-text-state="Information"]) .ui5-li-additional-text{color:var(--sapInformativeTextColor)}:host([has-title][description]){height:5rem}:host([has-title][image]){height:5rem}:host([_has-image]){height:5rem}:host([image]) .ui5-li-content{height:3rem}::slotted(img[slot="image"]){width:var(--_ui5-v2-4-0_list_item_img_size);height:var(--_ui5-v2-4-0_list_item_img_size);border-radius:var(--ui5-v2-4-0-avatar-border-radius);object-fit:contain}:host([description]) .ui5-li-root{padding:1rem}:host([description]) .ui5-li-content{height:3rem}:host([has-title][description]) .ui5-li-title{padding-bottom:.375rem}.ui5-li-text-wrapper{flex-direction:column}:host([description]) .ui5-li-text-wrapper{height:100%;justify-content:space-between;padding:.125rem 0}.ui5-li-description-info-wrapper{display:flex;justify-content:space-between}.ui5-li-additional-text,:host(:not([wrapping-type="Normal"])) .ui5-li-title,.ui5-li-desc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host([wrapping-type="Normal"]){height:auto}:host([wrapping-type="Normal"]) .ui5-li-content{margin:var(--_ui5-v2-4-0_list_item_content_vertical_offset) 0}.ui5-li-desc{color:var(--sapContent_LabelColor);font-size:var(--sapFontSize)}:host([description]) .ui5-li-additional-text{align-self:flex-end}.ui5-li-image{min-width:var(--_ui5-v2-4-0_list_item_img_size);min-height:var(--_ui5-v2-4-0_list_item_img_size);margin-top:var(--_ui5-v2-4-0_list_item_img_top_margin);margin-bottom:var(--_ui5-v2-4-0_list_item_img_bottom_margin);margin-inline-end:var(--_ui5-v2-4-0_list_item_img_hn_margin)}.ui5-li-icon{min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);color:var(--sapContent_NonInteractiveIconColor);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}.ui5-li-detailbtn,.ui5-li-deletebtn{display:flex;align-items:center;margin-left:var(--_ui5-v2-4-0_list_buttons_left_space)}.ui5-li-multisel-cb,.ui5-li-singlesel-radiobtn{flex-shrink:0}:host([description]) .ui5-li-singlesel-radiobtn{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([description]) .ui5-li-multisel-cb{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([_selection-mode="SingleStart"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="Multiple"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="SingleEnd"]) .ui5-li-root{padding-inline:1rem 0}:host [ui5-checkbox].ui5-li-singlesel-radiobtn{margin-right:var(--_ui5-v2-4-0_list_item_cb_margin_right)}.ui5-li-highlight{position:absolute;width:.375rem;bottom:0;left:0;top:0;border-inline-end:.0625rem solid var(--ui5-v2-4-0-listitem-background-color);box-sizing:border-box}:host([highlight="Negative"]) .ui5-li-highlight{background:var(--sapNegativeTextColor)}:host([highlight="Critical"]) .ui5-li-highlight{background:var(--sapCriticalTextColor)}:host([highlight="Positive"]) .ui5-li-highlight{background:var(--sapPositiveTextColor)}:host([highlight="Information"]) .ui5-li-highlight{background:var(--sapInformativeTextColor)}\n'}],dependencies:[E5,I6,z6]}),v0("detail-click",{bubbles:!0}),v0("_focused",{bubbles:!0}),v0("_selection-requested",{bubbles:!0})],$6);const G6=$6;function Q6(e,t,i){return u1`<slot></slot>`}function j6(e,t,i){return u1`${this.icon?q6.call(this,e,t,i):void 0}${this.initials?W6.call(this,e,t,i):void 0}`}function q6(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-avatar-icon" name="${c1(this.icon)}"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-avatar-icon" name="${c1(this.icon)}"></ui5-icon>`}function W6(e,t,i){return i?u1`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${c1(this.validInitials)}</span><${p1("ui5-icon",t,i)} class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${c1(this.fallbackIcon)}"></${p1("ui5-icon",t,i)}>`:u1`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${c1(this.validInitials)}</span><ui5-icon class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${c1(this.fallbackIcon)}"></ui5-icon>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),bJ("employee",{pathData:"M448 512H64V384q0-26 10-49.5t27.5-41T142 266t50-10h64q-27 0-50-10t-40.5-27.5T138 178t-10-50q0-26 10-49.5t27.5-41T206 10t50-10q26 0 49.5 10t41 27.5 27.5 41 10 49.5q0 27-10 50t-27.5 40.5-41 27.5-49.5 10h64q26 0 49.5 10t41 27.5 27.5 41 10 49.5v128zM256 224q40 0 68-28t28-68-28-68-68-28-68 28-28 68 28 68 68 28zM96 384v96h320v-96q0-40-28-68t-68-28H192q-40 0-68 28t-28 68zm192 32v-32h96v32h-96z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("employee",{pathData:"M326 352q11 0 18.5 7.5T352 378t-7.5 18-18.5 7h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T314 352h12zm16-97q48 23 77 67.5t29 99.5v32q0 11-7.5 18.5T422 480H90q-11 0-18.5-7.5T64 454v-32q0-55 29-99.5t77-67.5l-5-4q-18-18-27.5-41.5T128 160q0-27 10-50t27.5-40.5 41-27.5T256 32t49.5 10.5 41 28T374 111t10 49q0 27-11 52t-31 43zm-112 86l-25-15q-13-7-13-19v-6q-34 17-55.5 49T115 422v7h115v-88zm-51-181q0 32 22.5 54.5T256 237t54.5-22.5T333 160t-22.5-54.5T256 83t-54.5 22.5T179 160zm218 262q0-40-21.5-72T320 301v6q0 12-13 19l-26 15v88h116v-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});var X6,Y6=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let K6=X6=class extends f0{constructor(){super(),this.disabled=!1,this.interactive=!1,this.fallbackIcon="employee",this.shape="Circle",this.size="S",this.colorScheme="Accent6",this._colorScheme="Accent6",this.accessibilityAttributes={},this._hasImage=!1,this._handleResizeBound=this.handleResize.bind(this)}get tabindex(){return this.forcedTabIndex||(this._interactive?"0":"-1")}get effectiveSize(){return this.getAttribute("size")}get"\u0435ffectiveBackgroundColor"(){return this.getAttribute("color-scheme")||this._colorScheme}get _role(){return this._interactive?"button":"img"}get _ariaHasPopup(){return this._getAriaHasPopup()}get _interactive(){return this.interactive&&!this.disabled}get validInitials(){return this.initials&&/^[a-zA-Z\xe0-\xfc\xc0-\xdc]{1,3}$/.test(this.initials)?this.initials:null}get accessibleNameText(){return this.accessibleName?this.accessibleName:X6.i18nBundle.getText(w1)||void 0}get hasImage(){return this._hasImage=!!this.image.length,this._hasImage}get initialsContainer(){return this.getDomRef().querySelector(".ui5-avatar-initials")}get fallBackIconDomRef(){return this.getDomRef().querySelector(".ui5-avatar-icon-fallback")}onBeforeRendering(){this._onclick=this._interactive?this._onClickHandler.bind(this):void 0}async onAfterRendering(){await $K(),this.initials&&!this.icon&&this._checkInitials()}onEnterDOM(){IZ()&&this.setAttribute("desktop",""),this.initialsContainer&&i4.register(this.initialsContainer,this._handleResizeBound)}onExitDOM(){this.initialsContainer&&i4.deregister(this.initialsContainer,this._handleResizeBound)}handleResize(){this.initials&&!this.icon&&this._checkInitials()}_checkInitials(){const e=this.getDomRef(),t=e.querySelector(".ui5-avatar-initials");this.validInitials&&t&&t.scrollWidth<=e.scrollWidth?this.showInitials():this.showFallbackIcon()}showFallbackIcon(){var e,t;null==(e=this.initialsContainer)||e.classList.add("ui5-avatar-initials-hidden"),null==(t=this.fallBackIconDomRef)||t.classList.remove("ui5-avatar-fallback-icon-hidden")}showInitials(){var e,t;null==(e=this.initialsContainer)||e.classList.remove("ui5-avatar-initials-hidden"),null==(t=this.fallBackIconDomRef)||t.classList.add("ui5-avatar-fallback-icon-hidden")}_onClickHandler(e){e.stopPropagation(),this._fireClick()}_onkeydown(e){this._interactive&&(b0(e)&&this._fireClick(),A0(e)&&e.preventDefault())}_onkeyup(e){this._interactive&&!e.shiftKey&&A0(e)&&this._fireClick()}_fireClick(){this.fireDecoratorEvent("click")}_getAriaHasPopup(){const e=this.accessibilityAttributes.hasPopup;if(this._interactive&&e)return e}};Y6([_0({type:Boolean})],K6.prototype,"disabled",void 0),Y6([_0({type:Boolean})],K6.prototype,"interactive",void 0),Y6([_0()],K6.prototype,"icon",void 0),Y6([_0()],K6.prototype,"fallbackIcon",void 0),Y6([_0()],K6.prototype,"initials",void 0),Y6([_0()],K6.prototype,"shape",void 0),Y6([_0()],K6.prototype,"size",void 0),Y6([_0()],K6.prototype,"colorScheme",void 0),Y6([_0()],K6.prototype,"_colorScheme",void 0),Y6([_0()],K6.prototype,"accessibleName",void 0),Y6([_0({type:Object})],K6.prototype,"accessibilityAttributes",void 0),Y6([_0({noAttribute:!0})],K6.prototype,"forcedTabIndex",void 0),Y6([_0({type:Boolean})],K6.prototype,"_hasImage",void 0),Y6([y0({type:HTMLElement,default:!0})],K6.prototype,"image",void 0),Y6([y0()],K6.prototype,"badge",void 0),Y6([f1("@ui5/webcomponents")],K6,"i18nBundle",void 0),K6=X6=Y6([m0({tag:"ui5-avatar",languageAware:!0,renderer:d1,styles:{packageName:"@ui5/webcomponents",fileName:"themes/Avatar.css.ts",content:':host(:not([hidden])){display:inline-block;box-sizing:border-box;position:relative;font-family:"72override",var(--sapFontFamily)}:host(:not([hidden]).ui5_hovered){opacity:.7}:host([interactive]:not([disabled])){cursor:pointer}:host([interactive]:not([hidden]):active){background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([interactive]:not([hidden]):not([disabled]):not(:active):hover){box-shadow:var(--ui5-v2-4-0-avatar-hover-box-shadow-offset)}:host([interactive][desktop]:not([hidden])) .ui5-avatar-root:focus,:host([interactive]:not([hidden])) .ui5-avatar-root:focus-visible{outline:var(--_ui5-v2-4-0_avatar_outline);outline-offset:var(--_ui5-v2-4-0_avatar_focus_offset)}:host([disabled]){opacity:var(--sapContent_DisabledOpacity)}:host{height:3rem;width:3rem;border-radius:50%;border:var(--ui5-v2-4-0-avatar-initials-border);outline:none;color:var(--ui5-v2-4-0-avatar-initials-color)}.ui5-avatar-root{display:flex;align-items:center;justify-content:center;outline:none;height:100%;width:100%;border-radius:inherit}:host([_size="XS"]),:host([size="XS"]){height:2rem;width:2rem;min-height:2rem;min-width:2rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XS)}:host(:not([size])),:host([_size="S"]),:host([size="S"]){min-height:3rem;min-width:3rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_S)}:host([_size="M"]),:host([size="M"]){min-height:4rem;min-width:4rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_M)}:host([_size="L"]),:host([size="L"]){min-height:5rem;min-width:5rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_L)}:host([_size="XL"]),:host([size="XL"]){min-height:7rem;min-width:7rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XL)}:host .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_fontsize_S);width:var(--_ui5-v2-4-0_avatar_fontsize_S);color:inherit}:host([_size="XS"]) .ui5-avatar-icon,:host([size="XS"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XS);width:var(--_ui5-v2-4-0_avatar_icon_XS)}:host([_size="S"]) .ui5-avatar-icon,:host([size="S"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_S);width:var(--_ui5-v2-4-0_avatar_icon_S)}:host([_size="M"]) .ui5-avatar-icon,:host([size="M"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_M);width:var(--_ui5-v2-4-0_avatar_icon_M)}:host([_size="L"]) .ui5-avatar-icon,:host([size="L"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_L);width:var(--_ui5-v2-4-0_avatar_icon_L)}:host([_size="XL"]) .ui5-avatar-icon,:host([size="XL"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XL);width:var(--_ui5-v2-4-0_avatar_icon_XL)}::slotted(*){border-radius:50%;width:100%;height:100%;pointer-events:none}:host([shape="Square"]){border-radius:var(--ui5-v2-4-0-avatar-border-radius)}:host([shape="Square"]) ::slotted(*){border-radius:calc(var(--ui5-v2-4-0-avatar-border-radius) - var(--ui5-v2-4-0-avatar-border-radius-img-deduction))}:host(:not([color-scheme])),:host(:not([_has-image])),:host([_color-scheme="Accent6"]),:host([ui5-avatar][color-scheme="Accent6"]){background-color:var(--ui5-v2-4-0-avatar-accent6);color:var(--ui5-v2-4-0-avatar-accent6-color);border-color:var(--ui5-v2-4-0-avatar-accent6-border-color)}:host([_color-scheme="Accent1"]),:host([ui5-avatar][color-scheme="Accent1"]){background-color:var(--ui5-v2-4-0-avatar-accent1);color:var(--ui5-v2-4-0-avatar-accent1-color);border-color:var(--ui5-v2-4-0-avatar-accent1-border-color)}:host([_color-scheme="Accent2"]),:host([ui5-avatar][color-scheme="Accent2"]){background-color:var(--ui5-v2-4-0-avatar-accent2);color:var(--ui5-v2-4-0-avatar-accent2-color);border-color:var(--ui5-v2-4-0-avatar-accent2-border-color)}:host([_color-scheme="Accent3"]),:host([ui5-avatar][color-scheme="Accent3"]){background-color:var(--ui5-v2-4-0-avatar-accent3);color:var(--ui5-v2-4-0-avatar-accent3-color);border-color:var(--ui5-v2-4-0-avatar-accent3-border-color)}:host([_color-scheme="Accent4"]),:host([ui5-avatar][color-scheme="Accent4"]){background-color:var(--ui5-v2-4-0-avatar-accent4);color:var(--ui5-v2-4-0-avatar-accent4-color);border-color:var(--ui5-v2-4-0-avatar-accent4-border-color)}:host([_color-scheme="Accent5"]),:host([ui5-avatar][color-scheme="Accent5"]){background-color:var(--ui5-v2-4-0-avatar-accent5);color:var(--ui5-v2-4-0-avatar-accent5-color);border-color:var(--ui5-v2-4-0-avatar-accent5-border-color)}:host([_color-scheme="Accent7"]),:host([ui5-avatar][color-scheme="Accent7"]){background-color:var(--ui5-v2-4-0-avatar-accent7);color:var(--ui5-v2-4-0-avatar-accent7-color);border-color:var(--ui5-v2-4-0-avatar-accent7-border-color)}:host([_color-scheme="Accent8"]),:host([ui5-avatar][color-scheme="Accent8"]){background-color:var(--ui5-v2-4-0-avatar-accent8);color:var(--ui5-v2-4-0-avatar-accent8-color);border-color:var(--ui5-v2-4-0-avatar-accent8-border-color)}:host([_color-scheme="Accent9"]),:host([ui5-avatar][color-scheme="Accent9"]){background-color:var(--ui5-v2-4-0-avatar-accent9);color:var(--ui5-v2-4-0-avatar-accent9-color);border-color:var(--ui5-v2-4-0-avatar-accent9-border-color)}:host([_color-scheme="Accent10"]),:host([ui5-avatar][color-scheme="Accent10"]){background-color:var(--ui5-v2-4-0-avatar-accent10);color:var(--ui5-v2-4-0-avatar-accent10-color);border-color:var(--ui5-v2-4-0-avatar-accent10-border-color)}:host([_color-scheme="Placeholder"]),:host([ui5-avatar][color-scheme="Placeholder"]){background-color:var(--ui5-v2-4-0-avatar-placeholder);color:var(--ui5-v2-4-0-avatar-placeholder-color);border-color:var(--ui5-v2-4-0-avatar-placeholder-border-color)}:host([_has-image]){color:var(--ui5-v2-4-0-avatar-accent10-color);background-color:transparent;vertical-align:middle}.ui5-avatar-initials{color:inherit}.ui5-avatar-icon~.ui5-avatar-initials,.ui5-avatar-icon~.ui5-avatar-icon-fallback{display:none}.ui5-avatar-fallback-icon-hidden{display:none}.ui5-avatar-initials-hidden{position:absolute;visibility:hidden;z-index:0;pointer-events:none}::slotted([slot="badge"]){position:absolute;bottom:0;right:0;width:1.125rem;height:1.125rem;font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSmallSize);color:var(--sapBackgroundColor);--_ui5-v2-4-0-tag-height: 1.125rem;--_ui5-v2-4-0-tag-border-radius: 50%}:host([_size="L"]) ::slotted([slot="badge"]),:host([size="L"]) ::slotted([slot="badge"]){width:1.25rem;height:1.25rem;--_ui5-v2-4-0-tag-height: 1.25rem;--_ui5-v2-4-0-tag-icon-width: .875rem}:host([_size="XL"]) ::slotted([slot="badge"]),:host([size="XL"]) ::slotted([slot="badge"]){width:1.75rem;height:1.75rem;--_ui5-v2-4-0-tag-height: 1.75rem;--_ui5-v2-4-0-tag-icon-width: 1rem}:host([shape="Square"]) ::slotted([slot="badge"]){bottom:-.125rem;right:-.125rem}:host([_size="L"][shape="Square"]) ::slotted([slot="badge"]),:host([size="L"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.1875rem;right:-.1875rem}:host([_size="XL"][shape="Square"]) ::slotted([slot="badge"]),:host([size="XL"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.25rem;right:-.25rem}\n'},template:function(e,t,i){return u1`<div class="ui5-avatar-root" tabindex="${c1(this.tabindex)}" data-sap-focus-ref @keyup=${this._onkeyup} @keydown=${this._onkeydown} @click=${this._onclick} role="${c1(this._role)}" aria-haspopup="${c1(this._ariaHasPopup)}" aria-label="${c1(this.accessibleNameText)}" fallback-icon="${c1(this.fallbackIcon)}">${this.hasImage?Q6.call(this,e,t,i):j6.call(this,e,t,i)}<slot name="badge"></slot></div>`},dependencies:[r5]}),v0("click",{bubbles:!0})],K6),K6.define();const Z6=K6;function J6(e,t,i){return u1`${this.modeSingleSelect?e8.call(this,e,t,i):void 0}${this.modeMultiple?t8.call(this,e,t,i):void 0}${this.renderDeleteButton?i8.call(this,e,t,i):void 0}`}function e8(e,t,i){return i?u1`<${p1("ui5-radio-button",t,i)} part="radio" ?disabled="${this.isInactive}" accessible-name="${c1(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${c1(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${c1(this.onSingleSelectionComponentPress)}"></${p1("ui5-radio-button",t,i)}>`:u1`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${c1(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${c1(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${c1(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function t8(e,t,i){return i?u1`<${p1("ui5-checkbox",t,i)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${c1(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${c1(this._accInfo.ariaLabel)}" @ui5-change="${c1(this.onMultiSelectionComponentPress)}"></${p1("ui5-checkbox",t,i)}>`:u1`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${c1(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${c1(this._accInfo.ariaLabel)}" @ui5-change="${c1(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function i8(e,t,i){return u1`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?n8.call(this,e,t,i):r8.call(this,e,t,i)}</div>`}function n8(e,t,i){return u1`<slot name="deleteButton"></slot>`}function r8(e,t,i){return i?u1`<${p1("ui5-button",t,i)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${c1(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${c1(this.deleteText)}"></${p1("ui5-button",t,i)}>`:u1`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${c1(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${c1(this.deleteText)}"></ui5-button>`}function o8(e,t,i){return u1`<div class="ui5-li-highlight"></div>`}function s8(e,t,i){return u1`<div class="ui5-li-image"><slot name="image"></slot></div>`}function a8(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function l8(e,t,i){return u1`<div class="ui5-li-description-info-wrapper"><span part="description" class="ui5-li-desc">${c1(this.description)}</span>${this.additionalText?c8.call(this,e,t,i):void 0}</div>`}function c8(e,t,i){return u1`<span part="additional-text" class="ui5-li-additional-text">${c1(this.additionalText)}</span>`}function u8(e,t,i){return u1`<span class="ui5-hidden-text">${c1(this.type)}</span>`}function h8(e,t,i){return u1`${this.additionalText?d8.call(this,e,t,i):void 0}`}function d8(e,t,i){return u1`<span part="additional-text" class="ui5-li-additional-text">${c1(this.additionalText)}</span>`}function p8(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function f8(e,t,i){return i?u1`<div class="ui5-li-detailbtn"><${p1("ui5-button",t,i)} part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></${p1("ui5-button",t,i)}></div>`:u1`<div class="ui5-li-detailbtn"><ui5-button part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></ui5-button></div>`}function g8(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} name ="slim-arrow-right"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon name ="slim-arrow-right"></ui5-icon>`}function m8(e,t,i){return u1`<div class="ui5-li-navigated"></div>`}function _8(e,t,i){return u1`${this.modeSingleSelect?v8.call(this,e,t,i):void 0}${this.modeMultiple?y8.call(this,e,t,i):void 0}${this.renderDeleteButton?b8.call(this,e,t,i):void 0}`}function v8(e,t,i){return i?u1`<${p1("ui5-radio-button",t,i)} part="radio" ?disabled="${this.isInactive}" accessible-name="${c1(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${c1(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${c1(this.onSingleSelectionComponentPress)}"></${p1("ui5-radio-button",t,i)}>`:u1`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${c1(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${c1(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${c1(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function y8(e,t,i){return i?u1`<${p1("ui5-checkbox",t,i)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${c1(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${c1(this._accInfo.ariaLabel)}" @ui5-change="${c1(this.onMultiSelectionComponentPress)}"></${p1("ui5-checkbox",t,i)}>`:u1`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${c1(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${c1(this._accInfo.ariaLabel)}" @ui5-change="${c1(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function b8(e,t,i){return u1`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?A8.call(this,e,t,i):w8.call(this,e,t,i)}</div>`}function A8(e,t,i){return u1`<slot name="deleteButton"></slot>`}function w8(e,t,i){return i?u1`<${p1("ui5-button",t,i)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${c1(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${c1(this.deleteText)}"></${p1("ui5-button",t,i)}>`:u1`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${c1(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${c1(this.deleteText)}"></ui5-button>`}var x8=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let S8=class extends G6{constructor(){super(...arguments),this.iconEnd=!1,this.additionalTextState="None",this.movable=!1,this.wrappingType="None",this.hasTitle=!1,this._hasImage=!1}onBeforeRendering(){super.onBeforeRendering(),this.hasTitle=!!this.textContent,this._hasImage=this.hasImage}get displayIconBegin(){return!(!this.icon||this.iconEnd)}get displayIconEnd(){return!(!this.icon||!this.iconEnd)}get hasImage(){return!!this.image.length}};x8([_0()],S8.prototype,"description",void 0),x8([_0()],S8.prototype,"icon",void 0),x8([_0({type:Boolean})],S8.prototype,"iconEnd",void 0),x8([_0()],S8.prototype,"additionalText",void 0),x8([_0()],S8.prototype,"additionalTextState",void 0),x8([_0({type:Boolean})],S8.prototype,"movable",void 0),x8([_0()],S8.prototype,"accessibleName",void 0),x8([_0()],S8.prototype,"wrappingType",void 0),x8([_0({type:Boolean})],S8.prototype,"hasTitle",void 0),x8([_0({type:Boolean})],S8.prototype,"_hasImage",void 0),x8([y0()],S8.prototype,"image",void 0),S8=x8([m0({tag:"ui5-li",template:function(e,t,i){return u1`<li part="native-li" data-sap-focus-ref tabindex="${c1(this._effectiveTabIndex)}" class="${a1(this.classes.main)}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" @mouseup="${this._onmouseup}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" @click="${this._onclick}" draggable="${c1(this.movable)}" @dragstart="${this._ondragstart}" @dragend="${this._ondragend}" role="${c1(this._accInfo.role)}" aria-expanded="${c1(this._accInfo.ariaExpanded)}" title="${c1(this._accInfo.tooltip)}" aria-level="${c1(this._accInfo.ariaLevel)}" aria-haspopup="${c1(this._accInfo.ariaHaspopup)}" aria-posinset="${c1(this._accInfo.posinset)}" aria-setsize="${c1(this._accInfo.setsize)}" aria-describedby="${c1(this._id)}-invisibleText-describedby" aria-labelledby="${c1(this._accessibleNameRef)}" aria-disabled="${c1(this._ariaDisabled)}" aria-selected="${c1(this._accInfo.ariaSelected)}" aria-checked="${c1(this._accInfo.ariaChecked)}" aria-owns="${c1(this._accInfo.ariaOwns)}" aria-keyshortcuts="${c1(this._accInfo.ariaKeyShortcuts)}">${this.placeSelectionElementBefore?J6.call(this,e,t,i):void 0}${this._hasHighlightColor?o8.call(this,e,t,i):void 0}<div part="content" id="${c1(this._id)}-content" class="ui5-li-content">${this.hasImage?s8.call(this,e,t,i):void 0}${this.displayIconBegin?a8.call(this,e,t,i):void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.description?l8.call(this,e,t,i):void 0}${this.typeActive?void 0:u8.call(this,e,t,i)}</div>${this.description?void 0:h8.call(this,e,t,i)}</div>${this.displayIconEnd?p8.call(this,e,t,i):void 0}${this.typeDetail?f8.call(this,e,t,i):void 0}${this.typeNavigation?g8.call(this,e,t,i):void 0}${this.navigated?m8.call(this,e,t,i):void 0}${this.placeSelectionElementAfter?_8.call(this,e,t,i):void 0}<span id="${c1(this._id)}-invisibleText" class="ui5-hidden-text">${c1(this._accInfo.listItemAriaLabel)}${c1(this.accessibleName)}</span><span id="${c1(this._id)}-invisibleText-describedby" class="ui5-hidden-text">${c1(this._accInfo.ariaSelectedText)}</span></li> `},dependencies:[...G6.dependencies,r5,Z6]})],S8),S8.define();const C8=S8;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var E8,T8=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let I8=E8=class extends v6{get groupItem(){return!0}get _pressable(){return!1}get groupHeaderText(){return E8.i18nBundle.getText($1)}get ariaLabelText(){return[this.textContent,this.accessibleName].filter(Boolean).join(" ")}};T8([_0()],I8.prototype,"accessibleName",void 0),T8([f1("@ui5/webcomponents")],I8,"i18nBundle",void 0),I8=E8=T8([m0({tag:"ui5-li-group-header",languageAware:!0,template:function(e,t,i){return u1`<ul part="native-li" tabindex="${c1(this.forcedTabIndex)}" class="ui5-ghli-root ${a1(this.classes.main)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" aria-label="${c1(this.ariaLabelText)}" aria-roledescription="${c1(this.groupHeaderText)}" role="group"><div id="${c1(this._id)}-content" class="ui5-li-content"><span class="ui5-ghli-title"><slot></slot></span></div></ul>`},styles:[v6.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroupHeader.css.ts",content:".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}\n"}]})],I8),I8.define();const M8=I8;var k8=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let B8=class extends f0{constructor(){super(...arguments),this.focused=!1}onEnterDOM(){S3(this)}onExitDOM(){C3(this)}get groupHeaderItem(){return this.shadowRoot.querySelector("[ui5-li-group-header]")}get hasHeader(){return!!this.headerText||this.hasFormattedHeader}get hasFormattedHeader(){return!!this.header.length}get isListItemGroup(){return!0}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}_ondragenter(e){e.preventDefault()}_ondragleave(e){e.relatedTarget instanceof Node&&this.shadowRoot.contains(e.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(e){const t=E3();if(!(e.target instanceof HTMLElement&&t))return;const i=k3(this.items,e.clientY,I3.Vertical);if(!i)return void(this.dropIndicatorDOM.targetReference=null);let n=i.placements;i.element===t&&(n=n.filter((e=>e!==T3.On))),n.some((n=>!this.fireDecoratorEvent("move-over",{source:{element:t},destination:{element:i.element,placement:n}})&&(e.preventDefault(),this.dropIndicatorDOM.targetReference=i.element,this.dropIndicatorDOM.placement=n,!0)))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(e){e.preventDefault(),this.fireDecoratorEvent("move",{source:{element:E3()},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null}};k8([_0()],B8.prototype,"headerText",void 0),k8([_0()],B8.prototype,"headerAccessibleName",void 0),k8([y0({default:!0,invalidateOnChildChange:!0,type:HTMLElement})],B8.prototype,"items",void 0),k8([_0({type:Boolean})],B8.prototype,"focused",void 0),k8([y0({type:HTMLElement})],B8.prototype,"header",void 0),B8=k8([m0({tag:"ui5-li-group",renderer:d1,languageAware:!0,template:function(e,t,i){return i?u1`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?l6.call(this,e,t,i):void 0}<slot></slot><${p1("ui5-drop-indicator",t,i)} orientation="Horizontal" .ownerReference="${c1(this)}"></${p1("ui5-drop-indicator",t,i)}></ul>`:u1`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?l6.call(this,e,t,i):void 0}<slot></slot><ui5-drop-indicator orientation="Horizontal" .ownerReference="${c1(this)}"></ui5-drop-indicator></ul>`},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroup.css.ts",content:".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}\n"}],dependencies:[C8,M8,z3]}),v0("move-over",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),v0("move",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0})],B8),B8.define();const R8=B8;var P8,D8=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let L8=P8=class extends f0{constructor(){super(),this.indent=!1,this.selectionMode="None",this.separators="All",this.growing="None",this.loading=!1,this.loadingDelay=1e3,this.accessibleRole="List",this._inViewport=!1,this._loadMoreActive=!1,this._previouslyFocusedItem=null,this._forwardingFocus=!1,this.resizeListenerAttached=!1,this.listEndObserved=!1,this._itemNavigation=new Z0(this,{skipItemsSize:10,navigationMode:Y0.Vertical,getItemsCallback:()=>this.getEnabledItems()}),this._handleResize=this.checkListInViewport.bind(this),this._handleResize=this.checkListInViewport.bind(this),this.initialIntersection=!0,this.onItemFocusedBound=this.onItemFocused.bind(this),this.onForwardAfterBound=this.onForwardAfter.bind(this),this.onForwardBeforeBound=this.onForwardBefore.bind(this),this.onItemTabIndexChangeBound=this.onItemTabIndexChange.bind(this)}get listItems(){return this.getItems()}onEnterDOM(){S3(this)}onExitDOM(){this.unobserveListEnd(),this.resizeListenerAttached=!1,i4.deregister(this.getDomRef(),this._handleResize),C3(this)}onBeforeRendering(){this.detachGroupHeaderEvents(),this.prepareListItems()}onAfterRendering(){this.attachGroupHeaderEvents(),this.growsOnScroll?this.observeListEnd():this.listEndObserved&&this.unobserveListEnd(),this.grows&&(this.checkListInViewport(),this.attachForResize())}attachGroupHeaderEvents(){this.getItems().forEach((e=>{e.hasAttribute("ui5-li-group-header")&&(e.addEventListener("ui5-_focused",this.onItemFocusedBound),e.addEventListener("ui5-_forward-after",this.onForwardAfterBound),e.addEventListener("ui5-_forward-before",this.onForwardBeforeBound),e.addEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))}))}detachGroupHeaderEvents(){this.getItems().forEach((e=>{e.hasAttribute("ui5-li-group-header")&&(e.removeEventListener("ui5-_focused",this.onItemFocusedBound),e.removeEventListener("ui5-_forward-after",this.onForwardAfterBound),e.removeEventListener("ui5-_forward-before",this.onForwardBeforeBound),e.removeEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))}))}attachForResize(){this.resizeListenerAttached||(this.resizeListenerAttached=!0,i4.register(this.getDomRef(),this._handleResize))}get shouldRenderH1(){return!this.header.length&&this.headerText}get headerID(){return`${this._id}-header`}get modeLabelID(){return`${this._id}-modeLabel`}get listEndDOM(){return this.shadowRoot.querySelector(".ui5-list-end-marker")}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}get hasData(){return 0!==this.getItems().length}get showBusyIndicatorOverlay(){return!this.growsWithButton&&this.loading}get showNoDataText(){return!this.hasData&&this.noDataText}get isDelete(){return this.selectionMode===D3.Delete}get isSingleSelect(){return[D3.Single,D3.SingleStart,D3.SingleEnd,D3.SingleAuto].includes(this.selectionMode)}get isMultiple(){return this.selectionMode===D3.Multiple}get ariaLabelledBy(){if(this.accessibleNameRef||this.accessibleName)return;const e=[];return(this.isMultiple||this.isSingleSelect||this.isDelete)&&e.push(this.modeLabelID),this.shouldRenderH1&&e.push(this.headerID),e.length?e.join(" "):void 0}get ariaLabelTxt(){return z2(this)}get ariaLabelModeText(){if(this.hasData){if(this.isMultiple)return P8.i18nBundle.getText(n2);if(this.isSingleSelect)return P8.i18nBundle.getText(i2);if(this.isDelete)return P8.i18nBundle.getText(r2)}return""}get grows(){return this.growing!==O3.None}get growsOnScroll(){return this.growing===O3.Scroll}get growsWithButton(){return this.growing===O3.Button}get _growingButtonText(){return this.growingButtonText||P8.i18nBundle.getText(d2)}get listAccessibleRole(){return this.accessibleRole.toLowerCase()}get classes(){return{root:{"ui5-list-root":!0}}}prepareListItems(){const e=this.getItemsForProcessing();e.forEach(((t,i)=>{const n=i===e.length-1,r=this.separators===H3.All||this.separators===H3.Inner&&!n;t.hasConfigurableMode&&(t._selectionMode=this.selectionMode),t.hasBorder=r}))}async observeListEnd(){this.listEndObserved||(await $K(),this.getIntersectionObserver().observe(this.listEndDOM),this.listEndObserved=!0)}unobserveListEnd(){this.growingIntersectionObserver&&(this.growingIntersectionObserver.disconnect(),this.growingIntersectionObserver=null,this.listEndObserved=!1)}onInteresection(e){this.initialIntersection?this.initialIntersection=!1:e.forEach((e=>{var t;e.isIntersecting&&(t=this.loadMore.bind(this),R3&&clearTimeout(R3),R3=setTimeout((()=>{R3=null,t()}),250))}))}onSelectionRequested(e){const t=this.getSelectedItems();let i=!1;this.selectionMode!==D3.None&&this[`handle${this.selectionMode}`]&&(i=this[`handle${this.selectionMode}`](e.detail.item,!!e.detail.selected)),i&&!this.fireDecoratorEvent("selection-change",{selectedItems:this.getSelectedItems(),previouslySelectedItems:t,selectionComponentPressed:e.detail.selectionComponentPressed,targetItem:e.detail.item,key:e.detail.key})&&this._revertSelection(t)}handleSingle(e){return!e.selected&&(this.deselectSelectedItems(),e.selected=!0,!0)}handleSingleStart(e){return this.handleSingle(e)}handleSingleEnd(e){return this.handleSingle(e)}handleSingleAuto(e){return this.handleSingle(e)}handleMultiple(e,t){return e.selected=t,!0}handleDelete(e){return this.fireDecoratorEvent("item-delete",{item:e}),!0}deselectSelectedItems(){this.getSelectedItems().forEach((e=>{e.selected=!1}))}getSelectedItems(){return this.getItems().filter((e=>e.selected))}getEnabledItems(){return this.getItems().filter((e=>e._focusable))}getItems(){const e=[];return this.getSlottedNodes("items").forEach((t=>{if("isListItemGroup"in t){const i=[t.groupHeaderItem,...t.items].filter(Boolean);e.push(...i)}else e.push(t)})),e}getItemsForProcessing(){return this.getItems()}_revertSelection(e){this.getItems().forEach((t=>{const i=-1!==e.indexOf(t),n=t.shadowRoot.querySelector(".ui5-li-multisel-cb"),r=t.shadowRoot.querySelector(".ui5-li-singlesel-radiobtn");t.selected=i,n?n.checked=i:r&&(r.checked=i)}))}_onkeydown(e){W0(e,!0,!1,!1)?this._moveItem(e.target,e):N0(e)&&this._handleTabNext(e)}_moveItem(e,t){if(!e||!e.movable)return;const i=((e,t,i)=>{let n=e.indexOf(t);const r=[];switch(i.key){case"ArrowLeft":case"ArrowUp":n--,n>=0&&r.push({element:e[n],placement:T3.Before});break;case"ArrowRight":case"ArrowDown":n++,n<e.length&&r.push({element:e[n],placement:T3.After});break;case"Home":e.forEach((e=>{r.push({element:e,placement:T3.Before})}));break;case"End":e.reverse().forEach((e=>{r.push({element:e,placement:T3.After})}))}return r})(this.items,e,t);if(!i.length)return;t.preventDefault();const n=i.find((i=>{let{element:n,placement:r}=i;return!this.fireDecoratorEvent("move-over",{originalEvent:t,source:{element:e},destination:{element:n,placement:r}})}));n&&(this.fireDecoratorEvent("move",{originalEvent:t,source:{element:e},destination:{element:n.element,placement:n.placement}}),e.focus())}_onLoadMoreKeydown(e){A0(e)&&(e.preventDefault(),this._loadMoreActive=!0),b0(e)&&(this._onLoadMoreClick(),this._loadMoreActive=!0),N0(e)&&this.focusAfterElement(),z0(e)&&(this.getPreviouslyFocusedItem()?this.focusPreviouslyFocusedItem():this.focusFirstItem(),e.preventDefault())}_onLoadMoreKeyup(e){A0(e)&&this._onLoadMoreClick(),this._loadMoreActive=!1}_onLoadMoreMousedown(){this._loadMoreActive=!0}_onLoadMoreMouseup(){this._loadMoreActive=!1}_onLoadMoreClick(){this.loadMore()}checkListInViewport(){this._inViewport=(()=>{const e=this.getDomRef().getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)})()}loadMore(){this.fireDecoratorEvent("load-more")}_handleTabNext(e){B3(e.target)}_onfocusin(e){const t=B3(e.target);if(this.isForwardElement(t)){if(!this.getPreviouslyFocusedItem())return this.growsWithButton&&this.isForwardAfterElement(t)?this.focusGrowingButton():this.focusFirstItem(),void e.stopImmediatePropagation();if(!this.getForwardingFocus()){if(this.growsWithButton&&this.isForwardAfterElement(t))return this.focusGrowingButton(),void e.stopImmediatePropagation();this.focusPreviouslyFocusedItem(),e.stopImmediatePropagation()}this.setForwardingFocus(!1)}else e.stopImmediatePropagation()}_ondragenter(e){e.preventDefault()}_ondragleave(e){e.relatedTarget instanceof Node&&this.shadowRoot.contains(e.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(e){const t=E3();if(!(e.target instanceof HTMLElement&&t))return;const i=k3(this.items,e.clientY,I3.Vertical);if(!i)return void(this.dropIndicatorDOM.targetReference=null);let n=i.placements;i.element===t&&(n=n.filter((e=>e!==T3.On))),n.some((n=>!this.fireDecoratorEvent("move-over",{originalEvent:e,source:{element:t},destination:{element:i.element,placement:n}})&&(e.preventDefault(),this.dropIndicatorDOM.targetReference=i.element,this.dropIndicatorDOM.placement=n,!0)))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(e){e.preventDefault();const t=E3();this.fireDecoratorEvent("move",{originalEvent:e,source:{element:t},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null,t.focus()}isForwardElement(e){const t=e.id,i=this.getBeforeElement();return!!(this._id===t||i&&i.id===t)||this.isForwardAfterElement(e)}isForwardAfterElement(e){const t=e.id,i=this.getAfterElement();return i&&i.id===t}onItemTabIndexChange(e){const t=e.target;this._itemNavigation.setCurrentItem(t)}onItemFocused(e){const t=e.target;if(e.stopPropagation(),this._itemNavigation.setCurrentItem(t),this.fireDecoratorEvent("item-focused",{item:t}),this.selectionMode===D3.SingleAuto){const i={item:t,selectionComponentPressed:!1,selected:!0,key:e.detail.key};this.onSelectionRequested({detail:i})}}onItemPress(e){const t=e.detail.item;if(this.fireDecoratorEvent("item-click",{item:t})&&this.selectionMode!==D3.Delete){const i={item:t,selectionComponentPressed:!1,selected:!t.selected,key:e.detail.key};this.onSelectionRequested({detail:i})}}onItemClose(e){var t;const i=e.target;((null==i?void 0:i.hasAttribute("ui5-li-notification"))||(null==i?void 0:i.hasAttribute("ui5-li-notification-group")))&&this.fireDecoratorEvent("item-close",{item:null==(t=e.detail)?void 0:t.item})}onItemToggle(e){this.fireDecoratorEvent("item-toggle",{item:e.detail.item})}onForwardBefore(e){this.setPreviouslyFocusedItem(e.target),this.focusBeforeElement(),e.stopPropagation()}onForwardAfter(e){this.setPreviouslyFocusedItem(e.target),this.growsWithButton?(this.focusGrowingButton(),e.preventDefault()):this.focusAfterElement(),e.stopPropagation()}focusBeforeElement(){this.setForwardingFocus(!0),this.getBeforeElement().focus()}focusAfterElement(){this.setForwardingFocus(!0),this.getAfterElement().focus()}focusGrowingButton(){const e=this.getGrowingButton();e&&e.focus()}getGrowingButton(){return this.shadowRoot.querySelector(`[id="${this._id}-growing-btn"]`)}focusFirstItem(){const e=this.getFirstItem((e=>e._focusable));e&&e.focus()}focusPreviouslyFocusedItem(){const e=this.getPreviouslyFocusedItem();e&&e.focus()}focusFirstSelectedItem(){const e=this.getFirstItem((e=>e.selected&&e._focusable));e&&e.focus()}focusItem(e){this._itemNavigation.setCurrentItem(e),e.focus()}onFocusRequested(e){setTimeout((()=>{this.setPreviouslyFocusedItem(e.target),this.focusPreviouslyFocusedItem()}),0)}setForwardingFocus(e){this._forwardingFocus=e}getForwardingFocus(){return this._forwardingFocus}setPreviouslyFocusedItem(e){this._previouslyFocusedItem=e}getPreviouslyFocusedItem(){return this._previouslyFocusedItem}getFirstItem(e){const t=this.getItems();let i=null;if(!e)return t.length?t[0]:null;for(let n=0;n<t.length;n++)if(e(t[n])){i=t[n];break}return i}getAfterElement(){return this._afterElement||(this._afterElement=this.shadowRoot.querySelector(`[id="${this._id}-after"]`)),this._afterElement}getBeforeElement(){return this._beforeElement||(this._beforeElement=this.shadowRoot.querySelector(`[id="${this._id}-before"]`)),this._beforeElement}getIntersectionObserver(){return this.growingIntersectionObserver||(this.growingIntersectionObserver=new IntersectionObserver(this.onInteresection.bind(this),{root:null,rootMargin:"0px",threshold:1})),this.growingIntersectionObserver}};D8([_0()],L8.prototype,"headerText",void 0),D8([_0()],L8.prototype,"footerText",void 0),D8([_0({type:Boolean})],L8.prototype,"indent",void 0),D8([_0()],L8.prototype,"selectionMode",void 0),D8([_0()],L8.prototype,"noDataText",void 0),D8([_0()],L8.prototype,"separators",void 0),D8([_0()],L8.prototype,"growing",void 0),D8([_0()],L8.prototype,"growingButtonText",void 0),D8([_0({type:Boolean})],L8.prototype,"loading",void 0),D8([_0({type:Number})],L8.prototype,"loadingDelay",void 0),D8([_0()],L8.prototype,"accessibleName",void 0),D8([_0()],L8.prototype,"accessibleNameRef",void 0),D8([_0()],L8.prototype,"accessibleRole",void 0),D8([_0({type:Boolean})],L8.prototype,"_inViewport",void 0),D8([_0({type:Boolean})],L8.prototype,"_loadMoreActive",void 0),D8([y0({type:HTMLElement,default:!0,invalidateOnChildChange:!0})],L8.prototype,"items",void 0),D8([y0()],L8.prototype,"header",void 0),D8([f1("@ui5/webcomponents")],L8,"i18nBundle",void 0),L8=P8=D8([m0({tag:"ui5-list",fastNavigation:!0,renderer:d1,template:function(e,t,i){return i?u1`<div class="${a1(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${c1(this.onItemPress)} @ui5-close=${c1(this.onItemClose)} @ui5-toggle=${c1(this.onItemToggle)} @ui5-_request-tabindex-change=${c1(this.onItemTabIndexChange)} @ui5-_focused=${c1(this.onItemFocused)} @ui5-_forward-after=${c1(this.onForwardAfter)} @ui5-_forward-before=${c1(this.onForwardBefore)} @ui5-_selection-requested=${c1(this.onSelectionRequested)} @ui5-_focus-requested=${c1(this.onFocusRequested)}><${p1("ui5-busy-indicator",t,i)} id="${c1(this._id)}-busyIndicator" delay="${c1(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?e6.call(this,e,t,i):void 0}${this.shouldRenderH1?t6.call(this,e,t,i):void 0}${this.hasData?i6.call(this,e,t,i):void 0}<span id="${c1(this._id)}-modeLabel" class="ui5-hidden-text">${c1(this.ariaLabelModeText)}</span><ul id="${c1(this._id)}-listUl" class="ui5-list-ul" role="${c1(this.listAccessibleRole)}" aria-label="${c1(this.ariaLabelTxt)}" aria-labelledby="${c1(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?n6.call(this,e,t,i):void 0}</ul>${this.growsWithButton?r6.call(this,e,t,i):void 0}${this.footerText?s6.call(this,e,t,i):void 0}${this.hasData?a6.call(this,e,t,i):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><${p1("ui5-drop-indicator",t,i)} orientation="Horizontal" .ownerReference="${c1(this)}"></${p1("ui5-drop-indicator",t,i)}></${p1("ui5-busy-indicator",t,i)}></div> `:u1`<div class="${a1(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${c1(this.onItemPress)} @ui5-close=${c1(this.onItemClose)} @ui5-toggle=${c1(this.onItemToggle)} @ui5-_request-tabindex-change=${c1(this.onItemTabIndexChange)} @ui5-_focused=${c1(this.onItemFocused)} @ui5-_forward-after=${c1(this.onForwardAfter)} @ui5-_forward-before=${c1(this.onForwardBefore)} @ui5-_selection-requested=${c1(this.onSelectionRequested)} @ui5-_focus-requested=${c1(this.onFocusRequested)}><ui5-busy-indicator id="${c1(this._id)}-busyIndicator" delay="${c1(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?e6.call(this,e,t,i):void 0}${this.shouldRenderH1?t6.call(this,e,t,i):void 0}${this.hasData?i6.call(this,e,t,i):void 0}<span id="${c1(this._id)}-modeLabel" class="ui5-hidden-text">${c1(this.ariaLabelModeText)}</span><ul id="${c1(this._id)}-listUl" class="ui5-list-ul" role="${c1(this.listAccessibleRole)}" aria-label="${c1(this.ariaLabelTxt)}" aria-labelledby="${c1(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?n6.call(this,e,t,i):void 0}</ul>${this.growsWithButton?r6.call(this,e,t,i):void 0}${this.footerText?s6.call(this,e,t,i):void 0}${this.hasData?a6.call(this,e,t,i):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><ui5-drop-indicator orientation="Horizontal" .ownerReference="${c1(this)}"></ui5-drop-indicator></ui5-busy-indicator></div> `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/List.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}[growing-button]{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_load_more_padding);border-top:1px solid var(--sapList_BorderColor);border-bottom:var(--_ui5-v2-4-0_load_more_border-bottom);box-sizing:border-box;cursor:pointer;outline:none}[growing-button-inner]{display:flex;align-items:center;justify-content:center;flex-direction:row;min-height:var(--_ui5-v2-4-0_load_more_text_height);width:100%;color:var(--sapButton_TextColor);background-color:var(--sapList_Background);border:var(--_ui5-v2-4-0_load_more_border);border-radius:var(--_ui5-v2-4-0_load_more_border_radius);box-sizing:border-box}[growing-button-inner]:focus-visible{outline:var(--_ui5-v2-4-0_load_more_outline_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);outline-offset:-.125rem;border-color:transparent}[growing-button-inner]:hover{background-color:var(--sapList_Hover_Background)}[growing-button-inner]:active,[growing-button-inner][active]{background-color:var(--sapList_Active_Background);border-color:var(--sapList_Active_Background)}[growing-button-inner]:active>*,[growing-button-inner][active]>*{color:var(--sapList_Active_TextColor)}[growing-button-text],[growing-button-subtext]{text-align:center;font-family:"72override",var(--sapFontFamily);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}[growing-button-text]{height:var(--_ui5-v2-4-0_load_more_text_height);padding:.875rem 1rem 1rem;font-size:var(--_ui5-v2-4-0_load_more_text_font_size);font-weight:700}:host([loading]) .ui5-list-growing-button-busy-indicator:not([_is-busy]){display:none}:host([loading]) .ui5-list-growing-button-busy-indicator[_is-busy]+[growing-button-text]{padding-left:.5rem}[growing-button-subtext]{font-size:var(--sapFontSize);padding:var(--_ui5-v2-4-0_load_more_desc_padding)}:host(:not([hidden])){display:block;max-width:100%;width:100%;-webkit-tap-highlight-color:transparent}:host([indent]) .ui5-list-root{padding:2rem}:host([separators="None"]) .ui5-list-nodata{border-bottom:0}.ui5-list-root,.ui5-list-busy-indicator{width:100%;height:100%;position:relative;box-sizing:border-box}.ui5-list-scroll-container{overflow:auto;height:100%;width:100%}.ui5-list-ul{list-style-type:none;padding:0;margin:0}.ui5-list-ul:focus{outline:none}.ui5-list-focusarea{position:fixed}.ui5-list-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;font-size:var(--sapFontHeader4Size);font-family:"72override",var(--sapFontFamily);color:var(--sapGroup_TitleTextColor);height:3rem;line-height:3rem;padding:0 1rem;background-color:var(--sapGroup_TitleBackground);border-bottom:1px solid var(--sapGroup_TitleBorderColor)}.ui5-list-footer{height:2rem;box-sizing:border-box;-webkit-text-size-adjust:none;font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);line-height:2rem;background-color:var(--sapList_FooterBackground);color:var(--ui5-v2-4-0_list_footer_text_color);padding:0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-list-nodata{list-style-type:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:var(--sapTextColor);background-color:var(--sapList_Background);border-bottom:1px solid var(--sapList_BorderColor);padding:0 1rem!important;outline:none;height:var(--_ui5-v2-4-0_list_no_data_height);font-size:var(--_ui5-v2-4-0_list_no_data_font_size);font-family:"72override",var(--sapFontFamily)}.ui5-list-nodata:focus:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none;top:calc(50% + .125rem)}.ui5-list-nodata-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([growing="Scroll"]) .ui5-list-end-marker{display:inline-block}\n'},V5()],dependencies:[J3,z3,R8]}),v0("item-click",{detail:{item:{type:HTMLElement}},bubbles:!0,cancelable:!0}),v0("item-close",{detail:{item:{type:HTMLElement}},bubbles:!0}),v0("item-toggle",{detail:{item:{type:HTMLElement}},bubbles:!0}),v0("item-delete",{detail:{item:{type:HTMLElement}},bubbles:!0}),v0("selection-change",{detail:{selectedItems:{type:Array},previouslySelectedItems:{type:Array},targetItem:{type:HTMLElement},selectionComponentPressed:{type:Boolean},key:{type:String}},bubbles:!0,cancelable:!0}),v0("load-more",{bubbles:!0}),v0("item-focused",{detail:{item:{type:HTMLElement}},bubbles:!0}),v0("move-over",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),v0("move",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0})],L8),L8.define();const O8=L8;function F8(e,t,i){return i?u1`<${p1("ui5-dialog",t,i)} root-element accessible-name=${c1(this.accessibleName)} accessible-name-ref=${c1(this.accessibleNameRef)} accessible-role=${c1(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${c1(this.initialFocus)}" @ui5-before-open="${c1(this._beforeDialogOpen)}" @ui5-open="${c1(this._propagateDialogEvent)}" @ui5-before-close="${c1(this._propagateDialogEvent)}" @ui5-close="${c1(this._afterDialogClose)}" exportparts="content, header, footer" .open=${c1(this.open)}>${this._hideHeader?void 0:N8.call(this,e,t,i)}<slot></slot><slot slot="footer" name="footer"></slot></${p1("ui5-dialog",t,i)}>`:u1`<ui5-dialog root-element accessible-name=${c1(this.accessibleName)} accessible-name-ref=${c1(this.accessibleNameRef)} accessible-role=${c1(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${c1(this.initialFocus)}" @ui5-before-open="${c1(this._beforeDialogOpen)}" @ui5-open="${c1(this._propagateDialogEvent)}" @ui5-before-close="${c1(this._propagateDialogEvent)}" @ui5-close="${c1(this._afterDialogClose)}" exportparts="content, header, footer" .open=${c1(this.open)}>${this._hideHeader?void 0:N8.call(this,e,t,i)}<slot></slot><slot slot="footer" name="footer"></slot></ui5-dialog>`}function N8(e,t,i){return u1`${this.header.length?z8.call(this,e,t,i):U8.call(this,e,t,i)}`}function z8(e,t,i){return u1`<slot slot="header" name="header"></slot>`}function U8(e,t,i){return u1`<div class="${a1(this.classes.header)}" slot="header">${this.headerText?H8.call(this,e,t,i):void 0}${this._hideCloseButton?void 0:V8.call(this,e,t,i)}</div>`}function H8(e,t,i){return i?u1`<${p1("ui5-title",t,i)} level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${c1(this.headerText)}</${p1("ui5-title",t,i)}>`:u1`<ui5-title level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${c1(this.headerText)}</ui5-title>`}function V8(e,t,i){return i?u1`<${p1("ui5-button",t,i)} icon="decline" design="Transparent" accessible-name="${c1(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></${p1("ui5-button",t,i)}>`:u1`<ui5-button icon="decline" design="Transparent" accessible-name="${c1(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></ui5-button>`}function $8(e,t,i){return u1`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${l1(this.styles.root)}" class="${a1(this.classes.root)}" role="${c1(this._role)}" aria-modal="${c1(this._ariaModal)}" aria-label="${c1(this._ariaLabel)}" aria-labelledby="${c1(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${l1(this.styles.arrow)}"></span>${this._displayHeader?G8.call(this,e,t,i):void 0}<div style="${l1(this.styles.content)}" class="${a1(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?q8.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`}function G8(e,t,i){return u1`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?Q8.call(this,e,t,i):j8.call(this,e,t,i)}</header>`}function Q8(e,t,i){return u1`<slot name="header"></slot>`}function j8(e,t,i){return i?u1`<${p1("ui5-title",t,i)} level="H1" class="ui5-popup-header-text">${c1(this.headerText)}</${p1("ui5-title",t,i)}>`:u1`<ui5-title level="H1" class="ui5-popup-header-text">${c1(this.headerText)}</ui5-title>`}function q8(e,t,i){return u1`${this.footer.length?W8.call(this,e,t,i):void 0}`}function W8(e,t,i){return u1`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function X8(e,t,i){return u1`<header><div class="ui5-popup-header-root" id="ui5-popup-header" role="group" aria-describedby=${c1(this.effectiveAriaDescribedBy)} aria-roledescription=${c1(this.ariaRoleDescriptionHeaderText)} tabindex="${c1(this._headerTabIndex)}" @keydown="${this._onDragOrResizeKeyDown}" @mousedown="${this._onDragMouseDown}" part="header" state="${c1(this.state)}">${this.hasValueState?Y8.call(this,e,t,i):void 0}${this.header.length?K8.call(this,e,t,i):Z8.call(this,e,t,i)}${this.resizable?J8.call(this,e,t,i):i7.call(this,e,t,i)}</div></header>`}function Y8(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-dialog-value-state-icon" name="${c1(this._dialogStateIcon)}"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-dialog-value-state-icon" name="${c1(this._dialogStateIcon)}"></ui5-icon>`}function K8(e,t,i){return u1`<slot name="header"></slot>`}function Z8(e,t,i){return i?u1`<${p1("ui5-title",t,i)} level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${c1(this.headerText)}</${p1("ui5-title",t,i)}>`:u1`<ui5-title level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${c1(this.headerText)}</ui5-title>`}function J8(e,t,i){return u1`${this.draggable?e7.call(this,e,t,i):t7.call(this,e,t,i)}`}function e7(e,t,i){return u1`<span id="${c1(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${c1(this.ariaDescribedByHeaderTextDraggableAndResizable)}</span>`}function t7(e,t,i){return u1`<span id="${c1(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${c1(this.ariaDescribedByHeaderTextResizable)}</span>`}function i7(e,t,i){return u1`${this.draggable?n7.call(this,e,t,i):void 0}`}function n7(e,t,i){return u1`<span id="${c1(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${c1(this.ariaDescribedByHeaderTextDraggable)}</span>`}function r7(e,t,i){return u1`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function o7(e,t,i){return i?u1`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><${p1("ui5-icon",t,i)} name="resize-corner"></${p1("ui5-icon",t,i)}></div>`:u1`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><ui5-icon name="resize-corner"></ui5-icon></div>`}bJ("resize-corner",{pathData:"M384 160v32q0 12-10 22L182 406q-10 10-22 10h-32zM224 416l160-160v32q0 12-10 22l-96 96q-10 10-22 10h-32zm160-64v32q0 12-10 22t-22 10h-32z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("resize-corner",{pathData:"M282 416q-11 0-18.5-7.5T256 390t7-18l109-109q7-7 18-7t18.5 7.5T416 282t-7 18L300 409q-7 7-18 7zm-160 0q-11 0-18.5-7.5T96 390t7-18l269-269q7-7 18-7t18.5 7.5T416 122t-7 18L140 409q-7 7-18 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var s7,a7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const l7=16,c7={[m3.Negative]:"error",[m3.Critical]:"alert",[m3.Positive]:"sys-enter-2",[m3.Information]:"information"};let u7=s7=class extends B4{constructor(){super(),this.stretch=!1,this.draggable=!1,this.resizable=!1,this.state="None",this._draggedOrResized=!1,this._revertSize=()=>{Object.assign(this.style,{top:"",left:"",width:"",height:""})},this._screenResizeHandler=this._screenResize.bind(this),this._dragMouseMoveHandler=this._onDragMouseMove.bind(this),this._dragMouseUpHandler=this._onDragMouseUp.bind(this),this._resizeMouseMoveHandler=this._onResizeMouseMove.bind(this),this._resizeMouseUpHandler=this._onResizeMouseUp.bind(this),this._dragStartHandler=this._handleDragStart.bind(this)}static _isHeader(e){return e.classList.contains("ui5-popup-header-root")||"header"===e.getAttribute("slot")}get isModal(){return!0}get _ariaLabelledBy(){let e;return this.headerText&&!this._ariaLabel&&(e="ui5-popup-header-text"),e}get ariaRoleDescriptionHeaderText(){return this.resizable||this.draggable?s7.i18nBundle.getText(C2):void 0}get effectiveAriaDescribedBy(){return this.resizable||this.draggable?`${this._id}-descr`:void 0}get ariaDescribedByHeaderTextResizable(){return s7.i18nBundle.getText(E2)}get ariaDescribedByHeaderTextDraggable(){return s7.i18nBundle.getText(T2)}get ariaDescribedByHeaderTextDraggableAndResizable(){return s7.i18nBundle.getText(I2)}get _displayHeader(){return this.header.length||this.headerText||this.draggable||this.resizable}get _movable(){return!this.stretch&&this.onDesktop&&(this.draggable||this.resizable)}get _headerTabIndex(){return this._movable?"0":void 0}get _showResizeHandle(){return this.resizable&&this.onDesktop}get _minHeight(){let e=Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);const t=this._root.querySelector(".ui5-popup-header-root");t&&(e+=t.offsetHeight);const i=this._root.querySelector(".ui5-popup-footer-root");return i&&(e+=i.offsetHeight),e}get hasValueState(){return this.state!==m3.None}get _dialogStateIcon(){return c7[this.state]}get _role(){if(this.accessibleRole!==y4.None)return this.state===m3.Negative||this.state===m3.Critical?y4.AlertDialog.toLowerCase():this.accessibleRole.toLowerCase()}_show(){super._show(),this._center()}onBeforeRendering(){super.onBeforeRendering(),this._isRTL="rtl"===this.effectiveDir}onEnterDOM(){super.onEnterDOM(),this._attachScreenResizeHandler(),this.addEventListener("dragstart",this._dragStartHandler)}onExitDOM(){super.onExitDOM(),this._detachScreenResizeHandler(),this.removeEventListener("dragstart",this._dragStartHandler)}_resize(){super._resize(),this._draggedOrResized||this._center()}_screenResize(){this._center()}_attachScreenResizeHandler(){this._screenResizeHandlerAttached||(window.addEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!0)}_detachScreenResizeHandler(){this._screenResizeHandlerAttached&&(window.removeEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!1)}_center(){const e=window.innerHeight-this.offsetHeight,t=window.innerWidth-this.offsetWidth;Object.assign(this.style,{top:`${Math.round(e/2)}px`,left:`${Math.round(t/2)}px`})}_onDragMouseDown(e){if(!this._movable||!this.draggable||!s7._isHeader(e.target))return;const{top:t,left:i}=this.getBoundingClientRect(),{width:n,height:r}=window.getComputedStyle(this);Object.assign(this.style,{top:`${t}px`,left:`${i}px`,width:Math.round(100*Number.parseFloat(n))/100+"px",height:Math.round(100*Number.parseFloat(r))/100+"px"}),this._x=e.clientX,this._y=e.clientY,this._draggedOrResized=!0,this._attachMouseDragHandlers()}_onDragMouseMove(e){e.preventDefault();const{clientX:t,clientY:i}=e,n=this._x-t,r=this._y-i,{left:o,top:s}=this.getBoundingClientRect();Object.assign(this.style,{left:`${Math.floor(o-n)}px`,top:`${Math.floor(s-r)}px`}),this._x=t,this._y=i}_onDragMouseUp(){delete this._x,delete this._y,this._detachMouseDragHandlers()}_onDragOrResizeKeyDown(e){this._movable&&s7._isHeader(e.target)&&(this.draggable&&[C0,E0,x0,S0].some((t=>t(e)))?this._dragWithEvent(e):this.resizable&&[B0,R0,P0,D0].some((t=>t(e)))&&this._resizeWithEvent(e))}_dragWithEvent(e){const{top:t,left:i,width:n,height:r}=this.getBoundingClientRect();let o=0,s="top";switch(!0){case C0(e):o=t-l7,s="top";break;case E0(e):o=t+l7,s="top";break;case x0(e):o=i-l7,s="left";break;case S0(e):o=i+l7,s="left"}o=z5(o,0,"left"===s?window.innerWidth-n:window.innerHeight-r),this.style[s]=`${o}px`}_resizeWithEvent(e){this._draggedOrResized=!0,this.addEventListener("ui5-before-close",this._revertSize,{once:!0});const{top:t,left:i}=this.getBoundingClientRect(),n=window.getComputedStyle(this),r=Number.parseFloat(n.minWidth),o=window.innerWidth-i,s=window.innerHeight-t;let a=Number.parseFloat(n.width),l=Number.parseFloat(n.height);switch(!0){case B0(e):l-=l7;break;case R0(e):l+=l7;break;case P0(e):a-=l7;break;case D0(e):a+=l7}a=z5(a,r,o),l=z5(l,this._minHeight,s),Object.assign(this.style,{width:`${a}px`,height:`${l}px`})}_attachMouseDragHandlers(){window.addEventListener("mousemove",this._dragMouseMoveHandler),window.addEventListener("mouseup",this._dragMouseUpHandler)}_detachMouseDragHandlers(){window.removeEventListener("mousemove",this._dragMouseMoveHandler),window.removeEventListener("mouseup",this._dragMouseUpHandler)}_onResizeMouseDown(e){if(!this._movable||!this.resizable)return;e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect(),{width:n,height:r,minWidth:o}=window.getComputedStyle(this);this._initialX=e.clientX,this._initialY=e.clientY,this._initialWidth=Number.parseFloat(n),this._initialHeight=Number.parseFloat(r),this._initialTop=t,this._initialLeft=i,this._minWidth=Number.parseFloat(o),this._cachedMinHeight=this._minHeight,Object.assign(this.style,{top:`${t}px`,left:`${i}px`}),this._draggedOrResized=!0,this._attachMouseResizeHandlers()}_onResizeMouseMove(e){const{clientX:t,clientY:i}=e;let n,r;this._isRTL?(n=z5(this._initialWidth-(t-this._initialX),this._minWidth,this._initialLeft+this._initialWidth),r=z5(this._initialLeft+(t-this._initialX),0,this._initialX+this._initialWidth-this._minWidth)):n=z5(this._initialWidth+(t-this._initialX),this._minWidth,window.innerWidth-this._initialLeft);const o=z5(this._initialHeight+(i-this._initialY),this._cachedMinHeight,window.innerHeight-this._initialTop);Object.assign(this.style,{height:`${o}px`,width:`${n}px`,left:r?`${r}px`:void 0})}_onResizeMouseUp(){delete this._initialX,delete this._initialY,delete this._initialWidth,delete this._initialHeight,delete this._initialTop,delete this._initialLeft,delete this._minWidth,delete this._cachedMinHeight,this._detachMouseResizeHandlers()}_handleDragStart(e){this.draggable&&e.preventDefault()}_attachMouseResizeHandlers(){window.addEventListener("mousemove",this._resizeMouseMoveHandler),window.addEventListener("mouseup",this._resizeMouseUpHandler),this.addEventListener("ui5-before-close",this._revertSize,{once:!0})}_detachMouseResizeHandlers(){window.removeEventListener("mousemove",this._resizeMouseMoveHandler),window.removeEventListener("mouseup",this._resizeMouseUpHandler)}};a7([_0()],u7.prototype,"headerText",void 0),a7([_0({type:Boolean})],u7.prototype,"stretch",void 0),a7([_0({type:Boolean})],u7.prototype,"draggable",void 0),a7([_0({type:Boolean})],u7.prototype,"resizable",void 0),a7([_0()],u7.prototype,"state",void 0),a7([y0()],u7.prototype,"header",void 0),a7([y0()],u7.prototype,"footer",void 0),a7([f1("@ui5/webcomponents")],u7,"i18nBundle",void 0),u7=s7=a7([m0({tag:"ui5-dialog",template:function(e,t,i){return u1`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${l1(this.styles.root)}" class="${a1(this.classes.root)}" role="${c1(this._role)}" aria-modal="${c1(this._ariaModal)}" aria-label="${c1(this._ariaLabel)}" aria-labelledby="${c1(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span>${this._displayHeader?X8.call(this,e,t,i):void 0}<div style="${l1(this.styles.content)}" class="${a1(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this.footer.length?r7.call(this,e,t,i):void 0}${this._showResizeHandle?o7.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `},styles:[B4.styles,X4,{packageName:"@ui5/webcomponents",fileName:"themes/Dialog.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{min-width:20rem;min-height:6rem;max-height:94%;max-width:90%;flex-direction:column;box-shadow:var(--sapContent_Shadow3);border-radius:var(--sapElement_BorderCornerRadius)}:host([stretch]){width:90%;height:94%}:host([stretch][on-phone]){width:100%;height:100%;max-height:100%;max-width:100%;border-radius:0}:host([draggable]) .ui5-popup-header-root,:host([draggable]) ::slotted([slot="header"]){cursor:move}:host([draggable]) .ui5-popup-header-root *{cursor:auto}:host([draggable]) .ui5-popup-root{user-select:text}::slotted([slot="header"]){max-width:100%}.ui5-popup-root{display:flex;flex-direction:column;max-width:100vw}.ui5-popup-header-root{position:relative}.ui5-popup-header-root:before{content:"";position:absolute;inset-block-start:auto;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;height:var(--_ui5-v2-4-0_dialog_header_state_line_height);background:var(--sapObjectHeader_BorderColor)}:host([state="Negative"]) .ui5-popup-header-root:before{background:var(--sapErrorBorderColor)}:host([state="Information"]) .ui5-popup-header-root:before{background:var(--sapInformationBorderColor)}:host([state="Positive"]) .ui5-popup-header-root:before{background:var(--sapSuccessBorderColor)}:host([state="Critical"]) .ui5-popup-header-root:before{background:var(--sapWarningBorderColor)}.ui5-dialog-value-state-icon{margin-inline-end:.5rem;flex-shrink:0}:host([state="Negative"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_error_state_icon_color)}:host([state="Information"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_information_state_icon_color)}:host([state="Positive"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_success_state_icon_color)}:host([state="Critical"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_warning_state_icon_color)}.ui5-popup-header-root{outline:none}:host([desktop]) .ui5-popup-header-root:focus:after,.ui5-popup-header-root:focus-visible:after{content:"";position:absolute;left:var(--_ui5-v2-4-0_dialog_header_focus_left_offset);bottom:var(--_ui5-v2-4-0_dialog_header_focus_bottom_offset);right:var(--_ui5-v2-4-0_dialog_header_focus_right_offset);top:var(--_ui5-v2-4-0_dialog_header_focus_top_offset);border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_dialog_header_border_radius) var(--_ui5-v2-4-0_dialog_header_border_radius) 0 0;pointer-events:none}:host([stretch]) .ui5-popup-content{width:100%;height:100%}.ui5-popup-content{min-height:var(--_ui5-v2-4-0_dialog_content_min_height);flex:1 1 auto}.ui5-popup-resize-handle{position:absolute;bottom:-.5rem;inset-inline-end:-.5rem;cursor:var(--_ui5-v2-4-0_dialog_resize_cursor);width:1.5rem;height:1.5rem;border-radius:50%}.ui5-popup-resize-handle [ui5-icon]{color:var(--sapButton_Lite_TextColor)}::slotted([slot="footer"]){height:var(--_ui5-v2-4-0_dialog_footer_height)}::slotted([slot="footer"][ui5-bar][design="Footer"]){border-top:none}::slotted([slot="header"][ui5-bar]){box-shadow:none}::slotted([slot="footer"][ui5-toolbar]){border:0}:host::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}.ui5-block-layer{display:block}\n'},V5()],dependencies:[r5,...B4.dependencies]})],u7),u7.define();const h7=u7;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var d7,p7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let f7=d7=class extends e3{constructor(){super(),this.contentOnlyOnDesktop=!1,this._hideHeader=!1,this._hideCloseButton=!1}async openPopup(){TZ()?this._dialog&&(this._dialog.open=!0):await super.openPopup()}async _show(){if(!TZ())return super._show()}closePopup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;TZ()?null==(n=this._dialog)||n.closePopup(e,t,i):super.closePopup(e,t,i)}toggle(e){this.open?this.closePopup():(this.opener=e,this.open=!0)}get classes(){const e=super.classes;return e.header={"ui5-responsive-popover-header":!0,"ui5-responsive-popover-header-no-title":!this.headerText},e}get _dialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}get contentDOM(){return TZ()?this._dialog.contentDOM:super.contentDOM}get _isPhone(){return TZ()}get _displayHeader(){return(TZ()||!this.contentOnlyOnDesktop)&&super._displayHeader}get _displayFooter(){return TZ()||!this.contentOnlyOnDesktop}get _closeDialogAriaLabel(){return d7.i18nBundle.getText(a2)}_beforeDialogOpen(e){this._opened=!0,this.open=!0,this._propagateDialogEvent(e)}_afterDialogClose(e){this._opened=!1,this.open=!1,this._propagateDialogEvent(e)}_propagateDialogEvent(e){const t=e.type.replace("ui5-","");this.fireDecoratorEvent(t,e.detail)}get isModal(){return TZ()?this._dialog.isModal:super.isModal}};p7([_0({type:Boolean})],f7.prototype,"contentOnlyOnDesktop",void 0),p7([_0({type:Boolean})],f7.prototype,"_hideHeader",void 0),p7([_0({type:Boolean})],f7.prototype,"_hideCloseButton",void 0),p7([f1("@ui5/webcomponents")],f7,"i18nBundle",void 0),f7=d7=p7([m0({tag:"ui5-responsive-popover",styles:[e3.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopover.css.ts",content:":host{--_ui5-v2-4-0_input_width: 100%;min-width:6.25rem;min-height:2rem}:host([on-phone]){display:contents}.ui5-responsive-popover-header{height:var(--_ui5-v2-4-0-responsive_popover_header_height);display:flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment);align-items:center;width:100%}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header-no-title{justify-content:flex-end}\n"}],template:function(e,t,i){return u1`${this._isPhone?F8.call(this,e,t,i):$8.call(this,e,t,i)}`},dependencies:[...e3.dependencies,E5,h7]})],f7),f7.define();const g7=f7;function m7(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} mode="Decorative" class="ui5-select-option-icon" name="${c1(this.selectedOptionIcon)}"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon mode="Decorative" class="ui5-select-option-icon" name="${c1(this.selectedOptionIcon)}"></ui5-icon>`}function _7(e,t,i){return u1`<slot name="label"></slot>`}function v7(e,t,i){return u1`${c1(this.text)}`}function y7(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} name="slim-arrow-down" class="inputIcon" ?pressed="${this._iconPressed}"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon name="slim-arrow-down" class="inputIcon" ?pressed="${this._iconPressed}"></ui5-icon>`}function b7(e,t,i){return u1`<span id="${c1(this._id)}-valueStateDesc" class="ui5-hidden-text">${c1(this.valueStateText)}</span>`}function A7(e,t,i){return i?u1`<${p1("ui5-responsive-popover",t,i)} hide-arrow prevent-initial-focus part="popover" placement="Bottom" class="ui5-select-popover ${a1(this.classes.popover)}" horizontal-align="Start" @ui5-open="${c1(this._afterOpen)}" @ui5-before-open="${c1(this._beforeOpen)}" @ui5-close="${c1(this._afterClose)}" @keydown="${this._onkeydown}" style=${l1(this.styles.responsivePopover)}>${this._isPhone?w7.call(this,e,t,i):void 0}${this._isPhone?void 0:E7.call(this,e,t,i)}<${p1("ui5-list",t,i)} mode="SingleAuto" separators="None" @mousedown="${this._itemMousedown}" @ui5-item-click="${c1(this._handleItemPress)}"><slot></slot></${p1("ui5-list",t,i)}></${p1("ui5-responsive-popover",t,i)}>`:u1`<ui5-responsive-popover hide-arrow prevent-initial-focus part="popover" placement="Bottom" class="ui5-select-popover ${a1(this.classes.popover)}" horizontal-align="Start" @ui5-open="${c1(this._afterOpen)}" @ui5-before-open="${c1(this._beforeOpen)}" @ui5-close="${c1(this._afterClose)}" @keydown="${this._onkeydown}" style=${l1(this.styles.responsivePopover)}>${this._isPhone?w7.call(this,e,t,i):void 0}${this._isPhone?void 0:E7.call(this,e,t,i)}<ui5-list mode="SingleAuto" separators="None" @mousedown="${this._itemMousedown}" @ui5-item-click="${c1(this._handleItemPress)}"><slot></slot></ui5-list></ui5-responsive-popover>`}function w7(e,t,i){return i?u1`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${c1(this._headerTitleText)}</span><${p1("ui5-button",t,i)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._toggleRespPopover}"></${p1("ui5-button",t,i)}></div>${this.hasValueStateText?x7.call(this,e,t,i):void 0}</div>`:u1`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${c1(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._toggleRespPopover}"></ui5-button></div>${this.hasValueStateText?x7.call(this,e,t,i):void 0}</div>`}function x7(e,t,i){return u1`<div class="${a1(this.classes.popoverValueState)} row ui5-select-value-state-dialog-header">${this.shouldDisplayDefaultValueStateMessage?S7.call(this,e,t,i):C7.call(this,e,t,i)}</div>`}function S7(e,t,i){return u1`${c1(this.valueStateText)}`}function C7(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}function E7(e,t,i){return u1`${this.hasValueStateText?T7.call(this,e,t,i):void 0}`}function T7(e,t,i){return i?u1`<div class="${a1(this.classes.popoverValueState)}" style=${l1(this.styles.responsivePopoverHeader)}><${p1("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></${p1("ui5-icon",t,i)}>${this.shouldDisplayDefaultValueStateMessage?I7.call(this,e,t,i):M7.call(this,e,t,i)}</div>`:u1`<div class="${a1(this.classes.popoverValueState)}" style=${l1(this.styles.responsivePopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></ui5-icon>${this.shouldDisplayDefaultValueStateMessage?I7.call(this,e,t,i):M7.call(this,e,t,i)}</div>`}function I7(e,t,i){return u1`${c1(this.valueStateText)}`}function M7(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}function k7(e,t,i){return i?u1`<${p1("ui5-popover",t,i)} part="popover" skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" horizontal-align="Start"><div class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.popoverHeader)}"><${p1("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></${p1("ui5-icon",t,i)}>${this.shouldDisplayDefaultValueStateMessage?B7.call(this,e,t,i):R7.call(this,e,t,i)}</div></${p1("ui5-popover",t,i)}>`:u1`<ui5-popover part="popover" skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" horizontal-align="Start"><div class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></ui5-icon>${this.shouldDisplayDefaultValueStateMessage?B7.call(this,e,t,i):R7.call(this,e,t,i)}</div></ui5-popover>`}function B7(e,t,i){return u1`${c1(this.valueStateText)}`}function R7(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));const P7={packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopoverCommon.css.ts",content:'.input-root-phone{flex:1;position:relative;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color);border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box}.input-root-phone [inner-input]{padding:0 .5rem;width:100%;height:100%}.input-root-phone [inner-input]:focus{background-color:var(--sapField_Focus_Background)}.input-root-phone:focus-within:before{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}.input-root-phone [value-state=Negative] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Positive] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Critical] .inputIcon[data-ui5-compact-size]{padding:.1875rem .5rem}[inner-input]{background:transparent;color:inherit;border:none;font-style:normal;-webkit-appearance:none;-moz-appearance:textfield;line-height:normal;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;min-width:3rem;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}[inner-input]::selection,[inner-input]::-moz-selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}[inner-input]::-webkit-input-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}[inner-input]::-moz-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}.input-root-phone[value-state]:not([value-state=None]){border-width:var(--_ui5-v2-4-0_input_state_border_width)}.input-root-phone[value-state=Negative] [inner-input],.input-root-phone[value-state=Critical] [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style)}.input-root-phone[value-state=Negative] [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}.input-root-phone[value-state=Negative]:not([readonly]){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}.input-root-phone[value-state=Negative]:not([readonly]):not([disabled]),.input-root-phone[value-state=Critical]:not([readonly]):not([disabled]),.input-root-phone[value-state=Information]:not([readonly]):not([disabled]){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}.input-root-phone[value-state=Critical]:not([readonly]){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}.input-root-phone[value-state=Positive]:not([readonly]){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width)}.input-root-phone[value-state=Positive]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}.input-root-phone[value-state=Positive]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}.input-root-phone[value-state=Information]:not([readonly]){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width)}.input-root-phone[value-state=Information]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}.ui5-multi-combobox-toggle-button{margin-left:.5rem}.ui5-responsive-popover-header{width:100%;min-height:2.5rem;display:flex;flex-direction:column}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header .row{box-sizing:border-box;padding:.25rem 1rem;min-height:2.5rem;display:flex;justify-content:center;align-items:center;font-size:var(--sapFontHeader5Size)}.ui5-responsive-popover-footer{display:flex;justify-content:flex-end;padding:.25rem 0;width:100%}.ui5-responsive-popover-close-btn{position:absolute;right:1rem}\n'};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));const D7={packageName:"@ui5/webcomponents",fileName:"themes/ValueStateMessage.css.ts",content:'.ui5-valuestatemessage-popover{border-radius:var(--_ui5-v2-4-0_value_state_message_popover_border_radius);box-shadow:var(--_ui5-v2-4-0_value_state_message_popover_box_shadow)}.ui5-input-value-state-message-icon{width:var(--_ui5-v2-4-0_value_state_message_icon_width);height:var(--_ui5-v2-4-0_value_state_message_icon_height);display:var(--_ui5-v2-4-0_input_value_state_icon_display);position:absolute;padding-right:.375rem}.ui5-valuestatemessage-root .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_input_value_state_icon_offset)}.ui5-input-value-state-message-icon[name=error]{color:var(--sapNegativeElementColor)}.ui5-input-value-state-message-icon[name=alert]{color:var(--sapCriticalElementColor)}.ui5-input-value-state-message-icon[name=success]{color:var(--sapPositiveElementColor)}.ui5-input-value-state-message-icon[name=information]{color:var(--sapInformativeElementColor)}.ui5-valuestatemessage-root{box-sizing:border-box;display:inline-block;color:var(--sapTextColor);font-size:var(--sapFontSmallSize);font-family:"72override",var(--sapFontFamily);height:auto;padding:var(--_ui5-v2-4-0_value_state_message_padding);overflow:hidden;text-overflow:ellipsis;min-width:6.25rem;border:var(--_ui5-v2-4-0_value_state_message_border);line-height:var(--_ui5-v2-4-0_value_state_message_line_height)}[ui5-responsive-popover] .ui5-valuestatemessage-header,[ui5-popover] .ui5-valuestatemessage-header{min-height:2rem}[ui5-responsive-popover] .ui5-valuestatemessage-header{padding:var(--_ui5-v2-4-0_value_state_header_padding);border:var(--_ui5-v2-4-0_value_state_header_border);border-bottom:var(--_ui5-v2-4-0_value_state_header_border_bottom);flex-grow:1;position:relative}.ui5-valuestatemessage--success{background:var(--sapSuccessBackground)}.ui5-valuestatemessage--warning{background:var(--sapWarningBackground)}.ui5-valuestatemessage--error{background:var(--sapErrorBackground)}.ui5-valuestatemessage--information{background:var(--sapInformationBackground)}.ui5-responsive-popover-header[focused],.ui5-responsive-popover-header:focus{outline-offset:var(--_ui5-v2-4-0_value_state_header_offset);outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor)}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(content){padding:0}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(footer){min-height:0}.ui5-valuestatemessage-popover::part(header),.ui5-popover-with-value-state-header::part(header),.ui5-popover-with-value-state-header-phone::part(header){margin-bottom:0}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-root{padding:var(--_ui5-v2-4-0_value_state_message_padding_phone);width:100%}.ui5-popover-with-value-state-header-phone .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_value_state_message_icon_offset_phone)}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-header{position:relative;flex:none;top:0;left:0}.ui5-popover-with-value-state-header-phone::part(content){padding:0;overflow:hidden;display:flex;flex-direction:column}.ui5-popover-with-value-state-header-phone [ui5-list]{overflow:auto}[ui5-responsive-popover] .ui5-valuestatemessage--error{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_error)}[ui5-responsive-popover] .ui5-valuestatemessage--information{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_information)}[ui5-responsive-popover] .ui5-valuestatemessage--success{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_success)}[ui5-responsive-popover] .ui5-valuestatemessage--warning{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_warning)}[ui5-responsive-popover].ui5-popover-with-value-state-header .ui5-valuestatemessage-root:has(+[ui5-list]:empty){box-shadow:none}\n'};nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var L7,O7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let F7=L7=class extends f0{constructor(){super(...arguments),this.disabled=!1,this.valueState="None",this.required=!1,this.readonly=!1,this._iconPressed=!1,this.opened=!1,this._listWidth=0,this.focused=!1,this._selectedIndexBeforeOpen=-1,this._escapePressed=!1,this._lastSelectedOption=null,this._typedChars=""}get formValidityMessage(){return L7.i18nBundle.getText(B2)}get formValidity(){const e=this.selectedOption;return{valueMissing:this.required&&e&&""===e.getAttribute("value")}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){const e=this.selectedOption;return e?e.hasAttribute("value")?e.value:e.textContent:""}onBeforeRendering(){this._ensureSingleSelection(),this.style.setProperty(AK("--_ui5-input-icons-count"),`${this.iconsCount}`)}onAfterRendering(){this.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover),this._isPickerOpen&&(this._listWidth||(this._listWidth=this.responsivePopover.offsetWidth))}_ensureSingleSelection(){let e=this.options.findLastIndex((e=>e.selected));e=-1===e?0:e;for(let t=0;t<this.options.length&&(this.options[t].selected=e===t,e!==t);t++);}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}get _isPickerOpen(){return!!this.responsivePopover&&this.responsivePopover.open}_respPopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}set value(e){Array.from(this.children).forEach((t=>{t.selected=!((t.getAttribute("value")||t.textContent)!==e)}))}get value(){var e,t;return(null==(e=this.selectedOption)?void 0:e.value)||(null==(t=this.selectedOption)?void 0:t.textContent)||""}get _selectedIndex(){return this.options.findIndex((e=>e.selected))}get selectedOption(){return this.options.find((e=>e.selected))}get text(){var e;return null==(e=this.selectedOption)?void 0:e.effectiveDisplayText}_toggleRespPopover(){this.disabled||this.readonly||(this._iconPressed=!0,this.responsivePopover=this._respPopover(),this._isPickerOpen?this.responsivePopover.open=!1:(this.responsivePopover.opener=this,this.responsivePopover.open=!0))}_onkeydown(e){var t;(N0(e)||z0(e))&&this._isPickerOpen?this.responsivePopover.open=!1:((t=e).key?(e=>"F4"===e.key&&!j0(e))(t)||(e=>("ArrowDown"===e.key||"Down"===e.key||"ArrowUp"===e.key||"Up"===e.key)&&W0(e,!1,!0,!1))(t):115===t.keyCode&&!j0(t)||40===t.keyCode&&W0(t,!1,!0,!1))?(e.preventDefault(),this._toggleRespPopover()):A0(e)?e.preventDefault():F0(e)&&this._isPickerOpen?this._escapePressed=!0:L0(e)?this._handleHomeKey(e):O0(e)?this._handleEndKey(e):b0(e)?this._handleSelectionChange():(C0(e)||E0(e))&&this._handleArrowNavigation(e)}_handleKeyboardNavigation(e){if(b0(e)||this.readonly)return;const t=e.key.toLowerCase();this._typedChars+=t;const i=/^(.)\1+$/i.test(this._typedChars)?t:this._typedChars;clearTimeout(this._typingTimeoutID),this._typingTimeoutID=setTimeout((()=>{this._typedChars="",this._typingTimeoutID=-1}),1e3),this._selectTypedItem(i)}_selectTypedItem(e){const t=this._selectedIndex,i=this._searchNextItemByText(e);if(i){const e=this.options.indexOf(i);this._changeSelectedItem(this._selectedIndex,e),t!==this._selectedIndex&&(this.itemSelectionAnnounce(),this._scrollSelectedItem())}}_searchNextItemByText(e){let t=this.options.slice(0);const i=t.splice(this._selectedIndex+1,t.length-this._selectedIndex),n=t.splice(0,t.length-1);return t=i.concat(n),t.find((t=>t.effectiveDisplayText.toLowerCase().startsWith(e)))}_handleHomeKey(e){e.preventDefault(),this.readonly||this._changeSelectedItem(this._selectedIndex,0)}_handleEndKey(e){if(e.preventDefault(),this.readonly)return;const t=this.options.length-1;this._changeSelectedItem(this._selectedIndex,t)}_onkeyup(e){A0(e)&&(this._isPickerOpen?this._handleSelectionChange():this._toggleRespPopover())}_getItemIndex(e){return this.options.indexOf(e)}_select(e){const t=this._selectedIndex;e<0||e>=this.options.length||0===this.options.length||(this.options[t]&&(this.options[t].selected=!1),t!==e&&this.fireDecoratorEvent("live-change",{selectedOption:this.options[e]}),this.options[e].selected=!0)}_handleItemPress(e){const t=e.detail.item,i=this._getItemIndex(t);this._handleSelectionChange(i)}_itemMousedown(e){e.preventDefault()}_onclick(){this.getFocusDomRef().focus(),this._toggleRespPopover()}_handleSelectionChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._selectedIndex;this._typedChars="",this._select(e),this._toggleRespPopover()}_scrollSelectedItem(){var e;if(this._isPickerOpen){const t=null==(e=this._currentlySelectedOption)?void 0:e.getDomRef();t&&t.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}}_handleArrowNavigation(e){if(e.preventDefault(),this.readonly)return;let t=-1;const i=this._selectedIndex;t=E0(e)?this._getNextOptionIndex():this._getPreviousOptionIndex(),this._changeSelectedItem(this._selectedIndex,t),i!==this._selectedIndex&&(this.itemSelectionAnnounce(),this._scrollSelectedItem())}_changeSelectedItem(e,t){const i=this.options,n=i[e],r=i[t];n!==r&&(n.selected=!1,n.focused=!1,r.selected=!0,r.focused=!0,this.fireDecoratorEvent("live-change",{selectedOption:r}),this._isPickerOpen||this._fireChangeEvent(r))}_getNextOptionIndex(){return this._selectedIndex===this.options.length-1?this._selectedIndex:this._selectedIndex+1}_getPreviousOptionIndex(){return 0===this._selectedIndex?this._selectedIndex:this._selectedIndex-1}_beforeOpen(){this._selectedIndexBeforeOpen=this._selectedIndex,this._lastSelectedOption=this.options[this._selectedIndex]}_afterOpen(){this.opened=!0,this.fireDecoratorEvent("open"),this.itemSelectionAnnounce(),this._scrollSelectedItem(),this._applyFocusToSelectedItem()}_applyFocusToSelectedItem(){this.options.forEach((e=>{e.focused=e.selected}))}_afterClose(){this.opened=!1,this._iconPressed=!1,this._listWidth=0,this._escapePressed?(this._select(this._selectedIndexBeforeOpen),this._escapePressed=!1):this._lastSelectedOption!==this.options[this._selectedIndex]&&(this._fireChangeEvent(this.options[this._selectedIndex]),this._lastSelectedOption=this.options[this._selectedIndex]),this.fireDecoratorEvent("close")}get hasCustomLabel(){return!!this.label.length}_fireChangeEvent(e){const t=!this.fireDecoratorEvent("change",{selectedOption:e});this.fireDecoratorEvent("selected-item-changed"),t&&this._select(this._selectedIndexBeforeOpen)}get valueStateTextMappings(){return{[m3.Positive]:L7.i18nBundle.getText(b2),[m3.Information]:L7.i18nBundle.getText(y2),[m3.Negative]:L7.i18nBundle.getText(_2),[m3.Critical]:L7.i18nBundle.getText(v2)}}get valueStateTypeMappings(){return{[m3.Positive]:L7.i18nBundle.getText(g2),[m3.Information]:L7.i18nBundle.getText(m2),[m3.Negative]:L7.i18nBundle.getText(p2),[m3.Critical]:L7.i18nBundle.getText(f2)}}get valueStateText(){let e;return e=this.shouldDisplayDefaultValueStateMessage?this.valueStateDefaultText:this.valueStateMessage.map((e=>e.textContent)).join(" "),`${this.valueStateTypeText} ${e}`}get valueStateDefaultText(){return this.valueState!==m3.None?this.valueStateTextMappings[this.valueState]:""}get valueStateTypeText(){return this.valueState!==m3.None?this.valueStateTypeMappings[this.valueState]:""}get hasValueState(){return this.valueState!==m3.None}get valueStateTextId(){return this.hasValueState?`${this._id}-valueStateDesc`:void 0}get isDisabled(){return this.disabled||void 0}get _headerTitleText(){return L7.i18nBundle.getText(j1)}get _currentlySelectedOption(){return this.options[this._selectedIndex]}get _effectiveTabIndex(){return this.disabled||this.responsivePopover&&this.responsivePopover.open?"-1":"0"}get _valueStateMessageInputIcon(){return this.valueState!==m3.None?{Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"}[this.valueState]:""}get iconsCount(){return this.selectedOptionIcon?2:1}get classes(){return{popoverValueState:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage--success":this.valueState===m3.Positive,"ui5-valuestatemessage--error":this.valueState===m3.Negative,"ui5-valuestatemessage--warning":this.valueState===m3.Critical,"ui5-valuestatemessage--information":this.valueState===m3.Information},popover:{"ui5-select-popover-valuestate":this.hasValueState}}}get styles(){return{popoverHeader:{"max-width":`${this.offsetWidth}px`},responsivePopoverHeader:{display:this.options.length&&0===this._listWidth?"none":"inline-block",width:`${this.options.length?this._listWidth:this.offsetWidth}px`},responsivePopover:{"min-width":`${this.offsetWidth}px`}}}get ariaLabelText(){return z2(this)}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateText}get hasValueStateText(){return this.hasValueState&&this.valueState!==m3.Positive}get shouldOpenValueStateMessagePopover(){return this.focused&&this.hasValueStateText&&!this._iconPressed&&!this._isPickerOpen&&!this._isPhone}get _ariaRoleDescription(){return L7.i18nBundle.getText(G1)}get _isPhone(){return TZ()}itemSelectionAnnounce(){let e;const t=this.options.length,i=L7.i18nBundle.getText(K1,this._selectedIndex+1,t);this.focused&&this._currentlySelectedOption&&(e=`${this._currentlySelectedOption.textContent} ${this._isPickerOpen?i:""}`,(e=>{const t=p3;t.textContent="",t.textContent=e,setTimeout((()=>{t.textContent===e&&(t.textContent="")}),3e3)})(e))}openValueStatePopover(){this.valueStatePopover=this._getPopover(),this.valueStatePopover&&(this.valueStatePopover.opener=this,this.valueStatePopover.open=!0)}closeValueStatePopover(){this.valueStatePopover&&(this.valueStatePopover.open=!1)}toggleValueStatePopover(e){e?this.openValueStatePopover():this.closeValueStatePopover()}get selectedOptionIcon(){return this.selectedOption&&this.selectedOption.icon}_getPopover(){return this.shadowRoot.querySelector("[ui5-popover]")}};function N7(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon part="icon" name="${c1(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function z7(e,t,i){return u1`<span part="additional-text" class="ui5-li-additional-text">${c1(this.additionalText)}</span>`}O7([_0({type:Boolean})],F7.prototype,"disabled",void 0),O7([_0()],F7.prototype,"name",void 0),O7([_0()],F7.prototype,"valueState",void 0),O7([_0({type:Boolean})],F7.prototype,"required",void 0),O7([_0({type:Boolean})],F7.prototype,"readonly",void 0),O7([_0()],F7.prototype,"accessibleName",void 0),O7([_0()],F7.prototype,"accessibleNameRef",void 0),O7([_0({type:Boolean,noAttribute:!0})],F7.prototype,"_iconPressed",void 0),O7([_0({type:Boolean})],F7.prototype,"opened",void 0),O7([_0({type:Number,noAttribute:!0})],F7.prototype,"_listWidth",void 0),O7([_0({type:Boolean})],F7.prototype,"focused",void 0),O7([y0({default:!0,type:HTMLElement,invalidateOnChildChange:!0})],F7.prototype,"options",void 0),O7([y0()],F7.prototype,"valueStateMessage",void 0),O7([y0()],F7.prototype,"label",void 0),O7([_0({noAttribute:!0})],F7.prototype,"value",null),O7([f1("@ui5/webcomponents")],F7,"i18nBundle",void 0),F7=L7=O7([m0({tag:"ui5-select",languageAware:!0,formAssociated:!0,renderer:d1,template:function(e,t,i){return u1`<div class="ui5-select-root ui5-input-focusable-element" id="${c1(this._id)}-select" @click="${this._onclick}">${this.selectedOptionIcon?m7.call(this,e,t,i):void 0}<div class="ui5-select-label-root" data-sap-focus-ref tabindex="${c1(this._effectiveTabIndex)}" role="combobox" aria-haspopup="listbox" aria-label="${c1(this.ariaLabelText)}" aria-describedby="${c1(this.valueStateTextId)}" aria-disabled="${c1(this.isDisabled)}" aria-required="${c1(this.required)}" aria-readonly="${c1(this.readonly)}" aria-expanded="${c1(this._isPickerOpen)}" aria-roledescription="${c1(this._ariaRoleDescription)}" @keydown="${this._onkeydown}" @keypress="${this._handleKeyboardNavigation}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.hasCustomLabel?_7.call(this,e,t,i):v7.call(this,e,t,i)}</div>${this.readonly?void 0:y7.call(this,e,t,i)}${this.hasValueState?b7.call(this,e,t,i):void 0}</div>${this.options?A7.call(this,e,t,i):void 0}${this.shouldOpenValueStateMessagePopover?k7.call(this,e,t,i):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Select.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}.ui5-select-root{min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));width:100%;height:100%;display:flex;outline:none;cursor:pointer;overflow:hidden;border-radius:var(--_ui5-v2-4-0_input_border_radius)}.ui5-select-label-root{flex-shrink:1;flex-grow:1;align-self:center;min-width:1rem;padding-inline-start:.5rem;cursor:pointer;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--_ui5-v2-4-0_select_label_color);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400}.ui5-select-option-icon{padding-inline-start:.5rem;color:var(--sapField_TextColor);align-self:center}:host(:not([disabled])){cursor:pointer}\n'},P7,D7,{packageName:"@ui5/webcomponents",fileName:"themes/SelectPopover.css.ts",content:".ui5-select-popover::part(content),.ui5-select-popover::part(header){padding:0}\n"}],dependencies:[d3,g7,e3,O8,r5,E5]}),v0("change",{detail:{selectedOption:{type:HTMLElement}},bubbles:!0,cancelable:!0}),v0("live-change",{detail:{selectedOption:{type:HTMLElement}},bubbles:!0}),v0("open",{bubbles:!0}),v0("close"),v0("selected-item-changed",{bubbles:!0})],F7),F7.define(),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var U7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let H7=class extends v6{get displayIconBegin(){return!!this.icon}get effectiveDisplayText(){return this.textContent||""}};function V7(e,t,i){return i?u1`<div class="ui5-cp-default-color-button-wrapper"><${p1("ui5-button",t,i)} class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${c1(this.colorPaletteDefaultColorText)}</${p1("ui5-button",t,i)}><div class="ui5-cp-separator"></div></div>`:u1`<div class="ui5-cp-default-color-button-wrapper"><ui5-button class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${c1(this.colorPaletteDefaultColorText)}</ui5-button><div class="ui5-cp-separator"></div></div>`}function $7(e,t,i,n,r){return u1`<slot name="${c1(n._individualSlot)}"></slot>`}function G7(e,t,i){return i?u1`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><${p1("ui5-button",t,i)} design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${c1(this.colorPaletteMoreColorsText)}</${p1("ui5-button",t,i)}></div>`:u1`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><ui5-button design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${c1(this.colorPaletteMoreColorsText)}</ui5-button></div>`}function Q7(e,t,i){return u1`<div class="ui5-cp-recent-colors-wrapper"><div class="ui5-cp-separator"></div><div class="ui5-cp-recent-colors-container" @keydown="${this._onRecentColorsContainerKeyDown}">${s1(this.recentColors,((e,t)=>e._id||t),((n,r)=>j7.call(this,e,t,i,n,r)))}</div></div>`}function j7(e,t,i,n,r){return i?u1`<${p1("ui5-color-palette-item",t,i)} value="${c1(n)}"></${p1("ui5-color-palette-item",t,i)}>`:u1`<ui5-color-palette-item value="${c1(n)}"></ui5-color-palette-item>`}function q7(e,t,i){return i?u1`<${p1("ui5-dialog",t,i)} header-text="${c1(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><${p1("ui5-color-picker",t,i)}></${p1("ui5-color-picker",t,i)}></div><div slot="footer" class="ui5-cp-dialog-footer"><${p1("ui5-button",t,i)} design="Emphasized" @click="${this._chooseCustomColor}">${c1(this.colorPaletteDialogOKButton)}</${p1("ui5-button",t,i)}><${p1("ui5-button",t,i)} design="Transparent" @click="${this._closeDialog}">${c1(this.colorPaletteCancelButton)}</${p1("ui5-button",t,i)}></div></${p1("ui5-dialog",t,i)}>`:u1`<ui5-dialog header-text="${c1(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><ui5-color-picker></ui5-color-picker></div><div slot="footer" class="ui5-cp-dialog-footer"><ui5-button design="Emphasized" @click="${this._chooseCustomColor}">${c1(this.colorPaletteDialogOKButton)}</ui5-button><ui5-button design="Transparent" @click="${this._closeDialog}">${c1(this.colorPaletteCancelButton)}</ui5-button></div></ui5-dialog>`}U7([y0({type:Node,default:!0,invalidateOnChildChange:!0})],H7.prototype,"text",void 0),U7([_0()],H7.prototype,"value",void 0),U7([_0()],H7.prototype,"icon",void 0),U7([_0()],H7.prototype,"additionalText",void 0),U7([_0()],H7.prototype,"tooltip",void 0),U7([_0({type:Boolean})],H7.prototype,"selected",void 0),H7=U7([m0({tag:"ui5-option",template:function(e,t,i){return u1`<li part="native-li" data-sap-focus-ref tabindex="${c1(this._effectiveTabIndex)}" class="${a1(this.classes.main)}" @focusin="${this._onfocusin}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" draggable="${c1(this.movable)}" @click="${this._onclick}"  role="option" title="${c1(this.tooltip)}" ><div part="content" id="${c1(this._id)}-content" class="ui5-li-content">${this.displayIconBegin?N7.call(this,e,t,i):void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.additionalText?z7.call(this,e,t,i):void 0}</div></div></li> `},styles:[v6.styles,U6,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemIcon.css.ts",content:".ui5-li-icon{color:var(--sapList_TextColor);min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/OptionBase.css.ts",content:":host{height:var(--_ui5-v2-4-0_list_item_dropdown_base_height)}\n"}],dependencies:[r5]})],H7),H7.define(),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var W7,X7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Y7=W7=class extends f0{constructor(){super(),this.value="",this.selected=!1,this.forcedTabIndex="-1",this.onPhone=!1,this._disabled=!1}onBeforeRendering(){this._disabled=!this.value,this.onPhone=TZ(),this.setAttribute("style",`background-color: ${this.value}`);const e=this.offsetHeight+4;this.style.setProperty(AK("--_ui5_color_palette_item_height"),`${e}px`)}get colorLabel(){return W7.i18nBundle.getText(M1)}get styles(){return{root:{"background-color":this.value}}}get classes(){return{root:{"ui5-cp-item":!0}}}};X7([_0()],Y7.prototype,"value",void 0),X7([_0({type:Boolean})],Y7.prototype,"selected",void 0),X7([_0({noAttribute:!0})],Y7.prototype,"forcedTabIndex",void 0),X7([_0({type:Number})],Y7.prototype,"index",void 0),X7([_0({type:Boolean})],Y7.prototype,"onPhone",void 0),X7([_0({type:Boolean})],Y7.prototype,"_disabled",void 0),X7([f1("@ui5/webcomponents")],Y7,"i18nBundle",void 0),Y7=W7=X7([m0({tag:"ui5-color-palette-item",renderer:d1,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteItem.css.ts",content:':host(:not([hidden])){height:var(--_ui5-v2-4-0_color-palette-item-height);width:var(--_ui5-v2-4-0_color-palette-item-height);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:var(--_ui5-v2-4-0_color-palette-item-outer-border-radius);display:inline-block;margin:var(--_ui5-v2-4-0_color-palette-item-margin);box-sizing:border-box}:host(:not([_disabled]):hover),:host([selected]){height:var(--_ui5-v2-4-0_color-palette-item-hover-height);width:var(--_ui5-v2-4-0_color-palette-item-hover-height);margin:var(--_ui5-v2-4-0_color-palette-item-hover-margin);border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius)}:host(:not([hidden])[on-phone]){width:calc(100% - .5rem);padding-block-start:calc(100% - .625rem);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:.25rem;display:inline-block;margin:.625rem;height:0;max-width:4.5rem;max-height:4.5rem}:host([selected][on-phone]){padding-block-start:calc(100% - .125rem);width:100%;margin:0}.ui5-cp-item{position:relative;box-sizing:border-box;border-radius:var(--_ui5-v2-4-0_color-palette-item-inner-border-radius);width:100%;height:100%}:host(:not([_disabled]):not([on-phone]):hover) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius)}:host(:not([_disabled])[on-phone]) .ui5-cp-item{border-radius:.1875rem}.ui5-cp-item:hover:not(:focus),:host([selected]:not([on-phone])) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius);box-sizing:border-box}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus,:host([selected]:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item{border:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border)}:host([selected]) .ui5-cp-item:focus,:host(:not([_disabled])) .ui5-cp-item:focus{outline:none}:host(:not([_disabled]):not([on-phone]):focus) .ui5-cp-item{pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):focus:not(:hover)) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host([selected]:not([_disabled]):not([on-phone]):not(:focus):not(:hover)) .ui5-cp-item:after,:host([selected]:not([_disabled]):not([on-phone]):not(:focus):hover) .ui5-cp-item:after,:host(:not([selected]):not([on-phone]):hover) .ui5-cp-item:after{content:"";box-sizing:border-box;position:absolute;inset:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset) - .0625rem);border:var(--_ui5-v2-4-0_color-palette-item-after-not-focus-color);border-radius:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius) + .0625rem);pointer-events:none}:host(:not([_disabled]):not([on-phone]):not([selected]):not(:hover)) .ui5-cp-item:focus:not(:hover):after{border:var(--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border)}:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before,:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:hover:before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border-before);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before,:host(:not([disabled])) .ui5-cp-item:focus-visible:after{content:"";box-sizing:border-box;position:absolute;pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius)}:host(:not([disabled])) .ui5-cp-item:focus-visible:after{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border)}\n'},template:function(e,t,i){return u1`<div class="${a1(this.classes.root)}" style="${l1(this.styles.root)}" value="${c1(this.value)}" tabindex="${c1(this.forcedTabIndex)}" role="button" aria-label="${c1(this.colorLabel)} - ${c1(this.index)}: ${c1(this.value)}" title="${c1(this.colorLabel)} - ${c1(this.index)}: ${c1(this.value)}" ?disabled="${this._disabled}"></div>`},shadowRootOptions:{delegatesFocus:!0}})],Y7),Y7.define();const K7=Y7;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var Z7,J7=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let e9=Z7=class extends f0{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.popupMode=!1,this.onPhone=!1,this._shouldFocusRecentColors=!1,this._itemNavigation=new Z0(this,{getItemsCallback:()=>this.displayedColors,rowSize:this.rowSize,behavior:K0.Cyclic}),this._itemNavigationRecentColors=new Z0(this,{getItemsCallback:()=>this.recentColorsElements,rowSize:this.rowSize,behavior:K0.Static}),this._recentColors=[]}onBeforeRendering(){this._ensureSingleSelectionOrDeselectAll();const e=this.selectedItem;if(e&&!this.showRecentColors&&(this._selectedColor=e.value),this.displayedColors.forEach(((e,t)=>{e.index=t+1})),this.showMoreColors){const e=eK("ColorPaletteMoreColors");e.i18nBundle=Z7.i18nBundle,e&&(this.moreColorsFeature=new e)}this.onPhone=TZ()}get _effectiveShowMoreColors(){return!(!this.showMoreColors||!this.moreColorsFeature)}onAfterRendering(){if(this.hasRecentColors&&this._shouldFocusRecentColors){this.selectedItem&&(this.selectedItem.selected=!1);const e=this.recentColorsElements[0];e.selected=!0,this._currentlySelected=e,this._currentlySelected.focus(),this._shouldFocusRecentColors=!1}}selectColor(e){e.value&&(e.focus(),this.displayedColors.includes(e)&&this._itemNavigation.setCurrentItem(e),this._setColor(e.value))}_setColor(e){this._selectedColor=e,this._recentColors[0]!==this._selectedColor&&(this._recentColors.includes(this._selectedColor)?this._recentColors.unshift(this._recentColors.splice(this._recentColors.indexOf(this._selectedColor),1)[0]):this._addRecentColor(this._selectedColor)),this.fireDecoratorEvent("item-click",{color:this._selectedColor})}get effectiveColorItems(){let e=this.colors;return this.popupMode&&(e=this.getSlottedNodes("colors")),e}_ensureSingleSelectionOrDeselectAll(){let e;this.allColorsInPalette.forEach((t=>{t.selected&&(e&&(e.selected=!1),e=t)}))}_onclick(e){this.handleSelection(e.target)}_onkeyup(e){const t=e.target;A0(e)&&(e.preventDefault(),this.handleSelection(t))}_onkeydown(e){const t=e.target;b0(e)&&this.handleSelection(t),A0(e)&&e.preventDefault()}handleSelection(e){e.hasAttribute("ui5-color-palette-item")&&e.value&&(this._shouldFocusRecentColors=!1,this.selectColor(e),this.recentColorsElements.includes(e)?(this.recentColorsElements[0].selected=!0,this.recentColorsElements[0].focus(),this._currentlySelected=this.recentColorsElements[0]):(this.allColorsInPalette.forEach((t=>{t.selected=t===e})),this._currentlySelected=e),this._ensureSingleSelectionOrDeselectAll())}_handleDefaultColorClick(e){e.preventDefault(),this._onDefaultColorClick()}_onDefaultColorKeyUp(e){A0(e)&&this._handleDefaultColorClick(e)}_onDefaultColorKeyDown(e){if(N0(e)&&this.popupMode&&this._handleDefaultColorClick(e),b0(e)&&this._handleDefaultColorClick(e),E0(e))e.stopPropagation(),this.focusColorElement(this.colorPaletteNavigationElements[1],this._itemNavigation);else if(C0(e)){e.stopPropagation();const t=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this.hasRecentColors)this.focusColorElement(t,this._itemNavigationRecentColors);else if(this.showMoreColors)t.focus();else{const e=this.displayedColors.length%this.rowSize*this.rowSize;this.focusColorElement(this.displayedColors[e],this._itemNavigation)}}}_onMoreColorsKeyDown(e){const t=e.target,i=this.colorPaletteNavigationElements.indexOf(t),n=this.displayedColors.length%this.rowSize*this.rowSize;C0(e)?(e.stopPropagation(),this.focusColorElement(this.displayedColors[n],this._itemNavigation)):E0(e)&&(e.stopPropagation(),this.hasRecentColors?this.focusColorElement(this.colorPaletteNavigationElements[i+1],this._itemNavigationRecentColors):this.showDefaultColor?this.firstFocusableElement.focus():this.focusColorElement(this.displayedColors[0],this._itemNavigation))}_isUpOrDownNavigatableColorPaletteItem(e){return(C0(e)||E0(e))&&this._currentlySelected&&this.colorPaletteNavigationElements.includes(this._currentlySelected)}_onColorContainerKeyDown(e){const t=e.target,i=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this._isUpOrDownNavigatableColorPaletteItem(e)&&(this._currentlySelected=void 0),N0(e)&&this.popupMode&&(e.preventDefault(),this.selectColor(t)),C0(e)&&t===this.displayedColors[0]&&this.colorPaletteNavigationElements.length>1)e.stopPropagation(),this.showDefaultColor?this.firstFocusableElement.focus():!this.showDefaultColor&&this.hasRecentColors?this.focusColorElement(i,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&i.focus();else if(E0(e)&&t===this.displayedColors[this.displayedColors.length-1]&&this.colorPaletteNavigationElements.length>1){e.stopPropagation();const t=this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors||!this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors;this.showDefaultColor&&this.showMoreColors?this.colorPaletteNavigationElements[2].focus():!this.showDefaultColor||this.showMoreColors||this.showRecentColors&&this.recentColors[0]?t?this.focusColorElement(i,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&this.colorPaletteNavigationElements[1].focus():this.firstFocusableElement.focus()}}_onRecentColorsContainerKeyDown(e){if(this._isUpOrDownNavigatableColorPaletteItem(e)&&(this._currentlySelected=void 0),C0(e)){if(this.showMoreColors){const e=this.showDefaultColor?2:1;this.colorPaletteNavigationElements[e].focus()}else if(!this.showMoreColors&&this.colorPaletteNavigationElements.length>1){const t=this.displayedColors.length%this.rowSize*this.rowSize;e.stopPropagation(),this.focusColorElement(this.displayedColors[t],this._itemNavigation)}}else E0(e)&&(this.showDefaultColor?this.firstFocusableElement.focus():(e.stopPropagation(),this.focusColorElement(this.displayedColors[0],this._itemNavigation)))}focusColorElement(e,t){t.setCurrentItem(e),t._focusCurrentItem()}get firstFocusableElement(){return this.colorPaletteNavigationElements[0]}_chooseCustomColor(){const e=this.getColorPicker();this._setColor(e.value),this._closeDialog(),this._shouldFocusRecentColors=!0}_addRecentColor(e){this.showRecentColors&&!this._recentColors.includes(e)&&(this._recentColors.unshift(e),this._recentColors.length>this.rowSize&&this._recentColors.pop())}_closeDialog(){this._getDialog().open=!1}_openMoreColorsDialog(){this._getDialog().open=!0}_onDefaultColorClick(){this.defaultColor&&(this._setColor(this.defaultColor),this._addRecentColor(this.defaultColor),this.selectedItem&&(this.selectedItem.selected=!1,this._currentlySelected=void 0))}get selectedItem(){return this.allColorsInPalette.find((e=>e.selected))}get allColorsInPalette(){return[...this.effectiveColorItems,...this.recentColorsElements]}get colorPaletteDialogTitle(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteDialogTitle}get colorPaletteDialogOKButton(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteDialogOKButton}get colorPaletteCancelButton(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteCancelButton}get selectedColor(){return this._selectedColor}get displayedColors(){return this.getSlottedNodes("colors").filter((e=>e.value)).slice(0,15)}get colorContainerLabel(){return Z7.i18nBundle.getText(T1)}get colorPaletteMoreColorsText(){return Z7.i18nBundle.getText(P1)}get colorPaletteDefaultColorText(){return Z7.i18nBundle.getText(D1)}get _showMoreColors(){return this.showMoreColors&&this.moreColorsFeature}get rowSize(){return 5}get hasRecentColors(){return this.showRecentColors&&this.recentColors[0]}get recentColors(){for(this._recentColors.length>this.rowSize&&(this._recentColors=this._recentColors.slice(0,this.rowSize));this._recentColors.length<this.rowSize;)this._recentColors.push("");return this._recentColors}get recentColorsElements(){const e=this.getDomRef();return e?Array.from(e.querySelectorAll(".ui5-cp-recent-colors-wrapper [ui5-color-palette-item]")).filter((e=>""!==e.value)):[]}get colorPaletteNavigationElements(){const e=[],t=this.shadowRoot.querySelector(".ui5-cp-root");return this._currentlySelected&&e.push(this._currentlySelected),this.showDefaultColor&&e.push(t.querySelector(".ui5-cp-default-color-button")),e.push(this.displayedColors[0]),this.showMoreColors&&e.push(t.querySelector(".ui5-cp-more-colors")),this.showRecentColors&&this.recentColorsElements.length&&e.push(this.recentColorsElements[0]),e}get classes(){return{colorPaletteRoot:{"ui5-cp-root":!0,"ui5-cp-root-phone":TZ()}}}_getDialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}getColorPicker(){return this._getDialog().content[0].querySelector("[ui5-color-picker]")}};J7([_0({type:Boolean})],e9.prototype,"showRecentColors",void 0),J7([_0({type:Boolean})],e9.prototype,"showMoreColors",void 0),J7([_0({type:Boolean})],e9.prototype,"showDefaultColor",void 0),J7([_0()],e9.prototype,"defaultColor",void 0),J7([_0()],e9.prototype,"_selectedColor",void 0),J7([_0({type:Boolean})],e9.prototype,"popupMode",void 0),J7([_0({type:Boolean})],e9.prototype,"onPhone",void 0),J7([y0({default:!0,type:HTMLElement,invalidateOnChildChange:!0,individualSlots:!0})],e9.prototype,"colors",void 0),J7([f1("@ui5/webcomponents")],e9,"i18nBundle",void 0),e9=Z7=J7([m0({tag:"ui5-color-palette",renderer:d1,features:["ColorPaletteMoreColors"],template:function(e,t,i){return u1`<div class="${a1(this.classes.colorPaletteRoot)}" @click=${this._onclick} @keyup=${this._onkeyup} @keydown=${this._onkeydown}>${this.showDefaultColor?V7.call(this,e,t,i):void 0}<div class="ui5-cp-item-container" role="region" aria-label="${c1(this.colorContainerLabel)}" @keydown="${this._onColorContainerKeyDown}">${s1(this.displayedColors,((e,t)=>e._id||t),((n,r)=>$7.call(this,e,t,i,n,r)))}</div>${this._showMoreColors?G7.call(this,e,t,i):void 0}${this.showRecentColors?Q7.call(this,e,t,i):void 0}</div>${this._effectiveShowMoreColors?q7.call(this,e,t,i):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalette.css.ts",content:":host(:not([hidden])){display:inline-block}:host(:not([hidden])[popup-mode]),:host(:not([hidden])[on-phone]){width:100%;overflow:hidden}.ui5-cp-root{display:flex;flex-direction:column}.ui5-cp-root.ui5-cp-root-phone,.ui5-cp-separator,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper,.ui5-cp-recent-colors-wrapper{width:100%}.ui5-cp-root.ui5-cp-root-phone .ui5-cp-item-container{padding:.375rem .625rem;width:100%;max-width:100%;max-height:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-default-color-button,.ui5-cp-root-phone .ui5-cp-more-colors,.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper{height:2.875rem}.ui5-cp-root-phone .ui5-cp-item-container{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center}.ui5-cp-root-phone .ui5-cp-recent-colors-container{padding:.375rem .625rem;display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center;width:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-recent-colors-wrapper{max-width:100%;padding:0;display:flex;justify-content:center;flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden}.ui5-cp-recent-colors-wrapper{display:flex;align-items:center;flex-direction:column;gap:.25rem}.ui5-cp-root.ui5-cp-root-phone{display:flex}.ui5-cp-item-container{display:flex;max-width:var(--_ui5-v2-4-0_color-palette-row-width);flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden;padding:var(--_ui5-v2-4-0_color-palette-swatch-container-padding)}.ui5-cp-more-colors,.ui5-cp-default-color-button{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);text-align:center;border:none}.ui5-cp-more-colors-wrapper,.ui5-cp-default-color-button-wrapper{display:flex;flex-direction:column}.ui5-cp-separator{height:.0625rem;background:var(--sapToolbar_SeparatorColor)}.ui5-cp-default-color-button,.ui5-cp-more-colors{padding:.0625rem}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteDialog.css.ts",content:".ui5-cp-dialog-content{display:flex;justify-content:center;align-items:center;margin:1rem 0}.ui5-cp-dialog-footer{width:100%;display:flex;justify-content:flex-end;margin:.1875rem 1rem}.ui5-cp-dialog-footer [ui5-button]:first-child{margin-right:1rem}\n"}],get dependencies(){const e=eK("ColorPaletteMoreColors");return[K7,E5].concat(e?e.dependencies:[])}}),v0("item-click",{detail:{color:{type:String}}})],e9),e9.define();const t9=e9;function i9(e,t,i,n,r){return u1`<slot name="${c1(n._individualSlot)}"></slot>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var n9,r9=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let o9=n9=class extends f0{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.open=!1}get responsivePopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}get respPopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}closePopover(){this.open=!1}onAfterClose(){this.closePopover(),this.fireDecoratorEvent("close")}onAfterOpen(){var e;const t=this._colorPalette;t._currentlySelected?null==(e=t._currentlySelected)||e.focus():t.showRecentColors&&t.recentColorsElements.length?t.recentColorsElements[0].focus():t.showDefaultColor&&t.colorPaletteNavigationElements[0].focus(),t.allColorsInPalette.forEach((e=>{const t=e.offsetHeight+4;e.style.setProperty(AK("--_ui5_color_palette_item_height"),`${t}px`)}))}onSelectedColor(e){this.closePopover(),this.fireDecoratorEvent("item-click",e.detail)}get _colorPalette(){return this.responsivePopover.content[0].querySelector("[ui5-color-palette]")}isOpen(){return this.open}get colorPaletteColors(){return this.getSlottedNodes("colors")}get _colorPaletteTitle(){return n9.i18nBundle.getText(I1)}get _cancelButtonLabel(){return n9.i18nBundle.getText(k1)}get _open(){return this.open||void 0}};r9([_0({type:Boolean})],o9.prototype,"showRecentColors",void 0),r9([_0({type:Boolean})],o9.prototype,"showMoreColors",void 0),r9([_0({type:Boolean})],o9.prototype,"showDefaultColor",void 0),r9([_0()],o9.prototype,"defaultColor",void 0),r9([_0({type:Boolean})],o9.prototype,"open",void 0),r9([_0({converter:G5})],o9.prototype,"opener",void 0),r9([y0({default:!0,type:HTMLElement,individualSlots:!0})],o9.prototype,"colors",void 0),r9([f1("@ui5/webcomponents")],o9,"i18nBundle",void 0),o9=n9=r9([m0({tag:"ui5-color-palette-popover",renderer:d1,styles:[P7,{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalettePopover.css.ts",content:".ui5-cp-header{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);display:flex;align-items:center}.ui5-cp-footer{width:100%;display:flex;justify-content:flex-end;align-items:center;margin:.1875rem 0}[ui5-responsive-popover]::part(content){padding:0}.ui5-cp-item-container{padding:.3125rem .6875rem}\n"}],template:function(e,t,i){return i?u1`<${p1("ui5-responsive-popover",t,i)} hide-arrow content-only-on-desktop placement="Bottom" .opener="${c1(this.opener)}" ?open="${this._open}" @ui5-close="${c1(this.onAfterClose)}" @ui5-open="${c1(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><${p1("ui5-title",t,i)} level="H1" wrapping-type="None">${c1(this._colorPaletteTitle)}</${p1("ui5-title",t,i)}></div><div><${p1("ui5-color-palette",t,i)} ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${c1(this.defaultColor)}" popup-mode @ui5-item-click="${c1(this.onSelectedColor)}">${s1(this.colorPaletteColors,((e,t)=>e._id||t),((n,r)=>i9.call(this,e,t,i,n,r)))}</${p1("ui5-color-palette",t,i)}></div><div slot="footer" class="ui5-cp-footer"><${p1("ui5-button",t,i)} design="Transparent" @click="${this.closePopover}">${c1(this._cancelButtonLabel)}</${p1("ui5-button",t,i)}></div></${p1("ui5-responsive-popover",t,i)}>`:u1`<ui5-responsive-popover hide-arrow content-only-on-desktop placement="Bottom" .opener="${c1(this.opener)}" ?open="${this._open}" @ui5-close="${c1(this.onAfterClose)}" @ui5-open="${c1(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><ui5-title level="H1" wrapping-type="None">${c1(this._colorPaletteTitle)}</ui5-title></div><div><ui5-color-palette ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${c1(this.defaultColor)}" popup-mode @ui5-item-click="${c1(this.onSelectedColor)}">${s1(this.colorPaletteColors,((e,t)=>e._id||t),((n,r)=>i9.call(this,e,t,i,n,r)))}</ui5-color-palette></div><div slot="footer" class="ui5-cp-footer"><ui5-button design="Transparent" @click="${this.closePopover}">${c1(this._cancelButtonLabel)}</ui5-button></div></ui5-responsive-popover>`},dependencies:[g7,E5,_4,t9]}),v0("item-click",{detail:{color:{type:String}},bubbles:!0}),v0("close",{bubbles:!0})],o9),o9.define();const s9=new Map([["aliceblue","f0f8ff"],["antiquewhite","faebd7"],["aqua","00ffff"],["aquamarine","7fffd4"],["azure","f0ffff"],["beige","f5f5dc"],["bisque","ffe4c4"],["black","000000"],["blanchedalmond","ffebcd"],["blue","0000ff"],["blueviolet","8a2be2"],["brown","a52a2a"],["burlywood","deb887"],["cadetblue","5f9ea0"],["chartreuse","7fff00"],["chocolate","d2691e"],["coral","ff7f50"],["cornflowerblue","6495ed"],["cornsilk","fff8dc"],["crimson","dc143c"],["cyan","00ffff"],["darkblue","00008b"],["darkcyan","008b8b"],["darkgoldenrod","b8860b"],["darkgray","a9a9a9"],["darkgrey","a9a9a9"],["darkgreen","006400"],["darkkhaki","bdb76b"],["darkmagenta","8b008b"],["darkolivegreen","556b2f"],["darkorange","ff8c00"],["darkorchid","9932cc"],["darkred","8b0000"],["darksalmon","e9967a"],["darkseagreen","8fbc8f"],["darkslateblue","483d8b"],["darkslategray","2f4f4f"],["darkslategrey","2f4f4f"],["darkturquoise","00ced1"],["darkviolet","9400d3"],["deeppink","ff1493"],["deepskyblue","00bfff"],["dimgray","696969"],["dimgrey","696969"],["dodgerblue","1e90ff"],["firebrick","b22222"],["floralwhite","fffaf0"],["forestgreen","228b22"],["fuchsia","ff00ff"],["gainsboro","dcdcdc"],["ghostwhite","f8f8ff"],["gold","ffd700"],["goldenrod","daa520"],["gray","808080"],["grey","808080"],["green","008000"],["greenyellow","adff2f"],["honeydew","f0fff0"],["hotpink","ff69b4"],["indianred","cd5c5c"],["indigo","4b0082"],["ivory","fffff0"],["khaki","f0e68c"],["lavender","e6e6fa"],["lavenderblush","fff0f5"],["lawngreen","7cfc00"],["lemonchiffon","fffacd"],["lightblue","add8e6"],["lightcoral","f08080"],["lightcyan","e0ffff"],["lightgoldenrodyellow","fafad2"],["lightgray","d3d3d3"],["lightgrey","d3d3d3"],["lightgreen","90ee90"],["lightpink","ffb6c1"],["lightsalmon","ffa07a"],["lightseagreen","20b2aa"],["lightskyblue","87cefa"],["lightslategray","778899"],["lightslategrey","778899"],["lightsteelblue","b0c4de"],["lightyellow","ffffe0"],["lime","00ff00"],["limegreen","32cd32"],["linen","faf0e6"],["magenta","ff00ff"],["maroon","800000"],["mediumaquamarine","66cdaa"],["mediumblue","0000cd"],["mediumorchid","ba55d3"],["mediumpurple","9370db"],["mediumseagreen","3cb371"],["mediumslateblue","7b68ee"],["mediumspringgreen","00fa9a"],["mediumturquoise","48d1cc"],["mediumvioletred","c71585"],["midnightblue","191970"],["mintcream","f5fffa"],["mistyrose","ffe4e1"],["moccasin","ffe4b5"],["navajowhite","ffdead"],["navy","000080"],["oldlace","fdf5e6"],["olive","808000"],["olivedrab","6b8e23"],["orange","ffa500"],["orangered","ff4500"],["orchid","da70d6"],["palegoldenrod","eee8aa"],["palegreen","98fb98"],["paleturquoise","afeeee"],["palevioletred","db7093"],["papayawhip","ffefd5"],["peachpuff","ffdab9"],["peru","cd853f"],["pink","ffc0cb"],["plum","dda0dd"],["powderblue","b0e0e6"],["purple","800080"],["red","ff0000"],["rosybrown","bc8f8f"],["royalblue","4169e1"],["saddlebrown","8b4513"],["salmon","fa8072"],["sandybrown","f4a460"],["seagreen","2e8b57"],["seashell","fff5ee"],["sienna","a0522d"],["silver","c0c0c0"],["skyblue","87ceeb"],["slateblue","6a5acd"],["slategray","708090"],["slategrey","708090"],["snow","fffafa"],["springgreen","00ff7f"],["steelblue","4682b4"],["tan","d2b48c"],["teal","008080"],["thistle","d8bfd8"],["tomato","ff6347"],["turquoise","40e0d0"],["violet","ee82ee"],["wheat","f5deb3"],["white","ffffff"],["whitesmoke","f5f5f5"],["yellow","ffff00"],["yellowgreen","9acd32"],["transparent","00000000"]]),a9=e=>e.startsWith("rgba")?l9(e):e.startsWith("rgb")?c9(e):(0===e.indexOf("#")&&(e=4===e.length?`${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:e.slice(1,e.length)),s9.has(e)&&(e=s9.get(e)),h9(e)),l9=e=>{const t=e.indexOf("("),i=[];for(let n=0;n<e.length;n++)","===e[n]&&i.push(n);return{r:parseInt(e.slice(t+1,i[0]).trim()),g:parseInt(e.slice(i[0]+1,i[1]).trim()),b:parseInt(e.slice(i[1]+1,i[2]).trim())}},c9=e=>{const t=e.indexOf("("),i=e.indexOf(")"),n=[];for(let r=0;r<e.length;r++)","===e[r]&&n.push(r);return{r:parseInt(e.slice(t+1,n[0]).trim()),g:parseInt(e.slice(n[0]+1,n[1]).trim()),b:parseInt(e.slice(n[1]+1,i).trim())}},u9=e=>{let t,i,n,r=100*e.s,o=100*e.l;r>100?r=1:r<0?r=0:r/=100,o>100?o=1:o<0?o=0:o/=100;const s=e.h,a=r*(1-Math.abs(2*o-1)),l=255*(o-.5*a),c=l+a*(1-Math.abs(s/60%2-1))*255,u=l+255*a;switch(Math.floor(s/60)){case 0:t=u,i=c,n=l;break;case 1:t=c,i=u,n=l;break;case 2:t=l,i=u,n=c;break;case 3:t=l,i=c,n=u;break;case 4:t=c,i=l,n=u;break;case 5:t=u,i=l,n=c;break;default:t=0,i=0,n=0}return{r:Math.round(t),g:Math.round(i),b:Math.round(n)}},h9=e=>({r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)});var d9,p9=/[\x00-\x2b\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff\u2028\u2029]/g,f9=/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f-\x9f]/,g9={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},m9=function(e){var t=g9[e];return t||(t=f9.test(e)?"&#xfffd;":"&#x"+e.charCodeAt(0).toString(16)+";",g9[e]=t),t};bJ("not-editable",{pathData:"M443 104q5 7 5 12 0 6-5 11L118 453q-4 4-8 4L0 480l22-110q0-5 4-9L352 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L52 381l46 46zm158 116l32 32-66 63 66 66-32 32-63-66-65 66-33-32 66-66-66-63 33-32 65 64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("not-editable",{pathData:"M504 94q7 7 7 18t-7 18L130 504q-8 8-18 8H26q-11 0-18.5-7.5T0 486v-86q0-9 7-18L381 8q8-8 18-8 12 0 18 8zM363 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50zm56 356q7 7 7 18t-7.5 18.5T486 512q-10 0-18-8l-37-37-38 37q-8 8-18 8-11 0-18.5-7.5T349 486q0-10 8-18l38-37-38-38q-8-8-8-18 0-11 7.5-18.5T375 349q10 0 18 8l38 37 37-37q8-8 18-8 11 0 18.5 7.5T512 375t-7 18l-38 38z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(e){e.Text="Text",e.Email="Email",e.Number="Number",e.Password="Password",e.Tel="Tel",e.URL="URL",e.Search="Search"}(d9||(d9={}));const _9=d9;function v9(e,t,i){return i?u1`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><${p1("ui5-icon",t,i)} part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${c1(this.clearIconAccessibleName)}"></${p1("ui5-icon",t,i)}></div>`:u1`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><ui5-icon part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${c1(this.clearIconAccessibleName)}"></ui5-icon></div>`}function y9(e,t,i){return u1`<div class="ui5-input-icon-root"><slot name="icon"></slot></div>`}function b9(e,t,i){return u1`<span id="suggestionsText" class="ui5-hidden-text">${c1(this.suggestionsText)}</span><span id="selectionText" class="ui5-hidden-text" aria-live="polite" role="status"></span><span id="suggestionsCount" class="ui5-hidden-text" aria-live="polite">${c1(this.availableSuggestionsCount)}</span>`}function A9(e,t,i){return u1`<span id="descr" class="ui5-hidden-text">${c1(this.accInfo.input.ariaDescription)}</span>`}function w9(e,t,i){return u1`<span id="valueStateDesc" class="ui5-hidden-text">${c1(this.ariaValueStateHiddenText)}</span>`}function x9(e,t,i){return i?u1`<${p1("ui5-responsive-popover",t,i)} class="${a1(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${l1(this.styles.suggestionsPopover)}" @ui5-open="${c1(this._afterOpenPicker)}" @ui5-close="${c1(this._afterClosePicker)}" @ui5-scroll="${c1(this._scroll)}" .open=${c1(this.open)} .opener=${c1(this)} accessible-name="${c1(this._popupLabel)}">${this._isPhone?S9.call(this,e,t,i):void 0}${this._isPhone?void 0:M9.call(this,e,t,i)}<${p1("ui5-list",t,i)} separators="${c1(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${c1(this._handleSuggestionItemPress)}" @ui5-selection-change="${c1(this._handleSelectionChange)}"><slot></slot></${p1("ui5-list",t,i)}>${this._isPhone?D9.call(this,e,t,i):void 0}</${p1("ui5-responsive-popover",t,i)}>`:u1`<ui5-responsive-popover class="${a1(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${l1(this.styles.suggestionsPopover)}" @ui5-open="${c1(this._afterOpenPicker)}" @ui5-close="${c1(this._afterClosePicker)}" @ui5-scroll="${c1(this._scroll)}" .open=${c1(this.open)} .opener=${c1(this)} accessible-name="${c1(this._popupLabel)}">${this._isPhone?S9.call(this,e,t,i):void 0}${this._isPhone?void 0:M9.call(this,e,t,i)}<ui5-list separators="${c1(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${c1(this._handleSuggestionItemPress)}" @ui5-selection-change="${c1(this._handleSelectionChange)}"><slot></slot></ui5-list>${this._isPhone?D9.call(this,e,t,i):void 0}</ui5-responsive-popover>`}function S9(e,t,i){return i?u1`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${c1(this._headerTitleText)}</span><${p1("ui5-button",t,i)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></${p1("ui5-button",t,i)}></div><div class="row"><div class="input-root-phone native-input-wrapper"><${p1("ui5-input",t,i)} class="ui5-input-inner-phone" type="${c1(this.inputType)}" .value="${c1(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${c1(this.placeholder)}" @ui5-input="${c1(this._handleInput)}" @ui5-change="${c1(this._handleChange)}"></${p1("ui5-input",t,i)}></div></div></div>${this.hasValueStateMessage?C9.call(this,e,t,i):void 0}`:u1`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${c1(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></ui5-button></div><div class="row"><div class="input-root-phone native-input-wrapper"><ui5-input class="ui5-input-inner-phone" type="${c1(this.inputType)}" .value="${c1(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${c1(this.placeholder)}" @ui5-input="${c1(this._handleInput)}" @ui5-change="${c1(this._handleChange)}"></ui5-input></div></div></div>${this.hasValueStateMessage?C9.call(this,e,t,i):void 0}`}function C9(e,t,i){return i?u1`<div class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.suggestionPopoverHeader)}"><${p1("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></${p1("ui5-icon",t,i)}>${this.open?E9.call(this,e,t,i):void 0}</div>`:u1`<div class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.suggestionPopoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?E9.call(this,e,t,i):void 0}</div>`}function E9(e,t,i){return u1`${this.shouldDisplayDefaultValueStateMessage?T9.call(this,e,t,i):I9.call(this,e,t,i)}`}function T9(e,t,i){return u1`${c1(this.valueStateText)}`}function I9(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}function M9(e,t,i){return u1`${this.hasValueStateMessage?k9.call(this,e,t,i):void 0}`}function k9(e,t,i){return i?u1`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${a1(this.classes.popoverValueState)}" style=${l1(this.styles.suggestionPopoverHeader)}><${p1("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></${p1("ui5-icon",t,i)}>${this.open?B9.call(this,e,t,i):void 0}</div>`:u1`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${a1(this.classes.popoverValueState)}" style=${l1(this.styles.suggestionPopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?B9.call(this,e,t,i):void 0}</div>`}function B9(e,t,i){return u1`${this.shouldDisplayDefaultValueStateMessage?R9.call(this,e,t,i):P9.call(this,e,t,i)}`}function R9(e,t,i){return u1`${c1(this.valueStateText)}`}function P9(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}function D9(e,t,i){return i?u1`<div slot="footer" class="ui5-responsive-popover-footer"><${p1("ui5-button",t,i)} design="Transparent" @click="${this._closePicker}">OK</${p1("ui5-button",t,i)}></div>`:u1`<div slot="footer" class="ui5-responsive-popover-footer"><ui5-button design="Transparent" @click="${this._closePicker}">OK</ui5-button></div>`}function L9(e,t,i){return i?u1`<${p1("ui5-popover",t,i)} skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${c1(this._valueStatePopoverHorizontalAlign)}" .opener=${c1(this)} .open=${c1(this.valueStateOpen)} @ui5-close="${c1(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.popoverHeader)}"><${p1("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></${p1("ui5-icon",t,i)}>${this.valueStateOpen?O9.call(this,e,t,i):void 0}</div></${p1("ui5-popover",t,i)}>`:u1`<ui5-popover skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${c1(this._valueStatePopoverHorizontalAlign)}" .opener=${c1(this)} .open=${c1(this.valueStateOpen)} @ui5-close="${c1(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${a1(this.classes.popoverValueState)}" style="${l1(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${c1(this._valueStateMessageInputIcon)}"></ui5-icon>${this.valueStateOpen?O9.call(this,e,t,i):void 0}</div></ui5-popover>`}function O9(e,t,i){return u1`${this.shouldDisplayDefaultValueStateMessage?F9.call(this,e,t,i):N9.call(this,e,t,i)}`}function F9(e,t,i){return u1`${c1(this.valueStateText)}`}function N9(e,t,i){return u1`<slot name="valueStateMessage"></slot>`}nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5)),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var z9,U9,H9,V9=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};!function(e){e.CHANGE="change",e.INPUT="input",e.SELECTION_CHANGE="selection-change"}(U9||(U9={})),function(e){e.ACTION_ENTER="enter",e.ACTION_USER_INPUT="input"}(H9||(H9={}));let $9=z9=class extends f0{get formValidityMessage(){return z9.i18nBundle.getText(P2)}get _effectiveShowSuggestions(){return!(!this.showSuggestions||!this.Suggestions)}get formValidity(){return{valueMissing:this.required&&!this.value}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.disabled=!1,this.highlight=!1,this.readonly=!1,this.required=!1,this.noTypeahead=!1,this.type="Text",this.value="",this._innerValue="",this.valueState="None",this.showSuggestions=!1,this.showClearIcon=!1,this.open=!1,this._effectiveShowClearIcon=!1,this.focused=!1,this.valueStateOpen=!1,this._isValueStateFocused=!1,this._inputAccInfo={},this._nativeInputAttributes={},this._inputIconFocused=!1,this.hasSuggestionItemSelected=!1,this.valueBeforeItemSelection="",this.valueBeforeSelectionStart="",this.previousValue="",this.firstRendering=!0,this.typedInValue="",this.lastConfirmedValue="",this.isTyping=!1,this._isLatestValueFromSuggestions=!1,this._handleResizeBound=this._handleResize.bind(this),this._keepInnerValue=!1,this._focusedAfterClear=!1}onEnterDOM(){i4.register(this,this._handleResizeBound),((e,t)=>{if(F2.has(e))return;const i=H2(e),n=(e=>t=>{if(!t||"property"!==t.type||"accessibleNameRef"!==t.name)return;const i=F2.get(e);if(!i)return;const n=i.observedElements,r=H2(e);n.forEach((e=>{r.includes(e)||Q2(i,e)})),r.forEach((e=>{n.includes(e)||(G2(i,e),i.observedElements.push(e))})),null==i||i.callback()})(e),r={host:e,observedElements:i,callback:t,invalidationCallback:n};F2.set(e,r),e.attachInvalidate(n),i.forEach((e=>{G2(r,e)})),t()})(this,this._updateAssociatedLabelsTexts.bind(this))}onExitDOM(){i4.deregister(this,this._handleResizeBound),(e=>{const t=F2.get(e);t&&([...t.observedElements].forEach((e=>{Q2(t,e)})),e.detachInvalidate(t.invalidationCallback),F2.delete(e))})(this)}_highlightSuggestionItem(e){var t;e.markupText=this.typedInValue?null==(t=this.Suggestions)?void 0:t.hightlightInput(e.text||"",this.typedInValue):(e.text||"").replace(p9,m9)}_isGroupItem(e){return e.hasAttribute("ui5-suggestion-item-group")}onBeforeRendering(){this._keepInnerValue||(this._innerValue=null===this.value?"":this.value),this.showSuggestions&&(this.enableSuggestions(),this._flattenItems.forEach((e=>{var t;e.hasAttribute("ui5-suggestion-item")?this._highlightSuggestionItem(e):this._isGroupItem(e)&&(null==(t=e.items)||t.forEach((e=>{this._highlightSuggestionItem(e)})))}))),this._effectiveShowClearIcon=this.showClearIcon&&!!this.value&&!this.readonly&&!this.disabled,this.style.setProperty(AK("--_ui5-input-icons-count"),`${this.iconsCount}`);const e=!!this._flattenItems.length,t=!!this.value,i=this.shadowRoot.querySelector("input")===X0();this.shouldDisplayOnlyValueStateMessage?this.openValueStatePopover():this.closeValueStatePopover(),this.disabled||this.readonly?this.open=!1:this._isPhone||(this.open=e&&(this.open||t&&i&&this.isTyping));const n=this.value,r=this.getInputDOMRefSync();if(!r||!n)return;const o=r.selectionEnd-r.selectionStart;if(this._shouldAutocomplete&&!yZ.android&&!yZ.androidPhone&&!o&&!this._isKeyNavigation){const e=this._getFirstMatchingItem(n);e&&this._handleTypeAhead(e)}}onAfterRendering(){var e;const t=this.getInputDOMRefSync();this.showSuggestions&&(null==(e=this.Suggestions)?void 0:e._getPicker())&&(this._listWidth=this.Suggestions._getListWidth()),this._performTextSelection&&(t.value!==this._innerValue&&(t.value=this._innerValue),this.typedInValue.length&&this.value.length&&t.setSelectionRange(this.typedInValue.length,this.value.length),this.fireDecoratorEvent("type-ahead")),this._performTextSelection=!1}_onkeydown(e){return this._isKeyNavigation=!0,this._shouldAutocomplete=!(this.noTypeahead||(t=e,(t.key?"Backspace"===t.key:8===t.keyCode)&&!j0(t)||U0(e)||F0(e))),C0(e)?this._handleUp(e):E0(e)?this._handleDown(e):A0(e)?this._handleSpace(e):N0(e)?this._handleTab():b0(e)?this._handleEnter(e):H0(e)?this._handlePageUp(e):V0(e)?this._handlePageDown(e):L0(e)?this._handleHome(e):O0(e)?this._handleEnd(e):F0(e)?this._handleEscape():(this.showSuggestions&&this._clearPopoverFocusAndSelection(),this._keyDown=!0,void(this._isKeyNavigation=!1));var t}_onkeyup(e){U0(e)&&(this.value=e.target.value),this._keyDown=!1}_handleUp(e){var t;(null==(t=this.Suggestions)?void 0:t.isOpened())&&this.Suggestions.onUp(e)}_handleDown(e){var t;(null==(t=this.Suggestions)?void 0:t.isOpened())&&this.Suggestions.onDown(e)}_handleSpace(e){this.Suggestions&&this.Suggestions.onSpace(e)}_handleTab(){this.Suggestions&&this.previousValue!==this.value&&this.Suggestions.onTab()}_handleEnter(e){var t;const i=!!(null==(t=this.Suggestions)?void 0:t.onEnter(e)),n=this.getInputDOMRefSync(),r=this._selectableItems.find((e=>e.text===this.value));if(r){const e=r.text||"";n.setSelectionRange(e.length,e.length),i||(this.fireSelectionChange(r,!0),this.acceptSuggestion(r,!0),this.open=!1)}if(!this._isPhone||this._flattenItems.length||this.isTypeNumber||n.setSelectionRange(this.value.length,this.value.length),!i)return this.lastConfirmedValue=this.value,void(this._internals.form&&ZJ(this));this.focused=!0}_handlePageUp(e){var t;this._isSuggestionsFocused?null==(t=this.Suggestions)||t.onPageUp(e):e.preventDefault()}_handlePageDown(e){var t;this._isSuggestionsFocused?null==(t=this.Suggestions)||t.onPageDown(e):e.preventDefault()}_handleHome(e){var t;this._isSuggestionsFocused&&(null==(t=this.Suggestions)||t.onHome(e))}_handleEnd(e){var t;this._isSuggestionsFocused&&(null==(t=this.Suggestions)||t.onEnd(e))}_handleEscape(){var e;const t=this.showSuggestions&&!!this.Suggestions&&this.open,i=this.getInputDOMRefSync(),n=i.selectionEnd-i.selectionStart>0;if(this.isTyping=!1,t){if(t&&(null==(e=this.Suggestions)?void 0:e._isItemOnTarget()))return this.value=this.typedInValue||this.valueBeforeSelectionStart,void(this.focused=!0);n&&(this.value=this.typedInValue),this._isValueStateFocused&&(this._isValueStateFocused=!1,this.focused=!0)}else this.value=this.lastConfirmedValue?this.lastConfirmedValue:this.previousValue}_onfocusin(e){this.focused=!0,this._focusedAfterClear||(this.previousValue=this.value),this.valueBeforeSelectionStart=this.value,this._inputIconFocused=!!e.target&&e.target===this.querySelector("[ui5-icon]"),this._focusedAfterClear=!1}innerFocusIn(){}_onfocusout(e){var t;const i=e.relatedTarget;(null==(t=this.Suggestions)?void 0:t._getPicker().contains(i))||this.contains(i)||this.getSlottedNodes("valueStateMessage").some((e=>e.contains(i)))||(this._keepInnerValue=!1,this.focused=!1,this.showClearIcon&&!this._effectiveShowClearIcon&&(this._clearIconClicked=!1,this._handleChange()),this.open=!1,this._clearPopoverFocusAndSelection(),this._clearIconClicked||(this.previousValue=""),this.lastConfirmedValue="",this.isTyping=!1)}_clearPopoverFocusAndSelection(){var e,t;this.showSuggestions&&this.Suggestions&&(this._isValueStateFocused=!1,this.hasSuggestionItemSelected=!1,null==(e=this.Suggestions)||e._deselectItems(),null==(t=this.Suggestions)||t._clearItemFocus())}_click(){TZ()&&!this.readonly&&this.Suggestions&&(this.blur(),this.open=!0)}_handleChange(){var e;this._clearIconClicked?this._clearIconClicked=!1:this.previousValue!==this.getInputDOMRefSync().value&&((null==(e=this.Suggestions)?void 0:e._getPicker().open)&&this._flattenItems.some((e=>e.hasAttribute("ui5-suggestion-item")&&e.selected))?this._changeToBeFired=!0:(()=>{this.fireDecoratorEvent(U9.CHANGE),this.previousValue=this.value,this.typedInValue=this.value})())}_clear(){const e=this.value;this.value="",this.fireDecoratorEvent(U9.INPUT,{inputType:""})?this._isPhone||(this.fireResetSelectionChange(),this.focus(),this._focusedAfterClear=!0):this.value=e}_iconMouseDown(){this._clearIconClicked=!0}_scroll(e){this.fireDecoratorEvent("suggestion-scroll",{scrollTop:e.detail.scrollTop,scrollContainer:e.detail.targetRef})}_handleSelect(){this.fireDecoratorEvent("select",{})}_handleInput(e){const t=this.getInputDOMRefSync(),i=this.value&&this.isTypeNumber&&!t.value,n=e.inputType||e.detail&&e.detail.inputType||"";if(this._keepInnerValue=!1,this._shouldAutocomplete=!["deleteWordBackward","deleteWordForward","deleteSoftLineBackward","deleteSoftLineForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteByDrag","deleteByCut","deleteContent","deleteContentBackward","deleteContentForward","historyUndo"].includes(n)&&!this.noTypeahead,e instanceof InputEvent){const t=this.isTypeNumber&&("deleteContentForward"===e.inputType||"deleteContentBackward"===e.inputType)&&!e.target.value.includes(".")&&this.value.includes("."),n=i&&"e"===e.data,r=i&&this.value.startsWith("-")&&2===this.value.length&&("deleteContentForward"===e.inputType||"deleteContentBackward"===e.inputType);(t||n||r)&&(this.value=e.target.value,this._keepInnerValue=!0)}e.target===t&&(this.focused=!0,e.stopImmediatePropagation()),this.fireEventByAction(H9.ACTION_ENTER,e),this.hasSuggestionItemSelected=!1,this._isValueStateFocused=!1,this.Suggestions&&this.Suggestions.updateSelectedItemPosition(-1),this.isTyping=!0}_startsWithMatchingItems(e){return t=e,this._selectableItems.filter((e=>(e.text||"").toLowerCase().startsWith(t.toLowerCase())));var t}_getFirstMatchingItem(e){if(!this._flattenItems.length)return;const t=this._startsWithMatchingItems(e).filter((e=>!this._isGroupItem(e)));return t.length?t[0]:void 0}_handleSelectionChange(e){var t;null==(t=this.Suggestions)||t.onItemPress(e)}_handleTypeAhead(e){const t=e.text?e.text:"";this._innerValue=t,this.value=t,this._performTextSelection=!0,this._shouldAutocomplete=!1}_handleResize(){this._inputWidth=this.offsetWidth}_updateAssociatedLabelsTexts(){this._associatedLabelsTexts=(()=>{const e=[];if(V2(this).forEach((t=>{const i=t.textContent;i&&e.push(i)})),e.length)return e.join(" ")})(),this._accessibleLabelsRefTexts=U2(this)}_closePicker(){this.open=!1}_afterOpenPicker(){TZ()&&this.getInputDOMRef().focus(),this._handlePickerAfterOpen()}_afterClosePicker(){this.announceSelectedItem(),TZ()&&(this.blur(),this.focused=!1),this._changeToBeFired&&(this.fireDecoratorEvent(U9.CHANGE),this._changeToBeFired=!1),this.open=!1,this.isTyping=!1,this.hasSuggestionItemSelected&&this.focus(),this._handlePickerAfterClose()}_handlePickerAfterOpen(){var e;null==(e=this.Suggestions)||e._onOpen(),this.fireDecoratorEvent("open")}_handlePickerAfterClose(){var e;null==(e=this.Suggestions)||e._onClose(),this.fireDecoratorEvent("close")}openValueStatePopover(){this.valueStateOpen=!0}closeValueStatePopover(){this.valueStateOpen=!1}_handleValueStatePopoverAfterClose(){this.valueStateOpen=!1}_getValueStatePopover(){return this.shadowRoot.querySelector("[ui5-popover]")}enableSuggestions(){if(this.Suggestions)return;const e=eK("InputSuggestions");e.i18nBundle=z9.i18nBundle,e&&(this.Suggestions=new e(this,"suggestionItems",!0,!1))}acceptSuggestion(e,t){if(this._isGroupItem(e))return;const i=this.typedInValue||this.value,n=e.text||"",r=t?this.valueBeforeItemSelection!==n:i!==n;this.hasSuggestionItemSelected=!0,this.value=n,r&&this.previousValue!==n&&(this.valueBeforeItemSelection=n,this.lastConfirmedValue=n,this._performTextSelection=!0,this.fireDecoratorEvent(U9.CHANGE),this.typedInValue=this.value,this.previousValue=this.value),this.valueBeforeSelectionStart="",this.isTyping=!1,this.open=!1}updateValueOnSelect(e){const t=this._isGroupItem(e)?this.valueBeforeSelectionStart:e.text;this.value=t||"",this._performTextSelection=!0}fireEventByAction(e,t){const i=this.value,n=this.getInputDOMRefSync();if(this.disabled||this.readonly)return;const r=this.getInputValue(),o=e===H9.ACTION_ENTER;if(this.value=r,this.typedInValue=r,this.valueBeforeSelectionStart=r,o){const e=t.inputType||"";!this.fireDecoratorEvent(U9.INPUT,{inputType:e})&&(this.value=i,n&&(n.value=i)),this.fireDecoratorEvent("value-changed"),this.fireResetSelectionChange()}}getInputValue(){return this.getDomRef()?this.getInputDOMRef().value:""}getInputDOMRef(){return TZ()&&this.Suggestions?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone"):this.nativeInput}getInputDOMRefSync(){var e;return TZ()&&(null==(e=this.Suggestions)?void 0:e._getPicker())?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone").shadowRoot.querySelector("input"):this.nativeInput}get nativeInput(){const e=this.getDomRef();return e?e.querySelector("input"):null}get nativeInputWidth(){return this.nativeInput?this.nativeInput.offsetWidth:0}isSuggestionsScrollable(){var e;return this.Suggestions?null==(e=this.Suggestions)?void 0:e._isScrollable():Promise.resolve(!1)}onItemMouseDown(e){e.preventDefault()}onItemSelected(e,t){!t&&!(null==e?void 0:e.focused)&&this.valueBeforeItemSelection!==e.text&&this.fireSelectionChange(e,!0),this.acceptSuggestion(e,t)}_handleSuggestionItemPress(e){var t;null==(t=this.Suggestions)||t.onItemPress(e)}onItemSelect(e){this.valueBeforeItemSelection=this.value,this.updateValueOnSelect(e),this.announceSelectedItem(),this.fireSelectionChange(e,!0)}get _flattenItems(){return this.getSlottedNodes("suggestionItems").flatMap((e=>this._isGroupItem(e)?[e,...e.items]:[e]))}get _selectableItems(){return this._flattenItems.filter((e=>!this._isGroupItem(e)))}get valueStateTypeMappings(){return{Positive:z9.i18nBundle.getText(g2),Information:z9.i18nBundle.getText(m2),Negative:z9.i18nBundle.getText(p2),Critical:z9.i18nBundle.getText(f2)}}valueStateTextMappings(){return{Positive:z9.i18nBundle.getText(b2),Information:z9.i18nBundle.getText(y2),Negative:z9.i18nBundle.getText(_2),Critical:z9.i18nBundle.getText(v2)}}announceSelectedItem(){const e=this.shadowRoot.querySelector("#selectionText");e&&(e.textContent=this.itemSelectionAnnounce)}fireSelectionChange(e,t){this.Suggestions&&(this.fireDecoratorEvent(U9.SELECTION_CHANGE,{item:e}),this._isLatestValueFromSuggestions=t)}fireResetSelectionChange(){this._isLatestValueFromSuggestions&&this.fireSelectionChange(null,!1)}get _readonly(){return this.readonly&&!this.disabled}get _headerTitleText(){return z9.i18nBundle.getText(j1)}get clearIconAccessibleName(){return z9.i18nBundle.getText(Y1)}get _popupLabel(){return z9.i18nBundle.getText(o2)}get inputType(){return this.type.toLowerCase()}get isTypeNumber(){return this.type===_9.Number}get suggestionsTextId(){return this.showSuggestions?"suggestionsText":""}get valueStateTextId(){return this.hasValueState?"valueStateDesc":""}get accInfo(){const e=this.showSuggestions?"dialog":void 0,t=this.showSuggestions?"list":void 0,i=this._inputAccInfo.ariaDescribedBy?`${this.suggestionsTextId} ${this.valueStateTextId} ${this._inputAccInfo.ariaDescribedBy}`.trim():`${this.suggestionsTextId} ${this.valueStateTextId}`.trim();return{input:{ariaRoledescription:this._inputAccInfo&&(this._inputAccInfo.ariaRoledescription||void 0),ariaDescribedBy:i||void 0,ariaInvalid:this.valueState===m3.Negative?"true":void 0,ariaHasPopup:this._inputAccInfo.ariaHasPopup?this._inputAccInfo.ariaHasPopup:e,ariaAutoComplete:this._inputAccInfo.ariaAutoComplete?this._inputAccInfo.ariaAutoComplete:t,role:this._inputAccInfo&&this._inputAccInfo.role,ariaControls:this._inputAccInfo&&this._inputAccInfo.ariaControls,ariaExpanded:this._inputAccInfo&&this._inputAccInfo.ariaExpanded,ariaDescription:this._inputAccInfo&&this._inputAccInfo.ariaDescription,ariaLabel:this._inputAccInfo&&this._inputAccInfo.ariaLabel||this._accessibleLabelsRefTexts||this.accessibleName||this._associatedLabelsTexts||void 0}}}get nativeInputAttributes(){return{min:this.isTypeNumber?this._nativeInputAttributes.min:void 0,max:this.isTypeNumber?this._nativeInputAttributes.max:void 0,step:this.isTypeNumber?this._nativeInputAttributes.step||"any":void 0}}get ariaValueStateHiddenText(){if(!this.hasValueState)return;const e=this.valueState!==m3.None?this.valueStateTypeMappings[this.valueState]:"";return this.shouldDisplayDefaultValueStateMessage?this.valueStateText?`${e} ${this.valueStateText}`:e:`${e}`.concat(" ",this.valueStateMessage.map((e=>e.textContent)).join(" "))}get itemSelectionAnnounce(){return this.Suggestions?this.Suggestions.itemSelectionAnnounce:""}get iconsCount(){return(this.icon?this.icon.length:0)+(Number(this._effectiveShowClearIcon)??0)}get classes(){return{popover:{"ui5-suggestions-popover":this.showSuggestions,"ui5-popover-with-value-state-header-phone":this._isPhone&&this.showSuggestions&&this.hasValueStateMessage,"ui5-popover-with-value-state-header":!this._isPhone&&this.showSuggestions&&this.hasValueStateMessage},popoverValueState:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage-header":!0,"ui5-valuestatemessage--success":this.valueState===m3.Positive,"ui5-valuestatemessage--error":this.valueState===m3.Negative,"ui5-valuestatemessage--warning":this.valueState===m3.Critical,"ui5-valuestatemessage--information":this.valueState===m3.Information}}}get styles(){const e=parseInt(getComputedStyle(document.documentElement).fontSize);return{popoverHeader:{"max-width":this._inputWidth?`${this._inputWidth}px`:""},suggestionPopoverHeader:{display:0===this._listWidth?"none":"inline-block",width:this._listWidth?`${this._listWidth}px`:""},suggestionsPopover:{"min-width":this._inputWidth?`${this._inputWidth}px`:"","max-width":this._inputWidth&&this._inputWidth/e>40?`${this._inputWidth}px`:"40rem"},innerInput:{padding:""}}}get suggestionSeparators(){return"None"}get shouldDisplayOnlyValueStateMessage(){return this.hasValueStateMessage&&!this.readonly&&!this.open&&this.focused}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateMessage}get hasValueState(){return this.valueState!==m3.None}get hasValueStateMessage(){return this.hasValueState&&this.valueState!==m3.Positive&&(!this._inputIconFocused||!(!this._isPhone||!this.Suggestions))}get valueStateText(){return this.valueState!==m3.None?this.valueStateTextMappings()[this.valueState]:void 0}get suggestionsText(){return z9.i18nBundle.getText(Q1)}get availableSuggestionsCount(){var e;if(this.showSuggestions&&(this.value||(null==(e=this.Suggestions)?void 0:e.isOpened()))){const e=this._selectableItems;switch(e.length){case 0:return z9.i18nBundle.getText(X1);case 1:return z9.i18nBundle.getText(q1);default:return z9.i18nBundle.getText(W1,e.length)}}}get step(){return this.isTypeNumber?"any":void 0}get _isPhone(){return TZ()}get _isSuggestionsFocused(){var e;return!this.focused&&(null==(e=this.Suggestions)?void 0:e.isOpened())}get _placeholder(){return this.placeholder}get _valueStateInputIcon(){return this.valueState!==m3.None?`\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 20 20" fill="none">\n\t\t\t\t${{Negative:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20ZM7.70711 13.7071C7.31658 14.0976 6.68342 14.0976 6.29289 13.7071C5.90237 13.3166 5.90237 12.6834 6.29289 12.2929L8.58579 10L6.29289 7.70711C5.90237 7.31658 5.90237 6.68342 6.29289 6.29289C6.68342 5.90237 7.31658 5.90237 7.70711 6.29289L10 8.58579L12.2929 6.29289C12.6834 5.90237 13.3166 5.90237 13.7071 6.29289C14.0976 6.68342 14.0976 7.31658 13.7071 7.70711L11.4142 10L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L10 11.4142L7.70711 13.7071Z" fill="#EE3939"/>',Critical:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M11.8619 0.49298C11.6823 0.187541 11.3544 0 11 0C10.6456 0 10.3177 0.187541 10.1381 0.49298L0.138066 17.493C-0.0438112 17.8022 -0.0461447 18.1851 0.13195 18.4965C0.310046 18.8079 0.641283 19 1 19H21C21.3587 19 21.69 18.8079 21.868 18.4965C22.0461 18.1851 22.0438 17.8022 21.8619 17.493L11.8619 0.49298ZM11 6C11.5523 6 12 6.44772 12 7V10C12 10.5523 11.5523 11 11 11C10.4477 11 10 10.5523 10 10V7C10 6.44772 10.4477 6 11 6ZM11 16C11.8284 16 12.5 15.3284 12.5 14.5C12.5 13.6716 11.8284 13 11 13C10.1716 13 9.5 13.6716 9.5 14.5C9.5 15.3284 10.1716 16 11 16Z" fill="#F58B00"/>',Positive:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M0 10C0 15.5228 4.47715 20 10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10ZM14.7071 6.29289C14.3166 5.90237 13.6834 5.90237 13.2929 6.29289L8 11.5858L6.70711 10.2929C6.31658 9.90237 5.68342 9.90237 5.29289 10.2929C4.90237 10.6834 4.90237 11.3166 5.29289 11.7071L7.29289 13.7071C7.68342 14.0976 8.31658 14.0976 8.70711 13.7071L14.7071 7.70711C15.0976 7.31658 15.0976 6.68342 14.7071 6.29289Z" fill="#36A41D"/>',Information:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M3 0C1.34315 0 0 1.34315 0 3V15C0 16.6569 1.34315 18 3 18H15C16.6569 18 18 16.6569 18 15V3C18 1.34315 16.6569 0 15 0H3ZM9 6.5C9.82843 6.5 10.5 5.82843 10.5 5C10.5 4.17157 9.82843 3.5 9 3.5C8.17157 3.5 7.5 4.17157 7.5 5C7.5 5.82843 8.17157 6.5 9 6.5ZM9 8.5C9.55228 8.5 10 8.94772 10 9.5V13.5C10 14.0523 9.55228 14.5 9 14.5C8.44771 14.5 8 14.0523 8 13.5V9.5C8 8.94772 8.44771 8.5 9 8.5Z" fill="#1B90FF"/>'}[this.valueState]};\n\t\t\t</svg>\n\t\t\t`:""}get _valueStatePopoverHorizontalAlign(){return"rtl"!==this.effectiveDir?"Start":"End"}get _valueStateMessageInputIcon(){return this.valueState!==m3.None?{Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"}[this.valueState]:""}getCaretPosition(){return(e=>{let t=0;return(e.selectionStart||0===e.selectionStart)&&(t="backward"===e.selectionDirection?e.selectionStart:e.selectionEnd),t})(this.nativeInput)}setCaretPosition(e){((e,t)=>{e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()})(this.nativeInput,e)}removeFractionalPart(e){return e.includes(".")?e.slice(0,e.indexOf(".")):e.includes(",")?e.slice(0,e.indexOf(",")):e}};V9([_0({type:Boolean})],$9.prototype,"disabled",void 0),V9([_0({type:Boolean})],$9.prototype,"highlight",void 0),V9([_0()],$9.prototype,"placeholder",void 0),V9([_0({type:Boolean})],$9.prototype,"readonly",void 0),V9([_0({type:Boolean})],$9.prototype,"required",void 0),V9([_0({type:Boolean})],$9.prototype,"noTypeahead",void 0),V9([_0()],$9.prototype,"type",void 0),V9([_0()],$9.prototype,"value",void 0),V9([_0({noAttribute:!0})],$9.prototype,"_innerValue",void 0),V9([_0()],$9.prototype,"valueState",void 0),V9([_0()],$9.prototype,"name",void 0),V9([_0({type:Boolean})],$9.prototype,"showSuggestions",void 0),V9([_0({type:Number})],$9.prototype,"maxlength",void 0),V9([_0()],$9.prototype,"accessibleName",void 0),V9([_0()],$9.prototype,"accessibleNameRef",void 0),V9([_0({type:Boolean})],$9.prototype,"showClearIcon",void 0),V9([_0({type:Boolean})],$9.prototype,"open",void 0),V9([_0({type:Boolean})],$9.prototype,"_effectiveShowClearIcon",void 0),V9([_0({type:Boolean})],$9.prototype,"focused",void 0),V9([_0({type:Boolean})],$9.prototype,"valueStateOpen",void 0),V9([_0({type:Boolean})],$9.prototype,"_isValueStateFocused",void 0),V9([_0({type:Object})],$9.prototype,"_inputAccInfo",void 0),V9([_0({type:Object})],$9.prototype,"_nativeInputAttributes",void 0),V9([_0({type:Number})],$9.prototype,"_inputWidth",void 0),V9([_0({type:Number})],$9.prototype,"_listWidth",void 0),V9([_0({type:Boolean,noAttribute:!0})],$9.prototype,"_inputIconFocused",void 0),V9([_0({noAttribute:!0})],$9.prototype,"_associatedLabelsTexts",void 0),V9([_0({noAttribute:!0})],$9.prototype,"_accessibleLabelsRefTexts",void 0),V9([y0({type:HTMLElement,default:!0})],$9.prototype,"suggestionItems",void 0),V9([y0()],$9.prototype,"icon",void 0),V9([y0({type:HTMLElement,invalidateOnChildChange:!0})],$9.prototype,"valueStateMessage",void 0),V9([f1("@ui5/webcomponents")],$9,"i18nBundle",void 0),$9=z9=V9([m0({tag:"ui5-input",languageAware:!0,formAssociated:!0,renderer:d1,template:function(e,t,i){return u1`<div class="ui5-input-root ui5-input-focusable-element" part="root" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}"><div class="ui5-input-content"><input id="inner" part="input" class="ui5-input-inner" style="${l1(this.styles.innerInput)}" type="${c1(this.inputType)}" inner-input ?inner-input-with-icon="${this.icon.length}" ?disabled="${this.disabled}" ?readonly="${this._readonly}" .value="${c1(this._innerValue)}" placeholder="${c1(this._placeholder)}" maxlength="${c1(this.maxlength)}" role="${c1(this.accInfo.input.role)}" aria-controls="${c1(this.accInfo.input.ariaControls)}" aria-invalid="${c1(this.accInfo.input.ariaInvalid)}" aria-haspopup="${c1(this.accInfo.input.ariaHasPopup)}" aria-describedby="${c1(this.accInfo.input.ariaDescribedBy)}" aria-roledescription="${c1(this.accInfo.input.ariaRoledescription)}" aria-autocomplete="${c1(this.accInfo.input.ariaAutoComplete)}" aria-expanded="${c1(this.accInfo.input.ariaExpanded)}" aria-label="${c1(this.accInfo.input.ariaLabel)}" aria-required="${c1(this.required)}" autocomplete="off" @input="${this._handleInput}" @change="${this._handleChange}" @select="${this._handleSelect}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click=${this._click} @focusin=${this.innerFocusIn} data-sap-focus-ref step="${c1(this.nativeInputAttributes.step)}" min="${c1(this.nativeInputAttributes.min)}" max="${c1(this.nativeInputAttributes.max)}" />${this._effectiveShowClearIcon?v9.call(this,e,t,i):void 0}${this.icon.length?y9.call(this,e,t,i):void 0}<div class="ui5-input-value-state-icon">${MY(this._valueStateInputIcon)}</div>${this._effectiveShowSuggestions?b9.call(this,e,t,i):void 0}${this.accInfo.input.ariaDescription?A9.call(this,e,t,i):void 0}${this.hasValueState?w9.call(this,e,t,i):void 0}</div></div>${this._effectiveShowSuggestions?x9.call(this,e,t,i):void 0}${this.hasValueStateMessage?L9.call(this,e,t,i):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Input.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}\n'},P7,D7,{packageName:"@ui5/webcomponents",fileName:"themes/Suggestions.css.ts",content:".ui5-suggestions-popover{box-shadow:var(--sapContent_Shadow1)}.ui5-suggestions-popover::part(header),.ui5-suggestions-popover::part(content){padding:0}.ui5-suggestions-popover::part(footer){padding:0 1rem}.input-root-phone.native-input-wrapper{display:contents}.input-root-phone.native-input-wrapper:before{display:none}.native-input-wrapper .ui5-input-inner-phone{margin:0}\n"}],features:["InputSuggestions"],get dependencies(){const e=eK("InputSuggestions");return[e3,g7,r5].concat(e?e.dependencies:[])}}),v0("change",{bubbles:!0}),v0("value-changed",{bubbles:!0}),v0("input",{bubbles:!0,cancelable:!0}),v0("select",{bubbles:!0}),v0("selection-change",{detail:{item:{type:HTMLElement}},bubbles:!0}),v0("type-ahead",{bubbles:!0}),v0("suggestion-scroll",{detail:{scrollTop:{type:Number},scrollContainer:{type:HTMLElement}},bubbles:!0}),v0("open",{bubbles:!0}),v0("close",{bubbles:!0})],$9),$9.define();const G9=$9;bJ("direction-arrows",{pathData:"M507 244q5 5 5 12 0 6-5 11L394 379q-5 5-12 5-6 0-11-5t-5-11V144q0-12 10-15 2-1 6-1 8 0 12 4zM135 129q10 3 10 15v224q0 6-4.5 11t-11.5 5q-6 0-11-5L5 267q-5-5-5-11 0-7 5-12l113-112q4-4 11-4 4 0 6 1z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("direction-arrows",{pathData:"M504 237q8 8 8 19t-8 19L395 377q-7 7-17 7t-18-7.5-8-18.5V154q0-11 8-18.5t19-7.5q9 0 16 7zM135 128q11 0 18 7.5t7 18.5v204q0 12-8 19t-18 7-17-7L8 275q-8-8-8-19t8-19l109-102q7-7 18-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));const Q9={packageName:"@ui5/webcomponents",fileName:"themes/SliderBase.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([disabled]){opacity:var(--_ui5-v2-4-0_slider_disabled_opacity);cursor:default;pointer-events:none}:host{box-sizing:border-box;cursor:pointer;vertical-align:top;width:100%}:host(:not([hidden])){display:inline-block}.ui5-slider-root{box-sizing:border-box;height:3.3125rem;outline:none;padding:var(--_ui5-v2-4-0_slider_padding);touch-action:none}.ui5-slider-inner{background-repeat:no-repeat;position:relative;min-width:var(--_ui5-v2-4-0_slider_inner_min_width);height:100%}.ui5-slider-progress-container{width:100%;background:var(--_ui5-v2-4-0_slider_progress_container_background);border:var(--_ui5-v2-4-0_slider_progress_border);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_inner_height);position:relative;box-sizing:var(--_ui5-v2-4-0_slider_progress_box_sizing);top:var(--_ui5-v2-4-0_slider_progress_container_top)}.ui5-slider-progress-container:before,.ui5-slider-progress-container:after{display:var(--_ui5-v2-4-0_slider_progress_container_dot_display);content:"";position:absolute;border-radius:50%;width:var(--_ui5-v2-4-0_slider_start_end_point_size);height:var(--_ui5-v2-4-0_slider_start_end_point_size);top:var(--_ui5-v2-4-0_slider_start_end_point_top)}.ui5-slider-progress-container:before{inset-inline-start:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_before_background);border:var(--_ui5-v2-4-0_slider_progress_before_border)}.ui5-slider-progress-container:after{inset-inline-end:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_after_background);border:var(--_ui5-v2-4-0_slider_progress_after_border)}.ui5-slider-progress{background:var(--_ui5-v2-4-0_slider_progress_background);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_progress_height);position:relative;outline:none;box-sizing:border-box;border:var(--_ui5-v2-4-0_slider_active_progress_border);left:var(--_ui5-v2-4-0_slider_active_progress_left);top:var(--_ui5-v2-4-0_slider_active_progress_top)}.ui5-slider-tickmarks{list-style:none;padding:0;margin:0;top:var(--_ui5-v2-4-0_slider_tickmark_top);display:flex;box-sizing:border-box;width:100%;justify-content:space-between;position:absolute;z-index:1}.ui5-slider-tickmarks li{height:var(--_ui5-v2-4-0_slider_tickmark_height);border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_bg)}.ui5-slider-handle{background:var(--_ui5-v2-4-0_slider_handle_background);border:var(--_ui5-v2-4-0_slider_handle_border);border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);position:relative;outline:none;height:var(--_ui5-v2-4-0_slider_handle_height);width:var(--_ui5-v2-4-0_slider_handle_width);box-sizing:var(--_ui5-v2-4-0_slider_handle_box_sizing);display:flex;justify-content:center;align-items:center;z-index:2}[slider-icon]{display:var(--_ui5-v2-4-0_slider_handle_icon_display);color:var(--sapContent_Selected_ForegroundColor);width:var(--_ui5-v2-4-0_slider_handle_icon_size);height:var(--_ui5-v2-4-0_slider_handle_icon_size)}.ui5-slider-root .ui5-slider-handle:focus [slider-icon]{display:var(--_ui5-v2-4-0_range_slider_active_handle_icon_display)}.ui5-slider-progress-container:hover~.ui5-slider-handle:not(:focus),.ui5-slider-handle:hover{background:var(--_ui5-v2-4-0_slider_handle_hover_background);border:var(--_ui5-v2-4-0_slider_handle_hover_border)}.ui5-slider-root:focus .ui5-slider-inner .ui5-slider-handle,.ui5-slider-handle:focus{outline:var(--_ui5-v2-4-0_slider_handle_outline);outline-offset:var(--_ui5-v2-4-0_slider_handle_outline_offset);border:var(--_ui5-v2-4-0_slider_handle_focus_border);background:var(--_ui5-v2-4-0_slider_handle_background_focus)}.ui5-slider-handle.ui5-slider-handle--start:focus,.ui5-slider-handle--end:focus{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-root:focus:hover .ui5-slider-handle,.ui5-slider-handle:focus:hover{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-handle-container{position:absolute;margin-inline-start:calc(-1 * var(--_ui5-v2-4-0_slider_handle_width) / 2);top:var(--_ui5-v2-4-0_slider_handle_top)}:host(:not([hidden])) .ui5-slider-handle-container .ui5-slider-tooltip{display:flex;font-family:var(--sapFontFamily);justify-content:center;align-items:center;visibility:hidden;position:absolute;left:50%;transform:translate(-50%);bottom:var(--_ui5-v2-4-0_slider_tooltip_bottom);background:var(--_ui5-v2-4-0_slider_tooltip_background);border:var(--_ui5-v2-4-0_slider_tooltip_border);border-radius:var(--_ui5-v2-4-0_slider_tooltip_border_radius);box-shadow:var(--_ui5-v2-4-0_slider_tooltip_box_shadow);font-size:var(--_ui5-v2-4-0_slider_tooltip_fontsize);color:var(--_ui5-v2-4-0_slider_tooltip_color);height:var(--_ui5-v2-4-0_slider_tooltip_height);min-width:var(--_ui5-v2-4-0_slider_tooltip_min_width);padding:var(--_ui5-v2-4-0_slider_tooltip_padding);box-sizing:var(--_ui5-v2-4-0_slider_tooltip_border_box)}:host(:not([hidden])):host([editable-tooltip]) .ui5-slider-handle-container .ui5-slider-tooltip{border:none;background:none;box-shadow:none}:host([editable-tooltip]) .ui5-slider-tooltip{padding:0;box-shadow:none}.ui5-slider-tooltip [ui5-input]{width:100%;text-align:center}.ui5-slider-tooltip-value{position:relative;display:flex;justify-content:center;align-items:center}.ui5-slider-labels{position:absolute;top:1.25rem;margin:0;padding:0;white-space:nowrap}.ui5-slider-labels li{position:relative;list-style:none;padding-top:.3125rem;height:1rem;margin:0;text-align:center;display:inline-block;color:var(--_ui5-v2-4-0_slider_label_color);font-family:var(--sapFontFamily);font-size:var(--_ui5-v2-4-0_slider_label_fontsize);padding-top:0;box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.ui5-slider-hidden-labels li:not(:first-child):not(:last-child){visibility:hidden}.ui5-slider-handle:focus .ui5-slider-tooltip{bottom:var(--_ui5-v2-4-0_slider_handle_focused_tooltip_distance)}.ui5-slider-tickmarks li.ui5-slider-tickmark-in-range{border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_in_range_bg)}:host([show-tickmarks]) .ui5-slider-progress{height:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_height);border:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border);left:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left);top:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top)}:host([show-tickmarks]) .ui5-slider-progress-container{top:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top)}.ui5-slider-handle:focus:after{content:"";display:var(--_ui5-v2-4-0_slider_handle_focus_visibility);width:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);height:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);border:var(--sapContent_FocusWidth) dotted var(--sapContent_FocusColor);position:absolute;border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);pointer-events:none}\n'};var j9,q9=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let W9=j9=class extends f0{async formElementAnchor(){return this.getFocusDomRefAsync()}constructor(){super(),this.min=0,this.max=100,this.step=1,this.labelInterval=0,this.showTickmarks=!1,this.showTooltip=!1,this.editableTooltip=!1,this.disabled=!1,this.value=0,this._tooltipVisibility="hidden",this._labelsOverlapping=!1,this._hiddenTickmarks=!1,this._isInputValueValid=!1,this.notResized=!1,this._isUserInteraction=!1,this._isInnerElementFocusing=!1,this._labelWidth=0,this._resizeHandler=this._handleResize.bind(this),this._moveHandler=this._handleMove.bind(this),this._upHandler=this._handleUp.bind(this),this._stateStorage={step:void 0,min:void 0,max:void 0,labelInterval:void 0},this._ontouchstart={handleEvent:e=>{this._onmousedown(e)},passive:!0}}_handleMove(e){}_handleUp(e){}_onmousedown(e){}_handleActionKeyPress(e){}_updateInputValue(){}static get ACTION_KEYS(){return[x0,S0,C0,E0,T0,I0,M0,k0,$0,G0,L0,O0,H0,V0,F0]}static get MIN_SPACE_BETWEEN_TICKMARKS(){return 8}static get TOOLTIP_VISIBILITY(){return{VISIBLE:"visible",HIDDEN:"hidden"}}static get renderer(){return d1}static get styles(){return Q9}get classes(){return{root:{"ui5-slider-root-phone":TZ()},labelContainer:{"ui5-slider-hidden-labels":this._labelsOverlapping}}}onEnterDOM(){i4.register(this,this._resizeHandler)}onExitDOM(){i4.deregister(this,this._resizeHandler)}onAfterRendering(){this.notResized&&this._resizeHandler()}_onmouseover(){this.showTooltip&&(this._tooltipVisibility=j9.TOOLTIP_VISIBILITY.VISIBLE)}_onmouseout(){this.showTooltip&&!this.shadowRoot.activeElement&&(this._tooltipVisibility=j9.TOOLTIP_VISIBILITY.HIDDEN)}_onkeydown(e){const t=e.target;Q0(e)&&t.classList.contains("ui5-slider-handle")&&t.parentNode.querySelector(".ui5-slider-handle-container ui5-input").focus(),this.disabled||0===this._effectiveStep||t.hasAttribute("ui5-slider-handle")||j9._isActionKey(e)&&t&&!t.hasAttribute("ui5-input")&&(e.preventDefault(),this._isUserInteraction=!0,this._handleActionKeyPress(e))}_onInputKeydown(e){const t=e.target;Q0(e)&&t.hasAttribute("ui5-input")&&t.parentNode.parentNode.querySelector(".ui5-slider-handle").focus(),b0(e)&&(this._updateInputValue(),this._updateValueFromInput(e))}_onInputChange(){this._valueOnInteractionStart!==this.value&&this.fireEvent("change")}_onInputInput(){this.fireEvent("input")}_updateValueFromInput(e){const t=e.target,i=parseFloat(t.value);this._isInputValueValid=i>=this._effectiveMin&&i<=this._effectiveMax,this._isInputValueValid&&(this.value=i)}_onKeyupBase(){this.disabled||(this._isUserInteraction=!1)}_preserveFocus(e){this._isInnerElementFocusing=e}_isFocusing(){return this._isInnerElementFocusing}_preventFocusOut(){this.focusInnerElement()}focusInnerElement(){this.focus()}_handleResize(){if(!this.showTickmarks)return;if(this.notResized=!1,this._spaceBetweenTickmarks()<j9.MIN_SPACE_BETWEEN_TICKMARKS?(this._hiddenTickmarks=!0,this._labelsOverlapping=!0):this._hiddenTickmarks=!1,this.labelInterval<=0||this._hiddenTickmarks)return;const e=this.shadowRoot.querySelectorAll(".ui5-slider-labels li");this._labelsOverlapping=[...e].some((e=>e.scrollWidth>e.clientWidth))}handleDownBase(e){const t=this._effectiveMin,i=this._effectiveMax,n=this.getBoundingClientRect(),r=this.directionStart,o=this._effectiveStep,s=j9.getValueFromInteraction(e,o,t,i,n,r);return this._isUserInteraction=!0,window.addEventListener("mouseup",this._upHandler),window.addEventListener("touchend",this._upHandler),CZ()&&e instanceof TouchEvent?window.addEventListener("touchmove",this._moveHandler):window.addEventListener("mousemove",this._moveHandler),this._handleFocusOnMouseDown(e),s}_handleFocusOnMouseDown(e){const t=this.shadowRoot.activeElement,i=e.target;t&&t===i||i.hasAttribute("ui5-input")||(this._preserveFocus(!0),this.focusInnerElement())}handleUpBase(){window.removeEventListener("mouseup",this._upHandler),window.removeEventListener("touchend",this._upHandler),window.removeEventListener("mousemove",this._moveHandler),window.removeEventListener("touchmove",this._moveHandler),this._isUserInteraction=!1,this._preserveFocus(!1)}updateStateStorageAndFireInputEvent(e){this.storePropertyState(e),this._isUserInteraction&&this.fireDecoratorEvent("input")}static _isActionKey(e){return this.ACTION_KEYS.some((t=>t(e)))}static clipValue(e,t,i){return Math.min(Math.max(e,t),i)}static getValueFromInteraction(e,t,i,n,r,o){const s=this.getPageXValueFromEvent(e),a=this.computedValueFromPageX(s,i,n,r,o),l=this.getSteppedValue(a,t,i);return this.clipValue(l,i,n)}static getSteppedValue(e,t,i){const n=Math.abs((e-i)%t);if(0===t||0===n)return e;e=2*n>=t?e+t-n:e-n;const r=j9._getDecimalPrecisionOfNumber(t);return Number(e.toFixed(r))}static getPageXValueFromEvent(e){return CZ()&&e instanceof TouchEvent?e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].pageX:0:e.pageX}static computedValueFromPageX(e,t,i,n,r){return t+("left"===r?e-n[r]:n[r]-e)/n.width*(i-t)}static _getDecimalPrecisionOfNumber(e){if(Number.isInteger(e))return 0;const t=String(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!t||t.length<2?0:Math.max(0,(t[1]?t[1].length:0)-(t[2]?Number(t[2]):0))}isCurrentStateOutdated(){return Object.entries(this._stateStorage).some((e=>{let[t,i]=e;return this[t]!==i}))}getStoredPropertyState(e){return this._stateStorage[e]}isPropertyUpdated(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.some((e=>this.getStoredPropertyState(e)!==this[e]))}storePropertyState(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this._stateStorage[e]=this[e]}))}get directionStart(){return"rtl"===this.effectiveDir?"right":"left"}_createLabels(){if(!this.labelInterval||!this.showTickmarks)return;const e=this.labelInterval,t=this._effectiveStep,i=(this._effectiveMax-this._effectiveMin)/(t*e);if(i===this._oldNumberOfLabels&&this._oldMin===this._effectiveMin&&this._oldMax===this._effectiveMax)return;this._oldMin=this._effectiveMin,this._oldMax=this._effectiveMax,this._oldNumberOfLabels=i,this._labelWidth=100/i,this._labelValues=[];const n=j9._getDecimalPrecisionOfNumber(t);for(let r=0;r<=i;r++){const i=(r*t*e+this._effectiveMin).toFixed(n);this._labelValues.push(i)}}_handleActionKeyPressBase(e,t){const i=j9._isIncreaseValueAction(e,this.directionStart),n=j9._isBigStepAction(e),r=this[t],o=this._effectiveMin,s=this._effectiveMax;let a=this._effectiveStep;return a=n&&(s-o)/a>10?(s-o)/10:a,O0(e)?s-r:L0(e)?-1*(r-o):i?a:-1*a}static _isIncreaseValueAction(e,t){return"right"===t?C0(e)||M0(e)||x0(e)||T0(e)||$0(e)||H0(e):C0(e)||M0(e)||S0(e)||I0(e)||$0(e)||H0(e)}static _isBigStepAction(e){return k0(e)||M0(e)||T0(e)||I0(e)||H0(e)||V0(e)}get _tickmarksCount(){return(this._effectiveMax-this._effectiveMin)/this._effectiveStep}_spaceBetweenTickmarks(){return this.getBoundingClientRect().width/this._tickmarksCount}_validateStep(e){0===e&&console.warn("The 'step' property must be a positive float number"),e<0&&console.warn("The 'step' property must be a positive float number. The provided negative number has been converted to its positve equivalent"),Number.isNaN(e)&&console.warn("The 'step' property must be a positive float number. It has been set to its default value of 1")}get _labels(){return this._labelValues||[]}get _effectiveStep(){let e=this.step;return e<0&&(e=Math.abs(e)),Number.isNaN(e)&&(e=1),e}get _effectiveMin(){return Math.min(this.min,this.max)}get _effectiveMax(){return Math.max(this.min,this.max)}get _tabIndex(){return this.disabled?"-1":"0"}get _ariaDescribedByHandleText(){return this.editableTooltip?"ui5-slider-InputDesc":void 0}get _ariaLabelledByHandleText(){return this.accessibleName?"ui5-slider-accName ui5-slider-sliderDesc":"ui5-slider-sliderDesc"}get _ariaDescribedByInputText(){return""}get _ariaLabelledByInputText(){return""}};q9([_0({type:Number})],W9.prototype,"min",void 0),q9([_0({type:Number})],W9.prototype,"max",void 0),q9([_0()],W9.prototype,"name",void 0),q9([_0({type:Number})],W9.prototype,"step",void 0),q9([_0({type:Number})],W9.prototype,"labelInterval",void 0),q9([_0({type:Boolean})],W9.prototype,"showTickmarks",void 0),q9([_0({type:Boolean})],W9.prototype,"showTooltip",void 0),q9([_0({type:Boolean})],W9.prototype,"editableTooltip",void 0),q9([_0({type:Boolean})],W9.prototype,"disabled",void 0),q9([_0()],W9.prototype,"accessibleName",void 0),q9([_0({type:Number})],W9.prototype,"value",void 0),q9([_0()],W9.prototype,"_tooltipVisibility",void 0),q9([_0({type:Boolean})],W9.prototype,"_labelsOverlapping",void 0),q9([_0({type:Boolean})],W9.prototype,"_hiddenTickmarks",void 0),q9([_0({type:Boolean})],W9.prototype,"_isInputValueValid",void 0),W9=j9=q9([v0("change",{bubbles:!0}),v0("input",{bubbles:!0})],W9);const X9=W9;function Y9(e,t,i){return u1`${this.showTickmarks?K9.call(this,e,t,i):void 0}`}function K9(e,t,i){return u1`<ul class="ui5-slider-tickmarks">${s1(this.tickmarksObject,((e,t)=>e._id||t),((n,r)=>Z9.call(this,e,t,i,n,r)))}</ul>${this.labelInterval?tee.call(this,e,t,i):void 0}`}function Z9(e,t,i,n,r){return u1`${n?J9.call(this,e,t,i,n,r):eee.call(this,e,t,i,n,r)}`}function J9(e,t,i,n,r){return u1`<li class="ui5-slider-tickmark ui5-slider-tickmark-in-range"></li>`}function eee(e,t,i,n,r){return u1`<li class="ui5-slider-tickmark"></li>`}function tee(e,t,i){return u1`<ul class="ui5-slider-labels ${a1(this.classes.labelContainer)}" style="${l1(this.styles.labelContainer)}">${s1(this._labels,((e,t)=>e._id||t),((n,r)=>iee.call(this,e,t,i,n,r)))}</ul>`}function iee(e,t,i,n,r){return u1`<li style="${l1(this.styles.label)}">${c1(n)}</li>`}function nee(e,t,i){return u1`<div class="ui5-slider-tooltip" style="${l1(this.styles.tooltip)}">${this.editableTooltip?ree.call(this,e,t,i):oee.call(this,e,t,i)}</div>`}function ree(e,t,i){return i?u1`<${p1("ui5-input",t,i)} value="${c1(this._tooltipInputValue)}" value-state="${c1(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${c1(this._onInputChange)}" @ui5-input="${c1(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></${p1("ui5-input",t,i)}>`:u1`<ui5-input value="${c1(this._tooltipInputValue)}" value-state="${c1(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${c1(this._onInputChange)}" @ui5-input="${c1(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></ui5-input>`}function oee(e,t,i){return u1`<span class="ui5-slider-tooltip-value">${c1(this.tooltipValue)}</span>`}function see(e,t,i){return u1`<span id="ui5-slider-accName" class="ui5-hidden-text">${c1(this.accessibleName)}</span>`}function aee(e,t,i){return u1`<span id="ui5-slider-InputDesc" class="ui5-hidden-text">${c1(this._ariaDescribedByInputText)}</span><span id="ui5-slider-InputLabel" class="ui5-hidden-text">${c1(this._ariaLabelledByInputText)}</span>`}var lee,cee=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let uee=lee=class extends X9{get formFormattedValue(){return this.value.toString()}constructor(){super(),this.value=0,this._progressPercentage=0,this._handlePositionFromStart=0,this._tooltipInputValue=this.value.toString(),this._tooltipInputValueState="None",this._stateStorage.value=void 0,this._lastValidInputValue=this.min.toString()}onBeforeRendering(){this.editableTooltip&&this._updateInputValue(),this.isCurrentStateOutdated()&&(this.notResized=!0,this.syncUIAndState(),this._updateHandleAndProgress(this.value))}syncUIAndState(){this.isPropertyUpdated("step")&&(this._validateStep(this.step),this.storePropertyState("step")),this.isPropertyUpdated("min","max","value")&&(this.storePropertyState("min","max"),this.value=X9.clipValue(this.value,this._effectiveMin,this._effectiveMax),this.updateStateStorageAndFireInputEvent("value"),this.storePropertyState("value")),this.labelInterval&&this.showTickmarks&&this._createLabels(),this.isPropertyUpdated("labelInterval")&&this.storePropertyState("labelInterval")}_onmousedown(e){if(this.disabled||0===this.step||e.target.hasAttribute("ui5-input"))return;const t=this.handleDownBase(e);this._valueOnInteractionStart=this.value,void 0===this._valueInitial&&(this._valueInitial=this.value);const i=this.constructor;this._isHandlePressed(i.getPageXValueFromEvent(e))||(this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value"))}_onfocusin(){void 0===this._valueInitial&&(this._valueInitial=this.value),this.showTooltip&&(this._tooltipVisibility=X9.TOOLTIP_VISIBILITY.VISIBLE)}_onfocusout(e){var t;this._isFocusing()?this._preventFocusOut():(this._valueInitial=void 0,this.showTooltip&&!(null==(t=e.relatedTarget)?void 0:t.hasAttribute("ui5-input"))&&(this._tooltipVisibility=X9.TOOLTIP_VISIBILITY.HIDDEN))}_handleMove(e){if(e.target.hasAttribute("ui5-input"))return;if(e.preventDefault(),this.disabled||0===this._effectiveStep)return;const t=this.constructor.getValueFromInteraction(e,this._effectiveStep,this._effectiveMin,this._effectiveMax,this.getBoundingClientRect(),this.directionStart);this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value")}_handleUp(e){e.target.hasAttribute("ui5-input")||(this._valueOnInteractionStart!==this.value&&this.fireDecoratorEvent("change"),this.handleUpBase(),this._valueOnInteractionStart=void 0)}_onInputFocusOut(e){const t=this.shadowRoot.querySelector("[ui5-input]");this._tooltipVisibility=X9.TOOLTIP_VISIBILITY.HIDDEN,this._updateValueFromInput(e),this._isInputValueValid||(t.value=this._lastValidInputValue,this._isInputValueValid=!0,this._tooltipInputValueState="None")}_updateInputValue(){const e=this.shadowRoot.querySelector("[ui5-input]");if(e){if(this._isInputValueValid=parseFloat(e.value)>=this.min&&parseFloat(e.value)<=this.max,!this._isInputValueValid)return this._tooltipInputValue=this._lastValidInputValue,this._isInputValueValid=!0,void(this._tooltipInputValueState="Negative");this._tooltipInputValue=this.value.toString(),this._lastValidInputValue=this._tooltipInputValue,this._tooltipInputValueState="None"}}_isHandlePressed(e){const t=this._sliderHandle.getBoundingClientRect();return e>=t.left&&e<=t.right}_updateHandleAndProgress(e){const t=this._effectiveMax,i=this._effectiveMin;this._progressPercentage=(e-i)/(t-i),this._handlePositionFromStart=100*this._progressPercentage}_handleActionKeyPress(e){const t=this._effectiveMin,i=this._effectiveMax,n=this.value,r=this.constructor,o=F0(e)?this._valueInitial:r.clipValue(this._handleActionKeyPressBase(e,"value")+n,t,i);o!==n&&(this._updateHandleAndProgress(o),this.value=o,this.updateStateStorageAndFireInputEvent("value"))}get inputValue(){return this.value.toString()}get styles(){return{progress:{transform:`scaleX(${this._progressPercentage})`,"transform-origin":`${this.directionStart} top`},handle:{[this.directionStart]:`${this._handlePositionFromStart}%`},label:{width:`${this._labelWidth}%`},labelContainer:{width:"100%",[this.directionStart]:`-${this._labelWidth/2}%`},tooltip:{visibility:`${this._tooltipVisibility}`}}}get _sliderHandle(){return this.shadowRoot.querySelector(".ui5-slider-handle")}get tooltipValue(){const e=this.constructor._getDecimalPrecisionOfNumber(this._effectiveStep);return this.value.toFixed(e)}get _ariaDisabled(){return this.disabled||void 0}get _ariaLabelledByText(){return lee.i18nBundle.getText(h2)}get _ariaDescribedByInputText(){return lee.i18nBundle.getText(A2)}get _ariaLabelledByInputText(){return lee.i18nBundle.getText(w2)}get tickmarksObject(){const e=this._tickmarksCount,t=[];if(this._hiddenTickmarks)return[!0,!1];for(let i=0;i<=e;i++)t.push(this._effectiveMin+i*this.step<=this.value);return t}};cee([_0({type:Number})],uee.prototype,"value",void 0),cee([f1("@ui5/webcomponents")],uee,"i18nBundle",void 0),uee=lee=cee([m0({tag:"ui5-slider",languageAware:!0,formAssociated:!0,template:function(e,t,i){return i?u1`<div class="ui5-slider-root ${a1(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?Y9.call(this,e,t,i):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${l1(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${l1(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${c1(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${c1(this.min)}" aria-valuemax="${c1(this.max)}" aria-valuenow="${c1(this.value)}" aria-labelledby="${c1(this._ariaLabelledByHandleText)}" aria-disabled="${c1(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${c1(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><${p1("ui5-icon",t,i)} name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></${p1("ui5-icon",t,i)}></div>${this.showTooltip?nee.call(this,e,t,i):void 0}</div></div>${this.accessibleName?see.call(this,e,t,i):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${c1(this._ariaLabelledByText)}</span>${this.editableTooltip?aee.call(this,e,t,i):void 0}</div> `:u1`<div class="ui5-slider-root ${a1(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?Y9.call(this,e,t,i):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${l1(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${l1(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${c1(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${c1(this.min)}" aria-valuemax="${c1(this.max)}" aria-valuenow="${c1(this.value)}" aria-labelledby="${c1(this._ariaLabelledByHandleText)}" aria-disabled="${c1(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${c1(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><ui5-icon name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></ui5-icon></div>${this.showTooltip?nee.call(this,e,t,i):void 0}</div></div>${this.accessibleName?see.call(this,e,t,i):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${c1(this._ariaLabelledByText)}</span>${this.editableTooltip?aee.call(this,e,t,i):void 0}</div> `},dependencies:[r5,G9]})],uee),uee.define();const hee=uee;nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var dee,pee=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};const fee=6.5;let gee=dee=class extends f0{async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.value="rgba(255,255,255,1)",this.hex="ffffff",this._value=a9(this.value),this._alpha=1,this._hue=0,this._isSelectedColorChanged=!1,this._isHueValueChanged=!1,this._wrongHEX=!1,this._selectedCoordinates={x:249.5,y:249.5},this._mainValue={r:255,g:0,b:0},this.selectedHue=0,this.mouseDown=!1,this.mouseIn=!1}onBeforeRendering(){this._value=a9(this.value);const e=`rgba(${this._value.r},${this._value.g},${this._value.b},1)`;this._setHex(),this._setValues(),this.style.setProperty(AK("--ui5_Color_Picker_Progress_Container_Color"),e)}_handleMouseDown(e){this.mouseDown=!0,this.mouseIn=!0,this._changeSelectedColor(e.offsetX,e.offsetY)}_handleMouseUp(){this.mouseDown=!1}_handleMouseOut(e){if(!this.mouseIn||!this.mouseDown)return;const t=e.target,i=t.offsetHeight,n=t.offsetWidth,r=e.offsetX<=0,o=e.offsetY<=0,s=e.offsetY>=t.offsetHeight,a=e.offsetX>=t.offsetWidth;let l,c;l=r?0:a?n:e.offsetX,c=o?0:s?i:e.offsetY,this._changeSelectedColor(l,c),this.mouseIn=!1,this.mouseDown=!1}_handleMouseMove(e){this.mouseDown&&this.mouseIn&&this._changeSelectedColor(e.offsetX,e.offsetY)}_handleAlphaInput(e){const t=e.target.value;this._alpha=parseFloat(t),Number.isNaN(this._alpha)&&(this._alpha=1),this._isHueValueChanged=!0,this._setColor(this._value)}_handleHueInput(e){this.selectedHue=e.target.value,this._hue=this.selectedHue,this._setMainColor(this._hue),this._isHueValueChanged=!0;const t=this._selectedCoordinates.x+fee,i=this._selectedCoordinates.y+fee,n=this._calculateColorFromCoordinates(t,i);n&&this._setColor(u9(n))}_handleHEXChange(e){const t=new RegExp("^[<0-9 abcdef]+$"),i=e.target;let n=i.value.toLowerCase();3===n.length&&(n=`${n[0]}${n[0]}${n[1]}${n[1]}${n[2]}${n[2]}`);const r=6===n.length&&t.test(n);r&&i.value!==n&&(this._wrongHEX=!1,i.value=n),n!==this.hex&&(this.hex=n,r?(this._wrongHEX=!1,this._setColor(h9(this.hex))):this._wrongHEX=!0)}_handleRGBInputsChange(e){const t=e.target,i=parseInt(t.value)||0;let n;switch(t.id){case"red":n={...this._value,r:i};break;case"green":n={...this._value,g:i};break;case"blue":n={...this._value,b:i};break;default:n={...this._value}}this._setColor(n)}_setMainColor(e){this._mainValue=e<=255?{r:255,g:e,b:0}:e<=510?{r:255-(e-255),g:255,b:0}:e<=765?{r:0,g:255,b:e-510}:e<=1020?{r:0,g:765-(e-255),b:255}:e<=1275?{r:e-1020,g:0,b:255}:{r:255,g:0,b:1275-(e-255)}}_handleAlphaChange(){this._alpha=this._alpha<0?0:this._alpha,this._alpha=this._alpha>1?1:this._alpha}_changeSelectedColor(e,t){this._selectedCoordinates={x:e-fee,y:t-fee},this._isSelectedColorChanged=!0;const i=this._calculateColorFromCoordinates(e,t);i&&this._setColor(u9(i))}_onkeydown(e){b0(e)&&this._handleHEXChange(e)}_calculateColorFromCoordinates(e,t){const i=this._hue/4.251,n=1-+(Math.round(parseFloat(t/256+"e+2"))+"e-2"),r=+(Math.round(parseFloat(e/256+"e+2"))+"e-2");if(n&&r)return{h:i,s:n,l:r}}_setColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:0,g:0,b:0};this.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${this._alpha})`,this._wrongHEX=!this.isValidRGBColor(e),this.fireDecoratorEvent("change")}isValidRGBColor(e){return e.r>=0&&e.r<=255&&e.g>=0&&e.g<=255&&e.b>=0&&e.b<=255}_setHex(){let e=this._value.r.toString(16),t=this._value.g.toString(16),i=this._value.b.toString(16);1===e.length&&(e=`0${e}`),1===t.length&&(t=`0${t}`),1===i.length&&(i=`0${i}`),this.hex=e+t+i}_setValues(){const e=(e=>{const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),s=r-o;let a,l=0;0===s?l=0:r===t?l=(i-n)/s%6*60:r===i?l=60*((n-t)/s+2):r===n&&(l=60*((t-i)/s+4));const c=(r+o)/2;return a=0===s?0:s/(1-Math.abs(2*c-1)),{h:l,s:a,l:c}})(this._value);this._selectedCoordinates={x:2.56*Math.round(100*e.l)-fee,y:256-2.56*Math.round(100*e.s)-fee},this._isSelectedColorChanged?this._isSelectedColorChanged=!1:this._isHueValueChanged?(this._isHueValueChanged=!1,this._hue=this.selectedHue?this.selectedHue:this._hue):this._hue=Math.round(4.25*e.h),this._setMainColor(this._hue)}get hueSliderLabel(){return dee.i18nBundle.getText(O1)}get alphaSliderLabel(){return dee.i18nBundle.getText(L1)}get hexInputLabel(){return dee.i18nBundle.getText(F1)}get redInputLabel(){return dee.i18nBundle.getText(N1)}get greenInputLabel(){return dee.i18nBundle.getText(z1)}get blueInputLabel(){return dee.i18nBundle.getText(U1)}get alphaInputLabel(){return dee.i18nBundle.getText(H1)}get inputsDisabled(){return!!this._wrongHEX||void 0}get hexInputErrorState(){return this._wrongHEX?"Error":void 0}get styles(){return{mainColor:{"background-color":`rgb(${this._mainValue.r}, ${this._mainValue.g}, ${this._mainValue.b})`},circle:{left:`${this._selectedCoordinates.x}px`,top:`${this._selectedCoordinates.y}px`},colorSpan:{"background-color":`rgba(${this._value.r}, ${this._value.g}, ${this._value.b}, ${this._alpha})`}}}};pee([_0()],gee.prototype,"value",void 0),pee([_0()],gee.prototype,"name",void 0),pee([_0({noAttribute:!0})],gee.prototype,"hex",void 0),pee([_0({type:Object})],gee.prototype,"_mainValue",void 0),pee([_0({type:Object})],gee.prototype,"_value",void 0),pee([_0({type:Object})],gee.prototype,"_selectedCoordinates",void 0),pee([_0({type:Number})],gee.prototype,"_alpha",void 0),pee([_0({type:Number})],gee.prototype,"_hue",void 0),pee([_0({type:Boolean})],gee.prototype,"_isSelectedColorChanged",void 0),pee([_0({type:Boolean})],gee.prototype,"_isHueValueChanged",void 0),pee([_0({type:Boolean})],gee.prototype,"_wrongHEX",void 0),pee([f1("@ui5/webcomponents")],gee,"i18nBundle",void 0),gee=dee=pee([m0({tag:"ui5-color-picker",renderer:d1,formAssociated:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPicker.css.ts",content:':host(:not([hidden])){display:inline-block}.ui5-color-picker-root{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.ui5-color-picker-main-color{width:16rem;height:16rem;position:relative;margin-bottom:1.5rem;border:1px solid var(--sapContent_ForegroundBorderColor);background-size:100%;background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0)),-webkit-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0)),-moz-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:linear-gradient(left,#000,#0000),linear-gradient(top,#fff0,#fff);background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-webkit-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-moz-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:linear-gradient(left,#000,#0000,#fff),linear-gradient(top,#80808000,gray);user-select:none;-moz-user-select:none}.ui5-color-picker-circle{position:absolute;box-sizing:border-box;width:13px;height:13px;border:var(--_ui5-v2-4-0_color_picker_circle_outer_border);border-radius:.6875rem;pointer-events:none}.ui5-color-picker-circle:after{content:"";position:absolute;width:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);height:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);border:var(--_ui5-v2-4-0_color_picker_circle_inner_border);border-radius:.9375rem;pointer-events:none}.ui5-color-picker-sliders-wrapper{width:calc(100% - 11px);margin-left:-10px}[ui5-slider]{--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_progress_box_sizing: content-box}[ui5-slider]::part(handle){width:.9375rem;height:1.5rem;background:transparent;box-sizing:border-box}[ui5-slider]::part(handle-container){margin-inline-start:-2px;margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top)}[ui5-slider]::part(handle-container):focus-within{margin-inline-start:unset;margin-top:unset}[ui5-slider]::part(handle):after{content:"";border:2px solid #fff;display:block;height:1.25rem;border-radius:1rem;width:100%;box-sizing:border-box}[ui5-slider]::part(root-container){padding:1rem 0}[ui5-slider]::part(progress-container){width:calc(100% + 11px);height:18px;position:absolute;margin-top:var(--_ui5-v2-4-0_color_picker_slider_container_margin_top);border-radius:0;border:1px solid var(--sapField_BorderColor)}[ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-size:100%;background-image:-webkit-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(left,red,#ff0,#0f0,#0ff,#00f,#f0f,red);background-color:none}[ui5-slider].ui5-color-picker-alpha-slider::part(progress-container){background-image:-webkit-linear-gradient(left,rgba(65,120,13,0),var(--ui5-v2-4-0_Color_Picker_Progress_Container_Color)),url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}[ui5-slider]::part(progress-bar){background:transparent}.ui5-color-picker-current-color{width:100%;display:flex;justify-content:space-around;align-items:center}.ui5-color-picker-colors-wrapper{display:flex;flex-wrap:nowrap;height:1.5rem;border:1px solid var(--sapField_BorderColor)}.ui5-color-picker-white,.ui5-color-picker-color{width:3.1rem;background:#fff;display:block}.ui5-color-picker-color{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}.ui5-color-picker-color-inner{width:100%;height:100%}.ui5-color-picker-hex-input-wrapper{display:flex;align-items:center;flex-wrap:nowrap}.ui5-color-picker-hex-input{width:4.5rem;min-width:4.5rem;margin-left:.2rem}.ui5-color-picker-rgb-wrapper{display:flex;justify-content:space-around;width:100%}.ui5-color-picker-rgb{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.ui5-color-picker-rgb-input{width:2.5rem;min-width:2.5rem;text-align:center}.ui5-color-picker-hue-slider::part(progress-container):before,.ui5-color-picker-alpha-slider::part(progress-container):before,.ui5-color-picker-hue-slider::part(progress-container):after,.ui5-color-picker-alpha-slider::part(progress-container):after,[ui5-slider].ui5-color-picker-hue-slider::part(icon-slider),[ui5-slider].ui5-color-picker-alpha-slider::part(icon-slider){display:none}.ui5-color-picker-alpha-slider::part(handle),.ui5-color-picker-hue-slider::part(handle){box-shadow:var(--_ui5-v2-4-0_color_picker_slider_handle_box_shadow);border:var(--_ui5-v2-4-0_color_picker_slider_handle_border)}.ui5-color-picker-alpha-slider::part(handle):hover,.ui5-color-picker-hue-slider::part(handle):hover{border:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_hover)}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{outline:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_focus);outline-offset:.0625rem}.ui5-color-picker-alpha-slider::part(handle):focus:before,.ui5-color-picker-hue-slider::part(handle):focus:before{content:"";border:var(--_ui5-v2-4-0_color_picker_slider_handle_inline_focus);display:block;height:1.625rem;border-radius:1rem;width:1.05rem;box-sizing:border-box;position:absolute;inset:-3px -3px 2px}.ui5-color-picker-alpha-slider::part(handle):before,.ui5-color-picker-hue-slider::part(handle):before{display:none}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top)}:dir(rtl) [ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-image:-webkit-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}:dir(rtl) .ui5-color-picker-alpha-slider::part(handle),:dir(rtl) .ui5-color-picker-hue-slider::part(handle){--_ui5-v2-4-0_slider_handle_margin_left: 0}:dir(rtl) .ui5-color-picker-sliders-wrapper{margin-left:10px}\n'},template:function(e,t,i){return i?u1`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${l1(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${l1(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><${p1("ui5-slider",t,i)} disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${c1(this._hue)}" accessible-name="${c1(this.hueSliderLabel)}" @ui5-input="${c1(this._handleHueInput)}"></${p1("ui5-slider",t,i)}><${p1("ui5-slider",t,i)} disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${c1(this._alpha)}" accessible-name="${c1(this.alphaSliderLabel)}" @ui5-input="${c1(this._handleAlphaInput)}"></${p1("ui5-slider",t,i)}></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${l1(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><${p1("ui5-label",t,i)}>Hex</${p1("ui5-label",t,i)}><${p1("ui5-input",t,i)} class="ui5-color-picker-hex-input" value="${c1(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${c1(this.hexInputLabel)}" @ui5-change="${c1(this._handleHEXChange)}" value-state="${c1(this.hexInputErrorState)}"></${p1("ui5-input",t,i)}></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${c1(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><${p1("ui5-input",t,i)} id="red" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.redInputLabel)}" value="${c1(this._value.r)}"></${p1("ui5-input",t,i)}><${p1("ui5-label",t,i)}>R</${p1("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${p1("ui5-input",t,i)} id="green" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.greenInputLabel)}" value="${c1(this._value.g)}"></${p1("ui5-input",t,i)}><${p1("ui5-label",t,i)}>G</${p1("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${p1("ui5-input",t,i)} id="blue" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.blueInputLabel)}" value="${c1(this._value.b)}"></${p1("ui5-input",t,i)}><${p1("ui5-label",t,i)}>B</${p1("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${p1("ui5-input",t,i)} id="alpha" disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${c1(this._alpha)}" accessible-name="${c1(this.alphaInputLabel)}" @ui5-input="${c1(this._handleAlphaInput)}" @ui5-change="${c1(this._handleAlphaChange)}"></${p1("ui5-input",t,i)}><${p1("ui5-label",t,i)}>A</${p1("ui5-label",t,i)}></div></div></section>`:u1`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${l1(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${l1(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><ui5-slider disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${c1(this._hue)}" accessible-name="${c1(this.hueSliderLabel)}" @ui5-input="${c1(this._handleHueInput)}"></ui5-slider><ui5-slider disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${c1(this._alpha)}" accessible-name="${c1(this.alphaSliderLabel)}" @ui5-input="${c1(this._handleAlphaInput)}"></ui5-slider></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${l1(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><ui5-label>Hex</ui5-label><ui5-input class="ui5-color-picker-hex-input" value="${c1(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${c1(this.hexInputLabel)}" @ui5-change="${c1(this._handleHEXChange)}" value-state="${c1(this.hexInputErrorState)}"></ui5-input></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${c1(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><ui5-input id="red" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.redInputLabel)}" value="${c1(this._value.r)}"></ui5-input><ui5-label>R</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="green" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.greenInputLabel)}" value="${c1(this._value.g)}"></ui5-input><ui5-label>G</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="blue" class="ui5-color-picker-rgb-input" disabled="${c1(this.inputsDisabled)}" accessible-name="${c1(this.blueInputLabel)}" value="${c1(this._value.b)}"></ui5-input><ui5-label>B</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="alpha" disabled="${c1(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${c1(this._alpha)}" accessible-name="${c1(this.alphaInputLabel)}" @ui5-input="${c1(this._handleAlphaInput)}" @ui5-change="${c1(this._handleAlphaChange)}"></ui5-input><ui5-label>A</ui5-label></div></div></section>`},dependencies:[G9,hee,d3],shadowRootOptions:{delegatesFocus:!0}}),v0("change",{bubbles:!0})],gee),gee.define();const mee=gee;class _ee extends qY{static get dependencies(){return[h7,E5,mee]}get colorPaletteDialogTitle(){return _ee.i18nBundle.getText(R1)}get colorPaletteDialogOKButton(){return _ee.i18nBundle.getText(B1)}get colorPaletteCancelButton(){return _ee.i18nBundle.getText(k1)}}function vee(e,t,i){return i?u1`<div class="ui5-step-icon ui5-step-dec" title="${c1(this.decIconTitle)}"><${p1("ui5-icon",t,i)} id="${c1(this._id)}-dec" name="${c1(this.decIconName)}" tabindex="-1" accessible-name="${c1(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></${p1("ui5-icon",t,i)}></div>`:u1`<div class="ui5-step-icon ui5-step-dec" title="${c1(this.decIconTitle)}"><ui5-icon id="${c1(this._id)}-dec" name="${c1(this.decIconName)}" tabindex="-1" accessible-name="${c1(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></ui5-icon></div>`}function yee(e,t,i){return u1`<slot name="valueStateMessage" slot="valueStateMessage"></slot>`}function bee(e,t,i){return i?u1`<div class="ui5-step-icon ui5-step-inc" title="${c1(this.incIconTitle)}"><${p1("ui5-icon",t,i)} id="${c1(this._id)}-inc" name="${c1(this.incIconName)}" tabindex="-1" accessible-name="${c1(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></${p1("ui5-icon",t,i)}></div>`:u1`<div class="ui5-step-icon ui5-step-inc" title="${c1(this.incIconTitle)}"><ui5-icon id="${c1(this._id)}-inc" name="${c1(this.incIconName)}" tabindex="-1" accessible-name="${c1(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></ui5-icon></div>`}(async(e,t)=>{var i,n;await Promise.all((null==(i=t.dependencies)?void 0:i.map((e=>e.define())))||[]),await(null==(n=t.define)?void 0:n.call(t)),XY.set(e,t),(e=>{KY.fireEvent(ZY(e),void 0)})(e)})("ColorPaletteMoreColors",_ee),bJ("less",{pathData:"M464 224q16 0 16 16v32q0 16-16 16H48q-6 0-11-4.5T32 272v-32q0-7 5-11.5t11-4.5h416z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("less",{pathData:"M454 275H58q-11 0-18.5-7T32 250t7.5-18.5T58 224h396q11 0 18.5 7.5T480 250t-7.5 18-18.5 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),bJ("add",{pathData:"M32 240q0-7 5-11.5t11-4.5h176V48q0-7 5-11.5t11-4.5h32q16 0 16 16v176h176q16 0 16 16v32q0 16-16 16H288v176q0 16-16 16h-32q-6 0-11-4.5t-5-11.5V288H48q-6 0-11-4.5T32 272v-32z",ltr:!1,accData:T5,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),bJ("add",{pathData:"M454 230q11 0 18.5 7.5T480 256t-7.5 18.5T454 282H282v172q0 11-7.5 18.5T256 480t-18.5-7.5T230 454V282H58q-11 0-18.5-7.5T32 256t7.5-18.5T58 230h172V58q0-11 7.5-18.5T256 32t18.5 7.5T282 58v172h172z",ltr:!1,accData:T5,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var Aee,wee=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let xee=Aee=class extends f0{constructor(){super(...arguments),this.value=0,this.step=1,this.valueState="None",this.required=!1,this.disabled=!1,this.readonly=!1,this.valuePrecision=0,this._decIconDisabled=!1,this._incIconDisabled=!1,this.focused=!1,this._inputFocused=!1,this._previousValue=this.value,this._waitTimeout=500,this._speed=120,this._spinStarted=!1}async formElementAnchor(){var e;return null==(e=await this.getFocusDomRefAsync())?void 0:e.getFocusDomRefAsync()}get formFormattedValue(){return this.value.toString()}get type(){return _9.Number}get decIconTitle(){return Aee.i18nBundle.getText(x2)}get decIconName(){return"less"}get incIconTitle(){return Aee.i18nBundle.getText(S2)}get incIconName(){return"add"}get _decIconClickable(){return!this._decIconDisabled&&!this.readonly&&!this.disabled}get _incIconClickable(){return!this._incIconDisabled&&!this.readonly&&!this.disabled}get _isFocused(){return this.focused}get _displayValue(){return 0===this.value||Number.isInteger(this.value)?this.value.toFixed(this.valuePrecision):this.input&&this.value===Number(this.input.value)?this.input.value:this.value.toString()}get accInfo(){return{ariaRequired:this.required,ariaLabel:z2(this)}}get inputAttributes(){return{min:void 0===this.min?void 0:this.min,max:void 0===this.max?void 0:this.max,step:this.step}}onBeforeRendering(){this._setButtonState(),void 0===this._previousValue&&(this._previousValue=this.value)}get input(){return this.shadowRoot.querySelector("[ui5-input]")}get innerInput(){return this.input.shadowRoot.querySelector("input")}get inputOuter(){return this.shadowRoot.querySelector(".ui5-step-input-input")}_onButtonFocusOut(){setTimeout((()=>{this._inputFocused||this.inputOuter.removeAttribute("focused")}),0)}_onInputFocusIn(){this._inputFocused=!0,this.value!==this._previousValue&&(this._previousValue=this.value)}_onInputFocusOut(){this._inputFocused=!1,this._onInputChange()}_setButtonState(){this._decIconDisabled=void 0!==this.min&&this.value<=this.min,this._incIconDisabled=void 0!==this.max&&this.value>=this.max}_validate(){void 0===this._initialValueState&&(this._initialValueState=this.valueState),this._updateValueState()}_updateValueState(){const e=(void 0===this.min||Number(this.input.value)>=this.min)&&(void 0===this.max||Number(this.input.value)<=this.max),t=this._isValueWithCorrectPrecision,i=this.valueState,n=e&&t;this.valueState=n?m3.None:m3.Negative,!this.fireDecoratorEvent("value-state-change",{valueState:this.valueState,valid:n})&&(this.valueState=i)}_preciseValue(e){const t=10**this.valuePrecision;return Math.round(e*t)/t}_fireChangeEvent(){this._previousValue!==this.value&&(this._previousValue=this.value,this.fireDecoratorEvent("change",{value:this.value}))}_modifyValue(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=this.value+e,void 0!==this.min&&t<this.min&&(t=this.min),void 0!==this.max&&t>this.max&&(t=this.max),t=this._preciseValue(t),t!==this.value&&(this.value=t,this.input.value=t.toFixed(this.valuePrecision),this._validate(),this._setButtonState(),this.focused=!0,this.inputOuter.setAttribute("focused",""),i?this._fireChangeEvent():this.input.focus())}_incValue(e){this._incIconClickable&&e.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(this.step,!0),this._previousValue=this.value)}_decValue(e){this._decIconClickable&&e.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(-this.step,!0),this._previousValue=this.value)}get _isValueWithCorrectPrecision(){const e=this.input.value.includes(".")?".":",",t=this.input.value.split(e);return(t.length>1?t[1].length:0)===this.valuePrecision}_onInputChange(){this._setDefaultInputValueIfNeeded();const e=Number(this.input.value);this._isValueChanged(e)&&this._updateValueAndValidate(e)}_setDefaultInputValueIfNeeded(){if(""===this.input.value){const e=(this.min||0).toFixed(this.valuePrecision);this.input.value=e,this.innerInput.value=e}}_isValueChanged(e){const t=this._isValueWithCorrectPrecision,i=t&&this.valueState===m3.Negative;return this.value!==this._previousValue||this.value!==e||0===e||!t||i}_updateValueAndValidate(e){this.value=e,this._validate(),this._setButtonState(),this._fireChangeEvent()}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}_onkeydown(e){let t=!0;var i;this.disabled||this.readonly||(b0(e)?this._onInputChange():(C0(e)?this._modifyValue(this.step):E0(e)?this._modifyValue(-this.step):F0(e)?(this.value=this._previousValue,this.input.value=this.value.toFixed(this.valuePrecision)):void 0!==this.max&&(((i=e).key?"PageUp"===i.key:33===i.keyCode)&&W0(i,!1,!1,!0)||(e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&W0(e,!0,!1,!0))(e))?this._modifyValue(this.max-this.value):void 0!==this.min&&((e=>(e.key?"PageDown"===e.key:34===e.keyCode)&&W0(e,!1,!1,!0))(e)||(e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&W0(e,!0,!1,!0))(e))?this._modifyValue(this.min-this.value):M0(e)||k0(e)||B0(e)||R0(e)||(t=!1),t&&e.preventDefault()))}_decSpin(){this._decIconDisabled||this._spinValue(!1,!0)}_incSpin(){this._incIconDisabled||this._spinValue(!0,!0)}_calcWaitTimeout(){return this._speed*=.8,this._waitTimeout=this._waitTimeout-this._speed<50?50:this._waitTimeout-this._speed,this._waitTimeout}_spinValue(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._waitTimeout=500,this._speed=120,this._btnDown=!0),this._spinTimeoutId=setTimeout((()=>{this._btnDown&&(this._spinStarted=!0,this._modifyValue(e?this.step:-this.step),this._setButtonState(),!this._incIconDisabled&&e||!this._decIconDisabled&&!e?this._spinValue(e):(this._resetSpin(),this._fireChangeEvent()))}),this._calcWaitTimeout())}_resetSpin(){clearTimeout(this._spinTimeoutId),this._btnDown=!1,this._spinStarted=!1}_resetSpinOut(){this._btnDown&&(this._resetSpin(),this._fireChangeEvent())}};wee([_0({type:Number})],xee.prototype,"value",void 0),wee([_0({type:Number})],xee.prototype,"min",void 0),wee([_0({type:Number})],xee.prototype,"max",void 0),wee([_0({type:Number})],xee.prototype,"step",void 0),wee([_0()],xee.prototype,"valueState",void 0),wee([_0({type:Boolean})],xee.prototype,"required",void 0),wee([_0({type:Boolean})],xee.prototype,"disabled",void 0),wee([_0({type:Boolean})],xee.prototype,"readonly",void 0),wee([_0()],xee.prototype,"placeholder",void 0),wee([_0()],xee.prototype,"name",void 0),wee([_0({type:Number})],xee.prototype,"valuePrecision",void 0),wee([_0()],xee.prototype,"accessibleName",void 0),wee([_0()],xee.prototype,"accessibleNameRef",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_decIconDisabled",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_incIconDisabled",void 0),wee([_0({type:Boolean})],xee.prototype,"focused",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_inputFocused",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_previousValue",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_waitTimeout",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_speed",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_btnDown",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_spinTimeoutId",void 0),wee([_0({noAttribute:!0})],xee.prototype,"_spinStarted",void 0),wee([y0()],xee.prototype,"valueStateMessage",void 0),wee([f1("@ui5/webcomponents")],xee,"i18nBundle",void 0),xee=Aee=wee([m0({tag:"ui5-step-input",formAssociated:!0,renderer:d1,styles:{packageName:"@ui5/webcomponents",fileName:"themes/StepInput.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host(:not([hidden])){display:inline-block;width:100%;line-height:normal;letter-spacing:normal;word-spacing:normal}:host{--ui5-v2-4-0_input_focus_pseudo_element_content: none;color:var(--sapField_TextColor);background-color:var(--sapField_Background);border:var(--_ui5-v2-4-0_step_input_border_style);border-radius:var(--sapField_BorderCornerRadius);box-sizing:border-box;height:var(--_ui5-v2-4-0_input_height);position:relative;margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;min-width:var(--_ui5-v2-4-0_step_input_min_width);text-align:right;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host .ui5-step-input-input{text-align:inherit;height:inherit}:host(:not([value-state]):not([readonly]):not([disabled])){box-shadow:none}:host(:not([value-state]):not([readonly]):not([disabled]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0_step_input_border_color_hover);border:var(--_ui5-v2-4-0_step_input_border_hover)}:host(:not([value-state]):not([readonly]):not([disabled]):not([focused]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):not([focused]):hover){background-color:var(--sapField_Hover_Background);border:var(--_ui5-v2-4-0_step_input_border_style_hover);box-shadow:var(--sapField_Hover_Shadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InformationShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):hover),:host([value-state="Negative"]:not([readonly]):not([disabled]):hover),:host([value-state="Information"]:not([readonly]):not([disabled]):hover),:host([value-state="Critical"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0-step_input_button_state_hover_background_color)}:host(:not([value-state]):not([readonly]):not([disabled])[focused]),:host([value-state="None"]:not([readonly]):not([disabled])[focused]),:host([value-state="Positive"]:not([readonly]):not([disabled])[focused]),:host([value-state="Negative"]:not([readonly]):not([disabled])[focused]),:host([value-state="Information"]:not([readonly]):not([disabled])[focused]),:host([value-state="Critical"]:not([readonly]):not([disabled])[focused]){background-color:var(--sapField_Focus_Background)}:host([value-state="Positive"]:not([readonly]):not([disabled])):after,:host([value-state="Negative"]:not([readonly]):not([disabled])):after,:host([value-state="None"]:not([readonly]):not([disabled])):after,:host([value-state="Information"]:not([readonly]):not([disabled])):after,:host([value-state="Critical"]:not([readonly]):not([disabled])):after{position:absolute;content:"";inset:-1px;outline:none;pointer-events:none;border-radius:var(--sapField_BorderCornerRadius);border-style:var(--_ui5-v2-4-0_input_error_warning_border_style);z-index:1;border-width:0px}:host([value-state="Information"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InformationColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state="Critical"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_WarningColor);border-width:2px}:host([value-state="Positive"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_SuccessColor);border-width:1px}:host([value-state="Negative"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InvalidColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state]):after{border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input{background-color:var(--_ui5-v2-4-0_input_input_background_color)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input:hover{background-color:var(--_ui5-v2-4-0_step_input_input_error_background_color)}:host([value-state]:not([value-state="None"]) .ui5-step-input-input[focused]){outline:none}:host .ui5-step-input-input{width:100%;color:inherit;background-color:inherit;border:var(--_ui5-v2-4-0_step_input_input_border);box-sizing:border-box;vertical-align:top;margin-top:var(--_ui5-v2-4-0_step_input_input_margin_top);min-width:var(--_ui5-v2-4-0_step_input_min_width);padding-inline-start:var(--_ui5-v2-4-0_step_input_padding);padding-inline-end:var(--_ui5-v2-4-0_step_input_padding);position:relative;outline:none;line-height:inherit;letter-spacing:inherit;word-spacing:inherit}:host .ui5-step-input-input[readonly]{padding:0}:host .ui5-step-input-input:hover,:host .ui5-step-input-input[focused]{box-shadow:none}:host .ui5-step-input-root{white-space:nowrap;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;height:inherit}:host .ui5-step-input-input[text-align=left]{text-align:left}:host .ui5-step-input-input[text-align=center]{text-align:center}:host .ui5-step-input-input[text-align=right]{text-align:right}:host .ui5-step-icon{position:absolute;display:var(--_ui5-v2-4-0_step_input_button_display);height:2rem;height:100%;background-color:var(--_ui5-v2-4-0_step_input_button_background_color);z-index:0}:host .ui5-step-icon[focused]{border:none;outline:none}:host .ui5-step-icon.ui5-step-dec{left:var(--_ui5-v2-4-0_step_input_button_left);z-index:1}:host .ui5-step-icon.ui5-step-inc{right:var(--_ui5-v2-4-0_step_input_button_right)}:host .ui5-step-icon *:not([clickable]),:host .ui5-step-icon *:not([clickable]):active,:host .ui5-step-icon *:not([clickable]):hover{opacity:.5;background-color:transparent;color:var(--sapContent_IconColor)}:host .ui5-step-icon :not([clickable]) *:hover,:host .ui5-step-icon :not([clickable]) *:active{background-color:var(--sapField_Background);color:var(--sapContent_IconColor)}:host .ui5-step-input-input[focused]:after{position:absolute;content:"";border:var(--_ui5-v2-4-0_step_input_input_border_focused_after);top:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);right:0;bottom:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);border-radius:var(--_ui5-v2-4-0_step_input_input_border_radius_focused_after);left:0;outline:none;pointer-events:none;z-index:1}:host .ui5-step-input-input[focused]{outline:none}:host([value-state="Information"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_information_border_color_focused_after)}:host([value-state="Critical"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after)}:host([value-state="Positive"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_success_border_color_focused_after)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_error_border_color_focused_after)}:host .ui5-step-input-input::-webkit-outer-spin-button,:host .ui5-step-input-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host([disabled]) .ui5-step-icon{background-color:var(--_ui5-v2-4-0_step_input_disabled_button_background)}:host([disabled]) .ui5-step-icon [ui5-icon]{color:var(--sapField_ReadOnly_BorderColor)}\n'},template:function(e,t,i){return i?u1`<div id="${c1(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:vee.call(this,e,t,i)}<${p1("ui5-input",t,i)} id="${c1(this._id)}-inner" class="ui5-step-input-input" placeholder="${c1(this.placeholder)}" type="${c1(this.type)}" value="${c1(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${c1(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${c1(this.accInfo)}" ._nativeInputAttributes="${c1(this.inputAttributes)}" @ui5-change="${c1(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?yee.call(this,e,t,i):void 0}</${p1("ui5-input",t,i)}>${this.readonly?void 0:bee.call(this,e,t,i)}</div>`:u1`<div id="${c1(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:vee.call(this,e,t,i)}<ui5-input id="${c1(this._id)}-inner" class="ui5-step-input-input" placeholder="${c1(this.placeholder)}" type="${c1(this.type)}" value="${c1(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${c1(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${c1(this.accInfo)}" ._nativeInputAttributes="${c1(this.inputAttributes)}" @ui5-change="${c1(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?yee.call(this,e,t,i):void 0}</ui5-input>${this.readonly?void 0:bee.call(this,e,t,i)}</div>`},dependencies:[r5,G9]}),v0("change",{bubbles:!0}),v0("value-state-change",{detail:{valueState:{type:String},valid:{type:Boolean}},bubbles:!0,cancelable:!0})],xee),xee.define();var See=Object.defineProperty,Cee=Object.getOwnPropertyDescriptor,Eee=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?Cee(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&See(t,i,o),o};let Tee=class extends _j{constructor(){super(...arguments),this.isColumnMode=!1}render(){return WQ`
      <div
        id="layout"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div class="input-row">
          <ui5-label show-colon>Show Axes</ui5-label>
          <ui5-checkbox
            ?checked="${this.environmentSettings.showAxes}"
            @change="${this._handleShowAxesStateChanged}"
          ></ui5-checkbox>
        </div>
        <div class="input-row">
          <ui5-label show-colon>Remap 2D ⇔ 3D Axes</ui5-label>
          <ui5-select @change="${this._handleAxesRemapChanged}">
            <ui5-option selected>x-y-z</ui5-option>
            <ui5-option>x-z-y</ui5-option>
            <ui5-option>y-x-z</ui5-option>
            <ui5-option>y-z-x</ui5-option>
            <ui5-option>z-x-y</ui5-option>
            <ui5-option>z-y-x</ui5-option>
          </ui5-select>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div>
          <div class="input-row">
            <ui5-label show-colon for="color-palette-current"
              >Background Color</ui5-label
            >
            <ui5-color-palette-item
              value=${this.environmentSettings.backgroundColor[0]}
              @click=${this._toggleColorPalette}
              id="color-palette-current"
            ></ui5-color-palette-item>
          </div>
          <ui5-color-palette-popover
            id="colorPalettePopover"
            show-more-colors=""
            @item-click=${this._handleColorChanged}
          >
            <ui5-color-palette-item value="#444444"></ui5-color-palette-item>
            <ui5-color-palette-item value="lightpink"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(216,124,172)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#6c666d"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(55,81,95)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#0072bb"></ui5-color-palette-item>
            <ui5-color-palette-item value="powderblue"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(143,201,58)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(195,172,206)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="orange"></ui5-color-palette-item>
          </ui5-color-palette-popover>
          <div class="input-row">
            <ui5-label show-colon>Gradient Effect</ui5-label>
            <ui5-checkbox
              ?checked="${this.environmentSettings.applyGradient}"
              @change="${this._handleApplyGradientStateChanged}"
            ></ui5-checkbox>
          </div>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div class="input-row">
          <ui5-label show-colon>Light [%]</ui5-label>
          <ui5-step-input
            value="100"
            min="0"
            max="500"
            step="10"
            @change="${this._handleBrightnessChanged}"
          ></ui5-step-input>
        </div>
      </div>
    `}_toggleColorPalette(){null!==this.colorPalettePopover&&(void 0===this.colorPalettePopover.opener&&(this.colorPalettePopover.opener=this.colorPaletteToggle),this.colorPalettePopover.open=!this.colorPalettePopover.open)}_handleColorChanged(e){this.environmentSettings.backgroundColor=e.detail.color,this.requestUpdate()}_handleShowAxesStateChanged(e){this.environmentSettings.showAxes=e.target.checked}_handleAxesRemapChanged(e){const t=e.target.value.split("-");if(console.log("Axes remap requested",t),3==t.length){const e=t.map((e=>"xyz".indexOf(e)));this.environmentSettings.remapAxes=new sq(e[0],e[1],e[2])}else console.warn("Unexpected input",t)}_handleApplyGradientStateChanged(e){this.environmentSettings.applyGradient=e.target.checked}_handleBrightnessChanged(e){this.environmentSettings.brightness=e.detail.value/100}};Tee.styles=fQ`
    :host {
      height: 100%;
      width: 100%;
    }

    #divider.ver-orientation {
      border-top: 0.05rem solid darkgrey;
    }

    #divider.hor-orientation {
      border-left: 0.05rem solid darkgrey;
    }

    #layout.ver-orientation {
      flex-direction: column;
    }

    #layout.hor-orientation {
      flex-direction: row;
    }

    #layout {
      position: relative;
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
    }

    .input-row {
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .ver-orientation > .input-row {
      width: 11rem;
    }
  `,Eee([Aj({type:Boolean})],Tee.prototype,"isColumnMode",2),Eee([Aj({type:Object})],Tee.prototype,"environmentSettings",2),Eee([wj("#colorPalettePopover")],Tee.prototype,"colorPalettePopover",2),Eee([wj("#color-palette-current")],Tee.prototype,"colorPaletteToggle",2),Tee=Eee([yj("environment-settings")],Tee);var Iee=Object.defineProperty,Mee=Object.getOwnPropertyDescriptor,kee=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?Mee(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&Iee(t,i,o),o};let Bee=class extends _j{constructor(){super(...arguments),this.isColumnMode=!1,this.isAutoRotationDisabled=!1,this._userAutoRotationOn=!1}render(){return WQ`
    <div id="layout" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}">
      <div>    
        <ui5-title level="H5">3D</ui5-title>
        <div class = "input-row" >
          <ui5-label for="xOrientation" show-colon>X [&deg;]</ui5-label>
          <ui5-step-input id="xOrientation" value="0" min="0" max="359" step="10" @change="${this.handleXOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="yOrientation" show-colon>Y [&deg;]</ui5-label>
          <ui5-step-input id="yOrientation" value="0" min="0" max="359" step="10" @change="${this.handleYOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="zOrientation" show-colon>Z [&deg;]</ui5-label>
          <ui5-step-input id="zOrientation" value="0" min="0" max="359" step="10" @change="${this.handleZOrientationChanged}"></ui5-step-input>
        </div>
      </div>
      <div id="divider" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"></div>
      <div>    
        <ui5-title level="H5">2D</ui5-title>
        <div class = "input-row" >
          <ui5-label show-colon>Auto Rotation</ui5-label>
          <ui5-checkbox id= "autoRotationCheckbox" 
             text="${this.imageRotationSettings.isAutoRotationActivated?"On":"Off"}"
             ?checked="${this.imageRotationSettings.isAutoRotationActivated}" 
             ?disabled="${this.isAutoRotationDisabled}" 
             @change="${this._handleAutoRotationStateChanged}"></ui5-checkbox>
        </div>
        <div class = "input-row"  >
          <ui5-label for="imageAngle" show-colon>&phi; [&deg;]</ui5-label>
          <ui5-step-input id="imageAngle"
           value="${this.imageRotationSettings.isAutoRotationActivated?this.imageRotationSettings.autoRotationAngle:this.imageRotationSettings.userSetRotationAngle}"
            min="-180" max="180" step="10" 
            ?disabled="${this.imageRotationSettings.isAutoRotationActivated}"
            @change="${this._handleRotationValueChanged}"></ui5-step-input>
        </div>
      </div>
    </div>
        `}firstUpdated(){this.imageRotationSettings.on("rotation-angle-changed",(()=>this.requestUpdate()))}updated(e){super.updated(e),e.has("isAutoRotationDisabled")&&(this.isAutoRotationDisabled?(this._userAutoRotationOn=this.imageRotationSettings.isAutoRotationActivated,this.imageRotationSettings.isAutoRotationActivated=!0):this.imageRotationSettings.isAutoRotationActivated!=this._userAutoRotationOn&&(this.imageRotationSettings.isAutoRotationActivated=this._userAutoRotationOn))}_handleRotationValueChanged(e){this.imageRotationSettings.isAutoRotationActivated||(this.imageRotationSettings.userSetRotationAngle=e.detail.value)}_handleAutoRotationStateChanged(e){const t=e.target.checked;this.imageRotationSettings.isAutoRotationActivated!=t&&(this.imageRotationSettings.isAutoRotationActivated=t)}_handleDegreeInput(e){return t=e.detail.value,Math.min(Math.max(Number(t),0),359)*Math.PI/180;var t}handleXOrientationChanged(e){this.modelOrientationSettings.xOrientationInRad=this._handleDegreeInput(e)}handleYOrientationChanged(e){this.modelOrientationSettings.yOrientationInRad=this._handleDegreeInput(e)}handleZOrientationChanged(e){this.modelOrientationSettings.zOrientationInRad=this._handleDegreeInput(e)}};Bee.styles=fQ`
        :host {
          height: 100%;
          width: 100%;
        }

        #divider.ver-orientation {
          border-top: 0.05rem solid darkgrey;
        }

        #divider.hor-orientation {
          border-left: 0.05rem solid darkgrey;
        }

        #layout.ver-orientation{
          flex-direction: column;
        }

        #layout.hor-orientation{
          flex-direction: row;
        }

        #layout{
          position: relative;
          display: flex;
          align-items: stretch;
          gap: 1rem;
        }

        .input-row{
          position: relative;
          display: flex;
          align-items: center;
          width: 11rem; 
          gap: 1rem;
        }
      `,kee([Aj({type:Boolean})],Bee.prototype,"isColumnMode",2),kee([Aj({type:Boolean})],Bee.prototype,"isAutoRotationDisabled",2),kee([Aj({type:Object})],Bee.prototype,"imageRotationSettings",2),kee([Aj({type:Object})],Bee.prototype,"modelOrientationSettings",2),Bee=kee([yj("rotation-settings")],Bee);const Ree=new WeakMap;class Pee{static get tasks(){return Ree}static enqueue(e,t){Ree.has(e)||Ree.set(e,[]),Ree.get(e).push(t)}static run(e,t){return Ree.has(e)||Ree.set(e,[]),t().then((()=>{const t=Ree.get(e);if(t.length>0)return Pee.run(e,t.shift());Ree.delete(e)}))}static push(e,t){Ree.get(e)?Pee.enqueue(e,t):Pee.run(e,t)}}const Dee=e=>{let t,i,n,r=null,o=!1;const s=new Promise(((s,a)=>{n=i=>{r=r||i;const a=i-r,l=e.duration-a;if(a<=e.duration){const i=1-l/e.duration;e.advance(i),o||(t=requestAnimationFrame(n))}else e.advance(1),s()},i=()=>{o=!0,cancelAnimationFrame(t),a(new Error("animation stopped"))}})).catch((e=>e));return Pee.push(e.element,(()=>("function"==typeof e.beforeStart&&e.beforeStart(),requestAnimationFrame(n),new Promise((e=>{s.then((()=>e()))}))))),{promise:()=>s,stop:()=>i}};let Lee;function Oee(e,t,i){return u1`<div class="ui5-panel-heading-wrapper${a1(this.classes.stickyHeaderClass)}" role="${c1(this.headingWrapperRole)}" aria-level="${c1(this.headingWrapperAriaLevel)}"><div @click="${this._headerClick}" @keydown="${this._headerKeyDown}" @keyup="${this._headerKeyUp}" class="ui5-panel-header" tabindex="${c1(this.headerTabIndex)}" role="${c1(this.accInfo.role)}" aria-expanded="${c1(this.accInfo.ariaExpanded)}" aria-controls="${c1(this.accInfo.ariaControls)}" aria-labelledby="${c1(this.accInfo.ariaLabelledby)}" part="header">${this.fixed?void 0:Fee.call(this,e,t,i)}${this._hasHeader?Uee.call(this,e,t,i):Hee.call(this,e,t,i)}</div></div>`}function Fee(e,t,i){return u1`<div class="ui5-panel-header-button-root">${this._hasHeader?Nee.call(this,e,t,i):zee.call(this,e,t,i)}</div>`}function Nee(e,t,i){return i?u1`<${p1("ui5-button",t,i)} design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${c1(this.accInfo.button.accessibilityAttributes)} tooltip="${c1(this.accInfo.button.title)}" accessible-name="${c1(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><${p1("ui5-icon",t,i)} class="ui5-panel-header-icon ${a1(this.classes.headerBtn)}" name="slim-arrow-right"></${p1("ui5-icon",t,i)}></div></${p1("ui5-button",t,i)}>`:u1`<ui5-button design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${c1(this.accInfo.button.accessibilityAttributes)} tooltip="${c1(this.accInfo.button.title)}" accessible-name="${c1(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><ui5-icon class="ui5-panel-header-icon ${a1(this.classes.headerBtn)}" name="slim-arrow-right"></ui5-icon></div></ui5-button>`}function zee(e,t,i){return i?u1`<${p1("ui5-icon",t,i)} class="ui5-panel-header-button ui5-panel-header-icon ${a1(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${c1(this.toggleButtonTitle)}"></${p1("ui5-icon",t,i)}>`:u1`<ui5-icon class="ui5-panel-header-button ui5-panel-header-icon ${a1(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${c1(this.toggleButtonTitle)}"></ui5-icon>`}function Uee(e,t,i){return u1`<slot name="header"></slot>`}function Hee(e,t,i){return u1`<div id="${c1(this._id)}-header-title" class="ui5-panel-header-title">${c1(this.headerText)}</div>`}uK((()=>{Lee=void 0})),nZ("@ui5/webcomponents-theming","sap_horizon",(async()=>e5)),nZ("@ui5/webcomponents","sap_horizon",(async()=>t5));var Vee,$ee=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Gee=Vee=class extends f0{constructor(){super(...arguments),this.fixed=!1,this.collapsed=!1,this.noAnimation=!1,this.accessibleRole="Form",this.headerLevel="H2",this.stickyHeader=!1,this.useAccessibleNameForToggleButton=!1,this._hasHeader=!1,this._contentExpanded=!1,this._animationRunning=!1}onBeforeRendering(){this._animationRunning||(this._contentExpanded=!this.collapsed),this._hasHeader=!!this.header.length}shouldToggle(e){return!this.header.length||e.classList.contains("ui5-panel-header-button")}shouldNotAnimate(){return this.noAnimation||(void 0===Lee&&(gK(),Lee=dK.animationMode),Lee===lK.None)}_headerClick(e){this.shouldToggle(e.target)&&this._toggleOpen()}_toggleButtonClick(e){0===e.x&&0===e.y&&e.stopImmediatePropagation()}_headerKeyDown(e){this.shouldToggle(e.target)&&(b0(e)&&e.preventDefault(),A0(e)&&e.preventDefault())}_headerKeyUp(e){this.shouldToggle(e.target)&&(b0(e)&&this._toggleOpen(),A0(e)&&this._toggleOpen())}_toggleOpen(){if(this.fixed)return;if(this.collapsed=!this.collapsed,this.shouldNotAnimate())return void this.fireDecoratorEvent("toggle");this._animationRunning=!0;const e=this.getDomRef().querySelectorAll(".ui5-panel-content"),t=[];[].forEach.call(e,(e=>{this.collapsed?t.push((e=>{let t,i,n,r,o,s,a,l,c,u,h,d;const p=Dee({beforeStart:()=>{const p=e;t=getComputedStyle(p),i=parseFloat(t.paddingTop),n=parseFloat(t.paddingBottom),r=parseFloat(t.marginTop),o=parseFloat(t.marginBottom),s=parseFloat(t.height),a=p.style.overflow,l=p.style.paddingTop,c=p.style.paddingBottom,u=p.style.marginTop,h=p.style.marginBottom,d=p.style.height,p.style.overflow="hidden"},duration:400,element:e,advance:t=>{e.style.paddingTop=i-i*t+"px",e.style.paddingBottom=n-n*t+"px",e.style.marginTop=r-r*t+"px",e.style.marginBottom=o-o*t+"px",e.style.height=s-s*t+"px"}});return p.promise().then((t=>{t instanceof Error||(e.style.overflow=a,e.style.paddingTop=l,e.style.paddingBottom=c,e.style.marginTop=u,e.style.marginBottom=h,e.style.height=d,e.style.display="none")})),p})(e).promise()):t.push((e=>{let t,i,n,r,o,s,a,l,c,u,h,d;const p=Dee({beforeStart:()=>{e.style.display="block",t=getComputedStyle(e),i=parseFloat(t.paddingTop),n=parseFloat(t.paddingBottom),r=parseFloat(t.marginTop),o=parseFloat(t.marginBottom),s=parseFloat(t.height),a=e.style.overflow,l=e.style.paddingTop,c=e.style.paddingBottom,u=e.style.marginTop,h=e.style.marginBottom,d=e.style.height,e.style.overflow="hidden",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.style.height="0"},duration:400,element:e,advance:t=>{e.style.display="block",e.style.paddingTop=i*t+"px",e.style.paddingBottom=n*t+"px",e.style.marginTop=r*t+"px",e.style.marginBottom=o*t+"px",e.style.height=s*t+"px"}});return p.promise().then((()=>{e.style.overflow=a,e.style.paddingTop=l,e.style.paddingBottom=c,e.style.marginTop=u,e.style.marginBottom=h,e.style.height=d})),p})(e).promise())})),Promise.all(t).then((()=>{this._animationRunning=!1,this._contentExpanded=!this.collapsed,this.fireDecoratorEvent("toggle")}))}_headerOnTarget(e){return e.classList.contains("sapMPanelWrappingDiv")}get classes(){return{headerBtn:{"ui5-panel-header-button-animated":!this.shouldNotAnimate()},stickyHeaderClass:{"ui5-panel-heading-wrapper-sticky":this.stickyHeader}}}get toggleButtonTitle(){return Vee.i18nBundle.getText(s2)}get expanded(){return!this.collapsed}get accRole(){return this.accessibleRole.toLowerCase()}get effectiveAccessibleName(){return"string"==typeof this.accessibleName&&this.accessibleName.length?this.accessibleName:void 0}get accInfo(){return{button:{accessibilityAttributes:{expanded:this.expanded},title:this.toggleButtonTitle,ariaLabelButton:!this.nonFocusableButton&&this.useAccessibleNameForToggleButton?this.effectiveAccessibleName:void 0},ariaExpanded:this.nonFixedInternalHeader?this.expanded:void 0,ariaControls:this.nonFixedInternalHeader?`${this._id}-content`:void 0,ariaLabelledby:this.nonFocusableButton?this.ariaLabelledbyReference:void 0,role:this.nonFixedInternalHeader?"button":void 0}}get ariaLabelledbyReference(){return this.nonFocusableButton&&this.headerText&&!this.fixed?`${this._id}-header-title`:void 0}get fixedPanelAriaLabelledbyReference(){return this.fixed&&!this.effectiveAccessibleName?`${this._id}-header-title`:void 0}get headerAriaLevel(){return this.headerLevel.slice(1)}get headerTabIndex(){return this.header.length||this.fixed?"-1":"0"}get headingWrapperAriaLevel(){return this._hasHeader?void 0:this.headerAriaLevel}get headingWrapperRole(){return this._hasHeader?void 0:"heading"}get nonFixedInternalHeader(){return!this._hasHeader&&!this.fixed}get hasHeaderOrHeaderText(){return this._hasHeader||this.headerText}get nonFocusableButton(){return!this.header.length}get styles(){return{content:{display:this._contentExpanded?"block":"none"}}}};$ee([_0()],Gee.prototype,"headerText",void 0),$ee([_0({type:Boolean})],Gee.prototype,"fixed",void 0),$ee([_0({type:Boolean})],Gee.prototype,"collapsed",void 0),$ee([_0({type:Boolean})],Gee.prototype,"noAnimation",void 0),$ee([_0()],Gee.prototype,"accessibleRole",void 0),$ee([_0()],Gee.prototype,"headerLevel",void 0),$ee([_0()],Gee.prototype,"accessibleName",void 0),$ee([_0({type:Boolean})],Gee.prototype,"stickyHeader",void 0),$ee([_0({type:Boolean})],Gee.prototype,"useAccessibleNameForToggleButton",void 0),$ee([_0({type:Boolean})],Gee.prototype,"_hasHeader",void 0),$ee([_0({type:Boolean,noAttribute:!0})],Gee.prototype,"_contentExpanded",void 0),$ee([_0({type:Boolean,noAttribute:!0})],Gee.prototype,"_animationRunning",void 0),$ee([y0()],Gee.prototype,"header",void 0),$ee([f1("@ui5/webcomponents")],Gee,"i18nBundle",void 0),Gee=Vee=$ee([m0({tag:"ui5-panel",fastNavigation:!0,languageAware:!0,renderer:d1,template:function(e,t,i){return u1`<div class="ui5-panel-root" role="${c1(this.accRole)}" aria-label="${c1(this.effectiveAccessibleName)}" aria-labelledby="${c1(this.fixedPanelAriaLabelledbyReference)}">${this.hasHeaderOrHeaderText?Oee.call(this,e,t,i):void 0}<div class="ui5-panel-content" id="${c1(this._id)}-content" tabindex="-1" style="${l1(this.styles.content)}" part="content"><slot></slot></div></div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Panel.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:block}:host{font-family:"72override",var(--sapFontFamily);background-color:var(--sapGroup_TitleBackground);border-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([collapsed])){border-bottom:var(--_ui5-v2-4-0_panel_border_bottom)}:host([fixed]) .ui5-panel-header{padding-left:1rem}.ui5-panel-header{min-height:var(--_ui5-v2-4-0_panel_header_height);width:100%;position:relative;display:flex;justify-content:flex-start;align-items:center;outline:none;box-sizing:border-box;padding-right:var(--_ui5-v2-4-0_panel_header_padding_right);font-family:"72override",var(--sapFontHeaderFamily);font-size:var(--sapGroup_Title_FontSize);font-weight:400;color:var(--sapGroup_TitleTextColor)}.ui5-panel-header-icon{color:var(--_ui5-v2-4-0_panel_icon_color)}.ui5-panel-header-button-animated{transition:transform .4s ease-out}:host(:not([_has-header]):not([fixed])) .ui5-panel-header{cursor:pointer}:host(:not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--_ui5-v2-4-0_panel_focus_border);border-radius:var(--_ui5-v2-4-0_panel_border_radius);top:var(--_ui5-v2-4-0_panel_focus_offset);bottom:var(--_ui5-v2-4-0_panel_focus_bottom_offset);left:var(--_ui5-v2-4-0_panel_focus_offset);right:var(--_ui5-v2-4-0_panel_focus_offset)}:host(:not([collapsed]):not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{border-radius:var(--_ui5-v2-4-0_panel_border_radius_expanded)}:host(:not([collapsed])) .ui5-panel-header-button:not(.ui5-panel-header-button-with-icon),:host(:not([collapsed])) .ui5-panel-header-icon-wrapper [ui5-icon]{transform:var(--_ui5-v2-4-0_panel_toggle_btn_rotation)}:host([fixed]) .ui5-panel-header-title{width:100%}.ui5-panel-heading-wrapper.ui5-panel-heading-wrapper-sticky{position:sticky;top:0;background-color:var(--_ui5-v2-4-0_panel_header_background_color);z-index:100;border-radius:var(--_ui5-v2-4-0_panel_border_radius)}.ui5-panel-header-title{width:calc(100% - var(--_ui5-v2-4-0_panel_button_root_width));overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui5-panel-content{padding:var(--_ui5-v2-4-0_panel_content_padding);background-color:var(--sapGroup_ContentBackground);outline:none;border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius);overflow:auto}.ui5-panel-header-button-root{display:flex;justify-content:center;align-items:center;flex-shrink:0;width:var(--_ui5-v2-4-0_panel_button_root_width);height:var(--_ui5-v2-4-0_panel_button_root_height);padding:var(--_ui5-v2-4-0_panel_header_button_wrapper_padding);box-sizing:border-box}:host([fixed]:not([collapsed]):not([_has-header])) .ui5-panel-header,:host([collapsed]) .ui5-panel-header{border-bottom:.0625rem solid var(--sapGroup_TitleBorderColor)}:host([collapsed]) .ui5-panel-header{border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([fixed]):not([collapsed])) .ui5-panel-header{border-bottom:var(--_ui5-v2-4-0_panel_default_header_border)}[ui5-button].ui5-panel-header-button{display:flex;justify-content:center;align-items:center;min-width:initial;height:100%;width:100%}.ui5-panel-header-icon-wrapper{display:flex;justify-content:center;align-items:center}.ui5-panel-header-icon-wrapper,.ui5-panel-header-icon-wrapper .ui5-panel-header-icon{color:inherit}.ui5-panel-header-icon-wrapper,[ui5-button].ui5-panel-header-button-with-icon [ui5-icon]{pointer-events:none}.ui5-panel-root{height:100%;display:flex;flex-direction:column}\n'},dependencies:[E5,r5]}),v0("toggle",{bubbles:!0})],Gee),Gee.define();var Qee=Object.defineProperty,jee=Object.getOwnPropertyDescriptor,qee=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?jee(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&Qee(t,i,o),o};let Wee=class extends _j{constructor(){super(...arguments),this.isColumnMode=!0}render(){return WQ`
      <div
        id="layout"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div class="row">
          <div class="alignCenter">
            <ui5-label level="H1">&Sigma;:</ui5-label>
            <ui5-label>
              ${this.measurementTool.measuredLength.toFixed(1)}
            </ui5-label>
            <ui5-label> mm</ui5-label>
          </div>
        </div>
        <div class="row">
          <div class="alignCenter">
            <ui5-button @click="${this._handleNewPathClicked}">
              ${this.measurementTool.numPoints>0?"Reset":"New"}
            </ui5-button>
          </div>
          <div class="alignCenter">
            <ui5-button
              ?disabled="${!this.measurementTool.isEditModeActive&&0==this.measurementTool.numPoints}"
              @click="${this._handleUpdateEditStateClicked}"
            >
              ${this.measurementTool.isEditModeActive?"Stop":"Continue"}
            </ui5-button>
          </div>
        </div>
      </div>
    `}firstUpdated(){this.measurementTool.on("update-requested",(()=>this.requestUpdate()))}updated(e){super.updated(e)}_handleNewPathClicked(){this.measurementTool.resetPoints(),this.measurementTool.isEditModeActive=!0,this.requestUpdate()}_handleUpdateEditStateClicked(){this.measurementTool.isEditModeActive=!this.measurementTool.isEditModeActive,this.requestUpdate()}};Wee.styles=fQ`
    :host {
      min-width: 15em;
      height: 100%;
      width: 100%;
    }

    #layout.ver-orientation {
      flex-direction: column;
      width: 100%;
    }

    #layout.hor-orientation {
      flex-direction: row;
      height: 100%;
    }

    #layout {
      position: relative;
      min-width: 15em;
      display: flex;
      align-items: stretch;
      flex-direction: column;
      gap: 1rem;
    }

    .row {
      display: flex;
      flex: 1;
      flex-direction: row;
      gap: 1rem;
      justify-content: space-between;
      width: 100%;
    }

    .alignCenter {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ui5-button {
      padding: 0.25rem;
    }

    ui5-label {
      --sapFontSize: 15;
    }
  `,qee([Aj({type:Boolean})],Wee.prototype,"isColumnMode",2),qee([Aj({type:Object})],Wee.prototype,"measurementTool",2),Wee=qee([yj("measurement-tool")],Wee);var Xee=Object.defineProperty,Yee=Object.getOwnPropertyDescriptor,Kee=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?Yee(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&Xee(t,i,o),o};const Zee={doubleview:()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view">\n\t<g>\t\n\t\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n\t</g>\n\t<g>\n\t\t<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n\t\t\tc-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n\t\t\tc1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n\t\t\th-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n\t\t<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n\t\t\tc1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n\t\t\tc-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n\t\t\ts2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n\t\t\tL100.871,151.478z"/>\n\t</g>\n\t<g>\n\t\t<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n\t\t\tc0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n\t\t\ts5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n\t\t\tV152.283z"/>\n\t\t<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n\t\t\tc1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n\t\t\tc-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n\t\t\tc1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n\t\t\tL214.226,152.23z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n</g>\n'),"doubleview-mobile":()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_mobile">\n\t\t<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n\t<g>\n\t\t<path d="M132.829,84.75c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057c-1.177,1.863-2.969,3.365-5.373,4.505\n\t\t\tc-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848\n\t\t\tc1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791c1.79,0,3.213-0.334,4.267-0.999\n\t\t\tc1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111h-14.541v-8.061h26.657v6.533\n\t\t\tl-7.639,8.217C128.853,81.617,131.197,82.873,132.829,84.75z"/>\n\t\t<path d="M140.547,66.233h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n\t\t\tc1.722,2.775,2.582,6.023,2.582,9.746c0,3.723-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n\t\t\tc-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V66.233z M157.564,94.786c3.16,0,5.697-0.896,7.611-2.687s2.871-4.267,2.871-7.428\n\t\t\tc0-3.161-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229L157.564,94.786L157.564,94.786z"/>\n\t</g>\n\t<g>\n\t\t<path d="M135.532,208.976v8.281H106.78v-6.541l13.821-12.924c1.337-1.268,2.233-2.349,2.691-3.246\n\t\t\tc0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.392,3.464-4.273,6.066-5.646\n\t\t\tc2.602-1.372,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.163,0.916,3.852,2.227,5.063,3.932\n\t\t\tc1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.776-2.524,3.791-4.985,6.041l-6.965,6.436\n\t\t\tH135.532z"/>\n\t\t<path d="M140.493,180.33h17.461c4.045,0,7.631,0.756,10.762,2.27c3.131,1.512,5.559,3.658,7.281,6.436\n\t\t\tc1.724,2.78,2.584,6.033,2.584,9.762s-0.86,6.98-2.584,9.761c-1.724,2.778-4.15,4.923-7.281,6.437\n\t\t\tc-3.131,1.512-6.717,2.268-10.762,2.268h-17.461V180.33z M157.535,208.923c3.164,0,5.705-0.896,7.623-2.69\n\t\t\tc1.916-1.794,2.873-4.271,2.873-7.438c0-3.166-0.957-5.645-2.873-7.438c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597\n\t\t\tV208.923z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n</g>'),singleview:()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>\t\n\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n</g>\n<g>\n\t<path d="M84.09,100.5c1.634,1.879,2.45,4.154,2.45,6.822c0,2.179-0.588,4.198-1.765,6.058c-1.177,1.863-2.968,3.364-5.373,4.505\n\t\tc-2.406,1.141-5.383,1.712-8.93,1.712c-2.6,0-5.172-0.316-7.718-0.949c-2.547-0.631-4.75-1.527-6.612-2.686l3.793-7.851\n\t\tc1.44,0.985,3.063,1.739,4.873,2.266c1.809,0.526,3.59,0.791,5.348,0.791c1.791,0,3.213-0.333,4.267-1.002\n\t\tc1.054-0.666,1.58-1.614,1.58-2.845c0-2.388-1.879-3.582-5.637-3.582h-4.372v-6.586l6.585-7.111h-14.54v-8.061h26.657v6.533\n\t\tl-7.639,8.218C80.113,97.366,82.458,98.622,84.09,100.5z"/>\n\t<path d="M91.808,81.982h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.269,6.427\n\t\tc1.721,2.775,2.581,6.023,2.581,9.746s-0.86,6.972-2.581,9.746c-1.72,2.775-4.145,4.918-7.269,6.427\n\t\tc-3.126,1.511-6.709,2.266-10.747,2.266H91.808V81.982z M108.824,110.536c3.161,0,5.697-0.895,7.612-2.686\n\t\tc1.914-1.792,2.871-4.268,2.871-7.428c0-3.161-0.957-5.637-2.871-7.428c-1.915-1.792-4.451-2.687-7.612-2.687h-6.585v20.229\n\t\tH108.824z"/>\n</g>\n<g>\n\t<line stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721" x1="36.324" y1="220.789" x2="249.128" y2="61.185"/>\n</g>\n<g>\n\t<path d="M184.332,193.225v8.282H155.58v-6.541l13.821-12.926c1.337-1.266,2.233-2.349,2.69-3.244\n\t\tc0.457-0.897,0.686-1.803,0.686-2.717c0-1.194-0.402-2.127-1.212-2.797c-0.81-0.668-1.987-1.004-3.535-1.004\n\t\tc-1.37,0-2.629,0.309-3.771,0.924c-1.145,0.618-2.084,1.506-2.822,2.666l-7.755-4.326c1.44-2.392,3.464-4.272,6.065-5.646\n\t\tc2.604-1.371,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.164,0.916,3.852,2.226,5.063,3.932\n\t\tc1.216,1.706,1.824,3.686,1.824,5.934c0,2.004-0.433,3.896-1.295,5.672c-0.861,1.776-2.523,3.791-4.984,6.041l-6.965,6.437H184.332\n\t\tL184.332,193.225z"/>\n\t<path d="M189.292,164.58h17.461c4.045,0,7.632,0.756,10.763,2.269c3.13,1.513,5.558,3.657,7.28,6.437\n\t\tc1.724,2.778,2.584,6.031,2.584,9.76c0,3.729-0.86,6.981-2.584,9.762c-1.724,2.777-4.15,4.923-7.28,6.436\n\t\tc-3.131,1.512-6.718,2.269-10.763,2.269h-17.461V164.58z M206.333,193.171c3.164,0,5.705-0.896,7.621-2.689\n\t\tc1.918-1.794,2.875-4.271,2.875-7.439c0-3.164-0.957-5.644-2.875-7.438c-1.916-1.794-4.457-2.691-7.621-2.691h-6.599v20.26h6.599\n\t\tV193.171z"/>\n</g>\n'),"singleview-mobile":()=>BY('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M84.09,100.5C85.724,102.379 86.54,104.654 86.54,107.322C86.54,109.501 85.952,111.52 84.775,113.38C83.598,115.243 81.807,116.744 79.402,117.885C76.996,119.026 74.019,119.597 70.472,119.597C67.872,119.597 65.3,119.281 62.754,118.648C60.207,118.017 58.004,117.121 56.142,115.962L59.935,108.111C61.375,109.096 62.998,109.85 64.808,110.377C66.617,110.903 68.398,111.168 70.156,111.168C71.947,111.168 73.369,110.835 74.423,110.166C75.477,109.5 76.003,108.552 76.003,107.321C76.003,104.933 74.124,103.739 70.366,103.739L65.994,103.739L65.994,97.153L72.579,90.042L58.039,90.042L58.039,81.981L84.696,81.981L84.696,88.514L77.057,96.732C80.113,97.366 82.458,98.622 84.09,100.5Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M91.808,81.982L109.246,81.982C113.284,81.982 116.867,82.738 119.993,84.248C123.117,85.758 125.542,87.901 127.262,90.675C128.983,93.45 129.843,96.698 129.843,100.421C129.843,104.144 128.983,107.393 127.262,110.167C125.542,112.942 123.117,115.085 119.993,116.594C116.867,118.105 113.284,118.86 109.246,118.86L91.808,118.86L91.808,81.982ZM108.824,110.536C111.985,110.536 114.521,109.641 116.436,107.85C118.35,106.058 119.307,103.582 119.307,100.422C119.307,97.261 118.35,94.785 116.436,92.994C114.521,91.202 111.985,90.307 108.824,90.307L102.239,90.307L102.239,110.536L108.824,110.536Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g transform="matrix(0.992491,-0.32133,0.25458,0.992398,-36.1177,47.6794)">\n    <g>\n        <path d="M36.324,220.789L249.128,61.185" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721"/>\n    </g>\n</g>\n<g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M184.332,193.225L184.332,201.507L155.58,201.507L155.58,194.966L169.401,182.04C170.738,180.774 171.634,179.691 172.091,178.796C172.548,177.899 172.777,176.993 172.777,176.079C172.777,174.885 172.375,173.952 171.565,173.282C170.755,172.614 169.578,172.278 168.03,172.278C166.66,172.278 165.401,172.587 164.259,173.202C163.114,173.82 162.175,174.708 161.437,175.868L153.682,171.542C155.122,169.15 157.146,167.27 159.747,165.896C162.351,164.525 165.427,163.838 168.979,163.838C171.792,163.838 174.282,164.295 176.444,165.209C178.608,166.125 180.296,167.435 181.507,169.141C182.723,170.847 183.331,172.827 183.331,175.075C183.331,177.079 182.898,178.971 182.036,180.747C181.175,182.523 179.513,184.538 177.052,186.788L170.087,193.225L184.332,193.225Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M189.292,164.58L206.753,164.58C210.798,164.58 214.385,165.336 217.516,166.849C220.646,168.362 223.074,170.506 224.796,173.286C226.52,176.064 227.38,179.317 227.38,183.046C227.38,186.775 226.52,190.027 224.796,192.808C223.072,195.585 220.646,197.731 217.516,199.244C214.385,200.756 210.798,201.513 206.753,201.513L189.292,201.513L189.292,164.58ZM206.333,193.171C209.497,193.171 212.038,192.275 213.954,190.482C215.872,188.688 216.829,186.211 216.829,183.043C216.829,179.879 215.872,177.399 213.954,175.605C212.038,173.811 209.497,172.914 206.333,172.914L199.734,172.914L199.734,193.174L206.333,193.174L206.333,193.171Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g>\n    <rect x="56.693" y="28.347" width="170.079" height="226.771" stroke-width="4" fill="none"/>\n</g>\n'),"doubleview-synced":()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced">\n\t<g>\t\n\t\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n\t</g>\n\t<g>\n\t\t<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n\t\t\tc-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n\t\t\tc1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n\t\t\th-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n\t\t<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n\t\t\tc1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n\t\t\tc-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n\t\t\ts2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n\t\t\tL100.871,151.478z"/>\n\t</g>\n\t<g>\n\t\t<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n\t\t\tc0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n\t\t\ts5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n\t\t\tV152.283z"/>\n\t\t<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n\t\t\tc1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n\t\t\tc-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n\t\t\tc1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n\t\t\tL214.226,152.23z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n\t<path d="M171.183,87.604c-4.617-7.616-11.391-13.276-19.449-16.142c-9.447-3.359-19.521-2.491-28.371,2.445\n\t\tc-8.85,4.936-15.413,13.347-18.481,23.685l8.746,3.109c2.31-7.78,7.25-14.11,13.911-17.827c6.661-3.715,14.245-4.369,21.354-1.84\n\t\tc5.717,2.034,10.555,5.953,14.004,11.192l-7.537,4.204l10.929,7.769l10.935,7.771l0.679-14.248l0.684-14.244L171.183,87.604z"/>\n\t<path d="M112.281,195.862c4.618,7.616,11.388,13.276,19.45,16.144c9.446,3.357,19.522,2.49,28.372-2.445\n\t\ts15.413-13.348,18.479-23.686l-8.744-3.108c-2.31,7.78-7.25,14.11-13.91,17.825c-6.66,3.716-14.246,4.369-21.355,1.844\n\t\tc-5.716-2.035-10.552-5.955-14.002-11.193l7.538-4.203l-10.931-7.77l-10.933-7.771l-0.679,14.246l-0.684,14.248L112.281,195.862z"\n\t\t/>\n</g>\n'),"doubleview-synced-mobile":()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced_mobile">\n\t\t<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n\t<g>\n\t\t<path d="M132.829,70.578c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.969,3.365-5.373,4.505c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946\n\t\t\tc-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791\n\t\t\tc1.79,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111\n\t\t\th-14.541V52.06h26.657v6.533l-7.639,8.217C128.853,67.444,131.197,68.7,132.829,70.578z"/>\n\t\t<path d="M140.547,52.06h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n\t\t\tc1.722,2.775,2.582,6.023,2.582,9.746s-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n\t\t\tc-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V52.06z M157.564,80.613c3.16,0,5.697-0.896,7.611-2.687\n\t\t\tc1.914-1.791,2.871-4.267,2.871-7.428s-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229\n\t\t\tL157.564,80.613L157.564,80.613z"/>\n\t</g>\n\t<g>\n\t\t<path d="M135.532,223.15v8.282H106.78v-6.542l13.821-12.924c1.337-1.268,2.233-2.348,2.691-3.246\n\t\t\tc0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.391,3.464-4.273,6.066-5.646\n\t\t\tc2.602-1.372,5.68-2.057,9.232-2.057c2.813,0,5.303,0.457,7.465,1.371c2.163,0.915,3.852,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.436\n\t\t\tH135.532z"/>\n\t\t<path d="M140.493,194.503h17.461c4.045,0,7.631,0.756,10.762,2.269s5.559,3.658,7.281,6.437c1.724,2.779,2.584,6.033,2.584,9.761\n\t\t\tc0,3.729-0.86,6.981-2.584,9.761c-1.724,2.777-4.15,4.923-7.281,6.436s-6.717,2.269-10.762,2.269h-17.461V194.503z\n\t\t\t M157.535,223.097c3.164,0,5.705-0.896,7.623-2.69c1.916-1.794,2.873-4.271,2.873-7.438s-0.957-5.646-2.873-7.438\n\t\t\tc-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597V223.097z"/>\n\t</g>\n\t<line  stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n\t<path d="M195.861,171.183c7.616-4.617,13.276-11.391,16.143-19.449c3.359-9.447,2.492-19.521-2.444-28.371\n\t\tc-4.937-8.85-13.349-15.413-23.685-18.481l-3.109,8.746c7.779,2.31,14.109,7.249,17.826,13.911\n\t\tc3.716,6.661,4.369,14.245,1.841,21.354c-2.034,5.717-5.953,10.555-11.192,14.004l-4.203-7.537l-7.77,10.929l-7.771,10.935\n\t\tl14.248,0.679l14.243,0.684L195.861,171.183z"/>\n\t<path d="M87.603,112.282c-7.616,4.617-13.276,11.388-16.143,19.449c-3.358,9.446-2.49,19.522,2.445,28.372\n\t\tc4.936,8.85,13.347,15.413,23.685,18.479l3.109-8.744c-7.78-2.31-14.11-7.25-17.826-13.91c-3.715-6.66-4.369-14.245-1.843-21.354\n\t\tc2.035-5.717,5.955-10.553,11.193-14.002l4.204,7.538l7.769-10.932l7.771-10.933l-14.246-0.679l-14.247-0.685L87.603,112.282z"/>\n</g>\n'),rotation:()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="Ebene_2_Kopie">\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.347" y1="255.121" x2="28.347" y2="28.344"/>\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="255.119" y2="255.121"/>\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="221.982" y2="61.482"/>\n\t<g>\n\t\t<path d="M202.653,96.368l-7.829,7.829c4.909,5.954,8.646,12.978,10.756,20.852c8.142,30.384-10.805,61.953-42.229,70.373\n\t\t\tl-3.644-13.592l-28.735,27.984l38.878,9.863l-3.643-13.596c37.303-9.994,59.748-47.629,50.031-83.89\n\t\t\tC213.609,112.381,208.876,103.672,202.653,96.368z"/>\n\t\t<path d="M177.707,90.202l8.084-8.083c-15.77-9.456-35.422-12.758-54.826-7.559c-17.677,4.736-32.636,15.802-42.119,31.156\n\t\t\tl9.388,5.8c8-12.952,20.639-22.291,35.587-26.297C149.246,81.085,164.847,83.297,177.707,90.202z"/>\n\t</g>\n</g>\n</svg>\n'),measure:()=>BY('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n\n<g>\n\t<g>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="56.692" y1="204.288" x2="56.692" y2="232.538"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="113.385" y1="204.288" x2="113.385" y2="232.538"/>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="170.08" y1="204.288" x2="170.08" y2="232.538"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="141.732" y1="204.287" x2="141.732" y2="221.237"/>\n\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="85.039" y1="204.287" x2="85.039" y2="221.237"/>\n\t\t<g>\n\t\t\t<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M216.394,246.657l-24.545-42.369H14.173v56.5\n\t\t\t\th226.772c0.127,0,0.25-0.008,0.375-0.01C231.4,260.901,221.707,255.827,216.394,246.657z"/>\n\t\t</g>\n\t</g>\n\t<g>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="173.365" y1="59.376" x2="148.816" y2="73.501"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="201.71" y1="108.308" x2="177.164" y2="122.434"/>\n\t\t\n\t\t\t<line fill="none"  stroke-width="10" stroke-miterlimit="10" x1="230.056" y1="157.242" x2="205.509" y2="171.368"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="215.884" y1="132.773" x2="201.156" y2="141.25"/>\n\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="187.539" y1="83.841" x2="172.808" y2="92.317"/>\n\t\t<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M265.49,218.408L265.49,218.408L152.105,22.677\n\t\t\tl-49.099,28.25l113.388,195.73c7.828,13.511,25.162,18.142,38.721,10.342C268.673,249.198,273.316,231.92,265.49,218.408z\n\t\t\t M240.945,246.663c-7.826,0-14.172-6.324-14.172-14.124c0-7.801,6.346-14.125,14.172-14.125c7.828,0,14.174,6.324,14.174,14.125\n\t\t\tC255.119,240.338,248.773,246.663,240.945,246.663z"/>\n\t</g>\n</g>\n'),environment3D:()=>BY('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="surface1">\n    <g fill="none" stroke-width="50px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M2295,1430.47C2294.8,1429.26 2294.51,1428.1 2294.31,1426.95C2294.21,1426.36 2294.08,1425.69 2293.96,1425.1C2293.86,1424.6 2293.74,1424.01 2293.66,1423.54C2293.41,1422.38 2293.22,1421.19 2292.94,1420C2291.88,1415.51 2290.47,1410.96 2288.78,1406.45C2287.06,1401.87 2285.05,1397.3 2282.7,1392.72C2280.36,1388.17 2277.69,1383.63 2274.71,1379.05C2271.73,1374.5 2268.43,1369.95 2264.83,1365.36C2261.22,1360.83 2257.3,1356.31 2253.1,1351.81C2248.91,1347.32 2244.39,1342.81 2239.58,1338.37C2234.77,1333.92 2229.66,1329.53 2224.28,1325.18C2218.91,1320.8 2213.21,1316.46 2207.28,1312.21C2201.33,1307.95 2195.1,1303.7 2188.62,1299.54C2182.14,1295.39 2175.37,1291.28 2168.35,1287.26C2164.85,1285.24 2161.28,1283.26 2157.64,1281.27C2154.01,1279.32 2150.3,1277.33 2146.55,1275.4C2142.8,1273.48 2138.96,1271.57 2135.09,1269.67C2131.21,1267.78 2127.27,1265.92 2123.28,1264.09C2119.28,1262.23 2115.22,1260.38 2111.1,1258.6C2106.98,1256.77 2102.83,1255.02 2098.61,1253.23C2094.37,1251.48 2090.09,1249.73 2085.76,1248.03C2081.42,1246.31 2077.03,1244.64 2072.59,1243C2068.15,1241.33 2063.66,1239.71 2059.12,1238.12C2054.55,1236.51 2049.95,1234.95 2045.31,1233.41C2040.67,1231.85 2035.98,1230.37 2031.24,1228.87C2026.5,1227.39 2021.69,1225.93 2016.87,1224.53C2012.03,1223.09 2007.15,1221.68 2002.23,1220.32C1997.28,1218.97 1992.31,1217.67 1987.28,1216.38C1982.27,1215.07 1977.21,1213.8 1972.1,1212.59C1967.01,1211.37 1961.87,1210.16 1956.69,1208.99C1951.52,1207.83 1946.29,1206.73 1941.03,1205.65C1935.77,1204.55 1930.46,1203.49 1925.13,1202.45C1919.79,1201.43 1914.42,1200.51 1909.01,1199.57C1903.59,1198.63 1898.14,1197.73 1892.66,1196.85C1887.18,1195.99 1881.67,1195.15 1876.13,1194.38C1870.58,1193.57 1865,1192.87 1859.41,1192.16C1853.8,1191.46 1848.13,1190.76 1842.47,1190.14C1836.79,1189.53 1831.1,1188.94 1825.37,1188.42C1819.64,1187.86 1813.87,1187.38 1808.09,1186.94C1802.31,1186.48 1796.5,1186.08 1790.65,1185.73C1784.82,1185.35 1778.98,1185.03 1773.08,1184.74C1767.18,1184.45 1761.27,1184.22 1755.34,1184.04C1749.42,1183.87 1743.48,1183.72 1737.5,1183.64C1731.52,1183.53 1725.49,1183.5 1719.5,1183.5C1713.49,1183.5 1707.49,1183.55 1701.51,1183.64C1695.51,1183.72 1689.57,1183.87 1683.65,1184.04C1677.72,1184.22 1671.79,1184.45 1665.91,1184.76C1660.03,1185.03 1654.17,1185.31 1648.34,1185.7C1642.49,1186.08 1636.68,1186.48 1630.9,1186.94C1625.1,1187.38 1619.36,1187.86 1613.63,1188.42C1607.91,1188.94 1602.22,1189.52 1596.54,1190.14C1590.86,1190.76 1585.21,1191.44 1579.6,1192.16C1573.99,1192.86 1568.43,1193.57 1562.87,1194.38C1557.32,1195.15 1551.81,1195.99 1546.31,1196.87C1540.85,1197.73 1535.41,1198.63 1530,1199.57C1524.59,1200.53 1519.21,1201.48 1513.86,1202.49C1508.54,1203.49 1503.23,1204.55 1497.96,1205.67C1492.7,1206.73 1487.48,1207.83 1482.28,1208.99C1477.11,1210.17 1471.96,1211.37 1466.85,1212.59C1461.76,1213.82 1456.7,1215.11 1451.69,1216.39C1446.67,1217.67 1441.71,1219 1436.77,1220.36C1431.86,1221.71 1426.97,1223.09 1422.12,1224.53C1417.28,1225.94 1412.51,1227.39 1407.75,1228.87C1403.01,1230.37 1398.3,1231.86 1393.68,1233.41C1389.04,1234.96 1384.43,1236.53 1379.87,1238.15C1375.33,1239.72 1370.84,1241.35 1366.4,1243.02C1361.96,1244.66 1357.58,1246.33 1353.24,1248.05C1348.9,1249.75 1344.62,1251.5 1340.39,1253.25C1336.15,1255.02 1331.99,1256.78 1327.87,1258.6C1323.77,1260.4 1319.71,1262.24 1315.71,1264.1C1311.72,1265.93 1307.77,1267.8 1303.88,1269.69C1300.01,1271.58 1296.19,1273.48 1292.44,1275.4C1288.69,1277.33 1284.99,1279.33 1281.35,1281.29C1277.71,1283.26 1274.15,1285.29 1270.64,1287.31C1263.62,1291.3 1256.86,1295.41 1250.37,1299.56C1243.89,1303.73 1237.64,1307.95 1231.69,1312.23C1225.76,1316.44 1220.07,1320.84 1214.69,1325.2C1209.31,1329.56 1204.2,1333.93 1199.39,1338.37C1194.6,1342.83 1190.08,1347.33 1185.88,1351.84C1181.67,1356.32 1177.77,1360.84 1174.16,1365.38C1170.56,1369.96 1167.26,1374.51 1164.28,1379.07C1161.3,1383.65 1158.63,1388.18 1156.29,1392.78C1153.94,1397.3 1151.92,1401.89 1150.19,1406.47C1148.48,1410.97 1147.11,1415.52 1146.05,1420.03C1145.77,1421.19 1145.6,1422.38 1145.35,1423.5C1145.22,1424.12 1145.1,1424.79 1144.98,1425.36C1144.88,1425.88 1144.76,1426.44 1144.68,1426.93C1144.46,1428.1 1144.19,1429.26 1143.99,1430.48C1143.79,1431.76 1143.66,1433.12 1143.51,1434.49C1143.66,1435.86 1143.79,1437.25 1143.99,1438.55C1144.19,1439.75 1144.48,1440.87 1144.68,1442.05C1144.8,1442.62 1144.91,1443.29 1145.03,1443.88C1145.13,1444.41 1145.25,1445 1145.35,1445.46C1145.6,1446.6 1145.77,1447.8 1146.05,1449.01C1147.11,1453.49 1148.52,1458.03 1150.21,1462.53C1151.93,1467.13 1153.94,1471.7 1156.29,1476.28C1158.63,1480.82 1161.3,1485.35 1164.28,1489.97C1167.26,1494.49 1170.56,1499.07 1174.16,1503.64C1177.77,1508.16 1181.69,1512.69 1185.89,1517.2C1190.1,1521.68 1194.6,1526.17 1199.41,1530.63C1204.22,1535.12 1209.33,1539.46 1214.71,1543.82C1220.09,1548.2 1225.78,1552.54 1231.73,1556.78C1237.66,1561.06 1243.89,1565.31 1250.37,1569.46C1256.86,1573.63 1263.62,1577.72 1270.64,1581.74C1274.15,1583.73 1277.71,1585.75 1281.37,1587.71C1284.99,1589.68 1288.69,1591.67 1292.44,1593.58C1296.19,1595.51 1300.03,1597.42 1303.9,1599.3C1307.79,1601.19 1311.72,1603.08 1315.73,1604.91C1319.71,1606.74 1323.79,1608.62 1327.89,1610.39C1332.01,1612.24 1336.16,1613.97 1340.39,1615.74C1344.62,1617.5 1348.91,1619.25 1353.25,1620.95C1357.58,1622.66 1361.96,1624.35 1366.4,1626C1370.84,1627.65 1375.33,1629.28 1379.89,1630.9C1384.45,1632.49 1389.04,1634.05 1393.68,1635.6C1398.32,1637.16 1403.03,1638.64 1407.75,1640.1C1412.51,1641.63 1417.28,1643.04 1422.12,1644.48C1426.97,1645.91 1431.86,1647.33 1436.78,1648.68C1441.73,1650.03 1446.68,1651.37 1451.69,1652.62C1456.72,1653.94 1461.78,1655.19 1466.89,1656.41C1471.98,1657.64 1477.12,1658.85 1482.3,1659.98C1487.49,1661.19 1492.7,1662.24 1497.96,1663.33C1503.23,1664.45 1508.54,1665.51 1513.86,1666.55C1519.21,1667.57 1524.59,1668.47 1530,1669.41C1535.41,1670.35 1540.85,1671.28 1546.31,1672.13C1551.81,1672.99 1557.32,1673.81 1562.87,1674.63C1568.41,1675.4 1573.99,1676.11 1579.6,1676.83C1585.21,1677.55 1590.86,1678.23 1596.52,1678.87C1602.2,1679.49 1607.9,1680.04 1613.63,1680.59C1619.36,1681.13 1625.1,1681.63 1630.88,1682.07C1636.68,1682.49 1642.49,1682.92 1648.34,1683.29C1654.17,1683.66 1660.03,1683.99 1665.91,1684.25C1671.79,1684.55 1677.72,1684.75 1683.65,1684.94C1689.57,1685.14 1695.51,1685.23 1701.5,1685.36C1707.48,1685.44 1713.47,1685.5 1719.49,1685.5C1725.49,1685.5 1731.5,1685.44 1737.48,1685.36C1743.46,1685.23 1749.42,1685.14 1755.34,1684.94C1761.25,1684.75 1767.18,1684.55 1773.06,1684.25C1778.96,1683.99 1784.82,1683.7 1790.65,1683.31C1796.5,1682.94 1802.31,1682.51 1808.09,1682.08C1813.87,1681.63 1819.64,1681.13 1825.37,1680.59C1831.08,1680.04 1836.77,1679.5 1842.47,1678.87C1848.13,1678.23 1853.78,1677.58 1859.39,1676.85C1865,1676.14 1870.57,1675.4 1876.13,1674.63C1881.67,1673.81 1887.18,1672.99 1892.66,1672.13C1898.14,1671.28 1903.59,1670.35 1909.01,1669.41C1914.42,1668.47 1919.79,1667.54 1925.13,1666.53C1930.46,1665.51 1935.77,1664.45 1941.03,1663.33C1946.29,1662.25 1951.52,1661.19 1956.71,1659.98C1961.88,1658.83 1967.03,1657.64 1972.14,1656.41C1977.23,1655.17 1982.29,1653.94 1987.32,1652.59C1992.33,1651.35 1997.3,1650 2002.23,1648.65C2007.15,1647.29 2012.03,1645.91 2016.87,1644.46C2021.71,1643.04 2026.5,1641.63 2031.24,1640.1C2035.98,1638.65 2040.67,1637.16 2045.33,1635.6C2049.97,1634.05 2054.58,1632.49 2059.12,1630.87C2063.66,1629.26 2068.15,1627.65 2072.59,1625.98C2077.04,1624.35 2081.42,1622.66 2085.76,1620.95C2090.09,1619.25 2094.38,1617.5 2098.61,1615.74C2102.84,1613.97 2107,1612.25 2111.12,1610.39C2115.22,1608.62 2119.3,1606.74 2123.28,1604.91C2127.29,1603.08 2131.22,1601.19 2135.09,1599.3C2138.98,1597.4 2142.8,1595.53 2146.57,1593.58C2150.32,1591.67 2154.01,1589.68 2157.64,1587.71C2161.28,1585.75 2164.86,1583.73 2168.36,1581.71C2175.37,1577.69 2182.14,1573.61 2188.62,1569.44C2195.1,1565.29 2201.33,1561.09 2207.3,1556.81C2213.23,1552.59 2218.92,1548.2 2224.32,1543.82C2229.68,1539.46 2234.79,1535.1 2239.6,1530.64C2244.41,1526.17 2248.91,1521.68 2253.12,1517.2C2257.34,1512.69 2261.22,1508.17 2264.83,1503.65C2268.43,1499.09 2271.73,1494.5 2274.71,1489.97C2277.69,1485.35 2280.36,1480.83 2282.7,1476.27C2285.05,1471.7 2287.09,1467.13 2288.8,1462.55C2290.49,1458.05 2291.88,1453.49 2292.95,1449.01C2293.22,1447.81 2293.41,1446.62 2293.66,1445.54C2293.78,1444.9 2293.89,1444.23 2294.03,1443.64C2294.13,1443.13 2294.24,1442.59 2294.31,1442.08C2294.51,1440.91 2294.81,1439.76 2295,1438.57C2295.22,1437.26 2295.33,1435.88 2295.5,1434.53C2295.33,1433.12 2295.2,1431.74 2295,1430.47Z" />\n    </g>\n    <path d="M179.539,220.301C179.539,239.078 165.082,254.301 147.246,254.301C129.41,254.301 114.953,239.078 114.953,220.301C114.953,201.527 129.41,186.305 147.246,186.305C165.082,186.305 179.539,201.527 179.539,220.301Z"/>\n    <g fill="none" stroke-width= "40px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1996.5,1434.49C1996.5,1329.76 1938.43,1238.62 1852.76,1191.41C1849.2,1190.98 1845.65,1190.53 1842.1,1190.14C1836.42,1189.53 1830.71,1188.94 1824.98,1188.42C1819.23,1187.86 1813.49,1187.38 1807.69,1186.94C1801.89,1186.48 1796.1,1186.08 1790.24,1185.73C1784.39,1185.35 1778.53,1185.03 1772.63,1184.74C1766.75,1184.45 1760.82,1184.22 1754.89,1184.04C1748.96,1183.87 1742.99,1183.72 1737.01,1183.64C1731.01,1183.53 1724.98,1183.5 1718.99,1183.5C1712.99,1183.5 1706.97,1183.55 1700.98,1183.64C1695,1183.72 1689.03,1183.87 1683.1,1184.04C1677.19,1184.22 1671.26,1184.45 1665.34,1184.76C1659.46,1185.03 1653.58,1185.31 1647.75,1185.7C1641.9,1186.08 1636.09,1186.48 1630.3,1186.94C1624.5,1187.38 1618.74,1187.86 1613.01,1188.42C1607.28,1188.94 1601.56,1189.52 1595.88,1190.14C1592.33,1190.53 1588.82,1190.96 1585.26,1191.39C1499.57,1238.62 1441.51,1329.76 1441.51,1434.49C1441.51,1539.24 1499.56,1630.38 1585.25,1677.59C1588.78,1678.01 1592.33,1678.47 1595.88,1678.87C1601.58,1679.49 1607.29,1680.04 1613.02,1680.59C1618.75,1681.13 1624.52,1681.63 1630.3,1682.07C1636.09,1682.49 1641.9,1682.92 1647.77,1683.29C1653.6,1683.66 1659.46,1683.99 1665.36,1684.25C1671.26,1684.55 1677.19,1684.75 1683.12,1684.94C1689.05,1685.14 1695,1685.23 1700.99,1685.36C1706.97,1685.44 1712.99,1685.5 1719,1685.5C1725,1685.5 1731.01,1685.44 1737.01,1685.36C1742.99,1685.23 1748.97,1685.14 1754.89,1684.94C1760.82,1684.75 1766.75,1684.55 1772.64,1684.25C1778.53,1683.99 1784.4,1683.7 1790.24,1683.31C1796.1,1682.94 1801.91,1682.51 1807.71,1682.08C1813.49,1681.63 1819.25,1681.13 1825,1680.59C1830.71,1680.04 1836.42,1679.5 1842.1,1678.87C1845.67,1678.48 1849.2,1678.02 1852.74,1677.61C1938.43,1630.39 1996.5,1539.24 1996.5,1434.49Z"/>\n    </g>\n    <g stroke-width="25px" transform="matrix(0.235243,0,0,0.245462,-256.696,-129.858)">\n        <path d="M1117.26,774.021L1495.79,554.41L1876.76,773.989L1498.22,993.616L1117.26,774.021M1883.5,773.989L1495.75,550.495L1110.5,774.021L1498.25,997.499L1883.5,773.989" />\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,188.517,69.5886)">\n        <path d="M0.007,0.005L0.007,369.922" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1513.49,1036.5L1513.49,1193.24" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,-0.212577,-0.20193,0.122731,188.644,67.8623)">\n        <path d="M-0.003,0.003L-0.005,441.736" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1480.51,1033.5L1480.51,1202.4" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.11662,0.212556,0.201158,0.122262,2.826,67.8637)">\n        <path d="M0.002,-0.008L0.004,441.726" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,2.91461,67.6249)">\n        <path d="M0.002,0L0.002,439.254" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,0.212577,0.20193,0.122731,3.4509,175.859)">\n        <path d="M0.005,-0.006L0.003,116.931" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n</g>\n')};for(const dse in Zee)bJ(dse,{pathData:"",collection:"custom",packageName:"custom",viewBox:"0 0 284 284",customTemplate:Zee[dse]});let Jee=class extends _j{constructor(){super(...arguments),this.currentViewModeIndex=2,this.isColumnMode=!1}render(){return WQ`
      <ui5-segmented-button
        id="viewModeBtn"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        @selection-change="${this._handleSelectionChanged}"
      >
        <ui5-segmented-button-item
          tooltip="One View Mode"
          ?selected=${0==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/singleview-mobile":"custom/singleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Sync Mode"
          ?selected=${1==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-synced-mobile":"custom/doubleview-synced"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Navigation Mode"
          ?selected=${2==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-mobile":"custom/doubleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
      </ui5-segmented-button>

      <pv-menu ?isColumnMode=${this.isColumnMode}>
        <pv-menu-item
          icon="chart-axis"
          title="3D Environment"
          idx="1"
        >
          <environment-settings
            ?isColumnMode=${this.isColumnMode}
            .environmentSettings="${this.viewerSettings.environment3D}"
          >
          </environment-settings>
        </pv-menu-item>
        <pv-menu-item icon="rotate" title="Rotation Settings" idx="2">
          <rotation-settings
            ?isColumnMode=${this.isColumnMode}
            ?isAutoRotationDisabled="${this.currentViewModeIndex<2}"
            .imageRotationSettings="${this.viewerSettings.imageRotation}"
            .modelOrientationSettings="${this.viewerSettings.modelOrientation}"
          >
          </rotation-settings>
        </pv-menu-item>
        <pv-menu-item icon="measure" title="Measurement Tool" idx="3">
          <measurement-tool
            ?isColumnMode=${this.isColumnMode}
            .measurementTool="${this.viewerSettings.measurementTool}"
          ></measurement-tool>
        </pv-menu-item>
      </pv-menu>
    `}_handleSelectionChanged(e){const t=e.detail.selectedItems[0],i=t.getAttribute("pos-in-set")??t.ariaPosInSet;null==i&&console.warn("Selected item does not have an ariaPosInSet property. Check your segmented button implementation.",t);const n=parseInt(null==i?"":i,10)-1;n!=this.currentViewModeIndex&&(this.currentViewModeIndex=n,this.dispatchEvent(new CustomEvent("view-mode-changed",{detail:{viewIndex:n}})))}};Jee.styles=fQ`
    :host {
      height: 100%;
      width: 100%;
      --_ui5_button_base_padding: 0px;
    }

    .rotated-icon {
      transform: rotate(-90deg);
    }

    .hor-orientation {
      left: 50%;
    }

    .ver-orientation {
      top: 50%;
    }

    #viewModeBtn.hor-orientation {
      bottom: 1%;
      transform: translateX(-50%);
    }

    #viewModeBtn.ver-orientation {
      right: 1%;
      transform-origin: 100% 0;
      transform: rotate(90deg) translateX(50%);
    }

    #viewModeBtn {
      position: absolute;
      pointer-events: auto;
    }

    ui5-segmented-button-item {
      height: 3.5rem;
      padding: 1px 1px 1px 1px;
    }

    ui5-icon {
      width: 3.5rem;
      height: 3.5rem;
      stroke: black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%);
    }
  `,Kee([Aj({type:Number})],Jee.prototype,"currentViewModeIndex",2),Kee([Aj({type:Boolean})],Jee.prototype,"isColumnMode",2),Kee([Aj({type:Object})],Jee.prototype,"viewerSettings",2),Jee=Kee([yj("control-panel")],Jee);class ete{constructor(e,t,i){this.focalLengthInPx=e,this._sensorWidthInPx=t,this._sensorHeightInPx=i,0==this._sensorHeightInPx||0==this._sensorWidthInPx?this.aspectRatio=-1:this.aspectRatio=t/i,this.fovInRad=this._sensorHeightInPx/this.focalLengthInPx,this.cx=.5*(this._sensorWidthInPx-1),this.cy=.5*(this._sensorHeightInPx-1)}equals(e){return e.focalLengthInPx==this.focalLengthInPx&&e.cx==this.cx&&e.cy==this.cy}}class tte extends uY.EventEmitter{constructor(){super(),this.isValid=!1,this.sensorMap=new Map,this.sensorIds=[],this.imageFiles=[],this.camPosesInChunk=[],this.transformationChunkToWorld=new Oq,this._xmlDoc=null}readFromFile(e){return fetch(e).then((e=>e.text())).then((e=>{this._xmlDoc=(new DOMParser).parseFromString(e,"text/xml"),this._extractInformation()}))}_extractInformation(){this.isValid=!1,null!=this._xmlDoc?this._extractIntrinsicCameraInformation()?this._extractExtrinsicCameraInformation()?(this.isValid=!0,this.emit("scanInformationExtracted")):console.error("Coudn't extract extrinisc camera information from xml document"):console.error("Coudn't extract intrinsic camera information from xml document"):console.error("Xml of scaninformation is not valid")}_extractIntrinsicCameraInformation(){if(null==this._xmlDoc)return!1;const e=this._xmlDoc.getElementsByTagName("sensor");if(0==e.length)return console.error("No sensors found in xml document"),!1;for(let t=0;t<e.length;t++){const i=e[t].getAttribute("id");if(null==i)return console.error('Sensor Element in xml doesn\'t contain key "id"',t,e[t]),!1;const n=ite(e[t],"calibration");if(null==n)return!1;const r=ite(n,"resolution");if(null==r)return!1;const o=nte(r,"width"),s=nte(r,"height");if(null==o||null==s)return console.error("XML Document doesn't contain information about sensor width and height"),!1;const a=ite(n,"f");if(null==a||null==a.textContent)return console.error("XML Document doesn't contain information about the field of view",a),!1;const l=Number(a.textContent);if(Number.isNaN(l)||l<=0)return console.error("XML Document doesn't contain valid information about the field of view:",l),!1;this.sensorMap.set(i,new ete(l,o,s))}return!0}_extractExtrinsicCameraInformation(){return null!=this._xmlDoc&&(this._extractChunkToWorldCoorTransformation()?!!this._extractCamPoses()||(console.error("Coudn't extract cam poses information from xml document"),!1):(console.error("Coudn't extract transformation chunk to world coordinate system from xml document"),!1))}_extractChunkToWorldCoorTransformation(){if(null==this._xmlDoc)return console.error("XML Document is null"),!1;const e=function(e,t){const i=e.getElementsByTagName(t);return 0==i.length?(console.warn("XML Document doesn't contain valid element with name",t),null):i[i.length-1]}(this._xmlDoc,"transform");if(null==e)return console.error("XML Document doesn't contain a transform element"),!1;const t=ite(e,"rotation");if(null==t||null==t.textContent)return console.error("XML Document doesn't contain valid information about the rotation between chunk and world coordinate system",t),!1;const i=t.textContent.split(" "),n=i.map((e=>Number(e)));if(9!=n.length)return console.error("Rotation part of chunk doesn't contain 9 numbers:",n),!1;const r=new Hj;r.fromArray(n).transpose();const o=ite(e,"scale");if(null==o||null==o.textContent)return console.error("XML Document doesn't contain valid information about the scaling between chunk and world coordinate system",o),!1;const s=Number(o.textContent);if(s<=0)return console.error("Scalefactor in xml document is not valid: ",s),!1;r.multiplyScalar(s);const a=ite(e,"translation");if(null==a||null==a.textContent)return console.error("XML Document doesn't contain valid information about the translation between chunk and world coordinate system",a),!1;const l=a.textContent.split(" "),c=l.map((e=>Number(e)));if(3!=c.length)return console.error("Translation part of chunk doesn't contain 3 numbers:",c),!1;const u=new sq(c[0],c[1],c[2]);return this.transformationChunkToWorld.setFromMatrix3(r),this.transformationChunkToWorld.setPosition(u),console.log("Transformation chunk to world extracted from XML",{rotationChunkAsMat:r,rotationChunkAsStringArray:i,rotationElement:t,scaleElement:o,scaleFactor:s,transformationChunkToWorld:this.transformationChunkToWorld,translationChunkAsStringArray:l,translationElement:a}),!0}_extractCamPoses(){if(null==this._xmlDoc)return!1;const e=this._xmlDoc.getElementsByTagName("camera");if(0==e.length)return console.error("No cameras found in xml document"),!1;this.imageFiles.length=e.length,this.camPosesInChunk.length=e.length,this.sensorIds.length=e.length;let t=0;for(let i=0;i<e.length;i++){if(t>=10)return console.error("Failed to extract camera information for all cameras in xml document. Stopping after 10 errors."),!1;const n=e[i].getAttribute("label");if(null==n){console.warn('Camera Element in xml doesn\'t contain key "label"',i,e[i]),t+=1;continue}const r=e[i].getAttribute("sensor_id");if(null==r){console.warn('Camera Element in xml doesn\'t contain key "sensor_id"',i,e[i]),t+=1;continue}if(0==this.sensorMap.has(r)){console.warn("Sensor with id",r,"doesn't exist in xml file"),t+=1;continue}const o=ite(e[i],"transform");if(null==o||null==o.textContent){console.warn("Camera Element in xml doesn't contain transformationElement",i,e[i]),t+=1;continue}const s=o.textContent.split(" ").map((e=>Number(e)));16==s.length?(this.imageFiles[i]=n,this.sensorIds[i]=r,this.camPosesInChunk[i]=new Oq,this.camPosesInChunk[i].fromArray(s).transpose()):(console.warn("cam pose doesn't contain 16 numbers:",i,s),t+=1)}return!0}}function ite(e,t){const i=e.getElementsByTagName(t);return 0==i.length?(console.warn("XML Document doesn't contain valid element with name",t),null):i[0]}function nte(e,t){const i=e.getAttribute(t);return i?Number(i):null}class rte extends uY.EventEmitter{constructor(){super(...arguments),this.poses=[],this.normedPositions=[],this._remapCoordinates=new sq(0,1,2),this._sensorMap=new Map,this._sensorIds=[],this._camPosesInChunk=[],this._chunkToWorldTransform=new Oq,this._isYupTransformApplied=!0,this._additionalRotation=new Oq}init(e,t,i){this._sensorMap=e.sensorMap,this._sensorIds=e.sensorIds,this._camPosesInChunk=e.camPosesInChunk,this._chunkToWorldTransform=e.transformationChunkToWorld,this._isYupTransformApplied=t,this._additionalRotation=this._additionalRotation.makeRotationFromEuler(i),this._calculateCamPosesInWorldCoor()}setIsYupTransformApplied(e){e!=this._isYupTransformApplied&&(this._isYupTransformApplied=e,this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed"))}setAdditionalRotation(e){console.log("Set additional rotation"),this._additionalRotation=this._additionalRotation.makeRotationFromEuler(e.angleInRad),this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed")}setAxesRemapping(e){console.log("Set new axes mapping"),this._remapCoordinates=e,this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed")}getImageSensor(e){const t=this._sensorIds[e];return this._sensorMap.get(t)}getCameraPose(e){return e<this.poses.length&&e>=0?this.poses[e]:new Oq}getSyncSettingsOfNextBestImage(e){let t=e.position.clone().normalize();t=new sq(t.getComponent(this._remapCoordinates.getComponent(0)),t.getComponent(this._remapCoordinates.getComponent(1)),t.getComponent(this._remapCoordinates.getComponent(2)));let i=Number.MAX_VALUE,n=-1;for(let A=0;A<this.normedPositions.length;A++){if(void 0===this.normedPositions[A]||null===this.normedPositions[A])continue;const e=Math.acos(t.dot(this.normedPositions[A]));e<i&&(i=e,n=A)}if(-1==n)return[null,null];const r=new sq,o=new sq,s=new sq;this.poses[n].extractBasis(r,o,s);const a=Math.acos(-s.y),l=Math.atan2(-s.x,-s.z),c=new sq(Math.cos(l),0,-Math.sin(l)),u=new sq(-Math.cos(a)*Math.sin(l),Math.sin(a),-Math.cos(a)*Math.cos(l)),h=new Uj;h.x=r.dot(c),h.y=r.dot(u),h.normalize();const d=function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}(pY(Math.atan2(h.y,h.x)));console.log("Computing sync settings of next best image",{rotAngle:d,idxMinAngle:n,minAngle:i,normedPosition:this.normedPositions[n],pose:this.poses[n],unrotatedImgCamAxisX:c,normed3DCamPosition:t,projectedXDirCam2D:h,phiImageCam:a,thetaImageCam:l,nNormedPositions:this.normedPositions.length});const p=new sq;p.setFromMatrixPosition(this.poses[n]);const f=p.length(),g={theta:l,phi:a,radius:f,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}},m=new sq;m.x=p.x-f*Math.sin(a)*Math.sin(l),m.y=p.y-f*Math.cos(a),m.z=p.z-f*Math.sin(a)*Math.cos(l);const _=this._sensorIds[n],v=this._sensorMap.get(_);let y=.25*Math.PI,b=1;return null!=v&&(y=v.fovInRad,b=v.aspectRatio),[{imageIdx:n,rotationAngle:-d,imageAspectRatio:b},{orbitPos:g,cameraTarget:gI(m),fovInRad:y}]}_calculateCamPosesInWorldCoor(){const e=this._chunkToWorldTransform.clone();if(this._isYupTransformApplied){const t=new Oq;t.makeRotationX(.5*-Math.PI),e.premultiply(t)}const t=new sq,i=new oq,n=new sq;this.poses.length=this._camPosesInChunk.length,this.normedPositions.length=this._camPosesInChunk.length;for(let r=0;r<this._camPosesInChunk.length;r++){if(null==this._camPosesInChunk[r]||void 0===this._camPosesInChunk[r])continue;const o=new Oq;o.multiplyMatrices(e,this._camPosesInChunk[r]),o.premultiply(this._additionalRotation),o.decompose(t,i,n);const s=new sq(1,1,1);t.multiplyScalar(1e3);const a=new Oq;a.compose(t,i,s),this.poses[r]=a;const l=new sq;l.setFromMatrixPosition(a),this.normedPositions[r]=l.normalize()}console.log("Calculated camera poses in world coordinates",{transformationChunkToWorldYUp:e,camPosesInChunk:this._camPosesInChunk,normedPoses:this.normedPositions,poses:this.poses})}}class ote{constructor(){this.angleInRad=new jq(0,0,0,"YXZ")}angleInRadAsString(){return`${this.angleInRad.z}rad ${this.angleInRad.x}rad ${this.angleInRad.y}rad`}equals(e){return e.angleInRadAsString()==this.angleInRadAsString()}set x(e){this.angleInRad.x=e}get x(){return this.angleInRad.x}set y(e){this.angleInRad.y=e}get y(){return this.angleInRad.y}set z(e){this.angleInRad.z=e}get z(){return this.angleInRad.x}}function ste(e){return`rgb(${e.r}, ${e.g}, ${e.b})`}class ate extends uY.EventEmitter{constructor(){super(...arguments),this._eulerOrientation=new ote}set xOrientationInRad(e){this._eulerOrientation.x!=e&&(this._eulerOrientation.x=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set yOrientationInRad(e){this._eulerOrientation.y!=e&&(this._eulerOrientation.y=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set zOrientationInRad(e){this._eulerOrientation.z!=e&&(this._eulerOrientation.z=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}get eulerOrientationYXZInRad(){return this._eulerOrientation}}class lte extends uY.EventEmitter{constructor(){super(...arguments),this._autoRotationAngle=0,this._userSetRotationAngle=0,this._isAutoRotationActivated=!1}set autoRotationAngle(e){this._autoRotationAngle!=e&&(this._autoRotationAngle=e,this._isAutoRotationActivated&&this.emit("rotation-angle-changed",this._autoRotationAngle))}get autoRotationAngle(){return this._autoRotationAngle}set userSetRotationAngle(e){this._userSetRotationAngle!=e&&(this._userSetRotationAngle=e,this._isAutoRotationActivated||this.emit("rotation-angle-changed",this._userSetRotationAngle))}get userSetRotationAngle(){return this._userSetRotationAngle}set isAutoRotationActivated(e){this._isAutoRotationActivated!=e&&(this._isAutoRotationActivated=e,this._isAutoRotationActivated?this.emit("rotation-angle-changed",this._autoRotationAngle):this.emit("rotation-angle-changed",this._userSetRotationAngle,!1))}get isAutoRotationActivated(){return this._isAutoRotationActivated}}class cte extends uY.EventEmitter{constructor(){super(...arguments),this._showAxes=!1,this._remapAxes=new sq(0,1,2),this._backgroundColor="#444444",this._gradientColor="#b9b9b9",this._applyGradient=!0,this._brightness=1}set showAxes(e){this._showAxes!=e&&(this._showAxes=e,this.emit("change-axes-visibility-requested",this._showAxes))}get showAxes(){return this._showAxes}set remapAxes(e){this._remapAxes!=e&&(console.log("Remapped axes to ",e),this._remapAxes=e,this.emit("change-axes-mapping-requested",this.remapAxes))}get remapAxes(){return this._remapAxes}set backgroundColor(e){const t=a9(e),i=ste(t);if(console.log("Set backgroundcolor",t,i),this._backgroundColor==i)return;this._backgroundColor=i;const n={r:Math.min(2.5*t.r,255),g:Math.min(2.5*t.g,255),b:Math.min(2.5*t.b,255)};this._gradientColor=ste(n),console.log("Set gradient color",n,this._gradientColor),this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,"")}get backgroundColor(){return this._applyGradient?[this._backgroundColor,this._gradientColor]:[this._backgroundColor,""]}set applyGradient(e){this._applyGradient!=e&&(this._applyGradient=e,this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,""))}get applyGradient(){return this._applyGradient}set brightness(e){this._brightness!=e&&(this._brightness=e,this.emit("change-exposure-requested",this._brightness))}}class ute extends uY.EventEmitter{constructor(){super(...arguments),this._isEditModeActive=!1,this._measurementPoints=[],this._measuredLength=0,this._currentOrientation=new jq,this._currentTranslation=new sq,this._imageSensor=null,this._imageCamOrientation=new Oq,this._measurementDistances=[],this._sceneElementGroup=new sX}set imageSensor(e){this._imageSensor&&e.equals(this._imageSensor)||(this._imageSensor=e)}set imageCamOrientation(e){this._imageCamOrientation.equals(e)||(this._imageCamOrientation=e)}get sceneElementGroup(){return this._sceneElementGroup}set isEditModeActive(e){this._isEditModeActive!=e&&(this._isEditModeActive=e)}get isEditModeActive(){return this._isEditModeActive}get numPoints(){return this._measurementPoints.length}get measuredLength(){return this._measuredLength}set translation(e){e.equals(this._currentTranslation)||(this._measurementDistances.forEach((t=>{t.translate(e)})),this._currentTranslation=e.clone())}set eulerOrientation(e){this._currentOrientation.equals(e.angleInRad)||(this._currentOrientation=e.angleInRad.clone(),this._measurementDistances.forEach((e=>{e.changeSceneOrientation(this._currentOrientation)})),this._measurementPoints.forEach((e=>{e.updatePosition(this._currentOrientation)})))}addPointFromImage(e,t){if(null==this._imageSensor)return void console.warn("Cannot add point from image, since image sensor is null.");const i=new sq;i.x=e-this._imageSensor.cx,i.y=t-this._imageSensor.cy,i.z=this._imageSensor.focalLengthInPx;const n=new Hj;n.setFromMatrix4(this._imageCamOrientation),console.log("Cam orientation in World",this._imageCamOrientation),i.applyMatrix3(n);const r=i.normalize(),o=new sq;o.setFromMatrixPosition(this._imageCamOrientation),this.emit("calculate-hotspot-requested",o,r)}addPointFrom3DScene(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._measurementPoints.length,r=new sq(e.x,e.y,e.z),o=new sq(t.x,t.y,t.z),s=new fte(n,r,o,this._currentOrientation);if(s.on("hotspot-selected",this._updateHotspotInImage.bind(this)),s.on("hotspot-focus-changed",(e=>this.emit("change-image-hotspot-visibility",e))),this._measurementPoints.push(s),n>0){const e=new dte(this._measurementDistances.length,this._measurementPoints[n-1],s,this._currentTranslation,this._currentOrientation);this._measuredLength+=e.distance,this._sceneElementGroup.add(e.sceneElement),this._measurementDistances.push(e),this.emit("hotspot-added",e.annotationElement),this.emit("update-requested")}this.emit("hotspot-added",s.domElement),i&&this._updateHotspotInImage(s.positionInSceneCoor),window.setTimeout((()=>s.domElement.focus()),0)}resetPoints(){this._measurementPoints.forEach((e=>{e.delete()})),this._measurementPoints=[],this._measuredLength=0,this._measurementDistances.forEach((e=>{e.reset()})),this.emit("update-requested")}showPoints(){this._measurementPoints.forEach((e=>{e.show()})),this._measurementDistances.forEach((e=>{e.show()})),this.emit("scene-update-requested")}hidePoints(){this._measurementDistances.forEach((e=>{e.hide()})),this._measurementPoints.forEach((e=>{e.hide()})),this.emit("scene-update-requested")}_updateHotspotInImage(e){if(null==this._imageSensor)return void console.warn("Cannot update hotspot in image: image sensor null.");const t=this._imageSensor,i=this._imageCamOrientation.clone(),n=(new sq).setFromMatrixPosition(i);n.add(this._currentTranslation),i.setPosition(n),i.invert();const r=(new sq).addVectors(e,this._currentTranslation),o=new rq(r.x,r.y,r.z,1).applyMatrix4(i),s=new sq(o.x/o.w,o.y/o.w,o.z/o.w),a=s.x/s.z*t.focalLengthInPx+t.cx,l=s.y/s.z*t.focalLengthInPx+t.cy;a>0&&l>0&&this.emit("update-image-hotspot-position-requested",a,l)}}class hte{constructor(){this._lineGeometry=new jW,this._translation=new sq,this._pointsInModelCoor=[],this._lineMaterial=new NX({color:16777215,gapSize:.1,dashSize:.1}),this._lineMaterial.transparent=!0,this._lineMaterial.depthTest=!1,this._distanceLine=new DX(this._lineGeometry,this._lineMaterial)}get lineElement(){return this._distanceLine}addPoint(e,t,i){const n=(new Oq).makeRotationFromEuler(i).invert(),r=e.clone().applyMatrix4(n);this._pointsInModelCoor.push(r),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new Oq).makeRotationFromEuler(i)),this._lineGeometry.translate(t.x,t.y,t.z),this._distanceLine.computeLineDistances(),this._translation=t}addPointInModelCoor(e,t,i){this._pointsInModelCoor.push(e),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new Oq).makeRotationFromEuler(i)),this._lineGeometry.translate(t.x,t.y,t.z),this._distanceLine.computeLineDistances(),this._translation=t}setTranslation(e){this._lineGeometry.translate(-this._translation.x+e.x,-this._translation.y+e.y,-this._translation.z+e.z),this._translation=e}setEulerOrientation(e){this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new Oq).makeRotationFromEuler(e)),this._lineGeometry.translate(this._translation.x,this._translation.y,this._translation.z),this._distanceLine.computeLineDistances()}set opacity(e){this._lineMaterial.opacity=e}show(){this._distanceLine.visible=!0}hide(){this._distanceLine.visible=!1}reset(){this._pointsInModelCoor.length=0,this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._distanceLine.removeFromParent()}}class dte{constructor(e,t,i,n,r){this._sceneLineElement=new hte,this._numVisiblePoints=0,this._isHidden=!1;const o=t.distanceTo(i),s=(new sq).addVectors(t.positionInSceneCoor,i.positionInSceneCoor).multiplyScalar(.5),a=(new sq).addVectors(t.normalInSceneCoor,i.normalInSceneCoor).multiplyScalar(.5);this._distanceAnnotation=new gte(e,o,s,a,r),this._sceneLineElement.addPointInModelCoor(t.positionInModelCoor,n,r),this._sceneLineElement.addPointInModelCoor(i.positionInModelCoor,n,r);const l=new MutationObserver(this._handlePointVisibilityChanged.bind(this));l.observe(t.domElement,{attributes:!0}),l.observe(i.domElement,{attributes:!0}),this._numVisiblePoints=Number(t.domElement.hasAttribute("data-visible"))+Number(i.domElement.hasAttribute("data-visible"))}get distance(){return this._distanceAnnotation.distance}get sceneElement(){return this._sceneLineElement.lineElement}get annotationElement(){return this._distanceAnnotation.domElement}translate(e){this._sceneLineElement.setTranslation(e)}changeSceneOrientation(e){this._sceneLineElement.setEulerOrientation(e),this._distanceAnnotation.updatePosition(e)}show(){this._sceneLineElement.show(),this._distanceAnnotation.show(),this._isHidden=!1,this._updateAnnotationVisibility()}hide(){this._isHidden=!0,this._distanceAnnotation.hide(),this._sceneLineElement.hide()}reset(){this._sceneLineElement.reset(),this._distanceAnnotation.delete()}_handlePointVisibilityChanged(e){for(const t of e)if("attributes"===t.type&&"data-visible"===t.attributeName){const e=t.target;this._numVisiblePoints+=e.hasAttribute("data-visible")?1:-1}this._isHidden||this._updateAnnotationVisibility()}_updateAnnotationVisibility(){this._numVisiblePoints<=0?(this._distanceAnnotation.hide(),this._sceneLineElement.opacity=.25):(this._distanceAnnotation.show(),this._sceneLineElement.opacity=1)}}class pte extends uY.EventEmitter{constructor(e,t,i){super();const n=(new Oq).makeRotationFromEuler(i).invert();this._positionInSceneCoor=e,this._positionInModelCoor=this._positionInSceneCoor.clone().applyMatrix4(n),this._normalInSceneCoor=t,this._normalInModelCoor=this._normalInSceneCoor.clone().applyMatrix4(n),this._domElement=document.createElement("button"),this._domElement.dataset.visibilityAttribute="visible",this._domElement.style.display="block",this._domElement.dataset.position=this.positionInSceneCoorAsString,this._domElement.dataset.normal=this.normalInSceneCoorAsString,this._domElement.addEventListener("focus",this._handleFocusChanged.bind(this)),this._domElement.addEventListener("blur",this._handleFocusChanged.bind(this))}get domElement(){return this._domElement}get positionInModelCoor(){return this._positionInModelCoor}get positionInSceneCoor(){return this._positionInSceneCoor}get normalInSceneCoor(){return this._normalInSceneCoor}get positionInSceneCoorAsString(){return`${this._positionInSceneCoor.x}m ${this._positionInSceneCoor.y}m ${this._positionInSceneCoor.z}m`}get normalInSceneCoorAsString(){return`${this._normalInSceneCoor.x}m ${this._normalInSceneCoor.y}m ${this._normalInSceneCoor.z}m`}updatePosition(e){this._positionInSceneCoor=this._positionInModelCoor.clone().applyEuler(e),this._normalInSceneCoor=this._normalInModelCoor.clone().applyEuler(e),this.domElement.dataset.position=this.positionInSceneCoorAsString,this.domElement.dataset.normal=this.normalInSceneCoorAsString,this.domElement.dispatchEvent(new Event("hotspot-position-changed"))}show(){this.domElement.style.display="block"}hide(){this.domElement.style.display="none"}delete(){var e;null==(e=this.domElement.parentNode)||e.removeChild(this.domElement)}_handleFocusChanged(e){this.emit("hotspot-focus-changed","focus"==e.type)}}class fte extends pte{constructor(e,t,i,n){super(t,i,n),this._domElement.slot="hotspot-measurementpoint"+e,this.domElement.classList.add("hotspot"),this.domElement.textContent=e.toString(),this.domElement.addEventListener("click",(e=>{e.stopPropagation(),this.emit("hotspot-selected",this.positionInSceneCoor)}))}distanceTo(e){return this.positionInModelCoor.distanceTo(e.positionInModelCoor)}}class gte extends pte{constructor(e,t,i,n,r){super(i,n,r),this._distance=0,this._distance=t,this._domElement.slot="hotspot-distance-annotation"+e,this.domElement.classList.add("annotation"),this.domElement.textContent=t.toFixed(1)+" mm"}get distance(){return this._distance}}class mte{constructor(e,t){this.projectRoot=e,this.imageType=t,this.skyBoxImage=null}resolve2dFileURL(e){return new Promise(((t,i)=>{t(this.projectRoot+e+this.imageType)}))}}var _te=Object.defineProperty,vte=Object.getOwnPropertyDescriptor,yte=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?vte(t,i):t,s=e.length-1;s>=0;s--)(r=e[s])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&_te(t,i,o),o};let bte=class extends _j{constructor(){super(),this.isYupTransformApplied=!1,this.src3D="",this.src2D="",this.srcScanInformation="",this._scanInformation=new tte,this._imageCamera=new rte,this._syncSettings2DViewer=null,this._syncSettings3DViewer=null,this._viewerAspectRatio=1,this._viewModeIndex=2,this._isInit=!1,this._isColumnDir=!1,this._viewerSettings={imageRotation:new lte,modelOrientation:new ate,measurementTool:new ute,environment3D:new cte},this._viewerSettings.modelOrientation.on("model-orientation-changed",(e=>this._imageCamera.setAdditionalRotation(e))),this._viewerSettings.environment3D.on("change-axes-mapping-requested",(e=>{console.log("Setting new axes mapping"),this._imageCamera.setAxesRemapping(e)})),this._scanInformation.on("scanInformationExtracted",this._handleScanInformationExtracted.bind(this)),this._imageCamera.on("camera-parameters-changed",this._updateViewer.bind(this)),this._resizeObserver=new ResizeObserver(this._handleViewerResizeEvent.bind(this)),null==this.viewSettings&&(this.viewSettings=new mte(this.src2D,".png"))}render(){return WQ`
      <div id="viewerBase">
        <viewer-3d
          id="viewer3D"
          src=${this.src3D}
          camera-controls
          disable-tap
          camera-orbit="0deg 90deg auto"
          max-camera-orbit="Infinity 157.5deg auto"
          min-camera-orbit="-Infinity 22.5deg auto"
          camera-target="0m 0m 0m"
          exposure="1.2"
          shadow-intensity="0"
          alt="Leptinotarsa"
          min-field-of-view="0deg"
          max-field-of-view="18deg"
          interaction-prompt="none"
          skybox-image="${this.viewSettings.skyBoxImage}"
          .measurementTool="${this._viewerSettings.measurementTool}"
          @fov-based-zoom-changed="${this._handleFovBasedZoomChanged}"
          @cam-orbit-angle-changed="${this._updateViewer}"
          @dblclick="${this._updateOneViewSyncMode}"
        >
        </viewer-3d>
        <viewer-2d
          id="viewer2D"
          src2D=${this.src2D}
          .measurementTool="${this._viewerSettings.measurementTool}"
          .viewSettings="${this.viewSettings}"
          @image-zoom-changed="${this._handleImageZoomChanged}"
          @image-shifted="${this._handleImageShifted}"
          @min-zoom-level-changed="${this._handleImageMinZoomLevelChanged}"
          @double-press="${this._updateOneViewSyncMode}"
          @pointer-move-in-disable-mode="${this._handlePointerMoveOnImageInDisableMode}"
          @double-press-completed="${this._updateOneViewSyncMode}"
        >
        </viewer-2d>
        <control-panel
          id="controls"
          ?isColumnMode=${this._isColumnDir}
          .viewerSettings="${this._viewerSettings}"
          @view-mode-changed="${this._handleViewModeChanged}"
        >
        </control-panel>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this._resizeObserver.disconnect(),super.disconnectedCallback()}firstUpdated(){this._resizeObserver.observe(this.viewerBase),this.viewer2DElement.connectWithSettings(this._viewerSettings),this.viewer3DElement.connectWithSettings(this._viewerSettings)}updated(e){super.updated(e),e.has("srcScanInformation")&&(this._isInit=!1,this._scanInformation.readFromFile(this.srcScanInformation).then((()=>{this._scanInformation.isValid||alert("Invalid scan information file")}))),e.has("isYupTransformApplied")&&this._imageCamera.setIsYupTransformApplied(this.isYupTransformApplied),e.has("src2D")&&this.viewSettings instanceof mte&&(this.viewSettings=new mte(this.src2D,".png"))}_handleViewModeChanged(e){if(this._viewModeIndex==e.detail.viewIndex)return;const t=this._viewModeIndex;this._viewModeIndex=e.detail.viewIndex,0==t&&(this._activateAndShow2DViewer(),this._updateViewerSize()),2!=t&&2!=this._viewModeIndex||this._changeSyncMode(),0==this._viewModeIndex&&this._updateViewerSize()}_handlePointerMoveOnImageInDisableMode(e){this._viewModeIndex>0||this.viewer3DElement.rotateModel(e.detail.dx,e.detail.dy)}_handleScanInformationExtracted(){this._imageCamera.init(this._scanInformation,this.isYupTransformApplied,this._viewerSettings.modelOrientation.eulerOrientationYXZInRad.angleInRad),this.viewer2DElement.setImageFiles(this._scanInformation.imageFiles),this.viewer3DElement.loaded&&this._updateViewer()}_activateAndShow2DViewer(){this.viewer2DElement.style.cursor="auto",this.viewer2DElement.style.opacity="1",this.viewer2DElement.style.zIndex="2",this.viewer2DElement.updatePointerEventsState(!1)}_deactivateAndHide2DViewer(){this.viewer2DElement.style.opacity="0",this.viewer2DElement.style.zIndex="0",this.viewer2DElement.updatePointerEventsState(!0),this.viewer2DElement.style.cursor="grabbing"}_updateOneViewSyncMode(){this._viewModeIndex>0||("0"===this.viewer2DElement.style.opacity?this._activateAndShow2DViewer():this._deactivateAndHide2DViewer())}_handleViewerResizeEvent(){this._updateViewerSize()}_updateViewerSize(){if(0==this._viewModeIndex){if(this._viewerAspectRatio=this.viewerBase.offsetWidth/this.viewerBase.offsetHeight,this.viewer3DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth),this.viewer2DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth,"translate(0,0)"),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;const e=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,t=this._syncSettings3DViewer.fovInRad*e;return this.viewer3DElement.setReferenceFieldOfView(t,this._viewModeIndex<2),void this._synchronize3DViewer()}if(this._isColumnDir=this.viewerBase.offsetHeight>this.viewerBase.offsetWidth,null!=this._syncSettings2DViewer){const e=this._syncSettings2DViewer.imageAspectRatio*this.viewerBase.offsetHeight/this.viewerBase.offsetWidth;this._isColumnDir=e>1}let e=this.viewerBase.offsetWidth,t=.5*this.viewerBase.offsetHeight,i="translate(0,100%)";if(this._isColumnDir||(e=.5*this.viewerBase.offsetWidth,t=this.viewerBase.offsetHeight,i="translate(100%,0)"),this._viewerAspectRatio=e/t,this.viewer3DElement.resize(t,e),this.viewer2DElement.resize(t,e,i),this.requestUpdate(),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;const n=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,r=this._syncSettings3DViewer.fovInRad*n;this.viewer3DElement.setReferenceFieldOfView(r,!0),this._synchronize3DViewer()}_changeSyncMode(){this._viewModeIndex<2?(this.viewer3DElement.updateRadiusMode(!0),this._synchronize3DViewer(),this.viewer3DElement.disablePan=!0):(this.viewer3DElement.disablePan=!1,this.viewer3DElement.updateRadiusMode(!1),this.viewer3DElement.setViewerOffset(0,0))}_handleFovBasedZoomChanged(e){2!=this._viewModeIndex&&this.viewer2DElement.zoomImage(e.detail.zoomLevel)}_handleImageZoomChanged(e){this._viewModeIndex<2&&this.viewer3DElement.zoomTo(e.detail.zoomLevel)}_handleImageMinZoomLevelChanged(e){this.viewer3DElement.setMinZoomLevel(e.detail.zoomLevel)}_handleImageShifted(e){this._viewModeIndex<2&&this.viewer3DElement.setViewerOffset(e.detail.deltaX,e.detail.deltaY)}_updateViewer(){const e=this.viewer3DElement.getCamera();if([this._syncSettings2DViewer,this._syncSettings3DViewer]=this._imageCamera.getSyncSettingsOfNextBestImage(e),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;this._viewerSettings.imageRotation.autoRotationAngle=this._syncSettings2DViewer.rotationAngle;const t=this._syncSettings2DViewer.imageIdx;this.viewer2DElement.loadNextImage(t);const i=this._imageCamera.getImageSensor(t);null==i?console.log("There is no sensor to the image index ",t):this._viewerSettings.measurementTool.imageSensor=i,this._viewerSettings.measurementTool.imageCamOrientation=this._imageCamera.getCameraPose(t);const n=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,r=this._syncSettings3DViewer.fovInRad*n;this._isInit?this.viewer3DElement.setReferenceFieldOfView(r,this._viewModeIndex<2):(this.viewer3DElement.setReferenceFieldOfView(r,!0),this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this._updateViewerSize(),this._isInit=!0),this._viewModeIndex<2&&this._synchronize3DViewer()}_synchronize3DViewer(){null!=this._syncSettings3DViewer&&null!=this._syncSettings2DViewer&&(this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this.viewer3DElement.cameraTarget=this._syncSettings3DViewer.cameraTarget.toString(),this.viewer3DElement.zoomTo(this.viewer2DElement.getZoomLevel()))}};bte.styles=fQ`
    :host {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #viewerBase {
      position: relative;
      border: 2px solid blue;
      width: 100%;
      height: 100%;
      border: 0;
      background-color: lightgray;
    }

    #viewer2D {
      position: absolute;
      left: 0;
      right: 0;
      z-index: 2;
      opacity: 1;
    }

    #viewer3D {
      position: absolute;
      z-index: 1;
      overflow: hidden;
    }

    #controls {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      right: 0;
      z-index: 5;
      pointer-events: none;
    }

    .hotspot {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 0;
    }

    .hotspot:not([data-visible]) {
      background: transparent;
      border: 3px solid #fff;
      box-shadow: none;
      pointer-events: none;
    }

    .hotspot:focus {
      border: 3px solid rgb(0, 128, 200);
      outline: none;
      padding: 0;
    }

    .hotspot > * {
      opacity: 1;
    }

    .annotation {
      background: rgba(0, 0, 0, 0.75);
      color: rgba(255, 255, 255);
      border-radius: 5px;
      border: 0;
      box-shadow: 0;
      width: max-content;
      padding: 0.25em 0.5em;
    }
  `,yte([Aj({type:Boolean})],bte.prototype,"isYupTransformApplied",2),yte([Aj()],bte.prototype,"src3D",2),yte([Aj()],bte.prototype,"src2D",2),yte([Aj()],bte.prototype,"srcScanInformation",2),yte([Aj({type:Object})],bte.prototype,"viewSettings",2),yte([wj("#viewerBase")],bte.prototype,"viewerBase",2),yte([wj("#viewer3D")],bte.prototype,"viewer3DElement",2),yte([wj("#viewer2D")],bte.prototype,"viewer2DElement",2),yte([wj("#controls")],bte.prototype,"controlsElement",2),bte=yte([yj("photogrammetry-viewer")],bte);var Ate=1,wte=65535,xte=setInterval((function(){Ate=Ate+1&wte}),250);xte.unref&&xte.unref();class Ste{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=function(e){var t=4*(e||5),i=[0],n=1,r=Ate-1&wte;return function(e){var o=Ate-r&wte;for(o>t&&(o=t),r=Ate;o--;)n===t&&(n=0),i[n]=i[0===n?t-1:n-1],n++;e&&(i[n-1]+=e);var s=i[n-1],a=i.length<t?0:i[n===t?0:n];return i.length<4?s:4*(s-a)/i.length}}(this.speed||5e3),this.initial=!1,this.emitDelay=t,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,t){const i=e.length;if(this.transferred+=i,this.speed=this.streamSpeed(i),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const e={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(e.remaining=this.getRemainingBytes(),e.percentage=this.percentage),t(e)}}}function Cte(e){return e.arrayBuffer?e.arrayBuffer():new Promise(((t,i)=>{const n=new FileReader;n.addEventListener("loadend",(()=>{t(n.result)})),n.addEventListener("error",i),n.readAsArrayBuffer(e)}))}async function Ete(e){const t=await Cte(e);return new Uint8Array(t)}function Tte(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Ite(e){return"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}const Mte="undefined"!=typeof process&&process.versions&&void 0!==process.versions.node&&void 0===process.versions.electron;class kte{constructor(e){this.typedArray=e instanceof ArrayBuffer||Ite(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}}class Bte{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){const i=this.blob.slice(e,e+t),n=await Cte(i);return new Uint8Array(n)}async sliceAsBlob(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.blob.slice(e,e+t,i)}}function Rte(e,t){var i=e.length;if(t<=i)return e;var n=new Uint8Array(Math.max(i<<1,t));return n.set(e,0),n}function Pte(e,t,i,n,r,o){for(var s=Nte,a=Ute,l=0;l<i;){var c=e[a(n,r)&t];r+=15&c;var u=c>>>4;if(u<=15)o[l]=u,l++;else{var h=0,d=0;16==u?(d=3+s(n,r,2),r+=2,h=o[l-1]):17==u?(d=3+s(n,r,3),r+=3):18==u&&(d=11+s(n,r,7),r+=7);for(var p=l+d;l<p;)o[l]=h,l++}}return r}function Dte(e,t,i,n){for(var r=0,o=0,s=n.length>>>1;o<i;){var a=e[o+t];n[o<<1]=0,n[1+(o<<1)]=a,a>r&&(r=a),o++}for(;o<s;)n[o<<1]=0,n[1+(o<<1)]=0,o++;return r}function Lte(e,t){for(var i,n,r,o,s=e.length,a=Hte.bl_count,l=0;l<=t;l++)a[l]=0;for(l=1;l<s;l+=2)a[e[l]]++;var c=Hte.next_code;for(i=0,a[0]=0,n=1;n<=t;n++)i=i+a[n-1]<<1,c[n]=i;for(r=0;r<s;r+=2)0!=(o=e[r+1])&&(e[r]=c[o],c[o]++)}function Ote(e,t,i){for(var n=e.length,r=Hte.rev15,o=0;o<n;o+=2)if(0!=e[o+1])for(var s=o>>1,a=e[o+1],l=s<<4|a,c=t-a,u=e[o]<<c,h=u+(1<<c);u!=h;)i[r[u]>>>15-t]=l,u++}function Fte(e,t){for(var i=Hte.rev15,n=15-t,r=0;r<e.length;r+=2){var o=e[r]<<t-e[r+1];e[r]=i[o]>>>n}}function Nte(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1}function zte(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1}function Ute(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}const Hte=(Vte=Uint16Array,$te=Uint32Array,{next_code:new Vte(16),bl_count:new Vte(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Vte(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new $te(32),flmap:new Vte(512),fltree:[],fdmap:new Vte(32),fdtree:[],lmap:new Vte(32768),ltree:[],ttree:[],dmap:new Vte(32768),dtree:[],imap:new Vte(512),itree:[],rev15:new Vte(32768),lhst:new $te(286),dhst:new $te(30),ihst:new $te(19),lits:new $te(15e3),strt:new Vte(65536),prev:new Vte(32768)});var Vte,$te;!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,Hte.rev15[e]=(t>>>16|t<<16)>>>17}function i(e,t,i){for(;0!=t--;)e.push(0,i)}for(e=0;e<32;e++)Hte.ldef[e]=Hte.of0[e]<<3|Hte.exb[e],Hte.ddef[e]=Hte.df0[e]<<4|Hte.dxb[e];i(Hte.fltree,144,8),i(Hte.fltree,112,9),i(Hte.fltree,24,7),i(Hte.fltree,8,8),Lte(Hte.fltree,9),Ote(Hte.fltree,9,Hte.flmap),Fte(Hte.fltree,9),i(Hte.fdtree,32,5),Lte(Hte.fdtree,5),Ote(Hte.fdtree,5,Hte.fdmap),Fte(Hte.fdtree,5),i(Hte.itree,19,0),i(Hte.ltree,286,0),i(Hte.dtree,30,0),i(Hte.ttree,320,0)}();const Gte={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var i=t,n=0;n<8;n++)1&i?i=3988292384^i>>>1:i>>>=1;e[t]=i}return e}(),update:function(e,t,i,n){for(var r=0;r<n;r++)e=Gte.table[255&(e^t[i+r])]^e>>>8;return e},crc:function(e,t,i){return 4294967295^Gte.update(4294967295,e,t,i)}};const Qte={numWorkers:1,workerURL:"",useWorkers:!1};let jte=0;const qte=[];function Wte(e){return new Promise(((t,i)=>{const n=new Worker(e);n.onmessage=e=>{"start"===e.data?(n.onerror=void 0,n.onmessage=void 0,t(n)):i(new Error(`unexpected message: ${e.data}`))},n.onerror=i}))}function Xte(e,t,i,n){const r=new Uint8Array(t);(function(e,t){(function(e,t){var i=Uint8Array;if(3==e[0]&&0==e[1])return t||new i(0);var n=zte,r=Nte,o=Pte,s=Ute,a=null==t;a&&(t=new i(e.length>>>2<<3));for(var l,c,u=0,h=0,d=0,p=0,f=0,g=0,m=0,_=0,v=0;0==u;)if(u=n(e,v,1),h=n(e,v+1,2),v+=3,0!=h){if(a&&(t=Rte(t,_+(1<<17))),1==h&&(l=Hte.flmap,c=Hte.fdmap,g=511,m=31),2==h){d=r(e,v,5)+257,p=r(e,v+5,5)+1,f=r(e,v+10,4)+4,v+=14;for(var y=0;y<38;y+=2)Hte.itree[y]=0,Hte.itree[y+1]=0;var b=1;for(y=0;y<f;y++){var A=r(e,v+3*y,3);Hte.itree[1+(Hte.ordr[y]<<1)]=A,A>b&&(b=A)}v+=3*f,Lte(Hte.itree,b),Ote(Hte.itree,b,Hte.imap),l=Hte.lmap,c=Hte.dmap,v=o(Hte.imap,(1<<b)-1,d+p,e,v,Hte.ttree);var w=Dte(Hte.ttree,0,d,Hte.ltree);g=(1<<w)-1;var x=Dte(Hte.ttree,d,p,Hte.dtree);m=(1<<x)-1,Lte(Hte.ltree,w),Ote(Hte.ltree,w,l),Lte(Hte.dtree,x),Ote(Hte.dtree,x,c)}for(;;){var S=l[s(e,v)&g];v+=15&S;var C=S>>>4;if(C>>>8==0)t[_++]=C;else{if(256==C)break;var E=_+C-254;if(C>264){var T=Hte.ldef[C-257];E=_+(T>>>3)+r(e,v,7&T),v+=7&T}var I=c[s(e,v)&m];v+=15&I;var M=I>>>4,k=Hte.ddef[M],B=(k>>>4)+n(e,v,15&k);for(v+=15&k,a&&(t=Rte(t,_+(1<<17)));_<E;)t[_]=t[_++-B],t[_]=t[_++-B],t[_]=t[_++-B],t[_]=t[_++-B];_=E}}}else{7&v&&(v+=8-(7&v));var R=4+(v>>>3),P=e[R-4]|e[R-3]<<8;a&&(t=Rte(t,_+P)),t.set(new i(e.buffer,e.byteOffset+R,P),_),v=R+P<<3,_+=P}t.length==_||t.slice(0,_)})(e,t)})(e,r),n(i?new Blob([r],{type:i}):r.buffer)}function Yte(e,t,i){return new Promise(((n,r)=>{qte.push({src:e,uncompressedSize:t,type:i,resolve:n,reject:r,id:jte++}),async function(){if(0!==qte.length)for(;qte.length;){const{src:e,uncompressedSize:t,type:i,resolve:n}=qte.shift();let r=e;Tte(e)&&(r=await Ete(e)),Xte(r,t,i,n)}}()}))}!function(){if(Mte){const{Worker:i}=(t=e).require?t.require("worker_threads"):{};return{createWorker:async e=>new i(e),addEventListener(e,t){e.on("message",(i=>{t({target:e,data:i})}))},async terminate(e){await e.terminate()}}}return{async createWorker(e){try{return await Wte(e)}catch(t){console.warn("could not load worker:",e)}let t;try{const i=await fetch(e,{mode:"cors"});if(!i.ok)throw new Error(`could not load: ${e}`);t=await i.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const n=await Wte(e);return Qte.workerURL=e,n}catch(t){console.warn("could not load worker via fetch:",e)}if(void 0!==t)try{e=`data:application/javascript;base64,${btoa(t)}`;const i=await Wte(e);return Qte.workerURL=e,i}catch(e){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}};var t}();class Kte{constructor(e,t){var i,n;this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=(i=t.lastModFileDate,n=t.lastModFileTime,new Date(1980+(i>>9&127),(i>>5&15)-1,31&i,n>>11&31,n>>5&63,2*(31&n),0)),this.isDirectory=0===t.uncompressedSize&&t.name.endsWith("/"),this.encrypted=!!(1&t.generalPurposeBitFlag),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";return await async function(e,t,i){const{decompress:n,fileDataStart:r}=await cie(e,t);if(!n){const n=await Jte(e,r,t.compressedSize,i);return Tte(n)?n:new Blob([Ite(n.buffer)?new Uint8Array(n):n],{type:i})}const o=await Jte(e,r,t.compressedSize);return await Yte(o,t.uncompressedSize,i)}(this._reader,this._rawEntry,e)}async arrayBuffer(){return await async function(e,t){const{decompress:i,fileDataStart:n}=await cie(e,t);if(!i){const i=await Zte(e,n,t.compressedSize);return 0===(r=i).byteOffset&&r.byteLength===r.buffer.byteLength?i.buffer:i.slice().buffer}var r;const o=await Jte(e,n,t.compressedSize);return await Yte(o,t.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return oie(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}async function Zte(e,t,i){return await e.read(t,i)}async function Jte(e,t,i,n){return e.sliceAsBlob?await e.sliceAsBlob(t,i,n):await e.read(t,i)}const eie=()=>0;function tie(e,t){return e[t]+256*e[t+1]}function iie(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function nie(e,t){return iie(e,t)+4294967296*iie(e,t+4)}const rie=new TextDecoder;function oie(e,t){return Ite(e.buffer)&&(e=new Uint8Array(e)),rie.decode(e)}async function sie(e,t,i,n){const r=t-20,o=await Zte(e,r,20);if(117853008!==iie(o,0))throw new Error("invalid zip64 end of central directory locator signature");const s=nie(o,8),a=await Zte(e,s,56);if(101075792!==iie(a,0))throw new Error("invalid zip64 end of central directory record signature");const l=nie(a,32),c=nie(a,40);return lie(e,nie(a,48),c,l,i,n)}const aie=33639248;async function lie(e,t,i,n,r,o){let s=0;const a=await Zte(e,t,i),l=[];for(let c=0;c<n;++c){const e=a.subarray(s,s+46),t=iie(e,0);if(t!==aie)throw new Error(`invalid central directory file header signature: 0x${t.toString(16)}`);const i={versionMadeBy:tie(e,4),versionNeededToExtract:tie(e,6),generalPurposeBitFlag:tie(e,8),compressionMethod:tie(e,10),lastModFileTime:tie(e,12),lastModFileDate:tie(e,14),crc32:iie(e,16),compressedSize:iie(e,20),uncompressedSize:iie(e,24),fileNameLength:tie(e,28),extraFieldLength:tie(e,30),fileCommentLength:tie(e,32),internalFileAttributes:tie(e,36),externalFileAttributes:iie(e,38),relativeOffsetOfLocalHeader:iie(e,42)};if(64&i.generalPurposeBitFlag)throw new Error("strong encryption is not supported");s+=46;const n=a.subarray(s,s+i.fileNameLength+i.extraFieldLength+i.fileCommentLength);i.nameBytes=n.slice(0,i.fileNameLength),i.name=oie(i.nameBytes);const r=i.fileNameLength+i.extraFieldLength,o=n.slice(i.fileNameLength,r);i.extraFields=[];let c=0;for(;c<o.length-3;){const e=tie(o,c+0),t=c+4,n=t+tie(o,c+2);if(n>o.length)throw new Error("extra field length exceeds extra field buffer size");i.extraFields.push({id:e,data:o.slice(t,n)}),c=n}if(i.commentBytes=n.slice(r,r+i.fileCommentLength),i.comment=oie(i.commentBytes),s+=n.length,4294967295===i.uncompressedSize||4294967295===i.compressedSize||4294967295===i.relativeOffsetOfLocalHeader){const e=i.extraFields.find((e=>1===e.id));if(!e)throw new Error("expected zip64 extended information extra field");const t=e.data;let n=0;if(4294967295===i.uncompressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include uncompressed size");i.uncompressedSize=nie(t,n),n+=8}if(4294967295===i.compressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include compressed size");i.compressedSize=nie(t,n),n+=8}if(4294967295===i.relativeOffsetOfLocalHeader){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include relative header offset");i.relativeOffsetOfLocalHeader=nie(t,n),n+=8}}const u=i.extraFields.find((e=>28789===e.id&&e.data.length>=6&&1===e.data[0]&&iie(e.data,1)),eie(i.nameBytes));if(u&&(i.fileName=oie(u.data.slice(5))),0===i.compressionMethod){let e=i.uncompressedSize;if(1&i.generalPurposeBitFlag&&(e+=12),i.compressedSize!==e)throw new Error(`compressed size mismatch for stored file: ${i.compressedSize} != ${e}`)}l.push(i)}return{zip:{comment:r,commentBytes:o},entries:l.map((t=>new Kte(e,t)))}}async function cie(e,t){if(1&t.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const i=await Zte(e,t.relativeOffsetOfLocalHeader,30),n=await e.getLength(),r=iie(i,0);if(67324752!==r)throw new Error(`invalid local file header signature: 0x${r.toString(16)}`);const o=tie(i,26),s=tie(i,28),a=t.relativeOffsetOfLocalHeader+i.length+o+s;let l;if(0===t.compressionMethod)l=!1;else{if(8!==t.compressionMethod)throw new Error(`unsupported compression method: ${t.compressionMethod}`);l=!0}const c=a,u=c+t.compressedSize;if(0!==t.compressedSize&&u>n)throw new Error(`file data overflows file bounds: ${c} +  ${t.compressedSize}  > ${n}`);return{decompress:l,fileDataStart:c}}var uie,hie=wR.div(uie||(uie=kR(["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  width: 100%;\n  padding: 1em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"],["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  width: 100%;\n  padding: 1em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),die={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function pie(e){var t=function(e){if("number"==typeof e)return{value:e,unit:"px"};var t,i=(e.match(/^[0-9.]*/)||"").toString();t=i.includes(".")?parseFloat(i):parseInt(i,10);var n=(e.match(/[^0-9]*$/)||"").toString();return die[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var fie=function(){return fie=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},fie.apply(this,arguments)},gie=function(){var e="react-spinners-".concat("BounceLoader","-").concat("bounce");if("undefined"==typeof window||!window.document)return e;var t=document.createElement("style");document.head.appendChild(t);var i=t.sheet,n="\n    @keyframes ".concat(e," {\n      ").concat("0% {transform: scale(0)} 50% {transform: scale(1.0)} 100% {transform: scale(0)}","\n    }\n  ");return i&&i.insertRule(n,0),e}();function mie(e){var t=e.loading,i=void 0===t||t,n=e.color,o=void 0===n?"#000000":n,s=e.speedMultiplier,a=void 0===s?1:s,l=e.cssOverride,c=void 0===l?{}:l,u=e.size,h=void 0===u?60:u,d=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,["loading","color","speedMultiplier","cssOverride","size"]),p=function(e){var t=1===e?"".concat(1/a,"s"):"0s";return{position:"absolute",height:pie(h),width:pie(h),backgroundColor:o,borderRadius:"100%",opacity:.6,top:0,left:0,animationFillMode:"both",animation:"".concat(gie," ").concat(2.1/a,"s ").concat(t," infinite ease-in-out")}},f=fie({display:"inherit",position:"relative",width:pie(h),height:pie(h)},c);return i?r.createElement("span",fie({style:f},d),r.createElement("span",{style:p(1)}),r.createElement("span",{style:p(2)})):null}var _ie,vie=function(e){return r.createElement(hie,null,r.createElement(mie,{color:"#32cd32"}),r.createElement("p",null,e.statusMessage))},yie=wR.div(_ie||(_ie=kR(["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #f1f1f1;\n  color: #333;\n\n  @media (prefers-color-scheme: dark) {\n    background-color: #333;\n    color: #fff;\n  }\n"],["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #f1f1f1;\n  color: #333;\n\n  @media (prefers-color-scheme: dark) {\n    background-color: #333;\n    color: #fff;\n  }\n"])));function bie(e){return TR(this,void 0,void 0,(function(){var t,i,n;return IR(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),i=(t=URL).createObjectURL,[4,e.blob()];case 1:return[2,i.apply(t,[r.sent()])];case 2:throw n=r.sent(),console.error("Error reading entry: ".concat(n),n),n;case 3:return[2]}}))}))}var Aie,wie,xie=DM({tagName:"photogrammetry-viewer",elementClass:bte,react:r}),Sie=function(){function e(e,t){this.entries=e,this.skyBoxImage=t}return e.prototype.resolve2dFileURL=function(e){var t=null,i=Object.keys(this.entries)[0];if(e in this.entries)t=this.entries[e];else{for(var n=[".jpg",".png",".jpeg",".JPG",".PNG",".JPEG",".gif",".GIF"],r=0,o=["redof/","edof/",i+"redof/",i+"edof/"];r<o.length;r++)for(var s=o[r],a=0,l=n;a<l.length;a++){var c=s+e+l[a];if(c in this.entries){t=this.entries[c];break}}if(null==t)for(var u=0,h=Object.entries(this.entries);u<h.length;u++){var d=h[u],p=d[0],f=d[1];if(p.includes(e)){t=f;break}}}if(null!=t)return console.log("Resolved 2D file "+e+" to path in ZIP: "+t.name),bie(t);throw new Error("File not found in Zip: ".concat(e))},e}(),Cie=function(e){var t=(0,r.useState)(!1),i=t[0],n=t[1],o=(0,r.useState)("Downloading..."),s=o[0],a=o[1],l=(0,r.useState)(null),c=l[0],u=l[1],h=(0,r.useState)(""),d=h[0],p=h[1],f=(0,r.useState)(""),g=f[0],m=f[1],_=(0,r.useState)(void 0),v=_[0],y=_[1];function b(e,t){console.error("Error "+t+":",e),u(ER(e.message,1e3,"..."))}function A(e){a(e),console.log(e)}return(0,r.useEffect)((function(){i||(function(){TR(this,void 0,void 0,(function(){var t=this;return IR(this,(function(i){return function(e,t){var i=this;return caches.open("photogrammetry-viewer-cache").then((function(n){return n.match(e).then((function(r){return r?(console.log("Using cached response for "+e),r):fetch(e).then(function(e){let{defaultSize:t=0,emitDelay:i=10,onProgress:n=()=>null,onComplete:r=()=>null,onError:o=()=>null}=e;return function(e){if("undefined"==typeof Response||"undefined"==typeof ReadableStream)return e;const{body:s,headers:a,status:l}=e,c=a.get("content-length")||t,u=new Ste(c,i),h=s.getReader(),d=new ReadableStream({start(e){!function t(){h.read().then((i=>{let{done:o,value:s}=i;if(o)return r({}),void e.close();s&&u.flow(s,n),e.enqueue(s),t()})).catch((e=>{o(e)}))}()}});return new Response(d,{headers:a,status:l})}}(t)).then((function(t){return TR(i,void 0,void 0,(function(){var i;return IR(this,(function(r){switch(r.label){case 0:if(!e.startsWith("http:")&&!e.startsWith("https:"))return[3,4];console.info("Caching response for "+e),t.headers.append("cached-time",Date.now().toString()),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.put(e,t.clone())];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),console.error("Error caching response for ".concat(e,":"),i),[3,4];case 4:return[2,t]}}))}))}))}))}))}(e.src,{onProgress:function(e){a("Downloading... ".concat(Math.floor(e.percentage),"%"))}}).then((function(e){return e.blob()})).then((function(e){a("Decompressing..."),async function(e){const{zip:t,entries:i}=await async function(e){let t;if("undefined"!=typeof Blob&&e instanceof Blob)t=new Bte(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new kte(e);else if(Ite(e)||Ite(e.buffer))t=new kte(e);else if("string"==typeof e){const i=await fetch(e);if(!i.ok)throw new Error(`failed http request ${e}, status: ${i.status}: ${i.statusText}`);const n=await i.blob();t=new Bte(n)}else{if("function"!=typeof e.getLength||"function"!=typeof e.read)throw new Error("unsupported source type");t=e}const i=await t.getLength();if(i>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${i}. Only file sizes up 4503599627370496 bytes are supported`);return await async function(e,t){const i=Math.min(65557,t),n=t-i,r=await Zte(e,n,i);for(let o=i-22;o>=0;--o){if(101010256!==iie(r,o))continue;const t=new Uint8Array(r.buffer,r.byteOffset+o,r.byteLength-o),i=tie(t,4);if(0!==i)throw new Error(`multi-volume zip files are not supported. This is volume: ${i}`);const s=tie(t,10),a=iie(t,12),l=iie(t,16),c=tie(t,20),u=t.length-22;if(c!==u)throw new Error(`invalid comment length. expected: ${u}, actual: ${c}`);const h=new Uint8Array(t.buffer,t.byteOffset+22,c),d=oie(h);return 65535===s||4294967295===l?await sie(e,n+o,d,h):await lie(e,l,a,s,d,h)}throw new Error("could not find end of central directory. maybe not zip file")}(t,i)}(e);return{zip:t,entries:Object.fromEntries(i.map((e=>[e.name,e])))}}(e).then((function(e){return TR(t,[e],void 0,(function(e){var t,i,r,o,s,l,c,h,d,f,g,_,v,w,x=e.entries;return IR(this,(function(e){switch(e.label){case 0:a("Parsing files..."),t=!1,i=!1,console.log("Entries:",Object.keys(x)),r=null,o=0,s=Object.entries(x),e.label=1;case 1:if(!(o<s.length))return[3,13];if(l=s[o],c=l[0],h=l[1],!c.endsWith(".xml")||t)return[3,6];A("Loading camera info from "+c+"..."),e.label=2;case 2:return e.trys.push([2,4,,5]),d=p,[4,bie(h)];case 3:return d.apply(void 0,[e.sent()]),[3,5];case 4:return b(e.sent(),"converting XML to base64"),[3,5];case 5:t=!0,e.label=6;case 6:if(!c.endsWith(".gltf")&&!c.endsWith(".glb")||i)return[3,11];A("Loading 3D image from "+c+"..."),e.label=7;case 7:return e.trys.push([7,9,,10]),f=m,[4,bie(h)];case 8:return f.apply(void 0,[e.sent()]),[3,10];case 9:return b(e.sent(),"converting gltf to base64"),[3,10];case 10:i=!0,e.label=11;case 11:if(i&&t)return[3,13];e.label=12;case 12:return o++,[3,1];case 13:a("Looking for HDR image..."),g=0,_=["hdr.jpg","hdr.jpeg","hdr.png","HDR.jpg","HDR.jpeg","HDR.png"],e.label=14;case 14:if(!(g<_.length))return[3,19];if(!((v=_[g])in x))return[3,18];A("Loading HDR image from "+v+"..."),e.label=15;case 15:return e.trys.push([15,17,,18]),[4,bie(x[v])];case 16:return r=e.sent(),[3,18];case 17:return b(e.sent(),"converting HDR to base64"),[3,18];case 18:return g++,[3,14];case 19:return i&&t?(y(new Sie(x,r)),a("Loaded."),n(!0)):(w="Did not find required files in the package.",i||(w+="\n3D image data has not been found."),t||(w+="\nNo XML file with camera info has been found."),u(w),console.log(i,t)),[2]}}))}))})).catch((function(e){b(e,"decompressing zip file")}))})).catch((function(e){b(e,"loading file")})),[2]}))}))}(),caches.open("photogrammetry-viewer-cache").then((function(e){e.matchAll().then((function(t){t.forEach((function(t){var i,n=parseInt(null!==(i=t.headers.get("cached-time"))&&void 0!==i?i:Date.now().toString());(Date.now()-n)/1e3>360&&(console.log("Deleting outdated cache entry for "+t.url),e.delete(t.url))}))}))})))}),[e.src]),null!=c?r.createElement(yie,null,"Error: ",c):i?r.createElement(yie,null,r.createElement(xie,{src2D:"/",src3D:g,srcScanInformation:d,viewSettings:v,isYupTransformApplied:!0})):r.createElement(yie,null,r.createElement(vie,{statusMessage:s}))},Eie={exports:{}},Tie={},Iie=(wie||(wie=1,Eie.exports=(Aie||(Aie=1,Tie.ConcurrentRoot=1,Tie.ContinuousEventPriority=4,Tie.DefaultEventPriority=16,Tie.DiscreteEventPriority=1,Tie.IdleEventPriority=536870912,Tie.LegacyRoot=0),Tie)),Eie.exports);const Mie="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect,kie=[];function Bie(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r++)if(!i(e[r],t[r]))return!1;return!0}function Rie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of kie)if(Bie(t,s.keys,s.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!i)throw s.promise}const r={keys:t,equal:n.equal,remove:()=>{const e=kie.indexOf(r);-1!==e&&kie.splice(e,1)},promise:(o=e,"object"==typeof o&&"function"==typeof o.then?e:e(...t)).then((e=>{r.response=e,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))})).catch((e=>r.error=e))};var o;if(kie.push(r),!i)throw r.promise}const Pie=(e,t,i)=>Rie(e,t,!1,i);var Die,Lie,Oie,Fie,Nie={exports:{}},zie={exports:{}},Uie={};function Hie(){return Lie||(Lie=1,zie.exports=(Die||(Die=1,function(e){function t(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<r(o,t)))break e;e[n]=t,e[i]=o,i=n}}function i(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,s=o>>>1;n<s;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>r(l,i))c<o&&0>r(u,l)?(e[n]=u,e[c]=i,n=c):(e[n]=l,e[a]=i,n=a);else{if(!(c<o&&0>r(u,i)))break e;e[n]=u,e[c]=i,n=c}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,h=null,d=3,p=!1,f=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var r=i(c);null!==r;){if(null===r.callback)n(c);else{if(!(r.startTime<=e))break;n(c),r.sortIndex=r.expirationTime,t(l,r)}r=i(c)}}function b(e){if(g=!1,y(e),!f)if(null!==i(l))f=!0,R(A);else{var t=i(c);null!==t&&P(b,t.startTime-e)}}function A(t,r){f=!1,g&&(g=!1,_(C),C=-1),p=!0;var o=d;try{for(y(r),h=i(l);null!==h&&(!(h.expirationTime>r)||t&&!I());){var s=h.callback;if("function"==typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=r);r=e.unstable_now(),"function"==typeof a?h.callback=a:h===i(l)&&n(l),y(r)}else n(l);h=i(l)}if(null!==h)var u=!0;else{var m=i(c);null!==m&&P(b,m.startTime-r),u=!1}return u}finally{h=null,d=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,x=!1,S=null,C=-1,E=5,T=-1;function I(){return!(e.unstable_now()-T<E)}function M(){if(null!==S){var t=e.unstable_now();T=t;var i=!0;try{i=S(!0,t)}finally{i?w():(x=!1,S=null)}}else x=!1}if("function"==typeof v)w=function(){v(M)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,B=k.port2;k.port1.onmessage=M,w=function(){B.postMessage(null)}}else w=function(){m(M,0)};function R(e){S=e,x||(x=!0,w())}function P(t,i){C=m((function(){t(e.unstable_now())}),i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,R(A))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var i=d;d=t;try{return e()}finally{d=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=d;d=e;try{return t()}finally{d=i}},e.unstable_scheduleCallback=function(n,r,o){var s=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return n={id:u++,callback:r,priorityLevel:n,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(n.sortIndex=o,t(c,n),null===i(l)&&n===i(c)&&(g?(_(C),C=-1):g=!0,P(b,o-s))):(n.sortIndex=a,t(l,n),f||p||(f=!0,R(A))),n},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(e){var t=d;return function(){var i=d;d=t;try{return e.apply(this,arguments)}finally{d=i}}}}(Uie)),Uie)),zie.exports}var Vie;var $ie=XH((Vie||(Vie=1,Nie.exports=(Fie||(Fie=1,Oie=function(e){var t={},i=r,n=Hie(),o=Object.assign;function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),A=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}function x(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case m:return"Suspense";case _:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case g:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case v:return null!==(t=e.displayName||null)?t:x(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return x(e(t))}catch(e){}}return null}function S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function C(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function E(e){if(C(e)!==e)throw Error(s(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=C(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return E(r),e;if(o===n)return E(r),t;o=o.sibling}throw Error(s(188))}if(i.return!==n.return)i=r,n=o;else{for(var a=!1,l=r.child;l;){if(l===i){a=!0,i=r,n=o;break}if(l===n){a=!0,n=r,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,n=r;break}if(l===n){a=!0,n=o,i=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}function I(e){return null!==(e=T(e))?M(e):null}function M(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=M(e);if(null!==t)return t;e=e.sibling}return null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=k(e);if(null!==t)return t}e=e.sibling}return null}var B,R=Array.isArray,P=e.getPublicInstance,D=e.getRootHostContext,L=e.getChildHostContext,O=e.prepareForCommit,F=e.resetAfterCommit,N=e.createInstance,z=e.appendInitialChild,U=e.finalizeInitialChildren,H=e.prepareUpdate,V=e.shouldSetTextContent,$=e.createTextInstance,G=e.scheduleTimeout,Q=e.cancelTimeout,j=e.noTimeout,q=e.isPrimaryRenderer,W=e.supportsMutation,X=e.supportsPersistence,Y=e.supportsHydration,K=e.getInstanceFromNode,Z=e.preparePortalMount,J=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ie=e.scheduleMicrotask,ne=e.supportsTestSelectors,re=e.findFiberRoot,oe=e.getBoundingRect,se=e.getTextContent,ae=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,pe=e.commitTextUpdate,fe=e.commitMount,ge=e.commitUpdate,me=e.insertBefore,_e=e.insertInContainerBefore,ve=e.removeChild,ye=e.removeChildFromContainer,be=e.resetTextContent,Ae=e.hideInstance,we=e.hideTextInstance,xe=e.unhideInstance,Se=e.unhideTextInstance,Ce=e.clearContainer,Ee=e.cloneInstance,Te=e.createContainerChildSet,Ie=e.appendChildToContainerChildSet,Me=e.finalizeContainerChildren,ke=e.replaceContainerChildren,Be=e.cloneHiddenInstance,Re=e.cloneHiddenTextInstance,Pe=e.canHydrateInstance,De=e.canHydrateTextInstance,Le=e.canHydrateSuspenseInstance,Oe=e.isSuspenseInstancePending,Fe=e.isSuspenseInstanceFallback,Ne=e.registerSuspenseInstanceRetry,ze=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,He=e.getFirstHydratableChildWithinContainer,Ve=e.getFirstHydratableChildWithinSuspenseInstance,$e=e.hydrateInstance,Ge=e.hydrateTextInstance,Qe=e.hydrateSuspenseInstance,je=e.getNextHydratableInstanceAfterSuspenseInstance,qe=e.commitHydratedContainer,We=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,Ye=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var tt=!1;function it(e,t){if(!e||tt)return"";tt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var r=t.stack.split("\n"),o=n.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{tt=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?et(e):""}var nt=Object.prototype.hasOwnProperty,rt=[],ot=-1;function st(e){return{current:e}}function at(e){0>ot||(e.current=rt[ot],rt[ot]=null,ot--)}function lt(e,t){ot++,rt[ot]=e.current,e.current=t}var ct={},ut=st(ct),ht=st(!1),dt=ct;function pt(e,t){var i=e.type.contextTypes;if(!i)return ct;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ft(e){return null!=e.childContextTypes}function gt(){at(ht),at(ut)}function mt(e,t,i){if(ut.current!==ct)throw Error(s(168));lt(ut,t),lt(ht,i)}function _t(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(s(108,S(e)||"Unknown",r));return o({},i,n)}function vt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(ht,ht.current),!0}function yt(e,t,i){var n=e.stateNode;if(!n)throw Error(s(169));i?(e=_t(e,t,dt),n.__reactInternalMemoizedMergedChildContext=e,at(ht),at(ut),lt(ut,e)):at(ht),lt(ht,i)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(At(e)/wt|0)|0},At=Math.log,wt=Math.LN2,xt=64,St=4194304;function Ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Et(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&i;if(0!==s){var a=s&~r;0!==a?n=Ct(a):0!==(o&=s)&&(n=Ct(o))}else 0!==(s=i&~r)?n=Ct(s):0!==o&&(n=Ct(o));if(0===n)return 0;if(0!==t&&t!==n&&!(t&r)&&((r=n&-n)>=(o=t&-t)||16===r&&4194240&o))return t;if(4&n&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-bt(t)),n|=e[i],t&=~r;return n}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function It(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function kt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=i}function Bt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-bt(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var Rt=0;function Pt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Dt=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,Ot=n.unstable_shouldYield,Ft=n.unstable_requestPaint,Nt=n.unstable_now,zt=n.unstable_ImmediatePriority,Ut=n.unstable_UserBlockingPriority,Ht=n.unstable_NormalPriority,Vt=n.unstable_IdlePriority,$t=null,Gt=null,Qt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},jt=null,qt=!1,Wt=!1;function Xt(e){null===jt?jt=[e]:jt.push(e)}function Yt(){if(!Wt&&null!==jt){Wt=!0;var e=0,t=Rt;try{var i=jt;for(Rt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}jt=null,qt=!1}catch(t){throw null!==jt&&(jt=jt.slice(e+1)),Dt(zt,Yt),t}finally{Rt=t,Wt=!1}}return null}var Kt=a.ReactCurrentBatchConfig;function Zt(e,t){if(Qt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!nt.call(t,r)||!Qt(e[r],t[r]))return!1}return!0}function Jt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);default:return""}}function ei(e,t){if(e&&e.defaultProps){for(var i in t=o({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var ti=st(null),ii=null,ni=null,ri=null;function oi(){ri=ni=ii=null}function si(e,t,i){q?(lt(ti,t._currentValue),t._currentValue=i):(lt(ti,t._currentValue2),t._currentValue2=i)}function ai(e){var t=ti.current;at(ti),q?e._currentValue=t:e._currentValue2=t}function li(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function ci(e,t){ii=e,ri=ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Or=!0),e.firstContext=null)}function ui(e){var t=q?e._currentValue:e._currentValue2;if(ri!==e)if(e={context:e,memoizedValue:t,next:null},null===ni){if(null===ii)throw Error(s(308));ni=e,ii.dependencies={lanes:0,firstContext:e}}else ni=ni.next=e;return t}var hi=null,di=!1;function pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mi(e,t){var i=e.updateQueue;null!==i&&(i=i.shared,null!==Xo&&1&e.mode&&!(2&Wo)?(null===(e=i.interleaved)?(t.next=t,null===hi?hi=[i]:hi.push(i)):(t.next=e.next,e.next=t),i.interleaved=t):(null===(e=i.pending)?t.next=t:(t.next=e.next,e.next=t),i.pending=t))}function _i(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Bt(e,i)}}function vi(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=s:o=o.next=s,i=i.next}while(null!==i);null===o?r=o=t:o=o.next=t}else r=o=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function yi(e,t,i,n){var r=e.updateQueue;di=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var h=e.alternate;null!==h&&(l=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c)}if(null!==s){var d=r.baseState;for(a=0,h=u=c=null,l=s;;){var p=l.lane,f=l.eventTime;if((n&p)===p){null!==h&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(p=t,f=i,m.tag){case 1:if("function"==typeof(g=m.payload)){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(p="function"==typeof(g=m.payload)?g.call(f,d,p):g))break e;d=o({},d,p);break e;case 2:di=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=f,c=d):h=h.next=f,a|=p;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(p=l).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===h&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);is|=a,e.lanes=a,e.memoizedState=d}}function bi(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!=typeof r)throw Error(s(191,r));r.call(n)}}}var Ai=(new i.Component).refs;function wi(e,t,i,n){i=null==(i=i(n,t=e.memoizedState))?t:o({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var xi={isMounted:function(e){return!!(e=e._reactInternals)&&C(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=As(),r=ws(e),o=gi(n,r);o.payload=t,null!=i&&(o.callback=i),mi(e,o),null!==(t=xs(e,r,n))&&_i(t,e,r)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=As(),r=ws(e),o=gi(n,r);o.tag=1,o.payload=t,null!=i&&(o.callback=i),mi(e,o),null!==(t=xs(e,r,n))&&_i(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=As(),n=ws(e),r=gi(i,n);r.tag=2,null!=t&&(r.callback=t),mi(e,r),null!==(t=xs(e,n,i))&&_i(t,e,n)}};function Si(e,t,i,n,r,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!t.prototype||!t.prototype.isPureReactComponent||!Zt(i,n)||!Zt(r,o)}function Ci(e,t,i){var n=!1,r=ct,o=t.contextType;return"object"==typeof o&&null!==o?o=ui(o):(r=ft(t)?dt:ut.current,o=(n=null!=(n=t.contextTypes))?pt(e,r):ct),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=xi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ei(e,t,i,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&xi.enqueueReplaceState(t,t.state,null)}function Ti(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=Ai,pi(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=ui(o):(o=ft(t)?dt:ut.current,r.context=pt(e,o)),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(wi(e,t,o,i),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&xi.enqueueReplaceState(r,r.state,null),yi(e,i,r,n),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4194308)}var Ii=[],Mi=0,ki=null,Bi=0,Ri=[],Pi=0,Di=null,Li=1,Oi="";function Fi(e,t){Ii[Mi++]=Bi,Ii[Mi++]=ki,ki=e,Bi=t}function Ni(e,t,i){Ri[Pi++]=Li,Ri[Pi++]=Oi,Ri[Pi++]=Di,Di=e;var n=Li;e=Oi;var r=32-bt(n)-1;n&=~(1<<r),i+=1;var o=32-bt(t)+r;if(30<o){var s=r-r%5;o=(n&(1<<s)-1).toString(32),n>>=s,r-=s,Li=1<<32-bt(t)+r|i<<r|n,Oi=o+e}else Li=1<<o|i<<r|n,Oi=e}function zi(e){null!==e.return&&(Fi(e,1),Ni(e,1,0))}function Ui(e){for(;e===ki;)ki=Ii[--Mi],Ii[Mi]=null,Bi=Ii[--Mi],Ii[Mi]=null;for(;e===Di;)Di=Ri[--Pi],Ri[Pi]=null,Oi=Ri[--Pi],Ri[Pi]=null,Li=Ri[--Pi],Ri[Pi]=null}var Hi=null,Vi=null,$i=!1,Gi=!1,Qi=null;function ji(e,t){var i=Zs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function qi(e,t){switch(e.tag){case 5:return null!==(t=Pe(t,e.type,e.pendingProps))&&(e.stateNode=t,Hi=e,Vi=Ue(t),!0);case 6:return null!==(t=De(t,e.pendingProps))&&(e.stateNode=t,Hi=e,Vi=null,!0);case 13:if(null!==(t=Le(t))){var i=null!==Di?{id:Li,overflow:Oi}:null;return e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Zs(18,null,null,0)).stateNode=t,i.return=e,e.child=i,Hi=e,Vi=null,!0}return!1;default:return!1}}function Wi(e){return!(!(1&e.mode)||128&e.flags)}function Xi(e){if($i){var t=Vi;if(t){var i=t;if(!qi(e,t)){if(Wi(e))throw Error(s(418));t=ze(i);var n=Hi;t&&qi(e,t)?ji(n,i):(e.flags=-4097&e.flags|2,$i=!1,Hi=e)}}else{if(Wi(e))throw Error(s(418));e.flags=-4097&e.flags|2,$i=!1,Hi=e}}}function Yi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hi=e}function Ki(e){if(!Y||e!==Hi)return!1;if(!$i)return Yi(e),$i=!0,!1;if(3!==e.tag&&(5!==e.tag||Ke(e.type)&&!V(e.type,e.memoizedProps))){var t=Vi;if(t){if(Wi(e)){for(e=Vi;e;)e=ze(e);throw Error(s(418))}for(;t;)ji(e,t),t=ze(t)}}if(Yi(e),13===e.tag){if(!Y)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Vi=je(e)}else Vi=Hi?ze(e.stateNode):null;return!0}function Zi(){Y&&(Vi=Hi=null,Gi=$i=!1)}function Ji(e){null===Qi?Qi=[e]:Qi.push(e)}function en(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var n=i.stateNode}if(!n)throw Error(s(147,e));var r=n,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ai&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function tn(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nn(e){return(0,e._init)(e._payload)}function rn(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=ea(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,i,n){return null===t||6!==t.tag?((t=ra(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function d(e,t,i,n){var o=i.type;return o===u?f(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===y&&nn(o)===t.type)?((n=r(t,i.props)).ref=en(e,t,i),n.return=e,n):((n=ta(i.type,i.key,i.props,null,e.mode,n)).ref=en(e,t,i),n.return=e,n)}function p(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=oa(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function f(e,t,i,n,o){return null===t||7!==t.tag?((t=ia(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function g(e,t,i){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ra(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(i=ta(t.type,t.key,t.props,null,e.mode,i)).ref=en(e,null,t),i.return=e,i;case c:return(t=oa(t,e.mode,i)).return=e,t;case y:return g(e,(0,t._init)(t._payload),i)}if(R(t)||w(t))return(t=ia(t,e.mode,i,null)).return=e,t;tn(e,t)}return null}function m(e,t,i,n){var r=null!==t?t.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==r?null:h(e,t,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case l:return i.key===r?d(e,t,i,n):null;case c:return i.key===r?p(e,t,i,n):null;case y:return m(e,t,(r=i._init)(i._payload),n)}if(R(i)||w(i))return null!==r?null:f(e,t,i,n,null);tn(e,i)}return null}function _(e,t,i,n,r){if("string"==typeof n&&""!==n||"number"==typeof n)return h(t,e=e.get(i)||null,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return d(t,e=e.get(null===n.key?i:n.key)||null,n,r);case c:return p(t,e=e.get(null===n.key?i:n.key)||null,n,r);case y:return _(e,t,i,(0,n._init)(n._payload),r)}if(R(n)||w(n))return f(t,e=e.get(i)||null,n,r,null);tn(t,n)}return null}function v(r,s,a,l){for(var c=null,u=null,h=s,d=s=0,p=null;null!==h&&d<a.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var f=m(r,h,a[d],l);if(null===f){null===h&&(h=p);break}e&&h&&null===f.alternate&&t(r,h),s=o(f,s,d),null===u?c=f:u.sibling=f,u=f,h=p}if(d===a.length)return i(r,h),$i&&Fi(r,d),c;if(null===h){for(;d<a.length;d++)null!==(h=g(r,a[d],l))&&(s=o(h,s,d),null===u?c=h:u.sibling=h,u=h);return $i&&Fi(r,d),c}for(h=n(r,h);d<a.length;d++)null!==(p=_(h,r,d,a[d],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?d:p.key),s=o(p,s,d),null===u?c=p:u.sibling=p,u=p);return e&&h.forEach((function(e){return t(r,e)})),$i&&Fi(r,d),c}function b(r,a,l,c){var u=w(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,d=a,p=a=0,f=null,v=l.next();null!==d&&!v.done;p++,v=l.next()){d.index>p?(f=d,d=null):f=d.sibling;var y=m(r,d,v.value,c);if(null===y){null===d&&(d=f);break}e&&d&&null===y.alternate&&t(r,d),a=o(y,a,p),null===h?u=y:h.sibling=y,h=y,d=f}if(v.done)return i(r,d),$i&&Fi(r,p),u;if(null===d){for(;!v.done;p++,v=l.next())null!==(v=g(r,v.value,c))&&(a=o(v,a,p),null===h?u=v:h.sibling=v,h=v);return $i&&Fi(r,p),u}for(d=n(r,d);!v.done;p++,v=l.next())null!==(v=_(d,r,p,v.value,c))&&(e&&null!==v.alternate&&d.delete(null===v.key?p:v.key),a=o(v,a,p),null===h?u=v:h.sibling=v,h=v);return e&&d.forEach((function(e){return t(r,e)})),$i&&Fi(r,p),u}return function e(n,o,s,h){if("object"==typeof s&&null!==s&&s.type===u&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case l:e:{for(var d=s.key,p=o;null!==p;){if(p.key===d){if((d=s.type)===u){if(7===p.tag){i(n,p.sibling),(o=r(p,s.props.children)).return=n,n=o;break e}}else if(p.elementType===d||"object"==typeof d&&null!==d&&d.$$typeof===y&&nn(d)===p.type){i(n,p.sibling),(o=r(p,s.props)).ref=en(n,p,s),o.return=n,n=o;break e}i(n,p);break}t(n,p),p=p.sibling}s.type===u?((o=ia(s.props.children,n.mode,h,s.key)).return=n,n=o):((h=ta(s.type,s.key,s.props,null,n.mode,h)).ref=en(n,o,s),h.return=n,n=h)}return a(n);case c:e:{for(p=s.key;null!==o;){if(o.key===p){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){i(n,o.sibling),(o=r(o,s.children||[])).return=n,n=o;break e}i(n,o);break}t(n,o),o=o.sibling}(o=oa(s,n.mode,h)).return=n,n=o}return a(n);case y:return e(n,o,(p=s._init)(s._payload),h)}if(R(s))return v(n,o,s,h);if(w(s))return b(n,o,s,h);tn(n,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==o&&6===o.tag?(i(n,o.sibling),(o=r(o,s)).return=n,n=o):(i(n,o),(o=ra(s,n.mode,h)).return=n,n=o),a(n)):i(n,o)}}var on=rn(!0),sn=rn(!1),an={},ln=st(an),cn=st(an),un=st(an);function hn(e){if(e===an)throw Error(s(174));return e}function dn(e,t){lt(un,t),lt(cn,e),lt(ln,an),e=D(t),at(ln),lt(ln,e)}function pn(){at(ln),at(cn),at(un)}function fn(e){var t=hn(un.current),i=hn(ln.current);i!==(t=L(i,e.type,t))&&(lt(cn,e),lt(ln,t))}function gn(e){cn.current===e&&(at(ln),at(cn))}var mn=st(0);function _n(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Oe(i)||Fe(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vn=[];function yn(){for(var e=0;e<vn.length;e++){var t=vn[e];q?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}vn.length=0}var bn=a.ReactCurrentDispatcher,An=a.ReactCurrentBatchConfig,wn=0,xn=null,Sn=null,Cn=null,En=!1,Tn=!1,In=0,Mn=0;function kn(){throw Error(s(321))}function Bn(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Qt(e[i],t[i]))return!1;return!0}function Rn(e,t,i,n,r,o){if(wn=o,xn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bn.current=null===e||null===e.memoizedState?fr:gr,e=i(n,r),Tn){o=0;do{if(Tn=!1,In=0,25<=o)throw Error(s(301));o+=1,Cn=Sn=null,t.updateQueue=null,bn.current=mr,e=i(n,r)}while(Tn)}if(bn.current=pr,t=null!==Sn&&null!==Sn.next,wn=0,Cn=Sn=xn=null,En=!1,t)throw Error(s(300));return e}function Pn(){var e=0!==In;return In=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Cn?xn.memoizedState=Cn=e:Cn=Cn.next=e,Cn}function Ln(){if(null===Sn){var e=xn.alternate;e=null!==e?e.memoizedState:null}else e=Sn.next;var t=null===Cn?xn.memoizedState:Cn.next;if(null!==t)Cn=t,Sn=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Sn=e).memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},null===Cn?xn.memoizedState=Cn=e:Cn=Cn.next=e}return Cn}function On(e,t){return"function"==typeof t?t(e):t}function Fn(e){var t=Ln(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=Sn,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}n.baseQueue=r=o,i.pending=null}if(null!==r){o=r.next,n=n.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((wn&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=n):c=c.next=d,xn.lanes|=h,is|=h}u=u.next}while(null!==u&&u!==o);null===c?a=n:c.next=l,Qt(n,t.memoizedState)||(Or=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{o=r.lane,xn.lanes|=o,is|=o,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Nn(e){var t=Ln(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);Qt(o,t.memoizedState)||(Or=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function zn(){}function Un(e,t){var i=xn,n=Ln(),r=t(),o=!Qt(n.memoizedState,r);if(o&&(n.memoizedState=r,Or=!0),n=n.queue,Kn($n.bind(null,i,n,e),[e]),n.getSnapshot!==t||o||null!==Cn&&1&Cn.memoizedState.tag){if(i.flags|=2048,jn(9,Vn.bind(null,i,n,r,t),void 0,null),null===Xo)throw Error(s(349));30&wn||Hn(i,t,r)}return r}function Hn(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=xn.updateQueue)?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Vn(e,t,i,n){t.value=i,t.getSnapshot=n,Gn(t)&&xs(e,1,-1)}function $n(e,t,i){return i((function(){Gn(t)&&xs(e,1,-1)}))}function Gn(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Qt(e,i)}catch(e){return!0}}function Qn(e){var t=Dn();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,xn,e),[t.memoizedState,e]}function jn(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=xn.updateQueue)?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function qn(){return Ln().memoizedState}function Wn(e,t,i,n){var r=Dn();xn.flags|=e,r.memoizedState=jn(1|t,i,void 0,void 0===n?null:n)}function Xn(e,t,i,n){var r=Ln();n=void 0===n?null:n;var o=void 0;if(null!==Sn){var s=Sn.memoizedState;if(o=s.destroy,null!==n&&Bn(n,s.deps))return void(r.memoizedState=jn(t,i,o,n))}xn.flags|=e,r.memoizedState=jn(1|t,i,o,n)}function Yn(e,t){return Wn(8390656,8,e,t)}function Kn(e,t){return Xn(2048,8,e,t)}function Zn(e,t){return Xn(4,2,e,t)}function Jn(e,t){return Xn(4,4,e,t)}function er(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,i){return i=null!=i?i.concat([e]):null,Xn(4,4,er.bind(null,t,e),i)}function ir(){}function nr(e,t){var i=Ln();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Bn(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function rr(e,t){var i=Ln();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Bn(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function or(e,t){var i=Rt;Rt=0!==i&&4>i?i:4,e(!0);var n=An.transition;An.transition={};try{e(!1),t()}finally{Rt=i,An.transition=n}}function sr(){return Ln().memoizedState}function ar(e,t,i){var n=ws(e);i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,i):(hr(e,t,i),null!==(e=xs(e,n,i=As()))&&dr(e,t,n))}function lr(e,t,i){var n=ws(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{hr(e,t,r);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,i);if(r.hasEagerState=!0,r.eagerState=a,Qt(a,s))return}catch(e){}null!==(e=xs(e,n,i=As()))&&dr(e,t,n)}}function cr(e){var t=e.alternate;return e===xn||null!==t&&t===xn}function ur(e,t){Tn=En=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function hr(e,t,i){null!==Xo&&1&e.mode&&!(2&Wo)?(null===(e=t.interleaved)?(i.next=i,null===hi?hi=[t]:hi.push(t)):(i.next=e.next,e.next=i),t.interleaved=i):(null===(e=t.pending)?i.next=i:(i.next=e.next,e.next=i),t.pending=i)}function dr(e,t,i){if(4194240&i){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Bt(e,i)}}var pr={readContext:ui,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},fr={readContext:ui,useCallback:function(e,t){return Dn().memoizedState=[e,void 0===t?null:t],e},useContext:ui,useEffect:Yn,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,Wn(4194308,4,er.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Wn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wn(4,2,e,t)},useMemo:function(e,t){var i=Dn();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Dn();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ar.bind(null,xn,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Dn().memoizedState=e},useState:Qn,useDebugValue:ir,useDeferredValue:function(e){var t=Qn(e),i=t[0],n=t[1];return Yn((function(){var t=An.transition;An.transition={};try{n(e)}finally{An.transition=t}}),[e]),i},useTransition:function(){var e=Qn(!1),t=e[0];return e=or.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=xn,r=Dn();if($i){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===Xo)throw Error(s(349));30&wn||Hn(n,t,i)}r.memoizedState=i;var o={value:i,getSnapshot:t};return r.queue=o,Yn($n.bind(null,n,o,e),[e]),n.flags|=2048,jn(9,Vn.bind(null,n,o,i,t),void 0,null),i},useId:function(){var e=Dn(),t=Xo.identifierPrefix;if($i){var i=Oi;t=":"+t+"R"+(i=(Li&~(1<<32-bt(Li)-1)).toString(32)+i),0<(i=In++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=Mn++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gr={readContext:ui,useCallback:nr,useContext:ui,useEffect:Kn,useImperativeHandle:tr,useInsertionEffect:Zn,useLayoutEffect:Jn,useMemo:rr,useReducer:Fn,useRef:qn,useState:function(){return Fn(On)},useDebugValue:ir,useDeferredValue:function(e){var t=Fn(On),i=t[0],n=t[1];return Kn((function(){var t=An.transition;An.transition={};try{n(e)}finally{An.transition=t}}),[e]),i},useTransition:function(){return[Fn(On)[0],Ln().memoizedState]},useMutableSource:zn,useSyncExternalStore:Un,useId:sr,unstable_isNewReconciler:!1},mr={readContext:ui,useCallback:nr,useContext:ui,useEffect:Kn,useImperativeHandle:tr,useInsertionEffect:Zn,useLayoutEffect:Jn,useMemo:rr,useReducer:Nn,useRef:qn,useState:function(){return Nn(On)},useDebugValue:ir,useDeferredValue:function(e){var t=Nn(On),i=t[0],n=t[1];return Kn((function(){var t=An.transition;An.transition={};try{n(e)}finally{An.transition=t}}),[e]),i},useTransition:function(){return[Nn(On)[0],Ln().memoizedState]},useMutableSource:zn,useSyncExternalStore:Un,useId:sr,unstable_isNewReconciler:!1};function _r(e,t){try{var i="",n=t;do{i+=Jt(n),n=n.return}while(n);var r=i}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r}}function vr(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var yr,br,Ar,wr,xr="function"==typeof WeakMap?WeakMap:Map;function Sr(e,t,i){(i=gi(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){hs||(hs=!0,ds=n),vr(0,t)},i}function Cr(e,t,i){(i=gi(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){vr(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(i.callback=function(){vr(0,t),"function"!=typeof n&&(null===ps?ps=new Set([this]):ps.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function Er(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new xr;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=js.bind(null,e,t,i),t.then(e,e))}function Tr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ir(e,t,i,n,r){return 1&e.mode?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=gi(-1,1)).tag=2,mi(i,t))),i.lanes|=1),e)}function Mr(e){e.flags|=4}function kr(e,t){if(null!==e&&e.child===t.child)return!0;if(16&t.flags)return!1;for(e=t.child;null!==e;){if(12854&e.flags||12854&e.subtreeFlags)return!1;e=e.sibling}return!0}if(W)yr=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)z(e,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},br=function(){},Ar=function(e,t,i,n,r){if((e=e.memoizedProps)!==n){var o=t.stateNode,s=hn(ln.current);i=H(o,i,e,n,r,s),(t.updateQueue=i)&&Mr(t)}},wr=function(e,t,i,n){i!==n&&Mr(t)};else if(X){yr=function(e,t,i,n){for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;i&&n&&(o=Be(o,r.type,r.memoizedProps,r)),z(e,o)}else if(6===r.tag)o=r.stateNode,i&&n&&(o=Re(o,r.memoizedProps,r)),z(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),yr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Br=function(e,t,i,n){for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;i&&n&&(o=Be(o,r.type,r.memoizedProps,r)),Ie(e,o)}else if(6===r.tag)o=r.stateNode,i&&n&&(o=Re(o,r.memoizedProps,r)),Ie(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),Br(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};br=function(e,t){var i=t.stateNode;if(!kr(e,t)){e=i.containerInfo;var n=Te(e);Br(n,t,!1,!1),i.pendingChildren=n,Mr(t),Me(e,n)}},Ar=function(e,t,i,n,r){var o=e.stateNode,s=e.memoizedProps;if((e=kr(e,t))&&s===n)t.stateNode=o;else{var a=t.stateNode,l=hn(ln.current),c=null;s!==n&&(c=H(a,i,s,n,r,l)),e&&null===c?t.stateNode=o:(o=Ee(o,c,i,s,n,t,e,a),U(o,i,n,r,l)&&Mr(t),t.stateNode=o,e?Mr(t):yr(o,t,!1,!1))}},wr=function(e,t,i,n){i!==n?(e=hn(un.current),i=hn(ln.current),t.stateNode=$(n,e,i,t),Mr(t)):t.stateNode=e.stateNode}}else br=function(){},Ar=function(){},wr=function(){};function Rr(e,t){if(!$i)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pr(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Dr(e,t,i){var n=t.pendingProps;switch(Ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(t),null;case 1:case 17:return ft(t.type)&&gt(),Pr(t),null;case 3:return n=t.stateNode,pn(),at(ht),at(ut),yn(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Ki(t)?Mr(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Qi&&(Is(Qi),Qi=null))),br(e,t),Pr(t),null;case 5:gn(t),i=hn(un.current);var r=t.type;if(null!==e&&null!=t.stateNode)Ar(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Pr(t),null}if(e=hn(ln.current),Ki(t)){if(!Y)throw Error(s(175));e=$e(t.stateNode,t.type,t.memoizedProps,i,e,t,!Gi),t.updateQueue=e,null!==e&&Mr(t)}else{var o=N(r,n,i,e,t);yr(o,t,!1,!1),t.stateNode=o,U(o,r,n,i,e)&&Mr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Pr(t),null;case 6:if(e&&null!=t.stateNode)wr(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));if(e=hn(un.current),i=hn(ln.current),Ki(t)){if(!Y)throw Error(s(176));if(e=t.stateNode,n=t.memoizedProps,(i=Ge(e,n,t,!Gi))&&null!==(r=Hi))switch(o=!!(1&r.mode),r.tag){case 3:Ze(r.stateNode.containerInfo,e,n,o);break;case 5:Je(r.type,r.memoizedProps,r.stateNode,e,n,o)}i&&Mr(t)}else t.stateNode=$(n,e,i,t)}return Pr(t),null;case 13:if(at(mn),n=t.memoizedState,$i&&null!==Vi&&1&t.mode&&!(128&t.flags)){for(e=Vi;e;)e=ze(e);return Zi(),t.flags|=98560,t}if(null!==n&&null!==n.dehydrated){if(n=Ki(t),null===e){if(!n)throw Error(s(318));if(!Y)throw Error(s(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(317));Qe(e,t)}else Zi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Pr(t),null}return null!==Qi&&(Is(Qi),Qi=null),128&t.flags?(t.lanes=i,t):(n=null!==n,i=!1,null===e?Ki(t):i=null!==e.memoizedState,n&&!i&&(t.child.flags|=8192,1&t.mode&&(null===e||1&mn.current?0===es&&(es=3):Os())),null!==t.updateQueue&&(t.flags|=4),Pr(t),null);case 4:return pn(),br(e,t),null===e&&Z(t.stateNode.containerInfo),Pr(t),null;case 10:return ai(t.type._context),Pr(t),null;case 19:if(at(mn),null===(r=t.memoizedState))return Pr(t),null;if(n=!!(128&t.flags),null===(o=r.rendering))if(n)Rr(r,!1);else{if(0!==es||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=_n(e))){for(t.flags|=128,Rr(r,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=i,n=t.child;null!==n;)r=e,(i=n).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),n=n.sibling;return lt(mn,1&mn.current|2),t.child}e=e.sibling}null!==r.tail&&Nt()>ls&&(t.flags|=128,n=!0,Rr(r,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=_n(o))){if(t.flags|=128,n=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Rr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!$i)return Pr(t),null}else 2*Nt()-r.renderingStartTime>ls&&1073741824!==i&&(t.flags|=128,n=!0,Rr(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=r.last)?e.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nt(),t.sibling=null,e=mn.current,lt(mn,n?1&e|2:1&e),t):(Pr(t),null);case 22:case 23:return Rs(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Zo)&&(Pr(t),W&&6&t.subtreeFlags&&(t.flags|=8192)):Pr(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}var Lr=a.ReactCurrentOwner,Or=!1;function Fr(e,t,i,n){t.child=null===e?sn(t,null,i,n):on(t,e.child,i,n)}function Nr(e,t,i,n,r){i=i.render;var o=t.ref;return ci(t,r),n=Rn(e,t,i,n,o,r),i=Pn(),null===e||Or?($i&&i&&zi(t),t.flags|=1,Fr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ro(e,t,r))}function zr(e,t,i,n,r){if(null===e){var o=i.type;return"function"!=typeof o||Js(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=ta(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ur(e,t,o,n,r))}if(o=e.child,!(e.lanes&r)){var s=o.memoizedProps;if((i=null!==(i=i.compare)?i:Zt)(s,n)&&e.ref===t.ref)return ro(e,t,r)}return t.flags|=1,(e=ea(o,n)).ref=t.ref,e.return=t,t.child=e}function Ur(e,t,i,n,r){if(null!==e&&Zt(e.memoizedProps,n)&&e.ref===t.ref){if(Or=!1,!(e.lanes&r))return t.lanes=e.lanes,ro(e,t,r);131072&e.flags&&(Or=!0)}return $r(e,t,i,n,r)}function Hr(e,t,i){var n=t.pendingProps,r=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Jo,Zo),Zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null},n=null!==o?o.baseLanes:i,lt(Jo,Zo),Zo|=n}else t.memoizedState={baseLanes:0,cachePool:null},lt(Jo,Zo),Zo|=i;else null!==o?(n=o.baseLanes|i,t.memoizedState=null):n=i,lt(Jo,Zo),Zo|=n;return Fr(e,t,r,i),t.child}function Vr(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function $r(e,t,i,n,r){var o=ft(i)?dt:ut.current;return o=pt(t,o),ci(t,r),i=Rn(e,t,i,n,o,r),n=Pn(),null===e||Or?($i&&n&&zi(t),t.flags|=1,Fr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ro(e,t,r))}function Gr(e,t,i,n,r){if(ft(i)){var o=!0;vt(t)}else o=!1;if(ci(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Ci(t,i,n),Ti(t,i,n,r),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=i.contextType;c="object"==typeof c&&null!==c?ui(c):pt(t,c=ft(i)?dt:ut.current);var u=i.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&Ei(t,s,n,c),di=!1;var d=t.memoizedState;s.state=d,yi(t,n,s,r),l=t.memoizedState,a!==n||d!==l||ht.current||di?("function"==typeof u&&(wi(t,i,u,n),l=t.memoizedState),(a=di||Si(t,i,a,n,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,fi(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ei(t.type,a),s.props=c,h=t.pendingProps,d=s.context,l="object"==typeof(l=i.contextType)&&null!==l?ui(l):pt(t,l=ft(i)?dt:ut.current);var p=i.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Ei(t,s,n,l),di=!1,d=t.memoizedState,s.state=d,yi(t,n,s,r);var f=t.memoizedState;a!==h||d!==f||ht.current||di?("function"==typeof p&&(wi(t,i,p,n),f=t.memoizedState),(c=di||Si(t,i,c,n,d,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Qr(e,t,i,n,o,r)}function Qr(e,t,i,n,r,o){Vr(e,t);var s=!!(128&t.flags);if(!n&&!s)return r&&yt(t,i,!1),ro(e,t,o);n=t.stateNode,Lr.current=t;var a=s&&"function"!=typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=on(t,e.child,null,o),t.child=on(t,null,a,o)):Fr(e,t,a,o),t.memoizedState=n.state,r&&yt(t,i,!0),t.child}function jr(e){var t=e.stateNode;t.pendingContext?mt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mt(0,t.context,!1),dn(e,t.containerInfo)}function qr(e,t,i,n,r){return Zi(),Ji(r),t.flags|=256,Fr(e,t,i,n),t.child}var Wr={dehydrated:null,treeContext:null,retryLane:0};function Xr(e){return{baseLanes:e,cachePool:null}}function Yr(e,t,i){var n,r=t.pendingProps,o=mn.current,a=!1,l=!!(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&!!(2&o)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(mn,1&o),null===e)return Xi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?Fe(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},1&r||null===a?a=na(o,r,0,null):(a.childLanes=0,a.pendingProps=o),e=ia(e,r,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Xr(i),t.memoizedState=Wr,e):Kr(t,o));if(null!==(o=e.memoizedState)){if(null!==(n=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,eo(e,t,i,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=na({mode:"visible",children:r.children},o,0,null),(a=ia(a,o,i,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&on(t,e.child,null,i),t.child.memoizedState=Xr(i),t.memoizedState=Wr,a);if(1&t.mode)if(Fe(n))t=eo(e,t,i,Error(s(419)));else if(r=!!(i&e.childLanes),Or||r){if(null!==(r=Xo)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(r=a&(r.suspendedLanes|i)?0:a)&&r!==o.retryLane&&(o.retryLane=r,xs(e,r,-1))}Os(),t=eo(e,t,i,Error(s(421)))}else Oe(n)?(t.flags|=128,t.child=e.child,t=Ws.bind(null,e),Ne(n,t),t=null):(i=o.treeContext,Y&&(Vi=Ve(n),Hi=t,$i=!0,Qi=null,Gi=!1,null!==i&&(Ri[Pi++]=Li,Ri[Pi++]=Oi,Ri[Pi++]=Di,Li=i.id,Oi=i.overflow,Di=t)),(t=Kr(t,t.pendingProps.children)).flags|=4096);else t=eo(e,t,i,null);return t}return a?(r=Jr(e,t,r.children,r.fallback,i),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Xr(i):{baseLanes:o.baseLanes|i,cachePool:null},a.childLanes=e.childLanes&~i,t.memoizedState=Wr,r):(i=Zr(e,t,r.children,i),t.memoizedState=null,i)}return a?(r=Jr(e,t,r.children,r.fallback,i),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Xr(i):{baseLanes:o.baseLanes|i,cachePool:null},a.childLanes=e.childLanes&~i,t.memoizedState=Wr,r):(i=Zr(e,t,r.children,i),t.memoizedState=null,i)}function Kr(e,t){return(t=na({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zr(e,t,i,n){var r=e.child;return e=r.sibling,i=ea(r,{mode:"visible",children:i}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i}function Jr(e,t,i,n,r){var o=t.mode,s=(e=e.child).sibling,a={mode:"hidden",children:i};return 1&o||t.child===e?(i=ea(e,a)).subtreeFlags=14680064&e.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=a,t.deletions=null),null!==s?n=ea(s,n):(n=ia(n,o,r,null)).flags|=2,n.return=t,i.return=t,i.sibling=n,t.child=i,n}function eo(e,t,i,n){return null!==n&&Ji(n),on(t,e.child,null,i),(e=Kr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),li(e.return,t,i)}function io(e,t,i,n,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r)}function no(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(Fr(e,t,n.children,i),2&(n=mn.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,i,t);else if(19===e.tag)to(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(lt(mn,n),1&t.mode)switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===_n(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),io(t,!1,r,i,o);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===_n(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}io(t,!0,i,null,o);break;case"together":io(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ro(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),is|=t.lanes,!(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=ea(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=ea(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function oo(e,t){switch(Ui(t),t.tag){case 1:return ft(t.type)&&gt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pn(),at(ht),at(ut),yn(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return gn(t),null;case 13:if(at(mn),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));Zi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return at(mn),null;case 4:return pn(),null;case 10:return ai(t.type._context),null;case 22:case 23:return Rs(),null;default:return null}}var so=!1,ao=!1,lo="function"==typeof WeakSet?WeakSet:Set,co=null;function uo(e,t){var i=e.ref;if(null!==i)if("function"==typeof i)try{i(null)}catch(i){Qs(e,t,i)}else i.current=null}function ho(e,t,i){try{i()}catch(i){Qs(e,t,i)}}var po=!1;function fo(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&ho(t,i,o)}r=r.next}while(r!==n)}}function go(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function mo(e){var t=e.ref;if(null!==t){var i=e.stateNode;e=5===e.tag?P(i):i,"function"==typeof t?t(e):t.current=e}}function _o(e,t,i){if(Gt&&"function"==typeof Gt.onCommitFiberUnmount)try{Gt.onCommitFiberUnmount($t,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;r=r.tag,void 0!==o&&(2&r||4&r)&&ho(t,i,o),n=n.next}while(n!==e)}break;case 1:if(uo(t,i),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Qs(t,i,e)}break;case 5:uo(t,i);break;case 4:W?Co(e,t,i):X&&X&&(t=t.stateNode.containerInfo,i=Te(t),ke(t,i))}}function vo(e,t,i){for(var n=t;;)if(_o(e,n,i),null===n.child||W&&4===n.tag){if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function yo(e){var t=e.alternate;null!==t&&(e.alternate=null,yo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&ee(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bo(e){return 5===e.tag||3===e.tag||4===e.tag}function Ao(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||bo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wo(e){if(W){e:{for(var t=e.return;null!==t;){if(bo(t))break e;t=t.return}throw Error(s(160))}var i=t;switch(i.tag){case 5:t=i.stateNode,32&i.flags&&(be(t),i.flags&=-33),So(e,i=Ao(e),t);break;case 3:case 4:t=i.stateNode.containerInfo,xo(e,i=Ao(e),t);break;default:throw Error(s(161))}}}function xo(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?_e(i,e,t):de(i,e);else if(4!==n&&null!==(e=e.child))for(xo(e,t,i),e=e.sibling;null!==e;)xo(e,t,i),e=e.sibling}function So(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?me(i,e,t):he(i,e);else if(4!==n&&null!==(e=e.child))for(So(e,t,i),e=e.sibling;null!==e;)So(e,t,i),e=e.sibling}function Co(e,t,i){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag)vo(e,o,i),r?ye(n,o.stateNode):ve(n,o.stateNode);else if(18===o.tag)r?Ye(n,o.stateNode):Xe(n,o.stateNode);else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(_o(e,o,i),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Eo(e,t){if(W){switch(t.tag){case 0:case 11:case 14:case 15:return fo(3,t,t.return),go(3,t),void fo(5,t,t.return);case 1:case 12:case 17:return;case 5:var i=t.stateNode;if(null!=i){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var r=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&ge(i,o,r,e,n,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return i=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:i,i);case 3:return void(Y&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo));case 13:case 19:return void To(t)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fo(3,t,t.return),go(3,t),void fo(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void To(t);case 3:Y&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo)}e:if(X){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,ke(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function To(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new lo),t.forEach((function(t){var n=Xs.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function Io(e,t,i){co=e,Mo(e)}function Mo(e,t,i){for(var n=!!(1&e.mode);null!==co;){var r=co,o=r.child;if(22===r.tag&&n){var s=null!==r.memoizedState||so;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||ao;a=so;var c=ao;if(so=s,(ao=l)&&!c)for(co=r;null!==co;)l=(s=co).child,22===s.tag&&null!==s.memoizedState?Ro(r):null!==l?(l.return=s,co=l):Ro(r);for(;null!==o;)co=o,Mo(o),o=o.sibling;co=r,so=a,ao=c}ko(e)}else 8772&r.subtreeFlags&&null!==o?(o.return=r,co=o):ko(e)}}function ko(e){for(;null!==co;){var t=co;if(8772&t.flags){var i=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:ao||go(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!ao)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:ei(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&bi(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:i=P(t.child.stateNode);break;case 1:i=t.child.stateNode}bi(t,a,i)}break;case 5:var l=t.stateNode;null===i&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Y&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&We(h)}}}break;default:throw Error(s(163))}ao||512&t.flags&&mo(t)}catch(e){Qs(t,t.return,e)}}if(t===e){co=null;break}if(null!==(i=t.sibling)){i.return=t.return,co=i;break}co=t.return}}function Bo(e){for(;null!==co;){var t=co;if(t===e){co=null;break}var i=t.sibling;if(null!==i){i.return=t.return,co=i;break}co=t.return}}function Ro(e){for(;null!==co;){var t=co;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{go(4,t)}catch(e){Qs(t,i,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(e){Qs(t,r,e)}}var o=t.return;try{mo(t)}catch(e){Qs(t,o,e)}break;case 5:var s=t.return;try{mo(t)}catch(e){Qs(t,s,e)}}}catch(e){Qs(t,t.return,e)}if(t===e){co=null;break}var a=t.sibling;if(null!==a){a.return=t.return,co=a;break}co=t.return}}var Po=0,Do=1,Lo=2,Oo=3,Fo=4;if("function"==typeof Symbol&&Symbol.for){var No=Symbol.for;Po=No("selector.component"),Do=No("selector.has_pseudo_class"),Lo=No("selector.role"),Oo=No("selector.test_id"),Fo=No("selector.text")}function zo(e){var t=K(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=re(e)))throw Error(s(362));return e.stateNode.current}function Uo(e,t){switch(t.$$typeof){case Po:if(e.type===t.value)return!0;break;case Do:e:{t=t.value,e=[e,0];for(var i=0;i<e.length;){var n=e[i++],r=e[i++],o=t[r];if(5!==n.tag||!ae(n)){for(;null!=o&&Uo(n,o);)o=t[++r];if(r===t.length){t=!0;break e}for(n=n.child;null!==n;)e.push(n,r),n=n.sibling}}t=!1}return t;case Lo:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Fo:if((5===e.tag||6===e.tag)&&null!==(e=se(e))&&0<=e.indexOf(t.value))return!0;break;case Oo:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function Ho(e){switch(e.$$typeof){case Po:return"<"+(x(e.value)||"Unknown")+">";case Do:return":has("+(Ho(e)||"")+")";case Lo:return'[role="'+e.value+'"]';case Fo:return'"'+e.value+'"';case Oo:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Vo(e,t){var i=[];e=[e,0];for(var n=0;n<e.length;){var r=e[n++],o=e[n++],s=t[o];if(5!==r.tag||!ae(r)){for(;null!=s&&Uo(r,s);)s=t[++o];if(o===t.length)i.push(r);else for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}return i}function $o(e,t){if(!ne)throw Error(s(363));e=Vo(e=zo(e),t),t=[],e=Array.from(e);for(var i=0;i<e.length;){var n=e[i++];if(5===n.tag)ae(n)||t.push(n.stateNode);else for(n=n.child;null!==n;)e.push(n),n=n.sibling}return t}var Go=Math.ceil,Qo=a.ReactCurrentDispatcher,jo=a.ReactCurrentOwner,qo=a.ReactCurrentBatchConfig,Wo=0,Xo=null,Yo=null,Ko=0,Zo=0,Jo=st(0),es=0,ts=null,is=0,ns=0,rs=0,os=null,ss=null,as=0,ls=1/0;function cs(){ls=Nt()+500}var us,hs=!1,ds=null,ps=null,fs=!1,gs=null,ms=0,_s=0,vs=null,ys=-1,bs=0;function As(){return 6&Wo?Nt():-1!==ys?ys:ys=Nt()}function ws(e){return 1&e.mode?2&Wo&&0!==Ko?Ko&-Ko:null!==Kt.transition?(0===bs&&(e=xt,!(4194240&(xt<<=1))&&(xt=64),bs=e),bs):0!==(e=Rt)?e:J():1}function xs(e,t,i){if(50<_s)throw _s=0,vs=null,Error(s(185));var n=Ss(e,t);return null===n?null:(kt(n,t,i),2&Wo&&n===Xo||(n===Xo&&(!(2&Wo)&&(ns|=t),4===es&&Ms(n,Ko)),Cs(n,i),1===t&&0===Wo&&!(1&e.mode)&&(cs(),qt&&Yt())),n)}function Ss(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function Cs(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-bt(o),a=1<<s,l=r[s];-1===l?a&i&&!(a&n)||(r[s]=Tt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var n=Et(e,e===Xo?Ko:0);if(0===n)null!==i&&Lt(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Lt(i),1===t)0===e.tag?function(e){qt=!0,Xt(e)}(ks.bind(null,e)):Xt(ks.bind(null,e)),te?ie((function(){0===Wo&&Yt()})):Dt(zt,Yt),i=null;else{switch(Pt(n)){case 1:i=zt;break;case 4:i=Ut;break;case 16:default:i=Ht;break;case 536870912:i=Vt}i=Ys(i,Es.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Es(e,t){if(ys=-1,bs=0,6&Wo)throw Error(s(327));var i=e.callbackNode;if($s()&&e.callbackNode!==i)return null;var n=Et(e,e===Xo?Ko:0);if(0===n)return null;if(30&n||n&e.expiredLanes||t)t=Fs(e,n);else{t=n;var r=Wo;Wo|=2;var o=Ls();for(Xo===e&&Ko===t||(cs(),Ps(e,t));;)try{zs();break}catch(t){Ds(e,t)}oi(),Qo.current=o,Wo=r,null!==Yo?t=0:(Xo=null,Ko=0,t=es)}if(0!==t){if(2===t&&0!==(r=It(e))&&(n=r,t=Ts(e,r)),1===t)throw i=ts,Ps(e,0),Ms(e,n),Cs(e,Nt()),i;if(6===t)Ms(e,n);else{if(r=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],o=r.getSnapshot;r=r.value;try{if(!Qt(o(),r))return!1}catch(e){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)||(t=Fs(e,n),2===t&&(o=It(e),0!==o&&(n=o,t=Ts(e,o))),1!==t)))throw i=ts,Ps(e,0),Ms(e,n),Cs(e,Nt()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:Vs(e,ss);break;case 3:if(Ms(e,n),(130023424&n)===n&&10<(t=as+500-Nt())){if(0!==Et(e,0))break;if(((r=e.suspendedLanes)&n)!==n){As(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=G(Vs.bind(null,e,ss),t);break}Vs(e,ss);break;case 4:if(Ms(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var a=31-bt(n);o=1<<a,(a=t[a])>r&&(r=a),n&=~o}if(n=r,10<(n=(120>(n=Nt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Go(n/1960))-n)){e.timeoutHandle=G(Vs.bind(null,e,ss),n);break}Vs(e,ss);break;default:throw Error(s(329))}}}return Cs(e,Nt()),e.callbackNode===i?Es.bind(null,e):null}function Ts(e,t){var i=os;return e.current.memoizedState.isDehydrated&&(Ps(e,t).flags|=256),2!==(e=Fs(e,t))&&(t=ss,ss=i,null!==t&&Is(t)),e}function Is(e){null===ss?ss=e:ss.push.apply(ss,e)}function Ms(e,t){for(t&=~rs,t&=~ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-bt(t),n=1<<i;e[i]=-1,t&=~n}}function ks(e){if(6&Wo)throw Error(s(327));$s();var t=Et(e,0);if(!(1&t))return Cs(e,Nt()),null;var i=Fs(e,t);if(0!==e.tag&&2===i){var n=It(e);0!==n&&(t=n,i=Ts(e,n))}if(1===i)throw i=ts,Ps(e,0),Ms(e,t),Cs(e,Nt()),i;if(6===i)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vs(e,ss),Cs(e,Nt()),null}function Bs(e){null!==gs&&0===gs.tag&&!(6&Wo)&&$s();var t=Wo;Wo|=1;var i=qo.transition,n=Rt;try{if(qo.transition=null,Rt=1,e)return e()}finally{Rt=n,qo.transition=i,!(6&(Wo=t))&&Yt()}}function Rs(){Zo=Jo.current,at(Jo)}function Ps(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==j&&(e.timeoutHandle=j,Q(i)),null!==Yo)for(i=Yo.return;null!==i;){var n=i;switch(Ui(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&gt();break;case 3:pn(),at(ht),at(ut),yn();break;case 5:gn(n);break;case 4:pn();break;case 13:case 19:at(mn);break;case 10:ai(n.type._context);break;case 22:case 23:Rs()}i=i.return}if(Xo=e,Yo=e=ea(e.current,null),Ko=Zo=t,es=0,ts=null,rs=ns=is=0,ss=os=null,null!==hi){for(t=0;t<hi.length;t++)if(null!==(n=(i=hi[t]).interleaved)){i.interleaved=null;var r=n.next,o=i.pending;if(null!==o){var s=o.next;o.next=r,n.next=s}i.pending=n}hi=null}return e}function Ds(e,t){for(;;){var i=Yo;try{if(oi(),bn.current=pr,En){for(var n=xn.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}En=!1}if(wn=0,Cn=Sn=xn=null,Tn=!1,In=0,jo.current=null,null===i||null===i.return){es=1,ts=t,Yo=null;break}e:{var o=e,a=i.return,l=i,c=t;if(t=Ko,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(!(1&h.mode||0!==d&&11!==d&&15!==d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Tr(a);if(null!==f){f.flags&=-257,Ir(f,a,l,0,t),1&f.mode&&Er(o,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(!(1&t)){Er(o,u,t),Os();break e}c=Error(s(426))}else if($i&&1&l.mode){var _=Tr(a);if(null!==_){!(65536&_.flags)&&(_.flags|=256),Ir(_,a,l,0,t),Ji(c);break e}}o=c,4!==es&&(es=2),null===os?os=[o]:os.push(o),c=_r(c,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,vi(l,Sr(0,c,t));break e;case 1:o=c;var v=l.type,y=l.stateNode;if(!(128&l.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==ps&&ps.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,vi(l,Cr(l,o,t));break e}}l=l.return}while(null!==l)}Hs(i)}catch(e){t=e,Yo===i&&null!==i&&(Yo=i=i.return);continue}break}}function Ls(){var e=Qo.current;return Qo.current=pr,null===e?pr:e}function Os(){0!==es&&3!==es&&2!==es||(es=4),null===Xo||!(268435455&is)&&!(268435455&ns)||Ms(Xo,Ko)}function Fs(e,t){var i=Wo;Wo|=2;var n=Ls();for(Xo===e&&Ko===t||Ps(e,t);;)try{Ns();break}catch(t){Ds(e,t)}if(oi(),Wo=i,Qo.current=n,null!==Yo)throw Error(s(261));return Xo=null,Ko=0,es}function Ns(){for(;null!==Yo;)Us(Yo)}function zs(){for(;null!==Yo&&!Ot();)Us(Yo)}function Us(e){var t=us(e.alternate,e,Zo);e.memoizedProps=e.pendingProps,null===t?Hs(e):Yo=t,jo.current=null}function Hs(e){var t=e;do{var i=t.alternate;if(e=t.return,32768&t.flags){if(null!==(i=oo(i,t)))return i.flags&=32767,void(Yo=i);if(null===e)return es=6,void(Yo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(i=Dr(i,t,Zo)))return void(Yo=i);if(null!==(t=t.sibling))return void(Yo=t);Yo=t=e}while(null!==t);0===es&&(es=5)}function Vs(e,t){var i=Rt,n=qo.transition;try{qo.transition=null,Rt=1,function(e,t,i){do{$s()}while(null!==gs);if(6&Wo)throw Error(s(327));var n=e.finishedWork,r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-bt(i),o=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~o}}(e,o),e===Xo&&(Yo=Xo=null,Ko=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||fs||(fs=!0,Ys(Ht,(function(){return $s(),null}))),o=!!(15990&n.flags),15990&n.subtreeFlags||o){o=qo.transition,qo.transition=null;var a=Rt;Rt=1;var l=Wo;Wo|=4,jo.current=null,function(e,t){for(O(e.containerInfo),co=t;null!==co;)if(t=(e=co).child,1028&e.subtreeFlags&&null!==t)t.return=e,co=t;else for(;null!==co;){e=co;try{var i=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==i){var n=i.memoizedProps,r=i.memoizedState,o=e.stateNode,a=o.getSnapshotBeforeUpdate(e.elementType===e.type?n:ei(e.type,n),r);o.__reactInternalSnapshotBeforeUpdate=a}break;case 3:W&&Ce(e.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(t){Qs(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,co=t;break}co=e.return}i=po,po=!1}(e,n),function(e,t){for(co=t;null!==co;){var i=(t=co).deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var o=e;W?Co(o,r,t):vo(o,r,t);var s=r.alternate;null!==s&&(s.return=null),r.return=null}catch(e){Qs(r,t,e)}}if(i=t.child,12854&t.subtreeFlags&&null!==i)i.return=t,co=i;else for(;null!==co;){t=co;try{var a=t.flags;if(32&a&&W&&be(t.stateNode),512&a){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&a)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(as=Nt())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,p=null!==d&&null!==d.memoizedState;if(i=t,W)e:if(n=i,r=h,o=null,W)for(var f=n;;){if(5===f.tag){if(null===o){o=f;var g=f.stateNode;r?Ae(g):xe(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===o){var m=f.stateNode;r?we(m):Se(m,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===n)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===n)break;for(;null===f.sibling;){if(null===f.return||f.return===n)break e;o===f&&(o=null),f=f.return}o===f&&(o=null),f.sibling.return=f.return,f=f.sibling}if(h&&!p&&1&i.mode){co=i;for(var _=i.child;null!==_;){for(i=co=_;null!==co;){var v=(n=co).child;switch(n.tag){case 0:case 11:case 14:case 15:fo(4,n,n.return);break;case 1:uo(n,n.return);var y=n.stateNode;if("function"==typeof y.componentWillUnmount){var b=n.return;try{y.props=n.memoizedProps,y.state=n.memoizedState,y.componentWillUnmount()}catch(e){Qs(n,b,e)}}break;case 5:uo(n,n.return);break;case 22:if(null!==n.memoizedState){Bo(i);continue}}null!==v?(v.return=n,co=v):Bo(i)}_=_.sibling}}}switch(4102&a){case 2:wo(t),t.flags&=-3;break;case 6:wo(t),t.flags&=-3,Eo(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Eo(t.alternate,t);break;case 4:Eo(t.alternate,t)}}catch(e){Qs(t,t.return,e)}if(null!==(i=t.sibling)){i.return=t.return,co=i;break}co=t.return}}}(e,n),F(e.containerInfo),e.current=n,Io(n),Ft(),Wo=l,Rt=a,qo.transition=o}else e.current=n;if(fs&&(fs=!1,gs=e,ms=r),0===(o=e.pendingLanes)&&(ps=null),function(e){if(Gt&&"function"==typeof Gt.onCommitFiberRoot)try{Gt.onCommitFiberRoot($t,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),Cs(e,Nt()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i(t[n]);if(hs)throw hs=!1,e=ds,ds=null,e;!!(1&ms)&&0!==e.tag&&$s(),1&(o=e.pendingLanes)?e===vs?_s++:(_s=0,vs=e):_s=0,Yt()}(e,t,i)}finally{qo.transition=n,Rt=i}return null}function $s(){if(null!==gs){var e=Pt(ms),t=qo.transition,i=Rt;try{if(qo.transition=null,Rt=16>e?16:e,null===gs)var n=!1;else{if(e=gs,gs=null,ms=0,6&Wo)throw Error(s(331));var r=Wo;for(Wo|=4,co=e.current;null!==co;){var o=co,a=o.child;if(16&co.flags){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(co=u;null!==co;){var h=co;switch(h.tag){case 0:case 11:case 15:fo(8,h,o)}var d=h.child;if(null!==d)d.return=h,co=d;else for(;null!==co;){var p=(h=co).sibling,f=h.return;if(yo(h),h===u){co=null;break}if(null!==p){p.return=f,co=p;break}co=f}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(null!==m)}}co=o}}if(2064&o.subtreeFlags&&null!==a)a.return=o,co=a;else e:for(;null!==co;){if(2048&(o=co).flags)switch(o.tag){case 0:case 11:case 15:fo(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,co=v;break e}co=o.return}}var y=e.current;for(co=y;null!==co;){var b=(a=co).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,co=b;else e:for(a=y;null!==co;){if(2048&(l=co).flags)try{switch(l.tag){case 0:case 11:case 15:go(9,l)}}catch(e){Qs(l,l.return,e)}if(l===a){co=null;break e}var A=l.sibling;if(null!==A){A.return=l.return,co=A;break e}co=l.return}}if(Wo=r,Yt(),Gt&&"function"==typeof Gt.onPostCommitFiberRoot)try{Gt.onPostCommitFiberRoot($t,e)}catch(e){}n=!0}return n}finally{Rt=i,qo.transition=t}}return!1}function Gs(e,t,i){mi(e,t=Sr(0,t=_r(i,t),1)),t=As(),null!==(e=Ss(e,1))&&(kt(e,1,t),Cs(e,t))}function Qs(e,t,i){if(3===e.tag)Gs(e,e,i);else for(;null!==t;){if(3===t.tag){Gs(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===ps||!ps.has(n))){mi(t,e=Cr(t,e=_r(i,e),1)),e=As(),null!==(t=Ss(t,1))&&(kt(t,1,e),Cs(t,e));break}}t=t.return}}function js(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=As(),e.pingedLanes|=e.suspendedLanes&i,Xo===e&&(Ko&i)===i&&(4===es||3===es&&(130023424&Ko)===Ko&&500>Nt()-as?Ps(e,0):rs|=i),Cs(e,t)}function qs(e,t){0===t&&(1&e.mode?(t=St,!(130023424&(St<<=1))&&(St=4194304)):t=1);var i=As();null!==(e=Ss(e,t))&&(kt(e,t,i),Cs(e,i))}function Ws(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),qs(e,i)}function Xs(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),qs(e,i)}function Ys(e,t){return Dt(e,t)}function Ks(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(e,t,i,n){return new Ks(e,t,i,n)}function Js(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ea(e,t){var i=e.alternate;return null===i?((i=Zs(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ta(e,t,i,n,r,o){var a=2;if(n=e,"function"==typeof e)Js(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case u:return ia(i.children,r,o,t);case h:a=8,r|=8;break;case d:return(e=Zs(12,i,t,2|r)).elementType=d,e.lanes=o,e;case m:return(e=Zs(13,i,t,r)).elementType=m,e.lanes=o,e;case _:return(e=Zs(19,i,t,r)).elementType=_,e.lanes=o,e;case b:return na(i,r,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case p:a=10;break e;case f:a=9;break e;case g:a=11;break e;case v:a=14;break e;case y:a=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Zs(a,i,t,r)).elementType=e,t.type=n,t.lanes=o,t}function ia(e,t,i,n){return(e=Zs(7,e,n,t)).lanes=i,e}function na(e,t,i,n){return(e=Zs(22,e,n,t)).elementType=b,e.lanes=i,e.stateNode={},e}function ra(e,t,i){return(e=Zs(6,e,null,t)).lanes=i,e}function oa(e,t,i){return(t=Zs(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sa(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=j,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mt(0),this.expirationTimes=Mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.identifierPrefix=n,this.onRecoverableError=r,Y&&(this.mutableSourceEagerHydrationData=null)}function aa(e,t,i,n,r,o,s,a,l){return e=new sa(e,t,i,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Zs(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null},pi(o),e}function la(e){if(!e)return ct;e:{if(C(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var i=e.type;if(ft(i))return _t(e,i,t)}return t}function ca(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=I(t))?null:e.stateNode}function ua(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ha(e,t){ua(e,t),(e=e.alternate)&&ua(e,t)}function da(e){return null===(e=I(e))?null:e.stateNode}function pa(){return null}return us=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Or=!0;else{if(!(e.lanes&i||128&t.flags))return Or=!1,function(e,t,i){switch(t.tag){case 3:jr(t),Zi();break;case 5:fn(t);break;case 1:ft(t.type)&&vt(t);break;case 4:dn(t,t.stateNode.containerInfo);break;case 10:si(0,t.type._context,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(lt(mn,1&mn.current),t.flags|=128,null):i&t.child.childLanes?Yr(e,t,i):(lt(mn,1&mn.current),null!==(e=ro(e,t,i))?e.sibling:null);lt(mn,1&mn.current);break;case 19:if(n=!!(i&t.childLanes),128&e.flags){if(n)return no(e,t,i);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(mn,mn.current),n)break;return null;case 22:case 23:return t.lanes=0,Hr(e,t,i)}return ro(e,t,i)}(e,t,i);Or=!!(131072&e.flags)}else Or=!1,$i&&1048576&t.flags&&Ni(t,Bi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=pt(t,ut.current);ci(t,i),r=Rn(null,t,n,e,r,i);var o=Pn();return t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(n)?(o=!0,vt(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,pi(t),r.updater=xi,t.stateNode=r,r._reactInternals=t,Ti(t,n,e,i),t=Qr(null,t,n,!0,o,i)):(t.tag=0,$i&&o&&zi(t),Fr(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"==typeof e)return Js(e)?1:0;if(null!=e){if((e=e.$$typeof)===g)return 11;if(e===v)return 14}return 2}(n),e=ei(n,e),r){case 0:t=$r(null,t,n,e,i);break e;case 1:t=Gr(null,t,n,e,i);break e;case 11:t=Nr(null,t,n,e,i);break e;case 14:t=zr(null,t,n,ei(n.type,e),i);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,$r(e,t,n,r=t.elementType===n?r:ei(n,r),i);case 1:return n=t.type,r=t.pendingProps,Gr(e,t,n,r=t.elementType===n?r:ei(n,r),i);case 3:e:{if(jr(t),null===e)throw Error(s(387));n=t.pendingProps,r=(o=t.memoizedState).element,fi(e,t),yi(t,n,null,i);var a=t.memoizedState;if(n=a.element,Y&&o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=qr(e,t,n,i,r=Error(s(423)));break e}if(n!==r){t=qr(e,t,n,i,r=Error(s(424)));break e}for(Y&&(Vi=He(t.stateNode.containerInfo),Hi=t,$i=!0,Qi=null,Gi=!1),i=sn(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(Zi(),n===r){t=ro(e,t,i);break e}Fr(e,t,n,i)}t=t.child}return t;case 5:return fn(t),null===e&&Xi(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,V(n,r)?a=null:null!==o&&V(n,o)&&(t.flags|=32),Vr(e,t),Fr(e,t,a,i),t.child;case 6:return null===e&&Xi(t),null;case 13:return Yr(e,t,i);case 4:return dn(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=on(t,null,n,i):Fr(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Nr(e,t,n,r=t.elementType===n?r:ei(n,r),i);case 7:return Fr(e,t,t.pendingProps,i),t.child;case 8:case 12:return Fr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,o=t.memoizedProps,si(0,n,a=r.value),null!==o)if(Qt(o.value,a)){if(o.children===r.children&&!ht.current){t=ro(e,t,i);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=gi(-1,i&-i)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=i,null!==(c=o.alternate)&&(c.lanes|=i),li(o.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),li(a,i,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Fr(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,ci(t,i),n=n(r=ui(r)),t.flags|=1,Fr(e,t,n,i),t.child;case 14:return r=ei(n=t.type,t.pendingProps),zr(e,t,n,r=ei(n.type,r),i);case 15:return Ur(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ei(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(n)?(e=!0,vt(t)):e=!1,ci(t,i),Ci(t,n,r),Ti(t,n,r,i),Qr(null,t,n,!0,e,i);case 19:return no(e,t,i);case 22:return Hr(e,t,i)}throw Error(s(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(xs(e,134217728,As()),ha(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=As(),i=ws(e);xs(e,i,t),ha(e,i)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Ct(t.pendingLanes);0!==i&&(Bt(t,1|i),Cs(t,Nt()),!(6&Wo)&&(cs(),Yt()))}break;case 13:var n=As();Bs((function(){return xs(e,1,n)})),ha(e,1)}},t.batchedUpdates=function(e,t){var i=Wo;Wo|=1;try{return e(t)}finally{0===(Wo=i)&&(cs(),qt&&Yt())}},t.createComponentSelector=function(e){return{$$typeof:Po,value:e}},t.createContainer=function(e,t,i,n,r,o,s){return aa(e,t,!1,null,0,n,0,o,s)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Do,value:e}},t.createHydrationContainer=function(e,t,i,n,r,o,s,a,l){return(e=aa(i,n,!0,e,0,o,0,a,l)).context=la(null),i=e.current,(o=gi(n=As(),r=ws(i))).callback=null!=t?t:null,mi(i,o),e.current.lanes=r,kt(e,r,n),Cs(e,n),e},t.createPortal=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}},t.createRoleSelector=function(e){return{$$typeof:Lo,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Oo,value:e}},t.createTextSelector=function(e){return{$$typeof:Fo,value:e}},t.deferredUpdates=function(e){var t=Rt,i=qo.transition;try{return qo.transition=null,Rt=16,e()}finally{Rt=t,qo.transition=i}},t.discreteUpdates=function(e,t,i,n,r){var o=Rt,s=qo.transition;try{return qo.transition=null,Rt=1,e(t,i,n,r)}finally{Rt=o,qo.transition=s,0===Wo&&cs()}},t.findAllNodes=$o,t.findBoundingRects=function(e,t){if(!ne)throw Error(s(363));t=$o(e,t),e=[];for(var i=0;i<t.length;i++)e.push(oe(t[i]));for(t=e.length-1;0<t;t--)for(var n=(i=e[t]).x,r=n+i.width,o=i.y,a=o+i.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,p=d+c.height;if(n>=u&&o>=d&&r<=h&&a<=p){e.splice(t,1);break}if(!(n!==u||i.width!==c.width||p<o||d>a)){d>o&&(c.height+=d-o,c.y=o),p<a&&(c.height=a-d),e.splice(t,1);break}if(!(o!==d||i.height!==c.height||h<n||u>r)){u>n&&(c.width+=u-n,c.x=n),h<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=ca,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?k(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return ca(e)},t.flushControlled=function(e){var t=Wo;Wo|=1;var i=qo.transition,n=Rt;try{qo.transition=null,Rt=1,e()}finally{Rt=n,qo.transition=i,0===(Wo=t)&&(cs(),Yt())}},t.flushPassiveEffects=$s,t.flushSync=Bs,t.focusWithin=function(e,t){if(!ne)throw Error(s(363));for(t=Vo(e=zo(e),t),t=Array.from(t),e=0;e<t.length;){var i=t[e++];if(!ae(i)){if(5===i.tag&&ce(i.stateNode))return!0;for(i=i.child;null!==i;)t.push(i),i=i.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(e,t){if(!ne)throw Error(s(363));var i=0,n=[];e=[zo(e),0];for(var r=0;r<e.length;){var o=e[r++],a=e[r++],l=t[a];if((5!==o.tag||!ae(o))&&(Uo(o,l)&&(n.push(Ho(l)),++a>i&&(i=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(i<t.length){for(e=[];i<t.length;i++)e.push(Ho(t[i]));return"findAllNodes was able to match part of the selector:\n  "+n.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?P(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:da,findFiberByHostInstance:e.findFiberByHostInstance||pa,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{$t=t.inject(e),Gt=t}catch(e){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,i,n){if(!ne)throw Error(s(363));e=$o(e,t);var r=ue(e,i,n).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var i=t._getVersion;i=i(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i)},t.runWithPriority=function(e,t){var i=Rt;try{return Rt=e,t()}finally{Rt=i}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,i,n){var r=t.current,o=As(),s=ws(r);return i=la(i),null===t.context?t.context=i:t.pendingContext=i,(t=gi(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),mi(r,t),null!==(e=xs(r,s,o))&&_i(e,r,s),s},t}),Oie)),Nie.exports)),Gie=Hie();const Qie={};var jie,qie;const Wie=e=>"colorSpace"in e||"outputColorSpace"in e,Xie=()=>{var e;return null!=(e=Qie.ColorManagement)?e:null},Yie=e=>e&&e.isOrthographicCamera,Kie="undefined"!=typeof window&&(null!=(jie=window.document)&&jie.createElement||"ReactNative"===(null==(qie=window.navigator)?void 0:qie.product))?r.useLayoutEffect:r.useEffect;function Zie(e){const t=r.useRef(e);return Kie((()=>{t.current=e}),[e]),t}function Jie(e){let{set:t}=e;return Kie((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class ene extends r.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ene.getDerivedStateFromError=()=>({error:!0});const tne="__default",ine=new Map;function nne(e){var t;const i="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],i),e[1]):e}const rne=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function one(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const sne={obj:e=>e===Object(e)&&!sne.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:i="shallow",objects:n="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!=typeof t||!!e!=!!t)return!1;if(sne.str(e)||sne.num(e)||sne.boo(e))return e===t;const o=sne.obj(e);if(o&&"reference"===n)return e===t;const s=sne.arr(e);if(s&&"reference"===i)return e===t;if((s||o)&&e===t)return!0;let a;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===i&&"shallow"===n){for(a in r?t:e)if(!sne.equ(e[a],t[a],{strict:r,objects:"reference"}))return!1}else for(a in r?t:e)if(e[a]!==t[a])return!1;if(sne.und(a)){if(s&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function ane(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function lne(e,t){let i=e;if(t.includes("-")){const n=t.split("-"),r=n.pop();return i=n.reduce(((e,t)=>e[t]),e),{target:i,key:r}}return{target:i,key:t}}const cne=/-\d+$/;function une(e,t,i){if(sne.str(i)){if(cne.test(i)){const t=i.replace(cne,""),{target:n,key:r}=lne(e,t);Array.isArray(n[r])||(n[r]=[])}const{target:n,key:r}=lne(e,i);t.__r3f.previousAttach=n[r],n[r]=t}else t.__r3f.previousAttach=i(e,t)}function hne(e,t,i){var n,r;if(sne.str(i)){const{target:n,key:r}=lne(e,i),o=t.__r3f.previousAttach;void 0===o?delete n[r]:n[r]=o}else null==(n=t.__r3f)||null==n.previousAttach||n.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function dne(e,t){let{children:i,key:n,ref:r,...o}=t,{children:s,key:a,ref:l,...c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const h=e.__r3f,d=Object.entries(o),p=[];if(u){const e=Object.keys(c);for(let t=0;t<e.length;t++)o.hasOwnProperty(e[t])||d.unshift([e[t],tne+"remove"])}d.forEach((t=>{let[i,n]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===i)return;if(sne.equ(n,c[i]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(i))return p.push([i,n,!0,[]]);let s=[];i.includes("-")&&(s=i.split("-")),p.push([i,n,!1,s]);for(const e in o){const t=o[e];e.startsWith(`${i}-`)&&p.push([e,t,!1,e.split("-")])}}));const f={...o};return null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:p}}const pne="undefined"!=typeof process&&!1;function fne(e,t){var i;const n=e.__r3f,r=null==n?void 0:n.root,o=null==r||null==r.getState?void 0:r.getState(),{memoized:s,changes:a}=(e=>e&&!!e.memoized&&!!e.changes)(t)?t:dne(e,t),l=null==n?void 0:n.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let c=0;c<a.length;c++){let[t,i,r,s]=a[c];if(Wie(e)){const e=3001,n="srgb",r="srgb-linear";"encoding"===t?(t="colorSpace",i=i===e?n:r):"outputEncoding"===t&&(t="outputColorSpace",i=i===e?n:r)}let l=e,u=l[t];if(s.length&&(u=s.reduce(((e,t)=>e[t]),e),!u||!u.set)){const[i,...n]=s.reverse();l=n.reverse().reduce(((e,t)=>e[t]),e),t=i}if(i===tne+"remove")if(l.constructor){let e=ine.get(l.constructor);e||(e=new l.constructor,ine.set(l.constructor,e)),i=e[t]}else i=0;if(r&&n)i?n.handlers[t]=i:delete n.handlers[t],n.eventCount=Object.keys(n.handlers).length;else if(u&&u.set&&(u.copy||u instanceof Cr)){if(Array.isArray(i))u.fromArray?u.fromArray(i):u.set(...i);else if(u.copy&&i&&i.constructor&&(pne?u.constructor.name===i.constructor.name:u.constructor===i.constructor))u.copy(i);else if(void 0!==i){const e=u instanceof so;!e&&u.setScalar?u.setScalar(i):u instanceof Cr&&i instanceof Cr?u.mask=i.mask:u.set(i),!Xie()&&o&&!o.linear&&e&&u.convertSRGBToLinear()}}else if(l[t]=i,l[t]instanceof Mn&&l[t].format===je&&l[t].type===Re&&o){const e=l[t];Wie(e)&&Wie(o.gl)?e.colorSpace=o.gl.outputColorSpace:e.encoding=o.gl.outputEncoding}gne(e)}if(n&&n.parent&&e.raycast&&l!==n.eventCount){const t=one(e).getState().internal,i=t.interaction.indexOf(e);i>-1&&t.interaction.splice(i,1),n.eventCount&&t.interaction.push(e)}return!(1===a.length&&"onUpdate"===a[0][0])&&a.length&&null!=(i=e.__r3f)&&i.parent&&mne(e),e}function gne(e){var t,i;const n=null==(t=e.__r3f)||null==(i=t.root)||null==i.getState?void 0:i.getState();n&&0===n.internal.frames&&n.invalidate()}function mne(e){null==e.onUpdate||e.onUpdate(e)}function _ne(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function vne(e,t,i,n){const r=i.get(t);r&&(i.delete(t),0===i.size&&(e.delete(n),r.target.releasePointerCapture(n)))}const yne=e=>!(null==e||!e.render),bne=r.createContext(null),Ane=(e,t)=>{const i=function(e){const t=function(e){let t;const i=new Set,n=(e,n)=>{const r="function"==typeof e?e(t):e;if(r!==t){const e=t;t=n?r:Object.assign({},t,r),i.forEach((i=>i(t,e)))}},r=()=>t,o={setState:n,getState:r,subscribe:(e,n,o)=>n||o?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function a(){const i=n(t);if(!o(s,i)){const t=s;e(s=i,t)}}return i.add(a),()=>i.delete(a)}(e,n,o):(i.add(e),()=>i.delete(e)),destroy:()=>i.clear()};return t=e(n,r,o),o}(e),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,n]=(0,r.useReducer)((e=>e+1),0),o=t.getState(),s=(0,r.useRef)(o),a=(0,r.useRef)(e),l=(0,r.useRef)(i),c=(0,r.useRef)(!1),u=(0,r.useRef)();let h;void 0===u.current&&(u.current=e(o));let d=!1;(s.current!==o||a.current!==e||l.current!==i||c.current)&&(h=e(o),d=!i(u.current,h)),Mie((()=>{d&&(u.current=h),s.current=o,a.current=e,l.current=i,c.current=!1}));const p=(0,r.useRef)(o);Mie((()=>{const e=()=>{try{const e=t.getState(),i=a.current(e);l.current(u.current,i)||(s.current=e,u.current=i,n())}catch(e){c.current=!0,n()}},i=t.subscribe(e);return t.getState()!==p.current&&e(),i}),[]);const f=d?h:u.current;return(0,r.useDebugValue)(f),f};return Object.assign(i,t),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[i,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},i}(((i,n)=>{const o=new Nn,s=new Nn,a=new Nn;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n().size;const{width:r,height:l,top:c,left:u}=i,h=r/l;t instanceof Nn?a.copy(t):a.set(...t);const d=e.getWorldPosition(o).distanceTo(a);if(Yie(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,i=2*Math.tan(t/2)*d,n=i*(r/l);return{width:n,height:i,top:c,left:u,factor:r/n,distance:d,aspect:h}}}let c;const u=e=>i((t=>({performance:{...t.performance,current:e}}))),h=new sn,d={set:i,get:n,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(n(),t)},advance:(e,i)=>t(e,i,n()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Gp,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=n();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((()=>u(n().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>i((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,r,o,a)=>{const c=n().camera,u={width:e,height:t,top:o||0,left:a||0,updateStyle:r};i((e=>({size:u,viewport:{...e.viewport,...l(c,s,u)}})))},setDpr:e=>i((t=>{const i=nne(e);return{viewport:{...t.viewport,dpr:i,initialDpr:t.viewport.initialDpr||i}}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=n().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,i)=>{const r=n().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:i}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const i=n().internal;null!=i&&i.subscribers&&(i.priority=i.priority-(t>0?1:0),i.subscribers=i.subscribers.filter((t=>t.ref!==e)))}}}};return d})),n=i.getState();let o=n.size,s=n.viewport.dpr,a=n.camera;return i.subscribe((()=>{const{camera:e,size:t,viewport:n,gl:r,set:l}=i.getState();if(t.width!==o.width||t.height!==o.height||n.dpr!==s){var c;o=t,s=n.dpr,function(e,t){e.manual||(Yie(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}(e,t),r.setPixelRatio(n.dpr);const i=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,i)}e!==a&&(a=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),i.subscribe((t=>e(t))),i};let wne,xne,Sne,Cne=new Set,Ene=new Set,Tne=new Set;function Ine(e,t){if(e.size)for(const{callback:i}of e.values())i(t)}function Mne(e,t){switch(e){case"before":return Ine(Cne,t);case"after":return Ine(Ene,t);case"tail":return Ine(Tne,t)}}function kne(e,t,i){let n=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),xne=t.internal.subscribers,wne=0;wne<xne.length;wne++)Sne=xne[wne],Sne.ref.current(Sne.store.getState(),n,i);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function Bne(){const e=r.useContext(bne);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Rne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return Bne()(e,t)}function Pne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Bne(),n=i.getState().internal.subscribe,r=Zie(e);return Kie((()=>n(r,t,i)),[t,n,i]),null}const Dne=new WeakMap;function Lne(e,t){return function(i){let n=Dne.get(i);for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return n||(n=new i,Dne.set(i,n)),e&&e(n),Promise.all(o.map((e=>new Promise(((i,r)=>n.load(e,(e=>{e.scene&&Object.assign(e,function(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}(e.scene)),i(e)}),t,(t=>r(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`)))))))))}}function One(e,t,i,n){const r=Array.isArray(t)?t:[t],o=Pie(Lne(i,n),[e,...r],{equal:sne.equ});return Array.isArray(t)?o:o[0]}One.preload=function(e,t,i){const n=Array.isArray(t)?t:[t];return((e,t)=>{Rie(e,t,!0,void 0)})(Lne(i),[e,...n])},One.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)kie.splice(0,kie.length);else{const t=kie.find((t=>Bie(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const Fne=new Map,{invalidate:Nne,advance:zne}=function(e){let t,i,n,r=!1,o=!1;function s(a){i=requestAnimationFrame(s),r=!0,t=0,Mne("before",a),o=!0;for(const i of e.values()){var l;n=i.store.getState(),!n.internal.active||!("always"===n.frameloop||n.internal.frames>0)||null!=(l=n.gl.xr)&&l.isPresenting||(t+=kne(a,n))}if(o=!1,Mne("after",a),0===t)return Mne("tail",a),r=!1,cancelAnimationFrame(i)}return{loop:s,invalidate:function t(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!i)return e.forEach((e=>t(e.store.getState(),n)));null!=(a=i.gl.xr)&&a.isPresenting||!i.internal.active||"never"===i.frameloop||(i.internal.frames=n>1?Math.min(60,i.internal.frames+n):o?2:1,r||(r=!0,requestAnimationFrame(s)))},advance:function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(i&&Mne("before",t),n)kne(t,n,r);else for(const o of e.values())kne(t,o.store.getState());i&&Mne("after",t)}}}(Fne),{reconciler:Une,applyProps:Hne}=function(e,t){function i(e,t,i){let n,{args:r=[],attach:o,...s}=t,a=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");n=ane(s.object,{type:e,root:i,attach:o,primitive:!0})}else{const t=Qie[a];if(!t)throw new Error(`R3F: ${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");n=ane(new t(...r),{type:e,root:i,attach:o,memoizedProps:{args:r}})}return void 0===n.__r3f.attach&&(n instanceof Oo?n.__r3f.attach="geometry":n instanceof co&&(n.__r3f.attach="material")),"inject"!==a&&fne(n,s),n}function n(e,t){let i=!1;var n,r;t&&(null!=(n=t.__r3f)&&n.attach?une(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),i=!0),i||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||ane(t,{}),t.__r3f.parent=e,mne(t),gne(t))}function r(e,t,i){let n=!1;if(t){var r,o;if(null!=(r=t.__r3f)&&r.attach)une(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const r=e.children.filter((e=>e!==t)),o=r.indexOf(i);e.children=[...r.slice(0,o),t,...r.slice(o)],n=!0}n||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||ane(t,{}),t.__r3f.parent=e,mne(t),gne(t)}}function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>s(t,e,i)))}function s(e,t,i){if(t){var n,r,s;if(t.__r3f&&(t.__r3f.parent=null),null!=(n=e.__r3f)&&n.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(r=t.__r3f)&&r.attach)hne(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var a;e.remove(t),null!=(a=t.__r3f)&&a.root&&function(e,t){const{internal:i}=e.getState();i.interaction=i.interaction.filter((e=>e!==t)),i.initialHits=i.initialHits.filter((e=>e!==t)),i.hovered.forEach(((e,n)=>{e.eventObject!==t&&e.object!==t||i.hovered.delete(n)})),i.capturedMap.forEach(((e,n)=>{vne(i.capturedMap,t,e,n)}))}(one(t),t)}const c=null==(s=t.__r3f)?void 0:s.primitive,u=!c&&(void 0===i?null!==t.dispose:i);var l;if(c||(o(null==(l=t.__r3f)?void 0:l.objects,t,u),o(t.children,t,u)),delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(e){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?Gie.unstable_scheduleCallback(Gie.unstable_IdlePriority,e):e()}gne(e)}}const a=()=>{},l=$ie({createInstance:i,removeChild:s,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const i=e.getState().scene;i.__r3f&&(i.__r3f.root=e,n(i,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,i)=>{if(!t||!i)return;const n=e.getState().scene;n.__r3f&&r(n,t,i)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const i=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(i.handlers)},prepareUpdate(e,t,i,n){var r;if((null!=(r=null==e?void 0:e.__r3f)?r:{}).primitive&&n.object&&n.object!==e)return[!0];{const{args:t=[],children:r,...o}=n,{args:s=[],children:a,...l}=i;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==s[t])))return[!0];const c=dne(e,o,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,r,o,a,l){let[c,u]=t;c?function(e,t,r,o){var a;const l=null==(a=e.__r3f)?void 0:a.parent;if(!l)return;const c=i(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&n(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>n(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),n(l,c),c.raycast&&c.__r3f.eventCount&&one(c).getState().internal.interaction.push(c),[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,r,a,l):fne(e,u)},commitMount(e,t,i,n){var r;const o=null!=(r=e.__r3f)?r:{};e.raycast&&o.handlers&&o.eventCount&&one(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>ane(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:i,parent:n}=null!=(t=e.__r3f)?t:{};i&&n&&hne(n,e,i),e.isObject3D&&(e.visible=!1),gne(e)},unhideInstance(e,t){var i;const{attach:n,parent:r}=null!=(i=e.__r3f)?i:{};n&&r&&une(r,e,n),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),gne(e)},createTextInstance:a,hideTextInstance:a,unhideTextInstance:a,getCurrentEventPriority:()=>t?t():Iie.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&sne.fun(performance.now)?performance.now:sne.fun(Date.now)?Date.now:()=>0,scheduleTimeout:sne.fun(setTimeout)?setTimeout:void 0,cancelTimeout:sne.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:fne}}(0,(function(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return Iie.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Iie.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Iie.ContinuousEventPriority;default:return Iie.DefaultEventPriority}})),Vne={objects:"shallow",strict:!1},$ne=(e,t)=>{const i="function"==typeof e?e(t):e;return yne(i)?i:new cc({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function Gne(e){let{store:t,children:i,onCreated:n,rootElement:r}=e;return Kie((()=>{const e=t.getState();e.set((e=>({internal:{...e.internal,active:!0}}))),n&&n(e),t.getState().events.connected||null==e.events.connect||e.events.connect(r)}),[]),(0,SR.jsx)(bne.Provider,{value:t,children:i})}function Qne(e,t){const i=Fne.get(e),n=null==i?void 0:i.fiber;if(n){const t=null==i?void 0:i.store.getState();t&&(t.internal.active=!1),Une.updateContainer(null,n,null,(()=>{t&&setTimeout((()=>{try{var i,n,r,o;null==t.events.disconnect||t.events.disconnect(),null==(i=t.gl)||null==(n=i.renderLists)||null==n.dispose||n.dispose(),null==(r=t.gl)||null==r.forceContextLoss||r.forceContextLoss(),null!=(o=t.gl)&&o.xr&&t.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(t),Fne.delete(e)}catch(e){}}),500)}))}}Une.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});const jne={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qne(e){const{handlePointer:t}=function(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var i;return null==(i=e.__r3f)?void 0:i.handlers["onPointer"+t]}))))}function i(t){const{internal:i}=e.getState();for(const e of i.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const n=e.eventObject.__r3f,r=null==n?void 0:n.handlers;if(i.hovered.delete(_ne(e)),null!=n&&n.eventCount){const i={...e,intersections:t};null==r.onPointerOut||r.onPointerOut(i),null==r.onPointerLeave||r.onPointerLeave(i)}}}function n(e,t){for(let i=0;i<t.length;i++){const n=t[i].__r3f;null==n||null==n.handlers.onPointerMissed||n.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return t=>{const{internal:n}=e.getState();"pointerId"in t&&n.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),i([]))}))}}return function(o){const{onPointerMissed:s,internal:a}=e.getState();a.lastEvent.current=o;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,i){const n=e.getState(),r=new Set,o=[],s=i?i(n.internal.interaction):n.internal.interaction;for(let e=0;e<s.length;e++){const t=rne(s[e]);t&&(t.raycaster.camera=void 0)}n.previousRoot||null==n.events.compute||n.events.compute(t,n);let a=s.flatMap((function(e){const i=rne(e);return i&&i.events.enabled&&null!==i.raycaster.camera?(void 0===i.raycaster.camera&&(null==i.events.compute||i.events.compute(t,i,null==(n=i.previousRoot)?void 0:n.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)),i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]):[];var n})).sort(((e,t)=>{const i=rne(e.object),n=rne(t.object);return i&&n&&n.events.priority-i.events.priority||e.distance-t.distance})).filter((e=>{const t=_ne(e);return!r.has(t)&&(r.add(t),!0)}));n.events.filter&&(a=n.events.filter(a,n));for(const e of a){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&n.internal.capturedMap.has(t.pointerId))for(let e of n.internal.capturedMap.get(t.pointerId).values())r.has(_ne(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),h=c?function(t){const{internal:i}=e.getState(),n=t.offsetX-i.initialClick[0],r=t.offsetY-i.initialClick[1];return Math.round(Math.sqrt(n*n+r*r))}(o):0;"onPointerDown"===r&&(a.initialClick=[o.offsetX,o.offsetY],a.initialHits=u.map((e=>e.eventObject))),c&&!u.length&&h<=2&&(n(o,a.interaction),s&&s(o)),l&&i(u),function(t,n,r,o){const s=e.getState();if(t.length){const e={stopped:!1};for(const a of t){const l=rne(a.object)||s,{raycaster:c,pointer:u,camera:h,internal:d}=l,p=new Nn(u.x,u.y,0).unproject(h),f=e=>{var t,i;return null!=(t=null==(i=d.capturedMap.get(e))?void 0:i.has(a.eventObject))&&t},g=e=>{const t={intersection:a,target:n.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(a.eventObject,t):d.capturedMap.set(e,new Map([[a.eventObject,t]])),n.target.setPointerCapture(e)},m=e=>{const t=d.capturedMap.get(e);t&&vne(d.capturedMap,a.eventObject,t,e)};let _={};for(let e in n){let t=n[e];"function"!=typeof t&&(_[e]=t)}let v={...a,..._,pointer:u,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:p,ray:c.ray,camera:h,stopPropagation(){const r="pointerId"in n&&d.capturedMap.get(n.pointerId);(!r||r.has(a.eventObject))&&(v.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((e=>e.eventObject===a.eventObject)))&&i([...t.slice(0,t.indexOf(a)),a])},target:{hasPointerCapture:f,setPointerCapture:g,releasePointerCapture:m},currentTarget:{hasPointerCapture:f,setPointerCapture:g,releasePointerCapture:m},nativeEvent:n};if(o(v),!0===e.stopped)break}}}(u,o,h,(function(e){const t=e.eventObject,i=t.__r3f,s=null==i?void 0:i.handlers;if(null!=i&&i.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=_ne(e),i=a.hovered.get(t);i?i.stopped&&e.stopPropagation():(a.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const i=s[r];i?c&&!a.initialHits.includes(t)||(n(o,a.interaction.filter((e=>!a.initialHits.includes(e)))),i(e)):c&&a.initialHits.includes(t)&&n(o,a.interaction.filter((e=>!a.initialHits.includes(e))))}}))}}}}(e);return{priority:1,enabled:!0,compute(e,t,i){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(jne).reduce(((e,i)=>({...e,[i]:t(i)})),{}),update:()=>{var t;const{events:i,internal:n}=e.getState();null!=(t=n.lastEvent)&&t.current&&i.handlers&&i.handlers.onPointerMove(n.lastEvent.current)},connect:t=>{var i;const{set:n,events:r}=e.getState();null==r.disconnect||r.disconnect(),n((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(i=r.handlers)?i:[]).forEach((e=>{let[i,n]=e;const[r,o]=jne[i];t.addEventListener(r,n,{passive:o})}))},disconnect:()=>{const{set:t,events:i}=e.getState();var n;i.connected&&(Object.entries(null!=(n=i.handlers)?n:[]).forEach((e=>{let[t,n]=e;if(i&&i.connected instanceof HTMLElement){const[e]=jne[t];i.connected.removeEventListener(e,n)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}var Wne,Xne,Yne,Kne,Zne=function(){if(Xne)return Wne;function e(e,t,i){var n,r,o,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(o,r),o=r=null))}null==t&&(t=100);var c=function(){o=this,r=arguments,s=Date.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(a=e.apply(o,r),o=r=null,clearTimeout(n),n=null)},c}return Xne=1,e.debounce=e,Wne=e}(),Jne=XH(Zne),ere=Object.defineProperty,tre=Object.defineProperties,ire=Object.getOwnPropertyDescriptors,nre=Object.getOwnPropertySymbols,rre=Object.prototype.hasOwnProperty,ore=Object.prototype.propertyIsEnumerable,sre=(e,t,i)=>t in e?ere(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,are=(e,t)=>{for(var i in t||(t={}))rre.call(t,i)&&sre(e,i,t[i]);if(nre)for(var i of nre(t))ore.call(t,i)&&sre(e,i,t[i]);return e};function lre(e,t,i){if(!e)return;if(!0===i(e))return e;let n=e.child;for(;n;){const e=lre(n,t,i);if(e)return e;n=n.sibling}}function cre(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}"undefined"==typeof window||!(null==(Yne=window.document)?void 0:Yne.createElement)&&"ReactNative"!==(null==(Kne=window.navigator)?void 0:Kne.product)?r.useEffect:r.useLayoutEffect;const ure=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return ure.apply(this,arguments);console.error=ure};const hre=cre(r.createContext(null));class dre extends r.Component{render(){return r.createElement(hre.Provider,{value:this._reactInternals},this.props.children)}}function pre(){const e=function(){const e=function(){const e=r.useContext(hre);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId();return r.useMemo((()=>{for(const i of[e,null==e?void 0:e.alternate]){if(!i)continue;const e=lre(i,!1,(e=>{let i=e.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}}));if(e)return e}}),[e,t])}(),[t]=r.useState((()=>new Map));t.clear();let i=e;for(;i;){if(i.type&&"object"==typeof i.type){const e=void 0===i.type._context&&i.type.Provider===i.type?i.type:i.type._context;e&&e!==hre&&!t.has(e)&&t.set(e,r.useContext(cre(e)))}i=i.return}return t}();return r.useMemo((()=>Array.from(e.keys()).reduce(((t,i)=>n=>r.createElement(t,null,r.createElement(i.Provider,((e,t)=>tre(e,ire(t)))(are({},n),{value:e.get(i)})))),(e=>r.createElement(dre,are({},e))))),[e])}function fre(){let{debounce:e,scroll:t,polyfill:i,offsetSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const o=i||"undefined"!=typeof window&&window.ResizeObserver,[s,a]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!o)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const l=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,h=(0,r.useRef)(!1);(0,r.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[d,p,f]=(0,r.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:i,height:r,bottom:o,right:s,x:c,y:u}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:i,height:r,bottom:o,right:s,x:c,y:u};l.current.element instanceof HTMLElement&&n&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!_re(l.current.lastBounds,d)&&a(l.current.lastBounds=d)};return[e,u?Jne(e,u):e,c?Jne(e,c):e]}),[a,n,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function m(){var e;l.current.element&&(l.current.resizeObserver=new o(p),null==(e=l.current.resizeObserver)||e.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}var _,v,y;return _=f,v=Boolean(t),(0,r.useEffect)((()=>{if(v){const e=_;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[_,v]),(0,r.useEffect)((()=>{const e=y;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[y=p]),(0,r.useEffect)((()=>{g(),m()}),[t,f,p]),(0,r.useEffect)((()=>g),[]),[e=>{e&&e!==l.current.element&&(g(),l.current.element=e,l.current.scrollContainers=gre(e),m())},s,d]}function gre(e){const t=[];if(!e||e===document.body)return t;const{overflow:i,overflowX:n,overflowY:r}=window.getComputedStyle(e);return[i,n,r].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...gre(e.parentElement)]}const mre=["x","y","top","bottom","left","right","width","height"],_re=(e,t)=>mre.every((i=>e[i]===t[i])),vre=r.forwardRef((function(e,t){let{children:i,fallback:o,resize:s,style:a,gl:l,events:c=qne,eventSource:u,eventPrefix:h,shadows:d,linear:_,flat:v,legacy:y,orthographic:b,frameloop:A,dpr:w,performance:x,raycaster:S,camera:C,scene:E,onPointerMissed:T,onCreated:I,...M}=e;r.useMemo((()=>{return e=n,void Object.assign(Qie,e);var e}),[]);const k=pre(),[B,R]=fre({scroll:!0,debounce:{scroll:50,resize:0},...s}),P=r.useRef(null),D=r.useRef(null);r.useImperativeHandle(t,(()=>P.current));const L=Zie(T),[O,F]=r.useState(!1),[N,z]=r.useState(!1);if(O)throw O;if(N)throw N;const U=r.useRef(null);return Kie((()=>{const e=P.current;R.width>0&&R.height>0&&e&&(U.current||(U.current=function(e){const t=Fne.get(e),i=null==t?void 0:t.fiber,n=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const r="function"==typeof reportError?reportError:console.error,o=n||Ane(Nne,zne),s=i||Une.createContainer(o,Iie.ConcurrentRoot,null,!1,null,"",r,null);let a;t||Fne.set(e,{fiber:s,store:o});let l,c=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:i,size:n,scene:r,events:s,onCreated:u,shadows:h=!1,linear:d=!1,flat:_=!1,legacy:v=!1,orthographic:y=!1,frameloop:b="always",dpr:A=[1,2],performance:w,raycaster:x,camera:S,onPointerMissed:C}=t,E=o.getState(),T=E.gl;E.gl||E.set({gl:T=$ne(i,e)});let I=E.raycaster;I||E.set({raycaster:I=new xf});const{params:M,...k}=x||{};if(sne.equ(k,I,Vne)||Hne(I,{...k}),sne.equ(M,I.params,Vne)||Hne(I,{params:{...I.params,...M}}),!E.camera||E.camera===l&&!sne.equ(l,S,Vne)){l=S;const e=S instanceof is,t=e?S:y?new Ps(0,0,0,0,.1,1e3):new ss(75,0,.1,1e3);e||(t.position.z=5,S&&(Hne(t,S),("aspect"in S||"left"in S||"right"in S||"bottom"in S||"top"in S)&&(t.manual=!0,t.updateProjectionMatrix())),E.camera||null!=S&&S.rotation||t.lookAt(0,0,0)),E.set({camera:t}),I.camera=t}if(!E.scene){let e;r instanceof dc?e=r:(e=new dc,r&&Hne(e,r)),E.set({scene:ane(e)})}if(!E.xr){var B;const e=(e,t)=>{const i=o.getState();"never"!==i.frameloop&&zne(e,!0,i,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||Nne(t)},i={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(B=T.xr)?void 0:B.addEventListener)&&i.connect(),E.set({xr:i})}if(T.shadowMap){const e=T.shadowMap.enabled,t=T.shadowMap.type;if(T.shadowMap.enabled=!!h,sne.boo(h))T.shadowMap.type=g;else if(sne.str(h)){var R;const e={basic:p,percentage:f,soft:g,variance:m};T.shadowMap.type=null!=(R=e[h])?R:g}else sne.obj(h)&&Object.assign(T.shadowMap,h);e===T.shadowMap.enabled&&t===T.shadowMap.type||(T.shadowMap.needsUpdate=!0)}const P=Xie();P&&("enabled"in P?P.enabled=!v:"legacyMode"in P&&(P.legacyMode=v)),c||Hne(T,{outputEncoding:d?3e3:3001,toneMapping:_?ne:ae}),E.legacy!==v&&E.set((()=>({legacy:v}))),E.linear!==d&&E.set((()=>({linear:d}))),E.flat!==_&&E.set((()=>({flat:_}))),!i||sne.fun(i)||yne(i)||sne.equ(i,T,Vne)||Hne(T,i),s&&!E.events.handlers&&E.set({events:s(o)});const D=function(e,t){const i="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:n,top:r,left:o,updateStyle:s=i}=t;return{width:e,height:n,top:r,left:o,updateStyle:s}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:o}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:o,updateStyle:i}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:i}:{width:0,height:0,top:0,left:0}}(e,n);return sne.equ(D,E.size,Vne)||E.setSize(D.width,D.height,D.updateStyle,D.top,D.left),A&&E.viewport.dpr!==nne(A)&&E.setDpr(A),E.frameloop!==b&&E.setFrameloop(b),E.onPointerMissed||E.set({onPointerMissed:C}),w&&!sne.equ(w,E.performance,Vne)&&E.set((e=>({performance:{...e.performance,...w}}))),a=u,c=!0,this},render(t){return c||this.configure(),Une.updateContainer((0,SR.jsx)(Gne,{store:o,children:t,onCreated:a,rootElement:e}),s,null,(()=>{})),o},unmount(){Qne(e)}}}(e)),U.current.configure({gl:l,events:c,shadows:d,linear:_,flat:v,legacy:y,orthographic:b,frameloop:A,dpr:w,performance:x,raycaster:S,camera:C,scene:E,size:R,onPointerMissed:function(){return null==L.current?void 0:L.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:D.current),h&&e.setEvents({compute:(e,t)=>{const i=e[h+"X"],n=e[h+"Y"];t.pointer.set(i/t.size.width*2-1,-n/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==I||I(e)}}),U.current.render((0,SR.jsx)(k,{children:(0,SR.jsx)(ene,{set:z,children:(0,SR.jsx)(r.Suspense,{fallback:(0,SR.jsx)(Jie,{set:F}),children:i})})})))})),r.useEffect((()=>{const e=P.current;if(e)return()=>Qne(e)}),[]),(0,SR.jsx)("div",{ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:u?"none":"auto",...a},...M,children:(0,SR.jsx)("div",{ref:B,style:{width:"100%",height:"100%"},children:(0,SR.jsx)("canvas",{ref:P,style:{display:"block"},children:o})})})})),yre=r.forwardRef((function(e,t){return(0,SR.jsx)(dre,{children:(0,SR.jsx)(vre,{...e,ref:t})})})),bre=new Nn,Are=new Nn,wre=new Nn,xre=new sn;function Sre(e,t,i){const n=bre.setFromMatrixPosition(e.matrixWorld);n.project(t);const r=i.width/2,o=i.height/2;return[n.x*r+r,-n.y*o+o]}const Cre=e=>Math.abs(e)<1e-10?0:e;function Ere(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(";for(let r=0;16!==r;r++)n+=Cre(t[r]*e.elements[r])+(15!==r?",":")");return i+n}const Tre=(Ire=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>Ere(e,Ire));var Ire;const Mre=r.forwardRef(((e,t)=>{let{children:i,eps:n=.001,style:o,className:s,prepend:a,center:l,fullscreen:c,portal:u,distanceFactor:h,sprite:d=!1,transform:p=!1,occlude:f,onOcclude:g,castShadow:m,receiveShadow:_,material:v,geometry:b,zIndexRange:A=[16777271,0],calculatePosition:w=Sre,as:x="div",wrapperClass:S,pointerEvents:C="auto",...E}=e;const{gl:T,camera:I,scene:M,size:k,raycaster:B,events:R,viewport:P}=Rne(),[D]=r.useState((()=>document.createElement(x))),L=r.useRef(),O=r.useRef(null),F=r.useRef(0),N=r.useRef([0,0]),z=r.useRef(null),U=r.useRef(null),H=(null==u?void 0:u.current)||R.connected||T.domElement.parentNode,V=r.useRef(null),$=r.useRef(!1),G=r.useMemo((()=>f&&"blending"!==f||Array.isArray(f)&&f.length&&function(e){return e&&"object"==typeof e&&"current"in e}(f[0])),[f]);r.useLayoutEffect((()=>{const e=T.domElement;f&&"blending"===f?(e.style.zIndex=`${Math.floor(A[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[f]),r.useLayoutEffect((()=>{if(O.current){const e=L.current=CR.createRoot(D);if(M.updateMatrixWorld(),p)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=w(O.current,I,k);D.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return H&&(a?H.prepend(D):H.appendChild(D)),()=>{H&&H.removeChild(D),e.unmount()}}}),[H,p]),r.useLayoutEffect((()=>{S&&(D.className=S)}),[S]);const Q=r.useMemo((()=>p?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:l?"translate3d(-50%,-50%,0)":"none",...c&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...o}),[o,l,c,k,p]),j=r.useMemo((()=>({position:"absolute",pointerEvents:C})),[C]);r.useLayoutEffect((()=>{var e,n;$.current=!1,p?null==(e=L.current)||e.render(r.createElement("div",{ref:z,style:Q},r.createElement("div",{ref:U,style:j},r.createElement("div",{ref:t,className:s,style:o,children:i})))):null==(n=L.current)||n.render(r.createElement("div",{ref:t,style:Q,className:s,children:i}))}));const q=r.useRef(!0);Pne((e=>{if(O.current){I.updateMatrixWorld(),O.current.updateWorldMatrix(!0,!1);const e=p?N.current:w(O.current,I,k);if(p||Math.abs(F.current-I.zoom)>n||Math.abs(N.current[0]-e[0])>n||Math.abs(N.current[1]-e[1])>n){const t=function(e,t){const i=bre.setFromMatrixPosition(e.matrixWorld),n=Are.setFromMatrixPosition(t.matrixWorld),r=i.sub(n),o=t.getWorldDirection(wre);return r.angleTo(o)>Math.PI/2}(O.current,I);let i=!1;G&&(Array.isArray(f)?i=f.map((e=>e.current)):"blending"!==f&&(i=[M]));const n=q.current;if(i){const e=function(e,t,i,n){const r=bre.setFromMatrixPosition(e.matrixWorld),o=r.clone();o.project(t),xre.set(o.x,o.y),i.setFromCamera(xre,t);const s=i.intersectObjects(n,!0);if(s.length){const e=s[0].distance;return r.distanceTo(i.ray.origin)<e}return!0}(O.current,I,B,i);q.current=e&&!t}else q.current=!t;n!==q.current&&(g?g(!q.current):D.style.display=q.current?"block":"none");const r=Math.floor(A[0]/2),o=f?G?[A[0],r]:[r-1,0]:A;if(D.style.zIndex=`${function(e,t,i){if(t instanceof ss||t instanceof Ps){const n=bre.setFromMatrixPosition(e.matrixWorld),r=Are.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(r),s=(i[1]-i[0])/(t.far-t.near),a=i[1]-s*t.far;return Math.round(s*o+a)}}(O.current,I,o)}`,p){const[e,t]=[k.width/2,k.height/2],i=I.projectionMatrix.elements[5]*t,{isOrthographicCamera:n,top:r,left:o,bottom:s,right:a}=I,l=Tre(I.matrixWorldInverse),c=n?`scale(${i})translate(${Cre(-(a+o)/2)}px,${Cre((r+s)/2)}px)`:`translateZ(${i}px)`;let u=O.current.matrixWorld;d&&(u=I.matrixWorldInverse.clone().transpose().copyPosition(u).scale(O.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),D.style.width=k.width+"px",D.style.height=k.height+"px",D.style.perspective=n?"":`${i}px`,z.current&&U.current&&(z.current.style.transform=`${c}${l}translate(${e}px,${t}px)`,U.current.style.transform=((e,t)=>Ere(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)"))(u,1/((h||10)/400)))}else{const t=void 0===h?1:function(e,t){if(t instanceof Ps)return t.zoom;if(t instanceof ss){const i=bre.setFromMatrixPosition(e.matrixWorld),n=Are.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,o=i.distanceTo(n);return 1/(2*Math.tan(r/2)*o)}return 1}(O.current,I)*h;D.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}N.current=e,F.current=I.zoom}}if(!G&&V.current&&!$.current)if(p){if(z.current){const e=z.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=I;if(t||b)E.scale&&(Array.isArray(E.scale)?E.scale instanceof Nn?V.current.scale.copy(E.scale.clone().divideScalar(1)):V.current.scale.set(1/E.scale[0],1/E.scale[1],1/E.scale[2]):V.current.scale.setScalar(1/E.scale));else{const t=(h||10)/400,i=e.clientWidth*t,n=e.clientHeight*t;V.current.scale.set(i,n,1)}$.current=!0}}}else{const t=D.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/P.factor,i=t.clientWidth*e,n=t.clientHeight*e;V.current.scale.set(i,n,1),$.current=!0}V.current.lookAt(e.camera.position)}}));const W=r.useMemo((()=>({vertexShader:p?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[p]);return r.createElement("group",PR({},E,{ref:O}),f&&!G&&r.createElement("mesh",{castShadow:m,receiveShadow:_,ref:V},b||r.createElement("planeGeometry",null),v||r.createElement("shaderMaterial",{side:y,vertexShader:W.vertexShader,fragmentShader:W.fragmentShader})))})),kre=e=>{let t;const i=new Set,n=(e,n)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),i.forEach((i=>i(t,e)))}},r=()=>t,o={setState:n,getState:r,getInitialState:()=>s,subscribe:e=>(i.add(e),()=>i.delete(e))},s=t=e(n,r,o);return o},Bre=e=>e,Rre=e=>{const t=(e=>e?kre(e):kre)(e),i=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bre;const i=r.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return r.useDebugValue(i),i}(t,e);return Object.assign(i,t),i};let Pre=0;const Dre=(e=>e?Rre(e):Rre)((e=>(Zd.onStart=(t,i,n)=>{e({active:!0,item:t,loaded:i,total:n,progress:(i-Pre)/(n-Pre)*100})},Zd.onLoad=()=>{e({active:!1})},Zd.onError=t=>e((e=>({errors:[...e.errors,t]}))),Zd.onProgress=(t,i,n)=>{i===n&&(Pre=n),e({active:!0,item:t,loaded:i,total:n,progress:(i-Pre)/(n-Pre)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})));var Lre=Object.defineProperty,Ore=(e,t,i)=>(((e,t,i)=>{t in e?Lre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i);const Fre=new pr,Nre=new fs,zre=Math.cos(Math.PI/180*70),Ure=(e,t)=>(e%t+t)%t;let Hre=class extends qi{constructor(e,t){super(),Ore(this,"object"),Ore(this,"domElement"),Ore(this,"enabled",!0),Ore(this,"target",new Nn),Ore(this,"minDistance",0),Ore(this,"maxDistance",1/0),Ore(this,"minZoom",0),Ore(this,"maxZoom",1/0),Ore(this,"minPolarAngle",0),Ore(this,"maxPolarAngle",Math.PI),Ore(this,"minAzimuthAngle",-1/0),Ore(this,"maxAzimuthAngle",1/0),Ore(this,"enableDamping",!1),Ore(this,"dampingFactor",.05),Ore(this,"enableZoom",!0),Ore(this,"zoomSpeed",1),Ore(this,"enableRotate",!0),Ore(this,"rotateSpeed",1),Ore(this,"enablePan",!0),Ore(this,"panSpeed",1),Ore(this,"screenSpacePanning",!0),Ore(this,"keyPanSpeed",7),Ore(this,"zoomToCursor",!1),Ore(this,"autoRotate",!1),Ore(this,"autoRotateSpeed",2),Ore(this,"reverseOrbit",!1),Ore(this,"reverseHorizontalOrbit",!1),Ore(this,"reverseVerticalOrbit",!1),Ore(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ore(this,"mouseButtons",{LEFT:a.ROTATE,MIDDLE:a.DOLLY,RIGHT:a.PAN}),Ore(this,"touches",{ONE:l.ROTATE,TWO:l.DOLLY_PAN}),Ore(this,"target0"),Ore(this,"position0"),Ore(this,"zoom0"),Ore(this,"_domElementKeyEvents",null),Ore(this,"getPolarAngle"),Ore(this,"getAzimuthalAngle"),Ore(this,"setPolarAngle"),Ore(this,"setAzimuthalAngle"),Ore(this,"getDistance"),Ore(this,"getZoomScale"),Ore(this,"listenToKeyEvents"),Ore(this,"stopListenToKeyEvents"),Ore(this,"saveState"),Ore(this,"reset"),Ore(this,"update"),Ore(this,"connect"),Ore(this,"dispose"),Ore(this,"dollyIn"),Ore(this,"dollyOut"),Ore(this,"getScale"),Ore(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=e=>{let t=Ure(e,2*Math.PI),n=h.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.phi=t-n,i.update()},this.setAzimuthalAngle=e=>{let t=Ure(e,2*Math.PI),n=h.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.theta=t-n,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Z),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Z),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(n),i.update(),c=s.NONE},this.update=(()=>{const t=new Nn,r=new Nn(0,1,0),o=(new Fn).setFromUnitVectors(e.up,r),a=o.clone().invert(),l=new Nn,g=new Fn,m=2*Math.PI;return function(){const _=i.object.position;o.setFromUnitVectors(e.up,r),a.copy(o).invert(),t.copy(_).sub(i.target),t.applyQuaternion(o),h.setFromVector3(t),i.autoRotate&&c===s.NONE&&k(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let v=i.minAzimuthAngle,y=i.maxAzimuthAngle;isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=m:v>Math.PI&&(v-=m),y<-Math.PI?y+=m:y>Math.PI&&(y-=m),h.theta=v<=y?Math.max(v,Math.min(y,h.theta)):h.theta>(v+y)/2?Math.max(v,h.theta):Math.min(y,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),i.zoomToCursor&&E||i.object.isOrthographicCamera?h.radius=z(h.radius):h.radius=z(h.radius*p),t.setFromSpherical(h),t.applyQuaternion(a),_.copy(i.target).add(t),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),!0===i.enableDamping?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),f.set(0,0,0));let b=!1;if(i.zoomToCursor&&E){let n=null;if(i.object instanceof ss&&i.object.isPerspectiveCamera){const e=t.length();n=z(e*p);const r=e-n;i.object.position.addScaledVector(S,r),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const e=new Nn(C.x,C.y,0);e.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),b=!0;const r=new Nn(C.x,C.y,0);r.unproject(i.object),i.object.position.sub(r).add(e),i.object.updateMatrixWorld(),n=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==n&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(n).add(i.object.position):(Fre.origin.copy(i.object.position),Fre.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Fre.direction))<zre?e.lookAt(i.target):(Nre.setFromNormalAndCoplanarPoint(i.object.up,i.target),Fre.intersectPlane(Nre,i.target))))}else i.object instanceof Ps&&i.object.isOrthographicCamera&&(b=1!==p,b&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,E=!1,!!(b||l.distanceToSquared(i.object.position)>u||8*(1-g.dot(i.object.quaternion))>u)&&(i.dispatchEvent(n),l.copy(i.object.position),g.copy(i.object.quaternion),b=!1,!0)}})(),this.connect=e=>{i.domElement=e,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",J),i.domElement.addEventListener("pointerdown",W),i.domElement.addEventListener("pointercancel",Y),i.domElement.addEventListener("wheel",K)},this.dispose=()=>{var e,t,n,r,o,s;i.domElement&&(i.domElement.style.touchAction="auto"),null==(e=i.domElement)||e.removeEventListener("contextmenu",J),null==(t=i.domElement)||t.removeEventListener("pointerdown",W),null==(n=i.domElement)||n.removeEventListener("pointercancel",Y),null==(r=i.domElement)||r.removeEventListener("wheel",K),null==(o=i.domElement)||o.ownerDocument.removeEventListener("pointermove",X),null==(s=i.domElement)||s.ownerDocument.removeEventListener("pointerup",Y),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",Z)};const i=this,n={type:"change"},r={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=s.NONE;const u=1e-6,h=new Ef,d=new Ef;let p=1;const f=new Nn,g=new sn,m=new sn,_=new sn,v=new sn,y=new sn,b=new sn,A=new sn,w=new sn,x=new sn,S=new Nn,C=new sn;let E=!1;const T=[],I={};function M(){return Math.pow(.95,i.zoomSpeed)}function k(e){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=e:d.theta-=e}function B(e){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=e:d.phi-=e}const R=(()=>{const e=new Nn;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),f.add(e)}})(),P=(()=>{const e=new Nn;return function(t,n){!0===i.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(i.object.up,e)),e.multiplyScalar(t),f.add(e)}})(),D=(()=>{const e=new Nn;return function(t,n){const r=i.domElement;if(r&&i.object instanceof ss&&i.object.isPerspectiveCamera){const o=i.object.position;e.copy(o).sub(i.target);let s=e.length();s*=Math.tan(i.object.fov/2*Math.PI/180),R(2*t*s/r.clientHeight,i.object.matrix),P(2*n*s/r.clientHeight,i.object.matrix)}else r&&i.object instanceof Ps&&i.object.isOrthographicCamera?(R(t*(i.object.right-i.object.left)/i.object.zoom/r.clientWidth,i.object.matrix),P(n*(i.object.top-i.object.bottom)/i.object.zoom/r.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function L(e){i.object instanceof ss&&i.object.isPerspectiveCamera||i.object instanceof Ps&&i.object.isOrthographicCamera?p=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(e){L(p/e)}function F(e){L(p*e)}function N(e){if(!i.zoomToCursor||!i.domElement)return;E=!0;const t=i.domElement.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=t.width,s=t.height;C.x=n/o*2-1,C.y=-r/s*2+1,S.set(C.x,C.y,1).unproject(i.object).sub(i.object.position).normalize()}function z(e){return Math.max(i.minDistance,Math.min(i.maxDistance,e))}function U(e){g.set(e.clientX,e.clientY)}function H(e){v.set(e.clientX,e.clientY)}function V(){if(1==T.length)g.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);g.set(e,t)}}function $(){if(1==T.length)v.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);v.set(e,t)}}function G(){const e=T[0].pageX-T[1].pageX,t=T[0].pageY-T[1].pageY,i=Math.sqrt(e*e+t*t);A.set(0,i)}function Q(e){if(1==T.length)m.set(e.pageX,e.pageY);else{const t=te(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);m.set(i,n)}_.subVectors(m,g).multiplyScalar(i.rotateSpeed);const t=i.domElement;t&&(k(2*Math.PI*_.x/t.clientHeight),B(2*Math.PI*_.y/t.clientHeight)),g.copy(m)}function j(e){if(1==T.length)y.set(e.pageX,e.pageY);else{const t=te(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);y.set(i,n)}b.subVectors(y,v).multiplyScalar(i.panSpeed),D(b.x,b.y),v.copy(y)}function q(e){const t=te(e),n=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(n*n+r*r);w.set(0,o),x.set(0,Math.pow(w.y/A.y,i.zoomSpeed)),O(x.y),A.copy(w)}function W(e){var t,n;!1!==i.enabled&&(0===T.length&&(null==(t=i.domElement)||t.ownerDocument.addEventListener("pointermove",X),null==(n=i.domElement)||n.ownerDocument.addEventListener("pointerup",Y)),function(e){T.push(e)}(e),"touch"===e.pointerType?function(e){switch(ee(e),T.length){case 1:switch(i.touches.ONE){case l.ROTATE:if(!1===i.enableRotate)return;V(),c=s.TOUCH_ROTATE;break;case l.PAN:if(!1===i.enablePan)return;$(),c=s.TOUCH_PAN;break;default:c=s.NONE}break;case 2:switch(i.touches.TWO){case l.DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&G(),i.enablePan&&$(),c=s.TOUCH_DOLLY_PAN;break;case l.DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&G(),i.enableRotate&&V(),c=s.TOUCH_DOLLY_ROTATE;break;default:c=s.NONE}break;default:c=s.NONE}c!==s.NONE&&i.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=i.mouseButtons.LEFT;break;case 1:t=i.mouseButtons.MIDDLE;break;case 2:t=i.mouseButtons.RIGHT;break;default:t=-1}switch(t){case a.DOLLY:if(!1===i.enableZoom)return;!function(e){N(e),A.set(e.clientX,e.clientY)}(e),c=s.DOLLY;break;case a.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enablePan)return;H(e),c=s.PAN}else{if(!1===i.enableRotate)return;U(e),c=s.ROTATE}break;case a.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enableRotate)return;U(e),c=s.ROTATE}else{if(!1===i.enablePan)return;H(e),c=s.PAN}break;default:c=s.NONE}c!==s.NONE&&i.dispatchEvent(r)}(e))}function X(e){!1!==i.enabled&&("touch"===e.pointerType?function(e){switch(ee(e),c){case s.TOUCH_ROTATE:if(!1===i.enableRotate)return;Q(e),i.update();break;case s.TOUCH_PAN:if(!1===i.enablePan)return;j(e),i.update();break;case s.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;!function(e){i.enableZoom&&q(e),i.enablePan&&j(e)}(e),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;!function(e){i.enableZoom&&q(e),i.enableRotate&&Q(e)}(e),i.update();break;default:c=s.NONE}}(e):function(e){if(!1!==i.enabled)switch(c){case s.ROTATE:if(!1===i.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),_.subVectors(m,g).multiplyScalar(i.rotateSpeed);const t=i.domElement;t&&(k(2*Math.PI*_.x/t.clientHeight),B(2*Math.PI*_.y/t.clientHeight)),g.copy(m),i.update()}(e);break;case s.DOLLY:if(!1===i.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),x.subVectors(w,A),x.y>0?O(M()):x.y<0&&F(M()),A.copy(w),i.update()}(e);break;case s.PAN:if(!1===i.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,v).multiplyScalar(i.panSpeed),D(b.x,b.y),v.copy(y),i.update()}(e)}}(e))}function Y(e){var t,n,r;!function(e){delete I[e.pointerId];for(let t=0;t<T.length;t++)if(T[t].pointerId==e.pointerId)return void T.splice(t,1)}(e),0===T.length&&(null==(t=i.domElement)||t.releasePointerCapture(e.pointerId),null==(n=i.domElement)||n.ownerDocument.removeEventListener("pointermove",X),null==(r=i.domElement)||r.ownerDocument.removeEventListener("pointerup",Y)),i.dispatchEvent(o),c=s.NONE}function K(e){!1===i.enabled||!1===i.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),i.dispatchEvent(r),function(e){N(e),e.deltaY<0?F(M()):e.deltaY>0&&O(M()),i.update()}(e),i.dispatchEvent(o))}function Z(e){!1!==i.enabled&&!1!==i.enablePan&&function(e){let t=!1;switch(e.code){case i.keys.UP:D(0,i.keyPanSpeed),t=!0;break;case i.keys.BOTTOM:D(0,-i.keyPanSpeed),t=!0;break;case i.keys.LEFT:D(i.keyPanSpeed,0),t=!0;break;case i.keys.RIGHT:D(-i.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),i.update())}(e)}function J(e){!1!==i.enabled&&e.preventDefault()}function ee(e){let t=I[e.pointerId];void 0===t&&(t=new sn,I[e.pointerId]=t),t.set(e.pageX,e.pageY)}function te(e){const t=e.pointerId===T[0].pointerId?T[1]:T[0];return I[t.pointerId]}this.dollyIn=function(){F(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()),i.update()},this.dollyOut=function(){O(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()),i.update()},this.getScale=()=>p,this.setScale=e=>{L(e),i.update()},this.getZoomScale=()=>M(),void 0!==t&&this.connect(t),this.update()}};function Vre(){var e=Object.create(null);function t(n,r){var o=n.id,s=n.name,a=n.dependencies;void 0===a&&(a=[]);var l=n.init;void 0===l&&(l=function(){});var c=n.getTransferables;if(void 0===c&&(c=null),!e[o])try{a=a.map((function(i){return i&&i.isWorkerModule&&(t(i,(function(e){if(e instanceof Error)throw e})),i=e[i.id].value),i})),l=i("<"+s+">.init",l),c&&(c=i("<"+s+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,a):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},r(u)}catch(e){e&&e.noLog||console.error(e),r(e)}}function i(e,t){var i=void 0;self.troikaDefine=function(e){return i=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(e){console.error(e)}return URL.revokeObjectURL(n),delete self.troikaDefine,i}self.addEventListener("message",(function(i){var n=i.data,r=n.messageId,o=n.action,s=n.data;try{"registerModule"===o&&t(s,(function(e){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function(t,i){var n,r=t.id,o=t.args;e[r]&&"function"==typeof e[r].value||i(new Error("Worker module "+r+": not found or its 'init' did not return a function"));try{var s=(n=e[r]).value.apply(n,o);s&&"function"==typeof s.then?s.then(a,(function(e){return i(e instanceof Error?e:new Error(""+e))})):a(s)}catch(e){i(e)}function a(t){try{var n=e[r].getTransferables&&e[r].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),i(t,n)}catch(e){console.error(e),i(e)}}}(s,(function(e,t){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:r,success:!1,error:e.stack})}}))}var $re=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return $re=function(){return e},e},Gre=0,Qre=0,jre=!1,qre=Object.create(null),Wre=Object.create(null),Xre=Object.create(null);function Yre(e){if(!(e&&"function"==typeof e.init||jre))throw new Error("requires `options.init` function");var t=e.dependencies,i=e.init,n=e.getTransferables,r=e.workerId,o=function(e){var t=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var i=e.dependencies,n=e.init;i=Array.isArray(i)?i.map((function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e})):[];var r=Promise.all(i).then((function(e){return n.apply(null,e)}));return t._getInitResult=function(){return r},r},t}(e);null==r&&(r="#default");var s="workerModule"+ ++Gre,a=e.name||s,l=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!$re())return o.apply(void 0,e);if(!l){l=Zre(r,"registerModule",c.workerModuleData);var i=function(){l=null,Wre[r].delete(i)};(Wre[r]||(Wre[r]=new Set)).add(i)}return l.then((function(t){if(t.isCallable)return Zre(r,"callModule",{id:s,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(jre=!0,e=Yre({workerId:r,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+Kre(e)+"\n)}"}),jre=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),c.workerModuleData={isWorkerModule:!0,id:s,name:a,dependencies:t,init:Kre(i),getTransferables:n&&Kre(n)},c.onMainThread=o,c}function Kre(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Zre(e,t,i){return new Promise((function(n,r){var o=++Qre;Xre[o]=function(e){e.success?n(e.result):r(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=qre[e];if(!t){var i=Kre(Vre);(t=qre[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+i+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,i=t.messageId,n=Xre[i];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete Xre[i],n(t)}}return t}(e).postMessage({messageId:o,action:t,data:i})}))}function Jre(){var e=function(e){function t(e,t,i,n,r,o,s,a){var l=1-s;a.x=l*l*e+2*l*s*i+s*s*r,a.y=l*l*t+2*l*s*n+s*s*o}function i(e,t,i,n,r,o,s,a,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*i+3*u*l*l*r+l*l*l*s,c.y=u*u*u*t+3*u*u*l*n+3*u*l*l*o+l*l*l*a}function n(e,t){for(var i,n,r,o,s,a=/([MLQCZ])([^MLQCZ]*)/g;i=a.exec(e);){var l=i[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(i[1]){case"M":o=n=l[0],s=r=l[1];break;case"L":l[0]===o&&l[1]===s||t("L",o,s,o=l[0],s=l[1]);break;case"Q":t("Q",o,s,o=l[2],s=l[3],l[0],l[1]);break;case"C":t("C",o,s,o=l[4],s=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===n&&s===r||t("L",o,s,n,r)}}}function r(e,r,o){void 0===o&&(o=16);var s={x:0,y:0};n(e,(function(e,n,a,l,c,u,h,d,p){switch(e){case"L":r(n,a,l,c);break;case"Q":for(var f=n,g=a,m=1;m<o;m++)t(n,a,u,h,l,c,m/(o-1),s),r(f,g,s.x,s.y),f=s.x,g=s.y;break;case"C":for(var _=n,v=a,y=1;y<o;y++)i(n,a,u,h,d,p,l,c,y/(o-1),s),r(_,v,s.x,s.y),_=s.x,v=s.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var i=e.getContext?e.getContext("webgl",a):e,n=s.get(i);if(!n){var r="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext,o={},l={},c={},u=-1,h=[];function d(e){var t=o[e];if(!t&&!(t=o[e]=i.getExtension(e)))throw new Error(e+" not supported");return t}function p(e,t){var n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}function f(e,t,n,o){if(!l[e]){var s={},a={},c=i.createProgram();i.attachShader(c,p(t,i.VERTEX_SHADER)),i.attachShader(c,p(n,i.FRAGMENT_SHADER)),i.linkProgram(c),l[e]={program:c,transaction:function(e){i.useProgram(c),e({setUniform:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var o=a[t]||(a[t]=i.getUniformLocation(c,t));i["uniform"+e].apply(i,[o].concat(n))},setAttribute:function(e,t,n,o,a){var l=s[e];l||(l=s[e]={buf:i.createBuffer(),loc:i.getAttribLocation(c,e),data:null}),i.bindBuffer(i.ARRAY_BUFFER,l.buf),i.vertexAttribPointer(l.loc,t,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l.loc),r?i.vertexAttribDivisor(l.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),a!==l.data&&(i.bufferData(i.ARRAY_BUFFER,a,n),l.data=a)}})}}}l[e].transaction(o)}function g(e,t){u++;try{i.activeTexture(i.TEXTURE0+u);var n=c[e];n||(n=c[e]=i.createTexture(),i.bindTexture(i.TEXTURE_2D,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.bindTexture(i.TEXTURE_2D,n),t(n,u)}finally{u--}}function m(e,t,n){var r=i.createFramebuffer();h.push(r),i.bindFramebuffer(i.FRAMEBUFFER,r),i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);try{n(r)}finally{i.deleteFramebuffer(r),i.bindFramebuffer(i.FRAMEBUFFER,h[--h.length-1]||null)}}function _(){o={},l={},c={},u=-1,h.length=0}i.canvas.addEventListener("webglcontextlost",(function(e){_(),e.preventDefault()}),!1),s.set(i,n={gl:i,isWebGL2:r,getExtension:d,withProgram:f,withTexture:g,withTextureFramebuffer:m,handleContextLoss:_})}t(n)}function c(e,t,i,n,r,s,a,c){void 0===a&&(a=15),void 0===c&&(c=null),l(e,(function(e){var l=e.gl,u=e.withProgram;(0,e.withTexture)("copy",(function(e,h){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r,s,0,l.RGBA,l.UNSIGNED_BYTE,t),u("copy",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),l.bindFramebuffer(l.FRAMEBUFFER,c||null),l.disable(l.BLEND),l.colorMask(8&a,4&a,2&a,1&a),l.viewport(i,n,r,s),l.scissor(i,n,r,s),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,i){var n=e.width,r=e.height;l(e,(function(o){var s=o.gl,a=new Uint8Array(n*r*4);s.readPixels(0,0,n,r,s.RGBA,s.UNSIGNED_BYTE,a),e.width=t,e.height=i,c(s,a,0,0,n,r)}))}});function h(e,t,i,n,o,s){void 0===s&&(s=1);var a=new Uint8Array(e*t),l=n[2]-n[0],c=n[3]-n[1],u=[];r(i,(function(e,t,i,n){u.push({x1:e,y1:t,x2:i,y2:n,minX:Math.min(e,i),minY:Math.min(t,n),maxX:Math.max(e,i),maxY:Math.max(t,n)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=m(n[0]+l*(h+.5)/e,n[1]+c*(d+.5)/t),g=Math.pow(1-Math.abs(p)/o,s)/2;p<0&&(g=1-g),g=Math.max(0,Math.min(255,Math.round(255*g))),a[d*e+h]=g}return a;function m(e,t){for(var i=1/0,n=1/0,r=u.length;r--;){var o=u[r];if(o.maxX+n<=e)break;if(e+n>o.minX&&t-n<o.maxY&&t+n>o.minY){var s=f(e,t,o.x1,o.y1,o.x2,o.y2);s<i&&(i=s,n=Math.sqrt(i))}}return function(e,t){for(var i=0,n=u.length;n--;){var r=u[n];if(r.maxX<=e)break;r.y1>t!=r.y2>t&&e<(r.x2-r.x1)*(t-r.y1)/(r.y2-r.y1)+r.x1&&(i+=r.y1<r.y2?1:-1)}return 0!==i}(e,t)&&(n=-n),n}}function d(e,t,i,n,r,o,s,a,l,c){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0),p(e,t,i,n,r,o,s,null,a,l,c)}function p(e,t,i,n,r,o,s,a,l,u,d){void 0===o&&(o=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0);for(var p=h(e,t,i,n,r,o),f=new Uint8Array(4*p.length),g=0;g<p.length;g++)f[4*g+d]=p[g];c(s,f,l,u,e,t,1<<3-d,a)}function f(e,t,i,n,r,o){var s=r-i,a=o-n,l=s*s+a*a,c=l?Math.max(0,Math.min(1,((e-i)*s+(t-n)*a)/l)):0,u=e-(i+c*s),h=t-(n+c*a);return u*u+h*h}var g=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:p}),m=new Float32Array([0,0,2,0,0,2]),_=null,v=!1,y={},b=new WeakMap;function A(e){if(!v&&!C(e))throw new Error("WebGL generation not supported")}function w(e,t,i,n,r,o,s){if(void 0===o&&(o=1),void 0===s&&(s=null),!s&&!(s=_)){var a="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!a)throw new Error("OffscreenCanvas or DOM canvas not supported");s=_=a.getContext("webgl",{depth:!1})}A(s);var c=new Uint8Array(e*t*4);l(s,(function(s){var a=s.gl,l=s.withTexture,u=s.withTextureFramebuffer;l("readable",(function(s,l){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e,t,0,a.RGBA,a.UNSIGNED_BYTE,null),u(s,l,(function(s){S(e,t,i,n,r,o,a,s,0,0,0),a.readPixels(0,0,e,t,a.RGBA,a.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<c.length;h+=4)u[d++]=c[h];return u}function x(e,t,i,n,r,o,s,a,l,c){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0),S(e,t,i,n,r,o,s,null,a,l,c)}function S(e,t,i,n,s,a,c,u,h,d,p){void 0===a&&(a=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),A(c);var f=[];r(i,(function(e,t,i,n){f.push(e,t,i,n)})),f=new Float32Array(f),l(c,(function(i){var r=i.gl,l=i.isWebGL2,c=i.getExtension,g=i.withProgram,_=i.withTexture,v=i.withTextureFramebuffer,y=i.handleContextLoss;if(_("rawDistances",(function(i,_){e===i._lastWidth&&t===i._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i._lastWidth=e,i._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),g("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(o){var u=o.setAttribute,h=o.setUniform,d=!l&&c("ANGLE_instanced_arrays"),p=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,m),u("aLineSegment",4,r.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(n)),h("1f","uMaxDistance",s),h("1f","uExponent",a),v(i,_,(function(i){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:p.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,f.length/4)}))})),g("post",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(i){i.setAttribute("aUV",2,r.STATIC_DRAW,0,m),i.setUniform("1i","tex",_),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===p,1===p,2===p,3===p),r.viewport(h,d,e,t),r.scissor(h,d,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw y(),new Error("webgl context lost")}))}function C(e){var t=e&&e!==_?e.canvas||e:y,i=b.get(t);if(void 0===i){v=!0;var n=null;try{var r=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);i=o&&r.length===o.length&&o.every((function(e,t){return e===r[t]})),i||(n="bad trial run results",console.info(r,o))}catch(e){i=!1,n=e.message}n&&console.warn("WebGL SDF generation not supported:",n),v=!1,b.set(t,i)}return i}var E=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:x,generateIntoFramebuffer:S,isSupported:C});return e.forEachPathCommand=n,e.generate=function(e,t,i,n,r,o){void 0===r&&(r=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===o&&(o=1);try{return w.apply(E,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),h.apply(g,arguments)}},e.generateIntoCanvas=function(e,t,i,n,r,o,s,a,l,c){void 0===r&&(r=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return x.apply(E,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),d.apply(g,arguments)}},e.javascript=g,e.pathToLineSegments=r,e.webgl=E,e.webglUtils=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const eoe=/\bvoid\s+main\s*\(\s*\)\s*{/g;function toe(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let i=As[t];return i?toe(i):e}))}const ioe=[];for(let dse=0;dse<256;dse++)ioe[dse]=(dse<16?"0":"")+dse.toString(16);const noe=Object.assign||function(){let e=arguments[0];for(let t=1,i=arguments.length;t<i;t++){let i=arguments[t];if(i)for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},roe=Date.now(),ooe=new WeakMap,soe=new Map;let aoe=1e10;function loe(e,t){const i=function(e){const t=JSON.stringify(e,uoe);let i=doe.get(t);return null==i&&doe.set(t,i=++hoe),i}(t);let n=ooe.get(e);if(n||ooe.set(e,n=Object.create(null)),n[i])return new n[i];const r=`_onBeforeCompile${i}`,o=function(n,o){e.onBeforeCompile.call(this,n,o);const s=this.customProgramCacheKey()+"|"+n.vertexShader+"|"+n.fragmentShader;let a=soe[s];if(!a){const e=function(e,t,i,n){let{vertexShader:r,fragmentShader:o}=t,{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:f,timeUniform:g}=i;if(s=s||"",a=a||"",l=l||"",u=u||"",h=h||"",d=d||"",(c||f)&&(r=toe(r)),(p||f)&&(o=toe(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),f){let e=f({vertexShader:r,fragmentShader:o});r=e.vertexShader,o=e.fragmentShader}if(p){let e=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),d=`${p}\n${e.join("\n")}\n${d}`}if(g){const e=`\nuniform float ${g};\n`;s=e+s,u=e+u}return c&&(s=`${s}\nvoid troikaVertexTransform${n}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${c}\n}\n`,a=`\ntroika_position_${n} = vec3(position);\ntroika_normal_${n} = vec3(normal);\ntroika_uv_${n} = vec2(uv);\ntroikaVertexTransform${n}(troika_position_${n}, troika_normal_${n}, troika_uv_${n});\n${a}\n`,r=(r=`vec3 troika_position_${n};\nvec3 troika_normal_${n};\nvec2 troika_uv_${n};\n${r}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,i,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,i))?t:`troika_${t}_${n}`)),e.map&&e.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,`troika_uv_${n}`))),r=coe(r,n,s,a,l),o=coe(o,n,u,h,d),{vertexShader:r,fragmentShader:o}}(this,n,t,i);a=soe[s]=e}n.vertexShader=a.vertexShader,n.fragmentShader=a.fragmentShader,noe(n.uniforms,this.uniforms),t.timeUniform&&(n.uniforms[t.timeUniform]={get value(){return Date.now()-roe}}),this[r]&&this[r](n)},s=function(){return a(t.chained?e:e.clone())},a=function(n){const r=Object.create(n,l);return Object.defineProperty(r,"baseMaterial",{value:e}),Object.defineProperty(r,"id",{value:aoe++}),r.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(ioe[255&e]+ioe[e>>8&255]+ioe[e>>16&255]+ioe[e>>24&255]+"-"+ioe[255&t]+ioe[t>>8&255]+"-"+ioe[t>>16&15|64]+ioe[t>>24&255]+"-"+ioe[63&i|128]+ioe[i>>8&255]+"-"+ioe[i>>16&255]+ioe[i>>24&255]+ioe[255&n]+ioe[n>>8&255]+ioe[n>>16&255]+ioe[n>>24&255]).toUpperCase()}(),r.uniforms=noe({},n.uniforms,t.uniforms),r.defines=noe({},n.defines,t.defines),r.defines[`TROIKA_DERIVED_MATERIAL_${i}`]="",r.extensions=noe({},n.extensions,t.extensions),r._listeners=void 0,r},l={constructor:{value:s},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:t=>{e.type=t}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){const t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+i}},onBeforeCompile:{get:()=>o,set(e){this[r]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(noe(this.extensions,t.extensions),noe(this.defines,t.defines),noe(this.uniforms,es.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return a(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let i=this._depthMaterial;return i||(i=this._depthMaterial=loe(e.isDerivedMaterial?e.getDepthMaterial():new Gl({depthPacking:Yt}),t),i.defines.IS_DEPTH_MATERIAL="",i.uniforms=this.uniforms),i}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let i=this._distanceMaterial;return i||(i=this._distanceMaterial=loe(e.isDerivedMaterial?e.getDistanceMaterial():new Ql,t),i.defines.IS_DISTANCE_MATERIAL="",i.uniforms=this.uniforms),i}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:i}=this;t&&t.dispose(),i&&i.dispose(),e.dispose.call(this)}}};return n[i]=s,new s}function coe(e,t,i,n,r){return(n||r||i)&&(e=e.replace(eoe,`\n${i}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${n}\n  troikaOrigMain${t}();\n  ${r}\n}`),e}function uoe(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let hoe=0;const doe=new Map,poe=Yre({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var i=t._bin,n=new Uint8Array(e);if("ttcf"==i.readASCII(n,0,4)){var r=4;i.readUshort(n,r),r+=2,i.readUshort(n,r),r+=2;var o=i.readUint(n,r);r+=4;for(var s=[],a=0;a<o;a++){var l=i.readUint(n,r);r+=4,s.push(t._readFont(n,l))}return s}return[t._readFont(n,0)]},_readFont:function(e,i){var n=t._bin,r=i;n.readFixed(e,i),i+=4;var o=n.readUshort(e,i);i+=2,n.readUshort(e,i),i+=2,n.readUshort(e,i),i+=2,n.readUshort(e,i),i+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],a={_data:e,_offset:r},l={},c=0;c<o;c++){var u=n.readASCII(e,i,4);i+=4,n.readUint(e,i),i+=4;var h=n.readUint(e,i);i+=4;var d=n.readUint(e,i);i+=4,l[u]={offset:h,length:d}}for(c=0;c<s.length;c++){var p=s[c];l[p]&&(a[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,a))}return a},_tabOffset:function(e,i,n){for(var r=t._bin,o=r.readUshort(e,n+4),s=n+12,a=0;a<o;a++){var l=r.readASCII(e,s,4);s+=4,r.readUint(e,s),s+=4;var c=r.readUint(e,s);if(s+=4,r.readUint(e,s),s+=4,l==i)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,i){return t._bin.readShort(e,i)/16384},readInt:function(e,i){return t._bin._view(e).getInt32(i)},readInt8:function(e,i){return t._bin._view(e).getInt8(i)},readShort:function(e,i){return t._bin._view(e).getInt16(i)},readUshort:function(e,i){return t._bin._view(e).getUint16(i)},readUshorts:function(e,i,n){for(var r=[],o=0;o<n;o++)r.push(t._bin.readUshort(e,i+2*o));return r},readUint:function(e,i){return t._bin._view(e).getUint32(i)},readUint64:function(e,i){return 4294967296*t._bin.readUint(e,i)+t._bin.readUint(e,i+4)},readASCII:function(e,t,i){for(var n="",r=0;r<i;r++)n+=String.fromCharCode(e[t+r]);return n},readUnicode:function(e,t,i){for(var n="",r=0;r<i;r++){var o=e[t++]<<8|e[t++];n+=String.fromCharCode(o)}return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,i,n){var r=t._bin._tdec;return r&&0==i&&n==e.length?r.decode(e):t._bin.readASCII(e,i,n)},readBytes:function(e,t,i){for(var n=[],r=0;r<i;r++)n.push(e[t+r]);return n},readASCIIArray:function(e,t,i){for(var n=[],r=0;r<i;r++)n.push(String.fromCharCode(e[t+r]));return n},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,i,n,r,o){var s=t._bin,a={},l=i;s.readFixed(e,i),i+=4;var c=s.readUshort(e,i);i+=2;var u=s.readUshort(e,i);i+=2;var h=s.readUshort(e,i);return i+=2,a.scriptList=t._lctf.readScriptList(e,l+c),a.featureList=t._lctf.readFeatureList(e,l+u),a.lookupList=t._lctf.readLookupList(e,l+h,o),a},t._lctf.readLookupList=function(e,i,n){var r=t._bin,o=i,s=[],a=r.readUshort(e,i);i+=2;for(var l=0;l<a;l++){var c=r.readUshort(e,i);i+=2;var u=t._lctf.readLookupTable(e,o+c,n);s.push(u)}return s},t._lctf.readLookupTable=function(e,i,n){var r=t._bin,o=i,s={tabs:[]};s.ltype=r.readUshort(e,i),i+=2,s.flag=r.readUshort(e,i),i+=2;var a=r.readUshort(e,i);i+=2;for(var l=s.ltype,c=0;c<a;c++){var u=r.readUshort(e,i);i+=2;var h=n(e,l,o+u,s);s.tabs.push(h)}return s},t._lctf.numOfOnes=function(e){for(var t=0,i=0;i<32;i++)e>>>i&1&&t++;return t},t._lctf.readClassDef=function(e,i){var n=t._bin,r=[],o=n.readUshort(e,i);if(i+=2,1==o){var s=n.readUshort(e,i);i+=2;var a=n.readUshort(e,i);i+=2;for(var l=0;l<a;l++)r.push(s+l),r.push(s+l),r.push(n.readUshort(e,i)),i+=2}if(2==o){var c=n.readUshort(e,i);for(i+=2,l=0;l<c;l++)r.push(n.readUshort(e,i)),i+=2,r.push(n.readUshort(e,i)),i+=2,r.push(n.readUshort(e,i)),i+=2}return r},t._lctf.getInterval=function(e,t){for(var i=0;i<e.length;i+=3){var n=e[i],r=e[i+1];if(e[i+2],n<=t&&t<=r)return i}return-1},t._lctf.readCoverage=function(e,i){var n=t._bin,r={};r.fmt=n.readUshort(e,i),i+=2;var o=n.readUshort(e,i);return i+=2,1==r.fmt&&(r.tab=n.readUshorts(e,i,o)),2==r.fmt&&(r.tab=n.readUshorts(e,i,3*o)),r},t._lctf.coverageIndex=function(e,i){var n=e.tab;if(1==e.fmt)return n.indexOf(i);if(2==e.fmt){var r=t._lctf.getInterval(n,i);if(-1!=r)return n[r+2]+(i-n[r])}return-1},t._lctf.readFeatureList=function(e,i){var n=t._bin,r=i,o=[],s=n.readUshort(e,i);i+=2;for(var a=0;a<s;a++){var l=n.readASCII(e,i,4);i+=4;var c=n.readUshort(e,i);i+=2;var u=t._lctf.readFeatureTable(e,r+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,i){var n=t._bin,r=i,o={},s=n.readUshort(e,i);i+=2,s>0&&(o.featureParams=r+s);var a=n.readUshort(e,i);i+=2,o.tab=[];for(var l=0;l<a;l++)o.tab.push(n.readUshort(e,i+2*l));return o},t._lctf.readScriptList=function(e,i){var n=t._bin,r=i,o={},s=n.readUshort(e,i);i+=2;for(var a=0;a<s;a++){var l=n.readASCII(e,i,4);i+=4;var c=n.readUshort(e,i);i+=2,o[l.trim()]=t._lctf.readScriptTable(e,r+c)}return o},t._lctf.readScriptTable=function(e,i){var n=t._bin,r=i,o={},s=n.readUshort(e,i);i+=2,s>0&&(o.default=t._lctf.readLangSysTable(e,r+s));var a=n.readUshort(e,i);i+=2;for(var l=0;l<a;l++){var c=n.readASCII(e,i,4);i+=4;var u=n.readUshort(e,i);i+=2,o[c.trim()]=t._lctf.readLangSysTable(e,r+u)}return o},t._lctf.readLangSysTable=function(e,i){var n=t._bin,r={};n.readUshort(e,i),i+=2,r.reqFeature=n.readUshort(e,i),i+=2;var o=n.readUshort(e,i);return i+=2,r.features=n.readUshorts(e,i,o),r},t.CFF={},t.CFF.parse=function(e,i,n){var r=t._bin;(e=new Uint8Array(e.buffer,i,n))[i=0],e[++i],e[++i],e[++i],i++;var o=[];i=t.CFF.readIndex(e,i,o);for(var s=[],a=0;a<o.length-1;a++)s.push(r.readASCII(e,i+o[a],o[a+1]-o[a]));i+=o[o.length-1];var l=[];i=t.CFF.readIndex(e,i,l);var c=[];for(a=0;a<l.length-1;a++)c.push(t.CFF.readDict(e,i+l[a],i+l[a+1]));i+=l[l.length-1];var u=c[0],h=[];i=t.CFF.readIndex(e,i,h);var d=[];for(a=0;a<h.length-1;a++)d.push(r.readASCII(e,i+h[a],h[a+1]-h[a]));if(i+=h[h.length-1],t.CFF.readSubrs(e,i,u),u.CharStrings){i=u.CharStrings,h=[],i=t.CFF.readIndex(e,i,h);var p=[];for(a=0;a<h.length-1;a++)p.push(r.readBytes(e,i+h[a],h[a+1]-h[a]));u.CharStrings=p}if(u.ROS){i=u.FDArray;var f=[];for(i=t.CFF.readIndex(e,i,f),u.FDArray=[],a=0;a<f.length-1;a++){var g=t.CFF.readDict(e,i+f[a],i+f[a+1]);t.CFF._readFDict(e,g,d),u.FDArray.push(g)}i+=f[f.length-1],i=u.FDSelect,u.FDSelect=[];var m=e[i];if(i++,3!=m)throw m;var _=r.readUshort(e,i);for(i+=2,a=0;a<_+1;a++)u.FDSelect.push(r.readUshort(e,i),e[i+2]),i+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,i,n){var r;for(var o in i.Private&&(r=i.Private[1],i.Private=t.CFF.readDict(e,r,r+i.Private[0]),i.Private.Subrs&&t.CFF.readSubrs(e,r+i.Private.Subrs,i.Private)),i)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(i[o]=n[i[o]-426+35])},t.CFF.readSubrs=function(e,i,n){var r=t._bin,o=[];i=t.CFF.readIndex(e,i,o);var s,a=o.length;s=a<1240?107:a<33900?1131:32768,n.Bias=s,n.Subrs=[];for(var l=0;l<o.length-1;l++)n.Subrs.push(r.readBytes(e,i+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var i=0;i<e.charset.length;i++)if(e.charset[i]==t)return i;return-1},t.CFF.glyphBySE=function(e,i){return i<0||i>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[i])},t.CFF.readEncoding=function(e,i,n){t._bin;var r=[".notdef"],o=e[i];if(i++,0!=o)throw"error: unknown encoding format: "+o;var s=e[i];i++;for(var a=0;a<s;a++)r.push(e[i+a]);return r},t.CFF.readCharset=function(e,i,n){var r=t._bin,o=[".notdef"],s=e[i];if(i++,0==s)for(var a=0;a<n;a++){var l=r.readUshort(e,i);i+=2,o.push(l)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;o.length<n;){l=r.readUshort(e,i),i+=2;var c=0;for(1==s?(c=e[i],i++):(c=r.readUshort(e,i),i+=2),a=0;a<=c;a++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,i,n){var r=t._bin,o=r.readUshort(e,i)+1,s=e[i+=2];if(i++,1==s)for(var a=0;a<o;a++)n.push(e[i+a]);else if(2==s)for(a=0;a<o;a++)n.push(r.readUshort(e,i+2*a));else if(3==s)for(a=0;a<o;a++)n.push(16777215&r.readUint(e,i+3*a-1));else if(1!=o)throw"unsupported offset size: "+s+", count: "+o;return(i+=o*s)-1},t.CFF.getCharString=function(e,i,n){var r=t._bin,o=e[i],s=e[i+1];e[i+2],e[i+3],e[i+4];var a=1,l=null,c=null;o<=20&&(l=o,a=1),12==o&&(l=100*o+s,a=2),21<=o&&o<=27&&(l=o,a=1),28==o&&(c=r.readShort(e,i+1),a=3),29<=o&&o<=31&&(l=o,a=1),32<=o&&o<=246&&(c=o-139,a=1),247<=o&&o<=250&&(c=256*(o-247)+s+108,a=2),251<=o&&o<=254&&(c=256*-(o-251)-s-108,a=2),255==o&&(c=r.readInt(e,i+1)/65535,a=5),n.val=null!=c?c:"o"+l,n.size=a},t.CFF.readCharString=function(e,i,n){for(var r=i+n,o=t._bin,s=[];i<r;){var a=e[i],l=e[i+1];e[i+2],e[i+3],e[i+4];var c=1,u=null,h=null;a<=20&&(u=a,c=1),12==a&&(u=100*a+l,c=2),19!=a&&20!=a||(u=a,c=2),21<=a&&a<=27&&(u=a,c=1),28==a&&(h=o.readShort(e,i+1),c=3),29<=a&&a<=31&&(u=a,c=1),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,c=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,c=2),255==a&&(h=o.readInt(e,i+1)/65535,c=5),s.push(null!=h?h:"o"+u),i+=c}return s},t.CFF.readDict=function(e,i,n){for(var r=t._bin,o={},s=[];i<n;){var a=e[i],l=e[i+1];e[i+2],e[i+3],e[i+4];var c=1,u=null,h=null;if(28==a&&(h=r.readShort(e,i+1),c=3),29==a&&(h=r.readInt(e,i+1),c=5),32<=a&&a<=246&&(h=a-139,c=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,c=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,c=2),255==a)throw h=r.readInt(e,i+1)/65535,c=5,"unknown number";if(30==a){var d=[];for(c=1;;){var p=e[i+c];c++;var f=p>>4,g=15&p;if(15!=f&&d.push(f),15!=g&&d.push(g),15==g)break}for(var m="",_=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<d.length;v++)m+=_[d[v]];h=parseFloat(m)}a<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],c=1,12==a&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==s.length?s[0]:s,s=[]):s.push(h),i+=c}return o},t.cmap={},t.cmap.parse=function(e,i,n){e=new Uint8Array(e.buffer,i,n),i=0;var r=t._bin,o={};r.readUshort(e,i),i+=2;var s=r.readUshort(e,i);i+=2;var a=[];o.tables=[];for(var l=0;l<s;l++){var c=r.readUshort(e,i);i+=2;var u=r.readUshort(e,i);i+=2;var h=r.readUint(e,i);i+=4;var d="p"+c+"e"+u,p=a.indexOf(h);if(-1==p){var f;p=o.tables.length,a.push(h);var g=r.readUshort(e,h);0==g?f=t.cmap.parse0(e,h):4==g?f=t.cmap.parse4(e,h):6==g?f=t.cmap.parse6(e,h):12==g?f=t.cmap.parse12(e,h):console.debug("unknown format: "+g,c,u,h),o.tables.push(f)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=p}return o},t.cmap.parse0=function(e,i){var n=t._bin,r={};r.format=n.readUshort(e,i),i+=2;var o=n.readUshort(e,i);i+=2,n.readUshort(e,i),i+=2,r.map=[];for(var s=0;s<o-6;s++)r.map.push(e[i+s]);return r},t.cmap.parse4=function(e,i){var n=t._bin,r=i,o={};o.format=n.readUshort(e,i),i+=2;var s=n.readUshort(e,i);i+=2,n.readUshort(e,i),i+=2;var a=n.readUshort(e,i);i+=2;var l=a/2;o.searchRange=n.readUshort(e,i),i+=2,o.entrySelector=n.readUshort(e,i),i+=2,o.rangeShift=n.readUshort(e,i),i+=2,o.endCount=n.readUshorts(e,i,l),i+=2*l,i+=2,o.startCount=n.readUshorts(e,i,l),i+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(n.readShort(e,i)),i+=2;for(o.idRangeOffset=n.readUshorts(e,i,l),i+=2*l,o.glyphIdArray=[];i<r+s;)o.glyphIdArray.push(n.readUshort(e,i)),i+=2;return o},t.cmap.parse6=function(e,i){var n=t._bin,r={};r.format=n.readUshort(e,i),i+=2,n.readUshort(e,i),i+=2,n.readUshort(e,i),i+=2,r.firstCode=n.readUshort(e,i),i+=2;var o=n.readUshort(e,i);i+=2,r.glyphIdArray=[];for(var s=0;s<o;s++)r.glyphIdArray.push(n.readUshort(e,i)),i+=2;return r},t.cmap.parse12=function(e,i){var n=t._bin,r={};r.format=n.readUshort(e,i),i+=2,i+=2,n.readUint(e,i),i+=4,n.readUint(e,i),i+=4;var o=n.readUint(e,i);i+=4,r.groups=[];for(var s=0;s<o;s++){var a=i+12*s,l=n.readUint(e,a+0),c=n.readUint(e,a+4),u=n.readUint(e,a+8);r.groups.push([l,c,u])}return r},t.glyf={},t.glyf.parse=function(e,t,i,n){for(var r=[],o=0;o<n.maxp.numGlyphs;o++)r.push(null);return r},t.glyf._parseGlyf=function(e,i){var n=t._bin,r=e._data,o=t._tabOffset(r,"glyf",e._offset)+e.loca[i];if(e.loca[i]==e.loca[i+1])return null;var s={};if(s.noc=n.readShort(r,o),o+=2,s.xMin=n.readShort(r,o),o+=2,s.yMin=n.readShort(r,o),o+=2,s.xMax=n.readShort(r,o),o+=2,s.yMax=n.readShort(r,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var a=0;a<s.noc;a++)s.endPts.push(n.readUshort(r,o)),o+=2;var l=n.readUshort(r,o);if(o+=2,r.length-o<l)return null;s.instructions=n.readBytes(r,o,l),o+=l;var c=s.endPts[s.noc-1]+1;for(s.flags=[],a=0;a<c;a++){var u=r[o];if(o++,s.flags.push(u),8&u){var h=r[o];o++;for(var d=0;d<h;d++)s.flags.push(u),a++}}for(s.xs=[],a=0;a<c;a++){var p=!!(2&s.flags[a]),f=!!(16&s.flags[a]);p?(s.xs.push(f?r[o]:-r[o]),o++):f?s.xs.push(0):(s.xs.push(n.readShort(r,o)),o+=2)}for(s.ys=[],a=0;a<c;a++)p=!!(4&s.flags[a]),f=!!(32&s.flags[a]),p?(s.ys.push(f?r[o]:-r[o]),o++):f?s.ys.push(0):(s.ys.push(n.readShort(r,o)),o+=2);var g=0,m=0;for(a=0;a<c;a++)g+=s.xs[a],m+=s.ys[a],s.xs[a]=g,s.ys[a]=m}else{var _;s.parts=[];do{_=n.readUshort(r,o),o+=2;var v={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(v),v.glyphIndex=n.readUshort(r,o),o+=2,1&_){var y=n.readShort(r,o);o+=2;var b=n.readShort(r,o);o+=2}else y=n.readInt8(r,o),o++,b=n.readInt8(r,o),o++;2&_?(v.m.tx=y,v.m.ty=b):(v.p1=y,v.p2=b),8&_?(v.m.a=v.m.d=n.readF2dot14(r,o),o+=2):64&_?(v.m.a=n.readF2dot14(r,o),o+=2,v.m.d=n.readF2dot14(r,o),o+=2):128&_&&(v.m.a=n.readF2dot14(r,o),o+=2,v.m.b=n.readF2dot14(r,o),o+=2,v.m.c=n.readF2dot14(r,o),o+=2,v.m.d=n.readF2dot14(r,o),o+=2)}while(32&_);if(256&_){var A=n.readUshort(r,o);for(o+=2,s.instr=[],a=0;a<A;a++)s.instr.push(r[o]),o++}}return s},t.GDEF={},t.GDEF.parse=function(e,i,n,r){var o=i;i+=4;var s=t._bin.readUshort(e,i);return{glyphClassDef:0===s?null:t._lctf.readClassDef(e,o+s)}},t.GPOS={},t.GPOS.parse=function(e,i,n,r){return t._lctf.parse(e,i,n,r,t.GPOS.subt)},t.GPOS.subt=function(e,i,n,r){var o=t._bin,s=n,a={};if(a.fmt=o.readUshort(e,n),n+=2,1==i||2==i||3==i||7==i||8==i&&a.fmt<=2){var l=o.readUshort(e,n);n+=2,a.coverage=t._lctf.readCoverage(e,l+s)}if(1==i&&1==a.fmt){var c=o.readUshort(e,n);n+=2,0!=c&&(a.pos=t.GPOS.readValueRecord(e,n,c))}else if(2==i&&a.fmt>=1&&a.fmt<=2){c=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=t._lctf.numOfOnes(c),d=t._lctf.numOfOnes(u);if(1==a.fmt){a.pairsets=[];var p=o.readUshort(e,n);n+=2;for(var f=0;f<p;f++){var g=s+o.readUshort(e,n);n+=2;var m=o.readUshort(e,g);g+=2;for(var _=[],v=0;v<m;v++){var y=o.readUshort(e,g);g+=2,0!=c&&(C=t.GPOS.readValueRecord(e,g,c),g+=2*h),0!=u&&(E=t.GPOS.readValueRecord(e,g,u),g+=2*d),_.push({gid2:y,val1:C,val2:E})}a.pairsets.push(_)}}if(2==a.fmt){var b=o.readUshort(e,n);n+=2;var A=o.readUshort(e,n);n+=2;var w=o.readUshort(e,n);n+=2;var x=o.readUshort(e,n);for(n+=2,a.classDef1=t._lctf.readClassDef(e,s+b),a.classDef2=t._lctf.readClassDef(e,s+A),a.matrix=[],f=0;f<w;f++){var S=[];for(v=0;v<x;v++){var C=null,E=null;0!=c&&(C=t.GPOS.readValueRecord(e,n,c),n+=2*h),0!=u&&(E=t.GPOS.readValueRecord(e,n,u),n+=2*d),S.push({val1:C,val2:E})}a.matrix.push(S)}}}else if(4==i&&1==a.fmt)a.markCoverage=t._lctf.readCoverage(e,o.readUshort(e,n)+s),a.baseCoverage=t._lctf.readCoverage(e,o.readUshort(e,n+2)+s),a.markClassCount=o.readUshort(e,n+4),a.markArray=t.GPOS.readMarkArray(e,o.readUshort(e,n+6)+s),a.baseArray=t.GPOS.readBaseArray(e,o.readUshort(e,n+8)+s,a.markClassCount);else if(6==i&&1==a.fmt)a.mark1Coverage=t._lctf.readCoverage(e,o.readUshort(e,n)+s),a.mark2Coverage=t._lctf.readCoverage(e,o.readUshort(e,n+2)+s),a.markClassCount=o.readUshort(e,n+4),a.mark1Array=t.GPOS.readMarkArray(e,o.readUshort(e,n+6)+s),a.mark2Array=t.GPOS.readBaseArray(e,o.readUshort(e,n+8)+s,a.markClassCount);else{if(9==i&&1==a.fmt){var T=o.readUshort(e,n);n+=2;var I=o.readUint(e,n);if(n+=4,9==r.ltype)r.ltype=T;else if(r.ltype!=T)throw"invalid extension substitution";return t.GPOS.subt(e,r.ltype,s+I)}console.debug("unsupported GPOS table LookupType",i,"format",a.fmt)}return a},t.GPOS.readValueRecord=function(e,i,n){var r=t._bin,o=[];return o.push(1&n?r.readShort(e,i):0),i+=1&n?2:0,o.push(2&n?r.readShort(e,i):0),i+=2&n?2:0,o.push(4&n?r.readShort(e,i):0),i+=4&n?2:0,o.push(8&n?r.readShort(e,i):0),i+=8&n?2:0,o},t.GPOS.readBaseArray=function(e,i,n){var r=t._bin,o=[],s=i,a=r.readUshort(e,i);i+=2;for(var l=0;l<a;l++){for(var c=[],u=0;u<n;u++)c.push(t.GPOS.readAnchorRecord(e,s+r.readUshort(e,i))),i+=2;o.push(c)}return o},t.GPOS.readMarkArray=function(e,i){var n=t._bin,r=[],o=i,s=n.readUshort(e,i);i+=2;for(var a=0;a<s;a++){var l=t.GPOS.readAnchorRecord(e,n.readUshort(e,i+2)+o);l.markClass=n.readUshort(e,i),r.push(l),i+=4}return r},t.GPOS.readAnchorRecord=function(e,i){var n=t._bin,r={};return r.fmt=n.readUshort(e,i),r.x=n.readShort(e,i+2),r.y=n.readShort(e,i+4),r},t.GSUB={},t.GSUB.parse=function(e,i,n,r){return t._lctf.parse(e,i,n,r,t.GSUB.subt)},t.GSUB.subt=function(e,i,n,r){var o=t._bin,s=n,a={};if(a.fmt=o.readUshort(e,n),n+=2,1!=i&&2!=i&&4!=i&&5!=i&&6!=i)return null;if(1==i||2==i||4==i||5==i&&a.fmt<=2||6==i&&a.fmt<=2){var l=o.readUshort(e,n);n+=2,a.coverage=t._lctf.readCoverage(e,s+l)}if(1==i&&a.fmt>=1&&a.fmt<=2){if(1==a.fmt)a.delta=o.readShort(e,n),n+=2;else if(2==a.fmt){var c=o.readUshort(e,n);n+=2,a.newg=o.readUshorts(e,n,c),n+=2*a.newg.length}}else if(2==i&&1==a.fmt){c=o.readUshort(e,n),n+=2,a.seqs=[];for(var u=0;u<c;u++){var h=o.readUshort(e,n)+s;n+=2;var d=o.readUshort(e,h);a.seqs.push(o.readUshorts(e,h+2,d))}}else if(4==i)for(a.vals=[],c=o.readUshort(e,n),n+=2,u=0;u<c;u++){var p=o.readUshort(e,n);n+=2,a.vals.push(t.GSUB.readLigatureSet(e,s+p))}else if(5==i&&2==a.fmt){if(2==a.fmt){var f=o.readUshort(e,n);n+=2,a.cDef=t._lctf.readClassDef(e,s+f),a.scset=[];var g=o.readUshort(e,n);for(n+=2,u=0;u<g;u++){var m=o.readUshort(e,n);n+=2,a.scset.push(0==m?null:t.GSUB.readSubClassSet(e,s+m))}}}else if(6==i&&3==a.fmt){if(3==a.fmt){for(u=0;u<3;u++){c=o.readUshort(e,n),n+=2;for(var _=[],v=0;v<c;v++)_.push(t._lctf.readCoverage(e,s+o.readUshort(e,n+2*v)));n+=2*c,0==u&&(a.backCvg=_),1==u&&(a.inptCvg=_),2==u&&(a.ahedCvg=_)}c=o.readUshort(e,n),n+=2,a.lookupRec=t.GSUB.readSubstLookupRecords(e,n,c)}}else{if(7==i&&1==a.fmt){var y=o.readUshort(e,n);n+=2;var b=o.readUint(e,n);if(n+=4,9==r.ltype)r.ltype=y;else if(r.ltype!=y)throw"invalid extension substitution";return t.GSUB.subt(e,r.ltype,s+b)}console.debug("unsupported GSUB table LookupType",i,"format",a.fmt)}return a},t.GSUB.readSubClassSet=function(e,i){var n=t._bin.readUshort,r=i,o=[],s=n(e,i);i+=2;for(var a=0;a<s;a++){var l=n(e,i);i+=2,o.push(t.GSUB.readSubClassRule(e,r+l))}return o},t.GSUB.readSubClassRule=function(e,i){var n=t._bin.readUshort,r={},o=n(e,i),s=n(e,i+=2);i+=2,r.input=[];for(var a=0;a<o-1;a++)r.input.push(n(e,i)),i+=2;return r.substLookupRecords=t.GSUB.readSubstLookupRecords(e,i,s),r},t.GSUB.readSubstLookupRecords=function(e,i,n){for(var r=t._bin.readUshort,o=[],s=0;s<n;s++)o.push(r(e,i),r(e,i+2)),i+=4;return o},t.GSUB.readChainSubClassSet=function(e,i){var n=t._bin,r=i,o=[],s=n.readUshort(e,i);i+=2;for(var a=0;a<s;a++){var l=n.readUshort(e,i);i+=2,o.push(t.GSUB.readChainSubClassRule(e,r+l))}return o},t.GSUB.readChainSubClassRule=function(e,i){for(var n=t._bin,r={},o=["backtrack","input","lookahead"],s=0;s<o.length;s++){var a=n.readUshort(e,i);i+=2,1==s&&a--,r[o[s]]=n.readUshorts(e,i,a),i+=2*r[o[s]].length}return a=n.readUshort(e,i),i+=2,r.subst=n.readUshorts(e,i,2*a),i+=2*r.subst.length,r},t.GSUB.readLigatureSet=function(e,i){var n=t._bin,r=i,o=[],s=n.readUshort(e,i);i+=2;for(var a=0;a<s;a++){var l=n.readUshort(e,i);i+=2,o.push(t.GSUB.readLigature(e,r+l))}return o},t.GSUB.readLigature=function(e,i){var n=t._bin,r={chain:[]};r.nglyph=n.readUshort(e,i),i+=2;var o=n.readUshort(e,i);i+=2;for(var s=0;s<o-1;s++)r.chain.push(n.readUshort(e,i)),i+=2;return r},t.head={},t.head.parse=function(e,i,n){var r=t._bin,o={};return r.readFixed(e,i),i+=4,o.fontRevision=r.readFixed(e,i),i+=4,r.readUint(e,i),i+=4,r.readUint(e,i),i+=4,o.flags=r.readUshort(e,i),i+=2,o.unitsPerEm=r.readUshort(e,i),i+=2,o.created=r.readUint64(e,i),i+=8,o.modified=r.readUint64(e,i),i+=8,o.xMin=r.readShort(e,i),i+=2,o.yMin=r.readShort(e,i),i+=2,o.xMax=r.readShort(e,i),i+=2,o.yMax=r.readShort(e,i),i+=2,o.macStyle=r.readUshort(e,i),i+=2,o.lowestRecPPEM=r.readUshort(e,i),i+=2,o.fontDirectionHint=r.readShort(e,i),i+=2,o.indexToLocFormat=r.readShort(e,i),i+=2,o.glyphDataFormat=r.readShort(e,i),i+=2,o},t.hhea={},t.hhea.parse=function(e,i,n){var r=t._bin,o={};return r.readFixed(e,i),i+=4,o.ascender=r.readShort(e,i),i+=2,o.descender=r.readShort(e,i),i+=2,o.lineGap=r.readShort(e,i),i+=2,o.advanceWidthMax=r.readUshort(e,i),i+=2,o.minLeftSideBearing=r.readShort(e,i),i+=2,o.minRightSideBearing=r.readShort(e,i),i+=2,o.xMaxExtent=r.readShort(e,i),i+=2,o.caretSlopeRise=r.readShort(e,i),i+=2,o.caretSlopeRun=r.readShort(e,i),i+=2,o.caretOffset=r.readShort(e,i),i+=2,i+=8,o.metricDataFormat=r.readShort(e,i),i+=2,o.numberOfHMetrics=r.readUshort(e,i),i+=2,o},t.hmtx={},t.hmtx.parse=function(e,i,n,r){for(var o=t._bin,s={aWidth:[],lsBearing:[]},a=0,l=0,c=0;c<r.maxp.numGlyphs;c++)c<r.hhea.numberOfHMetrics&&(a=o.readUshort(e,i),i+=2,l=o.readShort(e,i),i+=2),s.aWidth.push(a),s.lsBearing.push(l);return s},t.kern={},t.kern.parse=function(e,i,n,r){var o=t._bin,s=o.readUshort(e,i);if(i+=2,1==s)return t.kern.parseV1(e,i-2,n,r);var a=o.readUshort(e,i);i+=2;for(var l={glyph1:[],rval:[]},c=0;c<a;c++){i+=2,n=o.readUshort(e,i),i+=2;var u=o.readUshort(e,i);i+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;i=t.kern.readFormat0(e,i,l)}return l},t.kern.parseV1=function(e,i,n,r){var o=t._bin;o.readFixed(e,i),i+=4;var s=o.readUint(e,i);i+=4;for(var a={glyph1:[],rval:[]},l=0;l<s;l++){o.readUint(e,i),i+=4;var c=o.readUshort(e,i);i+=2,o.readUshort(e,i),i+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;i=t.kern.readFormat0(e,i,a)}return a},t.kern.readFormat0=function(e,i,n){var r=t._bin,o=-1,s=r.readUshort(e,i);i+=2,r.readUshort(e,i),i+=2,r.readUshort(e,i),i+=2,r.readUshort(e,i),i+=2;for(var a=0;a<s;a++){var l=r.readUshort(e,i);i+=2;var c=r.readUshort(e,i);i+=2;var u=r.readShort(e,i);i+=2,l!=o&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return i},t.loca={},t.loca.parse=function(e,i,n,r){var o=t._bin,s=[],a=r.head.indexToLocFormat,l=r.maxp.numGlyphs+1;if(0==a)for(var c=0;c<l;c++)s.push(o.readUshort(e,i+(c<<1))<<1);if(1==a)for(c=0;c<l;c++)s.push(o.readUint(e,i+(c<<2)));return s},t.maxp={},t.maxp.parse=function(e,i,n){var r=t._bin,o={},s=r.readUint(e,i);return i+=4,o.numGlyphs=r.readUshort(e,i),i+=2,65536==s&&(o.maxPoints=r.readUshort(e,i),i+=2,o.maxContours=r.readUshort(e,i),i+=2,o.maxCompositePoints=r.readUshort(e,i),i+=2,o.maxCompositeContours=r.readUshort(e,i),i+=2,o.maxZones=r.readUshort(e,i),i+=2,o.maxTwilightPoints=r.readUshort(e,i),i+=2,o.maxStorage=r.readUshort(e,i),i+=2,o.maxFunctionDefs=r.readUshort(e,i),i+=2,o.maxInstructionDefs=r.readUshort(e,i),i+=2,o.maxStackElements=r.readUshort(e,i),i+=2,o.maxSizeOfInstructions=r.readUshort(e,i),i+=2,o.maxComponentElements=r.readUshort(e,i),i+=2,o.maxComponentDepth=r.readUshort(e,i),i+=2),o},t.name={},t.name.parse=function(e,i,n){var r=t._bin,o={};r.readUshort(e,i),i+=2;var s=r.readUshort(e,i);i+=2,r.readUshort(e,i);for(var a,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=i+=2,u=0;u<s;u++){var h=r.readUshort(e,i);i+=2;var d=r.readUshort(e,i);i+=2;var p=r.readUshort(e,i);i+=2;var f=r.readUshort(e,i);i+=2;var g=r.readUshort(e,i);i+=2;var m=r.readUshort(e,i);i+=2;var _,v=l[f],y=c+12*s+m;if(0==h)_=r.readUnicode(e,y,g/2);else if(3==h&&0==d)_=r.readUnicode(e,y,g/2);else if(0==d)_=r.readASCII(e,y,g);else if(1==d)_=r.readUnicode(e,y,g/2);else if(3==d)_=r.readUnicode(e,y,g/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;_=r.readASCII(e,y,g),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+p.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==v?v:f]=_,o[b]._lang=p}for(var A in o)if(null!=o[A].postScriptName&&1033==o[A]._lang)return o[A];for(var A in o)if(null!=o[A].postScriptName&&0==o[A]._lang)return o[A];for(var A in o)if(null!=o[A].postScriptName&&3084==o[A]._lang)return o[A];for(var A in o)if(null!=o[A].postScriptName)return o[A];for(var A in o){a=A;break}return console.debug("returning name table with languageID "+o[a]._lang),o[a]},t["OS/2"]={},t["OS/2"].parse=function(e,i,n){var r=t._bin.readUshort(e,i);i+=2;var o={};if(0==r)t["OS/2"].version0(e,i,o);else if(1==r)t["OS/2"].version1(e,i,o);else if(2==r||3==r||4==r)t["OS/2"].version2(e,i,o);else{if(5!=r)throw"unknown OS/2 table version: "+r;t["OS/2"].version5(e,i,o)}return o},t["OS/2"].version0=function(e,i,n){var r=t._bin;return n.xAvgCharWidth=r.readShort(e,i),i+=2,n.usWeightClass=r.readUshort(e,i),i+=2,n.usWidthClass=r.readUshort(e,i),i+=2,n.fsType=r.readUshort(e,i),i+=2,n.ySubscriptXSize=r.readShort(e,i),i+=2,n.ySubscriptYSize=r.readShort(e,i),i+=2,n.ySubscriptXOffset=r.readShort(e,i),i+=2,n.ySubscriptYOffset=r.readShort(e,i),i+=2,n.ySuperscriptXSize=r.readShort(e,i),i+=2,n.ySuperscriptYSize=r.readShort(e,i),i+=2,n.ySuperscriptXOffset=r.readShort(e,i),i+=2,n.ySuperscriptYOffset=r.readShort(e,i),i+=2,n.yStrikeoutSize=r.readShort(e,i),i+=2,n.yStrikeoutPosition=r.readShort(e,i),i+=2,n.sFamilyClass=r.readShort(e,i),i+=2,n.panose=r.readBytes(e,i,10),i+=10,n.ulUnicodeRange1=r.readUint(e,i),i+=4,n.ulUnicodeRange2=r.readUint(e,i),i+=4,n.ulUnicodeRange3=r.readUint(e,i),i+=4,n.ulUnicodeRange4=r.readUint(e,i),i+=4,n.achVendID=[r.readInt8(e,i),r.readInt8(e,i+1),r.readInt8(e,i+2),r.readInt8(e,i+3)],i+=4,n.fsSelection=r.readUshort(e,i),i+=2,n.usFirstCharIndex=r.readUshort(e,i),i+=2,n.usLastCharIndex=r.readUshort(e,i),i+=2,n.sTypoAscender=r.readShort(e,i),i+=2,n.sTypoDescender=r.readShort(e,i),i+=2,n.sTypoLineGap=r.readShort(e,i),i+=2,n.usWinAscent=r.readUshort(e,i),i+=2,n.usWinDescent=r.readUshort(e,i),i+2},t["OS/2"].version1=function(e,i,n){var r=t._bin;return i=t["OS/2"].version0(e,i,n),n.ulCodePageRange1=r.readUint(e,i),i+=4,n.ulCodePageRange2=r.readUint(e,i),i+4},t["OS/2"].version2=function(e,i,n){var r=t._bin;return i=t["OS/2"].version1(e,i,n),n.sxHeight=r.readShort(e,i),i+=2,n.sCapHeight=r.readShort(e,i),i+=2,n.usDefault=r.readUshort(e,i),i+=2,n.usBreak=r.readUshort(e,i),i+=2,n.usMaxContext=r.readUshort(e,i),i+2},t["OS/2"].version5=function(e,i,n){var r=t._bin;return i=t["OS/2"].version2(e,i,n),n.usLowerOpticalPointSize=r.readUshort(e,i),i+=2,n.usUpperOpticalPointSize=r.readUshort(e,i),i+2},t.post={},t.post.parse=function(e,i,n){var r=t._bin,o={};return o.version=r.readFixed(e,i),i+=4,o.italicAngle=r.readFixed(e,i),i+=4,o.underlinePosition=r.readShort(e,i),i+=2,o.underlineThickness=r.readShort(e,i),i+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var i=e.cmap,n=-1;if(null!=i.p0e4?n=i.p0e4:null!=i.p3e1?n=i.p3e1:null!=i.p1e0?n=i.p1e0:null!=i.p0e3&&(n=i.p0e3),-1==n)throw"no familiar platform and encoding!";var r=i.tables[n];if(0==r.format)return t>=r.map.length?0:r.map[t];if(4==r.format){for(var o=-1,s=0;s<r.endCount.length;s++)if(t<=r.endCount[s]){o=s;break}return-1==o||r.startCount[o]>t?0:65535&(0!=r.idRangeOffset[o]?r.glyphIdArray[t-r.startCount[o]+(r.idRangeOffset[o]>>1)-(r.idRangeOffset.length-o)]:t+r.idDelta[o])}if(12==r.format){if(t>r.groups[r.groups.length-1][1])return 0;for(s=0;s<r.groups.length;s++){var a=r.groups[s];if(a[0]<=t&&t<=a[1])return a[2]+(t-a[0])}return 0}throw"unknown cmap table format "+r.format},t.U.glyphToPath=function(e,i){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[i]){var r=e.SVG.entries[i];return null==r?n:("string"==typeof r&&(r=t.SVG.toPath(r),e.SVG.entries[i]=r),r)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},s=e.CFF,a=e.CFF.Private;if(s.ROS){for(var l=0;s.FDSelect[l+2]<=i;)l+=2;a=s.FDArray[s.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[i],o,s,a,n)}else e.glyf&&t.U._drawGlyf(i,e,n);return n},t.U._drawGlyf=function(e,i,n){var r=i.glyf[e];null==r&&(r=i.glyf[e]=t.glyf._parseGlyf(i,e)),null!=r&&(r.noc>-1?t.U._simpleGlyph(r,n):t.U._compoGlyph(r,i,n))},t.U._simpleGlyph=function(e,i){for(var n=0;n<e.noc;n++){for(var r=0==n?0:e.endPts[n-1]+1,o=e.endPts[n],s=r;s<=o;s++){var a=s==r?o:s-1,l=s==o?r:s+1,c=1&e.flags[s],u=1&e.flags[a],h=1&e.flags[l],d=e.xs[s],p=e.ys[s];if(s==r)if(c){if(!u){t.U.P.moveTo(i,d,p);continue}t.U.P.moveTo(i,e.xs[a],e.ys[a])}else u?t.U.P.moveTo(i,e.xs[a],e.ys[a]):t.U.P.moveTo(i,(e.xs[a]+d)/2,(e.ys[a]+p)/2);c?u&&t.U.P.lineTo(i,d,p):h?t.U.P.qcurveTo(i,d,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(i,d,p,(d+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(i)}},t.U._compoGlyph=function(e,i,n){for(var r=0;r<e.parts.length;r++){var o={cmds:[],crds:[]},s=e.parts[r];t.U._drawGlyf(s.glyphIndex,i,o);for(var a=s.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];n.crds.push(c*a.a+u*a.b+a.tx),n.crds.push(c*a.c+u*a.d+a.ty)}for(l=0;l<o.cmds.length;l++)n.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,i){var n=t._lctf.getInterval(i,e);return-1==n?0:i[n+2]},t.U._applySubs=function(e,i,n,r){for(var o=e.length-i-1,s=0;s<n.tabs.length;s++)if(null!=n.tabs[s]){var a,l=n.tabs[s];if(!l.coverage||-1!=(a=t._lctf.coverageIndex(l.coverage,e[i])))if(1==n.ltype)e[i],1==l.fmt?e[i]=e[i]+l.delta:e[i]=l.newg[a];else if(4==n.ltype)for(var c=l.vals[a],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var p=!0,f=0,g=0;g<d;g++){for(;-1==e[i+f+(1+g)];)f++;h.chain[g]!=e[i+f+(1+g)]&&(p=!1)}if(p){for(e[i]=h.nglyph,g=0;g<d+f;g++)e[i+g+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var m=t._lctf.getInterval(l.cDef,e[i]),_=l.cDef[m+2],v=l.scset[_],y=0;y<v.length;y++){var b=v[y],A=b.input;if(!(A.length>o)){for(p=!0,g=0;g<A.length;g++){var w=t._lctf.getInterval(l.cDef,e[i+1+g]);if(-1==m&&l.cDef[w+2]!=A[g]){p=!1;break}}if(p){var x=b.substLookupRecords;for(u=0;u<x.length;u+=2)x[u],x[u+1]}}}else if(6==n.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,i-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,i))continue;if(!t.U._glsCovered(e,l.ahedCvg,i+l.inptCvg.length))continue;var S=l.lookupRec;for(y=0;y<S.length;y+=2){m=S[y];var C=r[S[y+1]];t.U._applySubs(e,i+m,C,r)}}}},t.U._glsCovered=function(e,i,n){for(var r=0;r<i.length;r++)if(-1==t._lctf.coverageIndex(i[r],e[n+r]))return!1;return!0},t.U.glyphsToPath=function(e,i,n){for(var r={cmds:[],crds:[]},o=0,s=0;s<i.length;s++){var a=i[s];if(-1!=a){for(var l=s<i.length-1&&-1!=i[s+1]?i[s+1]:0,c=t.U.glyphToPath(e,a),u=0;u<c.crds.length;u+=2)r.crds.push(c.crds[u]+o),r.crds.push(c.crds[u+1]);for(n&&r.cmds.push(n),u=0;u<c.cmds.length;u++)r.cmds.push(c.cmds[u]);n&&r.cmds.push("X"),o+=e.hmtx.aWidth[a],s<i.length-1&&(o+=t.U.getPairAdjustment(e,a,l))}}return r},t.U.P={},t.U.P.moveTo=function(e,t,i){e.cmds.push("M"),e.crds.push(t,i)},t.U.P.lineTo=function(e,t,i){e.cmds.push("L"),e.crds.push(t,i)},t.U.P.curveTo=function(e,t,i,n,r,o,s){e.cmds.push("C"),e.crds.push(t,i,n,r,o,s)},t.U.P.qcurveTo=function(e,t,i,n,r){e.cmds.push("Q"),e.crds.push(t,i,n,r)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,i,n,r,o){for(var s=i.stack,a=i.nStems,l=i.haveWidth,c=i.width,u=i.open,h=0,d=i.x,p=i.y,f=0,g=0,m=0,_=0,v=0,y=0,b=0,A=0,w=0,x=0,S={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,S);var C=S.val;if(h+=S.size,"o1"==C||"o18"==C)s.length%2!=0&&!l&&(c=s.shift()+r.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o3"==C||"o23"==C)s.length%2!=0&&!l&&(c=s.shift()+r.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o4"==C)s.length>1&&!l&&(c=s.shift()+r.nominalWidthX,l=!0),u&&t.U.P.closePath(o),p+=s.pop(),t.U.P.moveTo(o,d,p),u=!0;else if("o5"==C)for(;s.length>0;)d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p);else if("o6"==C||"o7"==C)for(var E=s.length,T="o6"==C,I=0;I<E;I++){var M=s.shift();T?d+=M:p+=M,T=!T,t.U.P.lineTo(o,d,p)}else if("o8"==C||"o24"==C){E=s.length;for(var k=0;k+6<=E;)f=d+s.shift(),g=p+s.shift(),m=f+s.shift(),_=g+s.shift(),d=m+s.shift(),p=_+s.shift(),t.U.P.curveTo(o,f,g,m,_,d,p),k+=6;"o24"==C&&(d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p))}else{if("o11"==C)break;if("o1234"==C||"o1235"==C||"o1236"==C||"o1237"==C)"o1234"==C&&(g=p,m=(f=d+s.shift())+s.shift(),x=_=g+s.shift(),y=_,A=p,d=(b=(v=(w=m+s.shift())+s.shift())+s.shift())+s.shift(),t.U.P.curveTo(o,f,g,m,_,w,x),t.U.P.curveTo(o,v,y,b,A,d,p)),"o1235"==C&&(f=d+s.shift(),g=p+s.shift(),m=f+s.shift(),_=g+s.shift(),w=m+s.shift(),x=_+s.shift(),v=w+s.shift(),y=x+s.shift(),b=v+s.shift(),A=y+s.shift(),d=b+s.shift(),p=A+s.shift(),s.shift(),t.U.P.curveTo(o,f,g,m,_,w,x),t.U.P.curveTo(o,v,y,b,A,d,p)),"o1236"==C&&(f=d+s.shift(),g=p+s.shift(),m=f+s.shift(),x=_=g+s.shift(),y=_,b=(v=(w=m+s.shift())+s.shift())+s.shift(),A=y+s.shift(),d=b+s.shift(),t.U.P.curveTo(o,f,g,m,_,w,x),t.U.P.curveTo(o,v,y,b,A,d,p)),"o1237"==C&&(f=d+s.shift(),g=p+s.shift(),m=f+s.shift(),_=g+s.shift(),w=m+s.shift(),x=_+s.shift(),v=w+s.shift(),y=x+s.shift(),b=v+s.shift(),A=y+s.shift(),Math.abs(b-d)>Math.abs(A-p)?d=b+s.shift():p=A+s.shift(),t.U.P.curveTo(o,f,g,m,_,w,x),t.U.P.curveTo(o,v,y,b,A,d,p));else if("o14"==C){if(s.length>0&&!l&&(c=s.shift()+n.nominalWidthX,l=!0),4==s.length){var B=s.shift(),R=s.shift(),P=s.shift(),D=s.shift(),L=t.CFF.glyphBySE(n,P),O=t.CFF.glyphBySE(n,D);t.U._drawCFF(n.CharStrings[L],i,n,r,o),i.x=B,i.y=R,t.U._drawCFF(n.CharStrings[O],i,n,r,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==C||"o20"==C)s.length%2!=0&&!l&&(c=s.shift()+r.nominalWidthX),a+=s.length>>1,s.length=0,l=!0,h+=a+7>>3;else if("o21"==C)s.length>2&&!l&&(c=s.shift()+r.nominalWidthX,l=!0),p+=s.pop(),d+=s.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o22"==C)s.length>1&&!l&&(c=s.shift()+r.nominalWidthX,l=!0),d+=s.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o25"==C){for(;s.length>6;)d+=s.shift(),p+=s.shift(),t.U.P.lineTo(o,d,p);f=d+s.shift(),g=p+s.shift(),m=f+s.shift(),_=g+s.shift(),d=m+s.shift(),p=_+s.shift(),t.U.P.curveTo(o,f,g,m,_,d,p)}else if("o26"==C)for(s.length%2&&(d+=s.shift());s.length>0;)f=d,g=p+s.shift(),d=m=f+s.shift(),p=(_=g+s.shift())+s.shift(),t.U.P.curveTo(o,f,g,m,_,d,p);else if("o27"==C)for(s.length%2&&(p+=s.shift());s.length>0;)g=p,m=(f=d+s.shift())+s.shift(),_=g+s.shift(),d=m+s.shift(),p=_,t.U.P.curveTo(o,f,g,m,_,d,p);else if("o10"==C||"o29"==C){var F="o10"==C?r:n;if(0==s.length)console.debug("error: empty stack");else{var N=s.pop(),z=F.Subrs[N+F.Bias];i.x=d,i.y=p,i.nStems=a,i.haveWidth=l,i.width=c,i.open=u,t.U._drawCFF(z,i,n,r,o),d=i.x,p=i.y,a=i.nStems,l=i.haveWidth,c=i.width,u=i.open}}else if("o30"==C||"o31"==C){var U=s.length,H=(k=0,"o31"==C);for(k+=U-(E=-3&U);k<E;)H?(g=p,m=(f=d+s.shift())+s.shift(),p=(_=g+s.shift())+s.shift(),E-k==5?(d=m+s.shift(),k++):d=m,H=!1):(f=d,g=p+s.shift(),m=f+s.shift(),_=g+s.shift(),d=m+s.shift(),E-k==5?(p=_+s.shift(),k++):p=_,H=!0),t.U.P.curveTo(o,f,g,m,_,d,p),k+=4}else{if("o"==(C+"").charAt(0))throw console.debug("Unknown operation: "+C,e),C;s.push(C)}}}i.x=d,i.y=p,i.nStems=a,i.haveWidth=l,i.width=c,i.open=u};var i=t,n={Typr:i};return e.Typr=i,e.default=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,i=Uint16Array,n=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(e,t){for(var r=new i(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];var s=new n(r[30]);for(o=1;o<30;++o)for(var a=r[o];a<r[o+1];++a)s[a]=a-r[o]<<5|o;return[r,s]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=a(o,0)[0],d=new i(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var g=function(e,t,n){for(var r=e.length,o=0,s=new i(t);o<r;++o)++s[e[o]-1];var a,l=new i(t);for(o=0;o<t;++o)l[o]=l[o-1]+s[o-1]<<1;a=new i(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],p=l[e[o]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)a[d[p]>>>c]=u;return a},m=new t(288);for(p=0;p<144;++p)m[p]=8;for(p=144;p<256;++p)m[p]=9;for(p=256;p<280;++p)m[p]=7;for(p=280;p<288;++p)m[p]=8;var _=new t(32);for(p=0;p<32;++p)_[p]=5;var v=g(m,9),y=g(_,5),b=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},A=function(e,t,i){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&i},w=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},x=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],S=function(e,t,i){var n=new Error(t||x[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,S),!i)throw n;return n},C=function(e,a,l){var u=e.length;if(!u||l&&!l.l&&u<5)return a||new t(0);var d=!a||l,p=!l||l.i;l||(l={}),a||(a=new t(3*u));var f,m=function(e){var i=a.length;if(e>i){var n=new t(Math.max(2*i,e));n.set(a),a=n}},_=l.f||0,x=l.p||0,C=l.b||0,E=l.l,T=l.d,I=l.m,M=l.n,k=8*u;do{if(!E){l.f=_=A(e,x,1);var B=A(e,x+1,3);if(x+=3,!B){var R=e[($=((f=x)/8|0)+(7&f&&1)+4)-4]|e[$-3]<<8,P=$+R;if(P>u){p&&S(0);break}d&&m(C+R),a.set(e.subarray($,P),C),l.b=C+=R,l.p=x=8*P;continue}if(1==B)E=v,T=y,I=9,M=5;else if(2==B){var D=A(e,x,31)+257,L=A(e,x+10,15)+4,O=D+A(e,x+5,31)+1;x+=14;for(var F=new t(O),N=new t(19),z=0;z<L;++z)N[s[z]]=A(e,x+3*z,7);x+=3*L;var U=b(N),H=(1<<U)-1,V=g(N,U);for(z=0;z<O;){var $,G=V[A(e,x,H)];if(x+=15&G,($=G>>>4)<16)F[z++]=$;else{var Q=0,j=0;for(16==$?(j=3+A(e,x,3),x+=2,Q=F[z-1]):17==$?(j=3+A(e,x,7),x+=3):18==$&&(j=11+A(e,x,127),x+=7);j--;)F[z++]=Q}}var q=F.subarray(0,D),W=F.subarray(D);I=b(q),M=b(W),E=g(q,I),T=g(W,M)}else S(1);if(x>k){p&&S(0);break}}d&&m(C+131072);for(var X=(1<<I)-1,Y=(1<<M)-1,K=x;;K=x){var Z=(Q=E[w(e,x)&X])>>>4;if((x+=15&Q)>k){p&&S(0);break}if(Q||S(2),Z<256)a[C++]=Z;else{if(256==Z){K=x,E=null;break}var J=Z-254;if(Z>264){var ee=r[z=Z-257];J=A(e,x,(1<<ee)-1)+c[z],x+=ee}var te=T[w(e,x)&Y],ie=te>>>4;if(te||S(3),x+=15&te,W=h[ie],ie>3&&(ee=o[ie],W+=w(e,x)&(1<<ee)-1,x+=ee),x>k){p&&S(0);break}d&&m(C+131072);for(var ne=C+J;C<ne;C+=4)a[C]=a[C-W],a[C+1]=a[C+1-W],a[C+2]=a[C+2-W],a[C+3]=a[C+3-W];C=ne}}l.l=E,l.p=K,l.b=C,E&&(_=1,l.m=I,l.d=T,l.n=M)}while(!_);return C==a.length?a:function(e,r,o){(null==o||o>e.length)&&(o=e.length);var s=new(e instanceof i?i:e instanceof n?n:t)(o-0);return s.set(e.subarray(0,o)),s}(a,0,C)},E=new t(0),T="undefined"!=typeof TextDecoder&&new TextDecoder;try{T.decode(E,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),i=0;function n(){var e=t.getUint16(i);return i+=2,e}function r(){var e=t.getUint32(i);return i+=4,e}function o(e){_.setUint16(v,e),v+=2}function s(e){_.setUint32(v,e),v+=4}for(var a={signature:r(),flavor:r(),length:r(),numTables:n(),reserved:n(),totalSfntSize:r(),majorVersion:n(),minorVersion:n(),metaOffset:r(),metaLength:r(),metaOrigLength:r(),privOffset:r(),privLength:r()},l=0;Math.pow(2,l)<=a.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*a.numTables-c,h=12,d=[],p=0;p<a.numTables;p++)d.push({tag:r(),offset:r(),compLength:r(),origLength:r(),origChecksum:r()}),h+=16;var f,g=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),m=g.buffer,_=new DataView(m),v=0;return s(a.flavor),o(a.numTables),o(c),o(l),o(u),d.forEach((function(e){s(e.tag),s(e.origChecksum),s(h),s(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var i,n=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var r=new Uint8Array(t.origLength);i=new Uint8Array(n,2),C(i,r)}else r=new Uint8Array(n);g.set(r,t.outOffset);var o=0;(h=t.outOffset+t.origLength)%4!=0&&(o=4-h%4),g.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),f=h+o})),m.slice(0,f)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const i={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let r;function o(e){if(!r){const e={R:2,L:1,D:4,C:16,U:32,T:8};r=new Map;for(let t in n){let i=0;n[t].split(",").forEach((n=>{let[o,s]=n.split("+");o=parseInt(o,36),s=s?parseInt(s,36):0,r.set(i+=o,e[t]);for(let a=s;a--;)r.set(++i,e[t])}))}}return r.get(e)||32}const s=[null,"isol","init","fina","medi"];function a(e){const t=new Uint8Array(e.length);let i=32,n=1,r=-1;for(let s=0;s<e.length;s++){const a=e.codePointAt(s);let l=0|o(a),c=1;8&l||(21&i?22&l?(c=3,1!==n&&3!==n||t[r]++):33&l&&(2!==n&&4!==n||t[r]--):34&i&&(2!==n&&4!==n||t[r]--),n=t[s]=c,i=l,r=s,a>65535&&s++)}return t}function l(t,i){const n=t.GDEF&&t.GDEF.glyphClassDef;return n?e.U._getGlyphClass(i,n):0}function c(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n=0;n<t.length;n++)if("number"==typeof t[n])return t[n]}function u(t){const n=Object.create(null),r=t["OS/2"],o=t.hhea,u=t.head.unitsPerEm,h=c(r&&r.sTypoAscender,o&&o.ascender,u),d={unitsPerEm:u,ascender:h,descender:c(r&&r.sTypoDescender,o&&o.descender,0),capHeight:c(r&&r.sCapHeight,h),xHeight:c(r&&r.sxHeight,h),lineGap:c(r&&r.sTypoLineGap,o&&o.lineGap),supportsCodePoint:i=>e.U.codeToGlyph(t,i)>0,forEachGlyph(r,o,c,u){let h=0;const p=1/d.unitsPerEm*o,f=function(t,i){const n=[];for(let o=0;o<i.length;o++){const r=i.codePointAt(o);r>65535&&o++,n.push(e.U.codeToGlyph(t,r))}const r=t.GSUB;if(r){const{lookupList:t,featureList:o}=r;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,u=[];o.forEach((r=>{if(c.test(r.tag))for(let o=0;o<r.tab.length;o++){if(u[r.tab[o]])continue;u[r.tab[o]]=!0;const c=t[r.tab[o]],h=/^(isol|init|fina|medi)$/.test(r.tag);h&&!l&&(l=a(i));for(let i=0;i<n.length;i++)l&&h&&s[l[i]]!==r.tag||e.U._applySubs(n,i,c,t)}}))}return n}(t,r);let g=0;const m=function(t,i){const n=new Int16Array(3*i.length);let r=0;for(;r<i.length;r++){const c=i[r];if(-1===c)continue;n[3*r+2]=t.hmtx.aWidth[c];const u=t.GPOS;if(u){const h=u.lookupList;for(let u=0;u<h.length;u++){const d=h[u];for(let u=0;u<d.tabs.length;u++){const h=d.tabs[u];if(1===d.ltype){if(-1!==e._lctf.coverageIndex(h.coverage,c)&&h.pos){a(h.pos,r);break}}else if(2===d.ltype){let t=null,n=o();if(-1!==n){const o=e._lctf.coverageIndex(h.coverage,i[n]);if(-1!==o){if(1===h.fmt){const e=h.pairsets[o];for(let i=0;i<e.length;i++)e[i].gid2===c&&(t=e[i])}else if(2===h.fmt){const r=e.U._getGlyphClass(i[n],h.classDef1),o=e.U._getGlyphClass(c,h.classDef2);t=h.matrix[r][o]}if(t){t.val1&&a(t.val1,n),t.val2&&a(t.val2,r);break}}}}else if(4===d.ltype){const t=e._lctf.coverageIndex(h.markCoverage,c);if(-1!==t){const a=o(s),l=-1===a?-1:e._lctf.coverageIndex(h.baseCoverage,i[a]);if(-1!==l){const e=h.markArray[t],i=h.baseArray[l][e.markClass];n[3*r]=i.x-e.x+n[3*a]-n[3*a+2],n[3*r+1]=i.y-e.y+n[3*a+1];break}}}else if(6===d.ltype){const s=e._lctf.coverageIndex(h.mark1Coverage,c);if(-1!==s){const a=o();if(-1!==a){const o=i[a];if(3===l(t,o)){const t=e._lctf.coverageIndex(h.mark2Coverage,o);if(-1!==t){const e=h.mark1Array[s],i=h.mark2Array[t][e.markClass];n[3*r]=i.x-e.x+n[3*a]-n[3*a+2],n[3*r+1]=i.y-e.y+n[3*a+1];break}}}}}}}}else if(t.kern&&!t.cff){const e=o();if(-1!==e){const r=t.kern.glyph1.indexOf(i[e]);if(-1!==r){const i=t.kern.rval[r].glyph2.indexOf(c);-1!==i&&(n[3*e+2]+=t.kern.rval[r].vals[i])}}}}return n;function o(e){for(let t=r-1;t>=0;t--)if(-1!==i[t]&&(!e||e(i[t])))return t;return-1}function s(e){return 1===l(t,e)}function a(e,t){for(let i=0;i<3;i++)n[3*t+i]+=e[i]||0}}(t,f);return f.forEach(((s,a)=>{if(-1!==s){let r=n[s];if(!r){const{cmds:o,crds:a}=e.U.glyphToPath(t,s);let l,c,u,h,d="",p=0;for(let e=0,t=o.length;e<t;e++){const t=i[o[e]];d+=o[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+a[p++]}if(a.length){l=c=1/0,u=h=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],i=a[e+1];t<l&&(l=t),i<c&&(c=i),t>u&&(u=t),i>h&&(h=i)}}else l=u=c=h=0;r=n[s]={index:s,advanceWidth:t.hmtx.aWidth[s],xMin:l,yMin:c,xMax:u,yMax:h,path:d}}u.call(null,r,h+m[3*a]*p,m[3*a+1]*p,g),h+=m[3*a+2]*p,c&&(h+=c*o)}g+=r.codePointAt(g)>65535?2:1})),h}};return d}return function(i){const n=new Uint8Array(i,0,4),r=e._bin.readASCII(n,0,4);if("wOFF"===r)i=t(i);else if("wOF2"===r)throw new Error("woff2 fonts not supported");return u(e.parse(i)[0])}}],init:(e,t,i)=>i(e(),t())}),foe=Yre({name:"FontResolver",dependencies:[function(e,t){const i=Object.create(null),n=Object.create(null);function r(t,r){let o=i[t];o?r(o):n[t]?n[t].push(r):(n[t]=[r],function(t,i){const n=e=>{console.error(`Failure loading font ${t}`,e)};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)n(new Error(r.statusText));else if(r.status>0)try{const n=e(r.response);n.src=t,i(n)}catch(e){n(e)}},r.onerror=n,r.send()}catch(e){n(e)}}(t,(e=>{e.src=t,i[t]=e,n[t].forEach((t=>t(e))),delete n[t]})))}return function(e,n){let{lang:o,fonts:s=[],style:a="normal",weight:l="normal",unicodeFontsURL:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const u=new Uint8Array(e.length),h=[];e.length||g();const d=new Map,p=[];if("italic"!==a&&(a="normal"),"number"!=typeof l&&(l="bold"===l?700:400),s&&!Array.isArray(s)&&(s=[s]),(s=s.slice().filter((e=>!e.lang||e.lang.test(o))).reverse()).length){const t=1,n=2;let o=0;!function a(){for(let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=e.length;l<c;l++){const f=e.codePointAt(l);if(o===t&&h[u[l-1]].supportsCodePoint(f)||l>0&&/\s/.test(e[l]))u[l]=u[l-1],o===n&&(p[p.length-1][1]=l);else for(let e=u[l],c=s.length;e<=c;e++)if(e===c)(o===n?p[p.length-1]:p[p.length]=[l,l])[1]=l,o=n;else{u[l]=e;const{src:n,unicodeRange:c}=s[e];if(!c||m(f,c)){const e=i[n];if(!e)return void r(n,(()=>{a(l)}));if(e.supportsCodePoint(f)){let i=d.get(e);"number"!=typeof i&&(i=h.length,h.push(e),d.set(e,i)),u[l]=i,o=t;break}}}f>65535&&l+1<c&&(u[l+1]=u[l],l++,o===n&&(p[p.length-1][1]=l))}f()}()}else p.push([0,e.length-1]),f();function f(){if(p.length){const i=p.map((t=>e.substring(t[0],t[1]+1))).join("\n");t.getFontsForString(i,{lang:o||void 0,style:a,weight:l,dataUrl:c}).then((e=>{let{fontUrls:t,chars:i}=e;const n=h.length;let o=0;p.forEach((e=>{for(let t=0,r=e[1]-e[0];t<=r;t++)u[e[0]+t]=i[o++]+n;o++}));let s=0;t.forEach(((e,i)=>{r(e,(e=>{h[i+n]=e,++s===t.length&&g()}))}))}))}else g()}function g(){n({chars:u,fonts:h})}function m(e,t){for(let i=0;i<t.length;i++){const[n,r=n]=t[i];if(n<=e&&e<=r)return!0}return!1}}},poe,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&!!(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach((function(t,i){e.push((+i).toString(36)+":"+t.toString(36))})),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach((function(e){var i=e.split(":");t.buckets.set(parseInt(i[0],36),parseInt(i[1],36))}))};var i=Math.pow(2,8),n=i-1,r=~n;function o(e){var t=function(e){return e&r}(e).toString(16),n=function(e){return(e&r)+i-1}(e).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+n+".json"}function s(e,t){var i=e&n,r=t.codePointAt(i/6|0);return!!((r=(r||48)-48)&1<<i%6)}function a(e,t){!function(e,t){var i;(i=e,i.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(e){return e.split("-").map((function(e){return parseInt(e.trim(),16)}))}))).forEach((function(e){var i=e[0],n=e[1];void 0===n&&(n=i),t(i,n)}))}(e,(function(e,i){for(var n=e;n<=i;n++)t(n)}))}var l={},c={},u=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(e){var i=u.get(e);return i||(i=new t,a(e.ranges,(function(e){return i.add(e)})),u.set(e,i)),i}var p,f=new Map;function g(e,t,i){return e[t]?t:e[i]?i:function(e){for(var t in e)return t}(e)}function m(e,t){var i=t;if(!e.includes(i)){i=1/0;for(var n=0;n<e.length;n++)Math.abs(e[n]-t)<Math.abs(i-t)&&(i=e[n])}return i}function _(e){return p||(p=new Set,a("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(e){p.add(e)}))),p.has(e)}return e.CodePointSet=t,e.clearCache=function(){l={},c={}},e.getFontsForString=function(e,t){void 0===t&&(t={});var i,n=t.lang;void 0===n&&(n=/\p{Script=Hangul}/u.test(i=e)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(i)?"ja":"en");var r=t.category;void 0===r&&(r="sans-serif");var a=t.style;void 0===a&&(a="normal");var u=t.weight;void 0===u&&(u=400);var p=(t.dataUrl||h).replace(/\/$/g,""),v=new Map,y=new Uint8Array(e.length),b={},A={},w=new Array(e.length),x=new Map,S=!1;function C(e){var t=f.get(e);return t||(t=fetch(p+"/"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json().then((function(e){if(!Array.isArray(e)||1!==e[0])throw new Error("Incorrect schema version; need 1, got "+e[0]);return e[1]}))})).catch((function(t){if(p!==h)return S||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+p+'", trying default CDN. '+t.message),S=!0),p=h,f.delete(e),C(e);throw t})),f.set(e,t)),t}for(var E=function(t){var i=e.codePointAt(t),n=o(i);w[t]=n,l[n]||x.has(n)||x.set(n,C(n).then((function(e){l[n]=e}))),i>65535&&(t++,T=t)},T=0;T<e.length;T++)E(T);return Promise.all(x.values()).then((function(){x.clear();for(var t=function(t){var r=e.codePointAt(t),o=null,a=l[w[t]],u=void 0;for(var h in a){var d=A[h];if(void 0===d&&(d=A[h]=new RegExp(h).test(n||"en")),d){for(var p in u=h,a[h])if(s(r,a[h][p])){o=p;break}break}}if(!o)e:for(var f in a)if(f!==u)for(var g in a[f])if(s(r,a[f][g])){o=g;break e}o||(console.debug("No font coverage for U+"+r.toString(16)),o="latin"),w[t]=o,c[o]||x.has(o)||x.set(o,C("font-meta/"+o+".json").then((function(e){c[o]=e}))),r>65535&&(t++,i=t)},i=0;i<e.length;i++)t(i);return Promise.all(x.values())})).then((function(){for(var t,i=null,n=0;n<e.length;n++){var o=e.codePointAt(n);if(i&&(_(o)||d(i).has(o)))y[n]=y[n-1];else{i=c[w[n]];var s=b[i.id];if(!s){var l=i.typeforms,h=g(l,r,"sans-serif"),f=g(l[h],a,"normal"),A=m(null===(t=l[h])||void 0===t?void 0:t[f],u);s=b[i.id]=p+"/font-files/"+i.id+"/"+h+"."+f+"."+A+".woff"}var x=v.get(s);null==x&&(x=v.size,v.set(s,x)),y[n]=x}o>65535&&(n++,y[n]=y[n-1])}return{fontUrls:Array.from(v.keys()),chars:y}}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,i)=>e(t,i())}),goe=()=>(self.performance||Date).now(),moe=Jre();let _oe;const voe=[];let yoe=0;function boe(){const e=goe();for(;voe.length&&goe()-e<5;)voe.shift()();yoe=voe.length?setTimeout(boe,0):0}const Aoe={};let woe=0;function xoe(e,t,i,n,r,o,s,a,l,c){const u="TroikaTextSDFGenerator_JS_"+woe++%4;let h=Aoe[u];return h||(h=Aoe[u]={workerModule:Yre({name:u,workerId:u,dependencies:[Jre,goe],init(e,t){const i=e().javascript.generate;return function(){const e=t();return{textureData:i(...arguments),timing:t()-e}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,i,n,r,o).then((i=>{let{textureData:n,timing:r}=i;const o=goe(),d=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)d[4*e+c]=n[e];return moe.webglUtils.renderImageData(s,d,a,l,e,t,1<<3-c),r+=goe()-o,0==--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){Wre[e]&&Wre[e].forEach((function(e){e()})),qre[e]&&(qre[e].terminate(),delete qre[e])}(u)}),2e3)),{timing:r}}))}const Soe=moe.webglUtils.resizeWebGLCanvasWithoutClearing,Coe={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Eoe=new so;function Toe(){return(self.performance||Date).now()}const Ioe=Object.create(null);function Moe(e,t){e=function(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}({},e);const i=Toe(),{defaultFontURL:n}=Coe,r=[];if(n&&r.push({label:"default",src:Roe(n)}),e.font&&r.push({label:"user",src:Roe(e.font)}),e.font=r,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Coe.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||Coe.unicodeFontsURL,null!=e.colorRanges){let t={};for(let i in e.colorRanges)if(e.colorRanges.hasOwnProperty(i)){let n=e.colorRanges[i];"number"!=typeof n&&(n=Eoe.set(n).getHex()),t[i]=n}e.colorRanges=t}Object.freeze(e);const{textureWidth:o,sdfExponent:s}=Coe,{sdfGlyphSize:a}=e,l=o/a*4;let c=Ioe[a];if(!c){const e=document.createElement("canvas");e.width=o,e.height=256*a/l,c=Ioe[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:e,sdfTexture:new Mn(e,void 0,void 0,void 0,Te,Te),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const i=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{i.push(koe(t,e,!0))}))})),Promise.all(i).then((()=>{Poe(e),e.sdfTexture.needsUpdate=!0}))}))}(c)}const{sdfTexture:u,sdfCanvas:h}=c;Loe(e).then((n=>{const{glyphIds:r,glyphFontIndices:d,fontData:p,glyphPositions:f,fontSize:g,timings:m}=n,_=[],v=new Float32Array(4*r.length);let y=0,b=0;const A=Toe(),w=p.map((e=>{let t=c.glyphsByFont.get(e.src);return t||c.glyphsByFont.set(e.src,t=new Map),t}));r.forEach(((e,t)=>{const i=d[t],{src:o,unitsPerEm:s}=p[i];let l=w[i].get(e);if(!l){const{path:t,pathBounds:r}=n.glyphData[o][e],s=Math.max(r[2]-r[0],r[3]-r[1])/a*(Coe.sdfMargin*a+.5),u=c.glyphCount++,h=[r[0]-s,r[1]-s,r[2]+s,r[3]+s];w[i].set(e,l={path:t,atlasIndex:u,sdfViewBox:h}),_.push(l)}const{sdfViewBox:u}=l,h=f[b++],m=f[b++],A=g/s;v[y++]=h+u[0]*A,v[y++]=m+u[1]*A,v[y++]=h+u[2]*A,v[y++]=m+u[3]*A,r[t]=l.atlasIndex})),m.quads=(m.quads||0)+(Toe()-A);const x=Toe();m.sdf={};const S=h.height,C=Math.ceil(c.glyphCount/l),E=Math.pow(2,Math.ceil(Math.log2(C*a)));E>S&&(console.info(`Increasing SDF texture size ${S}->${E}`),Soe(h,o,E),u.dispose()),Promise.all(_.map((t=>koe(t,c,e.gpuAccelerateSDF).then((e=>{let{timing:i}=e;m.sdf[t.atlasIndex]=i}))))).then((()=>{_.length&&!c.contextLost&&(Poe(c),u.needsUpdate=!0),m.sdfTotal=Toe()-x,m.total=Toe()-i,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:a,sdfExponent:s,glyphBounds:v,glyphAtlasIndices:r,glyphColors:n.glyphColors,caretPositions:n.caretPositions,chunkedBounds:n.chunkedBounds,ascender:n.ascender,descender:n.descender,lineHeight:n.lineHeight,capHeight:n.capHeight,xHeight:n.xHeight,topBaseline:n.topBaseline,blockBounds:n.blockBounds,visibleBounds:n.visibleBounds,timings:n.timings}))}))})),Promise.resolve().then((()=>{var e;c.contextLost||(e=h)._warm||(moe.webgl.isSupported(e),e._warm=!0)}))}function koe(e,t,i){let{path:n,atlasIndex:r,sdfViewBox:o}=e,{sdfGlyphSize:s,sdfCanvas:a,contextLost:l}=t;if(l)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:u}=Coe,h=Math.max(o[2]-o[0],o[3]-o[1]),d=Math.floor(r/4);return function(e,t,i,n,r,o,s,a,l,c){return!(arguments.length>10&&void 0!==arguments[10])||arguments[10]?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Promise(((e,i)=>{voe.push((()=>{const n=goe();try{moe.webgl.generateIntoCanvas(...t),e({timing:goe()-n})}catch(t){i(t)}})),yoe||(yoe=setTimeout(boe,0))}))}(e,t,i,n,r,o,s,a,l,c).then(null,(u=>(_oe||(console.warn("WebGL SDF generation failed, falling back to JS",u),_oe=!0),xoe(e,t,i,n,r,o,s,a,l,c)))):xoe(e,t,i,n,r,o,s,a,l,c)}(s,s,n,o,h,u,a,d%(c/s)*s,Math.floor(d/(c/s))*s,r%4,i)}let Boe;function Roe(e){return Boe||(Boe="undefined"==typeof document?{}:document.createElement("a")),Boe.href=e,Boe.href}function Poe(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:i}=e,{width:n,height:r}=t,o=e.sdfCanvas.getContext("webgl");let s=i.image.data;s&&s.length===n*r*4||(s=new Uint8Array(n*r*4),i.image={width:n,height:r,data:s},i.flipY=!1,i.isDataTexture=!0),o.readPixels(0,0,n,r,o.RGBA,o.UNSIGNED_BYTE,s)}}const Doe=Yre({name:"Typesetter",dependencies:[function(e,t){const i=1/0,n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",o=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s(s,h){let{text:d="",font:p,lang:f,sdfGlyphSize:g=64,fontSize:m=400,fontWeight:_=1,fontStyle:v="normal",letterSpacing:y=0,lineHeight:b="normal",maxWidth:A=i,direction:w,textAlign:x="left",textIndent:S=0,whiteSpace:C="normal",overflowWrap:E="normal",anchorX:T=0,anchorY:I=0,metricsOnly:M=!1,unicodeFontsURL:k,preResolvedFonts:B=null,includeCaretPositions:R=!1,chunkedBoundsSize:P=8192,colorRanges:D=null}=s;const L=c(),O={fontLoad:0,typesetting:0};d.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),d=d.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),m=+m,y=+y,A=+A,b=b||"normal",S=+S,function(t,i){let{text:n,lang:r,fonts:o,style:s,weight:a,preResolvedFonts:l,unicodeFontsURL:c}=t;const u=e=>{let t,n,{chars:r,fonts:o}=e;const s=[];for(let i=0;i<r.length;i++)r[i]!==n?(n=r[i],s.push(t={start:i,end:i,fontObj:o[r[i]]})):t.end=i;i(s)};l?u(l):e(n,u,{lang:r,fonts:o,style:s,weight:a,unicodeFontsURL:c})}({text:d,lang:f,style:v,weight:_,fonts:"string"==typeof p?[{src:p}]:p,unicodeFontsURL:k,preResolvedFonts:B},(e=>{O.fontLoad=c()-L;const s=isFinite(A);let p=null,f=null,g=null,_=null,v=null,k=null,B=null,F=null,N=0,z=0,U="nowrap"!==C;const H=new Map,V=c();let $=S,G=0,Q=new u;const j=[Q];e.forEach((e=>{const{fontObj:t}=e,{ascender:i,descender:a,unitsPerEm:l,lineGap:c,capHeight:h,xHeight:p}=t;let f=H.get(t);if(!f){const e=m/l,n="normal"===b?(i-a+c)*e:b*m,r=(n-(i-a)*e)/2,o=Math.min(n,(i-a)*e),s=(i+a)/2*e+o/2;f={index:H.size,src:t.src,fontObj:t,fontSizeMult:e,unitsPerEm:l,ascender:i*e,descender:a*e,capHeight:h*e,xHeight:p*e,lineHeight:n,baseline:-r-i*e,caretTop:s,caretBottom:s-o},H.set(t,f)}const{fontSizeMult:g}=f,_=d.slice(e.start,e.end+1);let v,w;t.forEachGlyph(_,m,y,((t,i,a,l)=>{i+=G,l+=e.start,v=i,w=t;const c=d.charAt(l),h=t.advanceWidth*g,p=Q.count;let _;if("isEmpty"in t||(t.isWhitespace=!!c&&new RegExp(r).test(c),t.canBreakAfter=!!c&&o.test(c),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||n.test(c)),t.isWhitespace||t.isEmpty||z++,U&&s&&!t.isWhitespace&&i+h+$>A&&p){if(Q.glyphAt(p-1).glyphObj.canBreakAfter)_=new u,$=-i;else for(let e=p;e--;){if(0===e&&"break-word"===E){_=new u,$=-i;break}if(Q.glyphAt(e).glyphObj.canBreakAfter){_=Q.splitAt(e+1);const t=_.glyphAt(0).x;$-=t;for(let e=_.count;e--;)_.glyphAt(e).x-=t;break}}_&&(Q.isSoftWrapped=!0,Q=_,j.push(Q),N=A)}let b=Q.glyphAt(Q.count);b.glyphObj=t,b.x=i+$,b.y=a,b.width=h,b.charIndex=l,b.fontData=f,"\n"===c&&(Q=new u,j.push(Q),$=-(i+h+y*m)+S)})),G=v+w.advanceWidth*g+y*m}));let q=0;j.forEach((e=>{let t=!0;for(let i=e.count;i--;){const n=e.glyphAt(i);t&&!n.glyphObj.isWhitespace&&(e.width=n.x+n.width,e.width>N&&(N=e.width),t=!1);let{lineHeight:r,capHeight:o,xHeight:s,baseline:a}=n.fontData;r>e.lineHeight&&(e.lineHeight=r);const l=a-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+o),e.ex=Math.max(e.ex,e.baseline+s)}e.baseline-=q,e.cap-=q,e.ex-=q,q+=e.lineHeight}));let W=0,X=0;if(T&&("number"==typeof T?W=-T:"string"==typeof T&&(W=-N*("left"===T?0:"center"===T?.5:"right"===T?1:a(T)))),I&&("number"==typeof I?X=-I:"string"==typeof I&&(X="top"===I?0:"top-baseline"===I?-j[0].baseline:"top-cap"===I?-j[0].cap:"top-ex"===I?-j[0].ex:"middle"===I?q/2:"bottom"===I?q:"bottom-baseline"===I?-j[j.length-1].baseline:a(I)*q)),!M){const e=t.getEmbeddingLevels(d,w);p=new Uint16Array(z),f=new Uint8Array(z),g=new Float32Array(2*z),_={},B=[i,i,-1/0,-1/0],F=[],R&&(k=new Float32Array(4*d.length)),D&&(v=new Uint8Array(3*z));let n,r,o=0,s=-1,a=-1;if(j.forEach(((c,u)=>{let{count:h,width:m}=c;if(h>0){let u=0;for(let e=h;e--&&c.glyphAt(e).glyphObj.isWhitespace;)u++;let y=0,b=0;if("center"===x)y=(N-m)/2;else if("right"===x)y=N-m;else if("justify"===x&&c.isSoftWrapped){let e=0;for(let t=h-u;t--;)c.glyphAt(t).glyphObj.isWhitespace&&e++;b=(N-m)/e}if(b||y){let e=0;for(let t=0;t<h;t++){let i=c.glyphAt(t);const n=i.glyphObj;i.x+=y+e,0!==b&&n.isWhitespace&&t<h-u&&(e+=b,i.width+=b)}}const A=t.getReorderSegments(d,e,c.glyphAt(0).charIndex,c.glyphAt(c.count-1).charIndex);for(let e=0;e<A.length;e++){const[t,i]=A[e];let n=1/0,r=-1/0;for(let e=0;e<h;e++)if(c.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<h;o++){let e=c.glyphAt(o);if(e.charIndex>i)break;o<h-u&&(n=Math.min(n,e.x),r=Math.max(r,e.x+e.width))}for(let e=t;e<o;e++){const t=c.glyphAt(e);t.x=r-(t.x+t.width-n)}break}}let w;const S=e=>w=e;for(let m=0;m<h;m++){const u=c.glyphAt(m);w=u.glyphObj;const h=w.index,y=1&e.levels[u.charIndex];if(y){const e=t.getMirroredCharacter(d[u.charIndex]);e&&u.fontData.fontObj.forEachGlyph(e,0,0,S)}if(R){const{charIndex:e,fontData:t}=u,i=u.x+W,n=u.x+u.width+W;k[4*e]=y?n:i,k[4*e+1]=y?i:n,k[4*e+2]=c.baseline+t.caretBottom+X,k[4*e+3]=c.baseline+t.caretTop+X;const r=e-s;r>1&&l(k,s,r),s=e}if(D){const{charIndex:e}=u;for(;e>a;)a++,D.hasOwnProperty(a)&&(r=D[a])}if(!w.isWhitespace&&!w.isEmpty){const e=o++,{fontSizeMult:t,src:s,index:a}=u.fontData,l=_[s]||(_[s]={});l[h]||(l[h]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const d=u.x+W,m=u.y+c.baseline+X;g[2*e]=d,g[2*e+1]=m;const y=d+w.xMin*t,b=m+w.yMin*t,A=d+w.xMax*t,x=m+w.yMax*t;y<B[0]&&(B[0]=y),b<B[1]&&(B[1]=b),A>B[2]&&(B[2]=A),x>B[3]&&(B[3]=x),e%P==0&&(n={start:e,end:e,rect:[i,i,-1/0,-1/0]},F.push(n)),n.end++;const S=n.rect;if(y<S[0]&&(S[0]=y),b<S[1]&&(S[1]=b),A>S[2]&&(S[2]=A),x>S[3]&&(S[3]=x),p[e]=h,f[e]=a,D){const t=3*e;v[t]=r>>16&255,v[t+1]=r>>8&255,v[t+2]=255&r}}}}})),k){const e=d.length-s;e>1&&l(k,s,e)}}const Y=[];H.forEach((e=>{let{index:t,src:i,unitsPerEm:n,ascender:r,descender:o,lineHeight:s,capHeight:a,xHeight:l}=e;Y[t]={src:i,unitsPerEm:n,ascender:r,descender:o,lineHeight:s,capHeight:a,xHeight:l}})),O.typesetting=c()-V,h({glyphIds:p,glyphFontIndices:f,glyphPositions:g,glyphData:_,fontData:Y,caretPositions:k,glyphColors:v,chunkedBounds:F,fontSize:m,topBaseline:X+j[0].baseline,blockBounds:[W,X-q,W+N,X],visibleBounds:B,timings:O})}))}function a(e){let t=e.match(/^([\d.]+)%$/),i=t?parseFloat(t[1]):NaN;return isNaN(i)?0:i/100}function l(e,t,i){const n=e[4*t],r=e[4*t+1],o=e[4*t+2],s=e[4*t+3],a=(r-n)/i;for(let l=0;l<i;l++){const i=4*(t+l);e[i]=n+a*l,e[i+1]=n+a*(l+1),e[i+2]=o,e[i+3]=s}}function c(){return(self.performance||Date).now()}function u(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return u.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(e){let t=u.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new u;return t.data=this.data.splice(e*h.length),t}},u.flyweight=h.reduce(((e,t,i,n)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*h.length+i]},set(e){this.data[this.index*h.length+i]=e}}),e)),{data:null,index:0}),{typeset:s,measure:function(e,t){s({...e,metricsOnly:!0},(e=>{const[i,n,r,o]=e.blockBounds;t({width:r-i,height:o-n})}))}}},foe,function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},n={};i.L=1,n[1]="L",Object.keys(t).forEach((function(e,t){i[e]=1<<t+1,n[i[e]]=e})),Object.freeze(i);var r=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,s=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,a=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,l=i.S|i.WS|i.B|r|i.PDI|a,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var n=0;t[e].split(",").forEach((function(t){var r=t.split("+"),o=r[0],s=r[1];o=parseInt(o,36),s=s?parseInt(s,36):0,c.set(n+=o,i[e]);for(var a=0;a<s;a++)c.set(++n,i[e])}))}};for(var n in t)e(n)}}(),c.get(e.codePointAt(0))||i.L}var h,d,p;function f(e,t){var i,n=0,r=new Map,o=t&&new Map;return e.split(",").forEach((function e(s){if(-1!==s.indexOf("+"))for(var a=+s;a--;)e(i);else{i=s;var l=s.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(n+=parseInt(c,36)),u=String.fromCodePoint(n+=parseInt(u,36)),r.set(c,u),t&&o.set(u,c)}})),{map:r,reverseMap:o}}function g(){if(!h){var e=f("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0),t=e.map,i=e.reverseMap;h=t,d=i,p=f("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function m(e){return g(),h.get(e)||null}function _(e){return g(),d.get(e)||null}function v(e){return g(),p.get(e)||null}var y,b=i.L,A=i.R,w=i.EN,x=i.ES,S=i.ET,C=i.AN,E=i.CS,T=i.B,I=i.S,M=i.ON,k=i.BN,B=i.NSM,R=i.AL,P=i.LRO,D=i.RLO,L=i.LRE,O=i.RLE,F=i.PDF,N=i.LRI,z=i.RLI,U=i.FSI,H=i.PDI;function V(e){return function(){if(!y){var e=f("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,i){t.set(i,e)})),y=t}}(),y.get(e)||null}function $(e,t,i,n){var r=e.length;i=Math.max(0,null==i?0:+i),n=Math.min(r-1,null==n?r-1:+n);var o=[];return t.paragraphs.forEach((function(r){var s=Math.max(i,r.start),a=Math.min(n,r.end);if(s<a){for(var c=t.levels.slice(s,a+1),h=a;h>=s&&u(e[h])&l;h--)c[h]=r.level;for(var d=r.level,p=1/0,f=0;f<c.length;f++){var g=c[f];g>d&&(d=g),g<p&&(p=1|g)}for(var m=d;m>=p;m--)for(var _=0;_<c.length;_++)if(c[_]>=m){for(var v=_;_+1<c.length&&c[_+1]>=m;)_++;_>v&&o.push([v+s,_+s])}}})),o}function G(e,t,i,n){for(var r=$(e,t,i,n),o=[],s=0;s<e.length;s++)o[s]=s;return r.forEach((function(e){for(var t=e[0],i=e[1],n=o.slice(t,i+1),r=n.length;r--;)o[i-r]=n[r]})),o}return e.closingToOpeningBracket=_,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return n[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function(e,t){for(var i=new Uint32Array(e.length),n=0;n<e.length;n++)i[n]=u(e[n]);var c=new Map;function h(e,t){var n=i[e];i[e]=t,c.set(n,c.get(n)-1),n&s&&c.set(s,c.get(s)-1),c.set(t,(c.get(t)||0)+1),t&s&&c.set(s,(c.get(s)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],g=null,y=0;y<e.length;y++)g||f.push(g={start:y,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Ht(y,!1)}),i[y]&T&&(g.end=y,g=null);for(var V=O|L|D|P|r|H|F|T,$=function(e){return e+(1&e?1:2)},G=function(e){return e+(1&e?2:1)},Q=0;Q<f.length;Q++){var j=[{_level:(g=f[Q]).level,_override:0,_isolate:0}],q=void 0,W=0,X=0,Y=0;c.clear();for(var K=g.start;K<=g.end;K++){var Z=i[K];if(q=j[j.length-1],c.set(Z,(c.get(Z)||0)+1),Z&s&&c.set(s,(c.get(s)||0)+1),Z&V)if(Z&(O|L)){d[K]=q._level;var J=(Z===O?G:$)(q._level);J<=125&&!W&&!X?j.push({_level:J,_override:0,_isolate:0}):W||X++}else if(Z&(D|P)){d[K]=q._level;var ee=(Z===D?G:$)(q._level);ee<=125&&!W&&!X?j.push({_level:ee,_override:Z&D?A:b,_isolate:0}):W||X++}else if(Z&r){Z&U&&(Z=1===Ht(K+1,!0)?z:N),d[K]=q._level,q._override&&h(K,q._override);var te=(Z===z?G:$)(q._level);te<=125&&0===W&&0===X?(Y++,j.push({_level:te,_override:0,_isolate:1,_isolInitIndex:K})):W++}else if(Z&H){if(W>0)W--;else if(Y>0){for(X=0;!j[j.length-1]._isolate;)j.pop();var ie=j[j.length-1]._isolInitIndex;null!=ie&&(p.set(ie,K),p.set(K,ie)),j.pop(),Y--}q=j[j.length-1],d[K]=q._level,q._override&&h(K,q._override)}else Z&F?(0===W&&(X>0?X--:!q._isolate&&j.length>1&&(j.pop(),q=j[j.length-1])),d[K]=q._level):Z&T&&(d[K]=g.level);else d[K]=q._level,q._override&&Z!==k&&h(K,q._override)}for(var ne=[],re=null,oe=g.start;oe<=g.end;oe++){var se=i[oe];if(!(se&a)){var ae=d[oe],le=se&r,ce=se===H;re&&ae===re._level?(re._end=oe,re._endsWithIsolInit=le):ne.push(re={_start:oe,_end:oe,_level:ae,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<ne.length;he++){var de=ne[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[re=de],fe=void 0;re&&re._endsWithIsolInit&&null!=(fe=p.get(re._end));)for(var ge=he+1;ge<ne.length;ge++)if(ne[ge]._start===fe){pe.push(re=ne[ge]);break}for(var me=[],_e=0;_e<pe.length;_e++)for(var ve=pe[_e],ye=ve._start;ye<=ve._end;ye++)me.push(ye);for(var be=d[me[0]],Ae=g.level,we=me[0]-1;we>=0;we--)if(!(i[we]&a)){Ae=d[we];break}var xe=me[me.length-1],Se=d[xe],Ce=g.level;if(!(i[xe]&r))for(var Ee=xe+1;Ee<=g.end;Ee++)if(!(i[Ee]&a)){Ce=d[Ee];break}ue.push({_seqIndices:me,_sosType:Math.max(Ae,be)%2?A:b,_eosType:Math.max(Ce,Se)%2?A:b})}}for(var Te=0;Te<ue.length;Te++){var Ie=ue[Te],Me=Ie._seqIndices,ke=Ie._sosType,Be=Ie._eosType,Re=1&d[Me[0]]?A:b;if(c.get(B))for(var Pe=0;Pe<Me.length;Pe++){var De=Me[Pe];if(i[De]&B){for(var Le=ke,Oe=Pe-1;Oe>=0;Oe--)if(!(i[Me[Oe]]&a)){Le=i[Me[Oe]];break}h(De,Le&(r|H)?M:Le)}}if(c.get(w))for(var Fe=0;Fe<Me.length;Fe++){var Ne=Me[Fe];if(i[Ne]&w)for(var ze=Fe-1;ze>=-1;ze--){var Ue=-1===ze?ke:i[Me[ze]];if(Ue&o){Ue===R&&h(Ne,C);break}}}if(c.get(R))for(var He=0;He<Me.length;He++){var Ve=Me[He];i[Ve]&R&&h(Ve,A)}if(c.get(x)||c.get(E))for(var $e=1;$e<Me.length-1;$e++){var Ge=Me[$e];if(i[Ge]&(x|E)){for(var Qe=0,je=0,qe=$e-1;qe>=0&&(Qe=i[Me[qe]])&a;qe--);for(var We=$e+1;We<Me.length&&(je=i[Me[We]])&a;We++);Qe===je&&(i[Ge]===x?Qe===w:Qe&(w|C))&&h(Ge,Qe)}}if(c.get(w))for(var Xe=0;Xe<Me.length;Xe++){var Ye=Me[Xe];if(i[Ye]&w){for(var Ke=Xe-1;Ke>=0&&i[Me[Ke]]&(S|a);Ke--)h(Me[Ke],w);for(Xe++;Xe<Me.length&&i[Me[Xe]]&(S|a|w);Xe++)i[Me[Xe]]!==w&&h(Me[Xe],w)}}if(c.get(S)||c.get(x)||c.get(E))for(var Ze=0;Ze<Me.length;Ze++){var Je=Me[Ze];if(i[Je]&(S|x|E)){h(Je,M);for(var et=Ze-1;et>=0&&i[Me[et]]&a;et--)h(Me[et],M);for(var tt=Ze+1;tt<Me.length&&i[Me[tt]]&a;tt++)h(Me[tt],M)}}if(c.get(w))for(var it=0,nt=ke;it<Me.length;it++){var rt=Me[it],ot=i[rt];ot&w?nt===b&&h(rt,b):ot&o&&(nt=ot)}if(c.get(s)){for(var st=A|w|C,at=st|b,lt=[],ct=[],ut=0;ut<Me.length;ut++)if(i[Me[ut]]&s){var ht=e[Me[ut]],dt=void 0;if(null!==m(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=_(ht)))for(var pt=ct.length-1;pt>=0;pt--){var ft=ct[pt].char;if(ft===dt||ft===_(v(ht))||m(v(ft))===ht){lt.push([ct[pt].seqIndex,ut]),ct.length=pt;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var gt=0;gt<lt.length;gt++){for(var mt=lt[gt],_t=mt[0],vt=mt[1],yt=!1,bt=0,At=_t+1;At<vt;At++){var wt=Me[At];if(i[wt]&at){yt=!0;var xt=i[wt]&st?A:b;if(xt===Re){bt=xt;break}}}if(yt&&!bt){bt=ke;for(var St=_t-1;St>=0;St--){var Ct=Me[St];if(i[Ct]&at){var Et=i[Ct]&st?A:b;bt=Et!==Re?Et:Re;break}}}if(bt){if(i[Me[_t]]=i[Me[vt]]=bt,bt!==Re)for(var Tt=_t+1;Tt<Me.length;Tt++)if(!(i[Me[Tt]]&a)){u(e[Me[Tt]])&B&&(i[Me[Tt]]=bt);break}if(bt!==Re)for(var It=vt+1;It<Me.length;It++)if(!(i[Me[It]]&a)){u(e[Me[It]])&B&&(i[Me[It]]=bt);break}}}for(var Mt=0;Mt<Me.length;Mt++)if(i[Me[Mt]]&s){for(var kt=Mt,Bt=Mt,Rt=ke,Pt=Mt-1;Pt>=0;Pt--){if(!(i[Me[Pt]]&a)){Rt=i[Me[Pt]]&st?A:b;break}kt=Pt}for(var Dt=Be,Lt=Mt+1;Lt<Me.length;Lt++){if(!(i[Me[Lt]]&(s|a))){Dt=i[Me[Lt]]&st?A:b;break}Bt=Lt}for(var Ot=kt;Ot<=Bt;Ot++)i[Me[Ot]]=Rt===Dt?Rt:Re;Mt=Bt}}}for(var Ft=g.start;Ft<=g.end;Ft++){var Nt=d[Ft],zt=i[Ft];if(1&Nt?zt&(b|w|C)&&d[Ft]++:zt&A?d[Ft]++:zt&(C|w)&&(d[Ft]+=2),zt&a&&(d[Ft]=0===Ft?g.level:d[Ft-1]),Ft===g.end||u(e[Ft])&(I|T))for(var Ut=Ft;Ut>=0&&u(e[Ut])&l;Ut--)d[Ut]=g.level}}return{levels:d,paragraphs:f};function Ht(t,n){for(var o=t;o<e.length;o++){var s=i[o];if(s&(A|R))return 1;if(s&(T|b)||n&&s===H)return 0;if(s&r){var a=Vt(o);o=-1===a?e.length:a}}return 0}function Vt(t){for(var n=1,o=t+1;o<e.length;o++){var s=i[o];if(s&T)break;if(s&H){if(0==--n)return o}else s&r&&n++}return-1}},e.getMirroredCharacter=V,e.getMirroredCharactersMap=function(e,t,i,n){var r=e.length;i=Math.max(0,null==i?0:+i),n=Math.min(r-1,null==n?r-1:+n);for(var o=new Map,s=i;s<=n;s++)if(1&t[s]){var a=V(e[s]);null!==a&&o.set(s,a)}return o},e.getReorderSegments=$,e.getReorderedIndices=G,e.getReorderedString=function(e,t,i,n){var r=G(e,t,i,n),o=[].concat(e);return r.forEach((function(i,n){o[n]=(1&t.levels[i]?V(e[i]):null)||e[i]})),o.join("")},e.openingToClosingBracket=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}],init:(e,t,i)=>e(t,i())}),Loe=Yre({name:"Typesetter",dependencies:[Doe],init:e=>function(t){return new Promise((i=>{e.typeset(t,i)}))},getTransferables(e){const t=[];for(let i in e)e[i]&&e[i].buffer&&t.push(e[i].buffer);return t}});Loe.onMainThread;const Ooe={},Foe="aTroikaGlyphIndex";class Noe extends kp{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new or,this.boundingBox=new Hn}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=function(e){let t=Ooe[e];return t||(t=Ooe[e]=new bs(1,1,e,e).translate(.5,.5,0)),t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,n,r){this.updateAttributeData("aTroikaGlyphBounds",e,4),this.updateAttributeData(Foe,t,1),this.updateAttributeData("aTroikaGlyphColor",r,3),this._blockBounds=i,this._chunkedBounds=n,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:n,floor:r,min:o,max:s,sin:a,cos:l}=Math,c=n/2,u=2*n,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=r((d+c)/u)!==r((p+c)/u)?-h:o(a(d)*h,a(p)*h),g=r((d-c)/u)!==r((p-c)/u)?h:s(a(d)*h,a(p)*h),m=r((d+n)/u)!==r((p+n)/u)?2*h:s(h-l(d)*h,h-l(p)*h);i.min.set(f,e[1],t<0?-m:0),i.max.set(g,e[3],t<0?0:m)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Foe).count,i=this._chunkedBounds;if(i)for(let n=i.length;n--;){t=i[n].end;let r=i[n].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const n=this.getAttribute(e);t?n&&n.array.length===t.length?(n.array.set(t),n.needsUpdate=!0):(this.setAttribute(e,new Yc(t,i)),delete this._maxInstanceCount,this.dispose()):n&&this.deleteAttribute(e)}}const zoe=new uo({color:16777215,side:y,transparent:!0}),Uoe=8421504,Hoe=new fr,Voe=new Nn,$oe=new Nn,Goe=[],Qoe=new Nn,joe="+x+y";function qoe(e){return Array.isArray(e)?e[0]:e}let Woe=()=>{const e=new Wo(new bs(1,1),zoe);return Woe=()=>e,e},Xoe=()=>{const e=new Wo(new bs(1,1,32,1),zoe);return Xoe=()=>e,e};const Yoe={type:"syncstart"},Koe={type:"synccomplete"},Zoe=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Joe=Zoe.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let ese=class extends Wo{constructor(){super(new Noe,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Uoe,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=joe,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Yoe),Moe({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{i.forEach((e=>e&&e()))}))),this.dispatchEvent(Koe),e&&e()}))))}onBeforeRender(e,t,i,n,r,o){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return function(e){const t=loe(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new sn},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new kn(0,0,0,0)},uTroikaClipRect:{value:new kn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new sn},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new so},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new an},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter(e){let{vertexShader:t,fragmentShader:i}=e,n=/\buniform\s+vec3\s+diffuse\b/;return n.test(i)&&(i=i.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(t)||(t=t.replace(eoe,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:i}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=zoe.clone());if(e&&e.isDerivedFrom(t)||(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",(function i(){t.removeEventListener("dispose",i),e.dispose()}))),this.hasOutline()){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function i(){e.removeEventListener("dispose",i),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return qoe(this.material).getDepthMaterial()}get customDistanceMaterial(){return qoe(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,n=this.textRenderInfo;if(n){const{sdfTexture:e,blockBounds:r}=n;i.uTroikaSDFTexture.value=e,i.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),i.uTroikaSDFGlyphSize.value=n.sdfGlyphSize,i.uTroikaSDFExponent.value=n.sdfExponent,i.uTroikaTotalBounds.value.fromArray(r),i.uTroikaUseGlyphColors.value=!t&&!!n.glyphColors;let o,s,a,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:i,outlineBlur:n,outlineOpacity:r}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(n)||0),o=r,h=this._parsePercent(t)||0,d=this._parsePercent(i)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(a=this.strokeColor,i.uTroikaStrokeColor.value.set(null==a?Uoe:a),s=this.strokeOpacity,null==s&&(s=1)),o=this.fillOpacity;i.uTroikaEdgeOffset.value=l,i.uTroikaPositionOffset.value.set(h,d),i.uTroikaBlurRadius.value=c,i.uTroikaStrokeWidth.value=u,i.uTroikaStrokeOpacity.value=s,i.uTroikaFillOpacity.value=null==o?1:o,i.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)i.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);i.uTroikaClipRect.value.set(r[0]-e,r[1]-e,r[2]+e,r[3]+e)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(null==r)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new so;r===t._input&&"object"!=typeof r||t.set(t._input=r)}let o=this.orientation||joe;if(o!==e._orientation){let t=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let n=o!==joe&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,e,i,r,o]=n;Voe.set(0,0,0)[i]="-"===e?1:-1,$oe.set(0,0,0)[o]="-"===r?-1:1,Hoe.lookAt(Qoe,Voe.cross($oe),$oe),t.setFromMatrix4(Hoe)}else t.identity();e._orientation=o}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn;t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn;return Voe.copy(e),this.localPositionToTextCoords(this.worldToLocal(Voe),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:n}=this;if(i){const r=i.blockBounds,o=n?Xoe():Woe(),s=o.geometry,{position:a,uv:l}=s.attributes;for(let e=0;e<l.count;e++){let t=r[0]+l.getX(e)*(r[2]-r[0]);const i=r[1]+l.getY(e)*(r[3]-r[1]);let o=0;n&&(o=n-Math.cos(t/n)*n,t=Math.sin(t/n)*n),a.setXYZ(e,t,i,o)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Goe.length=0,o.raycast(e,Goe);for(let e=0;e<Goe.length;e++)Goe[e].object=this,t.push(Goe[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,Joe.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}};Zoe.forEach((e=>{const t="_private_"+e;Object.defineProperty(ese.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})})),new Hn,new so;const tse=r.forwardRef(((e,t)=>{let{sdfGlyphSize:i=64,anchorX:n="center",anchorY:o="middle",font:s,fontSize:a=1,children:l,characters:c,onSync:u,...h}=e;const d=Rne((e=>{let{invalidate:t}=e;return t})),[p]=r.useState((()=>new ese)),[f,g]=r.useMemo((()=>{const e=[];let t="";return r.Children.forEach(l,(i=>{"string"==typeof i||"number"==typeof i?t+=i:e.push(i)})),[e,t]}),[l]);return Pie((()=>new Promise((e=>function(e,t){let{font:i,characters:n,sdfGlyphSize:r}=e;Moe({font:i,sdfGlyphSize:r,text:Array.isArray(n)?n.join("\n"):""+n},t)}({font:s,characters:c},e)))),["troika-text",s,c]),r.useLayoutEffect((()=>{p.sync((()=>{d(),u&&u(p)}))})),r.useEffect((()=>()=>p.dispose()),[p]),r.createElement("primitive",PR({object:p,ref:t,font:s,text:g,anchorX:n,anchorY:o,fontSize:a,sdfGlyphSize:i},h),f)})),ise=r.forwardRef(((e,t)=>{let{makeDefault:i,camera:n,regress:o,domElement:s,enableDamping:a=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:h,...d}=e;const p=Rne((e=>e.invalidate)),f=Rne((e=>e.camera)),g=Rne((e=>e.gl)),m=Rne((e=>e.events)),_=Rne((e=>e.setEvents)),v=Rne((e=>e.set)),y=Rne((e=>e.get)),b=Rne((e=>e.performance)),A=n||f,w=s||m.connected||g.domElement,x=r.useMemo((()=>new Hre(A)),[A]);return Pne((()=>{x.enabled&&x.update()}),-1),r.useEffect((()=>(l&&x.connect(!0===l?w:l),x.connect(w),()=>{x.dispose()})),[l,w,o,x,p]),r.useEffect((()=>{const e=e=>{p(),o&&b.regress(),c&&c(e)},t=e=>{u&&u(e)},i=e=>{h&&h(e)};return x.addEventListener("change",e),x.addEventListener("start",t),x.addEventListener("end",i),()=>{x.removeEventListener("start",t),x.removeEventListener("end",i),x.removeEventListener("change",e)}}),[c,u,h,x,p,_]),r.useEffect((()=>{if(i){const e=y().controls;return v({controls:x}),()=>v({controls:e})}}),[i,x]),r.createElement("primitive",PR({ref:t,object:x,enableDamping:a},d))}));var nse,rse,ose=wR.div(nse||(nse=kR(["\n  width: 100%;\n  height: 100%;\n"],["\n  width: 100%;\n  height: 100%;\n"]))),sse=function(){var e=Dre().progress;return r.createElement(Mre,{center:!0,style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement(vie,{statusMessage:e+"% loaded"}))},ase=function(e){var t=Rne().camera,i=One(e.loader,e.src),n=null;if(i instanceof dc?n=i:i.scene&&i.scene instanceof dc?n=i.scene:"object"!=typeof i||Array.isArray(i)||null===i||(n=i),null!==n){try{var o=(new Hn).setFromObject(n),s=o.getSize(new Nn).length(),a=o.getCenter(new Nn);t.position.set(a.x,a.y,a.z+1.25*s),t.lookAt(a),console.log("Calculated bounding box of model, re-set camera",{box:o,size:s,center:a})}catch(e){console.error("Error calculating bounding box of model",e)}return r.createElement("primitive",{object:n,scale:1})}return console.log("Loaded model did not support any available option",{model:i,src:e.src,loader:e.loader}),r.createElement(tse,{position:[0,0,0],color:"red"},"Failed to load model.")},lse=function(e){var t=rQ("Environment",{Light:CG({ambientIntensity:{min:0,max:5,step:.1,value:1},ambientColor:"#c4c4c4",directionalIntensity:{min:0,max:5,step:.1,value:Math.PI/2},directionalPosition:[0,10,10]})},{collapsed:!0}),i=t.ambientIntensity,n=t.directionalIntensity,o=t.directionalPosition,s=t.ambientColor;return r.createElement(ose,{style:{backgroundColor:s}},r.createElement(yre,{camera:{position:[15,15,15]},style:{width:"100%",height:"100%"}},r.createElement(r.Suspense,{fallback:r.createElement(sse,null)},r.createElement("ambientLight",{intensity:i,color:s}),r.createElement("directionalLight",{intensity:n,position:o}),r.createElement(ase,{src:e.src,loader:e.loader}),r.createElement(ise,null))))},cse=wR.div(rse||(rse=kR(["\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"],["\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"]))),use=function(e){if(!e.src)return r.createElement(cse,null,"No 3D file set to display.");console.log("Loading 3D model from ".concat(e.src));var t=e.fileName||e.src.split("/").pop()||"",i=t.split(".").pop();e.src.startsWith("data:")&&!e.fileName&&(i=e.src.split(";")[0].split("/")[1]||"");var n=/^x\-([a-z]+)\-((bin)|(txt)|(text))$/;if(n.test(i)){var o=n.exec(i);o&&o.length>1&&(i=o[1])}var s=null;switch(i.toLowerCase()){case"gltf":case"glb":return s=Gm,r.createElement(cse,null,r.createElement(lQ,{src:e.src}));case"obj":s=ev;break;case"fbx":s=Cm;break;case"ply":s=iv;break;case"stl":s=rv;break;case"xyz":s=ov;break;case"p3v":case"zip":return r.createElement(cse,null,r.createElement(Cie,{src:e.src}));case"jpg":case"png":case"jpeg":return r.createElement(cse,null,r.createElement("img",{src:e.src,alt:t}));case"mp4":case"ogv":case"webm":return r.createElement(cse,null,r.createElement("video",{src:e.src,controls:!0,autoPlay:!0}));case"mp3":case"wav":case"ogg":return r.createElement(cse,null,r.createElement("audio",{src:e.src,controls:!0,autoPlay:!0}))}return null!==s?r.createElement(cse,null,r.createElement(lse,{src:e.src,loader:s})):r.createElement(cse,null,r.createElement("p",null,"SpecimenViewer3D Component."),r.createElement("p",{style:{color:"red"}},'Source with type "',i,'" from "',ER(e.src,25,"\u2026"),'" is currently not supported.'))}},730:(e,t,i)=>{"use strict";var n=i(43),r=i(67);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,i,n,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,i,n){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var O,F=Object.assign;function N(e){if(void 0===O)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=n.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?N(e):""}function H(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(i){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function j(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Q(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var i=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Y(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=G(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){K(e,t);var i=G(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&W(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+G(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(te(i)){if(1<i.length)throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:G(i)}}function oe(e,t){var i=G(t.value),n=G(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=ge(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var _e=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Se=null;function Ce(e){if(e=yr(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=Ar(t),we(e.stateNode,e.type,t))}}function Ee(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Me(){}var ke=!1;function Be(e,t,i){if(ke)return e(t,i);ke=!0;try{return Ie(e,t,i)}finally{ke=!1,(null!==xe||null!==Se)&&(Me(),Te())}}function Re(e,t){var i=e.stateNode;if(null===i)return null;var n=Ar(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Pe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Pe=!1}function Le(e,t,i,n,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(u){this.onError(u)}}var Oe=!1,Fe=null,Ne=!1,ze=null,Ue={onError:function(e){Oe=!0,Fe=e}};function He(e,t,i,n,r,o,s,a,l){Oe=!1,Fe=null,Le.apply(Ue,arguments)}function Ve(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ve(e)!==e)throw Error(o(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(n=r.return)){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Ge(r),e;if(s===n)return Ge(r),t;s=s.sibling}throw Error(o(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,l=r.child;l;){if(l===i){a=!0,i=r,n=s;break}if(l===n){a=!0,n=r,i=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===i){a=!0,i=s,n=r;break}if(l===n){a=!0,n=s,i=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e))?je(e):null}function je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=je(e);if(null!==t)return t;e=e.sibling}return null}var qe=r.unstable_scheduleCallback,We=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,Ke=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,it=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&i;if(0!==s){var a=s&~r;0!==a?n=ht(a):0!==(o&=s)&&(n=ht(o))}else 0!==(s=i&~r)?n=ht(s):0!==o&&(n=ht(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-st(t)),n|=e[i],t&=~r;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _t(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-st(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var At,wt,xt,St,Ct,Et=!1,Tt=[],It=null,Mt=null,kt=null,Bt=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ot(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=vr(e.target);if(null!==t){var i=Ve(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=$e(i)))return e.blockedOn=t,void Ct(e.priority,(function(){xt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=yr(i))&&wt(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);be=n,i.target.dispatchEvent(n),be=null,t.shift()}return!0}function zt(e,t,i){Nt(e)&&i.delete(t)}function Ut(){Et=!1,null!==It&&Nt(It)&&(It=null),null!==Mt&&Nt(Mt)&&(Mt=null),null!==kt&&Nt(kt)&&(kt=null),Bt.forEach(zt),Rt.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Ht(t,e)}if(0<Tt.length){Ht(Tt[0],e);for(var i=1;i<Tt.length;i++){var n=Tt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==It&&Ht(It,e),null!==Mt&&Ht(Mt,e),null!==kt&&Ht(kt,e),Bt.forEach(t),Rt.forEach(t),i=0;i<Pt.length;i++)(n=Pt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&null===(i=Pt[0]).blockedOn;)Ft(i),null===i.blockedOn&&Pt.shift()}var $t=b.ReactCurrentBatchConfig,Gt=!0;function Qt(e,t,i,n){var r=yt,o=$t.transition;$t.transition=null;try{yt=1,qt(e,t,i,n)}finally{yt=r,$t.transition=o}}function jt(e,t,i,n){var r=yt,o=$t.transition;$t.transition=null;try{yt=4,qt(e,t,i,n)}finally{yt=r,$t.transition=o}}function qt(e,t,i,n){if(Gt){var r=Xt(e,t,i,n);if(null===r)Gn(e,t,n,Wt,i),Lt(e,n);else if(function(e,t,i,n,r){switch(t){case"focusin":return It=Ot(It,e,t,i,n,r),!0;case"dragenter":return Mt=Ot(Mt,e,t,i,n,r),!0;case"mouseover":return kt=Ot(kt,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return Bt.set(o,Ot(Bt.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,Rt.set(o,Ot(Rt.get(o)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var o=yr(r);if(null!==o&&At(o),null===(o=Xt(e,t,i,n))&&Gn(e,t,n,Wt,i),o===r)break;r=o}null!==r&&n.stopPropagation()}else Gn(e,t,n,null,i)}}var Wt=null;function Xt(e,t,i,n){if(Wt=null,null!==(e=vr(e=Ae(n))))if(null===(t=Ve(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,Jt=null;function ei(){if(Jt)return Jt;var e,t,i=Zt,n=i.length,r="value"in Kt?Kt.value:Kt.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var s=n-e;for(t=1;t<=s&&i[n-t]===r[o-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function ri(e){function t(t,i,n,r,o){for(var s in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var oi,si,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ri(li),ui=F({},li,{view:0,detail:0}),hi=ri(ui),di=F({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&"mousemove"===e.type?(oi=e.screenX-ai.screenX,si=e.screenY-ai.screenY):si=oi=0,ai=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:si}}),pi=ri(di),fi=ri(F({},di,{dataTransfer:0})),gi=ri(F({},ui,{relatedTarget:0})),mi=ri(F({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),_i=F({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=ri(_i),yi=ri(F({},li,{data:0})),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wi[e])&&!!t[e]}function Si(){return xi}var Ci=F({},ui,{key:function(e){if(e.key){var t=bi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ai[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ei=ri(Ci),Ti=ri(F({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ii=ri(F({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si})),Mi=ri(F({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),ki=F({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bi=ri(ki),Ri=[9,13,27,32],Pi=u&&"CompositionEvent"in window,Di=null;u&&"documentMode"in document&&(Di=document.documentMode);var Li=u&&"TextEvent"in window&&!Di,Oi=u&&(!Pi||Di&&8<Di&&11>=Di),Fi=String.fromCharCode(32),Ni=!1;function zi(e,t){switch(e){case"keyup":return-1!==Ri.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hi=!1;var Vi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vi[e.type]:"textarea"===t}function Gi(e,t,i,n){Ee(n),0<(t=jn(t,"onChange")).length&&(i=new ci("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Qi=null,ji=null;function qi(e){Nn(e,0)}function Wi(e){if(q(br(e)))return e}function Xi(e,t){if("change"===e)return t}var Yi=!1;if(u){var Ki;if(u){var Zi="oninput"in document;if(!Zi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Zi="function"===typeof Ji.oninput}Ki=Zi}else Ki=!1;Yi=Ki&&(!document.documentMode||9<document.documentMode)}function en(){Qi&&(Qi.detachEvent("onpropertychange",tn),ji=Qi=null)}function tn(e){if("value"===e.propertyName&&Wi(ji)){var t=[];Gi(t,ji,e,Ae(e)),Be(qi,t)}}function nn(e,t,i){"focusin"===e?(en(),ji=i,(Qi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wi(ji)}function on(e,t){if("click"===e)return Wi(t)}function sn(e,t){if("input"===e||"change"===e)return Wi(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!h.call(t,r)||!an(e[r],t[r]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var i,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=W((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=dn(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&hn(i.ownerDocument.documentElement,i)){if(null!==n&&pn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,o=Math.min(n.start,r);n=void 0===n.end?o:Math.min(n.end,r),!e.extend&&o>n&&(r=n,n=o,o=r),r=un(i,o);var s=un(i,n);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=u&&"documentMode"in document&&11>=document.documentMode,mn=null,_n=null,vn=null,yn=!1;function bn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;yn||null==mn||mn!==W(n)||("selectionStart"in(n=mn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=jn(_n,"onSelect")).length&&(t=new ci("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mn)))}function An(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var wn={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionend:An("Transition","TransitionEnd")},xn={},Sn={};function Cn(e){if(xn[e])return xn[e];if(!wn[e])return e;var t,i=wn[e];for(t in i)if(i.hasOwnProperty(t)&&t in Sn)return xn[e]=i[t];return e}u&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var En=Cn("animationend"),Tn=Cn("animationiteration"),In=Cn("animationstart"),Mn=Cn("transitionend"),kn=new Map,Bn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){kn.set(e,t),l(t,[e])}for(var Pn=0;Pn<Bn.length;Pn++){var Dn=Bn[Pn];Rn(Dn.toLowerCase(),"on"+(Dn[0].toUpperCase()+Dn.slice(1)))}Rn(En,"onAnimationEnd"),Rn(Tn,"onAnimationIteration"),Rn(In,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Mn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Fn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,s,a,l,c){if(He.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var u=Fe;Oe=!1,Fe=null,Ne||(Ne=!0,ze=u)}}(n,t,void 0,e),e.currentTarget=null}function Nn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Fn(r,a,c),o=l}else for(s=0;s<n.length;s++){if(l=(a=n[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Fn(r,a,c),o=l}}}if(Ne)throw e=ze,Ne=!1,ze=null,e}function zn(e,t){var i=t[gr];void 0===i&&(i=t[gr]=new Set);var n=e+"__bubble";i.has(n)||($n(t,e,2,!1),i.add(n))}function Un(e,t,i){var n=0;t&&(n|=4),$n(i,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Hn]){e[Hn]=!0,s.forEach((function(t){"selectionchange"!==t&&(On.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,Un("selectionchange",!1,t))}}function $n(e,t,i,n){switch(Yt(t)){case 1:var r=Qt;break;case 4:r=jt;break;default:r=qt}i=r.bind(null,t,i,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Gn(e,t,i,n,r){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=vr(a)))return;if(5===(l=s.tag)||6===l){n=o=s;continue e}a=a.parentNode}}n=n.return}Be((function(){var n=o,r=Ae(i),s=[];e:{var a=kn.get(e);if(void 0!==a){var l=ci,c=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Ei;break;case"focusin":c="focus",l=gi;break;case"focusout":c="blur",l=gi;break;case"beforeblur":case"afterblur":l=gi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ii;break;case En:case Tn:case In:l=mi;break;case Mn:l=Mi;break;case"scroll":l=hi;break;case"wheel":l=Bi;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ti}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=n;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Re(f,d))&&u.push(Qn(f,g,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,i,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===be||!(c=i.relatedTarget||i.fromElement)||!vr(c)&&!c[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?vr(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pi,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ti,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:br(l),p=null==c?a:br(c),(a=new u(g,f+"leave",l,i,r)).target=h,a.relatedTarget=p,g=null,vr(r)===n&&((u=new u(d,f+"enter",c,i,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,f=0,p=u=l;p;p=qn(p))f++;for(p=0,g=d;g;g=qn(g))p++;for(;0<f-p;)u=qn(u),f--;for(;0<p-f;)d=qn(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qn(u),d=qn(d)}u=null}else u=null;null!==l&&Wn(s,a,l,u,!1),null!==c&&null!==h&&Wn(s,h,c,u,!0)}if("select"===(l=(a=n?br(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xi;else if($i(a))if(Yi)m=sn;else{m=rn;var _=nn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=on);switch(m&&(m=m(e,n))?Gi(s,m,i,r):(_&&_(e,a,n),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&ee(a,"number",a.value)),_=n?br(n):window,e){case"focusin":($i(_)||"true"===_.contentEditable)&&(mn=_,_n=n,vn=null);break;case"focusout":vn=_n=mn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,bn(s,i,r);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":bn(s,i,r)}var v;if(Pi)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hi?zi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Oi&&"ko"!==i.locale&&(Hi||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hi&&(v=ei()):(Zt="value"in(Kt=r)?Kt.value:Kt.textContent,Hi=!0)),0<(_=jn(n,y)).length&&(y=new yi(y,e,null,i,r),s.push({event:y,listeners:_}),v?y.data=v:null!==(v=Ui(i))&&(y.data=v))),(v=Li?function(e,t){switch(e){case"compositionend":return Ui(t);case"keypress":return 32!==t.which?null:(Ni=!0,Fi);case"textInput":return(e=t.data)===Fi&&Ni?null:e;default:return null}}(e,i):function(e,t){if(Hi)return"compositionend"===e||!Pi&&zi(e,t)?(e=ei(),Jt=Zt=Kt=null,Hi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=jn(n,"onBeforeInput")).length&&(r=new yi("onBeforeInput","beforeinput",null,i,r),s.push({event:r,listeners:n}),r.data=v))}Nn(s,t)}))}function Qn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function jn(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Re(e,i))&&n.unshift(Qn(e,o,r)),null!=(o=Re(e,t))&&n.push(Qn(e,o,r))),e=e.return}return n}function qn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wn(e,t,i,n,r){for(var o=t._reactName,s=[];null!==i&&i!==n;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Re(i,o))&&s.unshift(Qn(i,l,a)):r||null!=(l=Re(i,o))&&s.push(Qn(i,l,a))),i=i.return}0!==s.length&&e.push({event:t,listeners:s})}var Xn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Kn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Yn,"")}function Zn(e,t,i){if(t=Kn(t),Kn(e)!==t&&i)throw Error(o(425))}function Jn(){}var er=null,tr=null;function ir(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:nr;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)){if(0===n)return e.removeChild(r),void Vt(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=r}while(i);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,_r="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var i=e.parentNode;i;){if(t=i[fr]||i[dr]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=ur(e);null!==e;){if(i=e[dr])return i;e=ur(e)}return t}i=(e=i).parentNode}return null}function yr(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ar(e){return e[pr]||null}var wr=[],xr=-1;function Sr(e){return{current:e}}function Cr(e){0>xr||(e.current=wr[xr],wr[xr]=null,xr--)}function Er(e,t){xr++,wr[xr]=e.current,e.current=t}var Tr={},Ir=Sr(Tr),Mr=Sr(!1),kr=Tr;function Br(e,t){var i=e.type.contextTypes;if(!i)return Tr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){Cr(Mr),Cr(Ir)}function Dr(e,t,i){if(Ir.current!==Tr)throw Error(o(168));Er(Ir,t),Er(Mr,i)}function Lr(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(o(108,$(e)||"Unknown",r));return F({},i,n)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,kr=Ir.current,Er(Ir,e),Er(Mr,Mr.current),!0}function Fr(e,t,i){var n=e.stateNode;if(!n)throw Error(o(169));i?(e=Lr(e,t,kr),n.__reactInternalMemoizedMergedChildContext=e,Cr(Mr),Cr(Ir),Er(Ir,e)):Cr(Mr),Er(Mr,i)}var Nr=null,zr=!1,Ur=!1;function Hr(e){null===Nr?Nr=[e]:Nr.push(e)}function Vr(){if(!Ur&&null!==Nr){Ur=!0;var e=0,t=yt;try{var i=Nr;for(yt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}Nr=null,zr=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(e+1)),qe(Je,Vr),r}finally{yt=t,Ur=!1}}return null}var $r=[],Gr=0,Qr=null,jr=0,qr=[],Wr=0,Xr=null,Yr=1,Kr="";function Zr(e,t){$r[Gr++]=jr,$r[Gr++]=Qr,Qr=e,jr=t}function Jr(e,t,i){qr[Wr++]=Yr,qr[Wr++]=Kr,qr[Wr++]=Xr,Xr=e;var n=Yr;e=Kr;var r=32-st(n)-1;n&=~(1<<r),i+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(n&(1<<s)-1).toString(32),n>>=s,r-=s,Yr=1<<32-st(t)+r|i<<r|n,Kr=o+e}else Yr=1<<o|i<<r|n,Kr=e}function eo(e){null!==e.return&&(Zr(e,1),Jr(e,1,0))}function to(e){for(;e===Qr;)Qr=$r[--Gr],$r[Gr]=null,jr=$r[--Gr],$r[Gr]=null;for(;e===Xr;)Xr=qr[--Wr],qr[Wr]=null,Kr=qr[--Wr],qr[Wr]=null,Yr=qr[--Wr],qr[Wr]=null}var io=null,no=null,ro=!1,oo=null;function so(e,t){var i=Bc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function ao(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,io=e,no=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,io=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Xr?{id:Yr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Bc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,io=e,no=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=no;if(t){var i=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cr(i.nextSibling);var n=io;t&&ao(e,t)?so(n,i):(e.flags=-4097&e.flags|2,ro=!1,io=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,io=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;io=e}function ho(e){if(e!==io)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ir(e.type,e.memoizedProps)),t&&(t=no)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){no=cr(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}no=null}}else no=io?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=no;e;)e=cr(e.nextSibling)}function fo(){no=io=null,ro=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function _o(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var n=i.stateNode}if(!n)throw Error(o(147,e));var r=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Fc(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){var o=i.type;return o===x?h(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&yo(o)===t.type)?((n=r(t,i.props)).ref=_o(e,t,i),n.return=e,n):((n=Dc(i.type,i.key,i.props,null,e.mode,n)).ref=_o(e,t,i),n.return=e,n)}function u(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Nc(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function h(e,t,i,n,o){return null===t||7!==t.tag?((t=Lc(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function d(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case A:return(i=Dc(t.type,t.key,t.props,null,e.mode,i)).ref=_o(e,null,t),i.return=e,i;case w:return(t=Nc(t,e.mode,i)).return=e,t;case R:return d(e,(0,t._init)(t._payload),i)}if(te(t)||L(t))return(t=Lc(t,e.mode,i,null)).return=e,t;vo(e,t)}return null}function p(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case A:return i.key===r?c(e,t,i,n):null;case w:return i.key===r?u(e,t,i,n):null;case R:return p(e,t,(r=i._init)(i._payload),n)}if(te(i)||L(i))return null!==r?null:h(e,t,i,n,null);vo(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r);case w:return u(t,e=e.get(null===n.key?i:n.key)||null,n,r);case R:return f(e,t,i,(0,n._init)(n._payload),r)}if(te(n)||L(n))return h(t,e=e.get(i)||null,n,r,null);vo(t,n)}return null}function g(r,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var _=p(r,h,a[g],l);if(null===_){null===h&&(h=m);break}e&&h&&null===_.alternate&&t(r,h),o=s(_,o,g),null===u?c=_:u.sibling=_,u=_,h=m}if(g===a.length)return i(r,h),ro&&Zr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return ro&&Zr(r,g),c}for(h=n(r,h);g<a.length;g++)null!==(m=f(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),ro&&Zr(r,g),c}function m(r,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,_=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(_=g,g=null):_=g.sibling;var y=p(r,g,v.value,c);if(null===y){null===g&&(g=_);break}e&&g&&null===y.alternate&&t(r,g),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y,g=_}if(v.done)return i(r,g),ro&&Zr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=s(v,a,m),null===h?u=v:h.sibling=v,h=v);return ro&&Zr(r,m),u}for(g=n(r,g);!v.done;m++,v=l.next())null!==(v=f(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),ro&&Zr(r,m),u}return function e(n,o,s,l){if("object"===typeof s&&null!==s&&s.type===x&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case A:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===x){if(7===u.tag){i(n,u.sibling),(o=r(u,s.props.children)).return=n,n=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&yo(c)===u.type){i(n,u.sibling),(o=r(u,s.props)).ref=_o(n,u,s),o.return=n,n=o;break e}i(n,u);break}t(n,u),u=u.sibling}s.type===x?((o=Lc(s.props.children,n.mode,l,s.key)).return=n,n=o):((l=Dc(s.type,s.key,s.props,null,n.mode,l)).ref=_o(n,o,s),l.return=n,n=l)}return a(n);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){i(n,o.sibling),(o=r(o,s.children||[])).return=n,n=o;break e}i(n,o);break}t(n,o),o=o.sibling}(o=Nc(s,n.mode,l)).return=n,n=o}return a(n);case R:return e(n,o,(u=s._init)(s._payload),l)}if(te(s))return g(n,o,s,l);if(L(s))return m(n,o,s,l);vo(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(i(n,o.sibling),(o=r(o,s)).return=n,n=o):(i(n,o),(o=Fc(s,n.mode,l)).return=n,n=o),a(n)):i(n,o)}}var Ao=bo(!0),wo=bo(!1),xo=Sr(null),So=null,Co=null,Eo=null;function To(){Eo=Co=So=null}function Io(e){var t=xo.current;Cr(xo),e._currentValue=t}function Mo(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function ko(e,t){So=e,Eo=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Bo(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===So)throw Error(o(308));Co=e,So.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Ro=null;function Po(e){null===Ro?Ro=[e]:Ro.push(e)}function Do(e,t,i,n){var r=t.interleaved;return null===r?(i.next=i,Po(t)):(i.next=r.next,r.next=i),t.interleaved=i,Lo(e,n)}function Lo(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Oo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Il)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Lo(e,i)}return null===(r=n.interleaved)?(t.next=t,Po(n)):(t.next=r.next,r.next=t),n.interleaved=t,Lo(e,i)}function Ho(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}function Vo(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=s:o=o.next=s,i=i.next}while(null!==i);null===o?r=o=t:o=o.next=t}else r=o=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function $o(e,t,i,n){var r=e.updateQueue;Oo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,p=a.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(d=t,p=i,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Oo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Ol|=s,e.lanes=s,e.memoizedState=h}}function Go(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(o(191,r));r.call(n)}}}var Qo={},jo=Sr(Qo),qo=Sr(Qo),Wo=Sr(Qo);function Xo(e){if(e===Qo)throw Error(o(174));return e}function Yo(e,t){switch(Er(Wo,t),Er(qo,e),Er(jo,Qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(jo),Er(jo,t)}function Ko(){Cr(jo),Cr(qo),Cr(Wo)}function Zo(e){Xo(Wo.current);var t=Xo(jo.current),i=le(t,e.type);t!==i&&(Er(qo,e),Er(jo,i))}function Jo(e){qo.current===e&&(Cr(jo),Cr(qo))}var es=Sr(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var is=[];function ns(){for(var e=0;e<is.length;e++)is[e]._workInProgressVersionPrimary=null;is.length=0}var rs=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,hs=!1,ds=0,ps=0;function fs(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!an(e[i],t[i]))return!1;return!0}function ms(e,t,i,n,r,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Js:ea,e=i(n,r),hs){s=0;do{if(hs=!1,ds=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,rs.current=ta,e=i(n,r)}while(hs)}if(rs.current=Zs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function _s(){var e=0!==ds;return ds=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ys(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function bs(e,t){return"function"===typeof t?t(e):t}function As(e){var t=ys(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=ls,r=n.baseQueue,s=i.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(null!==r){s=r.next,n=n.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ss&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=n):c=c.next=d,as.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==s);null===c?a=n:c.next=l,an(n,t.memoizedState)||(ya=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{s=r.lane,as.lanes|=s,Ol|=s,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function ws(e){var t=ys(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);an(s,t.memoizedState)||(ya=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function xs(){}function Ss(e,t){var i=as,n=ys(),r=t(),s=!an(n.memoizedState,r);if(s&&(n.memoizedState=r,ya=!0),n=n.queue,Os(Ts.bind(null,i,n,e),[e]),n.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(i.flags|=2048,Bs(9,Es.bind(null,i,n,r,t),void 0,null),null===Ml)throw Error(o(349));0!==(30&ss)||Cs(i,t,r)}return r}function Cs(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Es(e,t,i,n){t.value=i,t.getSnapshot=n,Is(t)&&Ms(e)}function Ts(e,t,i){return i((function(){Is(t)&&Ms(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!an(e,i)}catch(n){return!0}}function Ms(e){var t=Lo(e,1);null!==t&&ic(t,e,1,-1)}function ks(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ws.bind(null,as,e),[t.memoizedState,e]}function Bs(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Rs(){return ys().memoizedState}function Ps(e,t,i,n){var r=vs();as.flags|=e,r.memoizedState=Bs(1|t,i,void 0,void 0===n?null:n)}function Ds(e,t,i,n){var r=ys();n=void 0===n?null:n;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==n&&gs(n,s.deps))return void(r.memoizedState=Bs(t,i,o,n))}as.flags|=e,r.memoizedState=Bs(1|t,i,o,n)}function Ls(e,t){return Ps(8390656,8,e,t)}function Os(e,t){return Ds(2048,8,e,t)}function Fs(e,t){return Ds(4,2,e,t)}function Ns(e,t){return Ds(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ds(4,4,zs.bind(null,t,e),i)}function Hs(){}function Vs(e,t){var i=ys();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&gs(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function $s(e,t){var i=ys();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&gs(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Gs(e,t,i){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=i):(an(i,t)||(i=gt(),as.lanes|=i,Ol|=i,e.baseState=!0),t)}function Qs(e,t){var i=yt;yt=0!==i&&4>i?i:4,e(!0);var n=os.transition;os.transition={};try{e(!1),t()}finally{yt=i,os.transition=n}}function js(){return ys().memoizedState}function qs(e,t,i){var n=tc(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Xs(e))Ys(t,i);else if(null!==(i=Do(e,t,i,n))){ic(i,e,n,ec()),Ks(i,t,n)}}function Ws(e,t,i){var n=tc(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xs(e))Ys(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,i);if(r.hasEagerState=!0,r.eagerState=a,an(a,s)){var l=t.interleaved;return null===l?(r.next=r,Po(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(i=Do(e,t,r,n))&&(ic(i,e,n,r=ec()),Ks(i,t,n))}}function Xs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Ys(e,t){hs=us=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ks(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}var Zs={readContext:Bo,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Js={readContext:Bo,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Bo,useEffect:Ls,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ps(4194308,4,zs.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var i=vs();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=vs();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=qs.bind(null,as,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:ks,useDebugValue:Hs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=ks(!1),t=e[0];return e=Qs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=as,r=vs();if(ro){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===Ml)throw Error(o(349));0!==(30&ss)||Cs(n,t,i)}r.memoizedState=i;var s={value:i,getSnapshot:t};return r.queue=s,Ls(Ts.bind(null,n,s,e),[e]),n.flags|=2048,Bs(9,Es.bind(null,n,s,i,t),void 0,null),i},useId:function(){var e=vs(),t=Ml.identifierPrefix;if(ro){var i=Kr;t=":"+t+"R"+(i=(Yr&~(1<<32-st(Yr)-1)).toString(32)+i),0<(i=ds++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Bo,useCallback:Vs,useContext:Bo,useEffect:Os,useImperativeHandle:Us,useInsertionEffect:Fs,useLayoutEffect:Ns,useMemo:$s,useReducer:As,useRef:Rs,useState:function(){return As(bs)},useDebugValue:Hs,useDeferredValue:function(e){return Gs(ys(),ls.memoizedState,e)},useTransition:function(){return[As(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Ss,useId:js,unstable_isNewReconciler:!1},ta={readContext:Bo,useCallback:Vs,useContext:Bo,useEffect:Os,useImperativeHandle:Us,useInsertionEffect:Fs,useLayoutEffect:Ns,useMemo:$s,useReducer:ws,useRef:Rs,useState:function(){return ws(bs)},useDebugValue:Hs,useDeferredValue:function(e){var t=ys();return null===ls?t.memoizedState=e:Gs(t,ls.memoizedState,e)},useTransition:function(){return[ws(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Ss,useId:js,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var i in t=F({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function na(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:F({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),o=zo(n,r);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Uo(e,o,r))&&(ic(t,e,r,n),Ho(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),o=zo(n,r);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Uo(e,o,r))&&(ic(t,e,r,n),Ho(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ec(),n=tc(e),r=zo(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Uo(e,r,n))&&(ic(t,e,n,i),Ho(t,e,n))}};function oa(e,t,i,n,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(r,o))}function sa(e,t,i){var n=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Bo(o):(r=Rr(t)?kr:Ir.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Br(e,r):Tr),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Bo(o):(o=Rr(t)?kr:Ir.current,r.context=Br(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(na(e,t,o,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),$o(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var i="",n=t;do{i+=H(n),n=n.return}while(n);var r=i}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var da="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,i){(i=zo(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Gl||(Gl=!0,Ql=n),ha(0,t)},i}function fa(e,t,i){(i=zo(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){ha(0,t),"function"!==typeof n&&(null===jl?jl=new Set([this]):jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ga(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new da;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=Cc.bind(null,e,t,i),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,i,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=zo(-1,1)).tag=2,Uo(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var va=b.ReactCurrentOwner,ya=!1;function ba(e,t,i,n){t.child=null===e?wo(t,null,i,n):Ao(t,e.child,i,n)}function Aa(e,t,i,n,r){i=i.render;var o=t.ref;return ko(t,r),n=ms(e,t,i,n,o,r),i=_s(),null===e||ya?(ro&&i&&eo(t),t.flags|=1,ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ga(e,t,r))}function wa(e,t,i,n,r){if(null===e){var o=i.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Dc(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xa(e,t,o,n,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(s,n)&&e.ref===t.ref)return Ga(e,t,r)}return t.flags|=1,(e=Pc(o,n)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,i,n,r){if(null!==e){var o=e.memoizedProps;if(ln(o,n)&&e.ref===t.ref){if(ya=!1,t.pendingProps=n=o,0===(e.lanes&r))return t.lanes=e.lanes,Ga(e,t,r);0!==(131072&e.flags)&&(ya=!0)}}return Ea(e,t,i,n,r)}function Sa(e,t,i){var n=t.pendingProps,r=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Pl,Rl),Rl|=i;else{if(0===(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:i,Er(Pl,Rl),Rl|=n}else null!==o?(n=o.baseLanes|i,t.memoizedState=null):n=i,Er(Pl,Rl),Rl|=n;return ba(e,t,r,i),t.child}function Ca(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,i,n,r){var o=Rr(i)?kr:Ir.current;return o=Br(t,o),ko(t,r),i=ms(e,t,i,n,o,r),n=_s(),null===e||ya?(ro&&n&&eo(t),t.flags|=1,ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ga(e,t,r))}function Ta(e,t,i,n,r){if(Rr(i)){var o=!0;Or(t)}else o=!1;if(ko(t,r),null===t.stateNode)$a(e,t),sa(t,i,n),la(t,i,n,r),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=i.contextType;"object"===typeof c&&null!==c?c=Bo(c):c=Br(t,c=Rr(i)?kr:Ir.current);var u=i.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||l!==c)&&aa(t,s,n,c),Oo=!1;var d=t.memoizedState;s.state=d,$o(t,n,s,r),l=t.memoizedState,a!==n||d!==l||Mr.current||Oo?("function"===typeof u&&(na(t,i,u,n),l=t.memoizedState),(a=Oo||oa(t,i,a,n,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,No(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ia(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=i.contextType)&&null!==l?l=Bo(l):l=Br(t,l=Rr(i)?kr:Ir.current);var p=i.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,s,n,l),Oo=!1,d=t.memoizedState,s.state=d,$o(t,n,s,r);var f=t.memoizedState;a!==h||d!==f||Mr.current||Oo?("function"===typeof p&&(na(t,i,p,n),f=t.memoizedState),(c=Oo||oa(t,i,c,n,d,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ia(e,t,i,n,o,r)}function Ia(e,t,i,n,r,o){Ca(e,t);var s=0!==(128&t.flags);if(!n&&!s)return r&&Fr(t,i,!1),Ga(e,t,o);n=t.stateNode,va.current=t;var a=s&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,a,o)):ba(e,t,a,o),t.memoizedState=n.state,r&&Fr(t,i,!0),t.child}function Ma(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Yo(e,t.containerInfo)}function ka(e,t,i,n,r){return fo(),go(r),t.flags|=256,ba(e,t,i,n),t.child}var Ba,Ra,Pa,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,i){var n,r=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Er(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Oc(l,r,0,null),e=Lc(e,r,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(i),t.memoizedState=La,e):Na(t,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,i,n,r,s,a){if(i)return 256&t.flags?(t.flags&=-257,za(e,t,a,n=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,r=t.mode,n=Oc({mode:"visible",children:n.children},r,0,null),(s=Lc(s,r,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&Ao(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=La,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var l=n.dgst;return n=l,za(e,t,a,n=ua(s=Error(o(419)),n,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(n=Ml)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Lo(e,r),ic(n,e,r,-1))}return gc(),za(e,t,a,n=ua(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,no=cr(r.nextSibling),io=t,ro=!0,oo=null,null!==e&&(qr[Wr++]=Yr,qr[Wr++]=Kr,qr[Wr++]=Xr,Yr=e.id,Kr=e.overflow,Xr=t),t=Na(t,n.children),t.flags|=4096,t)}(e,t,l,r,n,s,i);if(a){a=r.fallback,l=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Pc(n,a):(a=Lc(a,l,i,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=La,r}return e=(a=e.child).sibling,r=Pc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function Na(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,i,n){return null!==n&&go(n),Ao(t,e.child,null,i),(e=Na(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Mo(e.return,t,i)}function Ha(e,t,i,n,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r)}function Va(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(ba(e,t,n.children,i),0!==(2&(n=es.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,i,t);else if(19===e.tag)Ua(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Er(es,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===ts(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Ha(t,!1,r,i,o);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ts(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Ha(t,!0,i,null,o);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=Pc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Pc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Qa(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function qa(e,t,i){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ja(t),null;case 1:case 17:return Rr(t.type)&&Pr(),ja(t),null;case 3:return n=t.stateNode,Ko(),Cr(Mr),Cr(Ir),ns(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ra(e,t),ja(t),null;case 5:Jo(t);var r=Xo(Wo.current);if(i=t.type,null!==e&&null!=t.stateNode)Pa(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return ja(t),null}if(e=Xo(jo.current),ho(t)){n=t.stateNode,i=t.type;var s=t.memoizedProps;switch(n[dr]=t,n[pr]=s,e=0!==(1&t.mode),i){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(r=0;r<Ln.length;r++)zn(Ln[r],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":Y(n,s),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zn("invalid",n);break;case"textarea":re(n,s),zn("invalid",n)}for(var l in ve(i,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zn(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zn(n.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zn("scroll",n)}switch(i){case"input":j(n),J(n,s,!0);break;case"textarea":j(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Jn)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[dr]=t,e[pr]=n,Ba(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(i,n),i){case"dialog":zn("cancel",e),zn("close",e),r=n;break;case"iframe":case"object":case"embed":zn("load",e),r=n;break;case"video":case"audio":for(r=0;r<Ln.length;r++)zn(Ln[r],e);r=n;break;case"source":zn("error",e),r=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),r=n;break;case"details":zn("toggle",e),r=n;break;case"input":Y(e,n),r=X(e,n),zn("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=F({},n,{value:void 0}),zn("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),zn("invalid",e)}for(s in ve(i,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==i||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zn("scroll",e):null!=u&&y(e,s,u,l))}switch(i){case"input":j(e),J(e,n,!1);break;case"textarea":j(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+G(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?ie(e,!!n.multiple,s,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Jn)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ja(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(i=Xo(Wo.current),Xo(jo.current),ho(t)){if(n=t.stateNode,i=t.memoizedProps,n[dr]=t,(s=n.nodeValue!==i)&&null!==(e=io))switch(e.tag){case 3:Zn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,i,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[dr]=t,t.stateNode=n}return ja(t),null;case 13:if(Cr(es),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ja(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),ja(t),null);case 4:return Ko(),Ra(e,t),null===e&&Vn(t.stateNode.containerInfo),ja(t),null;case 10:return Io(t.type._context),ja(t),null;case 19:if(Cr(es),null===(s=t.memoizedState))return ja(t),null;if(n=0!==(128&t.flags),null===(l=s.rendering))if(n)Qa(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Qa(s,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(s=i).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Er(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ke()>Vl&&(t.flags|=128,n=!0,Qa(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ts(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return ja(t),null}else 2*Ke()-s.renderingStartTime>Vl&&1073741824!==i&&(t.flags|=128,n=!0,Qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=s.last)?i.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ke(),t.sibling=null,i=es.current,Er(es,n?1&i|2:1&i),t):(ja(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(ja(t),6&t.subtreeFlags&&(t.flags|=8192)):ja(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Wa(e,t){switch(to(t),t.tag){case 1:return Rr(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ko(),Cr(Mr),Cr(Ir),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Cr(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(es),null;case 4:return Ko(),null;case 10:return Io(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ba=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ra=function(){},Pa=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Xo(jo.current);var o,s=null;switch(i){case"input":r=X(e,r),n=X(e,n),s=[];break;case"select":r=F({},r,{value:void 0}),n=F({},n,{value:void 0}),s=[];break;case"textarea":r=ne(e,r),n=ne(e,n),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(u in ve(i,n),i=null,r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=r?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(s||(s=[]),s.push(u,i)),i=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}i&&(s=s||[]).push("style",i);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,i,n){i!==n&&(t.flags|=4)};var Xa=!1,Ya=!1,Ka="function"===typeof WeakSet?WeakSet:Set,Za=null;function Ja(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){Sc(e,t,n)}else i.current=null}function el(e,t,i){try{i()}catch(n){Sc(e,t,n)}}var tl=!1;function il(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,i,o)}r=r.next}while(r!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function rl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[gr],delete t[mr],delete t[_r])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function cl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,i),e=e.sibling;null!==e;)cl(e,t,i),e=e.sibling}var ul=null,hl=!1;function dl(e,t,i){for(i=i.child;null!==i;)pl(e,t,i),i=i.sibling}function pl(e,t,i){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,i)}catch(a){}switch(i.tag){case 5:Ya||Ja(i,t);case 6:var n=ul,r=hl;ul=null,dl(e,t,i),hl=r,null!==(ul=n)&&(hl?(e=ul,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):ul.removeChild(i.stateNode));break;case 18:null!==ul&&(hl?(e=ul,i=i.stateNode,8===e.nodeType?lr(e.parentNode,i):1===e.nodeType&&lr(e,i),Vt(e)):lr(ul,i.stateNode));break;case 4:n=ul,r=hl,ul=i.stateNode.containerInfo,hl=!0,dl(e,t,i),ul=n,hl=r;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(i,t,s),r=r.next}while(r!==n)}dl(e,t,i);break;case 1:if(!Ya&&(Ja(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(a){Sc(i,t,a)}dl(e,t,i);break;case 21:dl(e,t,i);break;case 22:1&i.mode?(Ya=(n=Ya)||null!==i.memoizedState,dl(e,t,i),Ya=n):dl(e,t,i);break;default:dl(e,t,i)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Ka),t.forEach((function(t){var n=Ic.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function gl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(s,a,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),_l(e),4&n){try{il(3,e,e.return),nl(3,e)}catch(m){Sc(e,e.return,m)}try{il(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),_l(e),512&n&&null!==i&&Ja(i,i.return);break;case 5:if(gl(t,e),_l(e),512&n&&null!==i&&Ja(i,i.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Sc(e,e.return,m)}}if(4&n&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==i?i.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&K(r,s),ye(l,a);var u=ye(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):y(r,h,d,u)}switch(l){case"input":Z(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ie(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ie(r,!!s.multiple,s.defaultValue,!0):ie(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),_l(e),4&n){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),_l(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),_l(e);break;case 13:gl(t,e),_l(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Ke())),4&n&&fl(e);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&e.mode?(Ya=(u=Ya)||h,gl(t,e),Ya=u):gl(t,e),_l(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Ja(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){n=p,i=p.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(n,i,m)}}break;case 5:Ja(p,p.return);break;case 22:if(null!==p.memoizedState){Al(d);continue}}null!==f?(f.return=p,Za=f):Al(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Sc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),_l(e),4&n&&fl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(sl(i)){var n=i;break e}i=i.return}throw Error(o(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(de(r,""),n.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var s=n.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,i){Za=e,yl(e,t,i)}function yl(e,t,i){for(var n=0!==(1&e.mode);null!==Za;){var r=Za,o=r.child;if(22===r.tag&&n){var s=null!==r.memoizedState||Xa;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Xa;var c=Ya;if(Xa=s,(Ya=l)&&!c)for(Za=r;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?wl(r):null!==l?(l.return=s,Za=l):wl(r);for(;null!==o;)Za=o,yl(o,t,i),o=o.sibling;Za=r,Xa=a,Ya=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Za=o):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ya)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:ia(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Go(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Go(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ya||512&t.flags&&rl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Za=null;break}if(null!==(i=t.sibling)){i.return=t.return,Za=i;break}Za=t.return}}function Al(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Za=i;break}Za=t.return}}function wl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{nl(4,t)}catch(l){Sc(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(l){Sc(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Sc(t,o,l)}break;case 5:var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var xl,Sl=Math.ceil,Cl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Il=0,Ml=null,kl=null,Bl=0,Rl=0,Pl=Sr(0),Dl=0,Ll=null,Ol=0,Fl=0,Nl=0,zl=null,Ul=null,Hl=0,Vl=1/0,$l=null,Gl=!1,Ql=null,jl=null,ql=!1,Wl=null,Xl=0,Yl=0,Kl=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Il)?Ke():-1!==Zl?Zl:Zl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Bl?Bl&-Bl:null!==mo.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ic(e,t,i,n){if(50<Yl)throw Yl=0,Kl=null,Error(o(185));_t(e,i,n),0!==(2&Il)&&e===Ml||(e===Ml&&(0===(2&Il)&&(Fl|=i),4===Dl&&ac(e,Bl)),nc(e,n),1===i&&0===Il&&0===(1&t.mode)&&(Vl=Ke()+500,zr&&Vr()))}function nc(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&i)&&0===(a&n)||(r[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var n=dt(e,e===Ml?Bl:0);if(0===n)null!==i&&We(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&We(i),1===t)0===e.tag?function(e){zr=!0,Hr(e)}(lc.bind(null,e)):Hr(lc.bind(null,e)),sr((function(){0===(6&Il)&&Vr()})),i=null;else{switch(bt(n)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Mc(i,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function rc(e,t){if(Zl=-1,Jl=0,0!==(6&Il))throw Error(o(327));var i=e.callbackNode;if(wc()&&e.callbackNode!==i)return null;var n=dt(e,e===Ml?Bl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=mc(e,n);else{t=n;var r=Il;Il|=2;var s=fc();for(Ml===e&&Bl===t||($l=null,Vl=Ke()+500,dc(e,t));;)try{vc();break}catch(l){pc(e,l)}To(),Cl.current=s,Il=r,null!==kl?t=0:(Ml=null,Bl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(n=r,t=oc(e,r))),1===t)throw i=Ll,dc(e,0),ac(e,n),nc(e,Ke()),i;if(6===t)ac(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],o=r.getSnapshot;r=r.value;try{if(!an(o(),r))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,n))&&(0!==(s=ft(e))&&(n=s,t=oc(e,s))),1===t))throw i=Ll,dc(e,0),ac(e,n),nc(e,Ke()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ac(e,Ul,$l);break;case 3:if(ac(e,n),(130023424&n)===n&&10<(t=Hl+500-Ke())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(Ac.bind(null,e,Ul,$l),t);break}Ac(e,Ul,$l);break;case 4:if(ac(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var a=31-st(n);s=1<<a,(a=t[a])>r&&(r=a),n&=~s}if(n=r,10<(n=(120>(n=Ke()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=nr(Ac.bind(null,e,Ul,$l),n);break}Ac(e,Ul,$l);break;default:throw Error(o(329))}}}return nc(e,Ke()),e.callbackNode===i?rc.bind(null,e):null}function oc(e,t){var i=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=i,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Nl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-st(t),n=1<<i;e[i]=-1,t&=~n}}function lc(e){if(0!==(6&Il))throw Error(o(327));wc();var t=dt(e,0);if(0===(1&t))return nc(e,Ke()),null;var i=mc(e,t);if(0!==e.tag&&2===i){var n=ft(e);0!==n&&(t=n,i=oc(e,n))}if(1===i)throw i=Ll,dc(e,0),ac(e,t),nc(e,Ke()),i;if(6===i)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ac(e,Ul,$l),nc(e,Ke()),null}function cc(e,t){var i=Il;Il|=1;try{return e(t)}finally{0===(Il=i)&&(Vl=Ke()+500,zr&&Vr())}}function uc(e){null!==Wl&&0===Wl.tag&&0===(6&Il)&&wc();var t=Il;Il|=1;var i=Tl.transition,n=yt;try{if(Tl.transition=null,yt=1,e)return e()}finally{yt=n,Tl.transition=i,0===(6&(Il=t))&&Vr()}}function hc(){Rl=Pl.current,Cr(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,rr(i)),null!==kl)for(i=kl.return;null!==i;){var n=i;switch(to(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Pr();break;case 3:Ko(),Cr(Mr),Cr(Ir),ns();break;case 5:Jo(n);break;case 4:Ko();break;case 13:case 19:Cr(es);break;case 10:Io(n.type._context);break;case 22:case 23:hc()}i=i.return}if(Ml=e,kl=e=Pc(e.current,null),Bl=Rl=t,Dl=0,Ll=null,Nl=Fl=Ol=0,Ul=zl=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(n=(i=Ro[t]).interleaved)){i.interleaved=null;var r=n.next,o=i.pending;if(null!==o){var s=o.next;o.next=r,n.next=s}i.pending=n}Ro=null}return e}function pc(e,t){for(;;){var i=kl;try{if(To(),rs.current=Zs,us){for(var n=as.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}us=!1}if(ss=0,cs=ls=as=null,hs=!1,ds=0,El.current=null,null===i||null===i.return){Dl=1,Ll=t,kl=null;break}e:{var s=e,a=i.return,l=i,c=t;if(t=Bl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,_a(f,a,l,0,t),1&f.mode&&ga(s,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var _=ma(a);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),_a(_,a,l,0,t),go(ca(c,l));break e}}s=c=ca(c,l),4!==Dl&&(Dl=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,pa(0,c,t));break e;case 1:l=c;var v=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===jl||!jl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Vo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}bc(i)}catch(b){t=b,kl===i&&null!==i&&(kl=i=i.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Zs,null===e?Zs:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ml||0===(268435455&Ol)&&0===(268435455&Fl)||ac(Ml,Bl)}function mc(e,t){var i=Il;Il|=2;var n=fc();for(Ml===e&&Bl===t||($l=null,dc(e,t));;)try{_c();break}catch(r){pc(e,r)}if(To(),Il=i,Cl.current=n,null!==kl)throw Error(o(261));return Ml=null,Bl=0,Dl}function _c(){for(;null!==kl;)yc(kl)}function vc(){for(;null!==kl&&!Xe();)yc(kl)}function yc(e){var t=xl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):kl=t,El.current=null}function bc(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=qa(i,t,Rl)))return void(kl=i)}else{if(null!==(i=Wa(i,t)))return i.flags&=32767,void(kl=i);if(null===e)return Dl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Dl&&(Dl=5)}function Ac(e,t,i){var n=yt,r=Tl.transition;try{Tl.transition=null,yt=1,function(e,t,i,n){do{wc()}while(null!==Wl);if(0!==(6&Il))throw Error(o(327));i=e.finishedWork;var r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-st(i),o=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~o}}(e,s),e===Ml&&(kl=Ml=null,Bl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||ql||(ql=!0,Mc(tt,(function(){return wc(),null}))),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var a=yt;yt=1;var l=Il;Il|=4,El.current=null,function(e,t){if(er=Gt,pn(e=dn())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch(A){i=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==i||0!==r&&3!==d.nodeType||(l=a+r),d!==s||0!==n&&3!==d.nodeType||(c=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===i&&++u===r&&(l=a),p===s&&++h===n&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(tr={focusedElem:e,selectionRange:i},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,_=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ia(t.type,m),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(A){Sc(t,t.return,A)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=tl,tl=!1}(e,i),ml(i,e),fn(tr),Gt=!!er,tr=er=null,e.current=i,vl(i,e,r),Ye(),Il=l,yt=a,Tl.transition=s}else e.current=i;if(ql&&(ql=!1,Wl=e,Xl=r),s=e.pendingLanes,0===s&&(jl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),nc(e,Ke()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Kl?Yl++:(Yl=0,Kl=e):Yl=0,Vr()}(e,t,i,n)}finally{Tl.transition=r,yt=n}return null}function wc(){if(null!==Wl){var e=bt(Xl),t=Tl.transition,i=yt;try{if(Tl.transition=null,yt=16>e?16:e,null===Wl)var n=!1;else{if(e=Wl,Wl=null,Xl=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:il(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var p=(h=Za).sibling,f=h.return;if(ol(h),h===u){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var y=e.current;for(Za=y;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=y;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===a){Za=null;break e}var A=l.sibling;if(null!==A){A.return=l.return,Za=A;break e}Za=l.return}}if(Il=r,Vr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}n=!0}return n}finally{yt=i,Tl.transition=t}}return!1}function xc(e,t,i){e=Uo(e,t=pa(0,t=ca(i,t),1),1),t=ec(),null!==e&&(_t(e,1,t),nc(e,t))}function Sc(e,t,i){if(3===e.tag)xc(e,e,i);else for(;null!==t;){if(3===t.tag){xc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===jl||!jl.has(n))){t=Uo(t,e=fa(t,e=ca(i,e),1),1),e=ec(),null!==t&&(_t(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&i,Ml===e&&(Bl&i)===i&&(4===Dl||3===Dl&&(130023424&Bl)===Bl&&500>Ke()-Hl?dc(e,0):Nl|=i),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var i=ec();null!==(e=Lo(e,t))&&(_t(e,t,i),nc(e,i))}function Tc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ec(e,i)}function Ic(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Ec(e,i)}function Mc(e,t){return qe(e,t)}function kc(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,i,n){return new kc(e,t,i,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var i=e.alternate;return null===i?((i=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Dc(e,t,i,n,r,s){var a=2;if(n=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Lc(i.children,r,s,t);case S:a=8,r|=8;break;case C:return(e=Bc(12,i,t,2|r)).elementType=C,e.lanes=s,e;case M:return(e=Bc(13,i,t,r)).elementType=M,e.lanes=s,e;case k:return(e=Bc(19,i,t,r)).elementType=k,e.lanes=s,e;case P:return Oc(i,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case T:a=9;break e;case I:a=11;break e;case B:a=14;break e;case R:a=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Bc(a,i,t,r)).elementType=e,t.type=n,t.lanes=s,t}function Lc(e,t,i,n){return(e=Bc(7,e,n,t)).lanes=i,e}function Oc(e,t,i,n){return(e=Bc(22,e,n,t)).elementType=P,e.lanes=i,e.stateNode={isHidden:!1},e}function Fc(e,t,i){return(e=Bc(6,e,null,t)).lanes=i,e}function Nc(e,t,i){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,i,n,r,o,s,a,l){return e=new zc(e,t,i,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Bc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function Hc(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var i=e.type;if(Rr(i))return Lr(e,i,t)}return t}function Vc(e,t,i,n,r,o,s,a,l){return(e=Uc(i,n,!0,e,0,o,0,a,l)).context=Hc(null),i=e.current,(o=zo(n=ec(),r=tc(i))).callback=void 0!==t&&null!==t?t:null,Uo(i,o,r),e.current.lanes=r,_t(e,r,n),nc(e,n),e}function $c(e,t,i,n){var r=t.current,o=ec(),s=tc(r);return i=Hc(i),null===t.context?t.context=i:t.pendingContext=i,(t=zo(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Uo(r,t,s))&&(ic(e,r,s,o),Ho(e,r,s)),s}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function jc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}xl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mr.current)ya=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return ya=!1,function(e,t,i){switch(t.tag){case 3:Ma(t),fo();break;case 5:Zo(t);break;case 1:Rr(t.type)&&Or(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Er(xo,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Er(es,1&es.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Fa(e,t,i):(Er(es,1&es.current),null!==(e=Ga(e,t,i))?e.sibling:null);Er(es,1&es.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Va(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(es,es.current),n)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,i)}return Ga(e,t,i)}(e,t,i);ya=0!==(131072&e.flags)}else ya=!1,ro&&0!==(1048576&t.flags)&&Jr(t,jr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$a(e,t),e=t.pendingProps;var r=Br(t,Ir.current);ko(t,i),r=ms(null,t,n,e,r,i);var s=_s();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(n)?(s=!0,Or(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fo(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,n,e,i),t=Ia(null,t,n,!0,s,i)):(t.tag=0,ro&&s&&eo(t),ba(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch($a(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===B)return 14}return 2}(n),e=ia(n,e),r){case 0:t=Ea(null,t,n,e,i);break e;case 1:t=Ta(null,t,n,e,i);break e;case 11:t=Aa(null,t,n,e,i);break e;case 14:t=wa(null,t,n,ia(n.type,e),i);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Ea(e,t,n,r=t.elementType===n?r:ia(n,r),i);case 1:return n=t.type,r=t.pendingProps,Ta(e,t,n,r=t.elementType===n?r:ia(n,r),i);case 3:e:{if(Ma(t),null===e)throw Error(o(387));n=t.pendingProps,r=(s=t.memoizedState).element,No(e,t),$o(t,n,null,i);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ka(e,t,n,i,r=ca(Error(o(423)),t));break e}if(n!==r){t=ka(e,t,n,i,r=ca(Error(o(424)),t));break e}for(no=cr(t.stateNode.containerInfo.firstChild),io=t,ro=!0,oo=null,i=wo(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fo(),n===r){t=Ga(e,t,i);break e}ba(e,t,n,i)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),n=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,ir(n,r)?a=null:null!==s&&ir(n,s)&&(t.flags|=32),Ca(e,t),ba(e,t,a,i),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,i);case 4:return Yo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ao(t,null,n,i):ba(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Aa(e,t,n,r=t.elementType===n?r:ia(n,r),i);case 7:return ba(e,t,t.pendingProps,i),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Er(xo,n._currentValue),n._currentValue=a,null!==s)if(an(s.value,a)){if(s.children===r.children&&!Mr.current){t=Ga(e,t,i);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=zo(-1,i&-i)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=i,null!==(c=s.alternate)&&(c.lanes|=i),Mo(s.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Mo(a,i,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,ko(t,i),n=n(r=Bo(r)),t.flags|=1,ba(e,t,n,i),t.child;case 14:return r=ia(n=t.type,t.pendingProps),wa(e,t,n,r=ia(n.type,r),i);case 15:return xa(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ia(n,r),$a(e,t),t.tag=1,Rr(n)?(e=!0,Or(t)):e=!1,ko(t,i),sa(t,n,r),la(t,n,r,i),Ia(null,t,n,!0,e,i);case 19:return Va(e,t,i);case 22:return Sa(e,t,i)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,i,n,r){var o=i._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Gc(s);a.call(e)}}$c(t,s,e,r)}else s=function(e,t,i,n,r){if(r){if("function"===typeof n){var o=n;n=function(){var e=Gc(s);o.call(e)}}var s=Vc(t,n,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[fr]=s.current,Vn(8===e.nodeType?e.parentNode:e),uc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var a=n;n=function(){var e=Gc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,Vn(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,i,n)})),l}(i,t,e,r,n);return Gc(s)}Xc.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));$c(e,t,null,null)},Xc.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[fr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Pt.length&&0!==t&&t<Pt[i].priority;i++);Pt.splice(i,0,e),0===i&&Ft(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ht(t.pendingLanes);0!==i&&(vt(t,1|i),nc(t,Ke()),0===(6&Il)&&(Vl=Ke()+500,Vr()))}break;case 13:uc((function(){var t=Lo(e,1);if(null!==t){var i=ec();ic(t,e,1,i)}})),jc(e,1)}},wt=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)ic(t,e,134217728,ec());jc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),i=Lo(e,t);if(null!==i)ic(i,e,t,ec());jc(e,t)}},St=function(){return yt},Ct=function(e,t){var i=yt;try{return yt=e,t()}finally{yt=i}},we=function(e,t,i){switch(t){case"input":if(Z(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Ar(n);if(!r)throw Error(o(90));q(n),Z(n,r)}}}break;case"textarea":oe(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Ie=cc,Me=uc;var eu={usingClientEntryPoint:!1,Events:[yr,br,Ar,Ee,Te,cc]},tu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{rt=nu.inject(iu),ot=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var i=!1,n="",r=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,i,0,n,r),e[fr]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Wc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,i){if(!Kc(t))throw Error(o(200));return Jc(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!Yc(e))throw Error(o(405));var n=null!=i&&i.hydratedSources||null,r=!1,s="",a=qc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Vc(t,null,e,1,null!=i?i:null,r,0,s,a),e[fr]=t.current,Vn(e),n)for(e=0;e<n.length;e++)r=(r=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new Xc(t)},t.render=function(e,t,i){if(!Kc(t))throw Error(o(200));return Jc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Kc(i))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,i)=>{"use strict";var n=i(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(730)},612:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,r=e[n];if(!(0<o(r,t)))break e;e[n]=t,e[i]=r,i=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length,s=r>>>1;n<s;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,i))c<r&&0>o(u,l)?(e[n]=u,e[c]=i,n=c):(e[n]=l,e[a]=i,n=a);else{if(!(c<r&&0>o(u,i)))break e;e[n]=u,e[c]=i,n=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,i(c,t)}t=n(u)}}function A(e){if(m=!1,b(e),!g)if(null!==n(c))g=!0,P(w);else{var t=n(u);null!==t&&D(A,t.startTime-e)}}function w(e,i){g=!1,m&&(m=!1,v(E),E=-1),f=!0;var o=p;try{for(b(i),d=n(c);null!==d&&(!(d.expirationTime>i)||e&&!M());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=i);i=t.unstable_now(),"function"===typeof a?d.callback=a:d===n(c)&&r(c),b(i)}else r(c);d=n(c)}if(null!==d)var l=!0;else{var h=n(u);null!==h&&D(A,h.startTime-i),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,C=null,E=-1,T=5,I=-1;function M(){return!(t.unstable_now()-I<T)}function k(){if(null!==C){var e=t.unstable_now();I=e;var i=!0;try{i=C(!0,e)}finally{i?x():(S=!1,C=null)}}else S=!1}if("function"===typeof y)x=function(){y(k)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=k,x=function(){R.postMessage(null)}}else x=function(){_(k,0)};function P(e){C=e,S||(S=!0,x())}function D(e,i){E=_((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,i(u,e),null===n(c)&&e===n(u)&&(m?(v(E),E=-1):m=!0,D(A,o-s))):(e.sortIndex=a,i(c,e),g||f||(g=!0,P(w))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},67:(e,t,i)=>{"use strict";e.exports=i(612)},153:(e,t,i)=>{"use strict";var n=i(43),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,o={},c=null,u=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function _(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||f}function v(){}function y(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||f}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=_.prototype;var b=y.prototype=new v;b.constructor=y,g(b,_.prototype),b.isPureReactComponent=!0;var A=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,A(s)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),M(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",A(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=M(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=M(a=a.value,t,r,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,i){if(null==e)return e;var n=[],r=0;return M(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,i){k(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=r,t.Profiler=s,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,i){return R.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,i){return R.current.useReducer(e,t,i)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return R.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,i)=>{"use strict";e.exports=i(202)},579:(e,t,i)=>{"use strict";e.exports=i(153)},324:e=>{e.exports=function(e,t,i,n){var r=i?i.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(r=i?i.call(n,u,h,c):void 0)||void 0===r&&u!==h)return!1}return!0}}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,i),o.loaded=!0,o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);i.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,i.d(o,s),o}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0,(()=>{"use strict";var e=i(43),t=i(391),n=i(944),r=i(579);const o=function(){const e=new URLSearchParams(window.location.search).get("asset");return e?(0,r.jsx)("div",{className:"App specimen-3d-viewer-full-size",children:(0,r.jsx)(n.w,{src:e})}):(0,r.jsx)("h1",{children:"No asset specified."})};t.createRoot(document.getElementById("root")).render((0,r.jsx)(e.StrictMode,{children:(0,r.jsx)(o,{})}))})()})();
//# sourceMappingURL=main.js.map