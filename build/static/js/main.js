/*! For license information please see main.6fc8f4e2.js.LICENSE.txt */
(()=>{var e={424:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=424,e.exports=t},314:(e,t,i)=>{"use strict";i.d(t,{w:()=>MH});var n=i(43);e=i.hmd(e);var r,o={exports:{}},a=(r||(r=1,window,o.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=13)}([function(e,t,i){function n(){}i.r(t),i.d(t,"WebGLRenderTargetCube",(function(){return $t})),i.d(t,"WebGLRenderTarget",(function(){return Wt})),i.d(t,"WebGLRenderer",(function(){return ar})),i.d(t,"ShaderLib",(function(){return oi})),i.d(t,"UniformsLib",(function(){return ri})),i.d(t,"UniformsUtils",(function(){return ti})),i.d(t,"ShaderChunk",(function(){return ei})),i.d(t,"FogExp2",(function(){return sr})),i.d(t,"Fog",(function(){return lr})),i.d(t,"Scene",(function(){return cr})),i.d(t,"Sprite",(function(){return pr})),i.d(t,"LOD",(function(){return fr})),i.d(t,"SkinnedMesh",(function(){return _r})),i.d(t,"Skeleton",(function(){return mr})),i.d(t,"Bone",(function(){return gr})),i.d(t,"Mesh",(function(){return Hi})),i.d(t,"LineSegments",(function(){return Ar})),i.d(t,"LineLoop",(function(){return br})),i.d(t,"Line",(function(){return yr})),i.d(t,"Points",(function(){return wr})),i.d(t,"Group",(function(){return ir})),i.d(t,"VideoTexture",(function(){return Sr})),i.d(t,"DataTexture",(function(){return Xt})),i.d(t,"CompressedTexture",(function(){return Cr})),i.d(t,"CubeTexture",(function(){return Vi})),i.d(t,"CanvasTexture",(function(){return Er})),i.d(t,"DepthTexture",(function(){return Tr})),i.d(t,"Texture",(function(){return jt})),i.d(t,"CompressedTextureLoader",(function(){return ia})),i.d(t,"DataTextureLoader",(function(){return na})),i.d(t,"CubeTextureLoader",(function(){return oa})),i.d(t,"TextureLoader",(function(){return aa})),i.d(t,"ObjectLoader",(function(){return ss})),i.d(t,"MaterialLoader",(function(){return ts})),i.d(t,"BufferGeometryLoader",(function(){return is})),i.d(t,"DefaultLoadingManager",(function(){return Jo})),i.d(t,"LoadingManager",(function(){return Zo})),i.d(t,"JSONLoader",(function(){return as})),i.d(t,"ImageLoader",(function(){return ra})),i.d(t,"ImageBitmapLoader",(function(){return ds})),i.d(t,"FontLoader",(function(){return gs})),i.d(t,"FileLoader",(function(){return ta})),i.d(t,"Loader",(function(){return rs})),i.d(t,"LoaderUtils",(function(){return os})),i.d(t,"Cache",(function(){return Ko})),i.d(t,"AudioLoader",(function(){return As})),i.d(t,"SpotLightShadow",(function(){return ka})),i.d(t,"SpotLight",(function(){return La})),i.d(t,"PointLight",(function(){return Da})),i.d(t,"RectAreaLight",(function(){return Ua})),i.d(t,"HemisphereLight",(function(){return Ra})),i.d(t,"DirectionalLightShadow",(function(){return Na})),i.d(t,"DirectionalLight",(function(){return Oa})),i.d(t,"AmbientLight",(function(){return Fa})),i.d(t,"LightShadow",(function(){return Pa})),i.d(t,"Light",(function(){return Ba})),i.d(t,"StereoCamera",(function(){return bs})),i.d(t,"PerspectiveCamera",(function(){return nr})),i.d(t,"OrthographicCamera",(function(){return pi})),i.d(t,"CubeCamera",(function(){return xs})),i.d(t,"ArrayCamera",(function(){return rr})),i.d(t,"Camera",(function(){return di})),i.d(t,"AudioListener",(function(){return ws})),i.d(t,"PositionalAudio",(function(){return Cs})),i.d(t,"AudioContext",(function(){return ys})),i.d(t,"AudioAnalyser",(function(){return Es})),i.d(t,"Audio",(function(){return Ss})),i.d(t,"VectorKeyframeTrack",(function(){return Za})),i.d(t,"StringKeyframeTrack",(function(){return Ka})),i.d(t,"QuaternionKeyframeTrack",(function(){return Ya})),i.d(t,"NumberKeyframeTrack",(function(){return $a})),i.d(t,"ColorKeyframeTrack",(function(){return Wa})),i.d(t,"BooleanKeyframeTrack",(function(){return qa})),i.d(t,"PropertyMixer",(function(){return Ts})),i.d(t,"PropertyBinding",(function(){return Is})),i.d(t,"KeyframeTrack",(function(){return ja})),i.d(t,"AnimationUtils",(function(){return za})),i.d(t,"AnimationObjectGroup",(function(){return Bs})),i.d(t,"AnimationMixer",(function(){return Ps})),i.d(t,"AnimationClip",(function(){return Ja})),i.d(t,"Uniform",(function(){return ks})),i.d(t,"InstancedBufferGeometry",(function(){return Ls})),i.d(t,"BufferGeometry",(function(){return Bi})),i.d(t,"Geometry",(function(){return gi})),i.d(t,"InterleavedBufferAttribute",(function(){return hr})),i.d(t,"InstancedInterleavedBuffer",(function(){return Ds})),i.d(t,"InterleavedBuffer",(function(){return ur})),i.d(t,"InstancedBufferAttribute",(function(){return Ns})),i.d(t,"Face3",(function(){return fi})),i.d(t,"Object3D",(function(){return hi})),i.d(t,"Raycaster",(function(){return Os})),i.d(t,"Layers",(function(){return ci})),i.d(t,"EventDispatcher",(function(){return n})),i.d(t,"Clock",(function(){return zs})),i.d(t,"QuaternionLinearInterpolant",(function(){return Xa})),i.d(t,"LinearInterpolant",(function(){return Va})),i.d(t,"DiscreteInterpolant",(function(){return Qa})),i.d(t,"CubicInterpolant",(function(){return Ga})),i.d(t,"Interpolant",(function(){return Ha})),i.d(t,"Triangle",(function(){return zi})),i.d(t,"Math",(function(){return Ot})),i.d(t,"Spherical",(function(){return Hs})),i.d(t,"Cylindrical",(function(){return Gs})),i.d(t,"Plane",(function(){return Zt})),i.d(t,"Frustum",(function(){return Jt})),i.d(t,"Sphere",(function(){return Kt})),i.d(t,"Ray",(function(){return Ui})),i.d(t,"Matrix4",(function(){return Ut})),i.d(t,"Matrix3",(function(){return Gt})),i.d(t,"Box3",(function(){return Yt})),i.d(t,"Box2",(function(){return Vs})),i.d(t,"Line3",(function(){return Qs})),i.d(t,"Euler",(function(){return li})),i.d(t,"Vector4",(function(){return qt})),i.d(t,"Vector3",(function(){return Ht})),i.d(t,"Vector2",(function(){return Ft})),i.d(t,"Quaternion",(function(){return zt})),i.d(t,"Color",(function(){return ni})),i.d(t,"ImmediateRenderObject",(function(){return js})),i.d(t,"VertexNormalsHelper",(function(){return qs})),i.d(t,"SpotLightHelper",(function(){return Ws})),i.d(t,"SkeletonHelper",(function(){return $s})),i.d(t,"PointLightHelper",(function(){return Xs})),i.d(t,"RectAreaLightHelper",(function(){return Ys})),i.d(t,"HemisphereLightHelper",(function(){return Ks})),i.d(t,"GridHelper",(function(){return Zs})),i.d(t,"PolarGridHelper",(function(){return Js})),i.d(t,"FaceNormalsHelper",(function(){return el})),i.d(t,"DirectionalLightHelper",(function(){return tl})),i.d(t,"CameraHelper",(function(){return il})),i.d(t,"BoxHelper",(function(){return nl})),i.d(t,"Box3Helper",(function(){return rl})),i.d(t,"PlaneHelper",(function(){return ol})),i.d(t,"ArrowHelper",(function(){return al})),i.d(t,"AxesHelper",(function(){return sl})),i.d(t,"Shape",(function(){return Ia})),i.d(t,"Path",(function(){return Ma})),i.d(t,"ShapePath",(function(){return ps})),i.d(t,"Font",(function(){return fs})),i.d(t,"CurvePath",(function(){return Ta})),i.d(t,"Curve",(function(){return sa})),i.d(t,"ImageUtils",(function(){return Vt})),i.d(t,"ShapeUtils",(function(){return mo})),i.d(t,"WebGLUtils",(function(){return tr})),i.d(t,"WireframeGeometry",(function(){return Mr})),i.d(t,"ParametricGeometry",(function(){return Ir})),i.d(t,"ParametricBufferGeometry",(function(){return Br})),i.d(t,"TetrahedronGeometry",(function(){return kr})),i.d(t,"TetrahedronBufferGeometry",(function(){return Lr})),i.d(t,"OctahedronGeometry",(function(){return Dr})),i.d(t,"OctahedronBufferGeometry",(function(){return Nr})),i.d(t,"IcosahedronGeometry",(function(){return Or})),i.d(t,"IcosahedronBufferGeometry",(function(){return Fr})),i.d(t,"DodecahedronGeometry",(function(){return Ur})),i.d(t,"DodecahedronBufferGeometry",(function(){return zr})),i.d(t,"PolyhedronGeometry",(function(){return Rr})),i.d(t,"PolyhedronBufferGeometry",(function(){return Pr})),i.d(t,"TubeGeometry",(function(){return Hr})),i.d(t,"TubeBufferGeometry",(function(){return Gr})),i.d(t,"TorusKnotGeometry",(function(){return Vr})),i.d(t,"TorusKnotBufferGeometry",(function(){return Qr})),i.d(t,"TorusGeometry",(function(){return jr})),i.d(t,"TorusBufferGeometry",(function(){return qr})),i.d(t,"TextGeometry",(function(){return xo})),i.d(t,"TextBufferGeometry",(function(){return wo})),i.d(t,"SphereGeometry",(function(){return So})),i.d(t,"SphereBufferGeometry",(function(){return Co})),i.d(t,"RingGeometry",(function(){return Eo})),i.d(t,"RingBufferGeometry",(function(){return To})),i.d(t,"PlaneGeometry",(function(){return ki})),i.d(t,"PlaneBufferGeometry",(function(){return Li})),i.d(t,"LatheGeometry",(function(){return Mo})),i.d(t,"LatheBufferGeometry",(function(){return Io})),i.d(t,"ShapeGeometry",(function(){return Bo})),i.d(t,"ShapeBufferGeometry",(function(){return Ro})),i.d(t,"ExtrudeGeometry",(function(){return vo})),i.d(t,"ExtrudeBufferGeometry",(function(){return yo})),i.d(t,"EdgesGeometry",(function(){return ko})),i.d(t,"ConeGeometry",(function(){return No})),i.d(t,"ConeBufferGeometry",(function(){return Oo})),i.d(t,"CylinderGeometry",(function(){return Lo})),i.d(t,"CylinderBufferGeometry",(function(){return Do})),i.d(t,"CircleGeometry",(function(){return Fo})),i.d(t,"CircleBufferGeometry",(function(){return Uo})),i.d(t,"BoxGeometry",(function(){return Ri})),i.d(t,"BoxBufferGeometry",(function(){return Pi})),i.d(t,"ShadowMaterial",(function(){return Ho})),i.d(t,"SpriteMaterial",(function(){return dr})),i.d(t,"RawShaderMaterial",(function(){return Go})),i.d(t,"ShaderMaterial",(function(){return Fi})),i.d(t,"PointsMaterial",(function(){return xr})),i.d(t,"MeshPhysicalMaterial",(function(){return Qo})),i.d(t,"MeshStandardMaterial",(function(){return Vo})),i.d(t,"MeshPhongMaterial",(function(){return jo})),i.d(t,"MeshToonMaterial",(function(){return qo})),i.d(t,"MeshNormalMaterial",(function(){return Wo})),i.d(t,"MeshLambertMaterial",(function(){return $o})),i.d(t,"MeshDepthMaterial",(function(){return Kn})),i.d(t,"MeshDistanceMaterial",(function(){return Zn})),i.d(t,"MeshBasicMaterial",(function(){return Oi})),i.d(t,"LineDashedMaterial",(function(){return Xo})),i.d(t,"LineBasicMaterial",(function(){return vr})),i.d(t,"Material",(function(){return Ni})),i.d(t,"Float64BufferAttribute",(function(){return Ei})),i.d(t,"Float32BufferAttribute",(function(){return Ci})),i.d(t,"Uint32BufferAttribute",(function(){return Si})),i.d(t,"Int32BufferAttribute",(function(){return wi})),i.d(t,"Uint16BufferAttribute",(function(){return xi})),i.d(t,"Int16BufferAttribute",(function(){return bi})),i.d(t,"Uint8ClampedBufferAttribute",(function(){return Ai})),i.d(t,"Uint8BufferAttribute",(function(){return yi})),i.d(t,"Int8BufferAttribute",(function(){return vi})),i.d(t,"BufferAttribute",(function(){return _i})),i.d(t,"ArcCurve",(function(){return ca})),i.d(t,"CatmullRomCurve3",(function(){return ma})),i.d(t,"CubicBezierCurve",(function(){return ya})),i.d(t,"CubicBezierCurve3",(function(){return Aa})),i.d(t,"EllipseCurve",(function(){return la})),i.d(t,"LineCurve",(function(){return ba})),i.d(t,"LineCurve3",(function(){return xa})),i.d(t,"QuadraticBezierCurve",(function(){return wa})),i.d(t,"QuadraticBezierCurve3",(function(){return Sa})),i.d(t,"SplineCurve",(function(){return Ca})),i.d(t,"REVISION",(function(){return r})),i.d(t,"MOUSE",(function(){return o})),i.d(t,"CullFaceNone",(function(){return a})),i.d(t,"CullFaceBack",(function(){return s})),i.d(t,"CullFaceFront",(function(){return l})),i.d(t,"CullFaceFrontBack",(function(){return c})),i.d(t,"FrontFaceDirectionCW",(function(){return u})),i.d(t,"FrontFaceDirectionCCW",(function(){return h})),i.d(t,"BasicShadowMap",(function(){return d})),i.d(t,"PCFShadowMap",(function(){return p})),i.d(t,"PCFSoftShadowMap",(function(){return f})),i.d(t,"FrontSide",(function(){return m})),i.d(t,"BackSide",(function(){return g})),i.d(t,"DoubleSide",(function(){return _})),i.d(t,"FlatShading",(function(){return v})),i.d(t,"SmoothShading",(function(){return y})),i.d(t,"NoColors",(function(){return A})),i.d(t,"FaceColors",(function(){return b})),i.d(t,"VertexColors",(function(){return x})),i.d(t,"NoBlending",(function(){return w})),i.d(t,"NormalBlending",(function(){return S})),i.d(t,"AdditiveBlending",(function(){return C})),i.d(t,"SubtractiveBlending",(function(){return E})),i.d(t,"MultiplyBlending",(function(){return T})),i.d(t,"CustomBlending",(function(){return M})),i.d(t,"AddEquation",(function(){return I})),i.d(t,"SubtractEquation",(function(){return B})),i.d(t,"ReverseSubtractEquation",(function(){return R})),i.d(t,"MinEquation",(function(){return P})),i.d(t,"MaxEquation",(function(){return k})),i.d(t,"ZeroFactor",(function(){return L})),i.d(t,"OneFactor",(function(){return D})),i.d(t,"SrcColorFactor",(function(){return N})),i.d(t,"OneMinusSrcColorFactor",(function(){return O})),i.d(t,"SrcAlphaFactor",(function(){return F})),i.d(t,"OneMinusSrcAlphaFactor",(function(){return U})),i.d(t,"DstAlphaFactor",(function(){return z})),i.d(t,"OneMinusDstAlphaFactor",(function(){return H})),i.d(t,"DstColorFactor",(function(){return G})),i.d(t,"OneMinusDstColorFactor",(function(){return V})),i.d(t,"SrcAlphaSaturateFactor",(function(){return Q})),i.d(t,"NeverDepth",(function(){return j})),i.d(t,"AlwaysDepth",(function(){return q})),i.d(t,"LessDepth",(function(){return W})),i.d(t,"LessEqualDepth",(function(){return $})),i.d(t,"EqualDepth",(function(){return X})),i.d(t,"GreaterEqualDepth",(function(){return Y})),i.d(t,"GreaterDepth",(function(){return K})),i.d(t,"NotEqualDepth",(function(){return Z})),i.d(t,"MultiplyOperation",(function(){return J})),i.d(t,"MixOperation",(function(){return ee})),i.d(t,"AddOperation",(function(){return te})),i.d(t,"NoToneMapping",(function(){return ie})),i.d(t,"LinearToneMapping",(function(){return ne})),i.d(t,"ReinhardToneMapping",(function(){return re})),i.d(t,"Uncharted2ToneMapping",(function(){return oe})),i.d(t,"CineonToneMapping",(function(){return ae})),i.d(t,"UVMapping",(function(){return se})),i.d(t,"CubeReflectionMapping",(function(){return le})),i.d(t,"CubeRefractionMapping",(function(){return ce})),i.d(t,"EquirectangularReflectionMapping",(function(){return ue})),i.d(t,"EquirectangularRefractionMapping",(function(){return he})),i.d(t,"SphericalReflectionMapping",(function(){return de})),i.d(t,"CubeUVReflectionMapping",(function(){return pe})),i.d(t,"CubeUVRefractionMapping",(function(){return fe})),i.d(t,"RepeatWrapping",(function(){return me})),i.d(t,"ClampToEdgeWrapping",(function(){return ge})),i.d(t,"MirroredRepeatWrapping",(function(){return _e})),i.d(t,"NearestFilter",(function(){return ve})),i.d(t,"NearestMipMapNearestFilter",(function(){return ye})),i.d(t,"NearestMipMapLinearFilter",(function(){return Ae})),i.d(t,"LinearFilter",(function(){return be})),i.d(t,"LinearMipMapNearestFilter",(function(){return xe})),i.d(t,"LinearMipMapLinearFilter",(function(){return we})),i.d(t,"UnsignedByteType",(function(){return Se})),i.d(t,"ByteType",(function(){return Ce})),i.d(t,"ShortType",(function(){return Ee})),i.d(t,"UnsignedShortType",(function(){return Te})),i.d(t,"IntType",(function(){return Me})),i.d(t,"UnsignedIntType",(function(){return Ie})),i.d(t,"FloatType",(function(){return Be})),i.d(t,"HalfFloatType",(function(){return Re})),i.d(t,"UnsignedShort4444Type",(function(){return Pe})),i.d(t,"UnsignedShort5551Type",(function(){return ke})),i.d(t,"UnsignedShort565Type",(function(){return Le})),i.d(t,"UnsignedInt248Type",(function(){return De})),i.d(t,"AlphaFormat",(function(){return Ne})),i.d(t,"RGBFormat",(function(){return Oe})),i.d(t,"RGBAFormat",(function(){return Fe})),i.d(t,"LuminanceFormat",(function(){return Ue})),i.d(t,"LuminanceAlphaFormat",(function(){return ze})),i.d(t,"RGBEFormat",(function(){return He})),i.d(t,"DepthFormat",(function(){return Ge})),i.d(t,"DepthStencilFormat",(function(){return Ve})),i.d(t,"RGB_S3TC_DXT1_Format",(function(){return Qe})),i.d(t,"RGBA_S3TC_DXT1_Format",(function(){return je})),i.d(t,"RGBA_S3TC_DXT3_Format",(function(){return qe})),i.d(t,"RGBA_S3TC_DXT5_Format",(function(){return We})),i.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return $e})),i.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return Xe})),i.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return Ye})),i.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return Ke})),i.d(t,"RGB_ETC1_Format",(function(){return Ze})),i.d(t,"RGBA_ASTC_4x4_Format",(function(){return Je})),i.d(t,"RGBA_ASTC_5x4_Format",(function(){return et})),i.d(t,"RGBA_ASTC_5x5_Format",(function(){return tt})),i.d(t,"RGBA_ASTC_6x5_Format",(function(){return it})),i.d(t,"RGBA_ASTC_6x6_Format",(function(){return nt})),i.d(t,"RGBA_ASTC_8x5_Format",(function(){return rt})),i.d(t,"RGBA_ASTC_8x6_Format",(function(){return ot})),i.d(t,"RGBA_ASTC_8x8_Format",(function(){return at})),i.d(t,"RGBA_ASTC_10x5_Format",(function(){return st})),i.d(t,"RGBA_ASTC_10x6_Format",(function(){return lt})),i.d(t,"RGBA_ASTC_10x8_Format",(function(){return ct})),i.d(t,"RGBA_ASTC_10x10_Format",(function(){return ut})),i.d(t,"RGBA_ASTC_12x10_Format",(function(){return ht})),i.d(t,"RGBA_ASTC_12x12_Format",(function(){return dt})),i.d(t,"LoopOnce",(function(){return pt})),i.d(t,"LoopRepeat",(function(){return ft})),i.d(t,"LoopPingPong",(function(){return mt})),i.d(t,"InterpolateDiscrete",(function(){return gt})),i.d(t,"InterpolateLinear",(function(){return _t})),i.d(t,"InterpolateSmooth",(function(){return vt})),i.d(t,"ZeroCurvatureEnding",(function(){return yt})),i.d(t,"ZeroSlopeEnding",(function(){return At})),i.d(t,"WrapAroundEnding",(function(){return bt})),i.d(t,"TrianglesDrawMode",(function(){return xt})),i.d(t,"TriangleStripDrawMode",(function(){return wt})),i.d(t,"TriangleFanDrawMode",(function(){return St})),i.d(t,"LinearEncoding",(function(){return Ct})),i.d(t,"sRGBEncoding",(function(){return Et})),i.d(t,"GammaEncoding",(function(){return Tt})),i.d(t,"RGBEEncoding",(function(){return Mt})),i.d(t,"LogLuvEncoding",(function(){return It})),i.d(t,"RGBM7Encoding",(function(){return Bt})),i.d(t,"RGBM16Encoding",(function(){return Rt})),i.d(t,"RGBDEncoding",(function(){return Pt})),i.d(t,"BasicDepthPacking",(function(){return kt})),i.d(t,"RGBADepthPacking",(function(){return Lt})),i.d(t,"TangentSpaceNormalMap",(function(){return Dt})),i.d(t,"ObjectSpaceNormalMap",(function(){return Nt})),i.d(t,"CubeGeometry",(function(){return Ri})),i.d(t,"Face4",(function(){return ll})),i.d(t,"LineStrip",(function(){return cl})),i.d(t,"LinePieces",(function(){return ul})),i.d(t,"MeshFaceMaterial",(function(){return hl})),i.d(t,"MultiMaterial",(function(){return dl})),i.d(t,"PointCloud",(function(){return pl})),i.d(t,"Particle",(function(){return fl})),i.d(t,"ParticleSystem",(function(){return ml})),i.d(t,"PointCloudMaterial",(function(){return gl})),i.d(t,"ParticleBasicMaterial",(function(){return _l})),i.d(t,"ParticleSystemMaterial",(function(){return vl})),i.d(t,"Vertex",(function(){return yl})),i.d(t,"DynamicBufferAttribute",(function(){return Al})),i.d(t,"Int8Attribute",(function(){return bl})),i.d(t,"Uint8Attribute",(function(){return xl})),i.d(t,"Uint8ClampedAttribute",(function(){return wl})),i.d(t,"Int16Attribute",(function(){return Sl})),i.d(t,"Uint16Attribute",(function(){return Cl})),i.d(t,"Int32Attribute",(function(){return El})),i.d(t,"Uint32Attribute",(function(){return Tl})),i.d(t,"Float32Attribute",(function(){return Ml})),i.d(t,"Float64Attribute",(function(){return Il})),i.d(t,"ClosedSplineCurve3",(function(){return Bl})),i.d(t,"SplineCurve3",(function(){return Rl})),i.d(t,"Spline",(function(){return Pl})),i.d(t,"AxisHelper",(function(){return kl})),i.d(t,"BoundingBoxHelper",(function(){return Ll})),i.d(t,"EdgesHelper",(function(){return Dl})),i.d(t,"WireframeHelper",(function(){return Nl})),i.d(t,"XHRLoader",(function(){return Ol})),i.d(t,"BinaryTextureLoader",(function(){return Fl})),i.d(t,"GeometryUtils",(function(){return Ul})),i.d(t,"Projector",(function(){return zl})),i.d(t,"CanvasRenderer",(function(){return Hl})),i.d(t,"SceneUtils",(function(){return Gl})),i.d(t,"LensFlare",(function(){return Vl})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Object.assign(n.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,e)}}}});var r="95",o={LEFT:0,MIDDLE:1,RIGHT:2},a=0,s=1,l=2,c=3,u=0,h=1,d=0,p=1,f=2,m=0,g=1,_=2,v=1,y=2,A=0,b=1,x=2,w=0,S=1,C=2,E=3,T=4,M=5,I=100,B=101,R=102,P=103,k=104,L=200,D=201,N=202,O=203,F=204,U=205,z=206,H=207,G=208,V=209,Q=210,j=0,q=1,W=2,$=3,X=4,Y=5,K=6,Z=7,J=0,ee=1,te=2,ie=0,ne=1,re=2,oe=3,ae=4,se=300,le=301,ce=302,ue=303,he=304,de=305,pe=306,fe=307,me=1e3,ge=1001,_e=1002,ve=1003,ye=1004,Ae=1005,be=1006,xe=1007,we=1008,Se=1009,Ce=1010,Ee=1011,Te=1012,Me=1013,Ie=1014,Be=1015,Re=1016,Pe=1017,ke=1018,Le=1019,De=1020,Ne=1021,Oe=1022,Fe=1023,Ue=1024,ze=1025,He=Fe,Ge=1026,Ve=1027,Qe=33776,je=33777,qe=33778,We=33779,$e=35840,Xe=35841,Ye=35842,Ke=35843,Ze=36196,Je=37808,et=37809,tt=37810,it=37811,nt=37812,rt=37813,ot=37814,at=37815,st=37816,lt=37817,ct=37818,ut=37819,ht=37820,dt=37821,pt=2200,ft=2201,mt=2202,gt=2300,_t=2301,vt=2302,yt=2400,At=2401,bt=2402,xt=0,wt=1,St=2,Ct=3e3,Et=3001,Tt=3007,Mt=3002,It=3003,Bt=3004,Rt=3005,Pt=3006,kt=3200,Lt=3201,Dt=0,Nt=1,Ot={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ot.DEG2RAD},radToDeg:function(e){return e*Ot.RAD2DEG},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Ft(e,t){this.x=e||0,this.y=t||0}function Ut(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function zt(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1}function Ht(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function Gt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ft.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Ft.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new Ft,t=new Ft;return function(i,n){return e.set(i,i),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*n+e.x,this.y=r*n+o*i+e.y,this}}),Object.assign(Ut.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,o,a,s,l,c,u,h,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ut).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new Ht;return function(t){var i=this.elements,n=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=0,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[7]=0,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=o*c,d=o*u,p=a*c,f=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=d+p*l,t[5]=h-f*l,t[9]=-a*s,t[2]=f-h*l,t[6]=p+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*u,_=l*c,v=l*u;t[0]=m+v*a,t[4]=_*a-g,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=g*a-_,t[6]=v+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*c,g=s*u,_=l*c,v=l*u,t[0]=m-v*a,t[4]=-o*u,t[8]=_+g*a,t[1]=g+_*a,t[5]=o*c,t[9]=v-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*c,d=o*u,p=a*c,f=a*u,t[0]=s*c,t[4]=p*l-d,t[8]=h*l+f,t[1]=s*u,t[5]=f*l+h,t[9]=d*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var y=o*s,A=o*l,b=a*s,x=a*l;t[0]=s*c,t[4]=x-y*u,t[8]=b*u+A,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=A*u+b,t[10]=y-x*u}else"XZY"===e.order&&(y=o*s,A=o*l,b=a*s,x=a*l,t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=y*u+x,t[5]=o*c,t[9]=A*u-b,t[2]=b*u-A,t[6]=a*c,t[10]=x*u+y);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new Ht(0,0,0),t=new Ht(1,1,1);return function(i){return this.compose(e,i,t)}}(),lookAt:function(){var e=new Ht,t=new Ht,i=new Ht;return function(n,r,o){var a=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),e.crossVectors(o,i),0===e.lengthSq()&&(1===Math.abs(o.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),e.crossVectors(o,i)),e.normalize(),t.crossVectors(i,e),a[0]=e.x,a[4]=t.x,a[8]=i.x,a[1]=e.y,a[5]=t.y,a[9]=i.y,a[2]=e.z,a[6]=t.z,a[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],_=i[3],v=i[7],y=i[11],A=i[15],b=n[0],x=n[4],w=n[8],S=n[12],C=n[1],E=n[5],T=n[9],M=n[13],I=n[2],B=n[6],R=n[10],P=n[14],k=n[3],L=n[7],D=n[11],N=n[15];return r[0]=o*b+a*C+s*I+l*k,r[4]=o*x+a*E+s*B+l*L,r[8]=o*w+a*T+s*R+l*D,r[12]=o*S+a*M+s*P+l*N,r[1]=c*b+u*C+h*I+d*k,r[5]=c*x+u*E+h*B+d*L,r[9]=c*w+u*T+h*R+d*D,r[13]=c*S+u*M+h*P+d*N,r[2]=p*b+f*C+m*I+g*k,r[6]=p*x+f*E+m*B+g*L,r[10]=p*w+f*T+m*R+g*D,r[14]=p*S+f*M+m*P+g*N,r[3]=_*b+v*C+y*I+A*k,r[7]=_*x+v*E+y*B+A*L,r[11]=_*w+v*T+y*R+A*D,r[15]=_*S+v*M+y*P+A*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Ht;return function(t){for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-n*l*u-r*a*h+i*l*h+n*a*d-i*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-n*o*d+n*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+i*o*d+r*a*c-i*l*c)+e[15]*(-n*a*c-t*s*u+t*a*h+n*o*u-i*o*h+i*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],_=n[13],v=n[14],y=n[15],A=p*v*h-_*f*h+_*u*m-c*v*m-p*u*y+c*f*y,b=g*f*h-d*v*h-g*u*m+l*v*m+d*u*y-l*f*y,x=d*_*h-g*p*h+g*c*m-l*_*m-d*c*y+l*p*y,w=g*p*u-d*_*u-g*c*f+l*_*f+d*c*v-l*p*v,S=r*A+o*b+a*x+s*w;if(0===S){var C="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(C);return console.warn(C),this.identity()}var E=1/S;return i[0]=A*E,i[1]=(_*f*s-p*v*s-_*a*m+o*v*m+p*a*y-o*f*y)*E,i[2]=(c*v*s-_*u*s+_*a*h-o*v*h-c*a*y+o*u*y)*E,i[3]=(p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m)*E,i[4]=b*E,i[5]=(d*v*s-g*f*s+g*a*m-r*v*m-d*a*y+r*f*y)*E,i[6]=(g*u*s-l*v*s-g*a*h+r*v*h+l*a*y-r*u*y)*E,i[7]=(l*f*s-d*u*s+d*a*h-r*f*h-l*a*m+r*u*m)*E,i[8]=x*E,i[9]=(g*p*s-d*_*s-g*o*m+r*_*m+d*o*y-r*p*y)*E,i[10]=(l*_*s-g*c*s+g*o*h-r*_*h-l*o*y+r*c*y)*E,i[11]=(d*c*s-l*p*s-d*o*h+r*p*h+l*o*m-r*c*m)*E,i[12]=w*E,i[13]=(d*_*a-g*p*a+g*o*f-r*_*f-d*o*v+r*p*v)*E,i[14]=(g*c*a-l*_*a-g*o*u+r*_*u+l*o*v-r*c*v)*E,i[15]=(l*p*a-d*c*a+d*o*u-r*p*u-l*o*f+r*c*f)*E,this},scale:function(e){var t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=1-i,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+i,l*a-n*s,l*s+n*a,0,l*a+n*s,c*a+i,c*s-n*o,0,l*s-n*a,c*s+n*o,r*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var n=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,g=a*u,_=s*l,v=s*c,y=s*u,A=i.x,b=i.y,x=i.z;return n[0]=(1-(f+g))*A,n[1]=(d+y)*A,n[2]=(p-v)*A,n[3]=0,n[4]=(d-y)*b,n[5]=(1-(h+g))*b,n[6]=(m+_)*b,n[7]=0,n[8]=(p+v)*x,n[9]=(m-_)*x,n[10]=(1-(h+f))*x,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(){var e=new Ht,t=new Ut;return function(i,n,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),i.x=o[12],i.y=o[13],i.z=o[14],t.copy(this);var c=1/a,u=1/s,h=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,n.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(t-e),l=2*r/(i-n),c=(t+e)/(t-e),u=(i+n)/(i-n),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,i,n,r,o){var a=this.elements,s=1/(t-e),l=1/(i-n),c=1/(o-r),u=(t+e)*s,h=(i+n)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,i=e.elements,n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(zt,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,o,a){var s=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||l!==d||c!==p){var m=1-a,g=s*h+l*d+c*p+u*f,_=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var y=Math.sqrt(v),A=Math.atan2(y,g*_);m=Math.sin(m*A)/y,a=Math.sin(a*A)/y}var b=a*_;if(s=s*m+h*b,l=l*m+d*b,c=c*m+p*b,u=u*m+f*b,m===1-a){var x=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=x,l*=x,c*=x,u*=x}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(zt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(zt.prototype,{set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(i/2),c=a(n/2),u=a(r/2),h=s(i/2),d=s(n/2),p=s(r/2);return"XYZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"YXZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"ZXY"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"ZYX"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"YZX"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p):"XZY"===o&&(this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,n=i[0],r=i[4],o=i[8],a=i[1],s=i[5],l=i[9],c=i[2],u=i[6],h=i[10],d=n+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-r)*t):n>s&&n>h?(t=2*Math.sqrt(1+n-s-h),this._w=(u-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-n-h),this._w=(o-c)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-n-s),this._w=(a-r)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Ht;return function(i,n){return void 0===t&&(t=new Ht),(e=i.dot(n)+1)<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Ot.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var i=this.angleTo(e);if(0===i)return this;var n=Math.min(1,t/i);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=i*c+o*a+n*l-r*s,this._y=n*c+o*s+r*a-i*l,this._z=r*c+o*l+i*s-n*a,this._w=o*c-i*a-n*s-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*e._w+i*e._x+n*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*i+t*this._x,this._y=l*n+t*this._y,this._z=l*r+t*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=n*h+this._y*d,this._z=r*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Ht.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new zt;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new zt;return function(t,i){return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*o,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*n-a*i,c=s*i+a*t-r*n,u=s*n+r*i-o*t,h=-r*t-o*i-a*n;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this},project:function(){var e=new Ut;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Ut;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Ht,t=new Ht;return function(i,n){return e.set(i,i,i),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Ht;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Ht;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ot.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Gt.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=n,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=i,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Ht;return function(t){for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,o=i[0],a=i[3],s=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],_=n[1],v=n[4],y=n[7],A=n[2],b=n[5],x=n[8];return r[0]=o*f+a*_+s*A,r[3]=o*m+a*v+s*b,r[6]=o*g+a*y+s*x,r[1]=l*f+c*_+u*A,r[4]=l*m+c*v+u*b,r[7]=l*g+c*y+u*x,r[2]=h*f+d*_+p*A,r[5]=h*m+d*v+p*b,r[8]=h*g+d*y+p*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-i*r*c+i*a*s+n*r*l-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements,n=this.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=d*l-c*h,f=c*u-d*s,m=h*s-l*u,g=r*p+o*f+a*m;if(0===g){var _="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(_);return console.warn(_),this.identity()}var v=1/g;return n[0]=p*v,n[1]=(a*h-d*o)*v,n[2]=(c*o-a*l)*v,n[3]=f*v,n[4]=(d*r-a*u)*v,n[5]=(a*s-c*r)*v,n[6]=m*v,n[7]=(o*u-h*r)*v,n[8]=(l*r-o*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(i*s,i*l,-i*(s*o+l*a)+o+e,-n*l,n*s,-n*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=this.elements,r=n[0],o=n[3],a=n[6],s=n[1],l=n[4],c=n[7];return n[0]=t*r+i*s,n[3]=t*o+i*l,n[6]=t*a+i*c,n[1]=-i*r+t*s,n[4]=-i*o+t*l,n[7]=-i*a+t*c,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){for(var t=this.elements,i=e.elements,n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var Vt={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{"undefined"!=typeof OffscreenCanvas?t=new OffscreenCanvas(e.width,e.height):((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height);var i=t.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Qt=0;function jt(e,t,i,n,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:Qt++}),this.uuid=Ot.generateUUID(),this.name="",this.image=void 0!==e?e:jt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:jt.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:ge,this.wrapT=void 0!==n?n:ge,this.magFilter=void 0!==r?r:be,this.minFilter=void 0!==o?o:we,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Fe,this.type=void 0!==s?s:Se,this.offset=new Ft(0,0),this.repeat=new Ft(1,1),this.center=new Ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Ct,this.version=0,this.onUpdate=null}function qt(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1}function Wt(e,t,i){this.width=e,this.height=t,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t),void 0===(i=i||{}).minFilter&&(i.minFilter=be),this.texture=new jt(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0===i.generateMipmaps||i.generateMipmaps,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function $t(e,t,i){Wt.call(this,e,t,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function Xt(e,t,i,n,r,o,a,s,l,c,u,h){jt.call(this,null,o,a,s,l,c,n,r,u,h),this.image={data:e,width:t,height:i},this.magFilter=void 0!==l?l:ve,this.minFilter=void 0!==c?c:ve,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Yt(e,t){this.min=void 0!==e?e:new Ht(1/0,1/0,1/0),this.max=void 0!==t?t:new Ht(-1/0,-1/0,-1/0)}function Kt(e,t){this.center=void 0!==e?e:new Ht,this.radius=void 0!==t?t:0}function Zt(e,t){this.normal=void 0!==e?e:new Ht(1,0,0),this.constant=void 0!==t?t:0}function Jt(e,t,i,n,r,o){this.planes=[void 0!==e?e:new Zt,void 0!==t?t:new Zt,void 0!==i?i:new Zt,void 0!==n?n:new Zt,void 0!==r?r:new Zt,void 0!==o?o:new Zt]}jt.DEFAULT_IMAGE=void 0,jt.DEFAULT_MAPPING=se,jt.prototype=Object.assign(Object.create(n.prototype),{constructor:jt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Ot.generateUUID()),!t&&void 0===e.images[n.uuid]){var r;if(Array.isArray(n)){r=[];for(var o=0,a=n.length;o<a;o++)r.push(Vt.getDataURL(n[o]))}else r=Vt.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===se){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case me:e.x=e.x-Math.floor(e.x);break;case ge:e.x=e.x<0?0:1;break;case _e:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case me:e.y=e.y-Math.floor(e.y);break;case ge:e.y=e.y<0?0:1;break;case _e:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(jt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(qt.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,n,r,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(u+1)/2,_=(f+1)/2,v=(s+c)/4,y=(l+d)/4,A=(h+p)/4;return m>g&&m>_?m<.01?(i=0,n=.707106781,r=.707106781):(n=v/(i=Math.sqrt(m)),r=y/i):g>_?g<.01?(i=.707106781,n=0,r=.707106781):(i=v/(n=Math.sqrt(g)),r=A/n):_<.01?(i=.707106781,n=.707106781,r=0):(i=y/(r=Math.sqrt(_)),n=A/r),this.set(i,n,r,t),this}var b=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-s)*(c-s));return Math.abs(b)<.001&&(b=1),this.x=(p-h)/b,this.y=(l-d)/b,this.z=(c-s)/b,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new qt,t=new qt),e.set(i,i,i,i),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Wt.prototype=Object.assign(Object.create(n.prototype),{constructor:Wt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$t.prototype=Object.create(Wt.prototype),$t.prototype.constructor=$t,$t.prototype.isWebGLRenderTargetCube=!0,Xt.prototype=Object.create(jt.prototype),Xt.prototype.constructor=Xt,Xt.prototype.isDataTexture=!0,Object.assign(Yt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],h=e[s+2];c<t&&(t=c),u<i&&(i=u),h<n&&(n=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,i,n),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),h=e.getZ(s);c<t&&(t=c),u<i&&(i=u),h<n&&(n=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,i,n),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ht;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ht),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ht),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,i,n=new Ht;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,i=a.length;t<i;t++)n.copy(a[t]),n.applyMatrix4(r.matrixWorld),e.expandByPoint(n)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,i=s.count;t<i;t++)n.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(n)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ht),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Ht;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=e.constant&&i>=e.constant},intersectsTriangle:function(){var e=new Ht,t=new Ht,i=new Ht,n=new Ht,r=new Ht,o=new Ht,a=new Ht,s=new Ht,l=new Ht,c=new Ht;function u(n){var r,o;for(r=0,o=n.length-3;r<=o;r+=3){a.fromArray(n,r);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),h=i.dot(a);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),i.subVectors(a.c,s),n.subVectors(t,e),r.subVectors(i,t),o.subVectors(e,i);var h=[0,-n.z,n.y,0,-r.z,r.y,0,-o.z,o.y,n.z,0,-n.x,r.z,0,-r.x,o.z,0,-o.x,-n.y,n.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!u(h)&&!!u(h=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(n,r),u(h=[c.x,c.y,c.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ht),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ht;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Ht;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new Kt),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,i=t[0]*this.min.x,n=t[1]*this.min.x,r=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,l=t[4]*this.min.y,c=t[5]*this.min.y,u=t[6]*this.min.y,h=t[4]*this.max.y,d=t[5]*this.max.y,p=t[6]*this.max.y,f=t[8]*this.min.z,m=t[9]*this.min.z,g=t[10]*this.min.z,_=t[8]*this.max.z,v=t[9]*this.max.z,y=t[10]*this.max.z;return this.min.x=Math.min(i,o)+Math.min(l,h)+Math.min(f,_)+t[12],this.min.y=Math.min(n,a)+Math.min(c,d)+Math.min(m,v)+t[13],this.min.z=Math.min(r,s)+Math.min(u,p)+Math.min(g,y)+t[14],this.max.x=Math.max(i,o)+Math.max(l,h)+Math.max(f,_)+t[12],this.max.y=Math.max(n,a)+Math.max(c,d)+Math.max(m,v)+t[13],this.max.z=Math.max(r,s)+Math.max(u,p)+Math.max(g,y)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Kt.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Yt;return function(t,i){var n=this.center;void 0!==i?n.copy(i):e.setFromPoints(t).getCenter(n);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Ht),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Yt),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Zt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Ht,t=new Ht;return function(i,n,r){var o=e.subVectors(r,n).cross(t.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Ht),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Ht;return function(t,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new Ht);var n=t.delta(e),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:i.copy(n).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Ht),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ht,t=new Gt;return function(i,n){var r=n||t.getNormalMatrix(i),o=this.coplanarPoint(e).applyMatrix4(i),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Jt.prototype,{set:function(e,t,i,n,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],c=i[6],u=i[7],h=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],_=i[14],v=i[15];return t[0].setComponents(a-n,u-s,f-h,v-m).normalize(),t[1].setComponents(a+n,u+s,f+h,v+m).normalize(),t[2].setComponents(a+r,u+l,f+d,v+g).normalize(),t[3].setComponents(a-r,u-l,f-d,v-g).normalize(),t[4].setComponents(a-o,u-c,f-p,v-_).normalize(),t[5].setComponents(a+o,u+c,f+p,v+_).normalize(),this},intersectsObject:function(){var e=new Kt;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Kt;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,n=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(i)<n)return!1;return!0},intersectsBox:function(){var e=new Ht;return function(t){for(var i=this.planes,n=0;n<6;n++){var r=i[n];if(e.x=r.normal.x>0?t.max.x:t.min.x,e.y=r.normal.y>0?t.max.y:t.min.y,e.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}});var ei={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},ti={merge:function(e){for(var t={},i=0;i<e.length;i++){var n=this.clone(e[i]);for(var r in n)t[r]=n[r]}return t},clone:function(e){var t={};for(var i in e)for(var n in t[i]={},e[i]){var r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}return t}},ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ni(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}Object.assign(ni.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,n){if(t=Ot.euclideanModulo(t,1),i=Ot.clamp(i,0,1),n=Ot.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;this.r=e(o,r,t+1/3),this.g=e(o,r,t),this.b=e(o,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(a,s,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=i[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(c=ii[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i,n=this.r,r=this.g,o=this.b,a=Math.max(n,r,o),s=Math.min(n,r,o),l=(s+a)/2;if(s===a)t=0,i=0;else{var c=a-s;switch(i=l<=.5?c/(a+s):c/(2-a-s),a){case n:t=(r-o)/c+(r<o?6:0);break;case r:t=(o-n)/c+2;break;case o:t=(n-r)/c+4}t/=6}return e.h=t,e.s=i,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,i,n){return this.getHSL(e),e.h+=t,e.s+=i,e.l+=n,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ri={common:{diffuse:{value:new ni(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ni(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ni(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Gt}},sprite:{diffuse:{value:new ni(15658734)},opacity:{value:1},center:{value:new Ft(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Gt}}},oi={basic:{uniforms:ti.merge([ri.common,ri.specularmap,ri.envmap,ri.aomap,ri.lightmap,ri.fog]),vertexShader:ei.meshbasic_vert,fragmentShader:ei.meshbasic_frag},lambert:{uniforms:ti.merge([ri.common,ri.specularmap,ri.envmap,ri.aomap,ri.lightmap,ri.emissivemap,ri.fog,ri.lights,{emissive:{value:new ni(0)}}]),vertexShader:ei.meshlambert_vert,fragmentShader:ei.meshlambert_frag},phong:{uniforms:ti.merge([ri.common,ri.specularmap,ri.envmap,ri.aomap,ri.lightmap,ri.emissivemap,ri.bumpmap,ri.normalmap,ri.displacementmap,ri.gradientmap,ri.fog,ri.lights,{emissive:{value:new ni(0)},specular:{value:new ni(1118481)},shininess:{value:30}}]),vertexShader:ei.meshphong_vert,fragmentShader:ei.meshphong_frag},standard:{uniforms:ti.merge([ri.common,ri.envmap,ri.aomap,ri.lightmap,ri.emissivemap,ri.bumpmap,ri.normalmap,ri.displacementmap,ri.roughnessmap,ri.metalnessmap,ri.fog,ri.lights,{emissive:{value:new ni(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag},points:{uniforms:ti.merge([ri.points,ri.fog]),vertexShader:ei.points_vert,fragmentShader:ei.points_frag},dashed:{uniforms:ti.merge([ri.common,ri.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ei.linedashed_vert,fragmentShader:ei.linedashed_frag},depth:{uniforms:ti.merge([ri.common,ri.displacementmap]),vertexShader:ei.depth_vert,fragmentShader:ei.depth_frag},normal:{uniforms:ti.merge([ri.common,ri.bumpmap,ri.normalmap,ri.displacementmap,{opacity:{value:1}}]),vertexShader:ei.normal_vert,fragmentShader:ei.normal_frag},sprite:{uniforms:ti.merge([ri.sprite,ri.fog]),vertexShader:ei.sprite_vert,fragmentShader:ei.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ei.cube_vert,fragmentShader:ei.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ei.equirect_vert,fragmentShader:ei.equirect_frag},distanceRGBA:{uniforms:ti.merge([ri.common,ri.displacementmap,{referencePosition:{value:new Ht},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ei.distanceRGBA_vert,fragmentShader:ei.distanceRGBA_frag},shadow:{uniforms:ti.merge([ri.lights,ri.fog,{color:{value:new ni(0)},opacity:{value:1}}]),vertexShader:ei.shadow_vert,fragmentShader:ei.shadow_frag}};function ai(){var e=null,t=!1,i=null;function n(r,o){!1!==t&&(i(r,o),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==i&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function si(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=t.get(i);void 0===r?t.set(i,function(t,i){var n=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(i,o),e.bufferData(i,n,r),t.onUploadCallback();var a=e.FLOAT;return n instanceof Float32Array?a=e.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=e.UNSIGNED_SHORT:n instanceof Int16Array?a=e.SHORT:n instanceof Uint32Array?a=e.UNSIGNED_INT:n instanceof Int32Array?a=e.INT:n instanceof Int8Array?a=e.BYTE:n instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(i,n)):r.version<i.version&&(function(t,i,n){var r=i.array,o=i.updateRange;e.bindBuffer(n,t),!1===i.dynamic?e.bufferData(n,r,e.STATIC_DRAW):-1===o.count?e.bufferSubData(n,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,i,n),r.version=i.version)}}}function li(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||li.DefaultOrder}function ci(){this.mask=1}oi.physical={uniforms:ti.merge([oi.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag},li.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],li.DefaultOrder="XYZ",Object.defineProperties(li.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(li.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=Ot.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Ut;return function(t,i,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new zt;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ht(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(ci.prototype,{set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return!!(this.mask&e.mask)}});var ui=0;function hi(){Object.defineProperty(this,"id",{value:ui++}),this.uuid=Ot.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hi.DefaultUp.clone();var e=new Ht,t=new li,i=new zt,n=new Ht(1,1,1);t.onChange((function(){i.setFromEuler(t,!1)})),i.onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new Ut},normalMatrix:{value:new Gt}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=hi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ci,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function di(){hi.call(this),this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut}function pi(e,t,i,n,r,o){di.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function fi(e,t,i,n,r,o){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new Ht,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new ni,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}hi.DefaultUp=new Ht(0,1,0),hi.DefaultMatrixAutoUpdate=!0,hi.prototype=Object.assign(Object.create(n.prototype),{constructor:hi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new zt;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new zt;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Ht(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Ht(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Ht(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Ht;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translateX:function(){var e=new Ht(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Ht(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Ht(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Ut;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Ut,t=new Ht;return function(i,n,r){i.isVector3?t.copy(i):t.set(i,n,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Ht),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Ht,t=new Ht;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new zt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldScale:function(){var e=new Ht,t=new zt;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new Ht),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new zt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Ht),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];r(e.shapes,c)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(r(e.materials,this.material[s]));n.material=u}else n.material=r(e.materials,this.material);if(this.children.length>0)for(n.children=[],s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object);if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes),h.length>0&&(i.geometries=h),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),f.length>0&&(i.images=f),a.length>0&&(i.shapes=a)}return i.object=n,i;function m(e){var t=[];for(var i in e){var n=e[i];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var n=e.children[i];this.add(n.clone())}return this}}),di.prototype=Object.assign(Object.create(hi.prototype),{constructor:di,isCamera:!0,copy:function(e,t){return hi.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new zt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Ht),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){hi.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),pi.prototype=Object.assign(Object.create(di.prototype),{constructor:pi,isOrthographicCamera:!0,copy:function(e,t){return di.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,o=i+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(r+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(a-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function(e){var t=hi.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(fi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var mi=0;function gi(){Object.defineProperty(this,"id",{value:mi+=2}),this.uuid=Ot.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function _i(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function vi(e,t,i){_i.call(this,new Int8Array(e),t,i)}function yi(e,t,i){_i.call(this,new Uint8Array(e),t,i)}function Ai(e,t,i){_i.call(this,new Uint8ClampedArray(e),t,i)}function bi(e,t,i){_i.call(this,new Int16Array(e),t,i)}function xi(e,t,i){_i.call(this,new Uint16Array(e),t,i)}function wi(e,t,i){_i.call(this,new Int32Array(e),t,i)}function Si(e,t,i){_i.call(this,new Uint32Array(e),t,i)}function Ci(e,t,i){_i.call(this,new Float32Array(e),t,i)}function Ei(e,t,i){_i.call(this,new Float64Array(e),t,i)}function Ti(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Mi(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}gi.prototype=Object.assign(Object.create(n.prototype),{constructor:gi,isGeometry:!0,applyMatrix:function(e){for(var t=(new Gt).getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);for(i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(t).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Ut;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ut;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ut;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ut;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new Ut;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new hi;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,i=null!==e.index?e.index.array:void 0,n=e.attributes,r=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=[],u=[],h=[],d=0,p=0;d<r.length;d+=3,p+=2)t.vertices.push(new Ht(r[d],r[d+1],r[d+2])),void 0!==o&&c.push(new Ht(o[d],o[d+1],o[d+2])),void 0!==a&&t.colors.push(new ni(a[d],a[d+1],a[d+2])),void 0!==s&&u.push(new Ft(s[p],s[p+1])),void 0!==l&&h.push(new Ft(l[p],l[p+1]));function f(e,i,n,r){var d=new fi(e,i,n,void 0!==o?[c[e].clone(),c[i].clone(),c[n].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()]:[],r);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[i].clone(),u[n].clone()]),void 0!==l&&t.faceVertexUvs[1].push([h[e].clone(),h[i].clone(),h[n].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var g=m[d],_=g.start,v=(p=_,_+g.count);p<v;p+=3)void 0!==i?f(i[p],i[p+1],i[p+2],g.materialIndex):f(p,p+1,p+2,g.materialIndex);else if(void 0!==i)for(d=0;d<i.length;d+=3)f(i[d],i[d+1],i[d+2]);else for(d=0;d<r.length/3;d+=3)f(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new Ht;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,n=new Ut;return n.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new Ht,t=new Ht,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,i,n,r,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,i=this.vertices.length;t<i;t++)a[t]=new Ht;if(e){var s,l,c,u=new Ht,h=new Ht;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),h.subVectors(s,l),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,i=this.vertices.length;t<i;t++)a[t].normalize();for(n=0,r=this.faces.length;n<r;n++){var d=(o=this.faces[n]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(i=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for((r=this.faces[i]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new gi;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)l=new Ht,c={a:new Ht,b:new Ht,c:new Ht},a.push(l),s.push(c)}var l,c,u=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,n=this.faces.length;i<n;i++)r=this.faces[i],l=u.faceNormals[i],c=u.vertexNormals[i],l.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)(r=this.faces[i]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Yt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Kt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===i&&(i=0),void 0!==t&&(n=(new Gt).getNormalMatrix(t));for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=l.length;p<f;p++){var g,_,v,y=l[p],A=y.vertexNormals,b=y.vertexColors;(g=new fi(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var x=0,w=A.length;x<w;x++)_=A[x].clone(),void 0!==n&&_.applyMatrix3(n).normalize(),g.vertexNormals.push(_);for(g.color.copy(y.color),x=0,w=b.length;x<w;x++)v=b[x],g.vertexColors.push(v.clone());g.materialIndex=y.materialIndex+i,s.push(g)}for(p=0,f=u.length;p<f;p++){var S=u[p],C=[];if(void 0!==S){for(x=0,w=S.length;x<w;x++)C.push(S[x].clone());c.push(C)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,i,n,r,o,a,s,l={},c=[],u=[],h=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)e=this.vertices[i],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=i,c.push(this.vertices[i]),u[i]=c.length-1):u[i]=u[l[t]];var d=[];for(i=0,n=this.faces.length;i<n;i++){(r=this.faces[i]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(i);break}}for(i=d.length-1;i>=0;i--){var f=d[i];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];this.vertices.push(new Ht(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var n,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(n=[]),a&&a.length===t&&(r=[]),i=0;i<t;i++){var s=e[i]._id;n&&n.push(o[s]),r&&r.push(a[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}for(var n=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];n.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,_=1!==p.color.r||1!==p.color.g||1!==p.color.b,v=p.vertexColors.length>0,y=0;if(y=w(y=w(y=w(y=w(y=w(y=w(y=w(y=w(y,0,0),1,!0),2,!1),3,f),4,m),5,g),6,_),7,v),a.push(y),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var A=this.faceVertexUvs[0][r];a.push(E(A[0]),E(A[1]),E(A[2]))}if(m&&a.push(S(p.normal)),g){var b=p.vertexNormals;a.push(S(b[0]),S(b[1]),S(b[2]))}if(_&&a.push(C(p.color)),v){var x=p.vertexColors;a.push(C(x[0]),C(x[1]),C(x[2]))}}function w(e,t,i){return i?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function C(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=c.length,c.push(e.getHex())),u[t]}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=n,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new gi).copy(this)},copy:function(e){var t,i,n,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,i=s.length;t<i;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,i=l.length;t<i;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,i=c.length;t<i;t++)this.faces.push(c[t].clone());for(t=0,i=e.faceVertexUvs.length;t<i;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,r=u.length;n<r;n++){var h=u[n],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,i=f.length;t<i;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],n=0,r=f[t].vertices.length;n<r;n++)m.vertices.push(f[t].vertices[n].clone());if(void 0!==f[t].normals)for(m.normals=[],n=0,r=f[t].normals.length;n<r;n++)m.normals.push(f[t].normals[n].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,i=g.length;t<i;t++){var _={};if(void 0!==g[t].vertexNormals)for(_.vertexNormals=[],n=0,r=g[t].vertexNormals.length;n<r;n++){var v=g[t].vertexNormals[n],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),_.vertexNormals.push(y)}if(void 0!==g[t].faceNormals)for(_.faceNormals=[],n=0,r=g[t].faceNormals.length;n<r;n++)_.faceNormals.push(g[t].faceNormals[n].clone());this.morphNormals.push(_)}var A=e.skinWeights;for(t=0,i=A.length;t<i;t++)this.skinWeights.push(A[t].clone());var b=e.skinIndices;for(t=0,i=b.length;t<i;t++)this.skinIndices.push(b[t].clone());var x=e.lineDistances;for(t=0,i=x.length;t<i;t++)this.lineDistances.push(x[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(_i.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(_i.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new ni),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Ft),t[i++]=o.x,t[i++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Ht),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new qt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),vi.prototype=Object.create(_i.prototype),vi.prototype.constructor=vi,yi.prototype=Object.create(_i.prototype),yi.prototype.constructor=yi,Ai.prototype=Object.create(_i.prototype),Ai.prototype.constructor=Ai,bi.prototype=Object.create(_i.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(_i.prototype),xi.prototype.constructor=xi,wi.prototype=Object.create(_i.prototype),wi.prototype.constructor=wi,Si.prototype=Object.create(_i.prototype),Si.prototype.constructor=Si,Ci.prototype=Object.create(_i.prototype),Ci.prototype.constructor=Ci,Ei.prototype=Object.create(_i.prototype),Ei.prototype.constructor=Ei,Object.assign(Ti.prototype,{computeGroups:function(e){for(var t,i=[],n=void 0,r=e.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,i.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,n=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){for(u=[],c=0;c<d;c++)u[c]=[];this.morphTargets.normal=u}var p=e.skinIndices,f=e.skinWeights,m=p.length===n.length,g=f.length===n.length;for(n.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<i.length;c++){var _=i[c];this.vertices.push(n[_.a],n[_.b],n[_.c]);var v=_.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var y=_.normal;this.normals.push(y,y,y)}var A,b=_.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var x=_.color;this.colors.push(x,x,x)}!0===o&&(void 0!==(A=r[0][c])?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Ft,new Ft,new Ft))),!0===a&&(void 0!==(A=r[1][c])?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Ft,new Ft,new Ft)));for(var w=0;w<l;w++){var S=s[w].vertices;t[w].push(S[_.a],S[_.b],S[_.c])}for(w=0;w<d;w++){var C=h[w].vertexNormals[c];u[w].push(C.a,C.b,C.c)}m&&this.skinIndices.push(p[_.a],p[_.b],p[_.c]),g&&this.skinWeights.push(f[_.a],f[_.b],f[_.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ii=1;function Bi(){Object.defineProperty(this,"id",{value:Ii+=2}),this.uuid=Ot.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ri(e,t,i,n,r,o){gi.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Pi(e,t,i,n,r,o)),this.mergeVertices()}function Pi(e,t,i,n,r,o){Bi.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var a=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1;var s=[],l=[],c=[],u=[],h=0,d=0;function p(e,t,i,n,r,o,p,f,m,g,_){var v,y,A=o/m,b=p/g,x=o/2,w=p/2,S=f/2,C=m+1,E=g+1,T=0,M=0,I=new Ht;for(y=0;y<E;y++){var B=y*b-w;for(v=0;v<C;v++){var R=v*A-x;I[e]=R*n,I[t]=B*r,I[i]=S,l.push(I.x,I.y,I.z),I[e]=0,I[t]=0,I[i]=f>0?1:-1,c.push(I.x,I.y,I.z),u.push(v/m),u.push(1-y/g),T+=1}}for(y=0;y<g;y++)for(v=0;v<m;v++){var P=h+v+C*y,k=h+v+C*(y+1),L=h+(v+1)+C*(y+1),D=h+(v+1)+C*y;s.push(P,k,D),s.push(k,L,D),M+=6}a.addGroup(d,M,_),d+=M,h+=T}p("z","y","x",-1,-1,i,t,e,o=Math.floor(o)||1,r,0),p("z","y","x",1,-1,i,t,-e,o,r,1),p("x","z","y",1,1,e,i,t,n,o,2),p("x","z","y",1,-1,e,i,-t,n,o,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(s),this.addAttribute("position",new Ci(l,3)),this.addAttribute("normal",new Ci(c,3)),this.addAttribute("uv",new Ci(u,2))}function ki(e,t,i,n){gi.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Li(e,t,i,n)),this.mergeVertices()}function Li(e,t,i,n){Bi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(i)||1,c=Math.floor(n)||1,u=l+1,h=c+1,d=e/l,p=t/c,f=[],m=[],g=[],_=[];for(o=0;o<h;o++){var v=o*p-s;for(r=0;r<u;r++){var y=r*d-a;m.push(y,-v,0),g.push(0,0,1),_.push(r/l),_.push(1-o/c)}}for(o=0;o<c;o++)for(r=0;r<l;r++){var A=r+u*o,b=r+u*(o+1),x=r+1+u*(o+1),w=r+1+u*o;f.push(A,b,w),f.push(b,x,w)}this.setIndex(f),this.addAttribute("position",new Ci(m,3)),this.addAttribute("normal",new Ci(g,3)),this.addAttribute("uv",new Ci(_,2))}Bi.prototype=Object.assign(Object.create(n.prototype),{constructor:Bi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Mi(e)>65535?Si:xi)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new _i(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;return void 0!==i&&((new Gt).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Ut;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ut;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ut;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ut;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new Ut;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new hi;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Ht;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new Ci(3*t.vertices.length,3),n=new Ci(3*t.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Ci(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Ci(t,3)),this},updateFromObject:function(e){var t,i=e.geometry;if(e.isMesh){var n=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(n=void 0,i.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(i);n.verticesNeedUpdate=i.verticesNeedUpdate,n.normalsNeedUpdate=i.normalsNeedUpdate,n.colorsNeedUpdate=i.colorsNeedUpdate,n.uvsNeedUpdate=i.uvsNeedUpdate,n.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=n}return!0===i.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(i.vertices),t.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(i.normals),t.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(i.colors),t.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(i.uvs),t.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(i.lineDistances),t.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(e.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ti).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new _i(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new _i(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new _i(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new _i(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new _i(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],d=new Ci(3*h.length,3);s.push(d.copyVector3sArray(h))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Ci(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Ci(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Yt);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Yt,t=new Ht;return function(){null===this.boundingSphere&&(this.boundingSphere=new Kt);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;e.setFromBufferAttribute(i),e.getCenter(n);for(var r=0,o=0,a=i.count;o<a;o++)t.x=i.getX(o),t.y=i.getY(o),t.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new _i(new Float32Array(n.length),3));else for(var r=t.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var s,l,c,u=t.normal.array,h=new Ht,d=new Ht,p=new Ht,f=new Ht,m=new Ht;if(e){var g=e.array;0===i.length&&this.addGroup(0,g.length);for(var _=0,v=i.length;_<v;++_){var y=i[_],A=y.start;for(o=A,a=A+y.count;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],c=3*g[o+2],h.fromArray(n,s),d.fromArray(n,l),p.fromArray(n,c),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z}}else for(o=0,a=n.length;o<a;o+=9)h.fromArray(n,o),d.fromArray(n,o+3),p.fromArray(n,o+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[o]=f.x,u[o+1]=f.y,u[o+2]=f.z,u[o+3]=f.x,u[o+4]=f.y,u[o+5]=f.z,u[o+6]=f.x,u[o+7]=f.y,u[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var n in i)if(void 0!==e.attributes[n])for(var r=i[n].array,o=e.attributes[n],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)r[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Ht;return function(){for(var t=this.attributes.normal,i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.normalize(),t.setXYZ(i,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Bi,t=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],o=r.array,a=r.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,h=t.length;u<h;u++){l=t[u]*a;for(var d=0;d<a;d++)s[c++]=o[l++]}e.addAttribute(n,new _i(s,a))}var p=this.groups;for(u=0,h=p.length;u<h;u++){var f=p[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var a=o[i];r=Array.prototype.slice.call(a.array),e.data.attributes[i]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Bi).copy(this)},copy:function(e){var t,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],c=s[t];for(i=0,n=c.length;i<n;i++)l.push(c[i].clone());this.morphAttributes[t]=l}var u=e.groups;for(i=0,n=u.length;i<n;i++){var h=u[i];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ri.prototype=Object.create(gi.prototype),Ri.prototype.constructor=Ri,Pi.prototype=Object.create(Bi.prototype),Pi.prototype.constructor=Pi,ki.prototype=Object.create(gi.prototype),ki.prototype.constructor=ki,Li.prototype=Object.create(Bi.prototype),Li.prototype.constructor=Li;var Di=0;function Ni(){Object.defineProperty(this,"id",{value:Di++}),this.uuid=Ot.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=S,this.side=m,this.flatShading=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=F,this.blendDst=U,this.blendEquation=I,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Oi(e){Ni.call(this),this.type="MeshBasicMaterial",this.color=new ni(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Fi(e){Ni.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ui(e,t){this.origin=void 0!==e?e:new Ht,this.direction=void 0!==t?t:new Ht}function zi(e,t,i){this.a=void 0!==e?e:new Ht,this.b=void 0!==t?t:new Ht,this.c=void 0!==i?i:new Ht}function Hi(e,t){hi.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Bi,this.material=void 0!==t?t:new Oi({color:16777215*Math.random()}),this.drawMode=xt,this.updateMorphTargets()}function Gi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Vi(e,t,i,n,r,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:le,jt.call(this,e,t,i,n,r,o,a,s,l,c),this.flipY=!1}Ni.prototype=Object.assign(Object.create(n.prototype),{constructor:Ni,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]="overdraw"===t?Number(i):i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===v;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var i in e){var n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==S&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==m&&(i.side=this.side),this.vertexColors!==A&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){var r=n(e.textures),o=n(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var n=t.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Oi.prototype=Object.create(Ni.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isMeshBasicMaterial=!0,Oi.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Fi.prototype=Object.create(Ni.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isShaderMaterial=!0,Fi.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ti.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Fi.prototype.toJSON=function(e){var t=Ni.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Ui.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Ht),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Ht;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Ht),t.subVectors(e,this.origin);var i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ht;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Ht,t=new Ht,i=new Ht;return function(n,r,o,a){e.copy(n).add(r).multiplyScalar(.5),t.copy(r).sub(n).normalize(),i.copy(this.origin).sub(e);var s,l,c,u,h=.5*n.distanceTo(r),d=-this.direction.dot(t),p=i.dot(this.direction),f=-i.dot(t),m=i.lengthSq(),g=Math.abs(1-d*d);if(g>0)if(l=d*p-f,u=h*g,(s=d*f-p)>=0)if(l>=-u)if(l<=u){var _=1/g;c=(s*=_)*(s+d*(l*=_)+2*p)+l*(d*s+l+2*f)+m}else l=h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;else l=-h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;else l<=-u?c=-(s=Math.max(0,-(-d*h+p)))*s+(l=s>0?-h:Math.min(Math.max(-h,-f),h))*(l+2*f)+m:l<=u?(s=0,c=(l=Math.min(Math.max(-h,-f),h))*(l+2*f)+m):c=-(s=Math.max(0,-(d*h+p)))*s+(l=s>0?h:Math.min(Math.max(-h,-f),h))*(l+2*f)+m;else l=d>0?-h:h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),c}}(),intersectSphere:function(){var e=new Ht;return function(t,i){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),r=e.dot(e)-n*n,o=t.radius*t.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=n-a,l=n+a;return s<0&&l<0?null:s<0?this.at(l,i):this.at(s,i)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i,n,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||r>n?null:((r>i||i!=i)&&(i=r),(o<n||n!=n)&&(n=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),i>s||a>n?null:((a>i||i!=i)&&(i=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(i>=0?i:n,t)))},intersectsBox:function(){var e=new Ht;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Ht,t=new Ht,i=new Ht,n=new Ht;return function(r,o,a,s,l){t.subVectors(o,r),i.subVectors(a,r),n.crossVectors(t,i);var c,u=this.direction.dot(n);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,r);var h=c*this.direction.dot(i.crossVectors(e,i));if(h<0)return null;var d=c*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var p=-c*e.dot(n);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(zi,{getNormal:function(){var e=new Ht;return function(t,i,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ht),r.subVectors(n,i),e.subVectors(t,i),r.cross(e);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new Ht,t=new Ht,i=new Ht;return function(n,r,o,a,s){e.subVectors(a,r),t.subVectors(o,r),i.subVectors(n,r);var l=e.dot(e),c=e.dot(t),u=e.dot(i),h=t.dot(t),d=t.dot(i),p=l*h-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Ht),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*u-c*d)*f,g=(l*d-c*u)*f;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new Ht;return function(t,i,n,r){return zi.getBarycoord(t,i,n,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(zi.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Ht,t=new Ht;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Ht),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return zi.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ht),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return zi.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return zi.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Ht,t=new Ht,i=new Ht,n=new Ht,r=new Ht,o=new Ht;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new Ht);var l,c,u=this.a,h=this.b,d=this.c;e.subVectors(h,u),t.subVectors(d,u),n.subVectors(a,u);var p=e.dot(n),f=t.dot(n);if(p<=0&&f<=0)return s.copy(u);r.subVectors(a,h);var m=e.dot(r),g=t.dot(r);if(m>=0&&g<=m)return s.copy(h);var _=p*g-m*f;if(_<=0&&p>=0&&m<=0)return l=p/(p-m),s.copy(u).addScaledVector(e,l);o.subVectors(a,d);var v=e.dot(o),y=t.dot(o);if(y>=0&&v<=y)return s.copy(d);var A=v*f-p*y;if(A<=0&&f>=0&&y<=0)return c=f/(f-y),s.copy(u).addScaledVector(t,c);var b=m*y-v*g;if(b<=0&&g-m>=0&&v-y>=0)return i.subVectors(d,h),c=(g-m)/(g-m+(v-y)),s.copy(h).addScaledVector(i,c);var x=1/(b+A+_);return l=A*x,c=_*x,s.copy(u).addScaledVector(e,l).addScaledVector(t,c)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Hi.prototype=Object.assign(Object.create(hi.prototype),{constructor:Hi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return hi.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,i,n=this.geometry;if(n.isBufferGeometry){var r=n.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)i=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)i=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}},raycast:function(){var e=new Ut,t=new Ui,i=new Kt,n=new Ht,r=new Ht,o=new Ht,a=new Ht,s=new Ht,l=new Ht,c=new Ft,u=new Ft,h=new Ft,d=new Ht,p=new Ht,f=new Ht;function m(e,t,i,n,r,o,a){return zi.getBarycoord(e,t,i,n,d),r.multiplyScalar(d.x),o.multiplyScalar(d.y),a.multiplyScalar(d.z),r.add(o).add(a),r.clone()}function v(e,t,i,n,r,o,a,s){if(null===(t.side===g?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,t.side!==_,s)))return null;f.copy(s),f.applyMatrix4(e.matrixWorld);var l=i.ray.origin.distanceTo(f);return l<i.near||l>i.far?null:{distance:l,point:f.clone(),object:e}}function y(e,t,i,a,s,l,d,f,g){n.fromBufferAttribute(s,d),r.fromBufferAttribute(s,f),o.fromBufferAttribute(s,g);var _=v(e,t,i,a,n,r,o,p);if(_){l&&(c.fromBufferAttribute(l,d),u.fromBufferAttribute(l,f),h.fromBufferAttribute(l,g),_.uv=m(p,n,r,o,c,u,h));var y=new fi(d,f,g);zi.getNormal(n,r,o,y.normal),_.face=y}return _}return function(d,f){var g,_=this.geometry,A=this.material,b=this.matrixWorld;if(void 0!==A&&(null===_.boundingSphere&&_.computeBoundingSphere(),i.copy(_.boundingSphere),i.applyMatrix4(b),!1!==d.ray.intersectsSphere(i)&&(e.getInverse(b),t.copy(d.ray).applyMatrix4(e),null===_.boundingBox||!1!==t.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var x,w,S,C,E,T,M,I,B,R=_.index,P=_.attributes.position,k=_.attributes.uv,L=_.groups,D=_.drawRange;if(null!==R)if(Array.isArray(A))for(C=0,T=L.length;C<T;C++)for(B=A[(I=L[C]).materialIndex],E=Math.max(I.start,D.start),M=Math.min(I.start+I.count,D.start+D.count);E<M;E+=3)x=R.getX(E),w=R.getX(E+1),S=R.getX(E+2),(g=y(this,B,d,t,P,k,x,w,S))&&(g.faceIndex=Math.floor(E/3),f.push(g));else for(C=Math.max(0,D.start),T=Math.min(R.count,D.start+D.count);C<T;C+=3)x=R.getX(C),w=R.getX(C+1),S=R.getX(C+2),(g=y(this,A,d,t,P,k,x,w,S))&&(g.faceIndex=Math.floor(C/3),f.push(g));else if(void 0!==P)if(Array.isArray(A))for(C=0,T=L.length;C<T;C++)for(B=A[(I=L[C]).materialIndex],E=Math.max(I.start,D.start),M=Math.min(I.start+I.count,D.start+D.count);E<M;E+=3)(g=y(this,B,d,t,P,k,x=E,w=E+1,S=E+2))&&(g.faceIndex=Math.floor(E/3),f.push(g));else for(C=Math.max(0,D.start),T=Math.min(P.count,D.start+D.count);C<T;C+=3)(g=y(this,A,d,t,P,k,x=C,w=C+1,S=C+2))&&(g.faceIndex=Math.floor(C/3),f.push(g))}else if(_.isGeometry){var N,O,F,U,z=Array.isArray(A),H=_.vertices,G=_.faces,V=_.faceVertexUvs[0];V.length>0&&(U=V);for(var Q=0,j=G.length;Q<j;Q++){var q=G[Q],W=z?A[q.materialIndex]:A;if(void 0!==W){if(N=H[q.a],O=H[q.b],F=H[q.c],!0===W.morphTargets){var $=_.morphTargets,X=this.morphTargetInfluences;n.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var Y=0,K=$.length;Y<K;Y++){var Z=X[Y];if(0!==Z){var J=$[Y].vertices;n.addScaledVector(a.subVectors(J[q.a],N),Z),r.addScaledVector(s.subVectors(J[q.b],O),Z),o.addScaledVector(l.subVectors(J[q.c],F),Z)}}n.add(N),r.add(O),o.add(F),N=n,O=r,F=o}if(g=v(this,W,d,t,N,O,F,p)){if(U&&U[Q]){var ee=U[Q];c.copy(ee[0]),u.copy(ee[1]),h.copy(ee[2]),g.uv=m(p,N,O,F,c,u,h)}g.face=q,g.faceIndex=Q,f.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Vi.prototype=Object.create(jt.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isCubeTexture=!0,Object.defineProperty(Vi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Qi=new jt,ji=new Vi;function qi(){this.seq=[],this.map={}}var Wi=[],$i=[],Xi=new Float32Array(16),Yi=new Float32Array(9),Ki=new Float32Array(4);function Zi(e,t,i){var n=e[0];if(n<=0||n>0)return e;var r=t*i,o=Wi[r];if(void 0===o&&(o=new Float32Array(r),Wi[r]=o),0!==t){n.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=i,e[a].toArray(o,s)}return o}function Ji(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function en(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function tn(e,t){var i=$i[t];void 0===i&&(i=new Int32Array(t),$i[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function nn(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function rn(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function on(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ji(i,t))return;e.uniform2fv(this.addr,t),en(i,t)}}function an(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Ji(i,t))return;e.uniform3fv(this.addr,t),en(i,t)}}function sn(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ji(i,t))return;e.uniform4fv(this.addr,t),en(i,t)}}function ln(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(Ji(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),en(i,t)}else{if(Ji(i,n))return;Ki.set(n),e.uniformMatrix2fv(this.addr,!1,Ki),en(i,n)}}function cn(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(Ji(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),en(i,t)}else{if(Ji(i,n))return;Yi.set(n),e.uniformMatrix3fv(this.addr,!1,Yi),en(i,n)}}function un(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(Ji(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),en(i,t)}else{if(Ji(i,n))return;Xi.set(n),e.uniformMatrix4fv(this.addr,!1,Xi),en(i,n)}}function hn(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||Qi,r)}function dn(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||ji,r)}function pn(e,t){var i=this.cache;Ji(i,t)||(e.uniform2iv(this.addr,t),en(i,t))}function fn(e,t){var i=this.cache;Ji(i,t)||(e.uniform3iv(this.addr,t),en(i,t))}function mn(e,t){var i=this.cache;Ji(i,t)||(e.uniform4iv(this.addr,t),en(i,t))}function gn(e,t){var i=this.cache;Ji(i,t)||(e.uniform1fv(this.addr,t),en(i,t))}function _n(e,t){var i=this.cache;Ji(i,t)||(e.uniform1iv(this.addr,t),en(i,t))}function vn(e,t){var i=this.cache,n=Zi(t,this.size,2);Ji(i,n)||(e.uniform2fv(this.addr,n),this.updateCache(n))}function yn(e,t){var i=this.cache,n=Zi(t,this.size,3);Ji(i,n)||(e.uniform3fv(this.addr,n),this.updateCache(n))}function An(e,t){var i=this.cache,n=Zi(t,this.size,4);Ji(i,n)||(e.uniform4fv(this.addr,n),this.updateCache(n))}function bn(e,t){var i=this.cache,n=Zi(t,this.size,4);Ji(i,n)||(e.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function xn(e,t){var i=this.cache,n=Zi(t,this.size,9);Ji(i,n)||(e.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function wn(e,t){var i=this.cache,n=Zi(t,this.size,16);Ji(i,n)||(e.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function Sn(e,t,i){var n=this.cache,r=t.length,o=tn(i,r);!1===Ji(n,o)&&(e.uniform1iv(this.addr,o),en(n,o));for(var a=0;a!==r;++a)i.setTexture2D(t[a]||Qi,o[a])}function Cn(e,t,i){var n=this.cache,r=t.length,o=tn(i,r);!1===Ji(n,o)&&(e.uniform1iv(this.addr,o),en(n,o));for(var a=0;a!==r;++a)i.setTextureCube(t[a]||ji,o[a])}function En(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return nn;case 35664:return on;case 35665:return an;case 35666:return sn;case 35674:return ln;case 35675:return cn;case 35676:return un;case 35678:case 36198:return hn;case 35680:return dn;case 5124:case 35670:return rn;case 35667:case 35671:return pn;case 35668:case 35672:return fn;case 35669:case 35673:return mn}}(t.type)}function Tn(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return gn;case 35664:return vn;case 35665:return yn;case 35666:return An;case 35674:return bn;case 35675:return xn;case 35676:return wn;case 35678:return Sn;case 35680:return Cn;case 5124:case 35670:return _n;case 35667:case 35671:return pn;case 35668:case 35672:return fn;case 35669:case 35673:return mn}}(t.type)}function Mn(e){this.id=e,qi.call(this)}Tn.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),en(t,e)},Mn.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,o=n.length;r!==o;++r){var a=n[r];a.setValue(e,t[a.id],i)}};var In=/([\w\d_]+)(\])?(\[|\.)?/g;function Bn(e,t){e.seq.push(t),e.map[t.id]=t}function Rn(e,t,i){var n=e.name,r=n.length;for(In.lastIndex=0;;){var o=In.exec(n),a=In.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Bn(i,void 0===c?new En(s,e,t):new Tn(s,e,t));break}var u=i.map[s];void 0===u&&Bn(i,u=new Mn(s)),i=u}}function Pn(e,t,i){qi.call(this),this.renderer=i;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;++r){var o=e.getActiveUniform(t,r);Rn(o,e.getUniformLocation(t,o.name),this)}}function kn(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}(i)),n}Pn.prototype.setValue=function(e,t,i){var n=this.map[t];void 0!==n&&n.setValue(e,i,this.renderer)},Pn.prototype.setOptional=function(e,t,i){var n=t[i];void 0!==n&&this.setValue(e,i,n)},Pn.upload=function(e,t,i,n){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},Pn.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var o=e[n];o.id in t&&i.push(o)}return i};var Ln=0;function Dn(e){switch(e){case Ct:return["Linear","( value )"];case Et:return["sRGB","( value )"];case Mt:return["RGBE","( value )"];case Bt:return["RGBM","( value, 7.0 )"];case Rt:return["RGBM","( value, 16.0 )"];case Pt:return["RGBD","( value, 256.0 )"];case Tt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Nn(e,t){var i=Dn(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function On(e){return""!==e}function Fn(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Un(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function zn(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var i=ei[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return zn(i)}))}function Hn(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,i,n){for(var r="",o=parseInt(t);o<parseInt(i);o++)r+=n.replace(/\[ i \]/g,"[ "+o+" ]");return r}))}function Gn(e,t,i,n,r,o,a){var s=e.context,l=n.defines,c=r.vertexShader,u=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===p?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===f&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case le:case ce:d="ENVMAP_TYPE_CUBE";break;case pe:case fe:d="ENVMAP_TYPE_CUBE_UV";break;case ue:case he:d="ENVMAP_TYPE_EQUIREC";break;case de:d="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case ce:case he:m="ENVMAP_MODE_REFRACTION"}switch(n.combine){case J:g="ENVMAP_BLENDING_MULTIPLY";break;case ee:g="ENVMAP_BLENDING_MIX";break;case te:g="ENVMAP_BLENDING_ADD"}}var _,v,y=e.gammaFactor>0?e.gammaFactor:1,A=a.isWebGL2?"":function(e,t,i){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(On).join("\n")}(n.extensions,o,t),b=function(e){var t=[];for(var i in e){var n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(l),x=s.createProgram();if(n.isRawShaderMaterial?((_=[b].filter(On).join("\n")).length>0&&(_+="\n"),(v=[A,b].filter(On).join("\n")).length>0&&(v+="\n")):(_=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(On).join("\n"),v=[A,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+m:"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ie?"#define TONE_MAPPING":"",o.toneMapping!==ie?ei.tonemapping_pars_fragment:"",o.toneMapping!==ie?function(e,t){var i;switch(t){case ne:i="Linear";break;case re:i="Reinhard";break;case oe:i="Uncharted2";break;case ae:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+i+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?ei.encodings_pars_fragment:"",o.mapEncoding?Nn("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Nn("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Nn("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var i=Dn(t);return"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}(0,o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(On).join("\n")),c=Un(c=Fn(c=zn(c),o),o),u=Un(u=Fn(u=zn(u),o),o),c=Hn(c),u=Hn(u),a.isWebGL2&&!n.isRawShaderMaterial){var w=!1,S=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==c.match(S)&&null!==u.match(S)&&(w=!0,c=c.replace(S,""),u=u.replace(S,"")),_=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,v=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var C=_+c,E=v+u,T=kn(s,s.VERTEX_SHADER,C),M=kn(s,s.FRAGMENT_SHADER,E);s.attachShader(x,T),s.attachShader(x,M),void 0!==n.index0AttributeName?s.bindAttribLocation(x,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var I,B,R=s.getProgramInfoLog(x).trim(),P=s.getShaderInfoLog(T).trim(),k=s.getShaderInfoLog(M).trim(),L=!0,D=!0;return!1===s.getProgramParameter(x,s.LINK_STATUS)?(L=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(x,s.VALIDATE_STATUS),"gl.getProgramInfoLog",R,P,k)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==P&&""!==k||(D=!1),D&&(this.diagnostics={runnable:L,material:n,programLog:R,vertexShader:{log:P,prefix:_},fragmentShader:{log:k,prefix:v}}),s.deleteShader(T),s.deleteShader(M),this.getUniforms=function(){return void 0===I&&(I=new Pn(s,x,e)),I},this.getAttributes=function(){return void 0===B&&(B=function(e,t){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var o=e.getActiveAttrib(t,r).name;i[o]=e.getAttribLocation(t,o)}return i}(s,x)),B},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Ln++,this.code=i,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=M,this}function Vn(e,t,i){var n=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var i;return e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=Ct,i===Ct&&t&&(i=Tt),i}this.getParameters=function(t,n,o,s,l,c,u){var h=r[t.type],d=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(i.floatVertexTextures)return 1024;var n=i.maxVertexUniforms,r=Math.floor((n-20)/4),o=Math.min(r,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(u):0,p=i.precision;null!==t.precision&&(p=i.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:a(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===pe||t.envMap.mapping===fe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Nt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===_,flipSided:t.side===g,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var a=0;a<o.length;a++)n.push(i[o[a]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.join()},this.acquireProgram=function(r,o,a,s){for(var l,c=0,u=n.length;c<u;c++){var h=n[c];if(h.code===s){++(l=h).usedTimes;break}}return void 0===l&&(l=new Gn(e,t,s,r,o,a,i),n.push(l)),l},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function Qn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function jn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function qn(){var e={};return{get:function(t,i){var n=t.id+","+i.id,r=e[n];return void 0===r&&(r=new function(){var e=[],t=0,i=[],n=[];return{opaque:i,transparent:n,init:function(){t=0,i.length=0,n.length=0},push:function(r,o,a,s,l){var c=e[t];void 0===c?(c={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},e[t]=c):(c.id=r.id,c.object=r,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=s,c.group=l),(!0===a.transparent?n:i).push(c),t++},sort:function(){i.length>1&&i.sort(Qn),n.length>1&&n.sort(jn)}}},e[n]=r),r},dispose:function(){e={}}}}var Wn,$n=0;function Xn(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new Ht,color:new ni,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"SpotLight":i={position:new Ht,direction:new Ht,color:new ni,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"PointLight":i={position:new Ht,color:new ni,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ft,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new Ht,skyColor:new ni,groundColor:new ni};break;case"RectAreaLight":i={color:new ni,position:new Ht,halfWidth:new Ht,halfHeight:new Ht}}return e[t.id]=i,i}}},t={id:$n++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new Ht,n=new Ut,r=new Ut;return{setup:function(o,a,s){for(var l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=s.matrixWorldInverse,_=0,v=o.length;_<v;_++){var y=o[_],A=y.color,b=y.intensity,x=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=A.r*b,c+=A.g*b,u+=A.b*b;else if(y.isDirectionalLight){if((C=e.get(y)).color.copy(y.color).multiplyScalar(y.intensity),C.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(g),C.shadow=y.castShadow,y.castShadow){var S=y.shadow;C.shadowBias=S.bias,C.shadowRadius=S.radius,C.shadowMapSize=S.mapSize}t.directionalShadowMap[h]=w,t.directionalShadowMatrix[h]=y.shadow.matrix,t.directional[h]=C,h++}else if(y.isSpotLight)(C=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),C.position.applyMatrix4(g),C.color.copy(A).multiplyScalar(b),C.distance=x,C.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(g),C.coneCos=Math.cos(y.angle),C.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),C.decay=0===y.distance?0:y.decay,C.shadow=y.castShadow,y.castShadow&&(S=y.shadow,C.shadowBias=S.bias,C.shadowRadius=S.radius,C.shadowMapSize=S.mapSize),t.spotShadowMap[p]=w,t.spotShadowMatrix[p]=y.shadow.matrix,t.spot[p]=C,p++;else if(y.isRectAreaLight)(C=e.get(y)).color.copy(A).multiplyScalar(b),C.position.setFromMatrixPosition(y.matrixWorld),C.position.applyMatrix4(g),r.identity(),n.copy(y.matrixWorld),n.premultiply(g),r.extractRotation(n),C.halfWidth.set(.5*y.width,0,0),C.halfHeight.set(0,.5*y.height,0),C.halfWidth.applyMatrix4(r),C.halfHeight.applyMatrix4(r),t.rectArea[f]=C,f++;else if(y.isPointLight)(C=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),C.position.applyMatrix4(g),C.color.copy(y.color).multiplyScalar(y.intensity),C.distance=y.distance,C.decay=0===y.distance?0:y.decay,C.shadow=y.castShadow,y.castShadow&&(S=y.shadow,C.shadowBias=S.bias,C.shadowRadius=S.radius,C.shadowMapSize=S.mapSize,C.shadowCameraNear=S.camera.near,C.shadowCameraFar=S.camera.far),t.pointShadowMap[d]=w,t.pointShadowMatrix[d]=y.shadow.matrix,t.point[d]=C,d++;else if(y.isHemisphereLight){var C;(C=e.get(y)).direction.setFromMatrixPosition(y.matrixWorld),C.direction.transformDirection(g),C.direction.normalize(),C.skyColor.copy(y.color).multiplyScalar(b),C.groundColor.copy(y.groundColor).multiplyScalar(b),t.hemi[m]=C,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=h,t.spot.length=p,t.rectArea.length=f,t.point.length=d,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=d,t.hash.spotLength=p,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function Yn(){var e=new Xn,t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:e},setupLights:function(n){e.setup(t,i,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){i.push(e)}}}function Kn(e){Ni.call(this),this.type="MeshDepthMaterial",this.depthPacking=kt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Zn(e){Ni.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ht,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Jn(e,t,i){for(var n=new Jt,r=new Ut,o=new Ft,a=new Ft(i,i),s=new Ht,l=new Ht,c=new Array(4),u=new Array(4),h={},d={0:g,1:m,2:_},f=[new Ht(1,0,0),new Ht(-1,0,0),new Ht(0,0,1),new Ht(0,0,-1),new Ht(0,1,0),new Ht(0,-1,0)],v=[new Ht(0,1,0),new Ht(0,1,0),new Ht(0,1,0),new Ht(0,1,0),new Ht(0,0,1),new Ht(0,0,-1)],y=[new qt,new qt,new qt,new qt,new qt,new qt],A=0;4!==A;++A){var b=!!(1&A),x=!!(2&A),w=new Kn({depthPacking:Lt,morphTargets:b,skinning:x});c[A]=w;var S=new Zn({morphTargets:b,skinning:x});u[A]=S}var C=this;function E(t,i,n,r,o,a){var s=t.geometry,l=null,p=c,f=t.customDepthMaterial;if(n&&(p=u,f=t.customDistanceMaterial),f)l=f;else{var m=!1;i.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=0;m&&(g|=1),t.isSkinnedMesh&&i.skinning&&(g|=2),l=p[g]}if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var _=l.uuid,v=i.uuid,y=h[_];void 0===y&&(y={},h[_]=y);var A=y[v];void 0===A&&(A=l.clone(),y[v]=A),l=A}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:d[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function T(i,r,o,a){if(!1!==i.visible){if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);var s=t.update(i),c=i.material;if(Array.isArray(c))for(var u=s.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=c[p.materialIndex];if(f&&f.visible){var m=E(i,f,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,i,p)}}else c.visible&&(m=E(i,c,a,l,o.near,o.far),e.renderBufferDirect(o,null,s,m,i,null))}for(var g=i.children,_=0,v=g.length;_<v;_++)T(g[_],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,i,c){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var u,h=e.context,d=e.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,m=t.length;p<m;p++){var g=t[p],_=g.shadow,A=g&&g.isPointLight;if(void 0!==_){var b=_.camera;if(o.copy(_.mapSize),o.min(a),A){var x=o.x,w=o.y;y[0].set(2*x,w,x,w),y[1].set(0,w,x,w),y[2].set(3*x,w,x,w),y[3].set(x,w,x,w),y[4].set(3*x,0,x,w),y[5].set(x,0,x,w),o.x*=4,o.y*=2}if(null===_.map){var S={minFilter:ve,magFilter:ve,format:Fe};_.map=new Wt(o.x,o.y,S),_.map.texture.name=g.name+".shadowMap",b.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(g);var E=_.map,M=_.matrix;l.setFromMatrixPosition(g.matrixWorld),b.position.copy(l),A?(u=6,M.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(g.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(b.projectionMatrix),M.multiply(b.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var I=0;I<u;I++){if(A){s.copy(b.position),s.add(f[I]),b.up.copy(v[I]),b.lookAt(s),b.updateMatrixWorld();var B=y[I];d.viewport(B)}r.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),n.setFromMatrix(r),T(i,c,b,A)}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}C.needsUpdate=!1}}}function er(e,t,i,n,r,o,a){var s,l={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var i=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*i),n.height=Math.floor(e.height*i),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height),n}return e}function u(e){return Ot.isPowerOfTwo(e.width)&&Ot.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==ve&&e.minFilter!==be}function d(t,i,r,o){e.generateMipmap(t),n.get(i).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function p(t,i){if(!r.isWebGL2)return t;if(t===e.RGB){if(i===e.FLOAT)return e.RGB32F;if(i===e.HALF_FLOAT)return e.RGB16F;if(i===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(i===e.FLOAT)return e.RGBA32F;if(i===e.HALF_FLOAT)return e.RGBA16F;if(i===e.UNSIGNED_BYTE)return e.RGBA8}return t}function f(t){return t===ve||t===ye||t===Ae?e.NEAREST:e.LINEAR}function m(t){var i=t.target;i.removeEventListener("dispose",m),function(t){var i=n.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture)}n.remove(t)}(i),i.isVideoTexture&&delete l[i.id],a.memory.textures--}function g(t){var i=t.target;i.removeEventListener("dispose",g),function(t){var i=n.get(t),r=n.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[o]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}}(i),a.memory.textures--}function _(t,f){var g=n.get(t);if(t.isVideoTexture&&function(e){var t=e.id,i=a.render.frame;l[t]!==i&&(l[t]=i,e.update())}(t),t.version>0&&g.__version!==t.version){var _=t.image;if(void 0===_)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==_.complete)return void function(t,n,l){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),i.activeTexture(e.TEXTURE0+l),i.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var f=c(n.image,r.maxTextureSize);(function(e){return!r.isWebGL2&&(e.wrapS!==ge||e.wrapT!==ge||e.minFilter!==ve&&e.minFilter!==be)})(n)&&!1===u(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Ot.floorPowerOfTwo(e.width),s.height=Ot.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(f));var g=u(f),_=o.convert(n.format),y=o.convert(n.type),A=p(_,y);v(e.TEXTURE_2D,n,g);var b,x=n.mipmaps;if(n.isDepthTexture){if(A=e.DEPTH_COMPONENT,n.type===Be){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");A=e.DEPTH_COMPONENT32F}else r.isWebGL2&&(A=e.DEPTH_COMPONENT16);n.format===Ge&&A===e.DEPTH_COMPONENT&&n.type!==Te&&n.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Te,y=o.convert(n.type)),n.format===Ve&&(A=e.DEPTH_STENCIL,n.type!==De&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=De,y=o.convert(n.type))),i.texImage2D(e.TEXTURE_2D,0,A,f.width,f.height,0,_,y,null)}else if(n.isDataTexture)if(x.length>0&&g){for(var w=0,S=x.length;w<S;w++)b=x[w],i.texImage2D(e.TEXTURE_2D,w,A,b.width,b.height,0,_,y,b.data);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(e.TEXTURE_2D,0,A,f.width,f.height,0,_,y,f.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(w=0,S=x.length;w<S;w++)b=x[w],n.format!==Fe&&n.format!==Oe?i.getCompressedTextureFormats().indexOf(_)>-1?i.compressedTexImage2D(e.TEXTURE_2D,w,A,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(e.TEXTURE_2D,w,A,b.width,b.height,0,_,y,b.data);t.__maxMipLevel=x.length-1}else if(x.length>0&&g){for(w=0,S=x.length;w<S;w++)b=x[w],i.texImage2D(e.TEXTURE_2D,w,A,_,y,b);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(e.TEXTURE_2D,0,A,_,y,f),t.__maxMipLevel=0;h(n,g)&&d(e.TEXTURE_2D,n,f.width,f.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(g,t,f);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(e.TEXTURE0+f),i.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function v(i,a,s){var l;if(s?(e.texParameteri(i,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(i,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(i,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ge&&a.wrapT===ge||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,e.TEXTURE_MAG_FILTER,f(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==ve&&a.minFilter!==be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Be&&null===t.get("OES_texture_float_linear"))return;if(a.type===Re&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function y(t,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=p(l,c);i.texImage2D(s,0,u,r.width,r.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,n.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function A(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):i.depthBuffer&&i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=_,this.setTextureCube=function(t,s){var l=n.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",m),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),i.activeTexture(e.TEXTURE0+s),i.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,g=t.image[0]&&t.image[0].isDataTexture,_=[],y=0;y<6;y++)_[y]=f||g?g?t.image[y].image:t.image[y]:c(t.image[y],r.maxCubemapSize);var A=_[0],b=u(A),x=o.convert(t.format),w=o.convert(t.type),S=p(x,w);for(v(e.TEXTURE_CUBE_MAP,t,b),y=0;y<6;y++)if(f)for(var C,E=_[y].mipmaps,T=0,M=E.length;T<M;T++)C=E[T],t.format!==Fe&&t.format!==Oe?i.getCompressedTextureFormats().indexOf(x)>-1?i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,T,S,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,T,S,C.width,C.height,0,x,w,C.data);else g?i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,S,_[y].width,_[y].height,0,x,w,_[y].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,S,x,w,_[y]);l.__maxMipLevel=f?E.length-1:0,h(t,b)&&d(e.TEXTURE_CUBE_MAP,t,A.width,A.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(e.TEXTURE0+s),i.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){i.activeTexture(e.TEXTURE0+r),i.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",g),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=u(t);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){for(i.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),v(e.TEXTURE_CUBE_MAP,t.texture,l),c=0;c<6;c++)y(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);h(t.texture,l)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else i.bindTexture(e.TEXTURE_2D,o.__webglTexture),v(e.TEXTURE_2D,t.texture,l),y(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,l)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),i.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var i=n.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),_(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Ge)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(i.__webglFramebuffer,t)}else if(r){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),A(i.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),A(i.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(h(r,u(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=n.get(r).__webglTexture;i.bindTexture(o,a),d(o,r,t.width,t.height),i.bindTexture(o,null)}}}function tr(e,t,i){return{convert:function(n){var r;if(n===me)return e.REPEAT;if(n===ge)return e.CLAMP_TO_EDGE;if(n===_e)return e.MIRRORED_REPEAT;if(n===ve)return e.NEAREST;if(n===ye)return e.NEAREST_MIPMAP_NEAREST;if(n===Ae)return e.NEAREST_MIPMAP_LINEAR;if(n===be)return e.LINEAR;if(n===xe)return e.LINEAR_MIPMAP_NEAREST;if(n===we)return e.LINEAR_MIPMAP_LINEAR;if(n===Se)return e.UNSIGNED_BYTE;if(n===Pe)return e.UNSIGNED_SHORT_4_4_4_4;if(n===ke)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Le)return e.UNSIGNED_SHORT_5_6_5;if(n===Ce)return e.BYTE;if(n===Ee)return e.SHORT;if(n===Te)return e.UNSIGNED_SHORT;if(n===Me)return e.INT;if(n===Ie)return e.UNSIGNED_INT;if(n===Be)return e.FLOAT;if(n===Re){if(i.isWebGL2)return e.HALF_FLOAT;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(n===Ne)return e.ALPHA;if(n===Oe)return e.RGB;if(n===Fe)return e.RGBA;if(n===Ue)return e.LUMINANCE;if(n===ze)return e.LUMINANCE_ALPHA;if(n===Ge)return e.DEPTH_COMPONENT;if(n===Ve)return e.DEPTH_STENCIL;if(n===I)return e.FUNC_ADD;if(n===B)return e.FUNC_SUBTRACT;if(n===R)return e.FUNC_REVERSE_SUBTRACT;if(n===L)return e.ZERO;if(n===D)return e.ONE;if(n===N)return e.SRC_COLOR;if(n===O)return e.ONE_MINUS_SRC_COLOR;if(n===F)return e.SRC_ALPHA;if(n===U)return e.ONE_MINUS_SRC_ALPHA;if(n===z)return e.DST_ALPHA;if(n===H)return e.ONE_MINUS_DST_ALPHA;if(n===G)return e.DST_COLOR;if(n===V)return e.ONE_MINUS_DST_COLOR;if(n===Q)return e.SRC_ALPHA_SATURATE;if((n===Qe||n===je||n===qe||n===We)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Qe)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===je)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qe)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===We)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===$e||n===Xe||n===Ye||n===Ke)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===$e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xe)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ye)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ke)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ze&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===Je||n===et||n===tt||n===it||n===nt||n===rt||n===ot||n===at||n===st||n===lt||n===ct||n===ut||n===ht||n===dt)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return n;if(n===P||n===k){if(i.isWebGL2){if(n===P)return e.MIN;if(n===k)return e.MAX}if(null!==(r=t.get("EXT_blend_minmax"))){if(n===P)return r.MIN_EXT;if(n===k)return r.MAX_EXT}}if(n===De){if(i.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function ir(){hi.call(this),this.type="Group"}function nr(e,t,i,n){di.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function rr(e){nr.call(this),this.cameras=e||[]}function or(e){var t=this,i=null,n=null,r=null,o=[],a=new Ut,s=new Ut;"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var l=new Ut,c=new zt,u=new Ht,h=new nr;h.bounds=new qt(0,0,.5,1),h.layers.enable(1);var d=new nr;d.bounds=new qt(.5,0,.5,1),d.layers.enable(2);var p,f,m=new rr([h,d]);function g(){return null!==i&&!0===i.isPresenting}function _(){if(g()){var n=i.getEyeParameters("left"),r=n.renderWidth,o=n.renderHeight;f=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*r,o,1),A.start()}else t.enabled&&(e.setDrawingBufferSize(p.width,p.height,f),A.stop())}m.layers.enable(1),m.layers.enable(2);var v=[];function y(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),i=0,n=0,r=t.length;i<r;i++){var o=t[i];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(n===e)return o;n++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=o[e];return void 0===t&&((t=new ir).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),A.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===i)return e.position.set(0,t.userHeight,0),e;i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(n);var p=i.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var f=n.pose,g=null!==r?r:e;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==f.orientation&&(c.fromArray(f.orientation),g.quaternion.multiply(c)),null!==f.position&&(c.setFromRotationMatrix(a),u.fromArray(f.position),u.applyQuaternion(c),g.position.add(u)),g.updateMatrixWorld(),!1===i.isPresenting)return e;h.near=e.near,d.near=e.near,h.far=e.far,d.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),h.matrixWorldInverse.fromArray(n.leftViewMatrix),d.matrixWorldInverse.fromArray(n.rightViewMatrix),s.getInverse(a),h.matrixWorldInverse.multiply(s),d.matrixWorldInverse.multiply(s);var _=g.parent;null!==_&&(l.getInverse(_.matrixWorld),h.matrixWorldInverse.multiply(l),d.matrixWorldInverse.multiply(l)),h.matrixWorld.getInverse(h.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),h.projectionMatrix.fromArray(n.leftProjectionMatrix),d.projectionMatrix.fromArray(n.rightProjectionMatrix),m.projectionMatrix.copy(h.projectionMatrix);var A=i.getLayers();if(A.length){var b=A[0];null!==b.leftBounds&&4===b.leftBounds.length&&h.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&d.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],i=y(e);if(void 0!==i&&void 0!==i.pose){if(null===i.pose)return;var n=i.pose;!1===n.hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===i.id?0:1;v[e]!==i.buttons[r].pressed&&(v[e]=i.buttons[r].pressed,!0===v[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=g;var A=new ai;this.setAnimationLoop=function(e){A.setAnimationLoop(e)},this.submitFrame=function(){g()&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",_)}}function ar(e){console.log("THREE.WebGLRenderer",r);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,h=void 0===e.premultipliedAlpha||e.premultipliedAlpha,d=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,p=void 0!==e.powerPreference?e.powerPreference:"default",f=null,m=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ne,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var v,y,A,b,x,I,B,R,P,k,L,D,N,O,F,U,z,H,G=this,V=!1,Q=null,J=null,ee=null,te=-1,ie={geometry:null,program:null,wireframe:!1},re=null,oe=null,ae=new qt,se=new qt,le=null,ce=0,ue=t.width,he=t.height,de=1,pe=new qt(0,0,ue,he),fe=new qt(0,0,ue,he),me=!1,ge=new Jt,_e=new function(){var e=this,t=null,i=0,n=!1,r=!1,o=new Zt,a=new Gt,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(t,i,n,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==r||null===c){var u=n+4*l,h=i.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,p=n;d!==l;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var a=0!==e.length||r||0!==i||n;return n=r,t=c(e,o,0),i=e.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,o,a,u,h,d){if(!n||null===e||0===e.length||r&&!a)r?c(null):l();else{var p=r?0:i,f=4*p,m=h.clippingState||null;s.value=m,m=c(e,u,f,d);for(var g=0;g!==f;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}},ve=!1,ye=!1,Ae=new Ut,be=new Ht;function xe(){return null===J?de:1}try{var we={alpha:n,depth:o,stencil:c,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:p};if(t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",Ie,!1),null===(v=i||t.getContext("webgl",we)||t.getContext("experimental-webgl",we)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===v.getShaderPrecisionFormat&&(v.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Ce(){y=new function(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];var n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n,n}}}(v),(A=new function(e,t,i){var n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==i.precision?i.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===i.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=u>0,v=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var i=t.get("EXT_texture_filter_anisotropic");return n=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:v,floatVertexTextures:_&&v}}(v,y,e)).isWebGL2||(y.get("WEBGL_depth_texture"),y.get("OES_texture_float"),y.get("OES_texture_half_float"),y.get("OES_texture_half_float_linear"),y.get("OES_standard_derivatives"),y.get("OES_element_index_uint"),y.get("ANGLE_instanced_arrays")),y.get("OES_texture_float_linear"),H=new tr(v,y,A),(b=new function(e,t,i,n){var r=new function(){var t=!1,i=new qt,n=null,r=new qt(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),i.set(t,n,o,a),!1===r.equals(i)&&(e.clearColor(t,n,o,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},o=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(t){t?ne(e.DEPTH_TEST):re(e.DEPTH_TEST)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case j:e.depthFunc(e.NEVER);break;case q:e.depthFunc(e.ALWAYS);break;case W:e.depthFunc(e.LESS);break;case $:e.depthFunc(e.LEQUAL);break;case X:e.depthFunc(e.EQUAL);break;case Y:e.depthFunc(e.GEQUAL);break;case K:e.depthFunc(e.GREATER);break;case Z:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},c=new function(){var t=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?ne(e.STENCIL_TEST):re(e.STENCIL_TEST)},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,a){n===t&&r===i&&o===a||(e.stencilFunc(t,i,a),n=t,r=i,o=a)},setOp:function(t,i,n){a===t&&s===i&&l===n||(e.stencilOp(t,i,n),a=t,s=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,c=null}}},u=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=new Uint8Array(u),d=new Uint8Array(u),p=new Uint8Array(u),f={},m=null,v=null,y=null,A=null,b=null,x=null,I=null,B=null,R=null,P=!1,k=null,L=null,D=null,N=null,O=null,F=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),U=!1,z=0,H=e.getParameter(e.VERSION);-1!==H.indexOf("WebGL")?(z=parseFloat(/^WebGL\ ([0-9])/.exec(H)[1]),U=z>=1):-1!==H.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(H)[1]),U=z>=2);var G=null,V={},Q=new qt,J=new qt;function ee(t,i,n){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<n;a++)e.texImage2D(i+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}var te={};function ie(i,r){h[i]=1,0===d[i]&&(e.enableVertexAttribArray(i),d[i]=1),p[i]!==r&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),p[i]=r)}function ne(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function re(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}function oe(t,n,r,o,a,s,l,c){if(t!==w?ne(e.BLEND):re(e.BLEND),t!==M){if(t!==y||c!==P)switch(t){case C:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case E:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case T:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}A=null,b=null,x=null,I=null,B=null,R=null}else a=a||n,s=s||r,l=l||o,n===A&&a===I||(e.blendEquationSeparate(i.convert(n),i.convert(a)),A=n,I=a),r===b&&o===x&&s===B&&l===R||(e.blendFuncSeparate(i.convert(r),i.convert(o),i.convert(s),i.convert(l)),b=r,x=o,B=s,R=l);y=t,P=c}function ae(t){k!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),k=t)}function se(t){t!==a?(ne(e.CULL_FACE),t!==L&&(t===s?e.cullFace(e.BACK):t===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):re(e.CULL_FACE),L=t}function le(t,i,n){t?(ne(e.POLYGON_OFFSET_FILL),N===i&&O===n||(e.polygonOffset(i,n),N=i,O=n)):re(e.POLYGON_OFFSET_FILL)}function ce(t){void 0===t&&(t=e.TEXTURE0+F-1),G!==t&&(e.activeTexture(t),G=t)}return te[e.TEXTURE_2D]=ee(e.TEXTURE_2D,e.TEXTURE_2D,1),te[e.TEXTURE_CUBE_MAP]=ee(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),ne(e.DEPTH_TEST),o.setFunc($),ae(!1),se(s),ne(e.CULL_FACE),ne(e.BLEND),oe(S),{buffers:{color:r,depth:o,stencil:c},initAttributes:function(){for(var e=0,t=h.length;e<t;e++)h[e]=0},enableAttribute:function(e){ie(e,0)},enableAttributeAndDivisor:ie,disableUnusedAttributes:function(){for(var t=0,i=d.length;t!==i;++t)d[t]!==h[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:ne,disable:re,getCompressedTextureFormats:function(){if(null===m&&(m=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)m.push(i[n]);return m},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:oe,setMaterial:function(t,i){t.side===_?re(e.CULL_FACE):ne(e.CULL_FACE);var n=t.side===g;i&&(n=!n),ae(n),t.blending===S&&!1===t.transparent?oe(w):oe(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),r.setMask(t.colorWrite),le(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ae,setCullFace:se,setLineWidth:function(t){t!==D&&(U&&e.lineWidth(t),D=t)},setPolygonOffset:le,setScissorTest:function(t){t?ne(e.SCISSOR_TEST):re(e.SCISSOR_TEST)},activeTexture:ce,bindTexture:function(t,i){null===G&&ce();var n=V[G];void 0===n&&(n={type:void 0,texture:void 0},V[G]=n),n.type===t&&n.texture===i||(e.bindTexture(t,i||te[t]),n.type=t,n.texture=i)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===Q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),Q.copy(t))},viewport:function(t){!1===J.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),J.copy(t))},reset:function(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);f={},m=null,G=null,V={},v=null,y=null,k=null,L=null,r.reset(),o.reset(),c.reset()}}}(v,y,H,A)).scissor(se.copy(fe).multiplyScalar(de)),b.viewport(ae.copy(pe).multiplyScalar(de)),x=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(r=r||1,t.calls++,n){case e.TRIANGLES:t.triangles+=r*(i/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(i-2);break;case e.LINES:t.lines+=r*(i/2);break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(v),I=new function(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}},B=new er(v,y,b,I,A,H,x),R=new si(v),P=new function(e,t,i){var n={},r={};function o(e){var a=e.target,s=n[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete n[a.id];var c=r[s.id];c&&(t.remove(c),delete r[s.id]),i.memory.geometries--}return{get:function(e,t){var r=n[t.id];return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Bi).setFromObject(e)),r=t._bufferGeometry),n[t.id]=r,i.memory.geometries++,r)},update:function(i){var n=i.index,r=i.attributes;for(var o in null!==n&&t.update(n,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[o],e.ARRAY_BUFFER);var a=i.morphAttributes;for(var o in a)for(var s=a[o],l=0,c=s.length;l<c;l++)t.update(s[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(i){var n=r[i.id];if(n)return n;var o,a=[],s=i.index,l=i.attributes;if(null!==s)for(var c=0,u=(o=s.array).length;c<u;c+=3){var h=o[c+0],d=o[c+1],p=o[c+2];a.push(h,d,d,p,p,h)}else for(c=0,u=(o=l.position.array).length/3-1;c<u;c+=3)h=c+0,d=c+1,p=c+2,a.push(h,d,d,p,p,h);return n=new(Mi(a)>65535?Si:xi)(a,1),t.update(n,e.ELEMENT_ARRAY_BUFFER),r[i.id]=n,n}}}(v,R,x),k=new function(e,t){var i={};return{update:function(n){var r=t.render.frame,o=n.geometry,a=e.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),e.update(a),i[a.id]=r),a},dispose:function(){i={}}}}(P,x),F=new function(e){var t={},i=new Float32Array(8);return{update:function(n,r,o,a){var s=n.morphTargetInfluences,l=s.length,c=t[r.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[r.id]=c}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++)0!==(p=c[u])[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u));for(u=0;u<l;u++)(p=c[u])[0]=u,p[1]=s[u];for(c.sort(Gi),u=0;u<8;u++){var p;if(p=c[u]){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+u,h[f]),d&&r.addAttribute("morphNormal"+u,d[f]),i[u]=m;continue}}i[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",i)}}}(v),L=new Vn(G,y,A),D=new qn,N=new function(){var e={};return{get:function(t,i){var n;return void 0===e[t.id]?(n=new Yn,e[t.id]={},e[t.id][i.id]=n):void 0===e[t.id][i.id]?(n=new Yn,e[t.id][i.id]=n):n=e[t.id][i.id],n},dispose:function(){e={}}}},O=new function(e,t,i,n){var r,o,a,s=new ni(0),l=0;function c(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,n)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(s,l=e)},render:function(t,n,u,h){var d=n.background;null===d?c(s,l):d&&d.isColor&&(c(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===a&&((a=new Hi(new Pi(1,1,1),new Fi({uniforms:oi.cube.uniforms,vertexShader:oi.cube.vertexShader,fragmentShader:oi.cube.fragmentShader,side:g,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},i.update(a)),a.material.uniforms.tCube.value=d,t.push(a,a.geometry,a.material,0,null)):d&&d.isTexture&&(void 0===r&&(r=new pi(-1,1,1,-1,0,1),o=new Hi(new Li(2,2),new Oi({depthTest:!1,depthWrite:!1,fog:!1})),i.update(o)),o.material.map=d,e.renderBufferDirect(r,null,o.geometry,o.material,o,null))}}}(G,b,k,h),U=new function(e,t,i,n){var r;this.setMode=function(e){r=e},this.render=function(t,n){e.drawArrays(r,t,n),i.update(n,r)},this.renderInstances=function(o,a,s){var l;if(n.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,a,s,o.maxInstancedCount),i.update(s,r,o.maxInstancedCount)}}(v,y,x,A),z=new function(e,t,i,n){var r,o,a;this.setMode=function(e){r=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(r,n,o,t*a),i.update(n,r)},this.renderInstances=function(s,l,c){var u;if(n.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,o,l*a,s.maxInstancedCount),i.update(c,r,s.maxInstancedCount)}}(v,y,x,A),x.programs=L.programs,G.context=v,G.capabilities=A,G.extensions=y,G.properties=I,G.renderLists=D,G.state=b,G.info=x}Ce();var Ee="xr"in navigator?new function(e){var t=e.context,i=null,n=null,r=null,o=null,a=[],s=[];function l(){return null!==n&&null!==r}var c=new nr;c.layers.enable(1),c.viewport=new qt;var u=new nr;u.layers.enable(2),u.viewport=new qt;var h=new rr([c,u]);function d(e){var t=a[s.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function p(){e.setFramebuffer(null),g.stop()}function f(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new ir).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setSession=function(i,o){null!==(n=i)&&(n.addEventListener("select",d),n.addEventListener("selectstart",d),n.addEventListener("selectend",d),n.addEventListener("end",p),n.baseLayer=new XRWebGLLayer(n,t),n.requestFrameOfReference(o.frameOfReferenceType).then((function(t){r=t,e.setFramebuffer(n.baseLayer.framebuffer),g.setContext(n),g.start()})),s=n.getInputSources(),n.addEventListener("inputsourceschange",(function(){s=n.getInputSources(),console.log(s)})))},this.getCamera=function(e){if(l()){var t=e.parent,i=h.cameras;f(h,t);for(var n=0;n<i.length;n++)f(i[n],t);e.matrixWorld.copy(h.matrixWorld);for(var r=e.children,o=(n=0,r.length);n<o;n++)r[n].updateMatrixWorld(!0);return h}return e},this.isPresenting=l;var m=null,g=new ai;g.setAnimationLoop((function(e,t){if(null!==(o=t.getDevicePose(r)))for(var i=n.baseLayer,l=t.views,c=0;c<l.length;c++){var u=l[c],d=i.getViewport(u),p=o.getViewMatrix(u),f=h.cameras[c];f.matrix.fromArray(p).getInverse(f.matrix),f.projectionMatrix.fromArray(u.projectionMatrix),f.viewport.set(d.x,d.y,d.width,d.height),0===c&&(h.matrix.copy(f.matrix),h.projectionMatrix.copy(f.projectionMatrix))}for(c=0;c<a.length;c++){var g=a[c],_=s[c];if(_){var v=t.getInputPose(_,r);if(null!==v){g.matrix.elements=v.pointerMatrix,g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}m&&m(e)})),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(G):new or(G);this.vr=Ee;var Te=new Jn(G,k,A.maxTextureSize);function Me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1,Ce()}function Pe(e){var t=e.target;t.removeEventListener("dispose",Pe),function(e){ke(e),I.remove(e)}(t)}function ke(e){var t=I.get(e).program;e.program=void 0,void 0!==t&&L.releaseProgram(t)}this.shadowMap=Te,this.getContext=function(){return v},this.getContextAttributes=function(){return v.getContextAttributes()},this.forceContextLoss=function(){var e=y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(ue,he,!1))},this.getSize=function(){return{width:ue,height:he}},this.setSize=function(e,i,n){Ee.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ue=e,he=i,t.width=e*de,t.height=i*de,!1!==n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(){return{width:ue*de,height:he*de}},this.setDrawingBufferSize=function(e,i,n){ue=e,he=i,de=n,t.width=e*n,t.height=i*n,this.setViewport(0,0,e,i)},this.getCurrentViewport=function(){return ae},this.setViewport=function(e,t,i,n){pe.set(e,he-t-n,i,n),b.viewport(ae.copy(pe).multiplyScalar(de))},this.setScissor=function(e,t,i,n){fe.set(e,he-t-n,i,n),b.scissor(se.copy(fe).multiplyScalar(de))},this.setScissorTest=function(e){b.setScissorTest(me=e)},this.getClearColor=function(){return O.getClearColor()},this.setClearColor=function(){O.setClearColor.apply(O,arguments)},this.getClearAlpha=function(){return O.getClearAlpha()},this.setClearAlpha=function(){O.setClearAlpha.apply(O,arguments)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=v.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=v.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=v.STENCIL_BUFFER_BIT),v.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,n){this.setRenderTarget(e),this.clear(t,i,n)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",Ie,!1),D.dispose(),N.dispose(),I.dispose(),k.dispose(),Ee.dispose(),De.stop()},this.renderBufferImmediate=function(e,t){b.initAttributes();var i=I.get(e);e.hasPositions&&!i.position&&(i.position=v.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=v.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=v.createBuffer()),e.hasColors&&!i.color&&(i.color=v.createBuffer());var n=t.getAttributes();e.hasPositions&&(v.bindBuffer(v.ARRAY_BUFFER,i.position),v.bufferData(v.ARRAY_BUFFER,e.positionArray,v.DYNAMIC_DRAW),b.enableAttribute(n.position),v.vertexAttribPointer(n.position,3,v.FLOAT,!1,0,0)),e.hasNormals&&(v.bindBuffer(v.ARRAY_BUFFER,i.normal),v.bufferData(v.ARRAY_BUFFER,e.normalArray,v.DYNAMIC_DRAW),b.enableAttribute(n.normal),v.vertexAttribPointer(n.normal,3,v.FLOAT,!1,0,0)),e.hasUvs&&(v.bindBuffer(v.ARRAY_BUFFER,i.uv),v.bufferData(v.ARRAY_BUFFER,e.uvArray,v.DYNAMIC_DRAW),b.enableAttribute(n.uv),v.vertexAttribPointer(n.uv,2,v.FLOAT,!1,0,0)),e.hasColors&&(v.bindBuffer(v.ARRAY_BUFFER,i.color),v.bufferData(v.ARRAY_BUFFER,e.colorArray,v.DYNAMIC_DRAW),b.enableAttribute(n.color),v.vertexAttribPointer(n.color,3,v.FLOAT,!1,0,0)),b.disableUnusedAttributes(),v.drawArrays(v.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,o){var a=r.isMesh&&r.normalMatrix.determinant()<0;b.setMaterial(n,a);var s=ze(e,t,n,r),l=!1;ie.geometry===i.id&&ie.program===s.id&&ie.wireframe===(!0===n.wireframe)||(ie.geometry=i.id,ie.program=s.id,ie.wireframe=!0===n.wireframe,l=!0),r.morphTargetInfluences&&(F.update(r,i,n,s),l=!0);var c,u=i.index,h=i.attributes.position,d=1;!0===n.wireframe&&(u=P.getWireframeAttribute(i),d=2);var p=U;null!==u&&(c=R.get(u),(p=z).setIndex(c)),l&&(function(e,t,i){if(i&&i.isInstancedBufferGeometry&!A.isWebGL2&&null===y.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{b.initAttributes();var n=i.attributes,r=t.getAttributes(),o=e.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var l=n[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,h=R.get(l);if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,g=m.stride,_=l.offset;m&&m.isInstancedInterleavedBuffer?(b.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=m.meshPerAttribute*m.count)):b.enableAttribute(s),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(s,u,p,c,g*f,_*f)}else l.isInstancedBufferAttribute?(b.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=l.meshPerAttribute*l.count)):b.enableAttribute(s),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(s,u,p,c,0,0)}else if(void 0!==o){var x=o[a];if(void 0!==x)switch(x.length){case 2:v.vertexAttrib2fv(s,x);break;case 3:v.vertexAttrib3fv(s,x);break;case 4:v.vertexAttrib4fv(s,x);break;default:v.vertexAttrib1fv(s,x)}}}}b.disableUnusedAttributes()}}(n,s,i),null!==u&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,c.buffer));var f=1/0;null!==u?f=u.count:void 0!==h&&(f=h.count);var m=i.drawRange.start*d,g=i.drawRange.count*d,_=null!==o?o.start*d:0,x=null!==o?o.count*d:1/0,w=Math.max(m,_),S=Math.min(f,m+g,_+x)-1,C=Math.max(0,S-w+1);if(0!==C){if(r.isMesh)if(!0===n.wireframe)b.setLineWidth(n.wireframeLinewidth*xe()),p.setMode(v.LINES);else switch(r.drawMode){case xt:p.setMode(v.TRIANGLES);break;case wt:p.setMode(v.TRIANGLE_STRIP);break;case St:p.setMode(v.TRIANGLE_FAN)}else if(r.isLine){var E=n.linewidth;void 0===E&&(E=1),b.setLineWidth(E*xe()),r.isLineSegments?p.setMode(v.LINES):r.isLineLoop?p.setMode(v.LINE_LOOP):p.setMode(v.LINE_STRIP)}else r.isPoints?p.setMode(v.POINTS):r.isSprite&&p.setMode(v.TRIANGLES);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&p.renderInstances(i,w,C):p.render(w,C)}},this.compile=function(e,t){(m=N.get(e,t)).init(),e.traverse((function(e){e.isLight&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)Ue(t.material[i],e.fog,t);else Ue(t.material,e.fog,t)}))};var Le=null,De=new ai;function Ne(e,t,i,n){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,l=a.geometry,c=void 0===n?a.material:n,u=a.group;if(i.isArrayCamera){oe=i;for(var h=i.cameras,d=0,p=h.length;d<p;d++){var f=h[d];if(s.layers.test(f.layers)){if("viewport"in f)b.viewport(ae.copy(f.viewport));else{var m=f.bounds,g=m.x*ue,_=m.y*he,v=m.z*ue,y=m.w*he;b.viewport(ae.set(g,_,v,y).multiplyScalar(de))}Oe(s,t,f,l,c,u)}}}else oe=null,Oe(s,t,i,l,c,u)}}function Oe(e,t,i,n,r,o){if(e.onBeforeRender(G,t,i,n,r,o),m=N.get(t,oe||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){b.setMaterial(r);var a=ze(i,t.fog,r,e);ie.geometry=null,ie.program=null,ie.wireframe=!1,function(e,t){e.render((function(e){G.renderBufferImmediate(e,t)}))}(e,a)}else G.renderBufferDirect(i,t.fog,n,r,e,o);e.onAfterRender(G,t,i,n,r,o),m=N.get(t,oe||i)}function Ue(e,t,i){var n=I.get(e),r=m.state.lights,o=m.state.shadowsArray,a=n.lightsHash,s=r.state.hash,l=L.getParameters(e,r.state,o,t,_e.numPlanes,_e.numIntersection,i),c=L.getProgramCode(e,l),u=n.program,h=!0;if(void 0===u)e.addEventListener("dispose",Pe);else if(u.code!==c)ke(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==l.shaderID)return;h=!1}if(h){if(l.shaderID){var d=oi[l.shaderID];n.shader={name:e.type,uniforms:ti.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader,G),c=L.getProgramCode(e,l),u=L.acquireProgram(e,n.shader,l,c),n.program=u,e.program=u}var p=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<G.maxMorphTargets;f++)p["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<G.maxMorphNormals;f++)p["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var g=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=_e.numPlanes,n.numIntersection=_e.numIntersection,g.clippingPlanes=_e.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(g.ambientLightColor.value=r.state.ambient,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var _=n.program.getUniforms(),v=Pn.seqWithValue(_.seq,g);n.uniformsList=v}function ze(e,t,i,n){ce=0;var r=I.get(i),o=m.state.lights,a=r.lightsHash,s=o.state.hash;if(ve&&(ye||e!==re)){var l=e===re&&i.id===te;_e.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,l)}!1===i.needsUpdate&&(void 0===r.program||i.fog&&r.fog!==t?i.needsUpdate=!0:(!i.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===_e.numPlanes&&r.numIntersection===_e.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(Ue(i,t,n),i.needsUpdate=!1);var c=!1,u=!1,h=!1,d=r.program,p=d.getUniforms(),f=r.shader.uniforms;if(b.useProgram(d.program)&&(c=!0,u=!0,h=!0),i.id!==te&&(te=i.id,u=!0),c||e!==re){if(p.setValue(v,"projectionMatrix",e.projectionMatrix),A.logarithmicDepthBuffer&&p.setValue(v,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),re!==(oe||e)&&(re=oe||e,u=!0,h=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var _=p.map.cameraPosition;void 0!==_&&_.setValue(v,be.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&p.setValue(v,"viewMatrix",e.matrixWorldInverse)}if(i.skinning){p.setOptional(v,n,"bindMatrix"),p.setOptional(v,n,"bindMatrixInverse");var y=n.skeleton;if(y){var x=y.bones;if(A.floatVertexTextures){if(void 0===y.boneTexture){var w=Math.sqrt(4*x.length);w=Ot.ceilPowerOfTwo(w),w=Math.max(w,4);var S=new Float32Array(w*w*4);S.set(y.boneMatrices);var C=new Xt(S,w,w,Fe,Be);C.needsUpdate=!0,y.boneMatrices=S,y.boneTexture=C,y.boneTextureSize=w}p.setValue(v,"boneTexture",y.boneTexture),p.setValue(v,"boneTextureSize",y.boneTextureSize)}else p.setOptional(v,y,"boneMatrices")}}return u&&(p.setValue(v,"toneMappingExposure",G.toneMappingExposure),p.setValue(v,"toneMappingWhitePoint",G.toneMappingWhitePoint),i.lights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(f,h),t&&i.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(f,t),i.isMeshBasicMaterial?He(f,i):i.isMeshLambertMaterial?(He(f,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(f,i)):i.isMeshPhongMaterial?(He(f,i),i.isMeshToonMaterial?function(e,t){Ge(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(f,i):Ge(f,i)):i.isMeshStandardMaterial?(He(f,i),i.isMeshPhysicalMaterial?function(e,t){Ve(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(f,i):Ve(f,i)):i.isMeshDepthMaterial?(He(f,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(f,i)):i.isMeshDistanceMaterial?(He(f,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(f,i)):i.isMeshNormalMaterial?(He(f,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(f,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(f,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(f,i)):i.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*he,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(f,i):i.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(f,i):i.isShadowMaterial&&(f.color.value=i.color,f.opacity.value=i.opacity),void 0!==f.ltc_1&&(f.ltc_1.value=ri.LTC_1),void 0!==f.ltc_2&&(f.ltc_2.value=ri.LTC_2),Pn.upload(v,r.uniformsList,f,G)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Pn.upload(v,r.uniformsList,f,G),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&p.setValue(v,"center",n.center),p.setValue(v,"modelViewMatrix",n.modelViewMatrix),p.setValue(v,"normalMatrix",n.normalMatrix),p.setValue(v,"modelMatrix",n.matrixWorld),d}function He(e,t){var i;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=I.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function Ge(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ve(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}De.setAnimationLoop((function(e){Ee.isPresenting()||Le&&Le(e)})),"undefined"!=typeof window&&De.setContext(window),this.setAnimationLoop=function(e){Le=e,Ee.setAnimationLoop(e),De.start()},this.render=function(e,t,i,n){if(t&&t.isCamera){if(!V){ie.geometry=null,ie.program=null,ie.wireframe=!1,te=-1,re=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ee.enabled&&(t=Ee.getCamera(t)),(m=N.get(e,t)).init(),e.onBeforeRender(G,e,t,i),Ae.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(Ae),ye=this.localClippingEnabled,ve=_e.init(this.clippingPlanes,ye,t),(f=D.get(e,t)).init(),function e(t,i,n){if(!1!==t.visible){if(t.layers.test(i.layers))if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ge.intersectsSprite(t)){n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ae);var r=k.update(t),o=t.material;f.push(t,r,o,be.z,null)}}else if(t.isImmediateRenderObject)n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ae),f.push(t,null,t.material,be.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ge.intersectsObject(t)))if(n&&be.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ae),r=k.update(t),o=t.material,Array.isArray(o))for(var a=r.groups,s=0,l=a.length;s<l;s++){var c=a[s],u=o[c.materialIndex];u&&u.visible&&f.push(t,r,u,be.z,c)}else o.visible&&f.push(t,r,o,be.z,null);var h=t.children;for(s=0,l=h.length;s<l;s++)e(h[s],i,n)}}(e,t,G.sortObjects),!0===G.sortObjects&&f.sort(),ve&&_e.beginShadows();var r=m.state.shadowsArray;Te.render(r,e,t),m.setupLights(t),ve&&_e.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),O.render(f,e,t,n);var o=f.opaque,a=f.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Ne(o,e,t,s),a.length&&Ne(a,e,t,s)}else o.length&&Ne(o,e,t),a.length&&Ne(a,e,t);i&&B.updateRenderTargetMipmap(i),b.buffers.depth.setTest(!0),b.buffers.depth.setMask(!0),b.buffers.color.setMask(!0),b.setPolygonOffset(!1),e.onAfterRender(G,e,t),Ee.enabled&&Ee.submitFrame(),f=null,m=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ce;return e>=A.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+A.maxTextures),ce+=1,e},this.setTexture2D=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),B.setTexture2D(t,i)}}(),this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),B.setTexture2D(t,i)}}(),this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?B.setTextureCube(t,i):B.setTextureCubeDynamic(t,i)}}(),this.setFramebuffer=function(e){Q=e},this.getRenderTarget=function(){return J},this.setRenderTarget=function(e){J=e,e&&void 0===I.get(e).__webglFramebuffer&&B.setupRenderTarget(e);var t=Q,i=!1;if(e){var n=I.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=n[e.activeCubeFace],i=!0):t=n,ae.copy(e.viewport),se.copy(e.scissor),le=e.scissorTest}else ae.copy(pe).multiplyScalar(de),se.copy(fe).multiplyScalar(de),le=me;if(ee!==t&&(v.bindFramebuffer(v.FRAMEBUFFER,t),ee=t),b.viewport(ae),b.scissor(se),b.setScissorTest(le),i){var r=I.get(e.texture);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,i,n,r,o){if(e&&e.isWebGLRenderTarget){var a=I.get(e).__webglFramebuffer;if(a){var s=!1;a!==ee&&(v.bindFramebuffer(v.FRAMEBUFFER,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==Fe&&H.convert(c)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Se||H.convert(u)===v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)||u===Be&&(A.isWebGL2||y.get("OES_texture_float")||y.get("WEBGL_color_buffer_float"))||u===Re&&(A.isWebGL2?y.get("EXT_color_buffer_float"):y.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");v.checkFramebufferStatus(v.FRAMEBUFFER)===v.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&v.readPixels(t,i,n,r,H.convert(c),H.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&v.bindFramebuffer(v.FRAMEBUFFER,ee)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var n=t.image.width,r=t.image.height,o=H.convert(t.format);this.setTexture2D(t,0),v.copyTexImage2D(v.TEXTURE_2D,i||0,o,e.x,e.y,n,r,0)},this.copyTextureToTexture=function(e,t,i,n){var r=t.image.width,o=t.image.height,a=H.convert(i.format),s=H.convert(i.type);this.setTexture2D(i,0),t.isDataTexture?v.texSubImage2D(v.TEXTURE_2D,n||0,e.x,e.y,r,o,a,s,t.image.data):v.texSubImage2D(v.TEXTURE_2D,n||0,e.x,e.y,a,s,t.image)}}function sr(e,t){this.name="",this.color=new ni(e),this.density=void 0!==t?t:25e-5}function lr(e,t,i){this.name="",this.color=new ni(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function cr(){hi.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ur(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function hr(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function dr(e){Ni.call(this),this.type="SpriteMaterial",this.color=new ni(16777215),this.map=null,this.rotation=0,this.lights=!1,this.transparent=!0,this.setValues(e)}function pr(e){if(hi.call(this),this.type="Sprite",void 0===Wn){Wn=new Bi;var t=new ur(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Wn.setIndex([0,1,2,0,2,3]),Wn.addAttribute("position",new hr(t,3,0,!1)),Wn.addAttribute("uv",new hr(t,2,3,!1))}this.geometry=Wn,this.material=void 0!==e?e:new dr,this.center=new Ft(.5,.5)}function fr(){hi.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function mr(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new Ut)}}function gr(){hi.call(this),this.type="Bone"}function _r(e,t){Hi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut;var i=new mr(this.initBones());this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function vr(e){Ni.call(this),this.type="LineBasicMaterial",this.color=new ni(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function yr(e,t,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),hi.call(this),this.type="Line",this.geometry=void 0!==e?e:new Bi,this.material=void 0!==t?t:new vr({color:16777215*Math.random()})}function Ar(e,t){yr.call(this,e,t),this.type="LineSegments"}function br(e,t){yr.call(this,e,t),this.type="LineLoop"}function xr(e){Ni.call(this),this.type="PointsMaterial",this.color=new ni(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function wr(e,t){hi.call(this),this.type="Points",this.geometry=void 0!==e?e:new Bi,this.material=void 0!==t?t:new xr({color:16777215*Math.random()})}function Sr(e,t,i,n,r,o,a,s,l){jt.call(this,e,t,i,n,r,o,a,s,l),this.generateMipmaps=!1}function Cr(e,t,i,n,r,o,a,s,l,c,u,h){jt.call(this,null,o,a,s,l,c,n,r,u,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Er(e,t,i,n,r,o,a,s,l){jt.call(this,e,t,i,n,r,o,a,s,l),this.needsUpdate=!0}function Tr(e,t,i,n,r,o,a,s,l,c){if((c=void 0!==c?c:Ge)!==Ge&&c!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Ge&&(i=Te),void 0===i&&c===Ve&&(i=De),jt.call(this,null,n,r,o,a,s,c,i,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:ve,this.minFilter=void 0!==s?s:ve,this.flipY=!1,this.generateMipmaps=!1}function Mr(e){Bi.call(this),this.type="WireframeGeometry";var t,i,n,r,o,a,s,l,c,u,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,n=m.length;t<n;t++){var g=m[t];for(i=0;i<3;i++)s=g[f[i]],l=g[f[(i+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)a=p[c],u=e.vertices[a.index1],h.push(u.x,u.y,u.z),u=e.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var _,v,y,A,b,x,w;if(u=new Ht,null!==e.index){for(_=e.attributes.position,v=e.index,0===(y=e.groups).length&&(y=[{start:0,count:v.count,materialIndex:0}]),r=0,o=y.length;r<o;++r)for(t=b=(A=y[r]).start,n=b+A.count;t<n;t+=3)for(i=0;i<3;i++)s=v.getX(t+i),l=v.getX(t+(i+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)a=p[c],u.fromBufferAttribute(_,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(_,a.index2),h.push(u.x,u.y,u.z)}else for(t=0,n=(_=e.attributes.position).count/3;t<n;t++)for(i=0;i<3;i++)x=3*t+i,u.fromBufferAttribute(_,x),h.push(u.x,u.y,u.z),w=3*t+(i+1)%3,u.fromBufferAttribute(_,w),h.push(u.x,u.y,u.z)}this.addAttribute("position",new Ci(h,3))}function Ir(e,t,i){gi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Br(e,t,i)),this.mergeVertices()}function Br(e,t,i){Bi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,o=[],a=[],s=[],l=[],c=new Ht,u=new Ht,h=new Ht,d=new Ht,p=new Ht;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(n=0;n<=i;n++){var m=n/i;for(r=0;r<=t;r++){var g=r/t;e(g,m,u),a.push(u.x,u.y,u.z),g-1e-5>=0?(e(g-1e-5,m,h),d.subVectors(u,h)):(e(g+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(e(g,m-1e-5,h),p.subVectors(u,h)):(e(g,m+1e-5,h),p.subVectors(h,u)),c.crossVectors(d,p).normalize(),s.push(c.x,c.y,c.z),l.push(g,m)}}for(n=0;n<i;n++)for(r=0;r<t;r++){var _=n*f+r,v=n*f+r+1,y=(n+1)*f+r+1,A=(n+1)*f+r;o.push(_,v,A),o.push(v,y,A)}this.setIndex(o),this.addAttribute("position",new Ci(a,3)),this.addAttribute("normal",new Ci(s,3)),this.addAttribute("uv",new Ci(l,2))}function Rr(e,t,i,n){gi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new Pr(e,t,i,n)),this.mergeVertices()}function Pr(e,t,i,n){Bi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1;var r=[],o=[];function a(e,t,i,n){var r,o,a=Math.pow(2,n),l=[];for(r=0;r<=a;r++){l[r]=[];var c=e.clone().lerp(i,r/a),u=t.clone().lerp(i,r/a),h=a-r;for(o=0;o<=h;o++)l[r][o]=0===o&&r===a?c:c.clone().lerp(u,o/h)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2==0?(s(l[r][d+1]),s(l[r+1][d]),s(l[r][d])):(s(l[r][d+1]),s(l[r+1][d+1]),s(l[r+1][d]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,i){var n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(o[t]=e.x-1),0===i.x&&0===i.z&&(o[t]=n/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var i=new Ht,n=new Ht,r=new Ht,o=0;o<t.length;o+=3)l(t[o+0],i),l(t[o+1],n),l(t[o+2],r),a(i,n,r,e)}(n=n||0),function(e){for(var t=new Ht,i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){for(var e=new Ht,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var i=u(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;o.push(i,1-n)}(function(){for(var e=new Ht,t=new Ht,i=new Ht,n=new Ht,a=new Ft,s=new Ft,l=new Ft,h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),i.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),n.copy(e).add(t).add(i).divideScalar(3);var p=u(n);c(a,d+0,e,p),c(s,d+2,t,p),c(l,d+4,i,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],i=o[e+2],n=o[e+4],r=Math.max(t,i,n),a=Math.min(t,i,n);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),i<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Ci(r,3)),this.addAttribute("normal",new Ci(r.slice(),3)),this.addAttribute("uv",new Ci(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function kr(e,t){gi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Lr(e,t)),this.mergeVertices()}function Lr(e,t){Pr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dr(e,t){gi.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nr(e,t)),this.mergeVertices()}function Nr(e,t){Pr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Or(e,t){gi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Fr(e,t)),this.mergeVertices()}function Fr(e,t){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];Pr.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ur(e,t){gi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zr(e,t)),this.mergeVertices()}function zr(e,t){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n];Pr.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Hr(e,t,i,n,r,o){gi.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Gr(e,t,i,n,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Gr(e,t,i,n,r){Bi.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},t=t||64,i=i||1,n=n||8,r=r||!1;var o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Ht,c=new Ht,u=new Ft,h=new Ht,d=[],p=[],f=[],m=[];function g(r){h=e.getPointAt(r/t,h);var a=o.normals[r],u=o.binormals[r];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);c.x=g*a.x+m*u.x,c.y=g*a.y+m*u.y,c.z=g*a.z+m*u.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=h.x+i*c.x,l.y=h.y+i*c.y,l.z=h.z+i*c.z,d.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===r?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=n;s++)u.x=a/t,u.y=s/n,f.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=n;a++){var e=(n+1)*(s-1)+(a-1),i=(n+1)*s+(a-1),r=(n+1)*s+a,o=(n+1)*(s-1)+a;m.push(e,i,o),m.push(i,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Ci(d,3)),this.addAttribute("normal",new Ci(p,3)),this.addAttribute("uv",new Ci(f,2))}function Vr(e,t,i,n,r,o,a){gi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Qr(e,t,i,n,r,o)),this.mergeVertices()}function Qr(e,t,i,n,r,o){Bi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:o},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,o=o||3;var a,s,l=[],c=[],u=[],h=[],d=new Ht,p=new Ht,f=new Ht,m=new Ht,g=new Ht,_=new Ht,v=new Ht;for(a=0;a<=i;++a){var y=a/i*r*Math.PI*2;for(T(y,r,o,e,f),T(y+.01,r,o,e,m),_.subVectors(m,f),v.addVectors(m,f),g.crossVectors(_,v),v.crossVectors(g,_),g.normalize(),v.normalize(),s=0;s<=n;++s){var A=s/n*Math.PI*2,b=-t*Math.cos(A),x=t*Math.sin(A);d.x=f.x+(b*v.x+x*g.x),d.y=f.y+(b*v.y+x*g.y),d.z=f.z+(b*v.z+x*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(a/i),h.push(s/n)}}for(s=1;s<=i;s++)for(a=1;a<=n;a++){var w=(n+1)*(s-1)+(a-1),S=(n+1)*s+(a-1),C=(n+1)*s+a,E=(n+1)*(s-1)+a;l.push(w,S,E),l.push(S,C,E)}function T(e,t,i,n,r){var o=Math.cos(e),a=Math.sin(e),s=i/t*e,l=Math.cos(s);r.x=n*(2+l)*.5*o,r.y=n*(2+l)*a*.5,r.z=n*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Ci(c,3)),this.addAttribute("normal",new Ci(u,3)),this.addAttribute("uv",new Ci(h,2))}function jr(e,t,i,n,r){gi.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new qr(e,t,i,n,r)),this.mergeVertices()}function qr(e,t,i,n,r){Bi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var o,a,s=[],l=[],c=[],u=[],h=new Ht,d=new Ht,p=new Ht;for(o=0;o<=i;o++)for(a=0;a<=n;a++){var f=a/n*r,m=o/i*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),c.push(p.x,p.y,p.z),u.push(a/n),u.push(o/i)}for(o=1;o<=i;o++)for(a=1;a<=n;a++){var g=(n+1)*o+a-1,_=(n+1)*(o-1)+a-1,v=(n+1)*(o-1)+a,y=(n+1)*o+a;s.push(g,_,y),s.push(_,v,y)}this.setIndex(s),this.addAttribute("position",new Ci(l,3)),this.addAttribute("normal",new Ci(c,3)),this.addAttribute("uv",new Ci(u,2))}Kn.prototype=Object.create(Ni.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isMeshDepthMaterial=!0,Kn.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Zn.prototype=Object.create(Ni.prototype),Zn.prototype.constructor=Zn,Zn.prototype.isMeshDistanceMaterial=!0,Zn.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},ir.prototype=Object.assign(Object.create(hi.prototype),{constructor:ir,isGroup:!0}),nr.prototype=Object.assign(Object.create(di.prototype),{constructor:nr,isPerspectiveCamera:!0,copy:function(e,t){return di.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ot.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ot.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ot.RAD2DEG*Math.atan(Math.tan(.5*Ot.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ot.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/a,t-=o.offsetY*i/s,n*=o.width/a,i*=o.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far)},toJSON:function(e){var t=hi.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),rr.prototype=Object.assign(Object.create(nr.prototype),{constructor:rr,isArrayCamera:!0}),sr.prototype.isFogExp2=!0,sr.prototype.clone=function(){return new sr(this.color,this.density)},sr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},lr.prototype.isFog=!0,lr.prototype.clone=function(){return new lr(this.color,this.near,this.far)},lr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},cr.prototype=Object.assign(Object.create(hi.prototype),{constructor:cr,copy:function(e,t){return hi.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=hi.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(ur.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ur.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(hr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(hr.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),dr.prototype=Object.create(Ni.prototype),dr.prototype.constructor=dr,dr.prototype.isSpriteMaterial=!0,dr.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},pr.prototype=Object.assign(Object.create(hi.prototype),{constructor:pr,isSprite:!0,raycast:function(){var e=new Ht,t=new Ht,i=new Ht,n=new Ft,r=new Ft,o=new Ut,a=new Ht,s=new Ht,l=new Ht;function c(e,t,i,a,s,l){n.subVectors(e,i).addScalar(.5).multiply(a),void 0!==s?(r.x=l*n.x-s*n.y,r.y=s*n.x+l*n.y):r.copy(n),e.copy(t),e.x+=r.x,e.y+=r.y,e.applyMatrix4(o)}return function(n,r){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),i.setFromMatrixPosition(this.modelViewMatrix);var u,h,d=this.material.rotation;0!==d&&(h=Math.cos(d),u=Math.sin(d));var p=this.center;c(a.set(-.5,-.5,0),i,p,t,u,h),c(s.set(.5,-.5,0),i,p,t,u,h),c(l.set(.5,.5,0),i,p,t,u,h);var f=n.ray.intersectTriangle(a,s,l,!1,e);if(null!==f||(c(s.set(-.5,.5,0),i,p,t,u,h),null!==(f=n.ray.intersectTriangle(a,l,s,!1,e)))){var m=n.ray.origin.distanceTo(e);m<n.near||m>n.far||r.push({distance:m,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return hi.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),fr.prototype=Object.assign(Object.create(hi.prototype),{constructor:fr,copy:function(e){hi.prototype.copy.call(this,e,!1);for(var t=e.levels,i=0,n=t.length;i<n;i++){var r=t[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);i.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:function(){var e=new Ht;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,i)}}(),update:function(){var e=new Ht,t=new Ht;return function(i){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);n[0].object.visible=!0;for(var o=1,a=n.length;o<a&&r>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<a;o++)n[o].object.visible=!1}}}(),toJSON:function(e){var t=hi.prototype.toJSON.call(this,e);t.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var o=i[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(mr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new Ut;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Ut,t=new Ut;return function(){for(var i=this.bones,n=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=i.length;a<s;a++){var l=i[a]?i[a].matrixWorld:t;e.multiplyMatrices(l,n[a]),e.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new mr(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}}),gr.prototype=Object.assign(Object.create(hi.prototype),{constructor:gr,isBone:!0}),_r.prototype=Object.assign(Object.create(Hi.prototype),{constructor:_r,isSkinnedMesh:!0,initBones:function(){var e,t,i,n,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,n=this.geometry.bones.length;i<n;i++)t=this.geometry.bones[i],e=new gr,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(i=0,n=this.geometry.bones.length;i<n;i++)-1!==(t=this.geometry.bones[i]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[i]):this.add(r[i])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];(e=1/i.manhattanLength())!=1/0?i.multiplyScalar(e):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new qt,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)n.x=r.getX(t),n.y=r.getY(t),n.z=r.getZ(t),n.w=r.getW(t),(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0),r.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Hi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vr.prototype=Object.create(Ni.prototype),vr.prototype.constructor=vr,vr.prototype.isLineBasicMaterial=!0,vr.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},yr.prototype=Object.assign(Object.create(hi.prototype),{constructor:yr,isLine:!0,computeLineDistances:function(){var e=new Ht,t=new Ht;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[0],o=1,a=n.count;o<a;o++)e.fromBufferAttribute(n,o-1),t.fromBufferAttribute(n,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);i.addAttribute("lineDistance",new Ci(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry){var s=i.vertices;for((r=i.lineDistances)[0]=0,o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new Ut,t=new Ui,i=new Kt;return function(n,r){var o=n.linePrecision,a=o*o,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),!1!==n.ray.intersectsSphere(i)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var c=new Ht,u=new Ht,h=new Ht,d=new Ht,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var g=f.array,_=0,v=g.length-1;_<v;_+=p){var y=g[_],A=g[_+1];c.fromArray(m,3*y),u.fromArray(m,3*A),t.distanceSqToSegment(c,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(d))<n.near||w>n.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this}))}else for(_=0,v=m.length/3-1;_<v;_+=p)c.fromArray(m,3*_),u.fromArray(m,3*_+3),t.distanceSqToSegment(c,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(d))<n.near||w>n.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var b=s.vertices,x=b.length;for(_=0;_<x-1;_+=p){var w;t.distanceSqToSegment(b[_],b[_+1],d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(d))<n.near||w>n.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ar.prototype=Object.assign(Object.create(yr.prototype),{constructor:Ar,isLineSegments:!0,computeLineDistances:function(){var e=new Ht,t=new Ht;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],o=0,a=n.count;o<a;o+=2)e.fromBufferAttribute(n,o),t.fromBufferAttribute(n,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);i.addAttribute("lineDistance",new Ci(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry){var s=i.vertices;for(r=i.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t)}return this}}()}),br.prototype=Object.assign(Object.create(yr.prototype),{constructor:br,isLineLoop:!0}),xr.prototype=Object.create(Ni.prototype),xr.prototype.constructor=xr,xr.prototype.isPointsMaterial=!0,xr.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},wr.prototype=Object.assign(Object.create(hi.prototype),{constructor:wr,isPoints:!0,raycast:function(){var e=new Ut,t=new Ui,i=new Kt;return function(n,r){var o=this,a=this.geometry,s=this.matrixWorld,l=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(s),i.radius+=l,!1!==n.ray.intersectsSphere(i)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new Ht,d=new Ht;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,_=m.length;g<_;g++){var v=m[g];h.fromArray(f,3*v),b(h,v)}else{g=0;for(var y=f.length/3;g<y;g++)h.fromArray(f,3*g),b(h,g)}}else{var A=a.vertices;for(g=0,y=A.length;g<y;g++)b(A[g],g)}}function b(e,i){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,d),d.applyMatrix4(s);var l=n.ray.origin.distanceTo(d);if(l<n.near||l>n.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:d.clone(),index:i,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Sr.prototype=Object.assign(Object.create(jt.prototype),{constructor:Sr,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Cr.prototype=Object.create(jt.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isCompressedTexture=!0,Er.prototype=Object.create(jt.prototype),Er.prototype.constructor=Er,Er.prototype.isCanvasTexture=!0,Tr.prototype=Object.create(jt.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isDepthTexture=!0,Mr.prototype=Object.create(Bi.prototype),Mr.prototype.constructor=Mr,Ir.prototype=Object.create(gi.prototype),Ir.prototype.constructor=Ir,Br.prototype=Object.create(Bi.prototype),Br.prototype.constructor=Br,Rr.prototype=Object.create(gi.prototype),Rr.prototype.constructor=Rr,Pr.prototype=Object.create(Bi.prototype),Pr.prototype.constructor=Pr,kr.prototype=Object.create(gi.prototype),kr.prototype.constructor=kr,Lr.prototype=Object.create(Pr.prototype),Lr.prototype.constructor=Lr,Dr.prototype=Object.create(gi.prototype),Dr.prototype.constructor=Dr,Nr.prototype=Object.create(Pr.prototype),Nr.prototype.constructor=Nr,Or.prototype=Object.create(gi.prototype),Or.prototype.constructor=Or,Fr.prototype=Object.create(Pr.prototype),Fr.prototype.constructor=Fr,Ur.prototype=Object.create(gi.prototype),Ur.prototype.constructor=Ur,zr.prototype=Object.create(Pr.prototype),zr.prototype.constructor=zr,Hr.prototype=Object.create(gi.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Object.create(Bi.prototype),Gr.prototype.constructor=Gr,Vr.prototype=Object.create(gi.prototype),Vr.prototype.constructor=Vr,Qr.prototype=Object.create(Bi.prototype),Qr.prototype.constructor=Qr,jr.prototype=Object.create(gi.prototype),jr.prototype.constructor=jr,qr.prototype=Object.create(Bi.prototype),qr.prototype.constructor=qr;function Wr(e,t,i,n,r){var o,a;if(r===function(e,t,i,n){for(var r=0,o=t,a=i-n;o<i;o+=n)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,i,n)>0)for(o=t;o<i;o+=n)a=ho(o,e[o],e[o+1],a);else for(o=i-n;o>=t;o-=n)a=ho(o,e[o],e[o+1],a);return a&&so(a,a.next)&&(po(a),a=a.next),a}function $r(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!so(n,n.next)&&0!==ao(n.prev,n,n.next))n=n.next;else{if(po(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function Xr(e,t,i,n,r,o,a){if(e){!a&&o&&function(e,t,i,n){var r=e;do{null===r.z&&(r.z=io(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,o,a,s,l,c=1;do{for(i=e,e=null,o=null,a=0;i;){for(a++,n=i,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}(e,n,r,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Kr(e,n,r,o):Yr(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),po(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Xr(e=Zr(e,t,i),t,i,n,r,o,2):2===a&&Jr(e,t,i,n,r,o):Xr($r(e),t,i,n,r,o,1);break}}}function Yr(e){var t=e.prev,i=e,n=e.next;if(ao(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(ro(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&ao(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Kr(e,t,i,n){var r=e.prev,o=e,a=e.next;if(ao(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=io(s,l,t,i,n),d=io(c,u,t,i,n),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&ro(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ao(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&ro(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ao(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Zr(e,t,i){var n=e;do{var r=n.prev,o=n.next.next;!so(r,o)&&lo(r,n,n.next,o)&&co(r,o)&&co(o,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(o.i/i),po(n),po(n.next),n=e=o),n=n.next}while(n!==e);return n}function Jr(e,t,i,n,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&oo(a,s)){var l=uo(a,s);return a=$r(a,a.next),l=$r(l,l.next),Xr(a,t,i,n,r,o),void Xr(l,t,i,n,r,o)}s=s.next}a=a.next}while(a!==e)}function eo(e,t){return e.x-t.x}function to(e,t){if(t=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===a)return i.prev;var l,c=i,u=i.x,h=i.y,d=1/0;for(n=i.next;n!==c;)r>=n.x&&n.x>=u&&r!==n.x&&ro(o<h?r:a,o,u,h,o<h?a:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<d||l===d&&n.x>i.x)&&co(n,e)&&(i=n,d=l),n=n.next;return i}(e,t)){var i=uo(t,e);$r(i,i.next)}}function io(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function no(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function ro(e,t,i,n,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(i-a)*(t-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function oo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&lo(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&co(e,t)&&co(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)}function ao(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function so(e,t){return e.x===t.x&&e.y===t.y}function lo(e,t,i,n){return!!(so(e,t)&&so(i,n)||so(e,n)&&so(i,t))||ao(e,t,i)>0!=ao(e,t,n)>0&&ao(i,n,e)>0!=ao(i,n,t)>0}function co(e,t){return ao(e.prev,e,e.next)<0?ao(e,t,e.next)>=0&&ao(e,e.prev,t)>=0:ao(e,t,e.prev)<0||ao(e,e.next,t)<0}function uo(e,t){var i=new fo(e.i,e.x,e.y),n=new fo(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function ho(e,t,i,n){var r=new fo(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function po(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fo(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var mo={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return mo.area(e)<0},triangulateShape:function(e,t){var i=[],n=[],r=[];go(e),_o(i,e);var o=e.length;t.forEach(go);for(var a=0;a<t.length;a++)n.push(o),o+=t[a].length,_o(i,t[a]);var s=function(e,t,i){i=i||2;var n,r,o,a,s,l,c,u=t&&t.length,h=u?t[0]*i:e.length,d=Wr(e,0,h,i,!0),p=[];if(!d)return p;if(u&&(d=function(e,t,i,n){var r,o,a,s=[];for(r=0,o=t.length;r<o;r++)(a=Wr(e,t[r]*n,r<o-1?t[r+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(no(a));for(s.sort(eo),r=0;r<s.length;r++)to(s[r],i),i=$r(i,i.next);return i}(e,t,d,i)),e.length>80*i){n=o=e[0],r=a=e[1];for(var f=i;f<h;f+=i)(s=e[f])<n&&(n=s),(l=e[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-n,a-r))?1/c:0}return Xr(d,p,i,n,r,c),p}(i,n);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function go(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function _o(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function vo(e,t){gi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new yo(e,t)),this.mergeVertices()}function yo(e,t){Bi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var i=this,n=[],r=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++)s(e[o]);function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,p=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Ao;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,g,_,v,y,A,b,x,w=!1;p&&(m=p.getSpacedPoints(s),w=!0,c=!1,g=p.computeFrenetFrames(s,!1),_=new Ht,v=new Ht,y=new Ht),c||(d=0,u=0,h=0);var S=e.extractPoints(a),C=S.shape,E=S.holes;if(!mo.isClockWise(C))for(C=C.reverse(),b=0,x=E.length;b<x;b++)A=E[b],mo.isClockWise(A)&&(E[b]=A.reverse());var T=mo.triangulateShape(C,E),M=C;for(b=0,x=E.length;b<x;b++)A=E[b],C=C.concat(A);function I(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}var B,R,P,k,L,D,N=C.length,O=T.length;function F(e,t,i){var n,r,o,a=e.x-t.x,s=e.y-t.y,l=i.x-e.x,c=i.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=t.x-s/d,m=t.y+a/d,g=((i.x-c/p-f)*c-(i.y+l/p-m)*l)/(a*c-s*l),_=(n=f+a*g-e.x)*n+(r=m+s*g-e.y)*r;if(_<=2)return new Ft(n,r);o=Math.sqrt(_/2)}else{var v=!1;a>Number.EPSILON?l>Number.EPSILON&&(v=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(s)===Math.sign(c)&&(v=!0),v?(n=-s,r=a,o=Math.sqrt(u)):(n=a,r=s,o=Math.sqrt(u/2))}return new Ft(n/o,r/o)}for(var U=[],z=0,H=M.length,G=H-1,V=z+1;z<H;z++,G++,V++)G===H&&(G=0),V===H&&(V=0),U[z]=F(M[z],M[G],M[V]);var Q,j,q=[],W=U.concat();for(b=0,x=E.length;b<x;b++){for(A=E[b],Q=[],z=0,G=(H=A.length)-1,V=z+1;z<H;z++,G++,V++)G===H&&(G=0),V===H&&(V=0),Q[z]=F(A[z],A[G],A[V]);q.push(Q),W=W.concat(Q)}for(B=0;B<d;B++){for(P=B/d,k=u*Math.cos(P*Math.PI/2),R=h*Math.sin(P*Math.PI/2),z=0,H=M.length;z<H;z++)X((L=I(M[z],U[z],R)).x,L.y,-k);for(b=0,x=E.length;b<x;b++)for(A=E[b],Q=q[b],z=0,H=A.length;z<H;z++)X((L=I(A[z],Q[z],R)).x,L.y,-k)}for(R=h,z=0;z<N;z++)L=c?I(C[z],W[z],R):C[z],w?(v.copy(g.normals[0]).multiplyScalar(L.x),_.copy(g.binormals[0]).multiplyScalar(L.y),y.copy(m[0]).add(v).add(_),X(y.x,y.y,y.z)):X(L.x,L.y,0);for(j=1;j<=s;j++)for(z=0;z<N;z++)L=c?I(C[z],W[z],R):C[z],w?(v.copy(g.normals[j]).multiplyScalar(L.x),_.copy(g.binormals[j]).multiplyScalar(L.y),y.copy(m[j]).add(v).add(_),X(y.x,y.y,y.z)):X(L.x,L.y,l/s*j);for(B=d-1;B>=0;B--){for(P=B/d,k=u*Math.cos(P*Math.PI/2),R=h*Math.sin(P*Math.PI/2),z=0,H=M.length;z<H;z++)X((L=I(M[z],U[z],R)).x,L.y,l+k);for(b=0,x=E.length;b<x;b++)for(A=E[b],Q=q[b],z=0,H=A.length;z<H;z++)L=I(A[z],Q[z],R),w?X(L.x,L.y+m[s-1].y,m[s-1].x+k):X(L.x,L.y,l+k)}function $(e,t){var i,n;for(z=e.length;--z>=0;){i=z,(n=z-1)<0&&(n=e.length-1);var r=0,o=s+2*d;for(r=0;r<o;r++){var a=N*r,l=N*(r+1);K(t+i+a,t+n+a,t+n+l,t+i+l)}}}function X(e,t,i){o.push(e),o.push(t),o.push(i)}function Y(e,t,r){Z(e),Z(t),Z(r);var o=n.length/3,a=f.generateTopUV(i,n,o-3,o-2,o-1);J(a[0]),J(a[1]),J(a[2])}function K(e,t,r,o){Z(e),Z(t),Z(o),Z(t),Z(r),Z(o);var a=n.length/3,s=f.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);J(s[0]),J(s[1]),J(s[3]),J(s[1]),J(s[2]),J(s[3])}function Z(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function J(e){r.push(e.x),r.push(e.y)}!function(){var e=n.length/3;if(c){var t=0,r=N*t;for(z=0;z<O;z++)Y((D=T[z])[2]+r,D[1]+r,D[0]+r);for(r=N*(t=s+2*d),z=0;z<O;z++)Y((D=T[z])[0]+r,D[1]+r,D[2]+r)}else{for(z=0;z<O;z++)Y((D=T[z])[2],D[1],D[0]);for(z=0;z<O;z++)Y((D=T[z])[0]+N*s,D[1]+N*s,D[2]+N*s)}i.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for($(M,t),t+=M.length,b=0,x=E.length;b<x;b++)$(A=E[b],t),t+=A.length;i.addGroup(e,n.length/3-e,1)}()}this.addAttribute("position",new Ci(n,3)),this.addAttribute("uv",new Ci(r,2)),this.computeVertexNormals()}vo.prototype=Object.create(gi.prototype),vo.prototype.constructor=vo,vo.prototype.toJSON=function(){var e=gi.prototype.toJSON.call(this);return bo(this.parameters.shapes,this.parameters.options,e)},yo.prototype=Object.create(Bi.prototype),yo.prototype.constructor=yo,yo.prototype.toJSON=function(){var e=Bi.prototype.toJSON.call(this);return bo(this.parameters.shapes,this.parameters.options,e)};var Ao={generateTopUV:function(e,t,i,n,r){var o=t[3*i],a=t[3*i+1],s=t[3*n],l=t[3*n+1],c=t[3*r],u=t[3*r+1];return[new Ft(o,a),new Ft(s,l),new Ft(c,u)]},generateSideWallUV:function(e,t,i,n,r,o){var a=t[3*i],s=t[3*i+1],l=t[3*i+2],c=t[3*n],u=t[3*n+1],h=t[3*n+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],_=t[3*o+2];return Math.abs(s-u)<.01?[new Ft(a,1-l),new Ft(c,1-h),new Ft(d,1-f),new Ft(m,1-_)]:[new Ft(s,1-l),new Ft(u,1-h),new Ft(p,1-f),new Ft(g,1-_)]}};function bo(e,t,i){if(i.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var o=e[n];i.shapes.push(o.uuid)}else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function xo(e,t){gi.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new wo(e,t)),this.mergeVertices()}function wo(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new gi;var n=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),yo.call(this,n,t),this.type="TextBufferGeometry"}function So(e,t,i,n,r,o,a){gi.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Co(e,t,i,n,r,o,a)),this.mergeVertices()}function Co(e,t,i,n,r,o,a){Bi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var s,l,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,h=[],d=new Ht,p=new Ht,f=[],m=[],g=[],_=[];for(l=0;l<=i;l++){var v=[],y=l/i;for(s=0;s<=t;s++){var A=s/t;d.x=-e*Math.cos(n+A*r)*Math.sin(o+y*a),d.y=e*Math.cos(o+y*a),d.z=e*Math.sin(n+A*r)*Math.sin(o+y*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),_.push(A,1-y),v.push(u++)}h.push(v)}for(l=0;l<i;l++)for(s=0;s<t;s++){var b=h[l][s+1],x=h[l][s],w=h[l+1][s],S=h[l+1][s+1];(0!==l||o>0)&&f.push(b,x,S),(l!==i-1||c<Math.PI)&&f.push(x,w,S)}this.setIndex(f),this.addAttribute("position",new Ci(m,3)),this.addAttribute("normal",new Ci(g,3)),this.addAttribute("uv",new Ci(_,2))}function Eo(e,t,i,n,r,o){gi.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new To(e,t,i,n,r,o)),this.mergeVertices()}function To(e,t,i,n,r,o){Bi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a,s,l,c=[],u=[],h=[],d=[],p=e,f=(t-e)/(n=void 0!==n?Math.max(1,n):1),m=new Ht,g=new Ft;for(s=0;s<=n;s++){for(l=0;l<=i;l++)a=r+l/i*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);p+=f}for(s=0;s<n;s++){var _=s*(i+1);for(l=0;l<i;l++){var v=a=l+_,y=a+i+1,A=a+i+2,b=a+1;c.push(v,y,b),c.push(y,A,b)}}this.setIndex(c),this.addAttribute("position",new Ci(u,3)),this.addAttribute("normal",new Ci(h,3)),this.addAttribute("uv",new Ci(d,2))}function Mo(e,t,i,n){gi.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new Io(e,t,i,n)),this.mergeVertices()}function Io(e,t,i,n){Bi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=Ot.clamp(n,0,2*Math.PI);var r,o,a,s=[],l=[],c=[],u=1/t,h=new Ht,d=new Ft;for(o=0;o<=t;o++){var p=i+o*u*n,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),c.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=r=a+o*e.length,_=r+e.length,v=r+e.length+1,y=r+1;s.push(g,_,y),s.push(_,v,y)}if(this.setIndex(s),this.addAttribute("position",new Ci(l,3)),this.addAttribute("uv",new Ci(c,2)),this.computeVertexNormals(),n===2*Math.PI){var A=this.attributes.normal.array,b=new Ht,x=new Ht,w=new Ht;for(r=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)b.x=A[a+0],b.y=A[a+1],b.z=A[a+2],x.x=A[r+a+0],x.y=A[r+a+1],x.z=A[r+a+2],w.addVectors(b,x).normalize(),A[a+0]=A[r+a+0]=w.x,A[a+1]=A[r+a+1]=w.y,A[a+2]=A[r+a+2]=w.z}}function Bo(e,t){gi.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Ro(e,t)),this.mergeVertices()}function Ro(e,t){Bi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],n=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,s,l),a+=s,s=0;function c(e){var a,l,c,u=n.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;if(!1===mo.isClockWise(d))for(d=d.reverse(),a=0,l=p.length;a<l;a++)c=p[a],!0===mo.isClockWise(c)&&(p[a]=c.reverse());var f=mo.triangulateShape(d,p);for(a=0,l=p.length;a<l;a++)c=p[a],d=d.concat(c);for(a=0,l=d.length;a<l;a++){var m=d[a];n.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var g=f[a],_=g[0]+u,v=g[1]+u,y=g[2]+u;i.push(_,v,y),s+=3}}this.setIndex(i),this.addAttribute("position",new Ci(n,3)),this.addAttribute("normal",new Ci(r,3)),this.addAttribute("uv",new Ci(o,2))}function Po(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++){var r=e[i];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function ko(e,t){Bi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var i,n,r,o,a=[],s=Math.cos(Ot.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(o=new gi).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)i=m[u[g]],n=m[u[(g+1)%3]],l[0]=Math.min(i,n),l[1]=Math.max(i,n),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var _=c[r];if(void 0===_.face2||d[_.face1].normal.dot(d[_.face2].normal)<=s){var v=h[_.index1];a.push(v.x,v.y,v.z),v=h[_.index2],a.push(v.x,v.y,v.z)}}this.addAttribute("position",new Ci(a,3))}function Lo(e,t,i,n,r,o,a,s){gi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Do(e,t,i,n,r,o,a,s)),this.mergeVertices()}function Do(e,t,i,n,r,o,a,s){Bi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],h=[],d=[],p=0,f=[],m=i/2,g=0;function _(i){var r,o,f,_=new Ft,v=new Ht,y=0,A=!0===i?e:t,b=!0===i?1:-1;for(o=p,r=1;r<=n;r++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;for(f=p,r=0;r<=n;r++){var x=r/n*s+a,w=Math.cos(x),S=Math.sin(x);v.x=A*S,v.y=m*b,v.z=A*w,u.push(v.x,v.y,v.z),h.push(0,b,0),_.x=.5*w+.5,_.y=.5*S*b+.5,d.push(_.x,_.y),p++}for(r=0;r<n;r++){var C=o+r,E=f+r;!0===i?c.push(E,E+1,C):c.push(E+1,E,C),y+=3}l.addGroup(g,y,!0===i?1:2),g+=y}!function(){var o,_,v=new Ht,y=new Ht,A=0,b=(t-e)/i;for(_=0;_<=r;_++){var x=[],w=_/r,S=w*(t-e)+e;for(o=0;o<=n;o++){var C=o/n,E=C*s+a,T=Math.sin(E),M=Math.cos(E);y.x=S*T,y.y=-w*i+m,y.z=S*M,u.push(y.x,y.y,y.z),v.set(T,b,M).normalize(),h.push(v.x,v.y,v.z),d.push(C,1-w),x.push(p++)}f.push(x)}for(o=0;o<n;o++)for(_=0;_<r;_++){var I=f[_][o],B=f[_+1][o],R=f[_+1][o+1],P=f[_][o+1];c.push(I,B,P),c.push(B,R,P),A+=6}l.addGroup(g,A,0),g+=A}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.addAttribute("position",new Ci(u,3)),this.addAttribute("normal",new Ci(h,3)),this.addAttribute("uv",new Ci(d,2))}function No(e,t,i,n,r,o,a){Lo.call(this,0,e,t,i,n,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function Oo(e,t,i,n,r,o,a){Do.call(this,0,e,t,i,n,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function Fo(e,t,i,n){gi.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Uo(e,t,i,n)),this.mergeVertices()}function Uo(e,t,i,n){Bi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,o,a=[],s=[],l=[],c=[],u=new Ht,h=new Ft;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,r=3;o<=t;o++,r+=3){var d=i+o/t*n;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,c.push(h.x,h.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new Ci(s,3)),this.addAttribute("normal",new Ci(l,3)),this.addAttribute("uv",new Ci(c,2))}xo.prototype=Object.create(gi.prototype),xo.prototype.constructor=xo,wo.prototype=Object.create(yo.prototype),wo.prototype.constructor=wo,So.prototype=Object.create(gi.prototype),So.prototype.constructor=So,Co.prototype=Object.create(Bi.prototype),Co.prototype.constructor=Co,Eo.prototype=Object.create(gi.prototype),Eo.prototype.constructor=Eo,To.prototype=Object.create(Bi.prototype),To.prototype.constructor=To,Mo.prototype=Object.create(gi.prototype),Mo.prototype.constructor=Mo,Io.prototype=Object.create(Bi.prototype),Io.prototype.constructor=Io,Bo.prototype=Object.create(gi.prototype),Bo.prototype.constructor=Bo,Bo.prototype.toJSON=function(){var e=gi.prototype.toJSON.call(this);return Po(this.parameters.shapes,e)},Ro.prototype=Object.create(Bi.prototype),Ro.prototype.constructor=Ro,Ro.prototype.toJSON=function(){var e=Bi.prototype.toJSON.call(this);return Po(this.parameters.shapes,e)},ko.prototype=Object.create(Bi.prototype),ko.prototype.constructor=ko,Lo.prototype=Object.create(gi.prototype),Lo.prototype.constructor=Lo,Do.prototype=Object.create(Bi.prototype),Do.prototype.constructor=Do,No.prototype=Object.create(Lo.prototype),No.prototype.constructor=No,Oo.prototype=Object.create(Do.prototype),Oo.prototype.constructor=Oo,Fo.prototype=Object.create(gi.prototype),Fo.prototype.constructor=Fo,Uo.prototype=Object.create(Bi.prototype),Uo.prototype.constructor=Uo;var zo=Object.freeze({WireframeGeometry:Mr,ParametricGeometry:Ir,ParametricBufferGeometry:Br,TetrahedronGeometry:kr,TetrahedronBufferGeometry:Lr,OctahedronGeometry:Dr,OctahedronBufferGeometry:Nr,IcosahedronGeometry:Or,IcosahedronBufferGeometry:Fr,DodecahedronGeometry:Ur,DodecahedronBufferGeometry:zr,PolyhedronGeometry:Rr,PolyhedronBufferGeometry:Pr,TubeGeometry:Hr,TubeBufferGeometry:Gr,TorusKnotGeometry:Vr,TorusKnotBufferGeometry:Qr,TorusGeometry:jr,TorusBufferGeometry:qr,TextGeometry:xo,TextBufferGeometry:wo,SphereGeometry:So,SphereBufferGeometry:Co,RingGeometry:Eo,RingBufferGeometry:To,PlaneGeometry:ki,PlaneBufferGeometry:Li,LatheGeometry:Mo,LatheBufferGeometry:Io,ShapeGeometry:Bo,ShapeBufferGeometry:Ro,ExtrudeGeometry:vo,ExtrudeBufferGeometry:yo,EdgesGeometry:ko,ConeGeometry:No,ConeBufferGeometry:Oo,CylinderGeometry:Lo,CylinderBufferGeometry:Do,CircleGeometry:Fo,CircleBufferGeometry:Uo,BoxGeometry:Ri,BoxBufferGeometry:Pi});function Ho(e){Ni.call(this),this.type="ShadowMaterial",this.color=new ni(0),this.transparent=!0,this.setValues(e)}function Go(e){Fi.call(this,e),this.type="RawShaderMaterial"}function Vo(e){Ni.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ni(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ni(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Qo(e){Vo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function jo(e){Ni.call(this),this.type="MeshPhongMaterial",this.color=new ni(16777215),this.specular=new ni(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ni(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function qo(e){jo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Wo(e){Ni.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dt,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $o(e){Ni.call(this),this.type="MeshLambertMaterial",this.color=new ni(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ni(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xo(e){vr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Ho.prototype=Object.create(Ni.prototype),Ho.prototype.constructor=Ho,Ho.prototype.isShadowMaterial=!0,Ho.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this},Go.prototype=Object.create(Fi.prototype),Go.prototype.constructor=Go,Go.prototype.isRawShaderMaterial=!0,Vo.prototype=Object.create(Ni.prototype),Vo.prototype.constructor=Vo,Vo.prototype.isMeshStandardMaterial=!0,Vo.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Qo.prototype=Object.create(Vo.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isMeshPhysicalMaterial=!0,Qo.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},jo.prototype=Object.create(Ni.prototype),jo.prototype.constructor=jo,jo.prototype.isMeshPhongMaterial=!0,jo.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},qo.prototype=Object.create(jo.prototype),qo.prototype.constructor=qo,qo.prototype.isMeshToonMaterial=!0,qo.prototype.copy=function(e){return jo.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Wo.prototype=Object.create(Ni.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isMeshNormalMaterial=!0,Wo.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$o.prototype=Object.create(Ni.prototype),$o.prototype.constructor=$o,$o.prototype.isMeshLambertMaterial=!0,$o.prototype.copy=function(e){return Ni.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Xo.prototype=Object.create(vr.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isLineDashedMaterial=!0,Xo.prototype.copy=function(e){return vr.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Yo=Object.freeze({ShadowMaterial:Ho,SpriteMaterial:dr,RawShaderMaterial:Go,ShaderMaterial:Fi,PointsMaterial:xr,MeshPhysicalMaterial:Qo,MeshStandardMaterial:Vo,MeshPhongMaterial:jo,MeshToonMaterial:qo,MeshNormalMaterial:Wo,MeshLambertMaterial:$o,MeshDepthMaterial:Kn,MeshDistanceMaterial:Zn,MeshBasicMaterial:Oi,LineDashedMaterial:Xo,LineBasicMaterial:vr,Material:Ni}),Ko={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Zo(e,t,i){var n=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===r&&void 0!==n.onStart&&n.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Jo=new Zo,ea={};function ta(e){this.manager=void 0!==e?e:Jo}function ia(e){this.manager=void 0!==e?e:Jo,this._parser=null}function na(e){this.manager=void 0!==e?e:Jo,this._parser=null}function ra(e){this.manager=void 0!==e?e:Jo}function oa(e){this.manager=void 0!==e?e:Jo}function aa(e){this.manager=void 0!==e?e:Jo}function sa(){this.type="Curve",this.arcLengthDivisions=200}function la(e,t,i,n,r,o,a,s){sa.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ca(e,t,i,n,r,o){la.call(this,e,t,i,i,n,r,o),this.type="ArcCurve"}function ua(){var e=0,t=0,i=0,n=0;function r(r,o,a,s){e=r,t=a,i=-3*r+3*o-2*a-s,n=2*r-2*o+a+s}return{initCatmullRom:function(e,t,i,n,o){r(t,i,o*(i-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,o,a,s){var l=(t-e)/o-(i-e)/(o+a)+(i-t)/a,c=(i-t)/a-(n-t)/(a+s)+(n-i)/s;r(t,i,l*=a,c*=a)},calc:function(r){var o=r*r;return e+t*r+i*o+n*(o*r)}}}Object.assign(ta.prototype,{load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Ko.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0===ea[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);u="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout((function(){t&&t(u),r.manager.itemEnd(e)}),0)}catch(t){window.setTimeout((function(){n&&n(t),r.manager.itemEnd(e),r.manager.itemError(e)}),0)}}else{ea[e]=[],ea[e].push({onLoad:t,onProgress:i,onError:n});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var i=this.response;Ko.add(e,i);var n=ea[e];if(delete ea[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=n.length;o<a;o++)(s=n[o]).onLoad&&s.onLoad(i);r.manager.itemEnd(e)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}}),!1),m.addEventListener("progress",(function(t){for(var i=ea[e],n=0,r=i.length;n<r;n++){var o=i[n];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var i=ea[e];delete ea[e];for(var n=0,o=i.length;n<o;n++){var a=i[n];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}ea[e].push({onLoad:t,onProgress:i,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(ia.prototype,{load:function(e,t,i,n){var r=this,o=[],a=new Cr;a.image=o;var s=new ta(this.manager);function l(l){s.load(e[l],(function(e){var i=r._parser(e,!0);o[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(c+=1)&&(1===i.mipmapCount&&(a.minFilter=be),a.format=i.format,a.needsUpdate=!0,t&&t(a))}),i,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,h=e.length;u<h;++u)l(u);else s.load(e,(function(e){var i=r._parser(e,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)o[s].mipmaps.push(i.mipmaps[s*i.mipmapCount+l]),o[s].format=i.format,o[s].width=i.width,o[s].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=be),a.format=i.format,a.needsUpdate=!0,t&&t(a)}),i,n);return a},setPath:function(e){return this.path=e,this}}),Object.assign(na.prototype,{load:function(e,t,i,n){var r=this,o=new Xt,a=new ta(this.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(e){var i=r._parser(e);i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:ge,o.wrapT=void 0!==i.wrapT?i.wrapT:ge,o.magFilter=void 0!==i.magFilter?i.magFilter:be,o.minFilter=void 0!==i.minFilter?i.minFilter:we,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=be),o.needsUpdate=!0,t&&t(o,i))}),i,n),o}}),Object.assign(ra.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Ko.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),Ko.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),n&&n(t),r.manager.itemEnd(e),r.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(oa.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=new Vi,o=new ra(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(i){o.load(e[i],(function(e){r.images[i]=e,6==++a&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(var l=0;l<e.length;++l)s(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(aa.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=new jt,o=new ra(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(i){r.image=i;var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=n?Oe:Fe,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(sa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;i<=e;i++)o+=(t=this.getPoint(i/e)).distanceTo(r),n.push(o),r=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i,n=this.getLengths(),r=0,o=n.length;i=t||e*n[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=n[r=Math.floor(s+(l-s)/2)]-i)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(n[r=l]===i)return r/(o-1);var c=n[r];return(r+(i-c)/(n[r+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),i>1&&(i=1);var n=this.getPoint(t);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i,n,r,o=new Ht,a=[],s=[],l=[],c=new Ht,u=new Ut;for(i=0;i<=e;i++)n=i/e,a[i]=this.getTangentAt(n),a[i].normalize();s[0]=new Ht,l[0]=new Ht;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),i=1;i<=e;i++)s[i]=s[i-1].clone(),l[i]=l[i-1].clone(),c.crossVectors(a[i-1],a[i]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(Ot.clamp(a[i-1].dot(a[i]),-1,1)),s[i].applyMatrix4(u.makeRotationAxis(c,r))),l[i].crossVectors(a[i],s[i]);if(!0===t)for(r=Math.acos(Ot.clamp(s[0].dot(s[e]),-1,1)),r/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(r=-r),i=1;i<=e;i++)s[i].applyMatrix4(u.makeRotationAxis(a[i],r*i)),l[i].crossVectors(a[i],s[i]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),la.prototype=Object.create(sa.prototype),la.prototype.constructor=la,la.prototype.isEllipseCurve=!0,la.prototype.getPoint=function(e,t){for(var i=t||new Ft,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0!==this.aClockwise||o||(r===n?r=-n:r-=n);var a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*c-d*u+this.aX,l=h*u+d*c+this.aY}return i.set(s,l)},la.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},la.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},la.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ca.prototype=Object.create(la.prototype),ca.prototype.constructor=ca,ca.prototype.isArcCurve=!0;var ha=new Ht,da=new ua,pa=new ua,fa=new ua;function ma(e,t,i,n){sa.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function ga(e,t,i,n,r){var o=.5*(n-t),a=.5*(r-i),s=e*e;return(2*i-2*n+o+a)*(e*s)+(-3*i+3*n-2*o-a)*s+o*e+i}function _a(e,t,i,n){return function(e,t){var i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function va(e,t,i,n,r){return function(e,t){var i=1-e;return i*i*i*t}(e,t)+function(e,t){var i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}function ya(e,t,i,n){sa.call(this),this.type="CubicBezierCurve",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=i||new Ft,this.v3=n||new Ft}function Aa(e,t,i,n){sa.call(this),this.type="CubicBezierCurve3",this.v0=e||new Ht,this.v1=t||new Ht,this.v2=i||new Ht,this.v3=n||new Ht}function ba(e,t){sa.call(this),this.type="LineCurve",this.v1=e||new Ft,this.v2=t||new Ft}function xa(e,t){sa.call(this),this.type="LineCurve3",this.v1=e||new Ht,this.v2=t||new Ht}function wa(e,t,i){sa.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=i||new Ft}function Sa(e,t,i){sa.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Ht,this.v1=t||new Ht,this.v2=i||new Ht}function Ca(e){sa.call(this),this.type="SplineCurve",this.points=e||[]}ma.prototype=Object.create(sa.prototype),ma.prototype.constructor=ma,ma.prototype.isCatmullRomCurve3=!0,ma.prototype.getPoint=function(e,t){var i,n,r,o,a=t||new Ht,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),h=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===h&&u===l-1&&(u=l-2,h=1),this.closed||u>0?i=s[(u-1)%l]:(ha.subVectors(s[0],s[1]).add(s[0]),i=ha),n=s[u%l],r=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(ha.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=ha),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(i.distanceToSquared(n),d),f=Math.pow(n.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),da.initNonuniformCatmullRom(i.x,n.x,r.x,o.x,p,f,m),pa.initNonuniformCatmullRom(i.y,n.y,r.y,o.y,p,f,m),fa.initNonuniformCatmullRom(i.z,n.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(da.initCatmullRom(i.x,n.x,r.x,o.x,this.tension),pa.initCatmullRom(i.y,n.y,r.y,o.y,this.tension),fa.initCatmullRom(i.z,n.z,r.z,o.z,this.tension));return a.set(da.calc(h),pa.calc(h),fa.calc(h)),a},ma.prototype.copy=function(e){sa.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ma.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ma.prototype.fromJSON=function(e){sa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new Ht).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ya.prototype=Object.create(sa.prototype),ya.prototype.constructor=ya,ya.prototype.isCubicBezierCurve=!0,ya.prototype.getPoint=function(e,t){var i=t||new Ft,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(va(e,n.x,r.x,o.x,a.x),va(e,n.y,r.y,o.y,a.y)),i},ya.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ya.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ya.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Aa.prototype=Object.create(sa.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isCubicBezierCurve3=!0,Aa.prototype.getPoint=function(e,t){var i=t||new Ht,n=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(va(e,n.x,r.x,o.x,a.x),va(e,n.y,r.y,o.y,a.y),va(e,n.z,r.z,o.z,a.z)),i},Aa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Aa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Aa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ba.prototype=Object.create(sa.prototype),ba.prototype.constructor=ba,ba.prototype.isLineCurve=!0,ba.prototype.getPoint=function(e,t){var i=t||new Ft;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},ba.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ba.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ba.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ba.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ba.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},xa.prototype=Object.create(sa.prototype),xa.prototype.constructor=xa,xa.prototype.isLineCurve3=!0,xa.prototype.getPoint=function(e,t){var i=t||new Ht;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},xa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},xa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},xa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},xa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},wa.prototype=Object.create(sa.prototype),wa.prototype.constructor=wa,wa.prototype.isQuadraticBezierCurve=!0,wa.prototype.getPoint=function(e,t){var i=t||new Ft,n=this.v0,r=this.v1,o=this.v2;return i.set(_a(e,n.x,r.x,o.x),_a(e,n.y,r.y,o.y)),i},wa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},wa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},wa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Sa.prototype=Object.create(sa.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isQuadraticBezierCurve3=!0,Sa.prototype.getPoint=function(e,t){var i=t||new Ht,n=this.v0,r=this.v1,o=this.v2;return i.set(_a(e,n.x,r.x,o.x),_a(e,n.y,r.y,o.y),_a(e,n.z,r.z,o.z)),i},Sa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Sa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Sa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ca.prototype=Object.create(sa.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isSplineCurve=!0,Ca.prototype.getPoint=function(e,t){var i=t||new Ft,n=this.points,r=(n.length-1)*e,o=Math.floor(r),a=r-o,s=n[0===o?o:o-1],l=n[o],c=n[o>n.length-2?n.length-1:o+1],u=n[o>n.length-3?n.length-1:o+2];return i.set(ga(a,s.x,l.x,c.x,u.x),ga(a,s.y,l.y,c.y,u.y)),i},Ca.prototype.copy=function(e){sa.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this},Ca.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e},Ca.prototype.fromJSON=function(e){sa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new Ft).fromArray(n))}return this};var Ea=Object.freeze({ArcCurve:ca,CatmullRomCurve3:ma,CubicBezierCurve:ya,CubicBezierCurve3:Aa,EllipseCurve:la,LineCurve:ba,LineCurve3:xa,QuadraticBezierCurve:wa,QuadraticBezierCurve3:Sa,SplineCurve:Ca});function Ta(){sa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ma(e){Ta.call(this),this.type="Path",this.currentPoint=new Ft,e&&this.setFromPoints(e)}function Ia(e){Ma.call(this,e),this.uuid=Ot.generateUUID(),this.type="Shape",this.holes=[]}function Ba(e,t){hi.call(this),this.type="Light",this.color=new ni(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ra(e,t,i){Ba.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(hi.DefaultUp),this.updateMatrix(),this.groundColor=new ni(t)}function Pa(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Ft(512,512),this.map=null,this.matrix=new Ut}function ka(){Pa.call(this,new nr(50,1,.5,500))}function La(e,t,i,n,r,o){Ba.call(this,e,t),this.type="SpotLight",this.position.copy(hi.DefaultUp),this.updateMatrix(),this.target=new hi,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new ka}function Da(e,t,i,n){Ba.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Pa(new nr(90,1,.5,500))}function Na(){Pa.call(this,new pi(-5,5,5,-5,.5,500))}function Oa(e,t){Ba.call(this,e,t),this.type="DirectionalLight",this.position.copy(hi.DefaultUp),this.updateMatrix(),this.target=new hi,this.shadow=new Na}function Fa(e,t){Ba.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ua(e,t,i,n){Ba.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}Ta.prototype=Object.assign(Object.create(sa.prototype),{constructor:Ta,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ba(t,e))},getPoint:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=t){var r=i[n]-t,o=this.curves[n],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=r[n],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(i.push(c),t=c)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){sa.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=sa.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){sa.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push((new Ea[n.type]).fromJSON(n))}return this}}),Ma.prototype=Object.assign(Object.create(Ta.prototype),{constructor:Ma,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new ba(this.currentPoint.clone(),new Ft(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){var r=new wa(this.currentPoint.clone(),new Ft(e,t),new Ft(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,r,o){var a=new ya(this.currentPoint.clone(),new Ft(e,t),new Ft(i,n),new Ft(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(e){var t=new Ca([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,i,n,r,o)},absarc:function(e,t,i,n,r,o){this.absellipse(e,t,i,i,n,r,o)},ellipse:function(e,t,i,n,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,i,n,r,o,a,s)},absellipse:function(e,t,i,n,r,o,a,s){var l=new la(e,t,i,n,r,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Ta.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ta.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ta.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ia.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Ia,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ma.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Ma.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Ma.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push((new Ma).fromJSON(n))}return this}}),Ba.prototype=Object.assign(Object.create(hi.prototype),{constructor:Ba,isLight:!0,copy:function(e){return hi.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=hi.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ra.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Ra,isHemisphereLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Pa.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),ka.prototype=Object.assign(Object.create(Pa.prototype),{constructor:ka,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*Ot.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix())}}),La.prototype=Object.assign(Object.create(Ba.prototype),{constructor:La,isSpotLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Da.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Da,isPointLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Na.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Na}),Oa.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Oa,isDirectionalLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Fa.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Fa,isAmbientLight:!0}),Ua.prototype=Object.assign(Object.create(Ba.prototype),{constructor:Ua,isRectAreaLight:!0,copy:function(e){return Ba.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ba.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var za={arraySlice:function(e,t,i){return za.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=new Array(t),n=0;n!==t;++n)i[n]=n;return i.sort((function(t,i){return e[t]-e[i]})),i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*t,l=0;l!==t;++l)r[a++]=e[s+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(t.push(o.time),i.push.apply(i,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(t.push(o.time),a.toArray(i,i.length)),o=e[r++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(t.push(o.time),i.push(a)),o=e[r++]}while(void 0!==o)}}};function Ha(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function Ga(e,t,i,n){Ha.call(this,e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Va(e,t,i,n){Ha.call(this,e,t,i,n)}function Qa(e,t,i,n){Ha.call(this,e,t,i,n)}function ja(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=za.convertArray(t,this.TimeBufferType),this.values=za.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function qa(e,t,i){ja.call(this,e,t,i)}function Wa(e,t,i,n){ja.call(this,e,t,i,n)}function $a(e,t,i,n){ja.call(this,e,t,i,n)}function Xa(e,t,i,n){Ha.call(this,e,t,i,n)}function Ya(e,t,i,n){ja.call(this,e,t,i,n)}function Ka(e,t,i,n){ja.call(this,e,t,i,n)}function Za(e,t,i,n){ja.call(this,e,t,i,n)}function Ja(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=Ot.generateUUID(),this.duration<0&&this.resetDuration()}function es(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $a;case"vector":case"vector2":case"vector3":case"vector4":return Za;case"color":return Wa;case"quaternion":return Ya;case"bool":case"boolean":return qa;case"string":return Ka}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var i=[],n=[];za.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function ts(e){this.manager=void 0!==e?e:Jo,this.textures={}}function is(e){this.manager=void 0!==e?e:Jo}Object.assign(Ha.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{var o;i:{n:if(!(e<n)){for(var a=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,e<(n=t[++i]))break t}o=t.length;break i}if(e>=r)break e;var s=t[1];for(e<s&&(i=2,r=s),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,e>=(r=t[--i-1]))break t}o=i,i=0}for(;i<o;){var l=i+o>>>1;e<t[l]?o=l:i=l+1}if(n=t[i],void 0===(r=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n,o=0;o!==n;++o)t[o]=i[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ha.prototype,{beforeStart_:Ha.prototype.copySampleValue_,afterEnd_:Ha.prototype.copySampleValue_}),Ga.prototype=Object.assign(Object.create(Ha.prototype),{constructor:Ga,DefaultSettings_:{endingStart:yt,endingEnd:yt},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,o=e+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case At:r=e,a=2*t-i;break;case bt:a=t+n[r=n.length-2]-n[r+1];break;default:r=e,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case At:o=e,s=2*i-t;break;case bt:o=1,s=i+n[1]-n[0];break;default:o=e-1,s=t}var l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-i),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,_=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f,A=0;A!==a;++A)r[A]=g*o[c+A]+_*o[l+A]+v*o[s+A]+y*o[u+A];return r}}),Va.prototype=Object.assign(Object.create(Ha.prototype),{constructor:Va,interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(i-t)/(n-t),u=1-c,h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}),Qa.prototype=Object.assign(Object.create(Ha.prototype),{constructor:Qa,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(ja,{toJSON:function(e){var t,i=e.constructor;if(void 0!==i.toJSON)t=i.toJSON(e);else{t={name:e.name,times:za.convertArray(e.times,Array),values:za.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(ja.prototype,{constructor:ja,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:_t,InterpolantFactoryMethodDiscrete:function(e){return new Qa(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Va(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ga(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case gt:t=this.InterpolantFactoryMethodDiscrete;break;case _t:t=this.InterpolantFactoryMethodLinear;break;case vt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gt;case this.InterpolantFactoryMethodLinear:return _t;case this.InterpolantFactoryMethodSmooth:return vt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==r||o!==n){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=za.arraySlice(i,r,o),this.values=za.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==r;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==n&&za.isTypedArray(n)){a=0;for(var l=n.length;a!==l;++a){var c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=this.getInterpolation()===vt,r=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(n)s=!0;else for(var c=a*i,u=c-i,h=c+i,d=0;d!==i;++d){var p=t[c+d];if(p!==t[u+d]||p!==t[h+d]){s=!0;break}}if(s){if(a!==r){e[r]=e[a];var f=a*i,m=r*i;for(d=0;d!==i;++d)t[m+d]=t[f+d]}++r}}if(o>0){for(e[r]=e[o],f=o*i,m=r*i,d=0;d!==i;++d)t[m+d]=t[f+d];++r}return r!==e.length&&(this.times=za.arraySlice(e,0,r),this.values=za.arraySlice(t,0,r*i)),this}}),qa.prototype=Object.assign(Object.create(ja.prototype),{constructor:qa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Wa.prototype=Object.assign(Object.create(ja.prototype),{constructor:Wa,ValueTypeName:"color"}),$a.prototype=Object.assign(Object.create(ja.prototype),{constructor:$a,ValueTypeName:"number"}),Xa.prototype=Object.assign(Object.create(Ha.prototype),{constructor:Xa,interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(i-t)/(n-t),c=s+a;s!==c;s+=4)zt.slerpFlat(r,0,o,s-a,o,s,l);return r}}),Ya.prototype=Object.assign(Object.create(ja.prototype),{constructor:Ya,ValueTypeName:"quaternion",DefaultInterpolation:_t,InterpolantFactoryMethodLinear:function(e){return new Xa(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ka.prototype=Object.assign(Object.create(ja.prototype),{constructor:Ka,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Za.prototype=Object.assign(Object.create(ja.prototype),{constructor:Za,ValueTypeName:"vector"}),Object.assign(Ja,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,o=i.length;r!==o;++r)t.push(es(i[r]).scale(n));return new Ja(e.name,e.duration,t)},toJSON:function(e){for(var t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,o=i.length;r!==o;++r)t.push(ja.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=za.getKeyframeOrder(s);s=za.sortedArray(s,1,c),l=za.sortedArray(l,1,c),n||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new $a(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/i))}return new Ja(e,-1,o)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var n=e;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(r);if(l&&l.length>1){var c=n[h=l[1]];c||(n[h]=c=[]),c.push(s)}}var u=[];for(var h in n)u.push(Ja.CreateFromMorphTargetSequence(h,n[h],t,i));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(e,t,i,n,r){if(0!==i.length){var o=[],a=[];za.flattenJSON(i,o,a,n),0!==o.length&&r.push(new e(t,o,a))}},n=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;for(var p in u){var f=[],m=[];for(d=0;d!==c[h].morphTargets.length;++d){var g=c[h];f.push(g.time),m.push(g.morphTarget===p?1:0)}n.push(new $a(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var _=".bones["+t[l].name+"]";i(Za,_+".position",c,"pos",n),i(Ya,_+".quaternion",c,"rot",n),i(Za,_+".scale",c,"scl",n)}}return 0===n.length?null:new Ja(r,o,n)}}),Object.assign(Ja.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(ts.prototype,{load:function(e,t,i,n){var r=this;new ta(r.manager).load(e,(function(e){t(r.parse(JSON.parse(e)))}),i,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Yo[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new Ft).fromArray(r)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),n}}),Object.assign(is.prototype,{load:function(e,t,i,n){var r=this;new ta(r.manager).load(e,(function(e){t(r.parse(JSON.parse(e)))}),i,n)},parse:function(e){var t=new Bi,i=e.data.index;if(void 0!==i){var n=new ns[i.type](i.array);t.setIndex(new _i(n,1))}var r=e.data.attributes;for(var o in r){var a=r[o];n=new ns[a.type](a.array),t.addAttribute(o,new _i(n,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Ht;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new Kt(d,h.radius)}return t}});var ns={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function rs(){}rs.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i],o=t[i+1];if(r.test(e))return o}return null}},Object.assign(rs.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:function(){var e={NoBlending:w,NormalBlending:S,AdditiveBlending:C,SubtractiveBlending:E,MultiplyBlending:T,CustomBlending:M},t=new ni,i=new aa,n=new ts;return function(r,o,a){var s={};function l(e,t,n,r,l){var c,u=o+e,h=rs.Handlers.get(u);null!==h?c=h.load(u):(i.setCrossOrigin(a),c=i.load(u)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=me),1!==t[1]&&(c.wrapT=me)),void 0!==n&&c.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(c.wrapS=me),"mirror"===r[0]&&(c.wrapS=_e),"repeat"===r[1]&&(c.wrapT=me),"mirror"===r[1]&&(c.wrapT=_e)),void 0!==l&&(c.anisotropy=l);var d=Ot.generateUUID();return s[d]=c,d}var c={uuid:Ot.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=l(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapEmissive":c.emissiveMap=l(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapLight":c.lightMap=l(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapAO":c.aoMap=l(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapBump":c.bumpMap=l(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapNormal":c.normalMap=l(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapSpecular":c.specularMap=l(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapMetalness":c.metalnessMap=l(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapRoughness":c.roughnessMap=l(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapAlpha":c.alphaMap=l(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"flipSided":c.side=g;break;case"doubleSided":c.side=_;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=h;break;case"vertexColors":!0===h&&(c.vertexColors=x),"face"===h&&(c.vertexColors=b);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(s),n.parse(c)}}()});var os={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function as(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Jo,this.withCredentials=!1}function ss(e){this.manager=void 0!==e?e:Jo,this.texturePath=""}Object.assign(as.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:os.extractUrlBase(e),a=new ta(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,(function(i){var n=JSON.parse(i),a=n.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(n,o);t(l.geometry,l.materials)}),i,n)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var i=new gi;return function(e,t){function i(e,t){return e&1<<t}var n,r,o,a,s,l,c,u,h,d,p,f,m,g,_,v,y,A,b,x,w,S,C,E,T,M=e.faces,I=e.vertices,B=e.normals,R=e.colors,P=e.scale,k=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&k++;for(n=0;n<k;n++)t.faceVertexUvs[n]=[]}for(a=0,s=I.length;a<s;)(A=new Ht).x=I[a++]*P,A.y=I[a++]*P,A.z=I[a++]*P,t.vertices.push(A);for(a=0,s=M.length;a<s;)if(p=i(d=M[a++],0),f=i(d,1),m=i(d,3),g=i(d,4),_=i(d,5),v=i(d,6),y=i(d,7),p){if((x=new fi).a=M[a],x.b=M[a+1],x.c=M[a+3],(w=new fi).a=M[a+1],w.b=M[a+2],w.c=M[a+3],a+=4,f&&(h=M[a++],x.materialIndex=h,w.materialIndex=h),o=t.faces.length,m)for(n=0;n<k;n++)for(E=e.uvs[n],t.faceVertexUvs[n][o]=[],t.faceVertexUvs[n][o+1]=[],r=0;r<4;r++)T=new Ft(E[2*(u=M[a++])],E[2*u+1]),2!==r&&t.faceVertexUvs[n][o].push(T),0!==r&&t.faceVertexUvs[n][o+1].push(T);if(g&&(c=3*M[a++],x.normal.set(B[c++],B[c++],B[c]),w.normal.copy(x.normal)),_)for(n=0;n<4;n++)c=3*M[a++],C=new Ht(B[c++],B[c++],B[c]),2!==n&&x.vertexNormals.push(C),0!==n&&w.vertexNormals.push(C);if(v&&(S=R[l=M[a++]],x.color.setHex(S),w.color.setHex(S)),y)for(n=0;n<4;n++)S=R[l=M[a++]],2!==n&&x.vertexColors.push(new ni(S)),0!==n&&w.vertexColors.push(new ni(S));t.faces.push(x),t.faces.push(w)}else{if((b=new fi).a=M[a++],b.b=M[a++],b.c=M[a++],f&&(h=M[a++],b.materialIndex=h),o=t.faces.length,m)for(n=0;n<k;n++)for(E=e.uvs[n],t.faceVertexUvs[n][o]=[],r=0;r<3;r++)T=new Ft(E[2*(u=M[a++])],E[2*u+1]),t.faceVertexUvs[n][o].push(T);if(g&&(c=3*M[a++],b.normal.set(B[c++],B[c++],B[c])),_)for(n=0;n<3;n++)c=3*M[a++],C=new Ht(B[c++],B[c++],B[c]),b.vertexNormals.push(C);if(v&&(l=M[a++],b.color.setHex(R[l])),y)for(n=0;n<3;n++)l=M[a++],b.vertexColors.push(new ni(R[l]));t.faces.push(b)}}(e,i),function(e,t){var i=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,r=e.skinWeights.length;n<r;n+=i){var o=e.skinWeights[n],a=i>1?e.skinWeights[n+1]:0,s=i>2?e.skinWeights[n+2]:0,l=i>3?e.skinWeights[n+3]:0;t.skinWeights.push(new qt(o,a,s,l))}if(e.skinIndices)for(n=0,r=e.skinIndices.length;n<r;n+=i){var c=e.skinIndices[n],u=i>1?e.skinIndices[n+1]:0,h=i>2?e.skinIndices[n+2]:0,d=i>3?e.skinIndices[n+3]:0;t.skinIndices.push(new qt(c,u,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,i),function(e,t){var i=e.scale;if(void 0!==e.morphTargets)for(var n=0,r=e.morphTargets.length;n<r;n++){t.morphTargets[n]={},t.morphTargets[n].name=e.morphTargets[n].name,t.morphTargets[n].vertices=[];for(var o=t.morphTargets[n].vertices,a=e.morphTargets[n].vertices,s=0,l=a.length;s<l;s+=3){var c=new Ht;c.x=a[s]*i,c.y=a[s+1]*i,c.z=a[s+2]*i,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,h=e.morphColors[0].colors;for(n=0,r=u.length;n<r;n++)u[n].color.fromArray(h,3*n)}}(e,i),function(e,t){var i=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var r=0;r<n.length;r++){var o=Ja.parseAnimation(n[r],t.bones);o&&i.push(o)}if(t.morphTargets){var a=Ja.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(a)}i.length>0&&(t.animations=i)}(e,i),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:i}:{geometry:i,materials:rs.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(ss.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new ta(r.manager).load(e,(function(i){var o=null;try{o=JSON.parse(i)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),i,n)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,i),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var r=(new Ia).fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var n=new as,r=new is,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new zo[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new zo[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new zo[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new zo[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new zo[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new zo[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new zo[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new zo[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new zo[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new zo[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new zo[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new zo[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,h=l.shapes.length;u<h;u++){var d=t[l.shapes[u]];c.push(d)}s=new zo[l.type](c,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],u=0,h=l.shapes.length;u<h;u++)d=t[l.shapes[u]],c.push(d);var p=l.options.extrudePath;void 0!==p&&(l.options.extrudePath=(new Ea[p.type]).fromJSON(p)),s=new zo[l.type](c,l.options);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=n.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),i[l.uuid]=s}return i},parseMaterials:function(e,t){var i={};if(void 0!==e){var n=new ts;n.setTextures(t);for(var r=0,o=e.length;r<o;r++){var a=e[r];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(n.parse(a.materials[l]));i[a.uuid]=s}else i[a.uuid]=n.parse(a)}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=Ja.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),t.push(r)}return t},parseImages:function(e,t){var i=this,n={};function r(e){return i.manager.itemStart(e),o.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemEnd(e),i.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var o=new ra(new Zo(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],c=l.url;if(Array.isArray(c)){n[l.uuid]=[];for(var u=0,h=c.length;u<h;u++){var d=c[u],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.texturePath+d;n[l.uuid].push(r(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url,n[l.uuid]=r(p)}}return n},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var a,s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Vi(t[s.image]):new jt(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=i(s.mapping,cs)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=i(s.wrap[0],us),a.wrapT=i(s.wrap[1],us)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=i(s.minFilter,hs)),void 0!==s.magFilter&&(a.magFilter=i(s.magFilter,hs)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(e,t,i){var n;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];void 0===i[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(i[o])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":n=new cr,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new ni(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new lr(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new sr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new nr(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new pi(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new Fa(e.color,e.intensity);break;case"DirectionalLight":n=new Oa(e.color,e.intensity);break;case"PointLight":n=new Da(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new Ua(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new La(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new Ra(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=o(e.material);n=a.bones&&a.bones.length>0?new _r(a,s):new Hi(a,s);break;case"LOD":n=new fr;break;case"Line":n=new yr(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":n=new br(r(e.geometry),o(e.material));break;case"LineSegments":n=new Ar(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":n=new wr(r(e.geometry),o(e.material));break;case"Sprite":n=new pr(o(e.material));break;case"Group":n=new ir;break;default:n=new hi}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)n.add(this.parseObject(l[c],t,i));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],p=n.getObjectByProperty("uuid",d.object);void 0!==p&&n.addLevel(p,d.distance)}return n}});var ls,cs={UVMapping:se,CubeReflectionMapping:le,CubeRefractionMapping:ce,EquirectangularReflectionMapping:ue,EquirectangularRefractionMapping:he,SphericalReflectionMapping:de,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:fe},us={RepeatWrapping:me,ClampToEdgeWrapping:ge,MirroredRepeatWrapping:_e},hs={NearestFilter:ve,NearestMipMapNearestFilter:ye,NearestMipMapLinearFilter:Ae,LinearFilter:be,LinearMipMapNearestFilter:xe,LinearMipMapLinearFilter:we};function ds(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Jo,this.options=void 0}function ps(){this.type="ShapePath",this.color=new ni,this.subPaths=[],this.currentPath=null}function fs(e){this.type="Font",this.data=e}function ms(e,t,i,n,r){var o=r.glyphs[e]||r.glyphs["?"];if(o){var a,s,l,c,u,h,d,p,f=new ps;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,_=m.length;g<_;)switch(m[g++]){case"m":a=m[g++]*t+i,s=m[g++]*t+n,f.moveTo(a,s);break;case"l":a=m[g++]*t+i,s=m[g++]*t+n,f.lineTo(a,s);break;case"q":l=m[g++]*t+i,c=m[g++]*t+n,u=m[g++]*t+i,h=m[g++]*t+n,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[g++]*t+i,c=m[g++]*t+n,u=m[g++]*t+i,h=m[g++]*t+n,d=m[g++]*t+i,p=m[g++]*t+n,f.bezierCurveTo(u,h,d,p,l,c)}return{offsetX:o.ha*t,path:f}}}function gs(e){this.manager=void 0!==e?e:Jo}ds.prototype={constructor:ds,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Ko.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(i){Ko.add(e,i),t&&t(i),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemEnd(e),r.manager.itemError(e)}))},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(ps.prototype,{moveTo:function(e,t){this.currentPath=new Ma,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,o){this.currentPath.bezierCurveTo(e,t,i,n,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],o=new Ia;o.curves=r.curves,t.push(o)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,o=0;o<i;r=o++){var a=t[r],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],l=-l,s=t[r],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var r=mo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return i(o);var a,s,l,c=[];if(1===o.length)return s=o[0],(l=new Ia).curves=s.curves,c.push(l),c;var u=!r(o[0].getPoints());u=e?!u:u;var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var _=0,v=o.length;_<v;_++)a=r(h=(s=o[_]).getPoints()),(a=e?!a:a)?(!u&&f[g]&&g++,f[g]={s:new Ia,p:h},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!f[0])return i(o);if(f.length>1){for(var y=!1,A=[],b=0,x=f.length;b<x;b++)p[b]=[];for(b=0,x=f.length;b<x;b++)for(var w=m[b],S=0;S<w.length;S++){for(var C=w[S],E=!0,T=0;T<f.length;T++)n(C.p,f[T].p)&&(b!==T&&A.push({froms:b,tos:T,hole:S}),E?(E=!1,p[T].push(C)):y=!0);E&&p[b].push(C)}A.length>0&&(y||(m=p))}_=0;for(var M=f.length;_<M;_++){l=f[_].s,c.push(l);for(var I=0,B=(d=m[_]).length;I<B;I++)l.holes.push(d[I].h)}return c}}),Object.assign(fs.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var i=[],n=function(e,t,i){for(var n=Array.from?Array.from(e):String(e).split(""),r=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[],s=0,l=0,c=0;c<n.length;c++){var u=n[c];if("\n"===u)s=0,l-=o;else{var h=ms(u,r,s,l,i);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),r=0,o=n.length;r<o;r++)Array.prototype.push.apply(i,n[r].toShapes());return i}}),Object.assign(gs.prototype,{load:function(e,t,i,n){var r=this,o=new ta(this.manager);o.setPath(this.path),o.load(e,(function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}var n=r.parse(i);t&&t(n)}),i,n)},parse:function(e){return new fs(e)},setPath:function(e){return this.path=e,this}});var _s,vs,ys={getContext:function(){return void 0===ls&&(ls=new(window.AudioContext||window.webkitAudioContext)),ls},setContext:function(e){ls=e}};function As(e){this.manager=void 0!==e?e:Jo}function bs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new nr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new nr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function xs(e,t,i){hi.call(this),this.type="CubeCamera";var n=new nr(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new Ht(1,0,0)),this.add(n);var r=new nr(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Ht(-1,0,0)),this.add(r);var o=new nr(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Ht(0,1,0)),this.add(o);var a=new nr(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Ht(0,-1,0)),this.add(a);var s=new nr(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Ht(0,0,1)),this.add(s);var l=new nr(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Ht(0,0,-1)),this.add(l);var c={format:Oe,magFilter:be,minFilter:be};this.renderTarget=new $t(i,i,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,n,i),i.activeCubeFace=1,e.render(t,r,i),i.activeCubeFace=2,e.render(t,o,i),i.activeCubeFace=3,e.render(t,a,i),i.activeCubeFace=4,e.render(t,s,i),i.texture.generateMipmaps=c,i.activeCubeFace=5,e.render(t,l,i),e.setRenderTarget(null)},this.clear=function(e,t,i,n){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,i,n);e.setRenderTarget(null)}}function ws(){hi.call(this),this.type="AudioListener",this.context=ys.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ss(e){hi.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Cs(e){Ss.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Es(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ts(e,t,i){this.binding=e,this.valueSize=i;var n,r=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ms(e,t,i){var n=i||Is.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Is(e,t,i){this.path=t,this.parsedPath=i||Is.parseTrackName(t),this.node=Is.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Bs(){this.uuid=Ot.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Rs(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null;for(var n=t.tracks,r=n.length,o=new Array(r),a={endingStart:yt,endingEnd:yt},s=0;s!==r;++s){var l=n[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ft,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ps(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ks(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ls(){Bi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ds(e,t,i){ur.call(this,e,t),this.meshPerAttribute=i||1}function Ns(e,t,i){_i.call(this,e,t),this.meshPerAttribute=i||1}function Os(e,t,i,n){this.ray=new Ui(e,t),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Fs(e,t){return e.distance-t.distance}function Us(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n))for(var r=e.children,o=0,a=r.length;o<a;o++)Us(r[o],t,i,!0)}function zs(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Hs(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Gs(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function Vs(e,t){this.min=void 0!==e?e:new Ft(1/0,1/0),this.max=void 0!==t?t:new Ft(-1/0,-1/0)}function Qs(e,t){this.start=void 0!==e?e:new Ht,this.end=void 0!==t?t:new Ht}function js(e){hi.call(this),this.material=e,this.render=function(){}}function qs(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==i?i:16711680,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Bi,c=new Ci(2*a*3,3);l.addAttribute("position",c),Ar.call(this,l,new vr({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Ws(e,t){hi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var i=new Bi,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}i.addAttribute("position",new Ci(n,3));var l=new vr({fog:!1});this.cone=new Ar(i,l),this.add(this.cone),this.update()}function $s(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new Bi,n=[],r=[],o=new ni(0,0,1),a=new ni(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.addAttribute("position",new Ci(n,3)),i.addAttribute("color",new Ci(r,3));var c=new vr({vertexColors:x,depthTest:!1,depthWrite:!1,transparent:!0});Ar.call(this,i,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Xs(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i;var n=new Co(t,4,2),r=new Oi({wireframe:!0,fog:!1});Hi.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ys(e,t){hi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var i=new vr({fog:!1}),n=new Bi;n.addAttribute("position",new _i(new Float32Array(15),3)),this.line=new yr(n,i),this.add(this.line),this.update()}function Ks(e,t,i){hi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var n=new Nr(t);n.rotateY(.5*Math.PI),this.material=new Oi({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=x);var r=n.getAttribute("position"),o=new Float32Array(3*r.count);n.addAttribute("color",new _i(o,3)),this.add(new Hi(n,this.material)),this.update()}function Zs(e,t,i,n){e=e||10,t=t||10,i=new ni(void 0!==i?i:4473924),n=new ni(void 0!==n?n:8947848);for(var r=t/2,o=e/t,a=e/2,s=[],l=[],c=0,u=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=c===r?i:n;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var p=new Bi;p.addAttribute("position",new Ci(s,3)),p.addAttribute("color",new Ci(l,3));var f=new vr({vertexColors:x});Ar.call(this,p,f)}function Js(e,t,i,n,r,o){e=e||10,t=t||16,i=i||8,n=n||64,r=new ni(void 0!==r?r:4473924),o=new ni(void 0!==o?o:8947848);var a,s,l,c,u,h,d,p=[],f=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),d=1&c?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=i;c++)for(d=1&c?r:o,h=e-e/i*c,u=0;u<n;u++)l=u/n*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),l=(u+1)/n*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Bi;m.addAttribute("position",new Ci(p,3)),m.addAttribute("color",new Ci(f,3));var g=new vr({vertexColors:x});Ar.call(this,m,g)}function el(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==i?i:16776960,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Bi,c=new Ci(2*a*3,3);l.addAttribute("position",c),Ar.call(this,l,new vr({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function tl(e,t,i){hi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1);var n=new Bi;n.addAttribute("position",new Ci([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new vr({fog:!1});this.lightPlane=new yr(n,r),this.add(this.lightPlane),(n=new Bi).addAttribute("position",new Ci([0,0,0,0,0,1],3)),this.targetLine=new yr(n,r),this.add(this.targetLine),this.update()}function il(e){var t=new Bi,i=new vr({color:16777215,vertexColors:b}),n=[],r=[],o={},a=new ni(16755200),s=new ni(16711680),l=new ni(43775),c=new ni(16777215),u=new ni(3355443);function h(e,t,i){d(e,i),d(t,i)}function d(e,t){n.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new Ci(n,3)),t.addAttribute("color",new Ci(r,3)),Ar.call(this,t,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function nl(e,t){this.object=e,void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Bi;r.setIndex(new _i(i,1)),r.addAttribute("position",new _i(n,3)),Ar.call(this,r,new vr({color:t})),this.matrixAutoUpdate=!1,this.update()}function rl(e,t){this.type="Box3Helper",this.box=e;var i=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Bi;r.setIndex(new _i(n,1)),r.addAttribute("position",new Ci([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ar.call(this,r,new vr({color:i})),this.geometry.computeBoundingSphere()}function ol(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==i?i:16776960,r=new Bi;r.addAttribute("position",new Ci([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),yr.call(this,r,new vr({color:n}));var o=new Bi;o.addAttribute("position",new Ci([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Hi(o,new Oi({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function al(e,t,i,n,r,o){hi.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===_s&&((_s=new Bi).addAttribute("position",new Ci([0,0,0,0,1,0],3)),(vs=new Do(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new yr(_s,new vr({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hi(vs,new Oi({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}function sl(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Bi;i.addAttribute("position",new Ci(t,3)),i.addAttribute("color",new Ci([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new vr({vertexColors:x});Ar.call(this,i,n)}function ll(e,t,i,n,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new fi(e,t,i,r,o,a)}Object.assign(As.prototype,{load:function(e,t,i,n){var r=new ta(this.manager);r.setResponseType("arraybuffer"),r.load(e,(function(e){var i=e.slice(0);ys.getContext().decodeAudioData(i,(function(e){t(e)}))}),i,n)}}),Object.assign(bs.prototype,{update:function(){var e,t,i,n,r,o,a,s,l=new Ut,c=new Ut;return function(u){if(e!==this||t!==u.focus||i!==u.fov||n!==u.aspect*this.aspect||r!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep){e=this,t=u.focus,i=u.fov,n=u.aspect*this.aspect,r=u.near,o=u.far,a=u.zoom;var h,d,p=u.projectionMatrix.clone(),f=(s=this.eyeSep/2)*r/t,m=r*Math.tan(Ot.DEG2RAD*i*.5)/a;c.elements[12]=-s,l.elements[12]=s,h=-m*n+f,d=m*n+f,p.elements[0]=2*r/(d-h),p.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(p),h=-m*n-f,d=m*n-f,p.elements[0]=2*r/(d-h),p.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()}),xs.prototype=Object.create(hi.prototype),xs.prototype.constructor=xs,ws.prototype=Object.assign(Object.create(hi.prototype),{constructor:ws,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Ht,t=new zt,i=new Ht,n=new Ht;return function(r){hi.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,i),n.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(n.x,this.context.currentTime),o.forwardY.setValueAtTime(n.y,this.context.currentTime),o.forwardZ.setValueAtTime(n.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(n.x,n.y,n.z,a.x,a.y,a.z))}}()}),Ss.prototype=Object.assign(Object.create(hi.prototype),{constructor:Ss,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Cs.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Cs,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(){var e=new Ht,t=new zt,i=new Ht,n=new Ht;return function(r){hi.prototype.updateMatrixWorld.call(this,r);var o=this.panner;this.matrixWorld.decompose(e,t,i),n.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(n.x,n.y,n.z)}}()}),Object.assign(Es.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(Ts.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)i[r+a]=i[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(i,r,0,s,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*t;this._mixBufferRegion(i,n,a,1-r,t)}for(var s=t,l=t+t;s!==l;++s)if(i[s]!==i[s+t]){o.setValue(i,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,i=this.valueSize,n=3*i;e.getValue(t,n);for(var r=i,o=n;r!==o;++r)t[r]=t[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,n,r){if(n>=.5)for(var o=0;o!==r;++o)e[t+o]=e[i+o]},_slerp:function(e,t,i,n){zt.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[i+a]*n}}}),Object.assign(Ms.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(Is,{Composite:Ms,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new Is.Composite(e,t,i):new Is(e,t,i)},sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",i=/((?:WC+[\/:])*)/.source.replace("WC",e),n=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+i+n+r+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=i.nodeName.substring(n+1);-1!==s.indexOf(r)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=r)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t)return r;var o=n(r.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(Is.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(e=Is.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var o=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[n];if(void 0!==s){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Is.prototype,{_getValue_unbound:Is.prototype.getValue,_setValue_unbound:Is.prototype.setValue}),Object.assign(Bs.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new Is(h,r[f],o[f]))}else if(p<i){l=e[p];var g=--i,_=e[g];for(n[_.uuid]=p,e[p]=_,n[d]=g,e[g]=h,f=0,m=s;f!==m;++f){var v=a[f],y=v[g],A=v[p];v[p]=y,void 0===A&&(A=new Is(h,r[f],o[f])),v[g]=A}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=i[l];if(void 0!==c&&c>=t){var u=t++,h=e[u];i[h.uuid]=c,e[c]=h,i[l]=u,e[u]=s;for(var d=0,p=r;d!==p;++d){var f=n[d],m=f[u],g=f[c];f[c]=m,f[u]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var u=--i,h=e[u],d=e[_=--t];n[h.uuid]=c,e[c]=h,n[d.uuid]=u,e[u]=d,e.pop();for(var p=0,f=o;p!==f;++p){var m=(v=r[p])[u],g=v[_];v[c]=m,v[u]=g,v.pop()}}else{var _;for(n[(d=e[_=--t]).uuid]=c,e[c]=d,e.pop(),p=0,f=o;p!==f;++p){var v;(v=r[p])[c]=v[_],v.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);n=r.length,i[e]=n,o.push(e),a.push(t),r.push(u);for(var h=c,d=s.length;h!==d;++h){var p=s[h];u[h]=new Is(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=i,o[i]=s,o.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}),Object.assign(Rs.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){var n=this._clip.duration,r=e._clip.duration,o=r/n,a=n/r;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+i,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(null!==r){var o=(e-r)*i;if(o<0||0===i)return;this._startTime=null,t=i*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,i=this._clip.duration,n=this.loop,r=this._loopCount,o=n===mt;if(0===e)return-1===r||!o||1&~r?t:i-t;if(n===pt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=i)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=i||t<0){var a=Math.floor(t/i);t-=i*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&!(1&~r))return this.time=t,i-t}return this.time=t,t},_setEndings:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=At,n.endingEnd=At):(n.endingStart=e?this.zeroSlopeAtStart?At:yt:bt,n.endingEnd=t?this.zeroSlopeAtEnd?At:yt:bt)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=i,this}}),Ps.prototype=Object.assign(Object.create(n.prototype),{constructor:Ps,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,o=e._propertyBindings,a=e._interpolants,s=i.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var h=n[u],d=h.name,p=c[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new Ts(Is.create(i,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(var r=e._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],o=this._bindings;void 0===r&&(r={},n[t]=r),r[i]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r];e:{for(var c in a)break e;delete o[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&((i=new Va(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid,r="string"==typeof e?Ja.findByName(i,e):e,o=null!==r?r.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[n];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new Rs(this,r,t);return this._bindAction(c,s),this._addInactiveAction(c,o,n),c},existingAction:function(e,t){var i=t||this._root,n=i.uuid,r="string"==typeof e?Ja.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==i;++a)t[a]._update(n,e,r,o);var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),ks.prototype.clone=function(){return new ks(void 0===this.value.clone?this.value:this.value.clone())},Ls.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Ls,isInstancedBufferGeometry:!0,copy:function(e){return Bi.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Ds.prototype=Object.assign(Object.create(ur.prototype),{constructor:Ds,isInstancedInterleavedBuffer:!0,copy:function(e){return ur.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ns.prototype=Object.assign(Object.create(_i.prototype),{constructor:Ns,isInstancedBufferAttribute:!0,copy:function(e){return _i.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Os.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){var n=i||[];return Us(e,this,n,t),n.sort(Fs),n},intersectObjects:function(e,t,i){var n=i||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,o=e.length;r<o;r++)Us(e[r],this,n,t);return n.sort(Fs),n}}),Object.assign(zs.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Hs.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ot.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Gs.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Vs.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ft;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ft),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ft),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ft;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Qs.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Ht),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Ht),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Ht),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Ht,t=new Ht;return function(i,n){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),o=t.dot(e)/r;return n&&(o=Ot.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,i){var n=this.closestPointToPointParameter(e,t);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Ht),this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),js.prototype=Object.create(hi.prototype),js.prototype.constructor=js,js.prototype.isImmediateRenderObject=!0,qs.prototype=Object.create(Ar.prototype),qs.prototype.constructor=qs,qs.prototype.update=function(){var e=new Ht,t=new Ht,i=new Gt;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[n[p]]],g=d.vertexNormals[p];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var _=a.attributes.position,v=a.attributes.normal;for(c=0,p=0,f=_.count;p<f;p++)e.set(_.getX(p),_.getY(p),_.getZ(p)).applyMatrix4(r),t.set(v.getX(p),v.getY(p),v.getZ(p)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),Ws.prototype=Object.create(hi.prototype),Ws.prototype.constructor=Ws,Ws.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ws.prototype.update=function(){var e=new Ht,t=new Ht;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),$s.prototype=Object.create(Ar.prototype),$s.prototype.constructor=$s,$s.prototype.updateMatrixWorld=function(){var e=new Ht,t=new Ut,i=new Ut;return function(n){var r=this.bones,o=this.geometry,a=o.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(i,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(i,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,hi.prototype.updateMatrixWorld.call(this,n)}}(),Xs.prototype=Object.create(Hi.prototype),Xs.prototype.constructor=Xs,Xs.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xs.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Ys.prototype=Object.create(hi.prototype),Ys.prototype.constructor=Ys,Ys.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ys.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,i=this.line.geometry.attributes.position,n=i.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Ks.prototype=Object.create(hi.prototype),Ks.prototype.constructor=Ks,Ks.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ks.prototype.update=function(){var e=new Ht,t=new ni,i=new ni;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");t.copy(this.light.color),i.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?t:i;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Zs.prototype=Object.create(Ar.prototype),Zs.prototype.constructor=Zs,Js.prototype=Object.create(Ar.prototype),Js.prototype.constructor=Js,el.prototype=Object.create(Ar.prototype),el.prototype.constructor=el,el.prototype.update=function(){var e=new Ht,t=new Ht,i=new Gt;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(n),t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),tl.prototype=Object.create(hi.prototype),tl.prototype.constructor=tl,tl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},tl.prototype.update=function(){var e=new Ht,t=new Ht,i=new Ht;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i),this.targetLine.scale.z=i.length()}}(),il.prototype=Object.create(Ar.prototype),il.prototype.constructor=il,il.prototype.update=function(){var e,t,i=new Ht,n=new di;function r(r,o,a,s){i.set(o,a,s).unproject(n);var l=t[r];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],i.x,i.y,i.z)}return function(){e=this.geometry,t=this.pointMap,n.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),nl.prototype=Object.create(Ar.prototype),nl.prototype.constructor=nl,nl.prototype.update=function(){var e=new Yt;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var i=e.min,n=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=i.y,o[8]=n.z,o[9]=n.x,o[10]=i.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=i.z,o[15]=i.x,o[16]=n.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=n.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),nl.prototype.setFromObject=function(e){return this.object=e,this.update(),this},rl.prototype=Object.create(Ar.prototype),rl.prototype.constructor=rl,rl.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),hi.prototype.updateMatrixWorld.call(this,e))},ol.prototype=Object.create(yr.prototype),ol.prototype.constructor=ol,ol.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?g:m,this.lookAt(this.plane.normal),hi.prototype.updateMatrixWorld.call(this,e)},al.prototype=Object.create(hi.prototype),al.prototype.constructor=al,al.prototype.setDirection=function(){var e,t=new Ht;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),al.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},al.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},sl.prototype=Object.create(Ar.prototype),sl.prototype.constructor=sl;var cl=0,ul=1;function hl(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function dl(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function pl(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new wr(e,t)}function fl(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new pr(e)}function ml(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new wr(e,t)}function gl(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new xr(e)}function _l(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new xr(e)}function vl(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new xr(e)}function yl(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ht(e,t,i)}function Al(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new _i(e,t).setDynamic(!0)}function bl(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new vi(e,t)}function xl(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new yi(e,t)}function wl(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ai(e,t)}function Sl(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new bi(e,t)}function Cl(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new xi(e,t)}function El(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new wi(e,t)}function Tl(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Si(e,t)}function Ml(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ci(e,t)}function Il(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ei(e,t)}function Bl(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ma.call(this,e),this.type="catmullrom",this.closed=!0}function Rl(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ma.call(this,e),this.type="catmullrom"}function Pl(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ma.call(this,e),this.type="catmullrom"}function kl(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new sl(e)}function Ll(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new nl(e,t)}function Dl(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ar(new ko(e.geometry),new vr({color:void 0!==t?t:16777215}))}function Nl(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ar(new Mr(e.geometry),new vr({color:void 0!==t?t:16777215}))}function Ol(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ta(e)}function Fl(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new na(e)}sa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(sa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ta.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new gi,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new Ht(r.x,r.y,r.z||0))}return t}}),Object.assign(Ma.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Bl.prototype=Object.create(ma.prototype),Rl.prototype=Object.create(ma.prototype),Pl.prototype=Object.create(ma.prototype),Object.assign(Pl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Zs.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},$s.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(rs.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),os.extractUrlBase(e)}}),Object.assign(Vs.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Yt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Qs.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ot,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ot.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ot.ceilPowerOfTwo(e)}}),Object.assign(Gt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ut.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Ht),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,o)}}),Zt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},zt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ui.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(zi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(zi,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zi.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zi.getNormal(e,t,i,n)}}),Object.assign(Ia.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new vo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Bo(this,e)}}),Object.assign(Ft.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ht.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qt.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(gi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(hi.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(hi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(fr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(mr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(sa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),nr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ba.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(_i.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Bi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Bi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(yo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ks.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ni.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ni}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}}}),Object.defineProperties(jo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Fi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ar.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(ar.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Jn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Wt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(or.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Ss.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new As).load(e,(function(e){t.setBuffer(e)})),this},Es.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},xs.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Ul={merge:function(e,t,i){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function zl(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Hl(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}Vt.crossOrigin=void 0,Vt.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new aa;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,i,void 0,n);return t&&(o.mapping=t),o},Vt.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new oa;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,i,void 0,n);return t&&(o.mapping=t),o},Vt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Gl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Vl(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=u(i(5)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),l=i(4),c=u(i(3));function u(e){return e&&e.__esModule?e:{default:e}}var h={directionligth:{create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,i=e.position,n=e.castShadow,r=new s.DirectionalLight(new s.Color(t),.95);return r.position.set(i.x,i.y,i.z),r.castShadow=n,r}},ambientlight:{create:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).color;return new s.AmbientLight(new s.Color(e))}},spotlight:{create:function(){}}},d=function e(t){if(t instanceof s.Mesh){var i=t.geometry;if(i){i.boundingBox||i.computeBoundingBox();var n=i.boundingBox;return t.updateMatrix(),n.applyMatrix4(t.matrix),n}return new s.Box3(new s.Vector3,new s.Vector3)}var r,o=t.children.length,a=new s.Box3(new s.Vector3,new s.Vector3);for(r=0;r<o;r++){var l=e(t.children[r]);l.min.x<a.min.x&&(a.min.x=l.min.x),l.max.x>a.max.x&&(a.max.x=l.max.x),l.min.y<a.min.y&&(a.min.y=l.min.y),l.max.y>a.max.y&&(a.max.y=l.max.y),l.min.z<a.min.z&&(a.min.z=l.min.z),l.max.z>a.max.z&&(a.max.z=l.max.z)}return t.updateMatrix(),a.applyMatrix4(t.matrix),a},p=(r=n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.obj3d,i.src,i.state={lights:[]},i.lights=[],i.group=new s.Group,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,a.default.Component),o(e,[{key:"render",value:function(){var e=this;return this.state.lights,a.default.createElement("div",{ref:function(t){return e.$container=t},"data-loader":this.props.loader,style:this.style()})}},{key:"componentDidUpdate",value:function(){var e=this;if(!this.obj3d)return!1;var t=this.props,i=t.src,n=(t.background,t.width),r=t.height;this.camera.aspect=n/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,r);var o=this.props,a=o.enableKeys,s=o.enableRotate,c=o.enableZoom,u=o.enabled;Object.assign(this.orbit_controls,{enableKeys:a,enablePan:!0,enableRotate:s,enableZoom:c,enabled:u}),void 0!==this.src&&this.src!=i&&(this.src=i,this.remove3dModel(),this.load3dModel()),this.lights.forEach((function(t){return e.scene.remove(t)})),this.lights=[],this.addLight("ambientlight",l.AmbientLight.defaultProps),this.need_children_lights?this.addChildrenLights():this.addLight("directionligth",l.DirectionLight.defaultProps)}},{key:"componentWillUnmount",value:function(){this.tick.animate=!1}},{key:"componentDidMount",value:function(){var e=this,t=this.props,i=t.width,n=t.height,r=t.antialias,o=t.background;this.scene=new s.Scene,this.camera=new s.PerspectiveCamera(45,i/n,.1,8888),this.renderer=new s.WebGLRenderer({antialias:r}),this.renderer.setClearColor(new s.Color(o)),this.renderer.setSize(i,n),this.$container.appendChild(this.renderer.domElement),this.scene.add(this.group),this.camera.position.set(0,0,.1),this.createDefaultLight();var a=this.props,l=a.position,u=a.rotation,h=a.scale;this.group.position.copy(new s.Vector3(l.x,l.y,l.z)),this.group.rotation.set(u.x,u.y,u.z),this.group.scale.set(h.x,h.y,h.z),this.load3dModel(),this.tick=(0,c.default)((function(){if(e.renderer.render(e.scene,e.camera),e.obj3d){e.group.children.length||e.group.add(e.obj3d);var t=e.props,i=t.position,n=t.rotation,r=t.scale;e.group.position.copy(new s.Vector3(i.x,i.y,i.z)),e.group.rotation.set(n.x,n.y,n.z),e.group.scale.set(r.x,r.y,r.z)}}))}},{key:"initControl",value:function(){var e=this.props,t=e.enableKeys,i=e.enableRotate,n=e.enableZoom,r=e.enabled;this.orbit_controls=new s.OrbitControls(this.camera,this.renderer.domElement),Object.assign(this.orbit_controls,{enableKeys:t,enablePan:!0,enableRotate:i,enableZoom:n,enabled:r}),this.orbit_controls.update()}},{key:"remove3dModel",value:function(){this.obj3d&&this.scene.remove(this.obj3d)}},{key:"load3dModel",value:function(){}},{key:"style",value:function(){var e=this.props,t=e.width,i=e.height;return Object.assign({},{width:t+"px",height:i+"px"})}},{key:"computeBoundingBox",value:function(e){if(e instanceof s.Mesh){var t=e.geometry;if(t){t.boundingBox||t.computeBoundingBox();var i=t.boundingBox;return e.updateMatrix(),i.applyMatrix4(e.matrix),i}return new s.Box3(new s.Vector3,new s.Vector3)}var n,r=e.children.length,o=new s.Box3(new s.Vector3,new s.Vector3);for(n=0;n<r;n++){var a=d(e.children[n]);a.min.x<o.min.x&&(o.min.x=a.min.x),a.max.x>o.max.x&&(o.max.x=a.max.x),a.min.y<o.min.y&&(o.min.y=a.min.y),a.max.y>o.max.y&&(o.max.y=a.max.y),a.min.z<o.min.z&&(o.min.z=a.min.z),a.max.z>o.max.z&&(o.max.z=a.max.z)}return e.updateMatrix(),o.applyMatrix4(e.matrix),o}},{key:"traverseScene",value:function(){}},{key:"createEnvironment",value:function(){}},{key:"addLight",value:function(e,t){if(/directionligth|ambientlight|spotlight/.test(e)){var i=h[e].create(t);return this.scene.add(i),this.lights.push(i),i}}},{key:"addChildrenLights",value:function(){var e=this;this.lights.forEach((function(t){e.scene.remove(t)})),this.lights=[],this.array_children.map((function(t){var i=t.props,n=i.__constructor;e.addLight(n,i)}))}},{key:"createDefaultLight",value:function(){this.addLight("ambientlight",l.AmbientLight.defaultProps),this.need_children_lights?this.addChildrenLights():this.addLight("directionligth",l.DirectionLight.defaultProps)}},{key:"array_children",get:function(){return this.props.children?this.props.children instanceof Array?this.props.children:[this.props.children]:[]}},{key:"need_children_lights",get:function(){return!!this.array_children.filter((function(e){return/directionligth|ambientlight|spotlight/.test(e.props.__constructor)})).length}}]),e}(),n.defaultProps={width:500,height:500,antialias:!0,loader:"",baseUrl:"",texPath:"",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},background:"rgb(255,255,255)",enableKeys:!0,enableRotate:!0,enableZoom:!0,enabled:!0},r);t.default=p},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=t.ColladaLoader=t.OBJLoader=t.MTLLoader=t.OrbitControls=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0));n.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:n.MOUSE.LEFT,ZOOM:n.MOUSE.MIDDLE,PAN:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=s.NONE},this.update=function(){var t=new n.Vector3,o=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),a=o.clone().inverse(),m=new n.Vector3,g=new n.Quaternion;return function(){var e=i.object.position;return t.copy(e).sub(i.target),t.applyQuaternion(o),u.setFromVector3(t),i.autoRotate&&l===s.NONE&&C(2*Math.PI/60/60*i.autoRotateSpeed),u.theta+=h.theta,u.phi+=h.phi,u.theta=Math.max(i.minAzimuthAngle,Math.min(i.maxAzimuthAngle,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),i.target.add(p),t.setFromSpherical(u),t.applyQuaternion(a),e.copy(i.target).add(t),i.object.lookAt(i.target),!0===i.enableDamping?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor):h.set(0,0,0),d=1,p.set(0,0,0),!!(f||m.distanceToSquared(i.object.position)>c||8*(1-g.dot(i.object.quaternion))>c)&&(i.dispatchEvent(r),m.copy(i.object.position),g.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",z,!1),i.domElement.removeEventListener("mousedown",P,!1),i.domElement.removeEventListener("wheel",D,!1),i.domElement.removeEventListener("touchstart",O,!1),i.domElement.removeEventListener("touchend",U,!1),i.domElement.removeEventListener("touchmove",F,!1),document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",L,!1),window.removeEventListener("keydown",N,!1)};var i=this,r={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},l=s.NONE,c=1e-6,u=new n.Spherical,h=new n.Spherical,d=1,p=new n.Vector3,f=!1,m=new n.Vector2,g=new n.Vector2,_=new n.Vector2,v=new n.Vector2,y=new n.Vector2,A=new n.Vector2,b=new n.Vector2,x=new n.Vector2,w=new n.Vector2;function S(){return Math.pow(.95,i.zoomSpeed)}function C(e){h.theta-=e}function E(e){h.phi-=e}var T=function(){var e=new n.Vector3;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),p.add(e)}}(),M=function(){var e=new n.Vector3;return function(t,i){e.setFromMatrixColumn(i,1),e.multiplyScalar(t),p.add(e)}}(),I=function(){var e=new n.Vector3;return function(t,r){var o=i.domElement===document?i.domElement.body:i.domElement;if(i.object instanceof n.PerspectiveCamera){var a=i.object.position;e.copy(a).sub(i.target);var s=e.length();s*=Math.tan(i.object.fov/2*Math.PI/180),T(2*t*s/o.clientHeight,i.object.matrix),M(2*r*s/o.clientHeight,i.object.matrix)}else i.object instanceof n.OrthographicCamera?(T(t*(i.object.right-i.object.left)/i.object.zoom/o.clientWidth,i.object.matrix),M(r*(i.object.top-i.object.bottom)/i.object.zoom/o.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function B(e){i.object instanceof n.PerspectiveCamera?d/=e:i.object instanceof n.OrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*e)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function R(e){i.object instanceof n.PerspectiveCamera?d*=e:i.object instanceof n.OrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/e)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function P(e){if(!1!==i.enabled){if(e.preventDefault(),e.button===i.mouseButtons.ORBIT){if(!1===i.enableRotate)return;!function(e){m.set(e.clientX,e.clientY)}(e),l=s.ROTATE}else if(e.button===i.mouseButtons.ZOOM){if(!1===i.enableZoom)return;!function(e){b.set(e.clientX,e.clientY)}(e),l=s.DOLLY}else if(e.button===i.mouseButtons.PAN){if(!1===i.enablePan)return;!function(e){v.set(e.clientX,e.clientY)}(e),l=s.PAN}l!==s.NONE&&(document.addEventListener("mousemove",k,!1),document.addEventListener("mouseup",L,!1),i.dispatchEvent(o))}}function k(e){if(!1!==i.enabled)if(e.preventDefault(),l===s.ROTATE){if(!1===i.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),_.subVectors(g,m);var t=i.domElement===document?i.domElement.body:i.domElement;C(2*Math.PI*_.x/t.clientWidth*i.rotateSpeed),E(2*Math.PI*_.y/t.clientHeight*i.rotateSpeed),m.copy(g),i.update()}(e)}else if(l===s.DOLLY){if(!1===i.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,b),w.y>0?B(S()):w.y<0&&R(S()),b.copy(x),i.update()}(e)}else if(l===s.PAN){if(!1===i.enablePan)return;!function(e){y.set(e.clientX,e.clientY),A.subVectors(y,v),I(A.x,A.y),v.copy(y),i.update()}(e)}}function L(e){!1!==i.enabled&&(document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",L,!1),i.dispatchEvent(a),l=s.NONE)}function D(e){!1===i.enabled||!1===i.enableZoom||l!==s.NONE&&l!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?R(S()):e.deltaY>0&&B(S()),i.update()}(e),i.dispatchEvent(o),i.dispatchEvent(a))}function N(e){!1!==i.enabled&&!1!==i.enableKeys&&!1!==i.enablePan&&function(e){switch(e.keyCode){case i.keys.UP:I(0,i.keyPanSpeed),i.update();break;case i.keys.BOTTOM:I(0,-i.keyPanSpeed),i.update();break;case i.keys.LEFT:I(i.keyPanSpeed,0),i.update();break;case i.keys.RIGHT:I(-i.keyPanSpeed,0),i.update()}}(e)}function O(e){if(!1!==i.enabled){switch(e.touches.length){case 1:if(!1===i.enableRotate)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=s.TOUCH_ROTATE;break;case 2:if(!1===i.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);b.set(0,n)}(e),l=s.TOUCH_DOLLY;break;case 3:if(!1===i.enablePan)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=s.TOUCH_PAN;break;default:l=s.NONE}l!==s.NONE&&i.dispatchEvent(o)}}function F(e){if(!1!==i.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===i.enableRotate)return;if(l!==s.TOUCH_ROTATE)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(g,m);var t=i.domElement===document?i.domElement.body:i.domElement;C(2*Math.PI*_.x/t.clientWidth*i.rotateSpeed),E(2*Math.PI*_.y/t.clientHeight*i.rotateSpeed),m.copy(g),i.update()}(e);break;case 2:if(!1===i.enableZoom)return;if(l!==s.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);x.set(0,r),w.subVectors(x,b),w.y>0?R(S()):w.y<0&&B(S()),b.copy(x),i.update()}(e);break;case 3:if(!1===i.enablePan)return;if(l!==s.TOUCH_PAN)return;!function(e){y.set(e.touches[0].pageX,e.touches[0].pageY),A.subVectors(y,v),I(A.x,A.y),v.copy(y),i.update()}(e);break;default:l=s.NONE}}function U(e){!1!==i.enabled&&(i.dispatchEvent(a),l=s.NONE)}function z(e){e.preventDefault()}i.domElement.addEventListener("contextmenu",z,!1),i.domElement.addEventListener("mousedown",P,!1),i.domElement.addEventListener("wheel",D,!1),i.domElement.addEventListener("touchstart",O,!1),i.domElement.addEventListener("touchend",U,!1),i.domElement.addEventListener("touchmove",F,!1),window.addEventListener("keydown",N,!1),this.update()},n.OrbitControls.prototype=Object.create(n.EventDispatcher.prototype),n.OrbitControls.prototype.constructor=n.OrbitControls,Object.defineProperties(n.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),n.MTLLoader=function(e){this.manager=void 0!==e?e:n.DefaultLoadingManager},n.MTLLoader.prototype={constructor:n.MTLLoader,load:function(e,t,i,r){var o=this,a=new n.FileLoader(this.manager);a.setPath(this.path),a.load(e,(function(e){t(o.parse(e))}),i,r)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),i={},r=/\s+/,o={},a=0;a<t.length;a++){var s=t[a];if(0!==(s=s.trim()).length&&"#"!==s.charAt(0)){var l=s.indexOf(" "),c=l>=0?s.substring(0,l):s;c=c.toLowerCase();var u=l>=0?s.substring(l+1):"";if(u=u.trim(),"newmtl"===c)i={name:u},o[u]=i;else if(i)if("ka"===c||"kd"===c||"ks"===c){var h=u.split(r,3);i[c]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else i[c]=u}}var d=new n.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(o),d}},n.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:n.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:n.RepeatWrapping},n.MTLLoader.MaterialCreator.prototype={constructor:n.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var i in e){var n=e[i],r={};for(var o in t[i]=r,n){var a=!0,s=n[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(r[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function o(e,i){if(!r[e]){var n=t.getTextureParams(i,r),o=t.loadTexture(function(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}(t.baseUrl,n.url));o.repeat.copy(n.scale),o.offset.copy(n.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,r[e]=o}}for(var a in i){var s,l=i[a];if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new n.Color).fromArray(l);break;case"ks":r.specular=(new n.Color).fromArray(l);break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"ns":r.shininess=parseFloat(l);break;case"d":(s=parseFloat(l))<1&&(r.opacity=s,r.transparent=!0);break;case"tr":(s=parseFloat(l))>0&&(r.opacity=1-s,r.transparent=!0)}}return this.materials[e]=new n.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var i,r={scale:new n.Vector2(1,1),offset:new n.Vector2(0,0)},o=e.split(/\s+/);return(i=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[i+1]),o.splice(i,2)),(i=o.indexOf("-s"))>=0&&(r.scale.set(parseFloat(o[i+1]),parseFloat(o[i+2])),o.splice(i,4)),(i=o.indexOf("-o"))>=0&&(r.offset.set(parseFloat(o[i+1]),parseFloat(o[i+2])),o.splice(i,4)),r.url=o.join(" ").trim(),r},loadTexture:function(e,t,i,r,o){var a,s=n.Loader.Handlers.get(e),l=void 0!==this.manager?this.manager:n.DefaultLoadingManager;return null===s&&(s=new n.TextureLoader(l)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(e,i,r,o),void 0!==t&&(a.mapping=t),a}},n.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,i=/^usemtl /;function r(e){this.manager=void 0!==e?e:n.DefaultLoadingManager,this.materials=null}return r.prototype={constructor:r,load:function(e,t,i,r){var o=this,a=new n.FileLoader(o.manager);a.setPath(this.path),a.load(e,(function(e){t(o.parse(e))}),i,r)},setPath:function(e){this.path=e},setMaterials:function(e){return this.materials=e,this},parse:function(r){console.time("OBJLoader");var o=new function(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,o,a,s,l){var c=this.vertices.length,u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),d=this.parseVertexIndex(i,c);if(this.addVertex(u,h,d),void 0!==n){var p=this.uvs.length;u=this.parseUVIndex(n,p),h=this.parseUVIndex(r,p),d=this.parseUVIndex(o,p),this.addUV(u,h,d)}if(void 0!==a){var f=this.normals.length;u=this.parseNormalIndex(a,f),h=a===s?u:this.parseNormalIndex(s,f),d=a===l?u:this.parseNormalIndex(l,f),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return e.startObject("",!1),e};-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var a=r.split("\n"),s="",l="",c=[],u="function"==typeof"".trimLeft,h=0,d=a.length;h<d;h++)if(s=a[h],0!==(s=u?s.trimLeft():s.trim()).length&&"#"!==(l=s.charAt(0)))if("v"===l){var p=s.split(/\s+/);switch(p[0]){case"v":o.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&o.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":o.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":o.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===l){for(var f=s.substr(1).trim().split(/\s+/),m=[],g=0,_=f.length;g<_;g++){var v=f[g];if(v.length>0){var y=v.split("/");m.push(y)}}var A=m[0];for(g=1,_=m.length-1;g<_;g++){var b=m[g],x=m[g+1];o.addFace(A[0],b[0],x[0],A[1],b[1],x[1],A[2],b[2],x[2])}}else if("l"===l){var w=s.substring(1).trim().split(" "),S=[],C=[];if(-1===s.indexOf("/"))S=w;else for(var E=0,T=w.length;E<T;E++){var M=w[E].split("/");""!==M[0]&&S.push(M[0]),""!==M[1]&&C.push(M[1])}o.addLineGeometry(S,C)}else if(null!==(c=e.exec(s))){var I=(" "+c[0].substr(1).trim()).substr(1);o.startObject(I)}else if(i.test(s))o.object.startMaterial(s.substring(7).trim(),o.materialLibraries);else if(t.test(s))o.materialLibraries.push(s.substring(7).trim());else{if("s"!==l){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if((c=s.split(" ")).length>1){var B=c[1].trim().toLowerCase();o.object.smooth="0"!==B&&"off"!==B}else o.object.smooth=!0;(G=o.object.currentMaterial())&&(G.smooth=o.object.smooth)}o.finalize();var R=new n.Group;for(R.materialLibraries=[].concat(o.materialLibraries),h=0,d=o.objects.length;h<d;h++){var P=o.objects[h],k=P.geometry,L=P.materials,D="Line"===k.type;if(0!==k.vertices.length){var N=new n.BufferGeometry;N.addAttribute("position",new n.Float32BufferAttribute(k.vertices,3)),k.normals.length>0?N.addAttribute("normal",new n.Float32BufferAttribute(k.normals,3)):N.computeVertexNormals(),k.colors.length>0&&N.addAttribute("color",new n.Float32BufferAttribute(k.colors,3)),k.uvs.length>0&&N.addAttribute("uv",new n.Float32BufferAttribute(k.uvs,2));for(var O,F=[],U=0,z=L.length;U<z;U++){var H=L[U],G=void 0;if(null!==this.materials&&(G=this.materials.create(H.name),D&&G&&!(G instanceof n.LineBasicMaterial))){var V=new n.LineBasicMaterial;V.copy(G),G=V}G||((G=D?new n.LineBasicMaterial:new n.MeshPhongMaterial).name=H.name),G.flatShading=!H.smooth,F.push(G)}if(F.length>1){for(U=0,z=L.length;U<z;U++)H=L[U],N.addGroup(H.groupStart,H.groupCount,U);O=D?new n.LineSegments(N,F):new n.Mesh(N,F)}else O=D?new n.LineSegments(N,F[0]):new n.Mesh(N,F[0]);O.name=P.name,R.add(O)}}return console.timeEnd("OBJLoader"),R}},r}(),n.ColladaLoader=function(e){this.manager=void 0!==e?e:n.DefaultLoadingManager},n.ColladaLoader.prototype={constructor:n.ColladaLoader,crossOrigin:"anonymous",load:function(e,t,i,r){var o=this,a=void 0===o.path?n.LoaderUtils.extractUrlBase(e):o.path;new n.FileLoader(o.manager).load(e,(function(e){t(o.parse(e,a))}),i,r)},setPath:function(e){return this.path=e,this},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){function i(e,t){for(var i=[],n=e.childNodes,r=0,o=n.length;r<o;r++){var a=n[r];a.nodeName===t&&i.push(a)}return i}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=t[n];return i}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=parseFloat(t[n]);return i}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=parseInt(t[n]);return i}function s(e){return e.substring(1)}function l(e){return 0===Object.keys(e).length}function c(e,t,n,r){var o=i(e,t)[0];if(void 0!==o)for(var a=i(o,n),s=0;s<a.length;s++)r(a[s])}function u(e,t){for(var i in e)e[i].build=t(e[i])}function h(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function d(e){for(var t={inputs:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType&&"input"===r.nodeName){var o=s(r.getAttribute("source")),a=r.getAttribute("semantic");t.inputs[a]=o}}return t}function p(e){var t={},i=e.getAttribute("target").split("/"),n=i.shift(),r=i.shift(),o=-1!==r.indexOf("("),a=-1!==r.indexOf(".");if(a)r=(i=r.split(".")).shift(),t.member=i.shift();else if(o){var l=r.split("(");r=l.shift();for(var c=0;c<l.length;c++)l[c]=parseInt(l[c].replace(/\)/,""));t.indices=l}return t.id=n,t.sid=r,t.arraySyntax=o,t.memberSyntax=a,t.sampler=s(e.getAttribute("source")),t}function f(e){var t=[],i=e.channels,n=e.samplers,r=e.sources;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o],s=n[a.sampler],l=s.inputs.INPUT,c=s.inputs.OUTPUT;A(g(a,r[l],r[c]),t)}return t}function m(e){return h(Qe.animations[e],f)}function g(e,t,i){var n,r,o,a,s,l,c=Qe.nodes[e.id],u=ke(c.id),h=c.transforms[e.sid],d=c.matrix.clone().transpose(),p={};switch(h){case"matrix":for(o=0,a=t.array.length;o<a;o++)if(n=t.array[o],r=o*i.stride,void 0===p[n]&&(p[n]={}),!0===e.arraySyntax){var f=i.array[r],m=e.indices[0]+4*e.indices[1];p[n][m]=f}else for(s=0,l=i.stride;s<l;s++)p[n][s]=i.array[r+s];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var g=function(e,t){var i=[];for(var n in e)i.push({time:parseFloat(n),value:e[n]});i.sort((function(e,t){return e.time-t.time}));for(var r=0;r<16;r++)b(i,r,t.elements[r]);return i}(p,d);return{name:u.uuid,keyframes:g}}var _=new n.Vector3,v=new n.Vector3,y=new n.Quaternion;function A(e,t){for(var i=e.keyframes,r=e.name,o=[],a=[],s=[],l=[],c=0,u=i.length;c<u;c++){var h=i[c],d=h.time,p=h.value;we.fromArray(p).transpose(),we.decompose(_,y,v),o.push(d),a.push(_.x,_.y,_.z),s.push(y.x,y.y,y.z,y.w),l.push(v.x,v.y,v.z)}return a.length>0&&t.push(new n.VectorKeyframeTrack(r+".position",o,a)),s.length>0&&t.push(new n.QuaternionKeyframeTrack(r+".quaternion",o,s)),l.length>0&&t.push(new n.VectorKeyframeTrack(r+".scale",o,l)),t}function b(e,t,i){var n,r,o,a=!0;for(r=0,o=e.length;r<o;r++)void 0===(n=e[r]).value[t]?n.value[t]=null:a=!1;if(!0===a)for(r=0,o=e.length;r<o;r++)(n=e[r]).value[t]=i;else!function(e,t){for(var i,n,r=0,o=e.length;r<o;r++){var a=e[r];if(null===a.value[t]){if(i=x(e,r,t),n=w(e,r,t),null===i){a.value[t]=n.value[t];continue}if(null===n){a.value[t]=i.value[t];continue}S(a,i,n,t)}}}(e,t)}function x(e,t,i){for(;t>=0;){var n=e[t];if(null!==n.value[i])return n;t--}return null}function w(e,t,i){for(;t<e.length;){var n=e[t];if(null!==n.value[i])return n;t++}return null}function S(e,t,i,n){i.time-t.time!=0?e.value[n]=(e.time-t.time)*(i.value[n]-t.value[n])/(i.time-t.time)+t.value[n]:e.value[n]=t.value[n]}function C(e){for(var t=[],i=e.name,r=e.end-e.start||-1,o=e.animations,a=0,s=o.length;a<s;a++)for(var l=m(o[a]),c=0,u=l.length;c<u;c++)t.push(l[c]);return new n.AnimationClip(i,r,t)}function E(e){return h(Qe.clips[e],C)}function T(e){for(var t={sources:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=o(r.textContent);break;case"source":var a=r.getAttribute("id");t.sources[a]=re(r);break;case"joints":t.joints=M(r);break;case"vertex_weights":t.vertexWeights=I(r)}}return t}function M(e){for(var t={inputs:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType&&"input"===r.nodeName){var o=r.getAttribute("semantic"),a=s(r.getAttribute("source"));t.inputs[o]=a}}return t}function I(e){for(var t={inputs:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"input":var o=r.getAttribute("semantic"),l=s(r.getAttribute("source")),c=parseInt(r.getAttribute("offset"));t.inputs[o]={id:l,offset:c};break;case"vcount":t.vcount=a(r.textContent);break;case"v":t.v=a(r.textContent)}}return t}function B(e){var t={id:e.id},i=Qe.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,i,r,o={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},a=e.sources,s=e.vertexWeights,l=s.vcount,c=s.v,u=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],p=e.sources[e.joints.inputs.INV_BIND_MATRIX],f=a[s.inputs.WEIGHT.id].array,m=0;for(t=0,r=l.length;t<r;t++){var g=l[t],_=[];for(i=0;i<g;i++){var v=c[m+u],y=f[c[m+h]];_.push({index:v,weight:y}),m+=2}for(_.sort(w),i=0;i<4;i++){var A=_[i];void 0!==A?(o.indices.array.push(A.index),o.weights.array.push(A.weight)):(o.indices.array.push(0),o.weights.array.push(0))}}for(e.bindShapeMatrix?o.bindMatrix=(new n.Matrix4).fromArray(e.bindShapeMatrix).transpose():o.bindMatrix=(new n.Matrix4).transpose(),t=0,r=d.array.length;t<r;t++){var b=d.array[t],x=(new n.Matrix4).fromArray(p.array,t*p.stride).transpose();o.joints.push({name:b,boneInverse:x})}return o;function w(e,t){return t.weight-e.weight}}(e.skin),i.sources.skinIndices=t.skin.indices,i.sources.skinWeights=t.skin.weights),t}function R(e){return h(Qe.controllers[e],B)}function P(e){return void 0!==e.build?e.build:e.init_from}function k(e){var t=Qe.images[e];return void 0!==t?h(t,P):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function L(e){for(var t={surfaces:{},samplers:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"newparam":D(r,t);break;case"technique":t.technique=F(r);break;case"extra":t.extra=Q(r)}}return t}function D(e,t){for(var i=e.getAttribute("sid"),n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[i]=N(o);break;case"sampler2D":t.samplers[i]=O(o)}}}function N(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"init_from"===r.nodeName&&(t.init_from=r.textContent)}return t}function O(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"source"===r.nodeName&&(t.source=r.textContent)}return t}function F(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=r.nodeName,t.parameters=U(r)}}return t}function U(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparency":t[r.nodeName]=z(r);break;case"transparent":t[r.nodeName]={opaque:r.getAttribute("opaque"),data:z(r)}}}return t}function z(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"color":t[r.nodeName]=o(r.textContent);break;case"float":t[r.nodeName]=parseFloat(r.textContent);break;case"texture":t[r.nodeName]={id:r.getAttribute("texture"),extra:H(r)}}}return t}function H(e){for(var t={technique:{}},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"extra"===r.nodeName&&G(r,t)}return t}function G(e,t){for(var i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"technique"===r.nodeName&&V(r,t)}}function V(e,t){for(var i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?t.technique[r.nodeName]=1:"FALSE"===r.textContent.toUpperCase()?t.technique[r.nodeName]=0:t.technique[r.nodeName]=parseInt(r.textContent)}}}function Q(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"technique"===r.nodeName&&(t.technique=j(r))}return t}function j(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"double_sided"===r.nodeName&&(t[r.nodeName]=parseInt(r.textContent))}return t}function q(e){return e}function W(e){var t,i=function(e){return h(Qe.effects[e],q)}(e.url),r=i.profile.technique,o=i.profile.extra;switch(r.type){case"phong":case"blinn":t=new n.MeshPhongMaterial;break;case"lambert":t=new n.MeshLambertMaterial;break;default:t=new n.MeshBasicMaterial}function a(e){var t=i.profile.samplers[e.id],r=null;if(void 0!==t?r=k(i.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=k(e.id)),null!==r){var o=ze.load(r),a=e.extra;if(void 0!==a&&void 0!==a.technique&&!1===l(a.technique)){var s=a.technique;o.wrapS=s.wrapU?n.RepeatWrapping:n.ClampToEdgeWrapping,o.wrapT=s.wrapV?n.RepeatWrapping:n.ClampToEdgeWrapping,o.offset.set(s.offsetU||0,s.offsetV||0),o.repeat.set(s.repeatU||1,s.repeatV||1)}else o.wrapS=n.RepeatWrapping,o.wrapT=n.RepeatWrapping;return o}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=e.name;var s=r.parameters;for(var c in s){var u=s[c];switch(c){case"diffuse":u.color&&t.color.fromArray(u.color),u.texture&&(t.map=a(u.texture));break;case"specular":u.color&&t.specular&&t.specular.fromArray(u.color),u.texture&&(t.specularMap=a(u.texture));break;case"shininess":u.float&&t.shininess&&(t.shininess=u.float);break;case"emission":u.color&&t.emissive&&t.emissive.fromArray(u.color),u.texture&&(t.emissiveMap=a(u.texture))}}var d=s.transparent,p=s.transparency;if(void 0===p&&d&&(p={float:1}),void 0===d&&p&&(d={opaque:"A_ONE",data:{color:[1,1,1,1]}}),d&&p)if(d.data.texture)t.transparent=!0;else{var f=d.data.color;switch(d.opaque){case"A_ONE":t.opacity=f[3]*p.float;break;case"RGB_ZERO":t.opacity=1-f[0]*p.float;break;case"A_ZERO":t.opacity=1-f[3]*p.float;break;case"RGB_ONE":t.opacity=f[0]*p.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',d.opaque)}t.opacity<1&&(t.transparent=!0)}return void 0!==o&&void 0!==o.technique&&1===o.technique.double_sided&&(t.side=n.DoubleSide),t}function $(e){return h(Qe.materials[e],W)}function X(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if("technique_common"===i.nodeName)return Y(i)}return{}}function Y(e){for(var t={},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];switch(n.nodeName){case"perspective":case"orthographic":t.technique=n.nodeName,t.parameters=K(n)}}return t}function K(e){for(var t={},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];switch(n.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[n.nodeName]=parseFloat(n.textContent)}}return t}function Z(e){var t;switch(e.optics.technique){case"perspective":t=new n.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var i=e.optics.parameters.ymag,r=e.optics.parameters.xmag,o=e.optics.parameters.aspect_ratio;r=void 0===r?i*o:r,i=void 0===i?r/o:i,r*=.5,i*=.5,t=new n.OrthographicCamera(-r,r,i,-i,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new n.PerspectiveCamera}return t.name=e.name,t}function J(e){var t=Qe.cameras[e];return void 0!==t?h(t,Z):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ee(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=r.nodeName,t.parameters=te(r)}}return t}function te(e){for(var t={},i=0,r=e.childNodes.length;i<r;i++){var a=e.childNodes[i];if(1===a.nodeType)switch(a.nodeName){case"color":var s=o(a.textContent);t.color=(new n.Color).fromArray(s);break;case"falloff_angle":t.falloffAngle=parseFloat(a.textContent);break;case"quadratic_attenuation":var l=parseFloat(a.textContent);t.distance=l?Math.sqrt(1/l):0}}return t}function ie(e){var t;switch(e.technique){case"directional":t=new n.DirectionalLight;break;case"point":t=new n.PointLight;break;case"spot":t=new n.SpotLight;break;case"ambient":t=new n.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function ne(e){var t=Qe.lights[e];return void 0!==t?h(t,ie):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function re(e){for(var t={array:[],stride:3},n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=o(a.textContent);break;case"Name_array":t.array=r(a.textContent);break;case"technique_common":var s=i(a,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function oe(e){for(var t={},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1===n.nodeType&&(t[n.getAttribute("semantic")]=s(n.getAttribute("source")))}return t}function ae(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"input":var o=s(r.getAttribute("source")),l=r.getAttribute("semantic"),c=parseInt(r.getAttribute("offset"));t.inputs[l]={id:o,offset:c},t.stride=Math.max(t.stride,c+1),"TEXCOORD"===l&&(t.hasUV=!0);break;case"vcount":t.vcount=a(r.textContent);break;case"p":t.p=a(r.textContent)}}return t}function se(e){for(var t=0,i=0,n=e.length;i<n;i++)!0===e[i].hasUV&&t++;t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function le(e){var t={},i=e.sources,n=e.vertices,r=e.primitives;if(0===r.length)return{};var o=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i];void 0===t[n.type]&&(t[n.type]=[]),t[n.type].push(n)}return t}(r);for(var a in o){var s=o[a];se(s),t[a]=ce(s,i,n)}return t}function ce(e,t,i){for(var r={},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},c=[],u=[],h=new n.BufferGeometry,d=[],p=0,f=0;f<e.length;f++){var m=e[f],g=m.inputs,_=0;switch(m.type){case"lines":case"linestrips":_=2*m.count;break;case"triangles":_=3*m.count;break;case"polylist":for(var v=0;v<m.count;v++){var y=m.vcount[v];switch(y){case 3:_+=3;break;case 4:_+=6;break;default:_+=3*(y-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",m.type)}for(var A in h.addGroup(p,_,f),p+=_,m.material&&d.push(m.material),g){var b=g[A];switch(A){case"VERTEX":for(var x in i){var w=i[x];switch(x){case"POSITION":var S=o.array.length;if(ue(m,t[w],b.offset,o.array),o.stride=t[w].stride,t.skinWeights&&t.skinIndices&&(ue(m,t.skinIndices,b.offset,c),ue(m,t.skinWeights,b.offset,u)),!1===m.hasUV&&!0===e.uvsNeedsFix){_=(o.array.length-S)/o.stride;for(var C=0;C<_;C++)s.array.push(0,0)}break;case"NORMAL":ue(m,t[w],b.offset,a.array),a.stride=t[w].stride;break;case"COLOR":ue(m,t[w],b.offset,l.array),l.stride=t[w].stride;break;case"TEXCOORD":ue(m,t[w],b.offset,s.array),s.stride=t[w].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',x)}}break;case"NORMAL":ue(m,t[b.id],b.offset,a.array),a.stride=t[b.id].stride;break;case"COLOR":ue(m,t[b.id],b.offset,l.array),l.stride=t[b.id].stride;break;case"TEXCOORD":ue(m,t[b.id],b.offset,s.array),s.stride=t[b.id].stride}}}return o.array.length>0&&h.addAttribute("position",new n.Float32BufferAttribute(o.array,o.stride)),a.array.length>0&&h.addAttribute("normal",new n.Float32BufferAttribute(a.array,a.stride)),l.array.length>0&&h.addAttribute("color",new n.Float32BufferAttribute(l.array,l.stride)),s.array.length>0&&h.addAttribute("uv",new n.Float32BufferAttribute(s.array,s.stride)),c.length>0&&h.addAttribute("skinIndex",new n.Float32BufferAttribute(c,4)),u.length>0&&h.addAttribute("skinWeight",new n.Float32BufferAttribute(u,4)),r.data=h,r.type=e[0].type,r.materialKeys=d,r}function ue(e,t,i,n){var r=e.p,o=e.stride,a=e.vcount;function s(e){for(var t=r[e+i]*c,o=t+c;t<o;t++)n.push(l[t])}var l=t.array,c=t.stride;if(void 0!==e.vcount)for(var u=0,h=0,d=a.length;h<d;h++){var p=a[h];if(4===p){var f=u+1*o,m=u+2*o,g=u+3*o;s(u+0*o),s(f),s(g),s(f),s(m),s(g)}else if(3===p)f=u+1*o,m=u+2*o,s(u+0*o),s(f),s(m);else if(p>4)for(var _=1,v=p-2;_<=v;_++)f=u+o*_,m=u+o*(_+1),s(u+0*o),s(f),s(m);u+=o*p}else for(h=0,d=r.length;h<d;h+=o)s(h)}function he(e){return h(Qe.geometries[e],le)}function de(e){return void 0!==e.build?e.build:e}function pe(e,t){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"joint":t.joints[n.getAttribute("sid")]=fe(n);break;case"link":t.links.push(ge(n))}}}function fe(e){for(var t,i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"prismatic":case"revolute":t=me(n)}}return t}function me(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new n.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var i=0;i<e.childNodes.length;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"axis":var a=o(r.textContent);t.axis.fromArray(a);break;case"limits":var s=r.getElementsByTagName("max")[0],l=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(s.textContent),t.limits.min=parseFloat(l.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ge(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"attachment_full":t.attachments.push(_e(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(ve(n))}}return t}function _e(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"link":t.links.push(ge(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(ve(n))}}return t}function ve(e){var t={type:e.nodeName},i=o(e.textContent);switch(t.type){case"matrix":t.obj=new n.Matrix4,t.obj.fromArray(i).transpose();break;case"translate":t.obj=new n.Vector3,t.obj.fromArray(i);break;case"rotate":t.obj=new n.Vector3,t.obj.fromArray(i),t.angle=n.Math.degToRad(i[3])}return t}function ye(e,t){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1===n.nodeType&&"technique_common"===n.nodeName&&Ae(n,t)}}function Ae(e,t){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType)switch(n.nodeName){case"inertia":t.inertia=o(n.textContent);break;case"mass":t.mass=o(n.textContent)[0]}}}function be(e){for(var t={target:e.getAttribute("target").split("/").pop()},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1===n.nodeType&&"axis"===n.nodeName){var r=n.getElementsByTagName("param")[0];t.axis=r.textContent;var o=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=o.substr(0,o.length-1)}}return t}function xe(e){return void 0!==e.build?e.build:e}var we=new n.Matrix4,Se=new n.Vector3;function Ce(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new n.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},i=0;i<e.childNodes.length;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),Ce(r);break;case"instance_camera":t.instanceCameras.push(s(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ee(r));break;case"instance_light":t.instanceLights.push(s(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ee(r));break;case"instance_node":t.instanceNodes.push(s(r.getAttribute("url")));break;case"matrix":var a=o(r.textContent);t.matrix.multiply(we.fromArray(a).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":a=o(r.textContent),Se.fromArray(a),t.matrix.multiply(we.makeTranslation(Se.x,Se.y,Se.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":a=o(r.textContent);var l=n.Math.degToRad(a[3]);t.matrix.multiply(we.makeRotationAxis(Se.fromArray(a),l)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":a=o(r.textContent),t.matrix.scale(Se.fromArray(a)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}return Qe.nodes[t.id]=t,t}function Ee(e){for(var t={id:s(e.getAttribute("url")),materials:{},skeletons:[]},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];switch(n.nodeName){case"bind_material":for(var r=n.getElementsByTagName("instance_material"),o=0;o<r.length;o++){var a=r[o],l=a.getAttribute("symbol"),c=a.getAttribute("target");t.materials[l]=s(c)}break;case"skeleton":t.skeletons.push(s(n.textContent))}}return t}function Te(e,t){var i,r,o=[],a=[];for(i=0;i<e.length;i++){var s=e[i];if(Pe(s))Me(ke(s),t,o);else if(De(s))for(var l=Qe.visualScenes[s].children,c=0;c<l.length;c++){var u=l[c];"JOINT"===u.type&&Me(ke(u.id),t,o)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",s)}for(i=0;i<t.length;i++)for(c=0;c<o.length;c++)if((r=o[c]).bone.name===t[i].name){a[i]=r,r.processed=!0;break}for(i=0;i<o.length;i++)!1===(r=o[i]).processed&&(a.push(r),r.processed=!0);var h=[],d=[];for(i=0;i<a.length;i++)r=a[i],h.push(r.bone),d.push(r.boneInverse);return new n.Skeleton(h,d)}function Me(e,t,i){e.traverse((function(e){if(!0===e.isBone){for(var r,o=0;o<t.length;o++){var a=t[o];if(a.name===e.name){r=a.boneInverse;break}}void 0===r&&(r=new n.Matrix4),i.push({bone:e,boneInverse:r,processed:!1})}}))}function Ie(e){for(var t=[],i=e.matrix,r=e.nodes,o=e.type,a=e.instanceCameras,s=e.instanceControllers,l=e.instanceLights,c=e.instanceGeometries,u=e.instanceNodes,h=0,d=r.length;h<d;h++)t.push(ke(r[h]));for(h=0,d=a.length;h<d;h++){var p=J(a[h]);null!==p&&t.push(p.clone())}for(h=0,d=s.length;h<d;h++)for(var f=R((b=s[h]).id),m=Re(he(f.id),b.materials),g=Te(b.skeletons,f.skin.joints),_=0,v=m.length;_<v;_++){var y;(y=m[_]).isSkinnedMesh&&(y.bind(g,f.skin.bindMatrix),y.normalizeSkinWeights()),t.push(y)}for(h=0,d=l.length;h<d;h++){var A=ne(l[h]);null!==A&&t.push(A.clone())}for(h=0,d=c.length;h<d;h++){var b;for(_=0,v=(m=Re(he((b=c[h]).id),b.materials)).length;_<v;_++)t.push(m[_])}for(h=0,d=u.length;h<d;h++)t.push(ke(u[h]).clone());if(0===r.length&&1===t.length)y=t[0];else for(y="JOINT"===o?new n.Bone:new n.Group,h=0;h<t.length;h++)y.add(t[h]);return""===y.name&&(y.name="JOINT"===o?e.sid:e.name),y.matrix.copy(i),y.matrix.decompose(y.position,y.quaternion,y.scale),y}function Be(e,t){for(var i=[],n=0,r=e.length;n<r;n++){var o=t[e[n]];i.push($(o))}return i}function Re(e,t){var i=[];for(var r in e){var o=e[r],a=Be(o.materialKeys,t);0===a.length&&("lines"===r||"linestrips"===r?a.push(new n.LineBasicMaterial):a.push(new n.MeshPhongMaterial));var s=void 0!==o.data.attributes.skinIndex;if(s)for(var l=0,c=a.length;l<c;l++)a[l].skinning=!0;var u,h=1===a.length?a[0]:a;switch(r){case"lines":u=new n.LineSegments(o.data,h);break;case"linestrips":u=new n.Line(o.data,h);break;case"triangles":case"polylist":u=s?new n.SkinnedMesh(o.data,h):new n.Mesh(o.data,h)}i.push(u)}return i}function Pe(e){return void 0!==Qe.nodes[e]}function ke(e){return h(Qe.nodes[e],Ie)}function Le(e){var t=new n.Group;t.name=e.name;for(var i=e.children,r=0;r<i.length;r++){var o=i[r];t.add(ke(o.id))}return t}function De(e){return void 0!==Qe.visualScenes[e]}function Ne(e){return h(Qe.visualScenes[e],Le)}if(0===e.length)return{scene:new n.Scene};var Oe=i((new DOMParser).parseFromString(e,"application/xml"),"COLLADA")[0],Fe=Oe.getAttribute("version");console.log("THREE.ColladaLoader: File version",Fe);var Ue=function(e){return{unit:function(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}(i(e,"unit")[0]),upAxis:function(e){return void 0!==e?e.textContent:"Y_UP"}(i(e,"up_axis")[0])}}(i(Oe,"asset")[0]),ze=new n.TextureLoader(this.manager);ze.setPath(t).setCrossOrigin(this.crossOrigin);var He=[],Ge={},Ve=0,Qe={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};c(Oe,"library_animations","animation",(function(e){for(var t={sources:{},samplers:{},channels:{}},i=0,n=e.childNodes.length;i<n;i++){var r,o=e.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"source":r=o.getAttribute("id"),t.sources[r]=re(o);break;case"sampler":r=o.getAttribute("id"),t.samplers[r]=d(o);break;case"channel":r=o.getAttribute("target"),t.channels[r]=p(o);break;default:console.log(o)}}Qe.animations[e.getAttribute("id")]=t})),c(Oe,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"instance_animation"===r.nodeName&&t.animations.push(s(r.getAttribute("url")))}Qe.clips[e.getAttribute("id")]=t})),c(Oe,"library_controllers","controller",(function(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];if(1===r.nodeType)switch(r.nodeName){case"skin":t.id=s(r.getAttribute("source")),t.skin=T(r);break;case"morph":t.id=s(r.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Qe.controllers[e.getAttribute("id")]=t})),c(Oe,"library_images","image",(function(e){var t={init_from:i(e,"init_from")[0].textContent};Qe.images[e.getAttribute("id")]=t})),c(Oe,"library_effects","effect",(function(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"profile_COMMON"===r.nodeName&&(t.profile=L(r))}Qe.effects[e.getAttribute("id")]=t})),c(Oe,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"instance_effect"===r.nodeName&&(t.url=s(r.getAttribute("url")))}Qe.materials[e.getAttribute("id")]=t})),c(Oe,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"optics"===r.nodeName&&(t.optics=X(r))}Qe.cameras[e.getAttribute("id")]=t})),c(Oe,"library_lights","light",(function(e){for(var t={},i=0,n=e.childNodes.length;i<n;i++){var r=e.childNodes[i];1===r.nodeType&&"technique_common"===r.nodeName&&(t=ee(r))}Qe.lights[e.getAttribute("id")]=t})),c(Oe,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},n=i(e,"mesh")[0];if(void 0!==n){for(var r=0;r<n.childNodes.length;r++){var o=n.childNodes[r];if(1===o.nodeType){var a=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[a]=re(o);break;case"vertices":t.vertices=oe(o);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ae(o));break;default:console.log(o)}}}Qe.geometries[e.getAttribute("id")]=t}})),c(Oe,"library_nodes","node",Ce),c(Oe,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),i=0;i<t.length;i++){var n=t[i];!1===n.hasAttribute("id")&&n.setAttribute("id","three_default_"+Ve++)}}(e);for(var n=i(e,"node"),r=0;r<n.length;r++)t.children.push(Ce(n[r]));Qe.visualScenes[e.getAttribute("id")]=t})),c(Oe,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1===n.nodeType&&"technique_common"===n.nodeName&&pe(n,t)}Qe.kinematicsModels[e.getAttribute("id")]=t})),c(Oe,"library_physics_models","physics_model",(function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1===n.nodeType&&"rigid_body"===n.nodeName&&(t.rigidBodies[n.getAttribute("name")]={},ye(n,t.rigidBodies[n.getAttribute("name")]))}Qe.physicsModels[e.getAttribute("id")]=t})),c(Oe,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1===n.nodeType&&"bind_joint_axis"===n.nodeName&&t.bindJointAxis.push(be(n))}Qe.kinematicsScenes[s(e.getAttribute("url"))]=t})),u(Qe.animations,f),u(Qe.clips,C),u(Qe.controllers,B),u(Qe.images,P),u(Qe.effects,q),u(Qe.materials,W),u(Qe.cameras,Z),u(Qe.lights,ie),u(Qe.geometries,le),u(Qe.visualScenes,Le),function(){var e=Qe.clips;if(!0===l(e)){if(!1===l(Qe.animations)){var t=[];for(var i in Qe.animations)for(var r=m(i),o=0,a=r.length;o<a;o++)t.push(r[o]);He.push(new n.AnimationClip("default",-1,t))}}else for(var i in e)He.push(E(i))}(),function(){var e=Object.keys(Qe.kinematicsModels)[0],t=Object.keys(Qe.kinematicsScenes)[0],i=Object.keys(Qe.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var r=function(e){return h(Qe.kinematicsModels[e],de)}(e),a=function(e){return h(Qe.kinematicsScenes[e],xe)}(t),s=Ne(i),l=a.bindJointAxis,c={},u=0,d=l.length;u<d;u++){var p=l[u],f=Oe.querySelector('[sid="'+p.target+'"]');if(f){var m=f.parentElement;_(p.jointIndex,m)}}var g=new n.Matrix4;Ge={joints:r&&r.joints,getJointValue:function(e){var t=c[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var i=c[e];if(i){var r=i.joint;if(t>r.limits.max||t<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var o=i.object,a=r.axis,s=i.transforms;we.identity();for(var l=0;l<s.length;l++){var u=s[l];if(u.sid&&-1!==u.sid.indexOf(e))switch(r.type){case"revolute":we.multiply(g.makeRotationAxis(a,n.Math.degToRad(t)));break;case"prismatic":we.multiply(g.makeTranslation(a.x*t,a.y*t,a.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type)}else switch(u.type){case"matrix":we.multiply(u.obj);break;case"translate":we.multiply(g.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"scale":we.scale(u.obj);break;case"rotate":we.multiply(g.makeRotationAxis(u.obj,u.angle))}}o.matrix.copy(we),o.matrix.decompose(o.position,o.quaternion,o.scale),c[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function _(e,t){var i=t.getAttribute("name"),a=r.joints[e];s.traverse((function(r){r.name===i&&(c[e]={object:r,transforms:function(e){for(var t=[],i=Oe.querySelector('[id="'+e.id+'"]'),r=0;r<i.childNodes.length;r++){var a=i.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"matrix":var s=o(a.textContent),l=(new n.Matrix4).fromArray(s).transpose();t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:l});break;case"translate":case"scale":s=o(a.textContent);var c=(new n.Vector3).fromArray(s);t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:c});break;case"rotate":s=o(a.textContent),c=(new n.Vector3).fromArray(s);var u=n.Math.degToRad(s[3]);t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:c,angle:u})}}return t}(t),joint:a,position:a.zeroPosition})}))}}();var je=function(e){return Ne(s(i(e,"instance_visual_scene")[0].getAttribute("url")))}(i(Oe,"scene")[0]);return"Z_UP"===Ue.upAxis&&je.quaternion.setFromEuler(new n.Euler(-Math.PI/2,0,0)),je.scale.multiplyScalar(Ue.unit),{animations:He,kinematics:Ge,library:Qe,scene:je}}},n.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:n.DefaultLoadingManager,this.dracoLoader=null}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,i,r){var o=this,a=void 0!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),s=new n.FileLoader(o.manager);s.setResponseType("arraybuffer"),s.load(e,(function(e){try{o.parse(e,a,t,r)}catch(e){if(void 0===r)throw e;r(e)}}),i,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,h,d,p){var f,m={};if("string"==typeof e)f=e;else if(n.LoaderUtils.decodeText(new Uint8Array(e,0,4))===a){try{m[t.KHR_BINARY_GLTF]=new function(e){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var i=new DataView(e,0,s);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(e,s),o=0;o<r.byteLength;){var c=r.getUint32(o,!0);o+=4;var u=r.getUint32(o,!0);if(o+=4,u===l.JSON){var h=new Uint8Array(e,s+o,c);this.content=n.LoaderUtils.decodeText(h)}else if(u===l.BIN){var d=s+o;this.body=e.slice(d,d+c)}o+=c}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(e)}catch(e){return void(p&&p(e))}f=m[t.KHR_BINARY_GLTF].content}else f=n.LoaderUtils.decodeText(new Uint8Array(e));var g=JSON.parse(f);if(void 0===g.asset||g.asset.version[0]<2)p&&p(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(g.extensionsUsed)for(var _=0;_<g.extensionsUsed.length;++_){var v=g.extensionsUsed[_],y=g.extensionsRequired||[];switch(v){case t.KHR_LIGHTS:m[v]=new r(g);break;case t.KHR_MATERIALS_UNLIT:m[v]=new o;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[v]=new u;break;case t.KHR_DRACO_MESH_COMPRESSION:m[v]=new c(g,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:m[t.MSFT_TEXTURE_DDS]=new i;break;default:y.indexOf(v)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}var A=new I(g,m,{path:h||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});A.parse((function(e,t,i,n,r){var o={scene:e,scenes:t,cameras:i,animations:n,asset:r.asset,parser:A,userData:{}};x(m,o,r),d(o)}),p)}}};var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(){if(!n.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=new n.DDSLoader}function r(e){this.name=t.KHR_LIGHTS,this.lights={};var i=(e.extensions&&e.extensions[t.KHR_LIGHTS]||{}).lights||{};for(var r in i){var o,a=i[r],s=(new n.Color).fromArray(a.color);switch(a.type){case"directional":(o=new n.DirectionalLight(s)).target.position.set(0,0,1),o.add(o.target);break;case"point":o=new n.PointLight(s);break;case"spot":o=new n.SpotLight(s),a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,1),o.add(o.target);break;case"ambient":o=new n.AmbientLight(s)}o&&(o.decay=2,void 0!==a.intensity&&(o.intensity=a.intensity),o.name=a.name||"light_"+r,this.lights[r]=o)}}function o(e){this.name=t.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(e){return n.MeshBasicMaterial},o.prototype.extendParams=function(e,t,i){var r=[];e.color=new n.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&r.push(i.assignTexture(e,"map",o.baseColorTexture.index))}return Promise.all(r)};var a="glTF",s=12,l={JSON:1313821514,BIN:5130562};function c(e,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=i}function u(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return n.ShaderMaterial},extendParams:function(e,t,i){var r=t.extensions[this.name],o=n.ShaderLib.standard,a=n.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),l=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new n.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=o.vertexShader,e.fragmentShader=d,e.uniforms=a,e.defines={STANDARD:""},e.color=new n.Color(1,1,1),e.opacity=1;var p=[];if(Array.isArray(r.diffuseFactor)){var f=r.diffuseFactor;e.color.fromArray(f),e.opacity=f[3]}if(void 0!==r.diffuseTexture&&p.push(i.assignTexture(e,"map",r.diffuseTexture.index)),e.emissive=new n.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new n.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var m=r.specularGlossinessTexture.index;p.push(i.assignTexture(e,"glossinessMap",m)),p.push(i.assignTexture(e,"specularMap",m))}return Promise.all(p)},createMaterial:function(e){var t=new n.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var i=this.specularGlossinessParams,n=0,r=i.length;n<r;n++)t[i[n]]=e[i[n]];return t},refreshUniforms:function(e,t,i,n,r,o){if(!0===r.isGLTFSpecularGlossinessMaterial){var a,s=r.uniforms,l=r.defines;s.opacity.value=r.opacity,s.diffuse.value.copy(r.color),s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),s.map.value=r.map,s.specularMap.value=r.specularMap,s.alphaMap.value=r.alphaMap,s.lightMap.value=r.lightMap,s.lightMapIntensity.value=r.lightMapIntensity,s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity,r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.glossinessMap?a=r.glossinessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap&&(a=r.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),s.uvTransform.value.copy(a.matrix)),s.envMap.value=r.envMap,s.envMapIntensity.value=r.envMapIntensity,s.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,s.refractionRatio.value=r.refractionRatio,s.specular.value.copy(r.specular),s.glossiness.value=r.glossiness,s.glossinessMap.value=r.glossinessMap,s.emissiveMap.value=r.emissiveMap,s.bumpMap.value=r.bumpMap,s.normalMap.value=r.normalMap,s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias,null!==s.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function h(e,t,i,r){n.Interpolant.call(this,e,t,i,r)}c.prototype.decodePrimitive=function(e,t){var i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(var c in o)c in v&&(a[v[c]]=o[c]);for(c in e.attributes)if(void 0!==v[c]&&void 0!==o[c]){var u=i.accessors[e.attributes[c]],h=d[u.componentType];l[v[c]]=h,s[v[c]]=!0===u.normalized}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var i in e.attributes){var n=e.attributes[i],r=s[i];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))},h.prototype=Object.create(n.Interpolant.prototype),h.prototype.constructor=h,h.prototype.interpolate_=function(e,t,i,n){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=n-t,u=(i-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=2*d-3*h+1,g=d-2*h+u,_=-2*d+3*h,v=d-h,y=0;y!==a;y++){var A=o[f+y+a],b=o[f+y+s]*c,x=o[p+y+a],w=o[p+y]*c;r[y]=m*A+g*b+_*x+v*w}return r};var d=(n.Matrix3,n.Matrix4,n.Vector2,n.Vector3,n.Vector4,n.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),p={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipMapNearestFilter,9985:n.LinearMipMapNearestFilter,9986:n.NearestMipMapLinearFilter,9987:n.LinearMipMapLinearFilter},f={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},m={6406:n.AlphaFormat,6407:n.RGBFormat,6408:n.RGBAFormat,6409:n.LuminanceFormat,6410:n.LuminanceAlphaFormat},g={5121:n.UnsignedByteType,32819:n.UnsignedShort4444Type,32820:n.UnsignedShort5551Type,33635:n.UnsignedShort565Type},_=(n.BackSide,n.FrontSide,n.NeverDepth,n.LessDepth,n.EqualDepth,n.LessEqualDepth,n.GreaterEqualDepth,n.NotEqualDepth,n.GreaterEqualDepth,n.AlwaysDepth,n.AddEquation,n.SubtractEquation,n.ReverseSubtractEquation,n.ZeroFactor,n.OneFactor,n.SrcColorFactor,n.OneMinusSrcColorFactor,n.SrcAlphaFactor,n.OneMinusSrcAlphaFactor,n.DstAlphaFactor,n.OneMinusDstAlphaFactor,n.DstColorFactor,n.OneMinusDstColorFactor,n.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),v={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},y={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},A={CUBICSPLINE:n.InterpolateSmooth,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete};function b(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e}function x(e,t,i){for(var n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function w(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length)for(e.morphTargetDictionary={},i=0,n=r.length;i<n;i++)e.morphTargetDictionary[r[i]]=i;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function S(e,t){return e.indices===t.indices&&C(e.attributes,t.attributes)}function C(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}function E(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function T(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(S(r.primitive,t))return r.promise}return null}function M(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,i=e.itemSize,r=e.array.slice(0,t*i),o=0;o<t;++o)r[o]=e.getX(o),i>=2&&(r[o+1]=e.getY(o)),i>=3&&(r[o+2]=e.getZ(o)),i>=4&&(r[o+3]=e.getW(o));return new n.BufferAttribute(r,i,e.normalized)}return e.clone()}function I(e,t,i){this.json=e||{},this.extensions=t||{},this.options=i||{},this.cache=new function(){var e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}},this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new n.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function B(e,t,i){var n=t.attributes;for(var r in n){var o=v[r],a=i[n[r]];o&&(o in e.attributes||e.addAttribute(o,a))}void 0===t.indices||e.index||e.setIndex(i[t.indices]),void 0!==t.targets&&function(e,t,i){for(var n=!1,r=!1,o=0,a=t.length;o<a&&(void 0!==(c=t[o]).POSITION&&(n=!0),void 0!==c.NORMAL&&(r=!0),!n||!r);o++);if(n||r){var s=[],l=[];for(o=0,a=t.length;o<a;o++){var c=t[o],u="morphTarget"+o;if(n){if(void 0!==c.POSITION){var h=M(i[c.POSITION]);h.name=u;for(var d=e.attributes.position,p=0,f=h.count;p<f;p++)h.setXYZ(p,h.getX(p)+d.getX(p),h.getY(p)+d.getY(p),h.getZ(p)+d.getZ(p))}else h=e.attributes.position;s.push(h)}if(r){if(void 0!==c.NORMAL){var m;(m=M(i[c.NORMAL])).name=u;var g=e.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+g.getX(p),m.getY(p)+g.getY(p),m.getZ(p)+g.getZ(p))}else m=e.attributes.normal;l.push(m)}}n&&(e.morphAttributes.position=s),r&&(e.morphAttributes.normal=l)}}(e,t.targets,i),void 0!==t.extras&&(e.userData=t.extras)}return I.prototype.parse=function(e,t){var i=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then((function(t){var n=t.scenes||[],r=n[i.scene||0],o=t.animations||[],a=t.cameras||[];e(r,n,a,o,i)})).catch(t)},I.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],n={},r={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var u=0,h=e.length;u<h;u++){var d=e[u];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=r[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(i[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=r},I.prototype.getDependency=function(e,t){var i=e+":"+t,n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this.loadMesh(t);break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this.loadBufferView(t);break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this.loadMaterial(t);break;case"texture":n=this.loadTexture(t);break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n},I.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t},I.prototype.getMultiDependencies=function(e){for(var t={},i=[],n=0,r=e.length;n<r;n++){var o=e[n],a=this.getDependencies(o);a=a.then(function(e,i){t[e]=i}.bind(this,o+("mesh"===o?"es":"s"))),i.push(a)}return Promise.all(i).then((function(){return t}))},I.prototype.loadBuffer=function(e){var i=this.json.buffers[e],n=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===e)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,t){n.load(b(i.uri,r.path),e,void 0,(function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))}))}))},I.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))},I.prototype.loadAccessor=function(e){var t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return null;var o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,a,s=e[0],l=_[r.type],c=d[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,p=r.byteOffset||0,f=i.bufferViews[r.bufferView].byteStride,m=!0===r.normalized;if(f&&f!==h){var g="InterleavedBuffer:"+r.bufferView+":"+r.componentType,v=t.cache.get(g);v||(o=new c(s),v=new n.InterleavedBuffer(o,f/u),t.cache.add(g,v)),a=new n.InterleavedBufferAttribute(v,l,p/u,m)}else o=null===s?new c(r.count*l):new c(s,p,r.count*l),a=new n.BufferAttribute(o,l,m);if(void 0!==r.sparse){var y=_.SCALAR,A=d[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new A(e[1],b,r.sparse.count*y),S=new c(e[2],x,r.sparse.count*l);null!==s&&a.setArray(a.array.slice());for(var C=0,E=w.length;C<E;C++){var T=w[C];if(a.setX(T,S[C*l]),l>=2&&a.setY(T,S[C*l+1]),l>=3&&a.setZ(T,S[C*l+2]),l>=4&&a.setW(T,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},I.prototype.loadTexture=function(e){var i,r=this,o=this.json,a=this.options,s=this.textureLoader,l=window.URL||window.webkitURL,c=o.textures[e],u=c.extensions||{},h=(i=u[t.MSFT_TEXTURE_DDS]?o.images[u[t.MSFT_TEXTURE_DDS].source]:o.images[c.source]).uri,d=!1;return void 0!==i.bufferView&&(h=r.getDependency("bufferView",i.bufferView).then((function(e){d=!0;var t=new Blob([e],{type:i.mimeType});return h=l.createObjectURL(t)}))),Promise.resolve(h).then((function(e){var i=n.Loader.Handlers.get(e);return i||(i=u[t.MSFT_TEXTURE_DDS]?r.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(t,n){i.load(b(e,a.path),t,void 0,n)}))})).then((function(e){!0===d&&l.revokeObjectURL(h),e.flipY=!1,void 0!==c.name&&(e.name=c.name),u[t.MSFT_TEXTURE_DDS]||(e.format=void 0!==c.format?m[c.format]:n.RGBAFormat),void 0!==c.internalFormat&&e.format!==m[c.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==c.type?g[c.type]:n.UnsignedByteType;var i=(o.samplers||{})[c.sampler]||{};return e.magFilter=p[i.magFilter]||n.LinearFilter,e.minFilter=p[i.minFilter]||n.LinearMipMapLinearFilter,e.wrapS=f[i.wrapS]||n.RepeatWrapping,e.wrapT=f[i.wrapT]||n.RepeatWrapping,e}))},I.prototype.assignTexture=function(e,t,i){return this.getDependency("texture",i).then((function(i){e[t]=i}))},I.prototype.loadMaterial=function(e){this.json;var i,r=this.extensions,o=this.json.materials[e],a={},s=o.extensions||{},l=[];if(s[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=r[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=c.getMaterialType(o),l.push(c.extendParams(a,o,this))}else if(s[t.KHR_MATERIALS_UNLIT]){var u=r[t.KHR_MATERIALS_UNLIT];i=u.getMaterialType(o),l.push(u.extendParams(a,o,this))}else{i=n.MeshStandardMaterial;var h=o.pbrMetallicRoughness||{};if(a.color=new n.Color(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}if(void 0!==h.baseColorTexture&&l.push(this.assignTexture(a,"map",h.baseColorTexture.index)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture){var p=h.metallicRoughnessTexture.index;l.push(this.assignTexture(a,"metalnessMap",p)),l.push(this.assignTexture(a,"roughnessMap",p))}}!0===o.doubleSided&&(a.side=n.DoubleSide);var f=o.alphaMode||"OPAQUE";return"BLEND"===f?a.transparent=!0:(a.transparent=!1,"MASK"===f&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&i!==n.MeshBasicMaterial&&(l.push(this.assignTexture(a,"normalMap",o.normalTexture.index)),a.normalScale=new n.Vector2(1,1),void 0!==o.normalTexture.scale&&a.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&i!==n.MeshBasicMaterial&&(l.push(this.assignTexture(a,"aoMap",o.occlusionTexture.index)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&i!==n.MeshBasicMaterial&&(a.emissive=(new n.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&i!==n.MeshBasicMaterial&&l.push(this.assignTexture(a,"emissiveMap",o.emissiveTexture.index)),Promise.all(l).then((function(){var e;return e=i===n.ShaderMaterial?r[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new i(a),void 0!==o.name&&(e.name=o.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=n.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=n.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=n.sRGBEncoding),o.extras&&(e.userData=o.extras),o.extensions&&x(r,e,o),e}))},I.prototype.loadGeometries=function(e){var i,r=this,o=this.extensions,a=this.primitiveCache,s=function(e){if(e.length<2)return!1;var t=e[0],i=t.targets||[];if(void 0===t.indices)return!1;for(var n=1,r=e.length;n<r;n++){var o=e[n];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!C(t.attributes,o.attributes))return!1;var a=o.targets||[];if(i.length!==a.length)return!1;for(var s=0,l=i.length;s<l;s++)if(!C(i[s],a[s]))return!1}return!0}(e);return s&&(i=e,e=[e[0]]),this.getDependencies("accessor").then((function(l){for(var c=[],u=0,h=e.length;u<h;u++){var d=e[u],p=T(a,d);if(p)c.push(p);else if(d.extensions&&d.extensions[t.KHR_DRACO_MESH_COMPRESSION]){var f=o[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(d,r).then((function(e){return B(e,d,l),e}));a.push({primitive:d,promise:f}),c.push(f)}else{var m=new n.BufferGeometry;B(m,d,l),f=Promise.resolve(m),a.push({primitive:d,promise:f}),c.push(f)}}return Promise.all(c).then((function(t){if(s){var o=t[0];if(null!==(v=function(e,t,i){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t===o.baseGeometry&&E(i,o.primitives))return o.geometry}return null}(_=r.multiPassGeometryCache,o,i)))return[v.geometry];var a=new n.BufferGeometry;for(var c in a.name=o.name,a.userData=o.userData,o.attributes)a.addAttribute(c,o.attributes[c]);for(var c in o.morphAttributes)a.morphAttributes[c]=o.morphAttributes[c];for(var u=[],h=0,d=0,p=i.length;d<p;d++){for(var f=l[i[d].indices],m=0,g=f.count;m<g;m++)u.push(f.array[m]);a.addGroup(h,f.count,d),h+=f.count}return a.setIndex(u),_.push({geometry:a,baseGeometry:o,primitives:i}),[a]}if(t.length>1&&void 0!==n.BufferGeometryUtils){for(d=1,p=e.length;d<p;d++)if(e[0].mode!==e[d].mode)return t;var _,v;if(v=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(E(t,r.baseGeometries))return r.geometry}return null}(_=r.multiplePrimitivesCache,t)){if(null!==v.geometry)return[v.geometry]}else if(a=n.BufferGeometryUtils.mergeBufferGeometries(t,!0),_.push({geometry:a,baseGeometries:t}),null!==a)return[a]}return t}))}))},I.prototype.loadMesh=function(e){var i=this,r=(this.json,this.extensions),o=this.json.meshes[e];return this.getMultiDependencies(["accessor","material"]).then((function(a){for(var s=o.primitives,l=[],c=0,u=s.length;c<u;c++)l[c]=void 0===s[c].material?new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide}):a.materials[s[c].material];return i.loadGeometries(s).then((function(a){for(var c=1===a.length&&a[0].groups.length>0,u=[],h=0,d=a.length;h<d;h++){var p,f=a[h],m=s[h],g=c?l:l[h];if(4===m.mode||5===m.mode||6===m.mode||void 0===m.mode)p=!0===o.isSkinnedMesh?new n.SkinnedMesh(f,g):new n.Mesh(f,g),5===m.mode?p.drawMode=n.TriangleStripDrawMode:6===m.mode&&(p.drawMode=n.TriangleFanDrawMode);else if(1===m.mode)p=new n.LineSegments(f,g);else if(3===m.mode)p=new n.Line(f,g);else if(2===m.mode)p=new n.LineLoop(f,g);else{if(0!==m.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);p=new n.Points(f,g)}Object.keys(p.geometry.morphAttributes).length>0&&w(p,o),p.name=o.name||"mesh_"+e,a.length>1&&(p.name+="_"+h),void 0!==o.extras&&(p.userData=o.extras),u.push(p);for(var _=c?p.material:[p.material],v=void 0!==f.attributes.color,y=void 0===f.attributes.normal,A=!0===p.isSkinnedMesh,b=Object.keys(f.morphAttributes).length>0,x=b&&void 0!==f.morphAttributes.normal,S=0,C=_.length;S<C;S++){if(g=_[S],p.isPoints){var E="PointsMaterial:"+g.uuid,T=i.cache.get(E);T||(T=new n.PointsMaterial,n.Material.prototype.copy.call(T,g),T.color.copy(g.color),T.map=g.map,T.lights=!1,i.cache.add(E,T)),g=T}else if(p.isLine){E="LineBasicMaterial:"+g.uuid;var M=i.cache.get(E);M||(M=new n.LineBasicMaterial,n.Material.prototype.copy.call(M,g),M.color.copy(g.color),M.lights=!1,i.cache.add(E,M)),g=M}if(v||y||A||b){E="ClonedMaterial:"+g.uuid+":",g.isGLTFSpecularGlossinessMaterial&&(E+="specular-glossiness:"),A&&(E+="skinning:"),v&&(E+="vertex-colors:"),y&&(E+="flat-shading:"),b&&(E+="morph-targets:"),x&&(E+="morph-normals:");var I=i.cache.get(E);I||(I=g.isGLTFSpecularGlossinessMaterial?r[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(g):g.clone(),A&&(I.skinning=!0),v&&(I.vertexColors=n.VertexColors),y&&(I.flatShading=!0),b&&(I.morphTargets=!0),x&&(I.morphNormals=!0),i.cache.add(E,I)),g=I}_[S]=g,g.aoMap&&void 0===f.attributes.uv2&&void 0!==f.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),f.addAttribute("uv2",new n.BufferAttribute(f.attributes.uv.array,2))),g.isGLTFSpecularGlossinessMaterial&&(p.onBeforeRender=r[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}p.material=c?_:_[0]}if(1===u.length)return u[0];var B=new n.Group;for(h=0,d=u.length;h<d;h++)B.add(u[h]);return B}))}))},I.prototype.loadCamera=function(e){var t,i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new n.PerspectiveCamera(n.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new n.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==i.name&&(t.name=i.name),i.extras&&(t.userData=i.extras),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},I.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return i.inverseBindMatrices=e,i}))},I.prototype.loadAnimation=function(e){this.json;var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then((function(i){for(var r=[],o=0,a=t.channels.length;o<a;o++){var s=t.channels[o],l=t.samplers[s.sampler];if(l){var c=s.target,u=void 0!==c.node?c.node:c.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,p=void 0!==t.parameters?t.parameters[l.output]:l.output,f=i.accessors[d],m=i.accessors[p],g=i.nodes[u];if(g){var _;switch(g.updateMatrix(),g.matrixAutoUpdate=!0,y[c.path]){case y.weights:_=n.NumberKeyframeTrack;break;case y.rotation:_=n.QuaternionKeyframeTrack;break;default:_=n.VectorKeyframeTrack}var v=g.name?g.name:g.uuid,b=void 0!==l.interpolation?A[l.interpolation]:n.InterpolateLinear,x=[];y[c.path]===y.weights?g.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(v);for(var w=0,S=x.length;w<S;w++){var C=new _(x[w]+"."+y[c.path],n.AnimationUtils.arraySlice(f.array,0),n.AnimationUtils.arraySlice(m.array,0),b);"CUBICSPLINE"===l.interpolation&&(C.createInterpolant=function(e){return new h(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),r.push(C)}}}}return u=void 0!==t.name?t.name:"animation_"+e,new n.AnimationClip(u,void 0,r)}))},I.prototype.loadNode=function(e){this.json;var i=this.extensions,r=this.json.meshReferences,o=this.json.meshUses,a=this.json.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then((function(e){var s;if(!0===a.isBone)s=new n.Bone;else if(void 0!==a.mesh){var l=e.meshes[a.mesh];if(s=l.clone(),!0===l.isGroup)for(var c=0,u=l.children.length;c<u;c++){var h=l.children[c];h.material&&!0===h.material.isGLTFSpecularGlossinessMaterial&&(s.children[c].onBeforeRender=h.onBeforeRender)}else l.material&&!0===l.material.isGLTFSpecularGlossinessMaterial&&(s.onBeforeRender=l.onBeforeRender);r[a.mesh]>1&&(s.name+="_instance_"+o[a.mesh]++)}else s=void 0!==a.camera?e.cameras[a.camera]:a.extensions&&a.extensions[t.KHR_LIGHTS]&&void 0!==a.extensions[t.KHR_LIGHTS].light?i[t.KHR_LIGHTS].lights[a.extensions[t.KHR_LIGHTS].light]:new n.Object3D;if(void 0!==a.name&&(s.name=n.PropertyBinding.sanitizeNodeName(a.name)),a.extras&&(s.userData=a.extras),a.extensions&&x(i,s,a),void 0!==a.matrix){var d=new n.Matrix4;d.fromArray(a.matrix),s.applyMatrix(d)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return s}))},I.prototype.loadScene=function(){function e(t,i,r,o,a){var s=o[t],l=r.nodes[t];if(void 0!==l.skin)for(var c=!0===s.isGroup?s.children:[s],u=0,h=c.length;u<h;u++){for(var d=c[u],p=a[l.skin],f=[],m=[],g=0,_=p.joints.length;g<_;g++){var v=p.joints[g],y=o[v];if(y){f.push(y);var A=new n.Matrix4;void 0!==p.inverseBindMatrices&&A.fromArray(p.inverseBindMatrices.array,16*g),m.push(A)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',v)}d.bind(new n.Skeleton(f,m),d.matrixWorld)}if(i.add(s),l.children){var b=l.children;for(u=0,h=b.length;u<h;u++)e(b[u],s,r,o,a)}}return function(i){var r=this.json,o=this.extensions,a=this.json.scenes[i];return this.getMultiDependencies(["node","skin"]).then((function(i){var s=new n.Scene;void 0!==a.name&&(s.name=a.name),a.extras&&(s.userData=a.extras),a.extensions&&x(o,s,a);for(var l=a.nodes||[],c=0,u=l.length;c<u;c++)e(l[c],s,r,i.nodes,i.skins);if(a.extensions&&a.extensions[t.KHR_LIGHTS]&&void 0!==a.extensions[t.KHR_LIGHTS].light){var h=o[t.KHR_LIGHTS].lights;s.add(h[a.extensions[t.KHR_LIGHTS].light])}return s}))}}(),e}();var r=n.MTLLoader,o=n.OBJLoader,a=n.OrbitControls,s=n.ColladaLoader,l=n.GLTFLoader;t.OrbitControls=a,t.MTLLoader=r,t.OBJLoader=o,t.ColladaLoader=s,t.GLTFLoader=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,i){var n={animate:!0,name:""},r=[Object.assign(Object.create(n),{fuc:e,name:i})];return function e(){requestAnimationFrame(e),r.forEach((function(e){var t=e.fuc;e.animate&&t.call(e,Date.now())}))}(),t.default=function(e,t){var i=Object.assign(Object.create(n),{fuc:e,name:t});return r.push(i),i},r[0]}},function(e,t,i){var n,r,o,a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(5),c=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0));function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=(r=n=function(){function e(){return h(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return p(e,l.Component),s(e,[{key:"render",value:function(){return c.default.createElement(c.default.Fragment,null," ")}}]),e}(),n.defaultProps={color:"rgb(30,30,30)",__constructor:"ambientlight"},r),m=(a=o=function(){function e(){return h(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return p(e,l.Component),s(e,[{key:"render",value:function(){return c.default.createElement(c.default.Fragment,null," ")}}]),e}(),o.defaultProps={color:16777215,__constructor:"directionligth",position:new u.Vector3(-30,30,30),castShadow:!0},a);e.exports={AmbientLight:f,DirectionLight:m}},function(e,t,i){e.exports=i(12)},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=(i(2),function(e){return e&&e.__esModule?e:{default:e}}(i(1))),l=(r=n=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"load3dModel",value:function(){var e=this,t=this.props,i=t.src;if(t.texPath,!i)return!1;(new a.GLTFLoader).load(i,(function(t){e.obj3d=t.scene;var i={};if(t.scene.traverse((function(e){e instanceof a.Camera&&(i.cameras||(i.cameras=[]),i.cameras.push(e)),e instanceof a.Light&&(i.lights||(i.lights=[]),i.lights.push(e))})),i.cameras&&i.cameras.length)e.camera=i.cameras[0],e.camera.position.copy(e.camera.position.clone().add(new a.Vector3(0,0,.01)));else{var n=e.computeBoundingBox(t.scene),r=n.max,o=n.max.z-n.min.z;e.camera.position.set(r.x,r.y,r.z+.6*o)}i.lights&&i.lights.length,e.initControl(),e.props.onLoad&&e.props.onLoad()}),(function(t){e.props.onProgress&&e.props.onProgress(t)}),(function(){console.log("An error happened")}))}}]),e}(),n.defaultProps=Object.assign({},s.default.defaultProps,{loader:"gltf"}),r);t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=(i(2),function(e){return e&&e.__esModule?e:{default:e}}(i(1))),l=(r=n=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"load3dModel",value:function(){var e=this,t=this.props,i=t.src;if(t.texPath,!i)return!1;(new a.ColladaLoader).load(i,(function(t){e.obj3d=t.scene;var i={};if(t.scene.traverse((function(e){e instanceof a.Camera&&(i.cameras||(i.cameras=[]),i.cameras.push(e)),e instanceof a.Light&&(i.lights||(i.lights=[]),i.lights.push(e))})),i.cameras&&i.cameras.length)e.camera=i.cameras[0],e.camera.position.copy(e.camera.position.clone().add(new a.Vector3(0,0,.01)));else{var n=e.computeBoundingBox(t.scene),r=n.max;n.max.z,n.min.z,e.camera.position.set(r.x,r.y,r.z)}i.lights&&i.lights.length,e.initControl(),e.props.onLoad&&e.props.onLoad()}),(function(t){e.props.onProgress&&e.props.onProgress(t)}),(function(){console.log("An error happened")}))}}]),e}(),n.defaultProps=Object.assign({},s.default.defaultProps,{loader:"collada"}),r);t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=(i(2),function(e){return e&&e.__esModule?e:{default:e}}(i(1))),l=(r=n=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"load3dModel",value:function(){var e=this,t=this.props,i=t.src,n=t.mtl,r=t.texPath;if(!i||!n)return!1;var o=new a.MTLLoader,s=new a.OBJLoader;o.setTexturePath(r),o.load(n,(function(t){t.preload(),s.setMaterials(t).load(i,(function(t){var i=e.computeBoundingBox(t),n=i.max,r=i.max.z-i.min.z;e.camera.position.set(0,0,n.z+1.5*r),e.initControl(),e.obj3d=t,e.props.onLoad&&e.props.onLoad()}),(function(t){e.props.onProgress&&e.props.onProgress(t)}))}))}}]),e}(),n.defaultProps=Object.assign({},s.default.defaultProps,{loader:"objmtl"}),r);t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=(i(2),function(e){return e&&e.__esModule?e:{default:e}}(i(1))),l=(r=n=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"load3dModel",value:function(){var e=this,t=this.props,i=t.src;if(t.texPath,!i)return!1;(new a.OBJLoader).load(i,(function(t){var i=e.computeBoundingBox(t),n=i.max,r=i.max.z-i.min.z;e.camera.position.set(0,0,n.z+1.5*r),e.initControl(),e.obj3d=t,e.props.onLoad&&e.props.onLoad()}),(function(t){e.props.onProgress&&e.props.onProgress(t)}))}}]),e}(),n.defaultProps=Object.assign({},s.default.defaultProps,{loader:"obj"}),r);t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=(i(2),function(e){return e&&e.__esModule?e:{default:e}}(i(1))),l=(r=n=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),o(e,[{key:"load3dModel",value:function(){var e=this,t=this.props,i=t.src,n=t.onProgress,r=t.onLoad,o=t.texPath,s=new a.JSONLoader;s.setTexturePath(o),s.load(i,(function(t,i){var n=new a.Mesh(t,i);t.computeBoundingBox();var o=t.boundingSphere,s=o.center,l=o.radius,c=s.clone().multiplyScalar(-1);n.geometry.applyMatrix((new a.Matrix4).makeTranslation(c.x,c.y,c.z));var u=e.computeBoundingBox(n).max;e.camera.position.set(u.x,u.y,u.z),e.camera.position.copy(c.clone().add(new a.Vector3(0,0,1.666*l))),e.initControl(),e.obj3d=n,r&&r()}),(function(e){n&&n(e)}))}}]),e}(),n.defaultProps=Object.assign({},s.default.defaultProps,{loader:"json"}),r);t.default=l},function(e,t,i){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))r.call(i,c)&&(s[c]=i[c]);if(n){a=n(i);for(var u=0;u<a.length;u++)o.call(i,a[u])&&(s[a[u]]=i[a[u]])}}return s}},function(e,t,i){var n=i(11),r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,i){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var n=[i,void 0,void 0,void 0,void 0,void 0],r=0;(e=Error(t.replace(/%s/g,(function(){return n[r++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A={};function b(e,t,i){this.props=e,this.context=t,this.refs=A,this.updater=i||y}function x(){}function w(e,t,i){this.props=e,this.context=t,this.refs=A,this.updater=i||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=b.prototype;var S=w.prototype=new x;S.constructor=w,n(S,b.prototype),S.isPureReactComponent=!0;var C={current:null,currentDispatcher:null},E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,i){var n=void 0,r={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,n)&&!T.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:s,props:r,_owner:C.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var B=/\/+/g,R=[];function P(e,t,i,n){if(R.length){var r=R.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function k(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function L(e,t,i){return null==e?0:function e(t,i,n,r){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return n(r,t,""===i?"."+D(t,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=i+D(s=t[c],c);l+=e(s,u,n,r)}else if("function"==typeof(u=null===t||"object"!=typeof t?null:"function"==typeof(u=_&&t[_]||t["@@iterator"])?u:null))for(t=u.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,u=i+D(s,c++),n,r);else"object"===s&&v("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return l}(e,"",t,i)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function O(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,n,i,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(B,"$&/")+"/")+i)),n.push(e))}function F(e,t,i,n,r){var o="";null!=i&&(o=(""+i).replace(B,"$&/")+"/"),L(e,O,t=P(t,o,n,r)),k(t)}var U={Children:{map:function(e,t,i){if(null==e)return e;var n=[];return F(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;L(e,N,t=P(null,null,t,i)),k(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){return I(e)||v("143"),e}},createRef:function(){return{current:null}},Component:b,PureComponent:w,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},Fragment:s,StrictMode:l,Suspense:f,createElement:M,cloneElement:function(e,t,i){null==e&&v("267",e);var r=void 0,a=n({},e.props),s=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=C.current),void 0!==t.key&&(s=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(a[r]=void 0===t[r]&&void 0!==u?u[r]:t[r])}if(1==(r=arguments.length-2))a.children=i;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:c}},createFactory:function(e){var t=M.bind(null,e);return t.type=e,t},isValidElement:I,version:"16.7.0",unstable_ConcurrentMode:d,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:C,assign:n}},z={default:U},H=z&&U||z;e.exports=H.default||H},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return h(n).default}});var r=i(10);Object.defineProperty(t,"JSONModel",{enumerable:!0,get:function(){return h(r).default}});var o=i(9);Object.defineProperty(t,"OBJModel",{enumerable:!0,get:function(){return h(o).default}});var a=i(8);Object.defineProperty(t,"MTLModel",{enumerable:!0,get:function(){return h(a).default}});var s=i(7);Object.defineProperty(t,"DAEModel",{enumerable:!0,get:function(){return h(s).default}});var l=i(6);Object.defineProperty(t,"GLTFModel",{enumerable:!0,get:function(){return h(l).default}});var c=i(3);Object.defineProperty(t,"Tick",{enumerable:!0,get:function(){return h(c).default}});var u=i(4);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"DirectionLight",{enumerable:!0,get:function(){return u.DirectionLight}}),Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return u.AmbientLight}})}])),o.exports),s=function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function l(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}function c(e,t){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function u(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function h(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}"function"==typeof SuppressedError&&SuppressedError;const d=new Set(["children","localName","ref","style","className"]),p=new WeakMap,f=(e,t,i,n,r)=>{const o=r?.[t];void 0===o?(e[t]=i,null==i&&t in HTMLElement.prototype&&e.removeAttribute(t)):i!==n&&((e,t,i)=>{let n=p.get(e);void 0===n&&p.set(e,n=new Map);let r=n.get(t);void 0!==i?void 0===r?(n.set(t,r={handleEvent:i}),e.addEventListener(t,r)):r.handleEvent=i:void 0!==r&&(n.delete(t),e.removeEventListener(t,r))})(e,o,i)};var m,g;const _=window,v=_.ShadowRoot&&(void 0===_.ShadyCSS||_.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,y=Symbol(),A=new WeakMap;let b=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==y)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(v&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=A.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&A.set(t,e))}return e}toString(){return this.cssText}};const x=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=1===e.length?e[0]:i.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new b(r,e,y)},w=v?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return new b("string"==typeof(i=t)?i:i+"",void 0,y);var i})(e):e;var S;const C=window,E=C.trustedTypes,T=E?E.emptyScript:"",M=C.reactiveElementPolyfillSupport,I={toAttribute(e,t){switch(t){case Boolean:e=e?T:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},B=(e,t)=>t!==e&&(t==t||e==e),R={attribute:!0,type:String,converter:I,reflect:!1,hasChanged:B},P="finalized";let k=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||R}static finalize(){if(this.hasOwnProperty(P))return!1;this[P]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(w(e))}else void 0!==e&&t.push(w(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return i=t,n=this.constructor.elementStyles,v?i.adoptedStyleSheets=n.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):n.forEach((e=>{const t=document.createElement("style"),n=_.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=e.cssText,i.appendChild(t)})),t;var i,n}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R;var n;const r=this.constructor._$Ep(e,i);if(void 0!==r&&!0===i.reflect){const o=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:I).toAttribute(t,i.type);this._$El=e,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(void 0!==r&&this._$El!==r){const e=n.getPropertyOptions(r),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:I;this._$El=r,this[r]=o.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||B)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};var L;k[P]=!0,k.elementProperties=new Map,k.elementStyles=[],k.shadowRootOptions={mode:"open"},null==M||M({ReactiveElement:k}),(null!==(S=C.reactiveElementVersions)&&void 0!==S?S:C.reactiveElementVersions=[]).push("1.6.3");const D=window,N=D.trustedTypes,O=N?N.createPolicy("lit-html",{createHTML:e=>e}):void 0,F="$lit$",U=`lit$${(Math.random()+"").slice(9)}$`,z="?"+U,H=`<${z}>`,G=document,V=()=>G.createComment(""),Q=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,q=e=>j(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),W="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,X=/-->/g,Y=/>/g,K=RegExp(`>|${W}(?:([^\\s"'>=/]+)(${W}*=${W}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Z=/'/g,J=/"/g,ee=/^(?:script|style|textarea|title)$/i,te=e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return{_$litType$:e,strings:t,values:n}},ie=te(1),ne=te(2),re=Symbol.for("lit-noChange"),oe=Symbol.for("lit-nothing"),ae=new WeakMap,se=G.createTreeWalker(G,129,null,!1);function le(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==O?O.createHTML(t):t}const ce=(e,t)=>{const i=e.length-1,n=[];let r,o=2===t?"<svg>":"",a=$;for(let s=0;s<i;s++){const t=e[s];let i,l,c=-1,u=0;for(;u<t.length&&(a.lastIndex=u,l=a.exec(t),null!==l);)u=a.lastIndex,a===$?"!--"===l[1]?a=X:void 0!==l[1]?a=Y:void 0!==l[2]?(ee.test(l[2])&&(r=RegExp("</"+l[2],"g")),a=K):void 0!==l[3]&&(a=K):a===K?">"===l[0]?(a=null!=r?r:$,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,i=l[1],a=void 0===l[3]?K:'"'===l[3]?J:Z):a===J||a===Z?a=K:a===X||a===Y?a=$:(a=K,r=void 0);const h=a===K&&e[s+1].startsWith("/>")?" ":"";o+=a===$?t+H:c>=0?(n.push(i),t.slice(0,c)+F+t.slice(c)+U+h):t+U+(-2===c?(n.push(void 0),s):h)}return[le(e,o+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};let ue=class e{constructor(t,i){let n,{strings:r,_$litType$:o}=t;this.parts=[];let a=0,s=0;const l=r.length-1,c=this.parts,[u,h]=ce(r,o);if(this.el=e.createElement(u,i),se.currentNode=this.el.content,2===o){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=se.nextNode())&&c.length<l;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(F)||t.startsWith(U)){const i=h[s++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+F).split(U),t=/([.?@])?(.*)/.exec(i);c.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?me:"?"===t[1]?_e:"@"===t[1]?ve:fe})}else c.push({type:6,index:a})}for(const t of e)n.removeAttribute(t)}if(ee.test(n.tagName)){const e=n.textContent.split(U),t=e.length-1;if(t>0){n.textContent=N?N.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],V()),se.nextNode(),c.push({type:2,index:++a});n.append(e[t],V())}}}else if(8===n.nodeType)if(n.data===z)c.push({type:2,index:a});else{let e=-1;for(;-1!==(e=n.data.indexOf(U,e+1));)c.push({type:7,index:a}),e+=U.length-1}a++}}static createElement(e,t){const i=G.createElement("template");return i.innerHTML=e,i}};function he(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3?arguments[3]:void 0;var r,o,a,s;if(t===re)return t;let l=void 0!==n?null===(r=i._$Co)||void 0===r?void 0:r[n]:i._$Cl;const c=Q(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,i,n)),void 0!==n?(null!==(a=(s=i)._$Co)&&void 0!==a?a:s._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=he(e,l._$AS(e,t.values),l,n)),t}let de=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:G).importNode(i,!0);se.currentNode=r;let o=se.nextNode(),a=0,s=0,l=n[0];for(;void 0!==l;){if(a===l.index){let t;2===l.type?t=new pe(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new ye(o,this,e)),this._$AV.push(t),l=n[++s]}a!==(null==l?void 0:l.index)&&(o=se.nextNode(),a++)}return se.currentNode=G,r}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}},pe=class e{constructor(e,t,i,n){var r;this.type=2,this._$AH=oe,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e){e=he(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),Q(e)?e===oe||null==e||""===e?(this._$AH!==oe&&this._$AR(),this._$AH=oe):e!==this._$AH&&e!==re&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):q(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==oe&&Q(this._$AH)?this._$AA.nextSibling.data=e:this.$(G.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=ue.createElement(le(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.v(i);else{const e=new de(r,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=ae.get(e.strings);return void 0===t&&ae.set(e.strings,t=new ue(e)),t}T(t){j(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let n,r=0;for(const o of t)r===i.length?i.push(n=new e(this.k(V()),this.k(V()),this,this.options)):n=i[r],n._$AI(o),r++;r<i.length&&(this._$AR(n&&n._$AB.nextSibling,r),i.length=r)}_$AR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}},fe=class{constructor(e,t,i,n,r){this.type=1,this._$AH=oe,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=oe}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const r=this.strings;let o=!1;if(void 0===r)e=he(this,e,t,0),o=!Q(e)||e!==this._$AH&&e!==re,o&&(this._$AH=e);else{const n=e;let a,s;for(e=r[0],a=0;a<r.length-1;a++)s=he(this,n[i+a],t,a),s===re&&(s=this._$AH[a]),o||(o=!Q(s)||s!==this._$AH[a]),s===oe?e=oe:e!==oe&&(e+=(null!=s?s:"")+r[a+1]),this._$AH[a]=s}o&&!n&&this.j(e)}j(e){e===oe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}},me=class extends fe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===oe?void 0:e}};const ge=N?N.emptyScript:"";let _e=class extends fe{constructor(){super(...arguments),this.type=4}j(e){e&&e!==oe?this.element.setAttribute(this.name,ge):this.element.removeAttribute(this.name)}},ve=class extends fe{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e){var t;if((e=null!==(t=he(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:oe)===re)return;const i=this._$AH,n=e===oe&&i!==oe||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==oe&&(i===oe||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}},ye=class{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){he(this,e)}};const Ae={O:F,P:U,A:z,C:1,M:ce,L:de,R:q,D:he,I:pe,V:fe,H:_e,N:ve,U:me,F:ye},be=D.litHtmlPolyfillSupport;null==be||be(ue,pe),(null!==(L=D.litHtmlVersions)&&void 0!==L?L:D.litHtmlVersions=[]).push("2.8.0");const xe=(e,t,i)=>{var n,r;const o=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let a=o._$litPart$;if(void 0===a){const e=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;o._$litPart$=a=new pe(t.insertBefore(V(),e),e,void 0,null!=i?i:{})}return a._$AI(e),a};var we,Se;let Ce=class extends k{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=xe(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return re}};Ce.finalized=!0,Ce._$litElement$=!0,null===(we=globalThis.litElementHydrateSupport)||void 0===we||we.call(globalThis,{LitElement:Ce});const Ee=globalThis.litElementPolyfillSupport;null==Ee||Ee({LitElement:Ce}),(null!==(Se=globalThis.litElementVersions)&&void 0!==Se?Se:globalThis.litElementVersions=[]).push("3.3.3");const Te=e=>t=>{return"function"==typeof t?(i=e,n=t,customElements.define(i,n),n):((e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(t){customElements.define(e,t)}}})(e,t);var i,n},Me=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function Ie(e){return(t,i)=>{return void 0!==i?(n=e,r=i,void t.constructor.createProperty(r,n)):Me(e,t);var n,r}}function Be(e,t){return(e=>{let{finisher:t,descriptor:i}=e;return(e,n)=>{var r;if(void 0===n){const n=null!==(r=e.originalKey)&&void 0!==r?r:e.key,o=null!=i?{kind:"method",placement:"prototype",key:n,descriptor:i(e.key)}:{...e,key:n};return null!=t&&(o.finisher=function(e){t(e,n)}),o}{const r=e.constructor;void 0!==i&&Object.defineProperty(e,n,i(n)),null==t||t(r,n)}}})({descriptor:t=>({get(){var t,i;return null!==(i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==i?i:null},enumerable:!0,configurable:!0})})}var Re;null===(Re=window.HTMLSlotElement)||void 0===Re||Re.prototype.assignedElements;const Pe="169",ke=0,Le=1,De=2,Ne=100,Oe=101,Fe=102,Ue=200,ze=201,He=202,Ge=203,Ve=204,Qe=205,je=206,qe=207,We=208,$e=209,Xe=210,Ye=211,Ke=212,Ze=213,Je=214,et=0,tt=1,it=2,nt=3,rt=4,ot=5,at=6,st=7,lt="attached",ct=300,ut=301,ht=302,dt=303,pt=306,ft=1e3,mt=1001,gt=1002,_t=1003,vt=1004,yt=1005,At=1006,bt=1007,xt=1008,wt=1009,St=1010,Ct=1011,Et=1012,Tt=1013,Mt=1014,It=1015,Bt=1016,Rt=1017,Pt=1018,kt=1020,Lt=1023,Dt=1026,Nt=1027,Ot=1028,Ft=1029,Ut=1030,zt=1031,Ht=1033,Gt=33776,Vt=33777,Qt=33778,jt=33779,qt=35840,Wt=35841,$t=35842,Xt=35843,Yt=36196,Kt=37492,Zt=37496,Jt=37808,ei=37809,ti=37810,ii=37811,ni=37812,ri=37813,oi=37814,ai=37815,si=37816,li=37817,ci=37818,ui=37819,hi=37820,di=37821,pi=36492,fi=36494,mi=36495,gi=36284,_i=36285,vi=36286,yi=2202,Ai=2300,bi=2301,xi=2302,wi=2400,Si=2401,Ci=2402,Ei="",Ti="srgb",Mi="srgb-linear",Ii="display-p3",Bi="display-p3-linear",Ri="linear",Pi="srgb",ki="rec709",Li="p3",Di=7680,Ni=512,Oi=513,Fi=514,Ui=515,zi=516,Hi=517,Gi=518,Vi=519,Qi=35044,ji="300 es",qi=2e3,Wi=2001;class $i{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const Xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Yi=1234567;const Ki=Math.PI/180,Zi=180/Math.PI;function Ji(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Xi[255&e]+Xi[e>>8&255]+Xi[e>>16&255]+Xi[e>>24&255]+"-"+Xi[255&t]+Xi[t>>8&255]+"-"+Xi[t>>16&15|64]+Xi[t>>24&255]+"-"+Xi[63&i|128]+Xi[i>>8&255]+"-"+Xi[i>>16&255]+Xi[i>>24&255]+Xi[255&n]+Xi[n>>8&255]+Xi[n>>16&255]+Xi[n>>24&255]).toLowerCase()}function en(e,t,i){return Math.max(t,Math.min(i,e))}function tn(e,t){return(e%t+t)%t}function nn(e,t,i){return(1-i)*e+i*t}function rn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function on(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const an={DEG2RAD:Ki,RAD2DEG:Zi,generateUUID:Ji,clamp:en,euclideanModulo:tn,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:nn,damp:function(e,t,i,n){return nn(e,t,1-Math.exp(-i*n))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(tn(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Yi=e);let t=Yi+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ki},radToDeg:function(e){return e*Zi},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,i,n,r){const o=Math.cos,a=Math.sin,s=o(i/2),l=a(i/2),c=o((t+n)/2),u=a((t+n)/2),h=o((t-n)/2),d=a((t-n)/2),p=o((n-t)/2),f=a((n-t)/2);switch(r){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:on,denormalize:rn};class sn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;sn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(en(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*n+e.x,this.y=r*n+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ln{constructor(e,t,i,n,r,o,a,s,l){ln.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,a,s,l)}set(e,t,i,n,r,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=i,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],a=i[3],s=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],_=n[1],v=n[4],y=n[7],A=n[2],b=n[5],x=n[8];return r[0]=o*f+a*_+s*A,r[3]=o*m+a*v+s*b,r[6]=o*g+a*y+s*x,r[1]=l*f+c*_+u*A,r[4]=l*m+c*v+u*b,r[7]=l*g+c*y+u*x,r[2]=h*f+d*_+p*A,r[5]=h*m+d*v+p*b,r[8]=h*g+d*y+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-i*r*c+i*a*s+n*r*l-n*o*s}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*r,d=l*r-o*s,p=t*u+i*h+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(n*l-c*i)*f,e[2]=(a*i-n*o)*f,e[3]=h*f,e[4]=(c*t-n*s)*f,e[5]=(n*r-a*t)*f,e[6]=d*f,e[7]=(i*s-l*t)*f,e[8]=(o*t-i*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,o,a){const s=Math.cos(r),l=Math.sin(r);return this.set(i*s,i*l,-i*(s*o+l*a)+o+e,-n*l,n*s,-n*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(cn.makeScale(e,t)),this}rotate(e){return this.premultiply(cn.makeRotation(-e)),this}translate(e,t){return this.premultiply(cn.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const cn=new ln;function un(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function hn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function dn(){const e=hn("canvas");return e.style.display="block",e}const pn={};function fn(e){e in pn||(pn[e]=!0,console.warn(e))}const mn=(new ln).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),gn=(new ln).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),_n={[Mi]:{transfer:Ri,primaries:ki,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e,fromReference:e=>e},[Ti]:{transfer:Pi,primaries:ki,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Bi]:{transfer:Ri,primaries:Li,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.applyMatrix3(gn),fromReference:e=>e.applyMatrix3(mn)},[Ii]:{transfer:Pi,primaries:Li,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.convertSRGBToLinear().applyMatrix3(gn),fromReference:e=>e.applyMatrix3(mn).convertLinearToSRGB()}},vn=new Set([Mi,Bi]),yn={enabled:!0,_workingColorSpace:Mi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!vn.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;const n=_n[t].toReference;return(0,_n[i].fromReference)(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return _n[e].primaries},getTransfer:function(e){return e===Ei?Ri:_n[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._workingColorSpace;return e.fromArray(_n[t].luminanceCoefficients)}};function An(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function bn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let xn;class wn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xn&&(xn=hn("canvas")),xn.width=e.width,xn.height=e.height;const i=xn.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=xn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=hn("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*An(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*An(t[e]/255)):t[e]=An(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Sn=0;class Cn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Sn++}),this.uuid=Ji(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(En(n[t].image)):e.push(En(n[t]))}else e=En(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function En(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?wn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Tn=0,Mn=class e extends $i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.DEFAULT_ANISOTROPY,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tn++}),this.uuid=Ji(),this.name="",this.source=new Cn(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new sn(0,0),this.repeat=new sn(1,1),this.center=new sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ct)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ft:e.x=e.x-Math.floor(e.x);break;case mt:e.x=e.x<0?0:1;break;case gt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ft:e.y=e.y-Math.floor(e.y);break;case mt:e.y=e.y<0?0:1;break;case gt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}};Mn.DEFAULT_IMAGE=null,Mn.DEFAULT_MAPPING=ct,Mn.DEFAULT_ANISOTROPY=1;class In{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;In.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*n+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,_=(g+1)/2,v=(c+h)/4,y=(u+f)/4,A=(p+m)/4;return e>s&&e>_?e<o?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=v/i,r=y/i):s>_?s<o?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(s),i=v/n,r=A/n):_<o?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(_),i=y/r,n=A/r),this.set(i,n,r,t),this}let _=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(m-p)/_,this.y=(u-f)/_,this.z=(h-c)/_,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Bn extends $i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new In(0,0,e,t),this.scissorTest=!1,this.viewport=new In(0,0,e,t);const n={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:At,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Mn(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.textures.length;n<r;n++)this.textures[n].image.width=e,this.textures[n].image.height=t,this.textures[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,n=e.textures.length;i<n;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Cn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rn extends Bn{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Pn extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=_t,this.minFilter=_t,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kn extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=_t,this.minFilter=_t,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ln{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,o,a){let s=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==h||l!==d||c!==p){let e=1-a;const t=s*h+l*d+c*p+u*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*i);e=Math.sin(e*o)/r,a=Math.sin(a*o)/r}const r=a*i;if(s=s*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,o){const a=i[n],s=i[n+1],l=i[n+2],c=i[n+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=a*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e._x,n=e._y,r=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(i/2),c=a(n/2),u=a(r/2),h=s(i/2),d=s(n/2),p=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=i+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(r-l)*e,this._z=(o-n)*e}else if(i>a&&i>u){const e=2*Math.sqrt(1+i-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-i-u);this._w=(r-l)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-i-a);this._w=(o-n)/e,this._x=(r+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(en(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=i*c+o*a+n*l-r*s,this._y=n*c+o*s+r*a-i*l,this._z=r*c+o*l+i*s-n*a,this._w=o*c-i*a-n*s-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+n*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=i*u+this._x*h,this._y=n*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Dn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Dn.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(On.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(On.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=2*(o*n-a*i),c=2*(a*t-r*n),u=2*(r*i-o*t);return this.x=t+s*l+o*u-a*c,this.y=i+s*c+a*l-r*u,this.z=n+s*u+r*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*o-i*s,this.z=i*a-n*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Nn.copy(this).projectOnVector(e),this.sub(Nn)}reflect(e){return this.sub(Nn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(en(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nn=new Dn,On=new Ln;class Fn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dn(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(zn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(zn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=zn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const n=i.getAttribute("position");if(!0===t&&void 0!==n&&!0!==e.isInstancedMesh)for(let t=0,i=n.count;t<i;t++)!0===e.isMesh?e.getVertexPosition(t,zn):zn.fromBufferAttribute(n,t),zn.applyMatrix4(e.matrixWorld),this.expandByPoint(zn);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Hn.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),Hn.copy(i.boundingBox)),Hn.applyMatrix4(e.matrixWorld),this.union(Hn)}const n=e.children;for(let r=0,o=n.length;r<o;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,zn),zn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($n),Xn.subVectors(this.max,$n),Gn.subVectors(e.a,$n),Vn.subVectors(e.b,$n),Qn.subVectors(e.c,$n),jn.subVectors(Vn,Gn),qn.subVectors(Qn,Vn),Wn.subVectors(Gn,Qn);let t=[0,-jn.z,jn.y,0,-qn.z,qn.y,0,-Wn.z,Wn.y,jn.z,0,-jn.x,qn.z,0,-qn.x,Wn.z,0,-Wn.x,-jn.y,jn.x,0,-qn.y,qn.x,0,-Wn.y,Wn.x,0];return!!Zn(t,Gn,Vn,Qn,Xn)&&(t=[1,0,0,0,1,0,0,0,1],!!Zn(t,Gn,Vn,Qn,Xn)&&(Yn.crossVectors(jn,qn),t=[Yn.x,Yn.y,Yn.z],Zn(t,Gn,Vn,Qn,Xn)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(zn).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Un[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Un[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Un[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Un[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Un[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Un[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Un[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Un[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Un)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Un=[new Dn,new Dn,new Dn,new Dn,new Dn,new Dn,new Dn,new Dn],zn=new Dn,Hn=new Fn,Gn=new Dn,Vn=new Dn,Qn=new Dn,jn=new Dn,qn=new Dn,Wn=new Dn,$n=new Dn,Xn=new Dn,Yn=new Dn,Kn=new Dn;function Zn(e,t,i,n,r){for(let o=0,a=e.length-3;o<=a;o+=3){Kn.fromArray(e,o);const a=r.x*Math.abs(Kn.x)+r.y*Math.abs(Kn.y)+r.z*Math.abs(Kn.z),s=t.dot(Kn),l=i.dot(Kn),c=n.dot(Kn);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const Jn=new Fn,er=new Dn,tr=new Dn;class ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Jn.setFromPoints(e).getCenter(i);let n=0;for(let r=0,o=e.length;r<o;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;er.subVectors(e,this.center);const t=er.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(er,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(er.copy(e.center).add(tr)),this.expandByPoint(er.copy(e.center).sub(tr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const nr=new Dn,rr=new Dn,or=new Dn,ar=new Dn,sr=new Dn,lr=new Dn,cr=new Dn;class ur{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dn(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=nr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(nr.copy(this.origin).addScaledVector(this.direction,t),nr.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){rr.copy(e).add(t).multiplyScalar(.5),or.copy(t).sub(e).normalize(),ar.copy(this.origin).sub(rr);const r=.5*e.distanceTo(t),o=-this.direction.dot(or),a=ar.dot(this.direction),s=-ar.dot(or),l=ar.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,u),n&&n.copy(rr).addScaledVector(or,h),d}intersectSphere(e,t){nr.subVectors(e.center,this.origin);const i=nr.dot(this.direction),n=nr.dot(nr)-i*i,r=e.radius*e.radius;if(n>r)return null;const o=Math.sqrt(r-n),a=i-o,s=i+o;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||r>n?null:((r>i||isNaN(i))&&(i=r),(o<n||isNaN(n))&&(n=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),i>s||a>n?null:((a>i||i!=i)&&(i=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,nr)}intersectTriangle(e,t,i,n,r){sr.subVectors(t,e),lr.subVectors(i,e),cr.crossVectors(sr,lr);let o,a=this.direction.dot(cr);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}ar.subVectors(this.origin,e);const s=o*this.direction.dot(lr.crossVectors(ar,lr));if(s<0)return null;const l=o*this.direction.dot(sr.cross(ar));if(l<0)return null;if(s+l>a)return null;const c=-o*ar.dot(cr);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class hr{constructor(e,t,i,n,r,o,a,s,l,c,u,h,d,p,f,m){hr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,o,a,s,l,c,u,h,d,p,f,m)}set(e,t,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new hr).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/dr.setFromMatrixColumn(e,0).length(),r=1/dr.setFromMatrixColumn(e,1).length(),o=1/dr.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*c,i=o*u,n=a*c,r=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-a*s,t[2]=r-e*l,t[6]=n+i*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,i=s*u,n=l*c,r=l*u;t[0]=e+r*a,t[4]=n*a-i,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=i*a-n,t[6]=r+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,i=s*u,n=l*c,r=l*u;t[0]=e-r*a,t[4]=-o*u,t[8]=n+i*a,t[1]=i+n*a,t[5]=o*c,t[9]=r-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,i=o*u,n=a*c,r=a*u;t[0]=s*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=s*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,i=o*l,n=a*s,r=a*l;t[0]=s*c,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){const e=o*s,i=o*l,n=a*s,r=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=o*c,t[9]=i*u-n,t[2]=n*u-i,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fr,e,mr)}lookAt(e,t,i){const n=this.elements;return vr.subVectors(e,t),0===vr.lengthSq()&&(vr.z=1),vr.normalize(),gr.crossVectors(i,vr),0===gr.lengthSq()&&(1===Math.abs(i.z)?vr.x+=1e-4:vr.z+=1e-4,vr.normalize(),gr.crossVectors(i,vr)),gr.normalize(),_r.crossVectors(vr,gr),n[0]=gr.x,n[4]=_r.x,n[8]=vr.x,n[1]=gr.y,n[5]=_r.y,n[9]=vr.y,n[2]=gr.z,n[6]=_r.z,n[10]=vr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,o=i[0],a=i[4],s=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],_=i[3],v=i[7],y=i[11],A=i[15],b=n[0],x=n[4],w=n[8],S=n[12],C=n[1],E=n[5],T=n[9],M=n[13],I=n[2],B=n[6],R=n[10],P=n[14],k=n[3],L=n[7],D=n[11],N=n[15];return r[0]=o*b+a*C+s*I+l*k,r[4]=o*x+a*E+s*B+l*L,r[8]=o*w+a*T+s*R+l*D,r[12]=o*S+a*M+s*P+l*N,r[1]=c*b+u*C+h*I+d*k,r[5]=c*x+u*E+h*B+d*L,r[9]=c*w+u*T+h*R+d*D,r[13]=c*S+u*M+h*P+d*N,r[2]=p*b+f*C+m*I+g*k,r[6]=p*x+f*E+m*B+g*L,r[10]=p*w+f*T+m*R+g*D,r[14]=p*S+f*M+m*P+g*N,r[3]=_*b+v*C+y*I+A*k,r[7]=_*x+v*E+y*B+A*L,r[11]=_*w+v*T+y*R+A*D,r[15]=_*S+v*M+y*P+A*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-n*l*u-r*a*h+i*l*h+n*a*d-i*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-n*o*d+n*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+i*o*d+r*a*c-i*l*c)+e[15]*(-n*a*c-t*s*u+t*a*h+n*o*u-i*o*h+i*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],_=u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g,v=p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g,y=c*f*l-p*u*l+p*a*d-o*f*d-c*a*g+o*u*g,A=p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m,b=t*_+i*v+n*y+r*A;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=_*x,e[1]=(f*h*r-u*m*r-f*n*d+i*m*d+u*n*g-i*h*g)*x,e[2]=(a*m*r-f*s*r+f*n*l-i*m*l-a*n*g+i*s*g)*x,e[3]=(u*s*r-a*h*r-u*n*l+i*h*l+a*n*d-i*s*d)*x,e[4]=v*x,e[5]=(c*m*r-p*h*r+p*n*d-t*m*d-c*n*g+t*h*g)*x,e[6]=(p*s*r-o*m*r-p*n*l+t*m*l+o*n*g-t*s*g)*x,e[7]=(o*h*r-c*s*r+c*n*l-t*h*l-o*n*d+t*s*d)*x,e[8]=y*x,e[9]=(p*u*r-c*f*r-p*i*d+t*f*d+c*i*g-t*u*g)*x,e[10]=(o*f*r-p*a*r+p*i*l-t*f*l-o*i*g+t*a*g)*x,e[11]=(c*a*r-o*u*r-c*i*l+t*u*l+o*i*d-t*a*d)*x,e[12]=A*x,e[13]=(c*f*n-p*u*n+p*i*h-t*f*h-c*i*m+t*u*m)*x,e[14]=(p*a*n-o*f*n-p*i*s+t*f*s+o*i*m-t*a*m)*x,e[15]=(o*u*n-c*a*n+c*i*s-t*u*s-o*i*h+t*a*h)*x,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+i,l*a-n*s,l*s+n*a,0,l*a+n*s,c*a+i,c*s-n*o,0,l*s-n*a,c*s+n*o,r*s*s+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,o){return this.set(1,i,r,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,g=a*u,_=s*l,v=s*c,y=s*u,A=i.x,b=i.y,x=i.z;return n[0]=(1-(f+g))*A,n[1]=(d+y)*A,n[2]=(p-v)*A,n[3]=0,n[4]=(d-y)*b,n[5]=(1-(h+g))*b,n[6]=(m+_)*b,n[7]=0,n[8]=(p+v)*x,n[9]=(m-_)*x,n[10]=(1-(h+f))*x,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=dr.set(n[0],n[1],n[2]).length();const o=dr.set(n[4],n[5],n[6]).length(),a=dr.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],pr.copy(this);const s=1/r,l=1/o,c=1/a;return pr.elements[0]*=s,pr.elements[1]*=s,pr.elements[2]*=s,pr.elements[4]*=l,pr.elements[5]*=l,pr.elements[6]*=l,pr.elements[8]*=c,pr.elements[9]*=c,pr.elements[10]*=c,t.setFromRotationMatrix(pr),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,n,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3;const s=this.elements,l=2*r/(t-e),c=2*r/(i-n),u=(t+e)/(t-e),h=(i+n)/(i-n);let d,p;if(a===qi)d=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(a!==Wi)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-r),p=-o*r/(o-r)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,n,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2e3;const s=this.elements,l=1/(t-e),c=1/(i-n),u=1/(o-r),h=(t+e)*l,d=(i+n)*c;let p,f;if(a===qi)p=(o+r)*u,f=-2*u;else{if(a!==Wi)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*u,f=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const dr=new Dn,pr=new hr,fr=new Dn(0,0,0),mr=new Dn(1,1,1),gr=new Dn,_r=new Dn,vr=new Dn,yr=new hr,Ar=new Ln;class br{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:br.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e.elements,r=n[0],o=n[4],a=n[8],s=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(en(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-en(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(en(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-en(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(en(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-en(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return yr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yr,t,i)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Ar.setFromEuler(this),this.setFromQuaternion(Ar,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}br.DEFAULT_ORDER="XYZ";class xr{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let wr=0;const Sr=new Dn,Cr=new Ln,Er=new hr,Tr=new Dn,Mr=new Dn,Ir=new Dn,Br=new Ln,Rr=new Dn(1,0,0),Pr=new Dn(0,1,0),kr=new Dn(0,0,1),Lr={type:"added"},Dr={type:"removed"},Nr={type:"childadded",child:null},Or={type:"childremoved",child:null};class Fr extends $i{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wr++}),this.uuid=Ji(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fr.DEFAULT_UP.clone();const e=new Dn,t=new br,i=new Ln,n=new Dn(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new hr},normalMatrix:{value:new ln}}),this.matrix=new hr,this.matrixWorld=new hr,this.matrixAutoUpdate=Fr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Cr.setFromAxisAngle(e,t),this.quaternion.multiply(Cr),this}rotateOnWorldAxis(e,t){return Cr.setFromAxisAngle(e,t),this.quaternion.premultiply(Cr),this}rotateX(e){return this.rotateOnAxis(Rr,e)}rotateY(e){return this.rotateOnAxis(Pr,e)}rotateZ(e){return this.rotateOnAxis(kr,e)}translateOnAxis(e,t){return Sr.copy(e).applyQuaternion(this.quaternion),this.position.add(Sr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Rr,e)}translateY(e){return this.translateOnAxis(Pr,e)}translateZ(e){return this.translateOnAxis(kr,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Er.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Tr.copy(e):Tr.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Mr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Er.lookAt(Mr,Tr,this.up):Er.lookAt(Tr,Mr,this.up),this.quaternion.setFromRotationMatrix(Er),n&&(Er.extractRotation(n.matrixWorld),Cr.setFromRotationMatrix(Er),this.quaternion.premultiply(Cr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Lr),Nr.child=e,this.dispatchEvent(Nr),Nr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Dr),Or.child=e,this.dispatchEvent(Or),Or.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Er.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Er.multiply(e.parent.matrixWorld)),e.applyMatrix4(Er),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Lr),Nr.child=e,this.dispatchEvent(Nr),Nr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&i.push(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mr,e,Ir),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mr,Br,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),n.maxInstanceCount=this._maxInstanceCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(n.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),null!==this.boundingBox&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=o(e.geometries),n=o(e.materials),r=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),s.length>0&&(i.shapes=s),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),u.length>0&&(i.nodes=u)}return i.object=n,i;function o(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++){const t=e.children[i];this.add(t.clone())}return this}}Fr.DEFAULT_UP=new Dn(0,1,0),Fr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ur=new Dn,zr=new Dn,Hr=new Dn,Gr=new Dn,Vr=new Dn,Qr=new Dn,jr=new Dn,qr=new Dn,Wr=new Dn,$r=new Dn,Xr=new In,Yr=new In,Kr=new In;class Zr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dn,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dn;this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Ur.subVectors(e,t),n.cross(Ur);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){Ur.subVectors(n,t),zr.subVectors(i,t),Hr.subVectors(e,t);const o=Ur.dot(Ur),a=Ur.dot(zr),s=Ur.dot(Hr),l=zr.dot(zr),c=zr.dot(Hr),u=o*l-a*a;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return null!==this.getBarycoord(e,t,i,n,Gr)&&Gr.x>=0&&Gr.y>=0&&Gr.x+Gr.y<=1}static getInterpolation(e,t,i,n,r,o,a,s){return null===this.getBarycoord(e,t,i,n,Gr)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(r,Gr.x),s.addScaledVector(o,Gr.y),s.addScaledVector(a,Gr.z),s)}static getInterpolatedAttribute(e,t,i,n,r,o){return Xr.setScalar(0),Yr.setScalar(0),Kr.setScalar(0),Xr.fromBufferAttribute(e,t),Yr.fromBufferAttribute(e,i),Kr.fromBufferAttribute(e,n),o.setScalar(0),o.addScaledVector(Xr,r.x),o.addScaledVector(Yr,r.y),o.addScaledVector(Kr,r.z),o}static isFrontFacing(e,t,i,n){return Ur.subVectors(i,t),zr.subVectors(e,t),Ur.cross(zr).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ur.subVectors(this.c,this.b),zr.subVectors(this.a,this.b),.5*Ur.cross(zr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,r){return Zr.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return Zr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let o,a;Vr.subVectors(n,i),Qr.subVectors(r,i),qr.subVectors(e,i);const s=Vr.dot(qr),l=Qr.dot(qr);if(s<=0&&l<=0)return t.copy(i);Wr.subVectors(e,n);const c=Vr.dot(Wr),u=Qr.dot(Wr);if(c>=0&&u<=c)return t.copy(n);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(i).addScaledVector(Vr,o);$r.subVectors(e,r);const d=Vr.dot($r),p=Qr.dot($r);if(p>=0&&d<=p)return t.copy(r);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(Qr,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return jr.subVectors(r,n),a=(u-c)/(u-c+(d-p)),t.copy(n).addScaledVector(jr,a);const g=1/(m+f+h);return o=f*g,a=h*g,t.copy(i).addScaledVector(Vr,o).addScaledVector(Qr,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Jr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eo={h:0,s:0,l:0},to={h:0,s:0,l:0};function io(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class no{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,yn.toWorkingColorSpace(this,t),this}setRGB(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yn.workingColorSpace;return this.r=e,this.g=t,this.b=i,yn.toWorkingColorSpace(this,n),this}setHSL(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yn.workingColorSpace;if(e=tn(e,1),t=en(t,0,1),i=en(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=io(r,n,e+1/3),this.g=io(r,n,e),this.b=io(r,n,e-1/3)}return yn.toWorkingColorSpace(this,n),this}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],a=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,i);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,i);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=t[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,i);if(6===r)return this.setHex(parseInt(n,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti;const i=Jr[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=An(e.r),this.g=An(e.g),this.b=An(e.b),this}copyLinearToSRGB(e){return this.r=bn(e.r),this.g=bn(e.g),this.b=bn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti;return yn.fromWorkingColorSpace(ro.copy(this),e),65536*Math.round(en(255*ro.r,0,255))+256*Math.round(en(255*ro.g,0,255))+Math.round(en(255*ro.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.workingColorSpace;yn.fromWorkingColorSpace(ro.copy(this),t);const i=ro.r,n=ro.g,r=ro.b,o=Math.max(i,n,r),a=Math.min(i,n,r);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case i:s=(n-r)/e+(n<r?6:0);break;case n:s=(r-i)/e+2;break;case r:s=(i-n)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.workingColorSpace;return yn.fromWorkingColorSpace(ro.copy(this),t),e.r=ro.r,e.g=ro.g,e.b=ro.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti;yn.fromWorkingColorSpace(ro.copy(this),e);const t=ro.r,i=ro.g,n=ro.b;return e!==Ti?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(eo),this.setHSL(eo.h+e,eo.s+t,eo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(eo),e.getHSL(to);const i=nn(eo.h,to.h,t),n=nn(eo.s,to.s,t),r=nn(eo.l,to.l,t);return this.setHSL(i,n,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ro=new no;no.NAMES=Jr;let oo=0,ao=class extends $i{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oo++}),this.uuid=Ji(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Ne,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new no(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Di,this.stencilZFail=Di,this.stencilZPass=Di,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),this.blendEquation!==Ne&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Di&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Di&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Di&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class so extends ao{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new no(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const lo=function(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(n[l]=0,n[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(n[l]=1024>>-e-14,n[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(n[l]=e+15<<10,n[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(n[l]=31744,n[256|l]=64512,r[l]=24,r[256|l]=24):(n[l]=31744,n[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;!(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:o,exponentTable:a,offsetTable:s}}(),co=function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=en(e,-65504,65504),lo.floatView[0]=e;const t=lo.uint32View[0],i=t>>23&511;return lo.baseTable[i]+((8388607&t)>>lo.shiftTable[i])},uo=new Dn,ho=new sn;class po{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=Qi,this.updateRanges=[],this.gpuType=It,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyMatrix3(e),this.setXY(t,ho.x,ho.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.applyMatrix3(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.applyMatrix4(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.applyNormalMatrix(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)uo.fromBufferAttribute(this,t),uo.transformDirection(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=rn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=rn(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=rn(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=rn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=rn(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),n=on(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),n=on(n,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Qi&&(e.usage=this.usage),e}}class fo extends po{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class mo extends po{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class go extends po{constructor(e,t,i){super(new Float32Array(e),t,i)}}let _o=0;const vo=new hr,yo=new Fr,Ao=new Dn,bo=new Fn,xo=new Fn,wo=new Dn;class So extends $i{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_o++}),this.uuid=Ji(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(un(e)?mo:fo)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new ln).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vo.makeRotationFromQuaternion(e),this.applyMatrix4(vo),this}rotateX(e){return vo.makeRotationX(e),this.applyMatrix4(vo),this}rotateY(e){return vo.makeRotationY(e),this.applyMatrix4(vo),this}rotateZ(e){return vo.makeRotationZ(e),this.applyMatrix4(vo),this}translate(e,t,i){return vo.makeTranslation(e,t,i),this.applyMatrix4(vo),this}scale(e,t,i){return vo.makeScale(e,t,i),this.applyMatrix4(vo),this}lookAt(e){return yo.lookAt(e),yo.updateMatrix(),this.applyMatrix4(yo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ao).negate(),this.translate(Ao.x,Ao.y,Ao.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new go(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Fn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Dn(-1/0,-1/0,-1/0),new Dn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const e=t[i];bo.setFromBufferAttribute(e),this.morphTargetsRelative?(wo.addVectors(this.boundingBox.min,bo.min),this.boundingBox.expandByPoint(wo),wo.addVectors(this.boundingBox.max,bo.max),this.boundingBox.expandByPoint(wo)):(this.boundingBox.expandByPoint(bo.min),this.boundingBox.expandByPoint(bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Dn,1/0);if(e){const i=this.boundingSphere.center;if(bo.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const i=t[e];xo.setFromBufferAttribute(i),this.morphTargetsRelative?(wo.addVectors(bo.min,xo.min),bo.expandByPoint(wo),wo.addVectors(bo.max,xo.max),bo.expandByPoint(wo)):(bo.expandByPoint(xo.min),bo.expandByPoint(xo.max))}bo.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)wo.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(wo));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],a=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)wo.fromBufferAttribute(o,t),a&&(Ao.fromBufferAttribute(e,t),wo.add(Ao)),n=Math.max(n,i.distanceToSquared(wo))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,n=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new po(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],s=[];for(let w=0;w<i.count;w++)a[w]=new Dn,s[w]=new Dn;const l=new Dn,c=new Dn,u=new Dn,h=new sn,d=new sn,p=new sn,f=new Dn,m=new Dn;function g(e,t,n){l.fromBufferAttribute(i,e),c.fromBufferAttribute(i,t),u.fromBufferAttribute(i,n),h.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,n),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(o),a[e].add(f),a[t].add(f),a[n].add(f),s[e].add(m),s[t].add(m),s[n].add(m))}let _=this.groups;0===_.length&&(_=[{start:0,count:e.count}]);for(let w=0,S=_.length;w<S;++w){const t=_[w],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)g(e.getX(n+0),e.getX(n+1),e.getX(n+2))}const v=new Dn,y=new Dn,A=new Dn,b=new Dn;function x(e){A.fromBufferAttribute(n,e),b.copy(A);const t=a[e];v.copy(t),v.sub(A.multiplyScalar(A.dot(t))).normalize(),y.crossVectors(b,t);const i=y.dot(s[e])<0?-1:1;o.setXYZW(e,v.x,v.y,v.z,i)}for(let w=0,S=_.length;w<S;++w){const t=_[w],i=t.start;for(let n=i,r=i+t.count;n<r;n+=3)x(e.getX(n+0)),x(e.getX(n+1)),x(e.getX(n+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new po(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new Dn,r=new Dn,o=new Dn,a=new Dn,s=new Dn,l=new Dn,c=new Dn,u=new Dn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),a.fromBufferAttribute(i,d),s.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),a.add(c),s.add(c),l.add(c),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,s.x,s.y,s.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),u.subVectors(n,r),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)wo.fromBufferAttribute(e,t),wo.normalize(),e.setXYZ(t,wo.x,wo.y,wo.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,o=new i.constructor(t.length*n);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n;for(let e=0;e<n;e++)o[s++]=i[a++]}return new po(o,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new So,i=this.index.array,n=this.attributes;for(const a in n){const r=e(n[a],i);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const n=[],o=r[a];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],i);n.push(r)}t.morphAttributes[a]=n}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const s in i){const t=i[s];e.data.attributes[s]=t.toJSON(e.data)}const n={};let r=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],i=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];i.push(r.toJSON(e.data))}i.length>0&&(n[s]=i,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const l in n){const e=n[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],i=r[l];for(let n=0,r=i.length;n<r;n++)e.push(i[n].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Co=new hr,Eo=new ur,To=new ir,Mo=new Dn,Io=new Dn,Bo=new Dn,Ro=new Dn,Po=new Dn,ko=new Dn,Lo=new Dn,Do=new Dn;class No extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new So,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new so;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const a=this.morphTargetInfluences;if(r&&a){ko.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=a[i],s=r[i];0!==n&&(Po.fromBufferAttribute(s,e),o?ko.addScaledVector(Po,n):ko.addScaledVector(Po.sub(t),n))}t.add(ko)}return t}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),To.copy(i.boundingSphere),To.applyMatrix4(r),Eo.copy(e.ray).recast(e.near),!1===To.containsPoint(Eo.origin)){if(null===Eo.intersectSphere(To,Mo))return;if(Eo.origin.distanceToSquared(Mo)>(e.far-e.near)**2)return}Co.copy(r).invert(),Eo.copy(e.ray).applyMatrix4(Co),null!==i.boundingBox&&!1===Eo.intersectsBox(i.boundingBox)||this._computeIntersections(e,t,Eo)}}_computeIntersections(e,t,i){let n;const r=this.geometry,o=this.material,a=r.index,s=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],s=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3)n=Oo(this,s,e,i,l,c,u,a.getX(o),a.getX(o+1),a.getX(o+2)),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}else for(let p=Math.max(0,d.start),f=Math.min(a.count,d.start+d.count);p<f;p+=3)n=Oo(this,o,e,i,l,c,u,a.getX(p),a.getX(p+1),a.getX(p+2)),n&&(n.faceIndex=Math.floor(p/3),t.push(n));else if(void 0!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const r=h[p],a=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3)n=Oo(this,a,e,i,l,c,u,o,o+1,o+2),n&&(n.faceIndex=Math.floor(o/3),n.face.materialIndex=r.materialIndex,t.push(n))}else for(let p=Math.max(0,d.start),f=Math.min(s.count,d.start+d.count);p<f;p+=3)n=Oo(this,o,e,i,l,c,u,p,p+1,p+2),n&&(n.faceIndex=Math.floor(p/3),t.push(n))}}function Oo(e,t,i,n,r,o,a,s,l,c){e.getVertexPosition(s,Io),e.getVertexPosition(l,Bo),e.getVertexPosition(c,Ro);const u=function(e,t,i,n,r,o,a,s){let l;if(l=1===t.side?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,0===t.side,s),null===l)return null;Do.copy(s),Do.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(Do);return c<i.near||c>i.far?null:{distance:c,point:Do.clone(),object:e}}(e,t,i,n,Io,Bo,Ro,Lo);if(u){const e=new Dn;Zr.getBarycoord(Lo,Io,Bo,Ro,e),r&&(u.uv=Zr.getInterpolatedAttribute(r,s,l,c,e,new sn)),o&&(u.uv1=Zr.getInterpolatedAttribute(o,s,l,c,e,new sn)),a&&(u.normal=Zr.getInterpolatedAttribute(a,s,l,c,e,new Dn),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c:c,normal:new Dn,materialIndex:0};Zr.getNormal(Io,Bo,Ro,t.normal),u.face=t,u.barycoord=e}return u}class Fo extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};const a=this;n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,i,n,r,o,p,f,m,g,_){const v=o/m,y=p/g,A=o/2,b=p/2,x=f/2,w=m+1,S=g+1;let C=0,E=0;const T=new Dn;for(let a=0;a<S;a++){const o=a*y-b;for(let s=0;s<w;s++){const h=s*v-A;T[e]=h*n,T[t]=o*r,T[i]=x,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[i]=f>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-a/g),C+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+w*a,i=h+e+w*(a+1),n=h+(e+1)+w*(a+1),r=h+(e+1)+w*a;s.push(t,i,r),s.push(i,n,r),E+=6}a.addGroup(d,E,_),d+=E,h+=C}p("z","y","x",-1,-1,i,t,e,o,r,0),p("z","y","x",1,-1,i,t,-e,o,r,1),p("x","z","y",1,1,e,i,t,n,o,2),p("x","z","y",1,-1,e,i,-t,n,o,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(s),this.setAttribute("position",new go(l,3)),this.setAttribute("normal",new go(c,3)),this.setAttribute("uv",new go(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uo(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function zo(e){const t={};for(let i=0;i<e.length;i++){const n=Uo(e[i]);for(const e in n)t[e]=n[e]}return t}function Ho(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:yn.workingColorSpace}const Go={clone:Uo,merge:zo};class Vo extends ao{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uo(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Qo extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hr,this.projectionMatrix=new hr,this.projectionMatrixInverse=new hr,this.coordinateSystem=qi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const jo=new Dn,qo=new sn,Wo=new sn;class $o extends Qo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Zi*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ki*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Zi*Math.atan(Math.tan(.5*Ki*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){jo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(jo.x,jo.y).multiplyScalar(-e/jo.z),jo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(jo.x,jo.y).multiplyScalar(-e/jo.z)}getViewSize(e,t){return this.getViewBounds(e,qo,Wo),t.subVectors(Wo,qo)}setViewOffset(e,t,i,n,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ki*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;r+=o.offsetX*n/e,t-=o.offsetY*i/a,n*=o.width/e,i*=o.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Xo=-90;class Yo extends Fr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new $o(Xo,1,e,t);n.layers=this.layers,this.add(n);const r=new $o(Xo,1,e,t);r.layers=this.layers,this.add(r);const o=new $o(Xo,1,e,t);o.layers=this.layers,this.add(o);const a=new $o(Xo,1,e,t);a.layers=this.layers,this.add(a);const s=new $o(Xo,1,e,t);s.layers=this.layers,this.add(s);const l=new $o(Xo,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,n,r,o,a,s]=t;for(const l of t)this.remove(l);if(e===qi)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==Wi)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,s,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,r),e.setRenderTarget(i,1,n),e.render(t,o),e.setRenderTarget(i,2,n),e.render(t,a),e.setRenderTarget(i,3,n),e.render(t,s),e.setRenderTarget(i,4,n),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5,n),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Ko extends Mn{constructor(e,t,i,n,r,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:ut,i,n,r,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Zo extends Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new Ko(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:At}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i=new Fo(5,5,5),n=new Vo({name:"CubemapFromEquirect",uniforms:Uo({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});n.uniforms.tEquirect.value=t;const r=new No(i,n),o=t.minFilter;return t.minFilter===xt&&(t.minFilter=At),new Yo(1,10,this).update(e,r),t.minFilter=o,r.geometry.dispose(),r.material.dispose(),this}clear(e,t,i,n){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,n);e.setRenderTarget(r)}}const Jo=new Dn,ea=new Dn,ta=new ln;class ia{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=Jo.subVectors(i,t).cross(ea.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Jo),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ta.getNormalMatrix(e),n=this.coplanarPoint(Jo).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const na=new ir,ra=new Dn;class oa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ia,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ia,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ia,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ia,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ia,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new ia;this.planes=[e,t,i,n,r,o]}set(e,t,i,n,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const i=this.planes,n=e.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],_=n[13],v=n[14],y=n[15];if(i[0].setComponents(s-r,h-l,m-d,y-g).normalize(),i[1].setComponents(s+r,h+l,m+d,y+g).normalize(),i[2].setComponents(s+o,h+c,m+p,y+_).normalize(),i[3].setComponents(s-o,h-c,m-p,y-_).normalize(),i[4].setComponents(s-a,h-u,m-f,y-v).normalize(),t===qi)i[5].setComponents(s+a,h+u,m+f,y+v).normalize();else{if(t!==Wi)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,u,f,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),na.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),na.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(na)}intersectsSprite(e){return na.center.set(0,0,0),na.radius=.7071067811865476,na.applyMatrix4(e.matrixWorld),this.intersectsSphere(na)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(ra.x=n.normal.x>0?e.max.x:e.min.x,ra.y=n.normal.y>0?e.max.y:e.min.y,ra.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(ra)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function aa(){let e=null,t=!1,i=null,n=null;function r(t,o){i(t,o),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function sa(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);const n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){const e=t.get(i);return void((!e||e.version<i.version)&&t.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version}))}const r=t.get(i);if(void 0===r)t.set(i,function(t,i){const n=t.array,r=t.usage,o=n.byteLength,a=e.createBuffer();let s;if(e.bindBuffer(i,a),e.bufferData(i,n,r),t.onUploadCallback(),n instanceof Float32Array)s=e.FLOAT;else if(n instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(n instanceof Int16Array)s=e.SHORT;else if(n instanceof Uint32Array)s=e.UNSIGNED_INT;else if(n instanceof Int32Array)s=e.INT;else if(n instanceof Int8Array)s=e.BYTE;else if(n instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(n instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version,size:o}}(i,n));else if(r.version<i.version){if(r.size!==i.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,n){const r=i.array,o=i.updateRanges;if(e.bindBuffer(n,t),0===o.length)e.bufferSubData(n,0,r);else{o.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<o.length;e++){const i=o[t],n=o[e];n.start<=i.start+i.count+1?i.count=Math.max(i.count,n.start+n.count-i.start):(++t,o[t]=n)}o.length=t+1;for(let i=0,a=o.length;i<a;i++){const t=o[i];e.bufferSubData(n,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}i.clearUpdateRanges()}i.onUploadCallback()}(r.buffer,i,n),r.version=i.version}}}}class la extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,o=t/2,a=Math.floor(i),s=Math.floor(n),l=a+1,c=s+1,u=e/a,h=t/s,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const i=t*u-r;p.push(i,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,i=e+l*(g+1),n=e+1+l*(g+1),r=e+1+l*g;d.push(t,i,r),d.push(i,n,r)}this.setIndex(d),this.setAttribute("position",new go(p,3)),this.setAttribute("normal",new go(f,3)),this.setAttribute("uv",new go(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new la(e.width,e.height,e.widthSegments,e.heightSegments)}}const ca={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ua={common:{diffuse:{value:new no(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ln}},envmap:{envMap:{value:null},envMapRotation:{value:new ln},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ln}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ln}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ln},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ln},normalScale:{value:new sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ln},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ln}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ln}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ln}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new no(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new no(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0},uvTransform:{value:new ln}},sprite:{diffuse:{value:new no(16777215)},opacity:{value:1},center:{value:new sn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}}},ha={basic:{uniforms:zo([ua.common,ua.specularmap,ua.envmap,ua.aomap,ua.lightmap,ua.fog]),vertexShader:ca.meshbasic_vert,fragmentShader:ca.meshbasic_frag},lambert:{uniforms:zo([ua.common,ua.specularmap,ua.envmap,ua.aomap,ua.lightmap,ua.emissivemap,ua.bumpmap,ua.normalmap,ua.displacementmap,ua.fog,ua.lights,{emissive:{value:new no(0)}}]),vertexShader:ca.meshlambert_vert,fragmentShader:ca.meshlambert_frag},phong:{uniforms:zo([ua.common,ua.specularmap,ua.envmap,ua.aomap,ua.lightmap,ua.emissivemap,ua.bumpmap,ua.normalmap,ua.displacementmap,ua.fog,ua.lights,{emissive:{value:new no(0)},specular:{value:new no(1118481)},shininess:{value:30}}]),vertexShader:ca.meshphong_vert,fragmentShader:ca.meshphong_frag},standard:{uniforms:zo([ua.common,ua.envmap,ua.aomap,ua.lightmap,ua.emissivemap,ua.bumpmap,ua.normalmap,ua.displacementmap,ua.roughnessmap,ua.metalnessmap,ua.fog,ua.lights,{emissive:{value:new no(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ca.meshphysical_vert,fragmentShader:ca.meshphysical_frag},toon:{uniforms:zo([ua.common,ua.aomap,ua.lightmap,ua.emissivemap,ua.bumpmap,ua.normalmap,ua.displacementmap,ua.gradientmap,ua.fog,ua.lights,{emissive:{value:new no(0)}}]),vertexShader:ca.meshtoon_vert,fragmentShader:ca.meshtoon_frag},matcap:{uniforms:zo([ua.common,ua.bumpmap,ua.normalmap,ua.displacementmap,ua.fog,{matcap:{value:null}}]),vertexShader:ca.meshmatcap_vert,fragmentShader:ca.meshmatcap_frag},points:{uniforms:zo([ua.points,ua.fog]),vertexShader:ca.points_vert,fragmentShader:ca.points_frag},dashed:{uniforms:zo([ua.common,ua.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ca.linedashed_vert,fragmentShader:ca.linedashed_frag},depth:{uniforms:zo([ua.common,ua.displacementmap]),vertexShader:ca.depth_vert,fragmentShader:ca.depth_frag},normal:{uniforms:zo([ua.common,ua.bumpmap,ua.normalmap,ua.displacementmap,{opacity:{value:1}}]),vertexShader:ca.meshnormal_vert,fragmentShader:ca.meshnormal_frag},sprite:{uniforms:zo([ua.sprite,ua.fog]),vertexShader:ca.sprite_vert,fragmentShader:ca.sprite_frag},background:{uniforms:{uvTransform:{value:new ln},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ca.background_vert,fragmentShader:ca.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ln}},vertexShader:ca.backgroundCube_vert,fragmentShader:ca.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ca.cube_vert,fragmentShader:ca.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ca.equirect_vert,fragmentShader:ca.equirect_frag},distanceRGBA:{uniforms:zo([ua.common,ua.displacementmap,{referencePosition:{value:new Dn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ca.distanceRGBA_vert,fragmentShader:ca.distanceRGBA_frag},shadow:{uniforms:zo([ua.lights,ua.fog,{color:{value:new no(0)},opacity:{value:1}}]),vertexShader:ca.shadow_vert,fragmentShader:ca.shadow_frag}};ha.physical={uniforms:zo([ha.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ln},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ln},clearcoatNormalScale:{value:new sn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ln},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ln},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ln},sheen:{value:0},sheenColor:{value:new no(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ln},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ln},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ln},transmissionSamplerSize:{value:new sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ln},attenuationDistance:{value:0},attenuationColor:{value:new no(0)},specularColor:{value:new no(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ln},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ln},anisotropyVector:{value:new sn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ln}}]),vertexShader:ca.meshphysical_vert,fragmentShader:ca.meshphysical_frag};const da={r:0,b:0,g:0},pa=new br,fa=new hr;function ma(e,t,i,n,r,o,a){const s=new no(0);let l,c,u=!0===o?0:1,h=null,d=0,p=null;function f(e){let n=!0===e.isScene?e.background:null;return n&&n.isTexture&&(n=(e.backgroundBlurriness>0?i:t).get(n)),n}function m(t,i){t.getRGB(da,Ho(e)),n.buffers.color.setClear(da.r,da.g,da.b,i,a)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let i=!1;const r=f(t);null===r?m(s,u):r&&r.isColor&&(m(r,1),i=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?n.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&n.buffers.color.setClear(0,0,0,0,a),(e.autoClear||i)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,i){const n=f(i);n&&(n.isCubeTexture||n.mapping===pt)?(void 0===c&&(c=new No(new Fo(1,1,1),new Vo({name:"BackgroundCubeMaterial",uniforms:Uo(ha.backgroundCube.uniforms),vertexShader:ha.backgroundCube.vertexShader,fragmentShader:ha.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),pa.copy(i.backgroundRotation),pa.x*=-1,pa.y*=-1,pa.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(pa.y*=-1,pa.z*=-1),c.material.uniforms.envMap.value=n,c.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(fa.makeRotationFromEuler(pa)),c.material.toneMapped=yn.getTransfer(n.colorSpace)!==Pi,h===n&&d===n.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=n,d=n.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):n&&n.isTexture&&(void 0===l&&(l=new No(new la(2,2),new Vo({name:"BackgroundMaterial",uniforms:Uo(ha.background.uniforms),vertexShader:ha.background.vertexShader,fragmentShader:ha.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=n,l.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,l.material.toneMapped=yn.getTransfer(n.colorSpace)!==Pi,!0===n.matrixAutoUpdate&&n.updateMatrix(),l.material.uniforms.uvTransform.value.copy(n.matrix),h===n&&d===n.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=n,d=n.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))}}}function ga(e,t){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),n={},r=c(null);let o=r,a=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=o.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function h(e){d(e,0)}function d(t,i){const n=o.newAttributes,r=o.enabledAttributes,a=o.attributeDivisors;n[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),a[t]!==i&&(e.vertexAttribDivisor(t,i),a[t]=i)}function p(){const t=o.newAttributes,i=o.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function f(t,i,n,r,o,a,s){!0===s?e.vertexAttribIPointer(t,i,n,o,a):e.vertexAttribPointer(t,i,n,r,o,a)}function m(){g(),a=!0,o!==r&&(o=r,s(o.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(i,r,l,m,g){let _=!1;const v=function(t,i,r){const o=!0===r.wireframe;let a=n[t.id];void 0===a&&(a={},n[t.id]=a);let s=a[i.id];void 0===s&&(s={},a[i.id]=s);let l=s[o];return void 0===l&&(l=c(e.createVertexArray()),s[o]=l),l}(m,l,r);o!==v&&(o=v,s(o.object)),_=function(e,t,i,n){const r=o.attributes,a=t.attributes;let s=0;const l=i.getAttributes();for(const o in l)if(l[o].location>=0){const t=r[o];let i=a[o];if(void 0===i&&("instanceMatrix"===o&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(i=e.instanceColor)),void 0===t)return!0;if(t.attribute!==i)return!0;if(i&&t.data!==i.data)return!0;s++}return o.attributesNum!==s||o.index!==n}(i,m,l,g),_&&function(e,t,i,n){const r={},a=t.attributes;let s=0;const l=i.getAttributes();for(const o in l)if(l[o].location>=0){let t=a[o];void 0===t&&("instanceMatrix"===o&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(t=e.instanceColor));const i={};i.attribute=t,t&&t.data&&(i.data=t.data),r[o]=i,s++}o.attributes=r,o.attributesNum=s,o.index=n}(i,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(_||a)&&(a=!1,function(i,n,r,o){u();const a=o.attributes,s=r.getAttributes(),l=n.defaultAttributeValues;for(const c in s){const n=s[c];if(n.location>=0){let r=a[c];if(void 0===r&&("instanceMatrix"===c&&i.instanceMatrix&&(r=i.instanceMatrix),"instanceColor"===c&&i.instanceColor&&(r=i.instanceColor)),void 0!==r){const a=r.normalized,s=r.itemSize,l=t.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||r.gpuType===Tt;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,g=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)d(n.location+e,t.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)f(n.location+e,s/n.locationSize,u,a,l*p,(g+s/n.locationSize*e)*p,m)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)d(n.location+e,r.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)f(n.location+e,s/n.locationSize,u,a,s*p,s/n.locationSize*e*p,m)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(n.location,t);break;case 3:e.vertexAttrib3fv(n.location,t);break;case 4:e.vertexAttrib4fv(n.location,t);break;default:e.vertexAttrib1fv(n.location,t)}}}}p()}(i,r,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in n){const t=n[e];for(const e in t){const i=t[e];for(const e in i)l(i[e].object),delete i[e];delete t[e]}delete n[e]}},releaseStatesOfGeometry:function(e){if(void 0===n[e.id])return;const t=n[e.id];for(const i in t){const e=t[i];for(const t in e)l(e[t].object),delete e[t];delete t[i]}delete n[e.id]},releaseStatesOfProgram:function(e){for(const t in n){const i=n[t];if(void 0===i[e.id])continue;const r=i[e.id];for(const e in r)l(r[e].object),delete r[e];delete i[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function _a(e,t,i){let n;function r(t,r,o){0!==o&&(e.drawArraysInstanced(n,t,r,o),i.update(r,n,o))}this.setMode=function(e){n=e},this.render=function(t,r){e.drawArrays(n,t,r),i.update(r,n,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,e,0,r,0,o);let a=0;for(let t=0;t<o;t++)a+=r[t];i.update(a,n,1)},this.renderMultiDrawInstances=function(e,o,a,s){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],o[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(n,e,0,o,0,s,0,a);let t=0;for(let e=0;e<a;e++)t+=o[e];for(let e=0;e<s.length;e++)i.update(t,n,s[e])}}}function va(e,t,i,n){let r;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==i.precision?i.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===i.logarithmicDepthBuffer,c=!0===i.reverseDepthBuffer&&t.has("EXT_clip_control");if(!0===c){const e=t.get("EXT_clip_control");e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT)}const u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,textureFormatReadable:function(t){return t===Lt||n.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(i){const r=i===Bt&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(i!==wt&&n.convert(i)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&i!==It&&!r)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function ya(e){const t=this;let i=null,n=0,r=!1,o=!1;const a=new ia,s=new ln,l={value:null,needsUpdate:!1};function c(e,i,n,r){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const t=n+4*o,r=i.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let i=0,l=n;i!==o;++i,l+=4)a.copy(e[i]).applyMatrix4(r,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==n||r;return r=t,n=e.length,i},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!r||null===h||0===h.length||o&&!p)o?c(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0);else{const e=o?0:n,t=4*e;let r=f.clippingState||null;l.value=r,r=c(h,s,t,u);for(let n=0;n!==t;++n)r[n]=i[n];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Aa(e){let t=new WeakMap;function i(e,t){return t===dt?e.mapping=ut:304===t&&(e.mapping=ht),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===dt||304===o){if(t.has(r))return i(t.get(r).texture,r.mapping);{const o=r.image;if(o&&o.height>0){const a=new Zo(o.height);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",n),i(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class ba extends Qo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const xa=[.125,.215,.35,.446,.526,.582],wa=new ba,Sa=new no;let Ca=null,Ea=0,Ta=0,Ma=!1;const Ia=(1+Math.sqrt(5))/2,Ba=1/Ia,Ra=[new Dn(-Ia,Ba,0),new Dn(Ia,Ba,0),new Dn(-Ba,0,Ia),new Dn(Ba,0,Ia),new Dn(0,Ia,-Ba),new Dn(0,Ia,Ba),new Dn(-1,1,-1),new Dn(1,1,-1),new Dn(-1,1,1),new Dn(1,1,1)];class Pa{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Ca=this._renderer.getRenderTarget(),Ea=this._renderer.getActiveCubeFace(),Ta=this._renderer.getActiveMipmapLevel(),Ma=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Na(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Da(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ca,Ea,Ta),this._renderer.xr.enabled=Ma,e.scissorTest=!1,La(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ut||e.mapping===ht?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ca=this._renderer.getRenderTarget(),Ea=this._renderer.getActiveCubeFace(),Ta=this._renderer.getActiveMipmapLevel(),Ma=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:At,minFilter:At,generateMipmaps:!1,type:Bt,format:Lt,colorSpace:Mi,depthBuffer:!1},n=ka(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ka(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],n=[];let r=e;const o=e-4+1+xa.length;for(let a=0;a<o;a++){const o=Math.pow(2,r);i.push(o);let s=1/o;a>e-4?s=xa[a-e+4-1]:0===a&&(s=0),n.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,_=new Float32Array(f*p*d),v=new Float32Array(m*p*d),y=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];_.set(n,f*p*e),v.set(h,m*p*e);const r=[e,e,e,e,e,e];y.set(r,g*p*e)}const A=new So;A.setAttribute("position",new po(_,f)),A.setAttribute("uv",new po(v,m)),A.setAttribute("faceIndex",new po(y,g)),t.push(A),r>4&&r--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){const n=new Float32Array(20),r=new Dn(0,1,0);return new Vo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,e,t)}return n}_compileMaterial(e){const t=new No(this._lodPlanes[0],e);this._renderer.compile(t,wa)}_sceneToCubeUV(e,t,i,n){const r=new $o(90,1,t,i),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(Sa),s.toneMapping=0,s.autoClear=!1;const u=new so({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new No(new Fo,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Sa),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,o[f],0),r.lookAt(a[f],0,0)):1===t?(r.up.set(0,0,o[f]),r.lookAt(0,a[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,a[f]));const i=this._cubeSize;La(n,t*i,f>2?i:0,i,i),s.setRenderTarget(n),d&&s.render(h,r),s.render(e,r)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===ut||e.mapping===ht;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Na()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Da());const r=n?this._cubemapMaterial:this._equirectMaterial,o=new No(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;La(t,0,0,3*a,2*a),i.setRenderTarget(t),i.render(o,wa)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const n=this._lodPlanes.length;for(let r=1;r<n;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),i=Ra[(n-r-1)%Ra.length];this._blur(e,r-1,r,t,i)}t.autoClear=i}_blur(e,t,i,n,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,n,"latitudinal",r),this._halfBlur(o,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new No(this._lodPlanes[n],l),u=l.uniforms,h=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let y=0;y<20;++y){const e=y/p,t=Math.exp(-e*e/2);m.push(t),0===y?g+=t:y<f&&(g+=2*t)}for(let y=0;y<m.length;y++)m[y]=m[y]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:_}=this;u.dTheta.value=d,u.mipInt.value=_-i;const v=this._sizeLods[n];La(t,3*v*(n>_-4?n-_+4:0),4*(this._cubeSize-v),3*v,2*v),s.setRenderTarget(t),s.render(c,wa)}}function ka(e,t,i){const n=new Rn(e,t,i);return n.texture.mapping=pt,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function La(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function Da(){return new Vo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Na(){return new Vo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Oa(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,a=o===dt||304===o,s=o===ut||o===ht;if(a||s){let o=t.get(r);const l=void 0!==o?o.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===i&&(i=new Pa(e)),o=a?i.fromEquirectangular(r,o):i.fromCubemap(r,o),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),o.texture;if(void 0!==o)return o.texture;{const l=r.image;return a&&l&&l.height>0||s&&l&&function(e){let t=0;for(let i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(l)?(null===i&&(i=new Pa(e)),o=a?i.fromEquirectangular(r):i.fromCubemap(r),o.texture.pmremVersion=r.pmremVersion,t.set(r,o),r.addEventListener("dispose",n),o.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Fa(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(e){const t=i(e);return null===t&&fn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ua(e,t,i,n){const r={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const i in s.attributes)t.remove(s.attributes[i]);for(const i in s.morphAttributes){const e=s.morphAttributes[i];for(let i=0,n=e.length;i<n;i++)t.remove(e[i])}s.removeEventListener("dispose",a),delete r[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),n.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,i.memory.geometries--}function s(e){const i=[],n=e.index,r=e.attributes.position;let a=0;if(null!==n){const e=n.array;a=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],o=e[t+2];i.push(n,r,r,o,o,n)}}else{if(void 0===r)return;{const e=r.array;a=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}}const s=new(un(i)?mo:fo)(i,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,i.memory.geometries++),t},update:function(i){const n=i.attributes;for(const o in n)t.update(n[o],e.ARRAY_BUFFER);const r=i.morphAttributes;for(const o in r){const i=r[o];for(let n=0,r=i.length;n<r;n++)t.update(i[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&s(e)}else s(e);return o.get(e)}}}function za(e,t,i){let n,r,o;function a(t,a,s){0!==s&&(e.drawElementsInstanced(n,a,r,t*o,s),i.update(a,n,s))}this.setMode=function(e){n=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(n,a,r,t*o),i.update(a,n,1)},this.renderInstances=a,this.renderMultiDraw=function(e,o,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,o,0,r,e,0,a);let s=0;for(let t=0;t<a;t++)s+=o[t];i.update(s,n,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/o,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(n,s,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e];for(let e=0;e<c.length;e++)i.update(t,n,c[e])}}}function Ha(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(t.calls++,n){case e.TRIANGLES:t.triangles+=r*(i/3);break;case e.LINES:t.lines+=r*(i/2);break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ga(e,t,i){const n=new WeakMap,r=new In;return{update:function(o,a,s){const l=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let h=n.get(a);if(void 0===h||h.count!==u){let e=function(){_.dispose(),n.delete(a),a.removeEventListener("dispose",e)};void 0!==h&&h.texture.dispose();const i=void 0!==a.morphAttributes.position,o=void 0!==a.morphAttributes.normal,s=void 0!==a.morphAttributes.color,l=a.morphAttributes.position||[],c=a.morphAttributes.normal||[],d=a.morphAttributes.color||[];let p=0;!0===i&&(p=1),!0===o&&(p=2),!0===s&&(p=3);let f=a.attributes.position.count*p,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);const g=new Float32Array(f*m*4*u),_=new Pn(g,f,m,u);_.type=It,_.needsUpdate=!0;const v=4*p;for(let t=0;t<u;t++){const e=l[t],n=c[t],a=d[t],u=f*m*4*t;for(let t=0;t<e.count;t++){const l=t*v;!0===i&&(r.fromBufferAttribute(e,t),g[u+l+0]=r.x,g[u+l+1]=r.y,g[u+l+2]=r.z,g[u+l+3]=0),!0===o&&(r.fromBufferAttribute(n,t),g[u+l+4]=r.x,g[u+l+5]=r.y,g[u+l+6]=r.z,g[u+l+7]=0),!0===s&&(r.fromBufferAttribute(a,t),g[u+l+8]=r.x,g[u+l+9]=r.y,g[u+l+10]=r.z,g[u+l+11]=4===a.itemSize?r.w:1)}}h={count:u,texture:_,size:new sn(f,m)},n.set(a,h),a.addEventListener("dispose",e)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)s.getUniforms().setValue(e,"morphTexture",o.morphTexture,i);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e];const i=a.morphTargetsRelative?1:1-t;s.getUniforms().setValue(e,"morphTargetBaseInfluence",i),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,i),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function Va(e,t,i,n){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(a){const s=n.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),r.get(a)!==s&&(i.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&i.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c},dispose:function(){r=new WeakMap}}}class Qa extends Mn{constructor(e,t,i,n,r,o,a,s,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1026;if(c!==Dt&&c!==Nt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Dt&&(i=Mt),void 0===i&&c===Nt&&(i=kt),super(null,n,r,o,a,s,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:_t,this.minFilter=void 0!==s?s:_t,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const ja=new Mn,qa=new Qa(1,1),Wa=new Pn,$a=new kn,Xa=new Ko,Ya=[],Ka=[],Za=new Float32Array(16),Ja=new Float32Array(9),es=new Float32Array(4);function ts(e,t,i){const n=e[0];if(n<=0||n>0)return e;const r=t*i;let o=Ya[r];if(void 0===o&&(o=new Float32Array(r),Ya[r]=o),0!==t){n.toArray(o,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(o,r)}return o}function is(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ns(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function rs(e,t){let i=Ka[t];void 0===i&&(i=new Int32Array(t),Ka[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function os(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function as(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(is(i,t))return;e.uniform2fv(this.addr,t),ns(i,t)}}function ss(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(is(i,t))return;e.uniform3fv(this.addr,t),ns(i,t)}}function ls(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(is(i,t))return;e.uniform4fv(this.addr,t),ns(i,t)}}function cs(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(is(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),ns(i,t)}else{if(is(i,n))return;es.set(n),e.uniformMatrix2fv(this.addr,!1,es),ns(i,n)}}function us(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(is(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),ns(i,t)}else{if(is(i,n))return;Ja.set(n),e.uniformMatrix3fv(this.addr,!1,Ja),ns(i,n)}}function hs(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(is(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),ns(i,t)}else{if(is(i,n))return;Za.set(n),e.uniformMatrix4fv(this.addr,!1,Za),ns(i,n)}}function ds(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function ps(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(is(i,t))return;e.uniform2iv(this.addr,t),ns(i,t)}}function fs(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(is(i,t))return;e.uniform3iv(this.addr,t),ns(i,t)}}function ms(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(is(i,t))return;e.uniform4iv(this.addr,t),ns(i,t)}}function gs(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function _s(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(is(i,t))return;e.uniform2uiv(this.addr,t),ns(i,t)}}function vs(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(is(i,t))return;e.uniform3uiv(this.addr,t),ns(i,t)}}function ys(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(is(i,t))return;e.uniform4uiv(this.addr,t),ns(i,t)}}function As(e,t,i){const n=this.cache,r=i.allocateTextureUnit();let o;n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),this.type===e.SAMPLER_2D_SHADOW?(qa.compareFunction=515,o=qa):o=ja,i.setTexture2D(t||o,r)}function bs(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||$a,r)}function xs(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||Xa,r)}function ws(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||Wa,r)}function Ss(e,t){e.uniform1fv(this.addr,t)}function Cs(e,t){const i=ts(t,this.size,2);e.uniform2fv(this.addr,i)}function Es(e,t){const i=ts(t,this.size,3);e.uniform3fv(this.addr,i)}function Ts(e,t){const i=ts(t,this.size,4);e.uniform4fv(this.addr,i)}function Ms(e,t){const i=ts(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Is(e,t){const i=ts(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Bs(e,t){const i=ts(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function Rs(e,t){e.uniform1iv(this.addr,t)}function Ps(e,t){e.uniform2iv(this.addr,t)}function ks(e,t){e.uniform3iv(this.addr,t)}function Ls(e,t){e.uniform4iv(this.addr,t)}function Ds(e,t){e.uniform1uiv(this.addr,t)}function Ns(e,t){e.uniform2uiv(this.addr,t)}function Os(e,t){e.uniform3uiv(this.addr,t)}function Fs(e,t){e.uniform4uiv(this.addr,t)}function Us(e,t,i){const n=this.cache,r=t.length,o=rs(i,r);is(n,o)||(e.uniform1iv(this.addr,o),ns(n,o));for(let a=0;a!==r;++a)i.setTexture2D(t[a]||ja,o[a])}function zs(e,t,i){const n=this.cache,r=t.length,o=rs(i,r);is(n,o)||(e.uniform1iv(this.addr,o),ns(n,o));for(let a=0;a!==r;++a)i.setTexture3D(t[a]||$a,o[a])}function Hs(e,t,i){const n=this.cache,r=t.length,o=rs(i,r);is(n,o)||(e.uniform1iv(this.addr,o),ns(n,o));for(let a=0;a!==r;++a)i.setTextureCube(t[a]||Xa,o[a])}function Gs(e,t,i){const n=this.cache,r=t.length,o=rs(i,r);is(n,o)||(e.uniform1iv(this.addr,o),ns(n,o));for(let a=0;a!==r;++a)i.setTexture2DArray(t[a]||Wa,o[a])}class Vs{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return os;case 35664:return as;case 35665:return ss;case 35666:return ls;case 35674:return cs;case 35675:return us;case 35676:return hs;case 5124:case 35670:return ds;case 35667:case 35671:return ps;case 35668:case 35672:return fs;case 35669:case 35673:return ms;case 5125:return gs;case 36294:return _s;case 36295:return vs;case 36296:return ys;case 35678:case 36198:case 36298:case 36306:case 35682:return As;case 35679:case 36299:case 36307:return bs;case 35680:case 36300:case 36308:case 36293:return xs;case 36289:case 36303:case 36311:case 36292:return ws}}(t.type)}}class Qs{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ss;case 35664:return Cs;case 35665:return Es;case 35666:return Ts;case 35674:return Ms;case 35675:return Is;case 35676:return Bs;case 5124:case 35670:return Rs;case 35667:case 35671:return Ps;case 35668:case 35672:return ks;case 35669:case 35673:return Ls;case 5125:return Ds;case 36294:return Ns;case 36295:return Os;case 36296:return Fs;case 35678:case 36198:case 36298:case 36306:case 35682:return Us;case 35679:case 36299:case 36307:return zs;case 35680:case 36300:case 36308:case 36293:return Hs;case 36289:case 36303:case 36311:case 36292:return Gs}}(t.type)}}class js{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let r=0,o=n.length;r!==o;++r){const o=n[r];o.setValue(e,t[o.id],i)}}}const qs=/(\w+)(\])?(\[|\.)?/g;function Ws(e,t){e.seq.push(t),e.map[t.id]=t}function $s(e,t,i){const n=e.name,r=n.length;for(qs.lastIndex=0;;){const o=qs.exec(n),a=qs.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Ws(i,void 0===c?new Vs(s,e,t):new Qs(s,e,t));break}{let e=i.map[s];void 0===e&&(e=new js(s),Ws(i,e)),i=e}}}class Xs{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);$s(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){const r=this.map[t];void 0!==r&&r.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,o=t.length;r!==o;++r){const o=t[r],a=i[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&i.push(r)}return i}}function Ys(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}let Ks=0;function Zs(e,t,i){const n=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const n=parseInt(o[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const i=e.split("\n"),n=[],r=Math.max(t-6,0),o=Math.min(t+6,i.length);for(let a=r;a<o;a++){const e=a+1;n.push(`${e===t?">":" "} ${e}: ${i[a]}`)}return n.join("\n")}(e.getShaderSource(t),n)}return r}function Js(e,t){const i=function(e){const t=yn.getPrimaries(yn.workingColorSpace),i=yn.getPrimaries(e);let n;switch(t===i?n="":t===Li&&i===ki?n="LinearDisplayP3ToLinearSRGB":t===ki&&i===Li&&(n="LinearSRGBToLinearDisplayP3"),e){case Mi:case Bi:return[n,"LinearTransferOETF"];case Ti:case Ii:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[n,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function el(e,t){let i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="Cineon";break;case 4:i="ACESFilmic";break;case 6:i="AgX";break;case 7:i="Neutral";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const tl=new Dn;function il(e){return""!==e}function nl(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function rl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ol=/^[ \t]*#include +<([\w\d./]+)>/gm;function al(e){return e.replace(ol,ll)}const sl=new Map;function ll(e,t){let i=ca[t];if(void 0===i){const e=sl.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");i=ca[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return al(i)}const cl=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ul(e){return e.replace(cl,hl)}function hl(e,t,i,n){let r="";for(let o=parseInt(t);o<parseInt(i);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function dl(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function pl(e,t,i,n){const r=e.getContext(),o=i.defines;let a=i.vertexShader,s=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(i),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ut:case ht:t="ENVMAP_TYPE_CUBE";break;case pt:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===ht&&(t="ENVMAP_MODE_REFRACTION"),t}(i),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(i),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),p=[(g=i).extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",g.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(il).join("\n"),f=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(o),m=r.createProgram();var g;let _,v,y=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(_=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,f].filter(il).join("\n"),_.length>0&&(_+="\n"),v=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,f].filter(il).join("\n"),v.length>0&&(v+="\n")):(_=[dl(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,f,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(il).join("\n"),v=[dl(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?ca.tonemapping_pars_fragment:"",0!==i.toneMapping?el("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",ca.colorspace_pars_fragment,Js("linearToOutputTexel",i.outputColorSpace),(yn.getLuminanceCoefficients(tl),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${tl.x.toFixed(4)}, ${tl.y.toFixed(4)}, ${tl.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(il).join("\n")),a=al(a),a=nl(a,i),a=rl(a,i),s=al(s),s=nl(s,i),s=rl(s,i),a=ul(a),s=ul(s),!0!==i.isRawShaderMaterial&&(y="#version 300 es\n",_=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,v=["#define varying in",i.glslVersion===ji?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===ji?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const A=y+_+a,b=y+v+s,x=Ys(r,r.VERTEX_SHADER,A),w=Ys(r,r.FRAGMENT_SHADER,b);function S(t){if(e.debug.checkShaderErrors){const i=r.getProgramInfoLog(m).trim(),n=r.getShaderInfoLog(x).trim(),o=r.getShaderInfoLog(w).trim();let a=!0,s=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(a=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,m,x,w);else{const e=Zs(r,x,"vertex"),n=Zs(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+i+"\n"+e+"\n"+n)}else""!==i?console.warn("THREE.WebGLProgram: Program Info Log:",i):""!==n&&""!==o||(s=!1);s&&(t.diagnostics={runnable:a,programLog:i,vertexShader:{log:n,prefix:_},fragmentShader:{log:o,prefix:v}})}r.deleteShader(x),r.deleteShader(w),C=new Xs(r,m),E=function(e,t){const i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r),o=n.name;let a=1;n.type===e.FLOAT_MAT2&&(a=2),n.type===e.FLOAT_MAT3&&(a=3),n.type===e.FLOAT_MAT4&&(a=4),i[o]={type:n.type,location:e.getAttribLocation(t,o),locationSize:a}}return i}(r,m)}let C,E;r.attachShader(m,x),r.attachShader(m,w),void 0!==i.index0AttributeName?r.bindAttribLocation(m,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===C&&S(this),C},this.getAttributes=function(){return void 0===E&&S(this),E};let T=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(m,37297)),T},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=Ks++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let fl=0;class ml{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(n)&&(o.add(n),n.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new gl(e),t.set(e,i)),i}}class gl{constructor(e){this.id=fl++,this.code=e,this.usedTimes=0}}function _l(e,t,i,n,r,o,a){const s=new xr,l=new ml,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.reverseDepthBuffer,p=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(o,s,u,_,v){const y=_.fog,A=v.geometry,b=o.isMeshStandardMaterial?_.environment:null,x=(o.isMeshStandardMaterial?i:t).get(o.envMap||b),w=x&&x.mapping===pt?x.image.height:null,S=m[o.type];null!==o.precision&&(f=r.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const C=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,E=void 0!==C?C.length:0;let T,M,I,B,R=0;if(void 0!==A.morphAttributes.position&&(R=1),void 0!==A.morphAttributes.normal&&(R=2),void 0!==A.morphAttributes.color&&(R=3),S){const e=ha[S];T=e.vertexShader,M=e.fragmentShader}else T=o.vertexShader,M=o.fragmentShader,l.update(o),I=l.getVertexShaderID(o),B=l.getFragmentShaderID(o);const P=e.getRenderTarget(),k=!0===v.isInstancedMesh,L=!0===v.isBatchedMesh,D=!!o.map,N=!!o.matcap,O=!!x,F=!!o.aoMap,U=!!o.lightMap,z=!!o.bumpMap,H=!!o.normalMap,G=!!o.displacementMap,V=!!o.emissiveMap,Q=!!o.metalnessMap,j=!!o.roughnessMap,q=o.anisotropy>0,W=o.clearcoat>0,$=o.dispersion>0,X=o.iridescence>0,Y=o.sheen>0,K=o.transmission>0,Z=q&&!!o.anisotropyMap,J=W&&!!o.clearcoatMap,ee=W&&!!o.clearcoatNormalMap,te=W&&!!o.clearcoatRoughnessMap,ie=X&&!!o.iridescenceMap,ne=X&&!!o.iridescenceThicknessMap,re=Y&&!!o.sheenColorMap,oe=Y&&!!o.sheenRoughnessMap,ae=!!o.specularMap,se=!!o.specularColorMap,le=!!o.specularIntensityMap,ce=K&&!!o.transmissionMap,ue=K&&!!o.thicknessMap,he=!!o.gradientMap,de=!!o.alphaMap,pe=o.alphaTest>0,fe=!!o.alphaHash,me=!!o.extensions;let ge=0;o.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(ge=e.toneMapping));const _e={shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:T,fragmentShader:M,defines:o.defines,customVertexShaderID:I,customFragmentShaderID:B,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:L,batchingColor:L&&null!==v._colorsTexture,instancing:k,instancingColor:k&&null!==v.instanceColor,instancingMorph:k&&null!==v.morphTexture,supportsVertexTextures:p,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:Mi,alphaToCoverage:!!o.alphaToCoverage,map:D,matcap:N,envMap:O,envMapMode:O&&x.mapping,envMapCubeUVHeight:w,aoMap:F,lightMap:U,bumpMap:z,normalMap:H,displacementMap:p&&G,emissiveMap:V,normalMapObjectSpace:H&&1===o.normalMapType,normalMapTangentSpace:H&&0===o.normalMapType,metalnessMap:Q,roughnessMap:j,anisotropy:q,anisotropyMap:Z,clearcoat:W,clearcoatMap:J,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:$,iridescence:X,iridescenceMap:ie,iridescenceThicknessMap:ne,sheen:Y,sheenColorMap:re,sheenRoughnessMap:oe,specularMap:ae,specularColorMap:se,specularIntensityMap:le,transmission:K,transmissionMap:ce,thicknessMap:ue,gradientMap:he,opaque:!1===o.transparent&&1===o.blending&&!1===o.alphaToCoverage,alphaMap:de,alphaTest:pe,alphaHash:fe,combine:o.combine,mapUv:D&&g(o.map.channel),aoMapUv:F&&g(o.aoMap.channel),lightMapUv:U&&g(o.lightMap.channel),bumpMapUv:z&&g(o.bumpMap.channel),normalMapUv:H&&g(o.normalMap.channel),displacementMapUv:G&&g(o.displacementMap.channel),emissiveMapUv:V&&g(o.emissiveMap.channel),metalnessMapUv:Q&&g(o.metalnessMap.channel),roughnessMapUv:j&&g(o.roughnessMap.channel),anisotropyMapUv:Z&&g(o.anisotropyMap.channel),clearcoatMapUv:J&&g(o.clearcoatMap.channel),clearcoatNormalMapUv:ee&&g(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&g(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ie&&g(o.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&g(o.iridescenceThicknessMap.channel),sheenColorMapUv:re&&g(o.sheenColorMap.channel),sheenRoughnessMapUv:oe&&g(o.sheenRoughnessMap.channel),specularMapUv:ae&&g(o.specularMap.channel),specularColorMapUv:se&&g(o.specularColorMap.channel),specularIntensityMapUv:le&&g(o.specularIntensityMap.channel),transmissionMapUv:ce&&g(o.transmissionMap.channel),thicknessMapUv:ue&&g(o.thicknessMap.channel),alphaMapUv:de&&g(o.alphaMap.channel),vertexTangents:!!A.attributes.tangent&&(H||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!A.attributes.uv&&(D||de),fog:!!y,useFog:!0===o.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:E,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:D&&!0===o.map.isVideoTexture&&yn.getTransfer(o.map.colorSpace)===Pi,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:me&&!0===o.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===o.extensions.multiDraw||L)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return _e.vertexUv1s=c.has(1),_e.vertexUv2s=c.has(2),_e.vertexUv3s=c.has(3),c.clear(),_e},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(r=t,(n=i).push(r.precision),n.push(r.outputColorSpace),n.push(r.envMapMode),n.push(r.envMapCubeUVHeight),n.push(r.mapUv),n.push(r.alphaMapUv),n.push(r.lightMapUv),n.push(r.aoMapUv),n.push(r.bumpMapUv),n.push(r.normalMapUv),n.push(r.displacementMapUv),n.push(r.emissiveMapUv),n.push(r.metalnessMapUv),n.push(r.roughnessMapUv),n.push(r.anisotropyMapUv),n.push(r.clearcoatMapUv),n.push(r.clearcoatNormalMapUv),n.push(r.clearcoatRoughnessMapUv),n.push(r.iridescenceMapUv),n.push(r.iridescenceThicknessMapUv),n.push(r.sheenColorMapUv),n.push(r.sheenRoughnessMapUv),n.push(r.specularMapUv),n.push(r.specularColorMapUv),n.push(r.specularIntensityMapUv),n.push(r.transmissionMapUv),n.push(r.thicknessMapUv),n.push(r.combine),n.push(r.fogExp2),n.push(r.sizeAttenuation),n.push(r.morphTargetsCount),n.push(r.morphAttributeCount),n.push(r.numDirLights),n.push(r.numPointLights),n.push(r.numSpotLights),n.push(r.numSpotLightMaps),n.push(r.numHemiLights),n.push(r.numRectAreaLights),n.push(r.numDirLightShadows),n.push(r.numPointLightShadows),n.push(r.numSpotLightShadows),n.push(r.numSpotLightShadowsWithMaps),n.push(r.numLightProbes),n.push(r.shadowMapType),n.push(r.toneMapping),n.push(r.numClippingPlanes),n.push(r.numClipIntersection),n.push(r.depthPacking),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0),t.instancing&&s.enable(1),t.instancingColor&&s.enable(2),t.instancingMorph&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),t.anisotropy&&s.enable(17),t.alphaHash&&s.enable(18),t.batching&&s.enable(19),t.dispersion&&s.enable(20),t.batchingColor&&s.enable(21),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.reverseDepthBuffer&&s.enable(4),t.skinning&&s.enable(5),t.morphTargets&&s.enable(6),t.morphNormals&&s.enable(7),t.morphColors&&s.enable(8),t.premultipliedAlpha&&s.enable(9),t.shadowMapEnabled&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),t.decodeVideoTexture&&s.enable(19),t.alphaToCoverage&&s.enable(20),e.push(s.mask)}(i,t),i.push(e.outputColorSpace)),i.push(t.customProgramCacheKey),i.join();var n,r},getUniforms:function(e){const t=m[e.type];let i;if(t){const e=ha[t];i=Go.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new pl(e,i,t,o),u.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function vl(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function yl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Al(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function bl(){const e=[];let t=0;const i=[],n=[],r=[];function o(i,n,r,o,a,s){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:o,renderOrder:i.renderOrder,z:a,group:s},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=o,l.renderOrder=i.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){t=0,i.length=0,n.length=0,r.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?n.push(u):!0===a.transparent?r.push(u):i.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?n.unshift(u):!0===a.transparent?r.unshift(u):i.unshift(u)},finish:function(){for(let i=t,n=e.length;i<n;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||yl),n.length>1&&n.sort(t||Al),r.length>1&&r.sort(t||Al)}}}function xl(){let e=new WeakMap;return{get:function(t,i){const n=e.get(t);let r;return void 0===n?(r=new bl,e.set(t,[r])):i>=n.length?(r=new bl,n.push(r)):r=n[i],r},dispose:function(){e=new WeakMap}}}function wl(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Dn,color:new no};break;case"SpotLight":i={position:new Dn,direction:new Dn,color:new no,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Dn,color:new no,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Dn,skyColor:new no,groundColor:new no};break;case"RectAreaLight":i={color:new no,position:new Dn,halfWidth:new Dn,halfHeight:new Dn}}return e[t.id]=i,i}}}let Sl=0;function Cl(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function El(e){const t=new wl,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)n.probe.push(new Dn);const r=new Dn,o=new hr,a=new hr;return{setup:function(r){let o=0,a=0,s=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0,_=0,v=0;r.sort(Cl);for(let e=0,A=r.length;e<A;e++){const y=r[e],A=y.color,b=y.intensity,x=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)o+=A.r*b,a+=A.g*b,s+=A.b*b;else if(y.isLightProbe){for(let e=0;e<9;e++)n.probe[e].addScaledVector(y.sh.coefficients[e],b);v++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=i.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,n.directionalShadow[l]=t,n.directionalShadowMap[l]=w,n.directionalShadowMatrix[l]=y.shadow.matrix,p++}n.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(A).multiplyScalar(b),e.distance=x,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,n.spot[u]=e;const r=y.shadow;if(y.map&&(n.spotLightMap[g]=y.map,g++,r.updateMatrices(y),y.castShadow&&_++),n.spotLightMatrix[u]=r.matrix,y.castShadow){const e=i.get(y);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,n.spotShadow[u]=e,n.spotShadowMap[u]=w,m++}u++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(A).multiplyScalar(b),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),n.rectArea[h]=e,h++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=i.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,n.pointShadow[c]=t,n.pointShadowMap[c]=w,n.pointShadowMatrix[c]=y.shadow.matrix,f++}n.point[c]=e,c++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(b),e.groundColor.copy(y.groundColor).multiplyScalar(b),n.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(n.rectAreaLTC1=ua.LTC_FLOAT_1,n.rectAreaLTC2=ua.LTC_FLOAT_2):(n.rectAreaLTC1=ua.LTC_HALF_1,n.rectAreaLTC2=ua.LTC_HALF_2)),n.ambient[0]=o,n.ambient[1]=a,n.ambient[2]=s;const y=n.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===u&&y.rectAreaLength===h&&y.hemiLength===d&&y.numDirectionalShadows===p&&y.numPointShadows===f&&y.numSpotShadows===m&&y.numSpotMaps===g&&y.numLightProbes===v||(n.directional.length=l,n.spot.length=u,n.rectArea.length=h,n.point.length=c,n.hemi.length=d,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=f,n.pointShadowMap.length=f,n.spotShadow.length=m,n.spotShadowMap.length=m,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=f,n.spotLightMatrix.length=m+g-_,n.spotLightMap.length=g,n.numSpotLightShadowsWithMaps=_,n.numLightProbes=v,y.directionalLength=l,y.pointLength=c,y.spotLength=u,y.rectAreaLength=h,y.hemiLength=d,y.numDirectionalShadows=p,y.numPointShadows=f,y.numSpotShadows=m,y.numSpotMaps=g,y.numLightProbes=v,n.version=Sl++)},setupView:function(e,t){let i=0,s=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=n.directional[i];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),i++}else if(t.isSpotLight){const e=n.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=n.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(t.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=n.point[s];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s++}else if(t.isHemisphereLight){const e=n.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:n}}function Tl(e){const t=new El(e),i=[],n=[],r={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,i.length=0,n.length=0},state:r,setupLights:function(){t.setup(i)},setupLightsView:function(e){t.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function Ml(e){let t=new WeakMap;return{get:function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(i);let o;return void 0===r?(o=new Tl(e),t.set(i,[o])):n>=r.length?(o=new Tl(e),r.push(o)):o=r[n],o},dispose:function(){t=new WeakMap}}}class Il extends ao{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Bl extends ao{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Rl(e,t,i){let n=new oa;const r=new sn,o=new sn,a=new In,s=new Il({depthPacking:3201}),l=new Bl,c={},u=i.maxTextureSize,h={[ke]:1,[Le]:0,[De]:2},d=new Vo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new So;f.setAttribute("position",new po(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new No(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let _=this.type;function v(i,n){const o=t.update(m);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,p.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new Rn(r.x,r.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,o,d,m,null),p.uniforms.shadow_pass.value=i.mapPass.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,o,p,m,null)}function y(t,i,n,r){let o=null;const a=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===n.isPointLight?l:s,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=o.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=o.clone(),n[t]=r,i.addEventListener("dispose",b)),o=r}return o.visible=i.visible,o.wireframe=i.wireframe,o.side=3===r?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:h[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial&&(e.properties.get(o).light=n),o}function A(i,r,o,a,s){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===s)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);const n=t.update(i),l=i.material;if(Array.isArray(l)){const t=n.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=y(i,h,a,s);i.onBeforeShadow(e,i,r,o,n,t,u),e.renderBufferDirect(o,null,n,t,i,u),i.onAfterShadow(e,i,r,o,n,t,u)}}}else if(l.visible){const t=y(i,l,a,s);i.onBeforeShadow(e,i,r,o,n,t,null),e.renderBufferDirect(o,null,n,t,i,null),i.onAfterShadow(e,i,r,o,n,t,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)A(l[e],r,o,a,s)}function b(e){e.target.removeEventListener("dispose",b);for(const t in c){const i=c[t],n=e.target.uuid;n in i&&(i[n].dispose(),delete i[n])}}this.render=function(t,i,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=3!==_&&3===this.type,f=3===_&&3!==this.type;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),o.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/h.x),r.x=o.x*h.x,c.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/h.y),r.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===p||!0===f){const e=3!==this.type?{minFilter:_t,magFilter:_t}:{};null!==c.map&&c.map.dispose(),c.map=new Rn(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),c.updateMatrices(l,e),n=c.getFrustum(),A(i,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,s),c.needsUpdate=!1}_=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const Pl={[et]:1,[it]:6,[rt]:7,[nt]:5,[tt]:0,[at]:2,[st]:4,[ot]:3};function kl(e){const t=new function(){let t=!1;const i=new In;let n=null;const r=new In(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),i.set(t,n,o,a),!1===r.equals(i)&&(e.clearColor(t,n,o,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},i=new function(){let t=!1,i=!1,n=null,r=null,o=null;return{setReversed:function(e){i=e},setTest:function(t){t?U(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i&&(t=Pl[t]),r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){o!==t&&(e.clearDepth(t),o=t)},reset:function(){t=!1,n=null,r=null,o=null}}},n=new function(){let t=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(i){t||(i?U(e.STENCIL_TEST):z(e.STENCIL_TEST))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,a){n===t&&r===i&&o===a||(e.stencilFunc(t,i,a),n=t,r=i,o=a)},setOp:function(t,i,n){a===t&&s===i&&l===n||(e.stencilOp(t,i,n),a=t,s=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,o=null,a=null,s=null,l=null,c=null}}},r=new WeakMap,o=new WeakMap;let a={},s={},l=new WeakMap,c=[],u=null,h=!1,d=null,p=null,f=null,m=null,g=null,_=null,v=null,y=new no(0,0,0),A=0,b=!1,x=null,w=null,S=null,C=null,E=null;const T=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let M=!1,I=0;const B=e.getParameter(e.VERSION);-1!==B.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(B)[1]),M=I>=1):-1!==B.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),M=I>=2);let R=null,P={};const k=e.getParameter(e.SCISSOR_BOX),L=e.getParameter(e.VIEWPORT),D=(new In).fromArray(k),N=(new In).fromArray(L);function O(t,i,n,r){const o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<n;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(i,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(i+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}const F={};function U(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function z(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}F[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1),t.setClear(0,0,0,1),i.setClear(1),n.setClear(0),U(e.DEPTH_TEST),i.setFunc(3),Q(!1),j(1),U(e.CULL_FACE),V(0);const H={[Ne]:e.FUNC_ADD,[Oe]:e.FUNC_SUBTRACT,[Fe]:e.FUNC_REVERSE_SUBTRACT};H[103]=e.MIN,H[104]=e.MAX;const G={[Ue]:e.ZERO,[ze]:e.ONE,[He]:e.SRC_COLOR,[Ve]:e.SRC_ALPHA,[Xe]:e.SRC_ALPHA_SATURATE,[We]:e.DST_COLOR,[je]:e.DST_ALPHA,[Ge]:e.ONE_MINUS_SRC_COLOR,[Qe]:e.ONE_MINUS_SRC_ALPHA,[$e]:e.ONE_MINUS_DST_COLOR,[qe]:e.ONE_MINUS_DST_ALPHA,[Ye]:e.CONSTANT_COLOR,[Ke]:e.ONE_MINUS_CONSTANT_COLOR,[Ze]:e.CONSTANT_ALPHA,[Je]:e.ONE_MINUS_CONSTANT_ALPHA};function V(t,i,n,r,o,a,s,l,c,u){if(0!==t){if(!1===h&&(U(e.BLEND),h=!0),5===t)o=o||i,a=a||n,s=s||r,i===p&&o===g||(e.blendEquationSeparate(H[i],H[o]),p=i,g=o),n===f&&r===m&&a===_&&s===v||(e.blendFuncSeparate(G[n],G[r],G[a],G[s]),f=n,m=r,_=a,v=s),!1!==l.equals(y)&&c===A||(e.blendColor(l.r,l.g,l.b,c),y.copy(l),A=c),d=t,b=!1;else if(t!==d||u!==b){if(p===Ne&&g===Ne||(e.blendEquation(e.FUNC_ADD),p=Ne,g=Ne),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,_=null,v=null,y.set(0,0,0),A=0,d=t,b=u}}else!0===h&&(z(e.BLEND),h=!1)}function Q(t){x!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),x=t)}function j(t){0!==t?(U(e.CULL_FACE),t!==w&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),w=t}function q(t,i,n){t?(U(e.POLYGON_OFFSET_FILL),C===i&&E===n||(e.polygonOffset(i,n),C=i,E=n)):z(e.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:i,stencil:n},enable:U,disable:z,bindFramebuffer:function(t,i){return s[t]!==i&&(e.bindFramebuffer(t,i),s[t]=i,t===e.DRAW_FRAMEBUFFER&&(s[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(s[e.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(t,i){let n=c,r=!1;if(t){n=l.get(i),void 0===n&&(n=[],l.set(i,n));const o=t.textures;if(n.length!==o.length||n[0]!==e.COLOR_ATTACHMENT0){for(let t=0,i=o.length;t<i;t++)n[t]=e.COLOR_ATTACHMENT0+t;n.length=o.length,r=!0}}else n[0]!==e.BACK&&(n[0]=e.BACK,r=!0);r&&e.drawBuffers(n)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:V,setMaterial:function(r,o){2===r.side?z(e.CULL_FACE):U(e.CULL_FACE);let a=1===r.side;o&&(a=!a),Q(a),1===r.blending&&!1===r.transparent?V(0):V(r.blending,r.blendEquation,r.blendSrc,r.blendDst,r.blendEquationAlpha,r.blendSrcAlpha,r.blendDstAlpha,r.blendColor,r.blendAlpha,r.premultipliedAlpha),i.setFunc(r.depthFunc),i.setTest(r.depthTest),i.setMask(r.depthWrite),t.setMask(r.colorWrite);const s=r.stencilWrite;n.setTest(s),s&&(n.setMask(r.stencilWriteMask),n.setFunc(r.stencilFunc,r.stencilRef,r.stencilFuncMask),n.setOp(r.stencilFail,r.stencilZFail,r.stencilZPass)),q(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),!0===r.alphaToCoverage?U(e.SAMPLE_ALPHA_TO_COVERAGE):z(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Q,setCullFace:j,setLineWidth:function(t){t!==S&&(M&&e.lineWidth(t),S=t)},setPolygonOffset:q,setScissorTest:function(t){t?U(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+T-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===R?e.TEXTURE0+T-1:R);let r=P[n];void 0===r&&(r={type:void 0,texture:void 0},P[n]=r),r.type===t&&r.texture===i||(R!==n&&(e.activeTexture(n),R=n),e.bindTexture(t,i||F[t]),r.type=t,r.texture=i)},unbindTexture:function(){const t=P[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,i){let n=o.get(i);void 0===n&&(n=new WeakMap,o.set(i,n));let r=n.get(t);void 0===r&&(r=e.getUniformBlockIndex(i,t.name),n.set(t,r))},uniformBlockBinding:function(t,i){const n=o.get(i).get(t);r.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),r.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),a={},R=null,P={},s={},l=new WeakMap,c=[],u=null,h=!1,d=null,p=null,f=null,m=null,g=null,_=null,v=null,y=new no(0,0,0),A=0,b=!1,x=null,w=null,S=null,C=null,E=null,D.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),t.reset(),i.reset(),n.reset()}}}function Ll(e,t,i,n){const r=function(e){switch(e){case wt:case St:return{byteLength:1,components:1};case Et:case Ct:case Bt:return{byteLength:2,components:1};case Rt:case Pt:return{byteLength:2,components:4};case Mt:case Tt:case It:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(n);switch(i){case 1021:case 1024:return e*t;case 1025:return e*t*2;case Ot:case Ft:return e*t/r.components*r.byteLength;case Ut:case zt:return e*t*2/r.components*r.byteLength;case 1022:return e*t*3/r.components*r.byteLength;case Lt:case Ht:return e*t*4/r.components*r.byteLength;case Gt:case Vt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Qt:case jt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Wt:case Xt:return Math.max(e,16)*Math.max(t,8)/4;case qt:case $t:return Math.max(e,8)*Math.max(t,8)/2;case Yt:case Kt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Zt:case Jt:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ei:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case ti:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case ii:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case ni:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case ri:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case oi:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case ai:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case si:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case li:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case ci:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case ui:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case hi:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case di:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case pi:case fi:case mi:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case gi:return Math.ceil(e/4)*Math.ceil(t/4)*8;case _i:case vi:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function Dl(e,t,i,n,r,o,a){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new sn,u=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return p?new OffscreenCanvas(e,t):hn("canvas")}function m(e,t,i){let n=1;const r=z(e);if((r.width>i||r.height>i)&&(n=i/Math.max(r.width,r.height)),n<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const i=Math.floor(n*r.width),o=Math.floor(n*r.height);void 0===h&&(h=f(i,o));const a=t?f(i,o):h;return a.width=i,a.height=o,a.getContext("2d").drawImage(e,0,0,i,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+i+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function g(e){return e.generateMipmaps&&e.minFilter!==_t&&e.minFilter!==At}function _(t){e.generateMipmap(t)}function v(i,n,r,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let s=n;if(n===e.RED&&(r===e.FLOAT&&(s=e.R32F),r===e.HALF_FLOAT&&(s=e.R16F),r===e.UNSIGNED_BYTE&&(s=e.R8)),n===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.R8UI),r===e.UNSIGNED_SHORT&&(s=e.R16UI),r===e.UNSIGNED_INT&&(s=e.R32UI),r===e.BYTE&&(s=e.R8I),r===e.SHORT&&(s=e.R16I),r===e.INT&&(s=e.R32I)),n===e.RG&&(r===e.FLOAT&&(s=e.RG32F),r===e.HALF_FLOAT&&(s=e.RG16F),r===e.UNSIGNED_BYTE&&(s=e.RG8)),n===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RG8UI),r===e.UNSIGNED_SHORT&&(s=e.RG16UI),r===e.UNSIGNED_INT&&(s=e.RG32UI),r===e.BYTE&&(s=e.RG8I),r===e.SHORT&&(s=e.RG16I),r===e.INT&&(s=e.RG32I)),n===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGB8UI),r===e.UNSIGNED_SHORT&&(s=e.RGB16UI),r===e.UNSIGNED_INT&&(s=e.RGB32UI),r===e.BYTE&&(s=e.RGB8I),r===e.SHORT&&(s=e.RGB16I),r===e.INT&&(s=e.RGB32I)),n===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),r===e.UNSIGNED_INT&&(s=e.RGBA32UI),r===e.BYTE&&(s=e.RGBA8I),r===e.SHORT&&(s=e.RGBA16I),r===e.INT&&(s=e.RGBA32I)),n===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),n===e.RGBA){const t=a?Ri:yn.getTransfer(o);r===e.FLOAT&&(s=e.RGBA32F),r===e.HALF_FLOAT&&(s=e.RGBA16F),r===e.UNSIGNED_BYTE&&(s=t===Pi?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function y(t,i){let n;return t?null===i||i===Mt||i===kt?n=e.DEPTH24_STENCIL8:i===It?n=e.DEPTH32F_STENCIL8:i===Et&&(n=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===i||i===Mt||i===kt?n=e.DEPTH_COMPONENT24:i===It?n=e.DEPTH_COMPONENT32F:i===Et&&(n=e.DEPTH_COMPONENT16),n}function A(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==_t&&e.minFilter!==At?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function b(e){const t=e.target;t.removeEventListener("dispose",b),function(e){const t=n.get(e);if(void 0===t.__webglInit)return;const i=e.source,r=d.get(i);if(r){const n=r[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&w(e),0===Object.keys(r).length&&d.delete(i)}n.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function x(t){const i=t.target;i.removeEventListener("dispose",x),function(t){const i=n.get(t);if(t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let n=0;n<6;n++){if(Array.isArray(i.__webglFramebuffer[n]))for(let t=0;t<i.__webglFramebuffer[n].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[n][t]);else e.deleteFramebuffer(i.__webglFramebuffer[n]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[n])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}const r=t.textures;for(let o=0,s=r.length;o<s;o++){const t=n.get(r[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),n.remove(r[o])}n.remove(t)}(i)}function w(t){const i=n.get(t);e.deleteTexture(i.__webglTexture);const r=t.source;delete d.get(r)[i.__cacheKey],a.memory.textures--}let S=0;function C(t,r){const o=n.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void R(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}const E={[ft]:e.REPEAT,[mt]:e.CLAMP_TO_EDGE,[gt]:e.MIRRORED_REPEAT},T={[_t]:e.NEAREST,[vt]:e.NEAREST_MIPMAP_NEAREST,[yt]:e.NEAREST_MIPMAP_LINEAR,[At]:e.LINEAR,[bt]:e.LINEAR_MIPMAP_NEAREST,[xt]:e.LINEAR_MIPMAP_LINEAR},M={[Ni]:e.NEVER,[Vi]:e.ALWAYS,[Oi]:e.LESS,[Ui]:e.LEQUAL,[Fi]:e.EQUAL,[Gi]:e.GEQUAL,[zi]:e.GREATER,[Hi]:e.NOTEQUAL};function I(i,o){if(o.type!==It||!1!==t.has("OES_texture_float_linear")||o.magFilter!==At&&o.magFilter!==bt&&o.magFilter!==yt&&o.magFilter!==xt&&o.minFilter!==At&&o.minFilter!==bt&&o.minFilter!==yt&&o.minFilter!==xt||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(i,e.TEXTURE_WRAP_S,E[o.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,E[o.wrapT]),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,E[o.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,T[o.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,T[o.minFilter]),o.compareFunction&&(e.texParameteri(i,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(i,e.TEXTURE_COMPARE_FUNC,M[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===_t)return;if(o.minFilter!==yt&&o.minFilter!==xt)return;if(o.type===It&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||n.get(o).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy}}}function B(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",b));const r=i.source;let o=d.get(r);void 0===o&&(o={},d.set(r,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(i);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,n=!0),o[s].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&w(i)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return n}function R(t,a,s){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=B(t,a),u=a.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=n.get(u);if(u.version!==h.__version||!0===c){i.activeTexture(e.TEXTURE0+s);const t=yn.getPrimaries(yn.workingColorSpace),n=a.colorSpace===Ei?null:yn.getPrimaries(a.colorSpace),d=a.colorSpace===Ei||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(a.image,!1,r.maxTextureSize);p=U(a,p);const f=o.convert(a.format,a.colorSpace),b=o.convert(a.type);let x,w=v(a.internalFormat,f,b,a.colorSpace,a.isVideoTexture);I(l,a);const S=a.mipmaps,C=!0!==a.isVideoTexture,E=void 0===h.__version||!0===c,T=u.dataReady,M=A(a,p);if(a.isDepthTexture)w=y(a.format===Nt,a.type),E&&(C?i.texStorage2D(e.TEXTURE_2D,1,w,p.width,p.height):i.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,b,null));else if(a.isDataTexture)if(S.length>0){C&&E&&i.texStorage2D(e.TEXTURE_2D,M,w,S[0].width,S[0].height);for(let t=0,n=S.length;t<n;t++)x=S[t],C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):i.texImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,f,b,x.data);a.generateMipmaps=!1}else C?(E&&i.texStorage2D(e.TEXTURE_2D,M,w,p.width,p.height),T&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,f,b,p.data)):i.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,b,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&E&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,w,S[0].width,S[0].height,p.depth);for(let t=0,n=S.length;t<n;t++)if(x=S[t],a.format!==Lt)if(null!==f)if(C){if(T)if(a.layerUpdates.size>0){const n=Ll(x.width,x.height,a.format,a.type);for(const r of a.layerUpdates){const o=x.data.subarray(r*n/x.data.BYTES_PER_ELEMENT,(r+1)*n/x.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,x.width,x.height,1,f,o,0,0)}a.clearLayerUpdates()}else i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,p.depth,f,x.data,0,0)}else i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,x.width,x.height,p.depth,0,x.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?T&&i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,p.depth,f,b,x.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,w,x.width,x.height,p.depth,0,f,b,x.data)}else{C&&E&&i.texStorage2D(e.TEXTURE_2D,M,w,S[0].width,S[0].height);for(let t=0,n=S.length;t<n;t++)x=S[t],a.format!==Lt?null!==f?C?T&&i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,x.data):i.compressedTexImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):i.texImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,f,b,x.data)}else if(a.isDataArrayTexture)if(C){if(E&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,w,p.width,p.height,p.depth),T)if(a.layerUpdates.size>0){const t=Ll(p.width,p.height,a.format,a.type);for(const n of a.layerUpdates){const r=p.data.subarray(n*t/p.data.BYTES_PER_ELEMENT,(n+1)*t/p.data.BYTES_PER_ELEMENT);i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,n,p.width,p.height,1,f,b,r)}a.clearLayerUpdates()}else i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,b,p.data)}else i.texImage3D(e.TEXTURE_2D_ARRAY,0,w,p.width,p.height,p.depth,0,f,b,p.data);else if(a.isData3DTexture)C?(E&&i.texStorage3D(e.TEXTURE_3D,M,w,p.width,p.height,p.depth),T&&i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,b,p.data)):i.texImage3D(e.TEXTURE_3D,0,w,p.width,p.height,p.depth,0,f,b,p.data);else if(a.isFramebufferTexture){if(E)if(C)i.texStorage2D(e.TEXTURE_2D,M,w,p.width,p.height);else{let t=p.width,n=p.height;for(let r=0;r<M;r++)i.texImage2D(e.TEXTURE_2D,r,w,t,n,0,f,b,null),t>>=1,n>>=1}}else if(S.length>0){if(C&&E){const t=z(S[0]);i.texStorage2D(e.TEXTURE_2D,M,w,t.width,t.height)}for(let t=0,n=S.length;t<n;t++)x=S[t],C?T&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,f,b,x):i.texImage2D(e.TEXTURE_2D,t,w,f,b,x);a.generateMipmaps=!1}else if(C){if(E){const t=z(p);i.texStorage2D(e.TEXTURE_2D,M,w,t.width,t.height)}T&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,f,b,p)}else i.texImage2D(e.TEXTURE_2D,0,w,f,b,p);g(a)&&_(l),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function P(t,r,a,l,c,u){const h=o.convert(a.format,a.colorSpace),d=o.convert(a.type),p=v(a.internalFormat,h,d,a.colorSpace);if(!n.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>u),n=Math.max(1,r.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?i.texImage3D(c,u,p,t,n,r.depth,0,h,d,null):i.texImage2D(c,u,p,t,n,0,h,d,null)}i.bindFramebuffer(e.FRAMEBUFFER,t),F(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,n.get(a).__webglTexture,0,O(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,n.get(a).__webglTexture,u),i.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t,i,n){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer){const r=i.depthTexture,o=r&&r.isDepthTexture?r.type:null,a=y(i.stencilBuffer,o),l=i.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=O(i);F(i)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,i.width,i.height):n?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,a,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=i.textures;for(let r=0;r<t.length;r++){const a=t[r],l=o.convert(a.format,a.colorSpace),c=o.convert(a.type),u=v(a.internalFormat,l,c,a.colorSpace),h=O(i);n&&!1===F(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,i.width,i.height):F(i)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,u,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function L(t){const r=n.get(t),o=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),C(r.depthTexture,0);const o=n.get(r.depthTexture).__webglTexture,a=O(r);if(r.depthTexture.format===Dt)F(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==Nt)throw new Error("Unknown depthTexture format");F(r)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)if(i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[n]),void 0===r.__webglDepthbuffer[n])r.__webglDepthbuffer[n]=e.createRenderbuffer(),k(r.__webglDepthbuffer[n],t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=r.__webglDepthbuffer[n];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,o)}}else if(i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),k(r.__webglDepthbuffer,t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,n=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,n)}i.bindFramebuffer(e.FRAMEBUFFER,null)}const D=[],N=[];function O(e){return Math.min(r.maxSamples,e.samples)}function F(e){const i=n.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function U(e,t){const i=e.colorSpace,n=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||i!==Mi&&i!==Ei&&(yn.getTransfer(i)===Pi?n===Lt&&r===wt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),t}function z(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=S;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=C,this.setTexture2DArray=function(t,r){const o=n.get(t);t.version>0&&o.__version!==t.version?R(o,t,r):i.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const o=n.get(t);t.version>0&&o.__version!==t.version?R(o,t,r):i.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,a){const s=n.get(t);t.version>0&&s.__version!==t.version?function(t,a,s){if(6!==a.image.length)return;const l=B(t,a),c=a.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=n.get(c);if(c.version!==u.__version||!0===l){i.activeTexture(e.TEXTURE0+s);const t=yn.getPrimaries(yn.workingColorSpace),n=a.colorSpace===Ei?null:yn.getPrimaries(a.colorSpace),h=a.colorSpace===Ei||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?a.image[e].image:a.image[e]:m(a.image[e],!0,r.maxCubemapSize),f[e]=U(a,f[e]);const y=f[0],b=o.convert(a.format,a.colorSpace),x=o.convert(a.type),w=v(a.internalFormat,b,x,a.colorSpace),S=!0!==a.isVideoTexture,C=void 0===u.__version||!0===l,E=c.dataReady;let T,M=A(a,y);if(I(e.TEXTURE_CUBE_MAP,a),d){S&&C&&i.texStorage2D(e.TEXTURE_CUBE_MAP,M,w,y.width,y.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let n=0;n<T.length;n++){const r=T[n];a.format!==Lt?null!==b?S?E&&i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,r.width,r.height,b,r.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,w,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,r.width,r.height,b,x,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,w,r.width,r.height,0,b,x,r.data)}}}else{if(T=a.mipmaps,S&&C){T.length>0&&M++;const t=z(f[0]);i.texStorage2D(e.TEXTURE_CUBE_MAP,M,w,t.width,t.height)}for(let t=0;t<6;t++)if(p){S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,b,x,f[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,f[t].width,f[t].height,0,b,x,f[t].data);for(let n=0;n<T.length;n++){const r=T[n].image[t].image;S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,r.width,r.height,b,x,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,w,r.width,r.height,0,b,x,r.data)}}else{S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,x,f[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,b,x,f[t]);for(let n=0;n<T.length;n++){const r=T[n];S?E&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,b,x,r.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,w,b,x,r.image[t])}}}g(a)&&_(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(s,t,a):i.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,i,r){const o=n.get(t);void 0!==i&&P(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&L(t)},this.setupRenderTarget=function(t){const r=t.texture,s=n.get(t),l=n.get(r);t.addEventListener("dispose",x);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,a.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let i=0;i<r.mipmaps.length;i++)s.__webglFramebuffer[t][i]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,i=c.length;t<i;t++){const i=n.get(c[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===F(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let i=0;i<c.length;i++){const n=c[i];s.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[i]);const r=o.convert(n.format,n.colorSpace),a=o.convert(n.type),l=v(n.internalFormat,r,a,n.colorSpace,!0===t.isXRRenderTarget),u=O(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,s.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),k(s.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){i.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),I(e.TEXTURE_CUBE_MAP,r);for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)P(s.__webglFramebuffer[i][n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n);else P(s.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);g(r)&&_(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(h){for(let r=0,o=c.length;r<o;r++){const o=c[r],a=n.get(o);i.bindTexture(e.TEXTURE_2D,a.__webglTexture),I(e.TEXTURE_2D,o),P(s.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),g(o)&&_(e.TEXTURE_2D)}i.unbindTexture()}else{let n=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(n=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),i.bindTexture(n,l.__webglTexture),I(n,r),r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)P(s.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,n,i);else P(s.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,n,0);g(r)&&_(n),i.unbindTexture()}t.depthBuffer&&L(t)},this.updateRenderTargetMipmap=function(t){const r=t.textures;for(let o=0,a=r.length;o<a;o++){const a=r[o];if(g(a)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=n.get(a).__webglTexture;i.bindTexture(r,o),_(r),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===F(t)){const r=t.textures,o=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=n.get(t),h=r.length>1;if(h)for(let t=0;t<r.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let i=0;i<r.length;i++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[i]);const t=n.get(r[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),!0===l&&(D.length=0,N.length=0,D.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&!1===t.resolveDepthBuffer&&(D.push(c),N.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,N)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,D))}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=n.get(r[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[i])}},this.setupDepthRenderbuffer=L,this.setupFrameBufferTexture=P,this.useMultisampledRTT=F}function Nl(e,t){return{convert:function(i){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=yn.getTransfer(r);if(i===wt)return e.UNSIGNED_BYTE;if(i===Rt)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Pt)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===i)return e.UNSIGNED_INT_5_9_9_9_REV;if(i===St)return e.BYTE;if(i===Ct)return e.SHORT;if(i===Et)return e.UNSIGNED_SHORT;if(i===Tt)return e.INT;if(i===Mt)return e.UNSIGNED_INT;if(i===It)return e.FLOAT;if(i===Bt)return e.HALF_FLOAT;if(1021===i)return e.ALPHA;if(1022===i)return e.RGB;if(i===Lt)return e.RGBA;if(1024===i)return e.LUMINANCE;if(1025===i)return e.LUMINANCE_ALPHA;if(i===Dt)return e.DEPTH_COMPONENT;if(i===Nt)return e.DEPTH_STENCIL;if(i===Ot)return e.RED;if(i===Ft)return e.RED_INTEGER;if(i===Ut)return e.RG;if(i===zt)return e.RG_INTEGER;if(i===Ht)return e.RGBA_INTEGER;if(i===Gt||i===Vt||i===Qt||i===jt)if(o===Pi){if(n=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===n)return null;if(i===Gt)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Vt)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Qt)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===jt)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(i===Gt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Vt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Qt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===jt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===qt||i===Wt||i===$t||i===Xt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(i===qt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Wt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===$t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Xt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Yt||i===Kt||i===Zt){if(n=t.get("WEBGL_compressed_texture_etc"),null===n)return null;if(i===Yt||i===Kt)return o===Pi?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(i===Zt)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(i===Jt||i===ei||i===ti||i===ii||i===ni||i===ri||i===oi||i===ai||i===si||i===li||i===ci||i===ui||i===hi||i===di){if(n=t.get("WEBGL_compressed_texture_astc"),null===n)return null;if(i===Jt)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ei)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===ti)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===ii)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ni)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ri)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===oi)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ai)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===si)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===li)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ci)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===ui)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hi)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===di)return o===Pi?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===pi||i===fi||i===mi){if(n=t.get("EXT_texture_compression_bptc"),null===n)return null;if(i===pi)return o===Pi?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===fi)return n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===mi)return n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===i||i===gi||i===_i||i===vi){if(n=t.get("EXT_texture_compression_rgtc"),null===n)return null;if(i===pi)return n.COMPRESSED_RED_RGTC1_EXT;if(i===gi)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_i)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===vi)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===kt?e.UNSIGNED_INT_24_8:void 0!==e[i]?e[i]:null}}}class Ol extends $o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Fl extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ul={type:"move"};class zl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Dn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Dn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Dn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Dn),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,i),n=this._getHandJoint(l,o);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=e.radius),n.visible=null!==e}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ul)))}return null!==a&&(a.visible=null!==n),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Fl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Hl{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const n=new Mn;e.properties.get(n).__webglTexture=t.texture,t.depthNear==i.depthNear&&t.depthFar==i.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Vo({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new No(new la(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Gl extends $i{constructor(e,t){super();const i=this;let n=null,r=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=new Hl,m=t.getContextAttributes();let g=null,_=null;const v=[],y=[],A=new sn;let b=null;const x=new $o;x.layers.enable(1),x.viewport=new In;const w=new $o;w.layers.enable(2),w.viewport=new In;const S=[x,w],C=new Ol;C.layers.enable(1),C.layers.enable(2);let E=null,T=null;function M(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const i=v[t];void 0!==i&&(i.update(e.inputSource,e.frame,l||o),i.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){n.removeEventListener("select",M),n.removeEventListener("selectstart",M),n.removeEventListener("selectend",M),n.removeEventListener("squeeze",M),n.removeEventListener("squeezestart",M),n.removeEventListener("squeezeend",M),n.removeEventListener("end",I),n.removeEventListener("inputsourceschange",B);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,T=null,f.reset(),e.setRenderTarget(g),d=null,h=null,u=null,n=null,_=null,D.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=y.indexOf(i);n>=0&&(y[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let n=y.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(i),n=e;break}if(null===y[e]){y[e]=i,n=e;break}}if(-1===n)break}const r=v[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new zl,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new zl,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new zl,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(c){if(n=c,null!==n){if(g=e.getRenderTarget(),n.addEventListener("select",M),n.addEventListener("selectstart",M),n.addEventListener("selectend",M),n.addEventListener("squeeze",M),n.addEventListener("squeezestart",M),n.addEventListener("squeezeend",M),n.addEventListener("end",I),n.addEventListener("inputsourceschange",B),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(A),void 0===n.renderState.layers){const i={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Rn(d.framebufferWidth,d.framebufferHeight,{format:Lt,type:wt,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let i=null,o=null,a=null;m.depth&&(a=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=m.stencil?Nt:Dt,o=m.stencil?kt:Mt);const s={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(n,t),h=u.createProjectionLayer(s),n.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Rn(h.textureWidth,h.textureHeight,{format:Lt,type:wt,depthTexture:new Qa(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await n.requestReferenceSpace(a),D.setContext(n),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const R=new Dn,P=new Dn;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;let t=e.near,i=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(i=f.depthFar)),C.near=w.near=x.near=t,C.far=w.far=x.far=i,E===C.near&&T===C.far||(n.updateRenderState({depthNear:C.near,depthFar:C.far}),E=C.near,T=C.far);const r=e.parent,o=C.cameras;k(C,r);for(let n=0;n<o.length;n++)k(o[n],r);var a,s,l;2===o.length?function(e,t,i){R.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(i.matrixWorld);const n=R.distanceTo(P),r=t.projectionMatrix.elements,o=i.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=n/(-u+h),m=f*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+f,i=s+f,r=d-m,o=p+(n-m),u=l*s/i*t,h=c*s/i*t;e.projectionMatrix.makePerspective(r,o,u,h,t,i),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,x,w):C.projectionMatrix.copy(x.projectionMatrix),a=e,s=C,null===(l=r)?a.matrix.copy(s.matrixWorld):(a.matrix.copy(l.matrixWorld),a.matrix.invert(),a.matrix.multiply(s.matrixWorld)),a.matrix.decompose(a.position,a.quaternion,a.scale),a.updateMatrixWorld(!0),a.projectionMatrix.copy(s.projectionMatrix),a.projectionMatrixInverse.copy(s.projectionMatrixInverse),a.isPerspectiveCamera&&(a.fov=2*Zi*Math.atan(1/a.projectionMatrix.elements[5]),a.zoom=1)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(C)};let L=null;const D=new aa;D.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let i=!1;t.length!==C.cameras.length&&(C.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let o=null;if(null!==d)o=d.getViewport(r);else{const t=u.getViewSubImage(h,r);o=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(_))}let a=S[n];void 0===a&&(a=new $o,a.layers.enable(n),a.viewport=new In,S[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===n&&(C.matrix.copy(a.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===i&&C.cameras.push(a)}const r=n.enabledFeatures;if(r&&r.includes("depth-sensing")){const i=u.getDepthInformation(t[0]);i&&i.isValid&&i.texture&&f.init(e,i,n.renderState)}}for(let e=0;e<v.length;e++){const t=y[e],i=v[e];null!==t&&void 0!==i&&i.update(t,r,l||o)}L&&L(t,r),r.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}const Vl=new br,Ql=new hr;function jl(e,t){function i(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function n(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map,i(n.map,e.mapTransform)),n.alphaMap&&(e.alphaMap.value=n.alphaMap,i(n.alphaMap,e.alphaMapTransform)),n.bumpMap&&(e.bumpMap.value=n.bumpMap,i(n.bumpMap,e.bumpMapTransform),e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,i(n.normalMap,e.normalMapTransform),e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,i(n.displacementMap,e.displacementMapTransform),e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap,i(n.emissiveMap,e.emissiveMapTransform)),n.specularMap&&(e.specularMap.value=n.specularMap,i(n.specularMap,e.specularMapTransform)),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const r=t.get(n),o=r.envMap,a=r.envMapRotation;o&&(e.envMap.value=o,Vl.copy(a),Vl.x*=-1,Vl.y*=-1,Vl.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(Vl.y*=-1,Vl.z*=-1),e.envMapRotation.value.setFromMatrix4(Ql.makeRotationFromEuler(Vl)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity,i(n.lightMap,e.lightMapTransform)),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity,i(n.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,Ho(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,r,o,a,s){var l,c;r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),l=e,(c=r).gradientMap&&(l.gradientMap.value=c.gradientMap)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,i(t.metalnessMap,e.metalnessMapTransform)),e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,i(t.roughnessMap,e.roughnessMapTransform)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,i(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,i(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,i(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,i(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,i(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate())),t.dispersion>0&&(e.dispersion.value=t.dispersion),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,i(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,i(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,i(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,i(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,i(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,i(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,i(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,s)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,i){const n=t.get(i).light;e.referencePosition.value.setFromMatrixPosition(n.matrixWorld),e.nearDistance.value=n.shadow.camera.near,e.farDistance.value=n.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map,i(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function ql(e,t,i,n){let r={},o={},a=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,i,n){const r=e.value,o=t+"_"+i;if(void 0===n[o])return n[o]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const e=n[o];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return n[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const i=t.target;i.removeEventListener("dispose",u);const n=a.indexOf(i.__bindingPointIndex);a.splice(n,1),e.deleteBuffer(r[i.id]),delete r[i.id],delete o[i.id]}return{bind:function(e,t){const i=t.program;n.uniformBlockBinding(e,i)},update:function(i,h){let d=r[i.id];void 0===d&&(function(e){const t=e.uniforms;let i=0;for(let r=0,o=t.length;r<o;r++){const e=Array.isArray(t[r])?t[r]:[t[r]];for(let t=0,n=e.length;t<n;t++){const n=e[t],r=Array.isArray(n.value)?n.value:[n.value];for(let e=0,t=r.length;e<t;e++){const t=c(r[e]),o=i%16,a=o%t.boundary,s=o+a;i+=a,0!==s&&16-s<t.storage&&(i+=16-s),n.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),n.__offset=i,i+=t.storage}}}const n=i%16;n>0&&(i+=16-n),e.__size=i,e.__cache={}}(i),d=function(t){const i=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const n=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,n),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,i,n),n}(i),r[i.id]=d,i.addEventListener("dispose",u));const p=h.program;n.updateUBOMapping(i,p);const f=t.render.frame;o[i.id]!==f&&(function(t){const i=r[t.id],n=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let r=0,a=n.length;r<a;r++){const t=Array.isArray(n[r])?n[r]:[n[r]];for(let i=0,n=t.length;i<n;i++){const n=t[i];if(!0===l(n,r,i,o)){const t=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let o=0;o<i.length;o++){const a=i[o],s=c(a);"number"==typeof a||"boolean"==typeof a?(n.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+r,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=0,n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=0,n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=0):(a.toArray(n.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),o[i.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},o={}}}}class Wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=dn(),context:i=null,depth:n=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==i){if("undefined"!=typeof WebGLRenderingContext&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const d=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ti,this.toneMapping=0,this.toneMappingExposure=1;const v=this;let y=!1,A=0,b=0,x=null,w=-1,S=null;const C=new In,E=new In;let T=null;const M=new no(0);let I=0,B=t.width,R=t.height,P=1,k=null,L=null;const D=new In(0,0,B,R),N=new In(0,0,B,R);let O=!1;const F=new oa;let U=!1,z=!1;const H=new hr,G=new hr,V=new Dn,Q=new In,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let q=!1;function W(){return null===x?P:1}let $,X,Y,K,Z,J,ee,te,ie,ne,re,oe,ae,se,le,ce,ue,he,de,pe,fe,me,ge,_e,ve=i;function ye(e,i){return t.getContext(e,i)}try{const e={alpha:!0,depth:n,stencil:r,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Pe}`),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Se,!1),null===ve){const t="webgl2";if(ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ae(){$=new Fa(ve),$.init(),me=new Nl(ve,$),X=new va(ve,$,e,me),Y=new kl(ve),X.reverseDepthBuffer&&Y.buffers.depth.setReversed(!0),K=new Ha(ve),Z=new vl,J=new Dl(ve,$,Y,Z,X,me,K),ee=new Aa(v),te=new Oa(v),ie=new sa(ve),ge=new ga(ve,ie),ne=new Ua(ve,ie,K,ge),re=new Va(ve,ne,ie,K),de=new Ga(ve,X,J),ce=new ya(Z),oe=new _l(v,ee,te,$,X,ge,ce),ae=new jl(v,Z),se=new xl,le=new Ml($),he=new ma(v,ee,te,Y,re,h,s),ue=new Rl(v,re,X),_e=new ql(ve,K,X,Y),pe=new _a(ve,$,K),fe=new za(ve,$,K),K.programs=oe.programs,v.capabilities=X,v.extensions=$,v.properties=Z,v.renderLists=se,v.shadowMap=ue,v.state=Y,v.info=K}Ae();const be=new Gl(v,ve);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=K.autoReset,t=ue.enabled,i=ue.autoUpdate,n=ue.needsUpdate,r=ue.type;Ae(),K.autoReset=e,ue.enabled=t,ue.autoUpdate=i,ue.needsUpdate=n,ue.type=r}function Se(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;var i;t.removeEventListener("dispose",Ce),function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){oe.releaseProgram(e)})),e.isShaderMaterial&&oe.releaseShaderCache(e))}(i=t),Z.remove(i)}function Ee(e,t,i){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Oe(e,t,i),e.side=0,e.needsUpdate=!0,Oe(e,t,i),e.side=2):Oe(e,t,i)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(B,R,!1))},this.getSize=function(e){return e.set(B,R)},this.setSize=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(B=e,R=i,t.width=Math.floor(e*P),t.height=Math.floor(i*P),!0===n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(B*P,R*P).floor()},this.setDrawingBufferSize=function(e,i,n){B=e,R=i,P=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,i,n){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,i,n),Y.viewport(C.copy(D).multiplyScalar(P).round())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,i,n){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,i,n),Y.scissor(E.copy(N).multiplyScalar(P).round())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){Y.setScissorTest(O=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==x){const t=x.texture.format;e=t===Ht||t===zt||t===Ft}if(e){const e=x.texture.type,t=e===wt||e===Mt||e===Et||e===kt||e===Rt||e===Pt,i=he.getClearColor(),n=he.getClearAlpha(),r=i.r,o=i.g,a=i.b;t?(d[0]=r,d[1]=o,d[2]=a,d[3]=n,ve.clearBufferuiv(ve.COLOR,0,d)):(p[0]=r,p[1]=o,p[2]=a,p[3]=n,ve.clearBufferiv(ve.COLOR,0,p))}else i|=ve.COLOR_BUFFER_BIT}e&&(i|=ve.DEPTH_BUFFER_BIT,ve.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),t&&(i|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Se,!1),se.dispose(),le.dispose(),Z.dispose(),ee.dispose(),te.dispose(),re.dispose(),ge.dispose(),_e.dispose(),oe.dispose(),be.dispose(),be.removeEventListener("sessionstart",Me),be.removeEventListener("sessionend",Ie),Be.stop()},this.renderBufferDirect=function(e,t,i,n,r,o){null===t&&(t=j);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,i,n,r){!0!==t.isScene&&(t=j),J.resetTextureUnits();const o=t.fog,a=n.isMeshStandardMaterial?t.environment:null,s=null===x?v.outputColorSpace:!0===x.isXRRenderTarget?x.texture.colorSpace:Mi,l=(n.isMeshStandardMaterial?te:ee).get(n.envMap||a),c=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,u=!!i.attributes.tangent&&(!!n.normalMap||n.anisotropy>0),h=!!i.morphAttributes.position,d=!!i.morphAttributes.normal,p=!!i.morphAttributes.color;let f=0;n.toneMapped&&(null!==x&&!0!==x.isXRRenderTarget||(f=v.toneMapping));const g=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,_=void 0!==g?g.length:0,y=Z.get(n),A=m.state.lights;if(!0===U&&(!0===z||e!==S)){const t=e===S&&n.id===w;ce.setState(n,e,t)}let b=!1;n.version===y.__version?y.needsLights&&y.lightsStateVersion!==A.state.version||y.outputColorSpace!==s||r.isBatchedMesh&&!1===y.batching?b=!0:r.isBatchedMesh||!0!==y.batching?r.isBatchedMesh&&!0===y.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===y.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===y.instancing?b=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?b=!0:r.isSkinnedMesh||!0!==y.skinning?r.isInstancedMesh&&!0===y.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===y.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===y.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===y.instancingMorph&&null!==r.morphTexture||y.envMap!==l||!0===n.fog&&y.fog!==o?b=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ce.numPlanes&&y.numIntersection===ce.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||y.morphTargetsCount!==_)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,y.__version=n.version);let C=y.currentProgram;!0===b&&(C=Oe(n,t,r));let E=!1,T=!1,M=!1;const I=C.getUniforms(),B=y.uniforms;if(Y.useProgram(C.program)&&(E=!0,T=!0,M=!0),n.id!==w&&(w=n.id,T=!0),E||S!==e){X.reverseDepthBuffer?(H.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(H),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(H),I.setValue(ve,"projectionMatrix",H)):I.setValue(ve,"projectionMatrix",e.projectionMatrix),I.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=I.map.cameraPosition;void 0!==t&&t.setValue(ve,V.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&I.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&I.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),S!==e&&(S=e,T=!0,M=!0)}if(r.isSkinnedMesh){I.setOptional(ve,r,"bindMatrix"),I.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),I.setValue(ve,"boneTexture",e.boneTexture,J))}r.isBatchedMesh&&(I.setOptional(ve,r,"batchingTexture"),I.setValue(ve,"batchingTexture",r._matricesTexture,J),I.setOptional(ve,r,"batchingIdTexture"),I.setValue(ve,"batchingIdTexture",r._indirectTexture,J),I.setOptional(ve,r,"batchingColorTexture"),null!==r._colorsTexture&&I.setValue(ve,"batchingColorTexture",r._colorsTexture,J));const k=i.morphAttributes;var L,D;if(void 0===k.position&&void 0===k.normal&&void 0===k.color||de.update(r,i,C),(T||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,I.setValue(ve,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(B.envMap.value=l,B.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),n.isMeshStandardMaterial&&null===n.envMap&&null!==t.environment&&(B.envMapIntensity.value=t.environmentIntensity),T&&(I.setValue(ve,"toneMappingExposure",v.toneMappingExposure),y.needsLights&&(D=M,(L=B).ambientLightColor.needsUpdate=D,L.lightProbe.needsUpdate=D,L.directionalLights.needsUpdate=D,L.directionalLightShadows.needsUpdate=D,L.pointLights.needsUpdate=D,L.pointLightShadows.needsUpdate=D,L.spotLights.needsUpdate=D,L.spotLightShadows.needsUpdate=D,L.rectAreaLights.needsUpdate=D,L.hemisphereLights.needsUpdate=D),o&&!0===n.fog&&ae.refreshFogUniforms(B,o),ae.refreshMaterialUniforms(B,n,P,R,m.state.transmissionRenderTarget[e.id]),Xs.upload(ve,Fe(y),B,J)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Xs.upload(ve,Fe(y),B,J),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&I.setValue(ve,"center",r.center),I.setValue(ve,"modelViewMatrix",r.modelViewMatrix),I.setValue(ve,"normalMatrix",r.normalMatrix),I.setValue(ve,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++){const i=e[t];_e.update(i,C),_e.bind(i,C)}}return C}(e,t,i,n,r);Y.setMaterial(n,a);let l=i.index,c=1;if(!0===n.wireframe){if(l=ne.getWireframeAttribute(i),void 0===l)return;c=2}const u=i.drawRange,h=i.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),p=Math.min(p,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let g;ge.setup(r,n,s,i,l);let _=pe;if(null!==l&&(g=ie.get(l),_=fe,_.setIndex(g)),r.isMesh)!0===n.wireframe?(Y.setLineWidth(n.wireframeLinewidth*W()),_.setMode(ve.LINES)):_.setMode(ve.TRIANGLES);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*W()),r.isLineSegments?_.setMode(ve.LINES):r.isLineLoop?_.setMode(ve.LINE_LOOP):_.setMode(ve.LINE_STRIP)}else r.isPoints?_.setMode(ve.POINTS):r.isSprite&&_.setMode(ve.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)_.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if($.get("WEBGL_multi_draw"))_.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,i=r._multiDrawCount,o=l?ie.get(l).bytesPerElement:1,a=Z.get(n).currentProgram.getUniforms();for(let n=0;n<i;n++)a.setValue(ve,"_gl_DrawID",n),_.render(e[n]/o,t[n])}else if(r.isInstancedMesh)_.renderInstances(d,f,r.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);_.renderInstances(d,f,t)}else _.render(d,f)},this.compile=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===i&&(i=e),m=le.get(i),m.init(t),_.push(m),i.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==i&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights();const n=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Ee(o,i,e),n.add(o)}else Ee(t,i,e),n.add(t)})),_.pop(),m=null,n},this.compileAsync=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.compile(e,t,i);return new Promise((t=>{function i(){n.forEach((function(e){Z.get(e).currentProgram.isReady()&&n.delete(e)})),0!==n.size?setTimeout(i,10):t(e)}null!==$.get("KHR_parallel_shader_compile")?i():setTimeout(i,10)}))};let Te=null;function Me(){Be.stop()}function Ie(){Be.start()}const Be=new aa;function Re(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){n&&Q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=re.update(e),r=e.material;r.visible&&f.push(e,t,r,i,Q.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=re.update(e),r=e.material;if(n&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Q.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),Q.copy(t.boundingSphere.center)),Q.applyMatrix4(e.matrixWorld).applyMatrix4(G)),Array.isArray(r)){const n=t.groups;for(let o=0,a=n.length;o<a;o++){const a=n[o],s=r[a.materialIndex];s&&s.visible&&f.push(e,t,s,i,Q.z,a)}}else r.visible&&f.push(e,t,r,i,Q.z,null)}const r=e.children;for(let o=0,a=r.length;o<a;o++)Re(r[o],t,i,n)}function ke(e,t,i,n){const r=e.opaque,o=e.transmissive,a=e.transparent;m.setupLightsView(i),!0===U&&ce.setGlobalState(v.clippingPlanes,i),n&&Y.viewport(C.copy(n)),r.length>0&&De(r,t,i),o.length>0&&De(o,t,i),a.length>0&&De(a,t,i),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Le(e,t,i,n){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[n.id]&&(m.state.transmissionRenderTarget[n.id]=new Rn(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")||$.has("EXT_color_buffer_float")?Bt:wt,minFilter:xt,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:yn.workingColorSpace}));const o=m.state.transmissionRenderTarget[n.id],a=n.viewport||C;o.setSize(a.z,a.w);const s=v.getRenderTarget();v.setRenderTarget(o),v.getClearColor(M),I=v.getClearAlpha(),I<1&&v.setClearColor(16777215,.5),v.clear(),q&&he.render(i);const l=v.toneMapping;v.toneMapping=0;const c=n.viewport;if(void 0!==n.viewport&&(n.viewport=void 0),m.setupLightsView(n),!0===U&&ce.setGlobalState(v.clippingPlanes,n),De(e,i,n),J.updateMultisampleRenderTarget(o),J.updateRenderTargetMipmap(o),!1===$.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=o.material,c=o.group;if(2===l.side&&a.layers.test(n.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Ne(a,i,n,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(J.updateMultisampleRenderTarget(o),J.updateRenderTargetMipmap(o))}v.setRenderTarget(s),v.setClearColor(M,I),void 0!==c&&(n.viewport=c),v.toneMapping=l}function De(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=o.object,s=o.geometry,l=null===n?o.material:n,c=o.group;a.layers.test(i.layers)&&Ne(a,t,i,s,l,c)}}function Ne(e,t,i,n,r,o){e.onBeforeRender(v,t,i,n,r,o),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(v,t,i,n,e,o),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,v.renderBufferDirect(i,t,n,r,e,o),r.side=0,r.needsUpdate=!0,v.renderBufferDirect(i,t,n,r,e,o),r.side=2):v.renderBufferDirect(i,t,n,r,e,o),e.onAfterRender(v,t,i,n,r,o)}function Oe(e,t,i){!0!==t.isScene&&(t=j);const n=Z.get(e),r=m.state.lights,o=m.state.shadowsArray,a=r.state.version,s=oe.getParameters(e,r.state,o,t,i),l=oe.getProgramCacheKey(s);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||n.environment),n.envMapRotation=null!==n.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ce),c=new Map,n.programs=c);let u=c.get(l);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===a)return Ue(e,s),u}else s.uniforms=oe.getUniforms(e),e.onBeforeCompile(s,v),u=oe.acquireProgram(s,l),c.set(l,u),n.uniforms=s.uniforms;const h=n.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ce.uniform),Ue(e,s),n.needsLights=(d=e).isMeshLambertMaterial||d.isMeshToonMaterial||d.isMeshPhongMaterial||d.isMeshStandardMaterial||d.isShadowMaterial||d.isShaderMaterial&&!0===d.lights,n.lightsStateVersion=a,n.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),n.currentProgram=u,n.uniformsList=null,u;var d}function Fe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Xs.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ue(e,t){const i=Z.get(e);i.outputColorSpace=t.outputColorSpace,i.batching=t.batching,i.batchingColor=t.batchingColor,i.instancing=t.instancing,i.instancingColor=t.instancingColor,i.instancingMorph=t.instancingMorph,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}Be.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!=typeof self&&Be.setContext(self),this.setAnimationLoop=function(e){Te=e,be.setAnimationLoop(e),null===e?Be.stop():Be.start()},be.addEventListener("sessionstart",Me),be.addEventListener("sessionend",Ie),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,x),m=le.get(e,_.length),m.init(t),_.push(m),G.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(G),z=this.localClippingEnabled,U=ce.init(this.clippingPlanes,z),f=se.get(e,g.length),f.init(),g.push(f),!0===be.enabled&&!0===be.isPresenting){const e=v.xr.getDepthSensingMesh();null!==e&&Re(e,t,-1/0,v.sortObjects)}Re(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(k,L),q=!1===be.enabled||!1===be.isPresenting||!1===be.hasDepthSensing(),q&&he.addToRenderList(f,e),this.info.render.frame++,!0===U&&ce.beginShadows();const i=m.state.shadowsArray;ue.render(i,e,t),!0===U&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const n=f.opaque,r=f.transmissive;if(m.setupLights(),t.isArrayCamera){const i=t.cameras;if(r.length>0)for(let t=0,o=i.length;t<o;t++)Le(n,r,e,i[t]);q&&he.render(e);for(let t=0,n=i.length;t<n;t++){const n=i[t];ke(f,e,n,n.viewport)}}else r.length>0&&Le(n,r,e,t),q&&he.render(e),ke(f,e,t);null!==x&&(J.updateMultisampleRenderTarget(x),J.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(v,e,t),ge.resetDefaultState(),w=-1,S=null,_.pop(),_.length>0?(m=_[_.length-1],!0===U&&ce.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,i){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=i;const n=Z.get(e);n.__hasExternalTextures=!0,n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const i=Z.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,A=t,b=i;let n=!0,r=null,o=!1,a=!1;if(e){const s=Z.get(e);if(void 0!==s.__useDefaultFramebuffer)Y.bindFramebuffer(ve.FRAMEBUFFER,null),n=!1;else if(void 0===s.__webglFramebuffer)J.setupRenderTarget(e);else if(s.__hasExternalTextures)J.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&Z.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][i]:c[t],o=!0):r=e.samples>0&&!1===J.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[i]:c,C.copy(e.viewport),E.copy(e.scissor),T=e.scissorTest}else C.copy(D).multiplyScalar(P).floor(),E.copy(N).multiplyScalar(P).floor(),T=O;if(Y.bindFramebuffer(ve.FRAMEBUFFER,r)&&n&&Y.drawBuffers(e,r),Y.viewport(C),Y.scissor(E),Y.setScissorTest(T),o){const n=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)}else if(a){const n=Z.get(e.texture),r=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,n.__webglTexture,i||0,r)}w=-1},this.readRenderTargetPixels=function(e,t,i,n,r,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(ve.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(!X.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&ve.readPixels(t,i,n,r,me.convert(s),me.convert(l),o)}finally{const e=null!==x?Z.get(x).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,i,n,r,o,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){const a=e.texture,u=a.format,h=a.type;if(!X.textureFormatReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(h))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r){Y.bindFramebuffer(ve.FRAMEBUFFER,s);const e=ve.createBuffer();ve.bindBuffer(ve.PIXEL_PACK_BUFFER,e),ve.bufferData(ve.PIXEL_PACK_BUFFER,o.byteLength,ve.STREAM_READ),ve.readPixels(t,i,n,r,me.convert(u),me.convert(h),0);const a=null!==x?Z.get(x).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,a);const d=ve.fenceSync(ve.SYNC_GPU_COMMANDS_COMPLETE,0);return ve.flush(),await(l=ve,c=d,new Promise((function(e,t){setTimeout((function i(){switch(l.clientWaitSync(c,l.SYNC_FLUSH_COMMANDS_BIT,0)){case l.WAIT_FAILED:t();break;case l.TIMEOUT_EXPIRED:setTimeout(i,4);break;default:e()}}),4)}))),ve.bindBuffer(ve.PIXEL_PACK_BUFFER,e),ve.getBufferSubData(ve.PIXEL_PACK_BUFFER,0,o),ve.deleteBuffer(e),ve.deleteSync(d),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}var l,c},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(fn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const n=Math.pow(2,-i),r=Math.floor(e.image.width*n),o=Math.floor(e.image.height*n),a=null!==t?t.x:0,s=null!==t?t.y:0;J.setTexture2D(e,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,i,0,0,a,s,r,o),Y.unbindTexture()},this.copyTextureToTexture=function(e,t){let i,n,r,o,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(fn("WebGLRenderer: copyTextureToTexture function signature has changed."),c=arguments[0]||null,e=arguments[1],t=arguments[2],u=arguments[3]||0,l=null),null!==l?(i=l.max.x-l.min.x,n=l.max.y-l.min.y,r=l.min.x,o=l.min.y):(i=e.image.width,n=e.image.height,r=0,o=0),null!==c?(a=c.x,s=c.y):(a=0,s=0);const h=me.convert(t.format),d=me.convert(t.type);J.setTexture2D(t,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const p=ve.getParameter(ve.UNPACK_ROW_LENGTH),f=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),m=ve.getParameter(ve.UNPACK_SKIP_PIXELS),g=ve.getParameter(ve.UNPACK_SKIP_ROWS),_=ve.getParameter(ve.UNPACK_SKIP_IMAGES),v=e.isCompressedTexture?e.mipmaps[u]:e.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,v.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,v.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,r),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,o),e.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,u,a,s,i,n,h,d,v.data):e.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,u,a,s,v.width,v.height,h,v.data):ve.texSubImage2D(ve.TEXTURE_2D,u,a,s,i,n,h,d,v),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,p),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,f),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,m),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,g),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,_),0===u&&t.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let i,n,r,o,a,s,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(fn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),h=arguments[0]||null,d=arguments[1]||null,e=arguments[2],t=arguments[3],p=arguments[4]||0);const f=e.isCompressedTexture?e.mipmaps[p]:e.image;null!==h?(i=h.max.x-h.min.x,n=h.max.y-h.min.y,r=h.max.z-h.min.z,o=h.min.x,a=h.min.y,s=h.min.z):(i=f.width,n=f.height,r=f.depth,o=0,a=0,s=0),null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const m=me.convert(t.format),g=me.convert(t.type);let _;if(t.isData3DTexture)J.setTexture3D(t,0),_=ve.TEXTURE_3D;else{if(!t.isDataArrayTexture&&!t.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(t,0),_=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const v=ve.getParameter(ve.UNPACK_ROW_LENGTH),y=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),A=ve.getParameter(ve.UNPACK_SKIP_PIXELS),b=ve.getParameter(ve.UNPACK_SKIP_ROWS),x=ve.getParameter(ve.UNPACK_SKIP_IMAGES);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,f.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,f.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,o),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,a),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,s),e.isDataTexture||e.isData3DTexture?ve.texSubImage3D(_,p,l,c,u,i,n,r,m,g,f.data):t.isCompressedArrayTexture?ve.compressedTexSubImage3D(_,p,l,c,u,i,n,r,m,f.data):ve.texSubImage3D(_,p,l,c,u,i,n,r,m,g,f),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,v),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,y),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,A),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,b),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,x),0===p&&t.generateMipmaps&&ve.generateMipmap(_),Y.unbindTexture()},this.initRenderTarget=function(e){void 0===Z.get(e).__webglFramebuffer&&J.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?J.setTextureCube(e,0):e.isData3DTexture?J.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?J.setTexture2DArray(e,0):J.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){A=0,b=0,x=null,Y.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Ii?"display-p3":"srgb",t.unpackColorSpace=yn.workingColorSpace===Bi?"display-p3":"srgb"}}class $l extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new br,this.environmentIntensity=1,this.environmentRotation=new br,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Xl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Qi,this.updateRanges=[],this.version=0,this.uuid=Ji()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ji()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ji()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yl=new Dn;class Kl{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Yl.fromBufferAttribute(this,t),Yl.applyMatrix4(e),this.setXYZ(t,Yl.x,Yl.y,Yl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Yl.fromBufferAttribute(this,t),Yl.applyNormalMatrix(e),this.setXYZ(t,Yl.x,Yl.y,Yl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Yl.fromBufferAttribute(this,t),Yl.transformDirection(e),this.setXYZ(t,Yl.x,Yl.y,Yl.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=rn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=rn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=rn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=rn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=rn(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),n=on(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),n=on(n,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new po(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Kl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Zl extends ao{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new no(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jl;const ec=new Dn,tc=new Dn,ic=new Dn,nc=new sn,rc=new sn,oc=new hr,ac=new Dn,sc=new Dn,lc=new Dn,cc=new sn,uc=new sn,hc=new sn;class dc extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zl;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Jl){Jl=new So;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Xl(e,5);Jl.setIndex([0,1,2,0,2,3]),Jl.setAttribute("position",new Kl(t,3,0,!1)),Jl.setAttribute("uv",new Kl(t,2,3,!1))}this.geometry=Jl,this.material=e,this.center=new sn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tc.setFromMatrixScale(this.matrixWorld),oc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ic.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&tc.multiplyScalar(-ic.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const o=this.center;pc(ac.set(-.5,-.5,0),ic,o,tc,n,r),pc(sc.set(.5,-.5,0),ic,o,tc,n,r),pc(lc.set(.5,.5,0),ic,o,tc,n,r),cc.set(0,0),uc.set(1,0),hc.set(1,1);let a=e.ray.intersectTriangle(ac,sc,lc,!1,ec);if(null===a&&(pc(sc.set(-.5,.5,0),ic,o,tc,n,r),uc.set(0,1),a=e.ray.intersectTriangle(ac,lc,sc,!1,ec),null===a))return;const s=e.ray.origin.distanceTo(ec);s<e.near||s>e.far||t.push({distance:s,point:ec.clone(),uv:Zr.getInterpolation(ec,ac,sc,lc,cc,uc,hc,new sn),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function pc(e,t,i,n,r,o){nc.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(rc.x=o*nc.x-r*nc.y,rc.y=r*nc.x+o*nc.y):rc.copy(nc),e.copy(t),e.x+=rc.x,e.y+=rc.y,e.applyMatrix4(oc)}const fc=new Dn,mc=new In,gc=new In,_c=new Dn,vc=new hr,yc=new Dn,Ac=new ir,bc=new hr,xc=new ur;class wc extends No{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=lt,this.bindMatrix=new hr,this.bindMatrixInverse=new hr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Fn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,yc),this.boundingBox.expandByPoint(yc)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ir),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,yc),this.boundingSphere.expandByPoint(yc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,n=this.matrixWorld;void 0!==i&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ac.copy(this.boundingSphere),Ac.applyMatrix4(n),!1!==e.ray.intersectsSphere(Ac)&&(bc.copy(n).invert(),xc.copy(e.ray).applyMatrix4(bc),null!==this.boundingBox&&!1===xc.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,xc)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new In,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===lt?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;mc.fromBufferAttribute(n.attributes.skinIndex,e),gc.fromBufferAttribute(n.attributes.skinWeight,e),fc.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=gc.getComponent(r);if(0!==e){const n=mc.getComponent(r);vc.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(_c.copy(fc).applyMatrix4(vc),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Sc extends Fr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Cc extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Ec=new hr,Tc=new hr;class Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Ji(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new hr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new hr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const n=e[r]?e[r].matrixWorld:Tc;Ec.multiplyMatrices(n,t[r]),Ec.toArray(i,16*r)}null!==n&&(n.needsUpdate=!0)}clone(){return new Mc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Cc(t,e,e,Lt,It);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let r=t[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new Sc),this.bones.push(r),this.boneInverses.push((new hr).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.bones.push(r.uuid);const o=i[n];e.boneInverses.push(o.toArray())}return e}}class Ic extends po{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bc=new hr,Rc=new hr,Pc=[],kc=new Fn,Lc=new hr,Dc=new No,Nc=new ir;class Oc extends No{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ic(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<i;n++)this.setMatrixAt(n,Lc)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Fn),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bc),kc.copy(e.boundingBox).applyMatrix4(Bc),this.boundingBox.union(kc)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new ir),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bc),Nc.copy(e.boundingSphere).applyMatrix4(Bc),this.boundingSphere.union(Nc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,n=this.morphTexture.source.data.data,r=e*(i.length+1)+1;for(let o=0;o<i.length;o++)i[o]=n[r+o]}raycast(e,t){const i=this.matrixWorld,n=this.count;if(Dc.geometry=this.geometry,Dc.material=this.material,void 0!==Dc.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Nc.copy(this.boundingSphere),Nc.applyMatrix4(i),!1!==e.ray.intersectsSphere(Nc)))for(let r=0;r<n;r++){this.getMatrixAt(r,Bc),Rc.multiplyMatrices(i,Bc),Dc.matrixWorld=Rc,Dc.raycast(e,Pc);for(let e=0,i=Pc.length;e<i;e++){const i=Pc[e];i.instanceId=r,i.object=this,t.push(i)}Pc.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ic(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,n=i.length+1;null===this.morphTexture&&(this.morphTexture=new Cc(new Float32Array(n*this.count),n,this.count,Ot,It));const r=this.morphTexture.source.data.data;let o=0;for(let l=0;l<i.length;l++)o+=i[l];const a=this.geometry.morphTargetsRelative?1:1-o,s=n*e;r[s]=a,r.set(i,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class Fc extends ao{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new no(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Uc=new Dn,zc=new Dn,Hc=new hr,Gc=new ur,Vc=new ir,Qc=new Dn,jc=new Dn;class qc extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new So,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fc;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)Uc.fromBufferAttribute(t,e-1),zc.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=Uc.distanceTo(zc);e.setAttribute("lineDistance",new go(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Vc.copy(i.boundingSphere),Vc.applyMatrix4(n),Vc.radius+=r,!1===e.ray.intersectsSphere(Vc))return;Hc.copy(n).invert(),Gc.copy(e.ray).applyMatrix4(Hc);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=this.isLineSegments?2:1,c=i.index,u=i.attributes.position;if(null!==c){const i=Math.max(0,o.start),n=Math.min(c.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=c.getX(r),n=c.getX(r+1),o=Wc(this,e,Gc,s,i,n);o&&t.push(o)}if(this.isLineLoop){const r=c.getX(n-1),o=c.getX(i),a=Wc(this,e,Gc,s,r,o);a&&t.push(a)}}else{const i=Math.max(0,o.start),n=Math.min(u.count,o.start+o.count);for(let r=i,o=n-1;r<o;r+=l){const i=Wc(this,e,Gc,s,r,r+1);i&&t.push(i)}if(this.isLineLoop){const r=Wc(this,e,Gc,s,n-1,i);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Wc(e,t,i,n,r,o){const a=e.geometry.attributes.position;if(Uc.fromBufferAttribute(a,r),zc.fromBufferAttribute(a,o),i.distanceSqToSegment(Uc,zc,Qc,jc)>n)return;Qc.applyMatrix4(e.matrixWorld);const s=t.ray.origin.distanceTo(Qc);return s<t.near||s>t.far?void 0:{distance:s,point:jc.clone().applyMatrix4(e.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:e}}const $c=new Dn,Xc=new Dn;class Yc extends qc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)$c.fromBufferAttribute(t,e),Xc.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+$c.distanceTo(Xc);e.setAttribute("lineDistance",new go(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Kc extends qc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Zc extends ao{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new no(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Jc=new hr,eu=new ur,tu=new ir,iu=new Dn;class nu extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new So,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zc;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),tu.copy(i.boundingSphere),tu.applyMatrix4(n),tu.radius+=r,!1===e.ray.intersectsSphere(tu))return;Jc.copy(n).invert(),eu.copy(e.ray).applyMatrix4(Jc);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=i.index,c=i.attributes.position;if(null!==l)for(let u=Math.max(0,o.start),h=Math.min(l.count,o.start+o.count);u<h;u++){const i=l.getX(u);iu.fromBufferAttribute(c,i),ru(iu,i,s,n,e,t,this)}else for(let u=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);u<h;u++)iu.fromBufferAttribute(c,u),ru(iu,u,s,n,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function ru(e,t,i,n,r,o,a){const s=eu.distanceSqToPoint(e);if(s<i){const i=new Dn;eu.closestPointToPoint(e,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:i,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class ou extends Mn{constructor(e,t,i,n,r,o,a,s,l){super(e,t,i,n,r,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:At,this.magFilter=void 0!==r?r:At,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;0=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class au extends Mn{constructor(e,t,i,n,r,o,a,s,l,c,u,h){super(null,o,a,s,l,c,n,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class su extends au{constructor(e,t,i,n,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=mt,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lu extends au{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ut),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class cu extends Mn{constructor(e,t,i,n,r,o,a,s,l){super(e,t,i,n,r,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class uu extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;n=Math.floor(n),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=i/2;let g=0;function _(i){const r=p,o=new sn,f=new Dn;let _=0;const v=!0===i?e:t,y=!0===i?1:-1;for(let e=1;e<=n;e++)u.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),p++;const A=p;for(let e=0;e<=n;e++){const t=e/n*s+a,i=Math.cos(t),r=Math.sin(t);f.x=v*r,f.y=m*y,f.z=v*i,u.push(f.x,f.y,f.z),h.push(0,y,0),o.x=.5*i+.5,o.y=.5*r*y+.5,d.push(o.x,o.y),p++}for(let e=0;e<n;e++){const t=r+e,n=A+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),_+=3}l.addGroup(g,_,!0===i?1:2),g+=_}!function(){const o=new Dn,_=new Dn;let v=0;const y=(t-e)/i;for(let l=0;l<=r;l++){const c=[],g=l/r,v=g*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,r=t*s+a,l=Math.sin(r),f=Math.cos(r);_.x=v*l,_.y=-g*i+m,_.z=v*f,u.push(_.x,_.y,_.z),o.set(l,y,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let i=0;i<n;i++)for(let n=0;n<r;n++){const r=f[n][i],o=f[n+1][i],a=f[n+1][i+1],s=f[n][i+1];e>0&&(c.push(r,o,s),v+=3),t>0&&(c.push(o,a,s),v+=3)}l.addGroup(g,v,0),g+=v}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new go(u,3)),this.setAttribute("normal",new go(h,3)),this.setAttribute("uv",new go(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hu extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Dn,h=new Dn,d=[],p=[],f=[],m=[];for(let g=0;g<=i;g++){const d=[],_=g/i;let v=0;0===g&&0===o?v=.5/t:g===i&&s===Math.PI&&(v=-.5/t);for(let i=0;i<=t;i++){const s=i/t;u.x=-e*Math.cos(n+s*r)*Math.sin(o+_*a),u.y=e*Math.cos(o+_*a),u.z=e*Math.sin(n+s*r)*Math.sin(o+_*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+v,1-_),d.push(l++)}c.push(d)}for(let g=0;g<i;g++)for(let e=0;e<t;e++){const t=c[g][e+1],n=c[g][e],r=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&d.push(t,n,a),(g!==i-1||s<Math.PI)&&d.push(n,r,a)}this.setIndex(d),this.setAttribute("position",new go(p,3)),this.setAttribute("normal",new go(f,3)),this.setAttribute("uv",new go(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class du extends ao{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new no(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new no(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new br,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pu extends du{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return en(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new no(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new no(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new no(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class fu extends Fc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mu(e,t,i){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function gu(e){const t=e.length,i=new Array(t);for(let n=0;n!==t;++n)i[n]=n;return i.sort((function(t,i){return e[t]-e[i]})),i}function _u(e,t,i){const n=e.length,r=new e.constructor(n);for(let o=0,a=0;a!==n;++o){const n=i[o]*t;for(let i=0;i!==t;++i)r[a++]=e[n+i]}return r}function vu(e,t,i,n){let r=1,o=e[0];for(;void 0!==o&&void 0===o[n];)o=e[r++];if(void 0===o)return;let a=o[n];if(void 0!==a)if(Array.isArray(a))do{a=o[n],void 0!==a&&(t.push(o.time),i.push.apply(i,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[n],void 0!==a&&(t.push(o.time),a.toArray(i,i.length)),o=e[r++]}while(void 0!==o);else do{a=o[n],void 0!==a&&(t.push(o.time),i.push(a)),o=e[r++]}while(void 0!==o)}class yu{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let o;i:{n:if(!(e<n)){for(let o=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=n,n=t[++i],e<n)break t}o=t.length;break i}if(e>=r)break e;{const a=t[1];e<a&&(i=2,r=a);for(let o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(n=r,r=t[--i-1],e>=r)break t}o=i,i=0}}for(;i<o;){const n=i+o>>>1;e<t[n]?o=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let o=0;o!==n;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Au extends yu{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wi,endingEnd:wi}}intervalChanged_(e,t,i){const n=this.parameterPositions;let r=e-2,o=e+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case Si:r=e,a=2*t-i;break;case Ci:r=n.length-2,a=t+n[r]-n[r+1];break;default:r=e,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case Si:o=e,s=2*i-t;break;case Ci:o=1,s=i+n[1]-n[0];break;default:o=e-1,s=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-i),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,_=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let A=0;A!==a;++A)r[A]=g*o[c+A]+_*o[l+A]+v*o[s+A]+y*o[u+A];return r}}class bu extends yu{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(i-t)/(n-t),u=1-c;for(let h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}class xu extends yu{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class wu{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mu(t,this.TimeBufferType),this.values=mu(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:mu(e.times,Array),values:mu(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new xu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Au(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ai:t=this.InterpolantFactoryMethodDiscrete;break;case bi:t=this.InterpolantFactoryMethodLinear;break;case xi:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ai;case this.InterpolantFactoryMethodLinear:return bi;case this.InterpolantFactoryMethodSmooth:return xi}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let r=0,o=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=i[s];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==n&&(a=n,ArrayBuffer.isView(a)&&!(a instanceof DataView)))for(let s=0,l=n.length;s!==l;++s){const t=n[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}var a;return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=this.getInterpolation()===xi,r=e.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(n)r=!0;else{const e=a*i,n=e-i,o=e+i;for(let a=0;a!==i;++a){const i=t[e+a];if(i!==t[n+a]||i!==t[o+a]){r=!0;break}}}if(r){if(a!==o){e[o]=e[a];const n=a*i,r=o*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*i,n=o*i,a=0;a!==i;++a)t[n+a]=t[e+a];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new this.constructor(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}wu.prototype.TimeBufferType=Float32Array,wu.prototype.ValueBufferType=Float32Array,wu.prototype.DefaultInterpolation=bi;class Su extends wu{constructor(e,t,i){super(e,t,i)}}Su.prototype.ValueTypeName="bool",Su.prototype.ValueBufferType=Array,Su.prototype.DefaultInterpolation=Ai,Su.prototype.InterpolantFactoryMethodLinear=void 0,Su.prototype.InterpolantFactoryMethodSmooth=void 0;class Cu extends wu{}Cu.prototype.ValueTypeName="color";class Eu extends wu{}Eu.prototype.ValueTypeName="number";class Tu extends yu{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(i-t)/(n-t);let l=e*a;for(let c=l+a;l!==c;l+=4)Ln.slerpFlat(r,0,o,l-a,o,l,s);return r}}class Mu extends wu{InterpolantFactoryMethodLinear(e){return new Tu(this.times,this.values,this.getValueSize(),e)}}Mu.prototype.ValueTypeName="quaternion",Mu.prototype.InterpolantFactoryMethodSmooth=void 0;class Iu extends wu{constructor(e,t,i){super(e,t,i)}}Iu.prototype.ValueTypeName="string",Iu.prototype.ValueBufferType=Array,Iu.prototype.DefaultInterpolation=Ai,Iu.prototype.InterpolantFactoryMethodLinear=void 0,Iu.prototype.InterpolantFactoryMethodSmooth=void 0;class Bu extends wu{}Bu.prototype.ValueTypeName="vector";class Ru{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Ji(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Pu(i[o]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(wu.toJSON(i[r]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const r=t.length,o=[];for(let a=0;a<r;a++){let e=[],s=[];e.push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);const l=gu(e);e=_u(e,1,l),s=_u(s,1,l),n||0!==e[0]||(e.push(r),s.push(s[0])),o.push(new Eu(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],i=t.name.match(r);if(i&&i.length>1){const e=i[1];let r=n[e];r||(n[e]=r=[]),r.push(t)}}const o=[];for(const a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,r){if(0!==i.length){const o=[],a=[];vu(i,o,a,n),0!==o.length&&r.push(new e(t,o,a))}},n=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let i;for(i=0;i<e.length;i++)if(e[i].morphTargets)for(let n=0;n<e[i].morphTargets.length;n++)t[e[i].morphTargets[n]]=-1;for(const r in t){const t=[],o=[];for(let n=0;n!==e[i].morphTargets.length;++n){const n=e[i];t.push(n.time),o.push(n.morphTarget===r?1:0)}n.push(new Eu(".morphTargetInfluence["+r+"]",t,o))}s=t.length*o}else{const r=".bones["+t[c].name+"]";i(Bu,r+".position",e,"pos",n),i(Mu,r+".quaternion",e,"rot",n),i(Bu,r+".scale",e,"scl",n)}}return 0===n.length?null:new this(r,s,n,a)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Pu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Eu;case"vector":case"vector2":case"vector3":case"vector4":return Bu;case"color":return Cu;case"quaternion":return Mu;case"bool":case"boolean":return Su;case"string":return Iu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];vu(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const ku={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Lu{constructor(e,t,i){const n=this;let r,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){s++,!1===o&&void 0!==n.onStart&&n.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,s),a===s&&(o=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Du=new Lu;class Nu{constructor(e){this.manager=void 0!==e?e:Du,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,r){i.load(e,n,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Nu.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ou={};class Fu extends Error{constructor(e,t){super(e),this.response=t}}class Uu extends Nu{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=ku.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==Ou[e])return void Ou[e].push({onLoad:t,onProgress:i,onError:n});Ou[e]=[],Ou[e].push({onLoad:t,onProgress:i,onError:n});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=Ou[e],n=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=r?parseInt(r):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){n.read().then((n=>{let{done:r,value:l}=n;if(r)e.close();else{s+=l.byteLength;const n=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new Fu(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{ku.add(e,t);const i=Ou[e];delete Ou[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{const i=Ou[e];if(void 0===i)throw this.manager.itemError(e),t;delete Ou[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zu extends Nu{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ku.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const a=hn("img");function s(){c(),ku.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Hu extends Nu{constructor(e){super(e)}load(e,t,i,n){const r=this,o=new Cc,a=new Uu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){let i;try{i=r.parse(e)}catch(e){if(void 0===n)return void console.error(e);n(e)}void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:mt,o.wrapT=void 0!==i.wrapT?i.wrapT:mt,o.magFilter=void 0!==i.magFilter?i.magFilter:At,o.minFilter=void 0!==i.minFilter?i.minFilter:At,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.colorSpace&&(o.colorSpace=i.colorSpace),void 0!==i.flipY&&(o.flipY=i.flipY),void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps,o.minFilter=xt),1===i.mipmapCount&&(o.minFilter=At),void 0!==i.generateMipmaps&&(o.generateMipmaps=i.generateMipmaps),o.needsUpdate=!0,t&&t(o,i)}),i,n),o}}class Gu extends Nu{constructor(e){super(e)}load(e,t,i,n){const r=new Mn,o=new zu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r}}class Vu extends Fr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new no(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const Qu=new hr,ju=new Dn,qu=new Dn;class Wu{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sn(512,512),this.map=null,this.mapPass=null,this.matrix=new hr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oa,this._frameExtents=new sn(1,1),this._viewportCount=1,this._viewports=[new In(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;ju.setFromMatrixPosition(e.matrixWorld),t.position.copy(ju),qu.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qu),t.updateMatrixWorld(),Qu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qu),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Qu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $u extends Wu{constructor(){super(new $o(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Zi*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Xu extends Vu{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.distance=i,this.angle=n,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new $u}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Yu=new hr,Ku=new Dn,Zu=new Dn;class Ju extends Wu{constructor(){super(new $o(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new sn(4,2),this._viewportCount=6,this._viewports=[new In(2,1,1,1),new In(0,1,1,1),new In(3,1,1,1),new In(1,1,1,1),new In(3,0,1,1),new In(1,0,1,1)],this._cubeDirections=[new Dn(1,0,0),new Dn(-1,0,0),new Dn(0,0,1),new Dn(0,0,-1),new Dn(0,1,0),new Dn(0,-1,0)],this._cubeUps=[new Dn(0,1,0),new Dn(0,1,0),new Dn(0,1,0),new Dn(0,1,0),new Dn(0,0,1),new Dn(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Ku.setFromMatrixPosition(e.matrixWorld),i.position.copy(Ku),Zu.copy(i.position),Zu.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Zu),i.updateMatrixWorld(),n.makeTranslation(-Ku.x,-Ku.y,-Ku.z),Yu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yu)}}class eh extends Vu{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Ju}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class th extends Wu{constructor(){super(new ba(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ih extends Vu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.shadow=new th}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class nh{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Dn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*n),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*n*1.092548),t.addScaledVector(o[5],n*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],i*r*1.092548),t.addScaledVector(o[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*n),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*n),t.addScaledVector(o[5],.858086*n*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*i*r),t.addScaledVector(o[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}class rh extends Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nh;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class oh{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ah extends Nu{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ku.get(e);if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then((i=>{t&&t(i),r.manager.itemEnd(e)})).catch((e=>{n&&n(e)})):(setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const s=fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(i){return ku.add(e,i),t&&t(i),r.manager.itemEnd(e),i})).catch((function(t){n&&n(t),ku.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)}));ku.add(e,s),r.manager.itemStart(e)}}class sh{constructor(e,t,i){let n,r,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==n;++e)i[r+e]=i[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(i[s]!==i[s+t]){a.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let r=i,o=n;r!==o;++r)t[r]=t[n+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,n){Ln.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){const o=this._workIndex*r;Ln.multiplyQuaternionsFlat(e,o,e,t,e,i),Ln.slerpFlat(e,t,e,t,e,o,n)}_lerp(e,t,i,n,r){const o=1-n;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*o+e[i+a]*n}}_lerpAdditive(e,t,i,n,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[i+o]*n}}}const lh="\\[\\]\\.:\\/",ch=new RegExp("["+lh+"]","g"),uh="[^"+lh+"]",hh="[^"+lh.replace("\\.","")+"]",dh=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",uh)+/(WCOD+)?/.source.replace("WCOD",hh)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uh)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uh)+"$"),ph=["material","materials","bones","map"];class fh{constructor(e,t,i){this.path=t,this.parsedPath=i||fh.parseTrackName(t),this.node=fh.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new fh.Composite(e,t,i):new fh(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ch,"")}static parseTrackName(e){const t=dh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==ph.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const o=i(r.children);if(o)return o}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=fh.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const o=e[n];if(void 0===o){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fh.Composite=class{constructor(e,t,i){const n=i||fh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},fh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},fh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},fh.prototype.GetterByBindingType=[fh.prototype._getValue_direct,fh.prototype._getValue_array,fh.prototype._getValue_arrayElement,fh.prototype._getValue_toArray],fh.prototype.SetterByBindingTypeAndVersioning=[[fh.prototype._setValue_direct,fh.prototype._setValue_direct_setNeedsUpdate,fh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fh.prototype._setValue_array,fh.prototype._setValue_array_setNeedsUpdate,fh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fh.prototype._setValue_arrayElement,fh.prototype._setValue_arrayElement_setNeedsUpdate,fh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fh.prototype._setValue_fromArray,fh.prototype._setValue_fromArray_setNeedsUpdate,fh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mh{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,o=r.length,a=new Array(o),s={endingStart:wi,endingEnd:wi};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,r=n/i,o=i/n;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(o),t[i].accumulateAdditive(a);else for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(o),t[i].accumulate(n,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const o=i===yi;if(0===e)return-1===r||!o||1&~r?n:t-n;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(o&&!(1&~r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=Si,n.endingEnd=Si):(n.endingStart=e?this.zeroSlopeAtStart?Si:wi:Ci,n.endingEnd=t?this.zeroSlopeAtEnd?Si:wi:Ci)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=i,this}}const gh=new Float32Array(1);class _h extends $i{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,o=e._propertyBindings,a=e._interpolants,s=i.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==r;++u){const e=n[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,r));continue}const n=t&&t._propertyBindings[u].binding.parsedPath;l=new sh(fh.create(i,r,n),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,r),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const e=t[i];0==--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let o=n[t];void 0===o&&(o={},n[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new bu(new Float32Array(2),new Float32Array(2),1,gh),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const n=t||this._root,r=n.uuid;let o="string"==typeof e?Ru.findByName(n,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new mh(this,o,t,i);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const i=t||this._root,n=i.uuid,r="string"==typeof e?Ru.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(n,e,r,o);const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const r=n._cacheIndex,o=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const r in i){const e=i[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const r in n){const e=n[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class vh{constructor(e){this.value=e}clone(){return new vh(void 0===this.value.clone?this.value:this.value.clone())}}const yh=new hr;class Ah{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new ur(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new xr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return yh.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(yh),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return xh(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(bh),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n=0,r=e.length;n<r;n++)xh(e[n],this,i,t);return i.sort(bh),i}}function bh(e,t){return e.distance-t.distance}function xh(e,t,i,n){let r=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,i)&&(r=!1),!0===r&&!0===n){const n=e.children;for(let e=0,r=n.length;e<r;e++)xh(n[e],t,i,!0)}}class wh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(en(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Sh=new Dn;let Ch,Eh;class Th extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dn(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dn(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===Ch&&(Ch=new So,Ch.setAttribute("position",new go([0,0,0,0,1,0],3)),Eh=new uu(0,.5,1,5,1),Eh.translate(0,-.5,0)),this.position.copy(t),this.line=new qc(Ch,new Fc({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new No(Eh,new so({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Sh.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Sh,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Pe}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Pe);const Mh=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,Ih=Mh&&null!=self.XRSession.prototype.requestHitTestSource,Bh=null!=self.ResizeObserver,Rh=null!=self.IntersectionObserver,Ph=Ih;(()=>{const e=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})();const kh=/android/i.test(navigator.userAgent),Lh=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Dh=/firefox/i.test(navigator.userAgent),Nh=/OculusBrowser/.test(navigator.userAgent),Oh=kh&&!Dh&&!Nh,Fh=Boolean(window.webkit&&window.webkit.messageHandlers),Uh=(()=>{if(Lh){if(Fh)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}}return!1})(),zh=e=>e&&"null"!==e?Gh(e):null,Hh=()=>{if(Ph)return;const e=[];throw Mh||e.push("WebXR Device API"),Ih||e.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${e.join(", ")}`)},Gh=e=>new URL(e,window.location.toString()).toString(),Vh=(e,t)=>{let i=null;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null!=i&&self.clearTimeout(i),i=self.setTimeout((()=>{i=null,e(...r)}),t)}},Qh=(e,t,i)=>Math.max(t,Math.min(i,e)),jh=(()=>{const e=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})();var qh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const Wh=Symbol("currentEnvironmentMap"),$h=Symbol("currentBackground"),Xh=Symbol("updateEnvironment"),Yh=Symbol("cancelEnvironmentUpdate"),Kh=ie`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`,Zh=ie`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`,Jh=ie`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`,ed=ie`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${Jh}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Zh}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${Kh}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,td=new WeakMap;function id(){let e,t;function i(e,t,i,n,r,o){const a=o.num_components(),s=i.num_points()*a,l=s*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(i,o,c,l,u);const h=new r(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:n,array:h,itemSize:a}}onmessage=function(n){const r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const n=r.buffer,o=r.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder;try{const e=function(e,t,n,r){const o=r.attributeIDs,a=r.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeArrayToMesh(n,n.byteLength,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeArrayToPointCloud(n,n.byteLength,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in o){const n=self[a[h]];let l,c;if(r.useUniqueIDs)c=o[h],l=t.GetAttributeByUniqueId(s,c);else{if(c=t.GetAttributeId(s,e[o[h]]),-1===c)continue;l=t.GetAttribute(s,c)}const d=i(e,t,s,h,n,l);"color"===h&&(d.vertexColorSpace=r.vertexColorSpace),u.attributes.push(d)}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,i){const n=3*i.num_faces(),r=4*n,o=e._malloc(r);t.GetTrianglesUInt32Array(i,r,o);const a=new Uint32Array(e.HEAPF32.buffer,o,n).slice();return e._free(o),{array:a,itemSize:1}}(e,t,s)),e.destroy(s),u}(t,a,new Int8Array(n),o),s=e.attributes.map((e=>e.array.buffer));e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},s)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(a)}}))}}}function nd(e,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(2===t||1===t){let i=e.getIndex();if(null===i){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}const n=i.count-2,r=[];if(2===t)for(let e=1;e<=n;e++)r.push(i.getX(0)),r.push(i.getX(e)),r.push(i.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(r.push(i.getX(e)),r.push(i.getX(e+1)),r.push(i.getX(e+2))):(r.push(i.getX(e+2)),r.push(i.getX(e+1)),r.push(i.getX(e)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class rd extends Nu{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new ud(e)})),this.register((function(e){return new hd(e)})),this.register((function(e){return new Ad(e)})),this.register((function(e){return new bd(e)})),this.register((function(e){return new xd(e)})),this.register((function(e){return new pd(e)})),this.register((function(e){return new fd(e)})),this.register((function(e){return new md(e)})),this.register((function(e){return new gd(e)})),this.register((function(e){return new cd(e)})),this.register((function(e){return new _d(e)})),this.register((function(e){return new dd(e)})),this.register((function(e){return new yd(e)})),this.register((function(e){return new vd(e)})),this.register((function(e){return new sd(e)})),this.register((function(e){return new wd(e)})),this.register((function(e){return new Sd(e)}))}load(e,t,i,n){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=oh.extractUrlBase(e);o=oh.resolveURL(t,this.path)}else o=oh.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){n?n(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},s=new Uu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){try{r.parse(i,o,(function(i){t(i),r.manager.itemEnd(e)}),a)}catch(e){a(e)}}),i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let r;const o={},a={},s=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(s.decode(new Uint8Array(e,0,4))===Cd){try{o[ad.KHR_BINARY_GLTF]=new Ed(e)}catch(e){return void(n&&n(e))}r=JSON.parse(o[ad.KHR_BINARY_GLTF].content)}else r=JSON.parse(s.decode(e));else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Xd(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const e=r.extensionsUsed[c],t=r.extensionsRequired||[];switch(e){case ad.KHR_MATERIALS_UNLIT:o[e]=new ld;break;case ad.KHR_DRACO_MESH_COMPRESSION:o[e]=new Td(r,this.dracoLoader);break;case ad.KHR_TEXTURE_TRANSFORM:o[e]=new Md;break;case ad.KHR_MESH_QUANTIZATION:o[e]=new Id;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,n)}parseAsync(e,t){const i=this;return new Promise((function(n,r){i.parse(e,t,n,r)}))}}function od(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ad={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class sd{constructor(e){this.parser=e,this.name=ad.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const n=t[i];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let n=t.cache.get(i);if(n)return n;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const s=new no(16777215);void 0!==o.color&&s.setRGB(o.color[0],o.color[1],o.color[2],Mi);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new ih(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new eh(s),a.distance=l;break;case"spot":a=new Xu(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,Vd(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(a),t.cache.add(i,n),n}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,n=i.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return i._getNodeRef(t.cache,r,e)}))}}let ld=class{constructor(){this.name=ad.KHR_MATERIALS_UNLIT}getMaterialType(){return so}extendParams(e,t,i){const n=[];e.color=new no(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],Mi),e.opacity=t[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(e,"map",r.baseColorTexture,Ti))}return Promise.all(n)}},cd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return void 0!==n&&(t.emissiveIntensity=n),Promise.resolve()}},ud=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sn(e,e)}return Promise.all(r)}},hd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.dispersion=void 0!==n.dispersion?n.dispersion:0,Promise.resolve()}},dd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}},pd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new no(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],Mi)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ti)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}},fd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}},md=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new no).setRGB(a[0],a[1],a[2],Mi),Promise.all(r)}},gd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}},_d=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new no).setRGB(a[0],a[1],a[2],Mi),void 0!==o.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ti)),Promise.all(r)}},vd=class{constructor(e){this.parser=e,this.name=ad.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}},yd=class{constructor(e){this.parser=e,this.name=ad.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pu:null}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}};class Ad{constructor(e){this.parser=e,this.name=ad.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class bd{constructor(e){this.parser=e,this.name=ad.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=n.images[o.source];let s=i.textureLoader;if(a.uri){const e=i.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,o.source,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class xd{constructor(e){this.parser=e,this.name=ad.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=n.images[o.source];let s=i.textureLoader;if(a.uri){const e=i.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,o.source,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class wd{constructor(e){this.name=ad.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const e=i.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then((function(t){const i=e.byteOffset||0,n=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,i,n);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(o*a);return r.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t}))}))}return null}}let Sd=class{constructor(e){this.name=ad.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const n=t.meshes[i.mesh];for(const s of n.primitives)if(s.mode!==kd.TRIANGLES&&s.mode!==kd.TRIANGLE_STRIP&&s.mode!==kd.TRIANGLE_FAN&&void 0!==s.mode)return null;const r=i.extensions[this.name].attributes,o=[],a={};for(const s in r)o.push(this.parser.getDependency("accessor",r[s]).then((e=>(a[s]=e,a[s]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),i=t.isGroup?t.children:[t],n=e[0].count,r=[];for(const o of i){const e=new hr,t=new Dn,i=new Ln,s=new Dn(1,1,1),l=new Oc(o.geometry,o.material,n);for(let r=0;r<n;r++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,r),a.ROTATION&&i.fromBufferAttribute(a.ROTATION,r),a.SCALE&&s.fromBufferAttribute(a.SCALE,r),l.setMatrixAt(r,e.compose(t,i,s));for(const n in a)if("_COLOR_0"===n){const e=a[n];l.instanceColor=new Ic(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==n&&"ROTATION"!==n&&"SCALE"!==n&&o.geometry.setAttribute(n,a[n]);Fr.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}};const Cd="glTF";class Ed{constructor(e){this.name=ad.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Cd)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<n;){const t=r.getUint32(o,!0);o+=4;const n=r.getUint32(o,!0);if(o+=4,1313821514===n){const n=new Uint8Array(e,12+o,t);this.content=i.decode(n)}else if(5130562===n){const i=12+o;this.body=e.slice(i,i+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Td{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ad.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const c in o){const e=Fd[c]||c.toLowerCase();a[e]=o[c]}for(const c in e.attributes){const t=Fd[c]||c.toLowerCase();if(void 0!==o[c]){const n=i.accessors[e.attributes[c]],r=Ld[n.componentType];l[t]=r.name,s[t]=!0===n.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,i){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const i=e.attributes[t],n=s[t];void 0!==n&&(i.normalized=n)}t(e)}),a,l,Mi,i)}))}))}}class Md{constructor(){this.name=ad.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Id{constructor(){this.name=ad.KHR_MESH_QUANTIZATION}}class Bd extends yu{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n;for(let o=0;o!==n;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,n){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=n-t,u=(i-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,g=d-h,_=1-m,v=g-h+u;for(let y=0;y!==a;y++){const e=o[f+y+a],t=o[f+y+s]*c,i=o[p+y+a],n=o[p+y]*c;r[y]=_*e+v*t+m*i+g*n}return r}}const Rd=new Ln;class Pd extends Bd{interpolate_(e,t,i,n){const r=super.interpolate_(e,t,i,n);return Rd.fromArray(r).normalize().toArray(r),r}}const kd={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ld={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Dd={9728:_t,9729:At,9984:vt,9985:bt,9986:yt,9987:xt},Nd={33071:mt,33648:gt,10497:ft},Od={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ud={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zd={CUBICSPLINE:void 0,LINEAR:bi,STEP:Ai};function Hd(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new du({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),e.DefaultMaterial}function Gd(e,t,i){for(const n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function Vd(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Qd(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,n=i.length;t<n;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jd(e){let t;const i=e.extensions&&e.extensions[ad.KHR_DRACO_MESH_COMPRESSION];if(t=i?"draco:"+i.bufferView+":"+i.indices+":"+qd(i.attributes):e.indices+":"+qd(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+qd(e.targets[n]);return t}function qd(e){let t="";const i=Object.keys(e).sort();for(let n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function Wd(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const $d=new hr;class Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new od,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=-1,r=!1,o=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);n=i&&t?parseInt(t[1],10):-1,r=e.indexOf("Firefox")>-1,o=r?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||i&&n<17||r&&o<98?this.textureLoader=new Gu(this.options.manager):this.textureLoader=new ah(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Uu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(t){const o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};return Gd(r,o,n),Vd(o,n),Promise.all(i._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const i=t[n].joints;for(let t=0,n=i.length;t<n;t++)e[i[t]].isBone=!0}for(let n=0,r=e.length;n<r;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(i[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),r=(e,t)=>{const i=this.associations.get(e);null!=i&&this.associations.set(t,i);for(const[n,o]of e.children.entries())r(o,t.children[n])};return r(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const r=e(t[n]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)})),!n)throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[ad.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,r){i.load(oh.resolveURL(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))}loadAccessor(e){const t=this,i=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse){const e=Od[n.type],t=Ld[n.componentType],i=!0===n.normalized,r=new t(n.count*e);return Promise.resolve(new po(r,e,i))}const r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=Od[n.type],a=Ld[n.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=n.byteOffset||0,u=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,h=!0===n.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),i="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let l=t.cache.get(i);l||(d=new a(r,e*u,n.count*u/s),l=new Xl(d,u/s),t.cache.add(i,l)),p=new Kl(l,o,c%u/s,h)}else d=null===r?new a(n.count*o):new a(r,c,n.count*o),p=new po(d,o,h);if(void 0!==n.sparse){const t=Od.SCALAR,i=Ld[n.sparse.indices.componentType],s=n.sparse.indices.byteOffset||0,l=n.sparse.values.byteOffset||0,c=new i(e[1],s,n.sparse.count*t),u=new a(e[2],l,n.sparse.count*o);null!==r&&(p=new po(p.array.slice(),p.itemSize,p.normalized)),p.normalized=!1;for(let e=0,n=c.length;e<n;e++){const t=c[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}p.normalized=h}return p}))}loadTexture(e){const t=this.json,i=this.options,n=t.textures[e].source,r=t.images[n];let o=this.textureLoader;if(r.uri){const e=i.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,i){const n=this,r=this.json,o=r.textures[e],a=r.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,i).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const i=(r.samplers||{})[o.sampler]||{};return t.magFilter=Dd[i.magFilter]||At,t.minFilter=Dd[i.minFilter]||xt,t.wrapS=Nd[i.wrapS]||ft,t.wrapT=Nd[i.wrapT]||ft,n.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}loadImageSource(e,t){const i=this.json,n=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const r=i.images[e],o=self.URL||self.webkitURL;let a=r.uri||"",s=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then((function(e){s=!0;const t=new Blob([e],{type:r.mimeType});return a=o.createObjectURL(t),a}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(a).then((function(e){return new Promise((function(i,r){let o=i;!0===t.isImageBitmapLoader&&(o=function(e){const t=new Mn(e);t.needsUpdate=!0,i(t)}),t.load(oh.resolveURL(e,n.path),o,void 0,r)}))})).then((function(e){var t;return!0===s&&o.revokeObjectURL(a),Vd(e,r),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=l,l}assignTexture(e,t,i,n){const r=this;return this.getDependency("texture",i.index).then((function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),r.extensions[ad.KHR_TEXTURE_TRANSFORM]){const e=void 0!==i.extensions?i.extensions[ad.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[ad.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==n&&(o.colorSpace=n),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new Zc,ao.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){const e="LineBasicMaterial:"+i.uuid;let t=this.cache.get(e);t||(t=new Fc,ao.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,this.cache.add(e,t)),i=t}if(n||r||o){let e="ClonedMaterial:"+i.uuid+":";n&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}e.material=i}getMaterialType(){return du}loadMaterial(e){const t=this,i=this.json,n=this.extensions,r=i.materials[e];let o;const a={},s=[];if((r.extensions||{})[ad.KHR_MATERIALS_UNLIT]){const e=n[ad.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),s.push(e.extendParams(a,r,t))}else{const i=r.pbrMetallicRoughness||{};if(a.color=new no(1,1,1),a.opacity=1,Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],Mi),a.opacity=e[3]}void 0!==i.baseColorTexture&&s.push(t.assignTexture(a,"map",i.baseColorTexture,Ti)),a.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,a.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(s.push(t.assignTexture(a,"metalnessMap",i.metallicRoughnessTexture)),s.push(t.assignTexture(a,"roughnessMap",i.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===r.doubleSided&&(a.side=2);const l=r.alphaMode||"OPAQUE";if("BLEND"===l?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===l&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==so&&(s.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new sn(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==so&&(s.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==so){const e=r.emissiveFactor;a.emissive=(new no).setRGB(e[0],e[1],e[2],Mi)}return void 0!==r.emissiveTexture&&o!==so&&s.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Ti)),Promise.all(s).then((function(){const i=new o(a);return r.name&&(i.name=r.name),Vd(i,r),t.associations.set(i,{materials:e}),r.extensions&&Gd(n,i,r),i}))}createUniqueName(e){const t=fh.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,n=this.primitiveCache;function r(e){return i[ad.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return Yd(i,e,t)}))}const o=[];for(let a=0,s=e.length;a<s;a++){const i=e[a],s=jd(i),l=n[s];if(l)o.push(l.promise);else{let e;e=i.extensions&&i.extensions[ad.KHR_DRACO_MESH_COMPRESSION]?r(i):Yd(new So,i,t),n[s]={primitive:i,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,n=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let s=0,l=o.length;s<l;s++){const e=void 0===o[s].material?Hd(this.cache):this.getDependency("material",o[s].material);a.push(e)}return a.push(t.loadGeometries(o)),Promise.all(a).then((function(i){const a=i.slice(0,i.length-1),s=i[i.length-1],l=[];for(let u=0,h=s.length;u<h;u++){const i=s[u],c=o[u];let h;const d=a[u];if(c.mode===kd.TRIANGLES||c.mode===kd.TRIANGLE_STRIP||c.mode===kd.TRIANGLE_FAN||void 0===c.mode)h=!0===r.isSkinnedMesh?new wc(i,d):new No(i,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),c.mode===kd.TRIANGLE_STRIP?h.geometry=nd(h.geometry,1):c.mode===kd.TRIANGLE_FAN&&(h.geometry=nd(h.geometry,2));else if(c.mode===kd.LINES)h=new Yc(i,d);else if(c.mode===kd.LINE_STRIP)h=new qc(i,d);else if(c.mode===kd.LINE_LOOP)h=new Kc(i,d);else{if(c.mode!==kd.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new nu(i,d)}Object.keys(h.geometry.morphAttributes).length>0&&Qd(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),Vd(h,r),c.extensions&&Gd(n,h,c),t.assignFinalMaterial(h),l.push(h)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return r.extensions&&Gd(n,l[0],r),l[0];const c=new Fl;r.extensions&&Gd(n,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const i=this.json.cameras[e],n=i[i.type];if(n)return"perspective"===i.type?t=new $o(an.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(t=new ba(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Vd(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let n=0,r=t.joints.length;n<r;n++)i.push(this._loadNodeShallow(t.joints[n]));return void 0!==t.inverseBindMatrices?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(e){const i=e.pop(),n=e,r=[],o=[];for(let a=0,s=n.length;a<s;a++){const e=n[a];if(e){r.push(e);const t=new hr;null!==i&&t.fromArray(i.array,16*a),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new Mc(r,o)}))}loadAnimation(e){const t=this.json,i=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,o=[],a=[],s=[],l=[],c=[];for(let u=0,h=n.channels.length;u<h;u++){const e=n.channels[u],t=n.samplers[e.sampler],i=e.target,r=i.node,h=void 0!==n.parameters?n.parameters[t.input]:t.input,d=void 0!==n.parameters?n.parameters[t.output]:t.output;void 0!==i.node&&(o.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",h)),s.push(this.getDependency("accessor",d)),l.push(t),c.push(i))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=n[r],u=o[r],h=a[r],d=s[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=i._createAnimationTracks(e,c,u,h,d);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new Ru(r,void 0,l)}))}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(e){const t=i._getNodeRef(i.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,i=n.weights.length;t<i;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this,i=this.json.nodes[e],n=t._loadNodeShallow(e),r=[],o=i.children||[];for(let s=0,l=o.length;s<l;s++)r.push(t.getDependency("node",o[s]));const a=void 0===i.skin?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([n,Promise.all(r),a]).then((function(e){const t=e[0],i=e[1],n=e[2];null!==n&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(n,$d)}));for(let r=0,o=i.length;r<o;r++)t.add(i[r]);return t}))}_loadNodeShallow(e){const t=this.json,i=this.extensions,n=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?n.createUniqueName(r.name):"",a=[],s=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&a.push(s),void 0!==r.camera&&a.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===r.isBone?new Sc:t.length>1?new Fl:1===t.length?t[0]:new Fr,a!==t[0])for(let e=0,i=t.length;e<i;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),Vd(a,r),r.extensions&&Gd(i,a,r),void 0!==r.matrix){const e=new hr;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return n.associations.has(a)||n.associations.set(a,{}),n.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],n=this,r=new Fl;i.name&&(r.name=n.createUniqueName(i.name)),Vd(r,i),i.extensions&&Gd(t,r,i);const o=i.nodes||[],a=[];for(let s=0,l=o.length;s<l;s++)a.push(n.getDependency("node",o[s]));return Promise.all(a).then((function(e){for(let t=0,i=e.length;t<i;t++)r.add(e[t]);return n.associations=(e=>{const t=new Map;for(const[i,r]of n.associations)(i instanceof ao||i instanceof Mn)&&t.set(i,r);return e.traverse((e=>{const i=n.associations.get(e);null!=i&&t.set(e,i)})),t})(r),r}))}_createAnimationTracks(e,t,i,n,r){const o=[],a=e.name?e.name:e.uuid,s=[];let l;switch(Ud[r.path]===Ud.weights?e.traverse((function(e){e.morphTargetInfluences&&s.push(e.name?e.name:e.uuid)})):s.push(a),Ud[r.path]){case Ud.weights:l=Eu;break;case Ud.rotation:l=Mu;break;case Ud.position:case Ud.scale:l=Bu;break;default:l=1===i.itemSize?Eu:Bu}const c=void 0!==n.interpolation?zd[n.interpolation]:bi,u=this._getArrayFromAccessor(i);for(let h=0,d=s.length;h<d;h++){const e=new l(s[h]+"."+Ud[r.path],t.array,u,c);"CUBICSPLINE"===n.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=Wd(t.constructor),i=new Float32Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=t[n]*e;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof Mu?Pd:Bd)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Yd(e,t,i){const n=t.attributes,r=[];function o(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const a in n){const t=Fd[a]||a.toLowerCase();t in e.attributes||r.push(o(n[a],t))}if(void 0!==t.indices&&!e.index){const n=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(n)}return yn.workingColorSpace!==Mi&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${yn.workingColorSpace}" not supported.`),Vd(e,t),function(e,t,i){const n=t.attributes,r=new Fn;if(void 0===n.POSITION)return;{const e=i.json.accessors[n.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new Dn(t[0],t[1],t[2]),new Dn(o[0],o[1],o[2])),e.normalized){const t=Wd(Ld[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new Dn,t=new Dn;for(let n=0,r=o.length;n<r;n++){const r=o[n];if(void 0!==r.POSITION){const n=i.json.accessors[r.POSITION],o=n.min,a=n.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),n.normalized){const e=Wd(Ld[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new ir;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,i),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,i){let n=!1,r=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),n&&r&&o)break}if(!n&&!r&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(n){const t=void 0!==u.POSITION?i.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(r){const t=void 0!==u.NORMAL?i.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==u.COLOR_0?i.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const i=t[0],a=t[1],s=t[2];return n&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,i):e}))}class Kd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:t,msg:i,transfer:n}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(i,n)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((i=>{const n=this._getIdleWorker();-1!==n?(this._initWorker(n),this.workerStatus|=1<<n,this.workersResolve[n]=i,this.workers[n].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})}))}dispose(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Zd=9,Jd=15,ep=16,tp=22,ip=37,np=43,rp=76,op=83,ap=97,sp=100,lp=103,cp=109,up=165,hp=166,dp=1000066e3;class pp{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class fp{constructor(e,t,i,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=n,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){void 0===t&&(t=0);const i=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,n)}}const mp=[171,75,84,88,32,50,48,187,13,10,26,10];function gp(e){return(new TextDecoder).decode(e)}let _p,vp,yp;const Ap={env:{emscripten_notify_memory_growth:function(e){yp=new Uint8Array(vp.exports.memory.buffer)}}};class bp{init(){return _p||(_p="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+xp).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,Ap))).then(this._init):WebAssembly.instantiate(Buffer.from(xp,"base64"),Ap).then(this._init),_p)}_init(e){vp=e.instance,Ap.env.emscripten_notify_memory_growth(0)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!vp)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,n=vp.exports.malloc(i);yp.set(e,n),t=t||Number(vp.exports.ZSTD_findDecompressedSize(n,i));const r=vp.exports.malloc(t),o=vp.exports.ZSTD_decompress(r,t,n,i),a=yp.slice(r,r+o);return vp.exports.free(n),vp.exports.free(r),a}}const xp="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",wp=new WeakMap;let Sp,Cp=0;class Ep extends Nu{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Kd,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new Uu(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new Uu(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const n=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,n]).then((e=>{let[t,i]=e;const n=Ep.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(Ep.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ep.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ep.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=i,this.workerPool.setWorkerCreator((()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e}))})),Cp>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Cp++}return this.transcoderPending}load(e,t,i,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new Uu(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),i,n)}parse(e,t,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(wp.has(e))return wp.get(e).promise.then(t).catch(i);this._createTexture(e).then((e=>t?t(e):null)).catch(i)}_createTextureFrom(e,t){const{faces:i,width:n,height:r,format:o,type:a,error:s,dfdFlags:l}=e;if("error"===a)return Promise.reject(s);let c;if(6===t.faceCount)c=new lu(i,o,wt);else{const e=i[0].mipmaps;c=t.layerCount>1?new su(e,n,r,t.layerCount,o,wt):new au(e,n,r,o,wt)}return c.minFilter=1===i[0].mipmaps.length?At:xt,c.magFilter=At,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=Bp(t),c.premultiplyAlpha=!!(1&l),c}async _createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,mp.length);if(t[0]!==mp[0]||t[1]!==mp[1]||t[2]!==mp[2]||t[3]!==mp[3]||t[4]!==mp[4]||t[5]!==mp[5]||t[6]!==mp[6]||t[7]!==mp[7]||t[8]!==mp[8]||t[9]!==mp[9]||t[10]!==mp[10]||t[11]!==mp[11])throw new Error("Missing KTX 2.0 identifier.");const i=new pp,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new fp(e,mp.length,n,!0);i.vkFormat=r._nextUint32(),i.typeSize=r._nextUint32(),i.pixelWidth=r._nextUint32(),i.pixelHeight=r._nextUint32(),i.pixelDepth=r._nextUint32(),i.layerCount=r._nextUint32(),i.faceCount=r._nextUint32();const o=r._nextUint32();i.supercompressionScheme=r._nextUint32();const a=r._nextUint32(),s=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),d=new fp(e,mp.length+n,3*o*8,!0);for(let k=0;k<o;k++)i.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new fp(e,a,s,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let k=0;k<m;k++){const e={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=p._nextInt32(),e.sampleUpper=p._nextInt32()):(e.sampleLower=p._nextUint32(),e.sampleUpper=p._nextUint32()),f.samples[k]=e}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(f);const g=new fp(e,l,c,!0);for(;g._offset<c;){const e=g._nextUint32(),t=g._scan(e),n=gp(t);if(i.keyValue[n]=g._nextUint8Array(e-t.byteLength-1),n.match(/^ktx/i)){const e=gp(i.keyValue[n]);i.keyValue[n]=e.substring(0,e.lastIndexOf("\0"))}g._skip(e%4?4-e%4:0)}if(h<=0)return i;const _=new fp(e,u,h,!0),v=_._nextUint16(),y=_._nextUint16(),A=_._nextUint32(),b=_._nextUint32(),x=_._nextUint32(),w=_._nextUint32(),S=[];for(let k=0;k<o;k++)S.push({imageFlags:_._nextUint32(),rgbSliceByteOffset:_._nextUint32(),rgbSliceByteLength:_._nextUint32(),alphaSliceByteOffset:_._nextUint32(),alphaSliceByteLength:_._nextUint32()});const C=u+_._offset,E=C+A,T=E+b,M=T+x,I=new Uint8Array(e.buffer,e.byteOffset+C,A),B=new Uint8Array(e.buffer,e.byteOffset+E,b),R=new Uint8Array(e.buffer,e.byteOffset+T,x),P=new Uint8Array(e.buffer,e.byteOffset+M,w);return i.globalData={endpointCount:v,selectorCount:y,imageDescs:S,endpointsData:I,selectorsData:B,tablesData:R,extendedData:P},i}(new Uint8Array(e));if(0!==i.vkFormat)return async function(e){const{vkFormat:t}=e;if(void 0===Mp[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let i;2===e.supercompressionScheme&&(Sp||(Sp=new Promise((async e=>{const t=new bp;await t.init(),e(t)}))),i=await Sp);const n=[];for(let o=0;o<e.levels.length;o++){const r=Math.max(1,e.pixelWidth>>o),a=Math.max(1,e.pixelHeight>>o),s=e.pixelDepth?Math.max(1,e.pixelDepth>>o):0,l=e.levels[o];let c,u;if(0===e.supercompressionScheme)c=l.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=i.decode(l.levelData,l.uncompressedByteLength)}u=Ip[t]===It?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):Ip[t]===Bt?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,n.push({data:u,width:r,height:a,depth:s})}let r;if(Tp.has(Mp[t]))r=0===e.pixelDepth?new Cc(n[0].data,e.pixelWidth,e.pixelHeight):new kn(n[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new au(n,e.pixelWidth,e.pixelHeight)}return r.mipmaps=n,r.type=Ip[t],r.format=Mp[t],r.colorSpace=Bp(e),r.needsUpdate=!0,Promise.resolve(r)}(i);const n=t,r=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:n},[e]))).then((e=>this._createTextureFrom(e.data,i)));return wp.set(e,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Cp--,this}}Ep.BasisFormat={ETC1S:0,UASTC_4x4:1},Ep.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Ep.EngineFormat={RGBAFormat:Lt,RGBA_ASTC_4x4_Format:Jt,RGBA_BPTC_Format:pi,RGBA_ETC2_EAC_Format:Zt,RGBA_PVRTC_4BPPV1_Format:$t,RGBA_S3TC_DXT5_Format:jt,RGB_ETC1_Format:Yt,RGB_ETC2_Format:Kt,RGB_PVRTC_4BPPV1_Format:qt,RGBA_S3TC_DXT1_Format:Vt},Ep.BasisWorker=function(){let e,t,i;const n=_EngineFormat,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(a){const h=a.data;switch(h.type){case"init":e=h.config,d=h.transcoderBinary,t=new Promise((e=>{i={wasmBinary:d,onRuntimeInitialized:e},BASIS(i)})).then((()=>{i.initializeBasis(),void 0===i.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:t,buffers:a,width:d,height:p,hasAlpha:f,format:m,dfdFlags:g}=function(t){const a=new i.KTX2File(new Uint8Array(t));function h(){a.close(),a.delete()}if(!a.isValid())throw h(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const d=a.isUASTC()?o.UASTC_4x4:o.ETC1S,p=a.getWidth(),f=a.getHeight(),m=a.getLayers()||1,g=a.getLevels(),_=a.getFaces(),v=a.getHasAlpha(),y=a.getDFDFlags(),{transcoderFormat:A,engineFormat:b}=function(t,i,a,u){let h,d;const p=t===o.ETC1S?s:l;for(let n=0;n<p.length;n++){const r=p[n];if(e[r.if]&&r.basisFormat.includes(t)&&!(u&&r.transcoderFormat.length<2)&&(!r.needsPowerOfTwo||c(i)&&c(a)))return h=r.transcoderFormat[u?1:0],d=r.engineFormat[u?1:0],{transcoderFormat:h,engineFormat:d}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),h=r.RGBA32,d=n.RGBAFormat,{transcoderFormat:h,engineFormat:d}}(d,p,f,v);if(!p||!f||!g)throw h(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!a.startTranscoding())throw h(),new Error("THREE.KTX2Loader: .startTranscoding failed");const x=[],w=[];for(let e=0;e<_;e++){const t=[];for(let i=0;i<g;i++){const n=[];let r,o;for(let t=0;t<m;t++){const s=a.getImageLevelInfo(i,t,e);0!==e||0!==i||0!==t||s.origWidth%4==0&&s.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),g>1?(r=s.origWidth,o=s.origHeight):(r=s.width,o=s.height);const l=new Uint8Array(a.getImageTranscodedSizeInBytes(i,t,0,A));if(!a.transcodeImage(l,i,t,e,A,0,-1,-1))throw h(),new Error("THREE.KTX2Loader: .transcodeImage failed.");n.push(l)}const s=u(n);t.push({data:s,width:r,height:o}),w.push(s.buffer)}x.push({mipmaps:t,width:p,height:f,format:b})}return h(),{faces:x,buffers:w,width:p,height:f,hasAlpha:v,format:b,dfdFlags:y}}(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:t,width:d,height:p,hasAlpha:f,format:m,dfdFlags:g},a)}catch(e){console.error(e),self.postMessage({type:"error",id:h.id,error:e.message})}}))}var d}));const a=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[n.RGBA_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=a.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=a.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function c(e){return e<=2||!(e&e-1)&&0!==e}function u(e){if(1===e.length)return e[0];let t=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;const i=new Uint8Array(t);let n=0;for(let r=0;r<e.length;r++){const t=e[r];i.set(t,n),n+=t.byteLength}return i}};const Tp=new Set([Lt,Ut,Ot]),Mp={[cp]:Lt,[ap]:Lt,[ip]:Lt,[np]:Lt,[lp]:Ut,[op]:Ut,[ep]:Ut,[tp]:Ut,[sp]:Ot,[rp]:Ot,[Jd]:Ot,[Zd]:Ot,[dp]:Jt,[hp]:ni,[up]:ni},Ip={[cp]:It,[ap]:Bt,[ip]:wt,[np]:wt,[lp]:It,[op]:Bt,[ep]:wt,[tp]:wt,[sp]:It,[rp]:Bt,[Jd]:wt,[Zd]:wt,[dp]:Bt,[hp]:wt,[up]:wt};function Bp(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?Ti:Mi:10===t.colorPrimaries?2===t.transferFunction?Ii:Bi:(0===t.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),Ei)}var Rp,Pp;const kp=Symbol("retainerCount"),Lp=Symbol("recentlyUsed"),Dp=Symbol("evict"),Np=Symbol("evictionThreshold"),Op=Symbol("cache");class Fp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this[Rp]=new Map,this[Pp]=[],this[Op]=e,this[Np]=t}set evictionThreshold(e){this[Np]=e,this[Dp]()}get evictionThreshold(){return this[Np]}get cache(){return this[Op]}retainerCount(e){return this[kp].get(e)||0}reset(){this[kp].clear(),this[Lp]=[]}retain(e){this[kp].has(e)||this[kp].set(e,0),this[kp].set(e,this[kp].get(e)+1);const t=this[Lp].indexOf(e);-1!==t&&this[Lp].splice(t,1),this[Lp].unshift(e),this[Dp]()}release(e){this[kp].has(e)&&this[kp].set(e,Math.max(this[kp].get(e)-1,0)),this[Dp]()}[(Rp=kp,Pp=Lp,Dp)](){if(!(this[Lp].length<this[Np]))for(let e=this[Lp].length-1;e>=this[Np];--e){const t=this[Lp][e];0===this[kp].get(t)&&(this[Op].delete(t),this[Lp].splice(e,1))}}}const Up=e=>{const t=new Map;for(const i of e.mappings)for(const e of i.variants)t.set(e,{material:null,gltfMaterialIndex:i.material});return t};class zp{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(void 0===i.extensions||void 0===i.extensions[this.name])return null;const n=(e=>{const t=[],i=new Set;for(const n of e){let e=n,r=0;for(;i.has(e);)e=n+"."+ ++r;i.add(e),t.push(e)}return t})((i.extensions[this.name].variants||[]).map((e=>e.name)));for(const r of e.scenes)r.traverse((e=>{const n=e;if(!n.material)return;const r=t.associations.get(n);if(null==r||null==r.meshes||null==r.primitives)return;const o=i.meshes[r.meshes].primitives[r.primitives].extensions;o&&o[this.name]&&(n.userData.variantMaterials=Up(o[this.name]))}));return e.userData.variants=n,Promise.resolve()}}var Hp,Gp;Mn.DEFAULT_ANISOTROPY=4;const Vp=new Map,Qp=new Map;let jp;const qp=new class extends Nu{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,n){const r=new Uu(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{this.parse(e,t,n)}),i,n)}parse(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this.decodeDracoFile(e,t,null,null,Ti,i).catch(i)}decodeDracoFile(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mi,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>{};const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(td.has(e)){const t=td.get(e);if(t.key===i)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then((i=>(n=i,new Promise(((i,o)=>{n._callbacks[r]={resolve:i,reject:o},n.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{n&&r&&this._releaseTask(n,r)})),td.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new So;e.index&&t.setIndex(new po(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i],r=n.name,o=n.array,a=n.itemSize,s=new po(o,a);"color"===r&&(this._assignVertexColorSpace(s,n.vertexColorSpace),s.normalized=o instanceof Float32Array==0),t.setAttribute(r,s)}return t}_assignVertexColorSpace(e,t){if(t!==Ti)return;const i=new no;for(let n=0,r=e.count;n<r;n++)i.fromBufferAttribute(e,n),yn.toWorkingColorSpace(i,Ti),e.setXYZ(n,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new Uu(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{i.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const n=id.toString(),r=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};let Wp;const $p=new Ep;let Xp,Yp;const Kp=Symbol("loader"),Zp=Symbol("evictionPolicy"),Jp=Symbol("GLTFInstance");class ef extends $i{constructor(e){super(),this[Gp]=(new rd).register((e=>new zp(e))),this[Jp]=e,this[Kp].setDRACOLoader(qp),this[Kp].setKTX2Loader($p)}static setDRACODecoderLocation(e){jp=e,qp.setDecoderPath(e)}static getDRACODecoderLocation(){return jp}static setKTX2TranscoderLocation(e){Wp=e,$p.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return Wp}static setMeshoptDecoderLocation(e){var t;Xp!==e&&(Xp=e,Yp=(t=e,new Promise(((e,i)=>{const n=document.createElement("script");document.body.appendChild(n),n.onload=e,n.onerror=i,n.async=!0,n.src=t}))).then((()=>MeshoptDecoder.ready)).then((()=>MeshoptDecoder)))}static getMeshoptDecoderLocation(){return Xp}static initializeKTX2Loader(e){$p.detectSupport(e)}static get cache(){return Vp}static clearCache(){Vp.forEach(((e,t)=>{this.delete(t)})),this[Zp].reset()}static has(e){return Vp.has(e)}static async delete(e){if(!this.has(e))return;const t=Vp.get(e);Qp.delete(e),Vp.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!Qp.get(e)}get[(Hp=Zp,Gp=Kp,Zp)](){return this.constructor[Zp]}async preload(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(this[Kp].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!Vp.has(e)){null!=Yp&&this[Kp].setMeshoptDecoder(await Yp);const t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const n=e=>{const t=e.loaded/e.total;i(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise(((i,r)=>{t.load(e,i,n,r)}))}(e,this[Kp],(e=>{i(.8*e)})),n=this[Jp],r=t.then((e=>n.prepare(e))).then((e=>(i(.9),new n(e)))).catch((e=>(console.error(e),new n)));Vp.set(e,r)}await Vp.get(e),Qp.set(e,!0),i&&i(1)}async load(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};await this.preload(e,t,i);const n=await Vp.get(e),r=await n.clone();return this[Zp].retain(e),r.dispose=()=>{this[Zp].release(e)},r}}ef[Hp]=new Fp(ef);class tf extends Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new sn(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const nf=new Dn,rf=new hr,of=new hr,af=new Dn,sf=new Dn;class lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this;let i,n,r,o;const a={objects:new WeakMap},s=void 0!==e.element?e.element:document.createElement("div");function l(e){e.isCSS2DObject&&(e.element.style.display="none");for(let t=0,i=e.children.length;t<i;t++)l(e.children[t])}function c(e,i,n){if(!1!==e.visible){if(e.isCSS2DObject){nf.setFromMatrixPosition(e.matrixWorld),nf.applyMatrix4(of);const l=nf.z>=-1&&nf.z<=1&&!0===e.layers.test(n.layers),c=e.element;c.style.display=!0===l?"":"none",!0===l&&(e.onBeforeRender(t,i,n),c.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(nf.x*r+r)+"px,"+(-nf.y*o+o)+"px)",c.parentNode!==s&&s.appendChild(c),e.onAfterRender(t,i,n));const h={distanceToCameraSquared:u(n,e)};a.objects.set(e,h)}for(let t=0,r=e.children.length;t<r;t++)c(e.children[t],i,n)}else l(e)}function u(e,t){return af.setFromMatrixPosition(e.matrixWorld),sf.setFromMatrixPosition(t.matrixWorld),af.distanceToSquared(sf)}s.style.overflow="hidden",this.domElement=s,this.getSize=function(){return{width:i,height:n}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),rf.copy(t.matrixWorldInverse),of.multiplyMatrices(t.projectionMatrix,rf),c(e,e,t),function(e){const t=function(e){const t=[];return e.traverseVisible((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:a.objects.get(e).distanceToCameraSquared-a.objects.get(t).distanceToCameraSquared})),i=t.length;for(let n=0,r=t.length;n<r;n++)t[n].element.style.zIndex=i-n}(e)},this.setSize=function(e,t){i=e,n=t,r=i/2,o=n/2,s.style.width=e+"px",s.style.height=t+"px"}}}function cf(e,t,i){let n=i;const r=new Dn;return e.updateWorldMatrix(!0,!0),e.traverseVisible((e=>{const{geometry:i}=e;if(void 0!==i){const{position:o}=i.attributes;if(void 0!==o)for(let i=0,a=o.count;i<a;i++)e.isMesh?e.getVertexPosition(i,r):r.fromBufferAttribute(o,i),e.isSkinnedMesh||r.applyMatrix4(e.matrixWorld),n=t(n,r)}})),n}let uf,hf,df,pf;function ff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;hf||(hf=new la(2,2,1,1)),df||(df=new Vo({uniforms:{blitTexture:new vh(e)},vertexShader:"\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}",fragmentShader:"\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}"})),df.uniforms.blitTexture.value=e,df.defines.IS_SRGB=e.colorSpace==Ti,df.needsUpdate=!0,pf||(pf=new No(hf,df),pf.frustumCulled=!1);const n=new $o,r=new $l;r.add(pf),null===i&&(i=uf=new Wl({antialias:!1}));const o=Math.min(e.image.width,t),a=Math.min(e.image.height,t);i.setSize(o,a),i.clear(),i.render(r,n);const s=document.createElement("canvas"),l=s.getContext("2d");s.width=o,s.height=a,l.drawImage(i.domElement,0,0,o,a);const c=new cu(s);return c.minFilter=e.minFilter,c.magFilter=e.magFilter,c.wrapS=e.wrapS,c.wrapT=e.wrapT,c.colorSpace=e.colorSpace,c.name=e.name,uf&&(uf.forceContextLoss(),uf.dispose(),uf=null),c}const mf={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class gf{constructor(){this.pluginCallbacks=[],this.register((function(e){return new Pf(e)})),this.register((function(e){return new kf(e)})),this.register((function(e){return new Of(e)})),this.register((function(e){return new Ff(e)})),this.register((function(e){return new Uf(e)})),this.register((function(e){return new zf(e)})),this.register((function(e){return new Lf(e)})),this.register((function(e){return new Df(e)})),this.register((function(e){return new Nf(e)})),this.register((function(e){return new Hf(e)})),this.register((function(e){return new Gf(e)})),this.register((function(e){return new Vf(e)})),this.register((function(e){return new Qf(e)})),this.register((function(e){return new jf(e)}))}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){const r=new Rf,o=[];for(let a=0,s=this.pluginCallbacks.length;a<s;a++)o.push(this.pluginCallbacks[a](r));r.setPlugins(o),r.write(e,t,n).catch(i)}parseAsync(e,t){const i=this;return new Promise((function(n,r){i.parse(e,n,r,t)}))}}const _f=5120,vf=5121,yf=5122,Af=5123,bf=34962,xf="KHR_mesh_quantization",wf={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},Sf={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Cf=new no;function Ef(e,t){return e.length===t.length&&e.every((function(e,i){return e===t[i]}))}function Tf(e){return 4*Math.ceil(e/4)}function Mf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Tf(e.byteLength);if(i!==e.byteLength){const n=new Uint8Array(i);if(n.set(new Uint8Array(e)),0!==t)for(let r=e.byteLength;r<i;r++)n[r]=t;return n.buffer}return e}function If(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function Bf(e,t){if(void 0!==e.toBlob)return new Promise((i=>e.toBlob(i,t)));let i;return"image/jpeg"===t?i=.92:"image/webp"===t&&(i=.8),e.convertToBlob({type:t,quality:i})}class Rf{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Pe}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const n=this,r=n.buffers,o=n.json;i=n.options;const a=n.extensionsUsed,s=n.extensionsRequired,l=new Blob(r,{type:"application/octet-stream"}),c=Object.keys(a),u=Object.keys(s);if(c.length>0&&(o.extensionsUsed=c),u.length>0&&(o.extensionsRequired=u),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),!0===i.binary){const e=new FileReader;e.readAsArrayBuffer(l),e.onloadend=function(){const i=Mf(e.result),n=new DataView(new ArrayBuffer(8));n.setUint32(0,i.byteLength,!0),n.setUint32(4,5130562,!0);const r=Mf((a=JSON.stringify(o),(new TextEncoder).encode(a).buffer),32);var a;const s=new DataView(new ArrayBuffer(8));s.setUint32(0,r.byteLength,!0),s.setUint32(4,1313821514,!0);const l=new ArrayBuffer(12),c=new DataView(l);c.setUint32(0,1179937895,!0),c.setUint32(4,2,!0);const u=12+s.byteLength+r.byteLength+n.byteLength+i.byteLength;c.setUint32(8,u,!0);const h=new Blob([l,s,r,n,i],{type:"application/octet-stream"}),d=new FileReader;d.readAsArrayBuffer(h),d.onloadend=function(){t(d.result)}}}else if(o.buffers&&o.buffers.length>0){const e=new FileReader;e.readAsDataURL(l),e.onloadend=function(){const i=e.result;o.buffers[0].uri=i,t(o)}}else t(o)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const i=this.options,n=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in r.gltfExtensions)t.extensions[e]=r.gltfExtensions[e],n[e]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===this.uids.has(e)){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new Dn;for(let i=0,n=e.count;i<n;i++)if(Math.abs(t.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),n=new Dn;for(let r=0,o=i.count;r<o;r++)n.fromBufferAttribute(i,r),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),i.setXYZ(r,n.x,n.y,n.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const n={};0===t.offset.x&&0===t.offset.y||(n.offset=t.offset.toArray(),i=!0),0!==t.rotation&&(n.rotation=t.rotation,i=!0),1===t.repeat.x&&1===t.repeat.y||(n.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(e){return e.colorSpace===Ti?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof au&&(e=ff(e)),t instanceof au&&(t=ff(t));const n=e?e.image:null,r=t?t.image:null,o=Math.max(n?n.width:0,r?r.width:0),a=Math.max(n?n.height:0,r?r.height:0),s=If();s.width=o,s.height=a;const l=s.getContext("2d",{willReadFrequently:!0});l.fillStyle="#00ffff",l.fillRect(0,0,o,a);const c=l.getImageData(0,0,o,a);if(n){l.drawImage(n,0,0,o,a);const t=i(e),r=l.getImageData(0,0,o,a).data;for(let e=2;e<r.length;e+=4)c.data[e]=256*t(r[e]/256)}if(r){l.drawImage(r,0,0,o,a);const e=i(t),n=l.getImageData(0,0,o,a).data;for(let t=1;t<n.length;t+=4)c.data[t]=256*e(n[t]/256)}l.putImageData(c,0,0);const u=(e||t).clone();return u.source=new Cn(s),u.colorSpace=Ei,u.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),u}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,n,r){const o=this.json;let a;switch(o.bufferViews||(o.bufferViews=[]),t){case _f:case vf:a=1;break;case yf:case Af:a=2;break;default:a=4}let s=e.itemSize*a;r===bf&&(s=4*Math.ceil(s/4));const l=Tf(n*s),c=new DataView(new ArrayBuffer(l));let u=0;for(let d=i;d<i+n;d++){for(let i=0;i<e.itemSize;i++){let n;e.itemSize>4?n=e.array[d*e.itemSize+i]:(0===i?n=e.getX(d):1===i?n=e.getY(d):2===i?n=e.getZ(d):3===i&&(n=e.getW(d)),!0===e.normalized&&(n=an.normalize(n,e.array))),5126===t?c.setFloat32(u,n,!0):5124===t?c.setInt32(u,n,!0):5125===t?c.setUint32(u,n,!0):t===yf?c.setInt16(u,n,!0):t===Af?c.setUint16(u,n,!0):t===_f?c.setInt8(u,n):t===vf&&c.setUint8(u,n),u+=a}u%s!=0&&(u+=s-u%s)}const h={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};return void 0!==r&&(h.target=r),r===bf&&(h.byteStride=s),this.byteOffset+=l,o.bufferViews.push(h),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise((function(n){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const e=Mf(r.result),o={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,n(i.bufferViews.push(o)-1)}}))}processAccessor(e,t,i,n){const r=this.json;let o;if(e.array.constructor===Float32Array)o=5126;else if(e.array.constructor===Int32Array)o=5124;else if(e.array.constructor===Uint32Array)o=5125;else if(e.array.constructor===Int16Array)o=yf;else if(e.array.constructor===Uint16Array)o=Af;else if(e.array.constructor===Int8Array)o=_f;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);o=vf}if(void 0===i&&(i=0),void 0!==n&&n!==1/0||(n=e.count),0===n)return null;const a=function(e,t,i){const n={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=t;r<t+i;r++)for(let t=0;t<e.itemSize;t++){let i;e.itemSize>4?i=e.array[r*e.itemSize+t]:(0===t?i=e.getX(r):1===t?i=e.getY(r):2===t?i=e.getZ(r):3===t&&(i=e.getW(r)),!0===e.normalized&&(i=an.normalize(i,e.array))),n.min[t]=Math.min(n.min[t],i),n.max[t]=Math.max(n.max[t],i)}return n}(e,i,n);let s;void 0!==t&&(s=e===t.index?34963:bf);const l=this.processBufferView(e,o,i,n,s),c={bufferView:l.id,byteOffset:l.byteOffset,componentType:o,count:n,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(c.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(c)-1}processImage(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/png";if(null!==e){const r=this,o=r.cache,a=r.json,s=r.options,l=r.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=n+":flipY/"+i.toString();if(void 0!==c[u])return c[u];a.images||(a.images=[]);const h={mimeType:n},d=If();d.width=Math.min(e.width,s.maxTextureSize),d.height=Math.min(e.height,s.maxTextureSize);const p=d.getContext("2d",{willReadFrequently:!0});if(!0===i&&(p.translate(0,d.height),p.scale(1,-1)),void 0!==e.data){t!==Lt&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>s.maxTextureSize||e.height>s.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const i=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<i.length;t+=4)i[t+0]=e.data[t+0],i[t+1]=e.data[t+1],i[t+2]=e.data[t+2],i[t+3]=e.data[t+3];p.putImageData(new ImageData(i,e.width,e.height),0,0)}else{if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");p.drawImage(e,0,0,d.width,d.height)}!0===s.binary?l.push(Bf(d,n).then((e=>r.processBufferViewImage(e))).then((e=>{h.bufferView=e}))):void 0!==d.toDataURL?h.uri=d.toDataURL(n):l.push(Bf(d,n).then((e=>(new FileReader).readAsDataURL(e))).then((e=>{h.uri=e})));const f=a.images.push(h)-1;return c[u]=f,f}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:wf[e.magFilter],minFilter:wf[e.minFilter],wrapS:wf[e.wrapS],wrapT:wf[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){const t=this.options,i=this.cache,n=this.json;if(i.textures.has(e))return i.textures.get(e);n.textures||(n.textures=[]),e instanceof au&&(e=ff(e,t.maxTextureSize));let r=e.userData.mimeType;"image/webp"===r&&(r="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(o.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,o)}));const a=n.textures.push(o)-1;return i.textures.set(e,a),a}processMaterial(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const n={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(Ef(r,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),i={index:this.processTexture(t),channel:t.channel};this.applyTextureTransform(i,t),n.pbrMetallicRoughness.metallicRoughnessTexture=i}if(e.map){const t={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(t,e.map),n.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive;if(Math.max(t.r,t.g,t.b)>0&&(n.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const t={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(t,e.emissiveMap),n.emissiveTexture=t}}if(e.normalMap){const t={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),n.normalTexture=t}if(e.aoMap){const t={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),n.occlusionTexture=t}e.transparent?n.alphaMode="BLEND":e.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),2===e.side&&(n.doubleSided=!0),""!==e.name&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,n)}));const o=i.materials.push(n)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,i=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,A=e.material.length;y<A;y++)n.push(e.material[y].uuid);else n.push(e.material.uuid);const r=n.join(":");if(t.meshes.has(r))return t.meshes.get(r);const o=e.geometry;let a;a=e.isLineSegments?1:e.isLineLoop?2:e.isLine?3:e.isPoints?0:e.material.wireframe?1:4;const s={},l={},c=[],u=[],h={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");void 0===d||this.isNormalizedNormalAttribute(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let p=null;for(let y in o.attributes){if("morph"===y.slice(0,5))continue;const e=o.attributes[y];if(y=h[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),t.attributes.has(this.getUID(e))){l[y]=t.attributes.get(this.getUID(e));continue}p=null;const i=e.array;"JOINTS_0"!==y||i instanceof Uint16Array||i instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new po(new Uint16Array(i),e.itemSize,e.normalized));const n=this.processAccessor(p||e,o);null!==n&&(y.startsWith("_")||this.detectMeshQuantization(y,e),l[y]=n,t.attributes.set(this.getUID(e),n))}if(void 0!==d&&o.setAttribute("normal",d),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const i=[],n=[],r={};if(void 0!==e.morphTargetDictionary)for(const t in e.morphTargetDictionary)r[e.morphTargetDictionary[t]]=t;for(let a=0;a<e.morphTargetInfluences.length;++a){const s={};let l=!1;for(const e in o.morphAttributes){if("position"!==e&&"normal"!==e){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const i=o.morphAttributes[e][a],n=e.toUpperCase(),r=o.attributes[e];if(t.attributes.has(this.getUID(i,!0))){s[n]=t.attributes.get(this.getUID(i,!0));continue}const c=i.clone();if(!o.morphTargetsRelative)for(let e=0,t=i.count;e<t;e++)for(let n=0;n<i.itemSize;n++)0===n&&c.setX(e,i.getX(e)-r.getX(e)),1===n&&c.setY(e,i.getY(e)-r.getY(e)),2===n&&c.setZ(e,i.getZ(e)-r.getZ(e)),3===n&&c.setW(e,i.getW(e)-r.getW(e));s[n]=this.processAccessor(c,o),t.attributes.set(this.getUID(r,!0),s[n])}u.push(s),i.push(e.morphTargetInfluences[a]),void 0!==e.morphTargetDictionary&&n.push(r[a])}s.weights=i,n.length>0&&(s.extras={},s.extras.targetNames=n)}const f=Array.isArray(e.material);if(f&&0===o.groups.length)return null;let m=!1;if(f&&null===o.index){const e=[];for(let t=0,i=o.attributes.position.count;t<i;t++)e[t]=t;o.setIndex(e),m=!0}const g=f?e.material:[e.material],_=f?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,A=_.length;y<A;y++){const e={mode:a,attributes:l};if(this.serializeUserData(o,e),u.length>0&&(e.targets=u),null!==o.index){let i=this.getUID(o.index);void 0===_[y].start&&void 0===_[y].count||(i+=":"+_[y].start+":"+_[y].count),t.attributes.has(i)?e.indices=t.attributes.get(i):(e.indices=this.processAccessor(o.index,o,_[y].start,_[y].count),t.attributes.set(i,e.indices)),null===e.indices&&delete e.indices}const i=this.processMaterial(g[_[y].materialIndex]);null!==i&&(e.material=i),c.push(e)}!0===m&&o.setIndex(null),s.primitives=c,i.meshes||(i.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,s)}));const v=i.meshes.push(s)-1;return t.meshes.set(r,v),v}detectMeshQuantization(e,t){if(this.extensionsUsed[xf])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const n=e.split("_",1)[0];mf[n]&&mf[n].includes(i)&&(this.extensionsUsed[xf]=!0,this.extensionsRequired[xf]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:an.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(n.name=e.type),t.cameras.push(n)-1}processAnimation(e,t){const i=this.json,n=this.nodeMap;i.animations||(i.animations=[]);const r=(e=gf.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,o=[],a=[];for(let s=0;s<r.length;++s){const e=r[s],i=fh.parseTrackName(e.name);let l=fh.findNode(t,i.nodeName);const c=Sf[i.propertyName];if("bones"===i.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(i.objectIndex):void 0),!l||!c){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',e.name);continue}const u=1;let h,d=e.values.length/e.times.length;c===Sf.morphTargetInfluences&&(d/=l.morphTargetInfluences.length),!0===e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",d/=3):h=e.getInterpolation()===Ai?"STEP":"LINEAR",a.push({input:this.processAccessor(new po(e.times,u)),output:this.processAccessor(new po(e.values,d)),interpolation:h}),o.push({sampler:a.length-1,target:{node:n.get(l),path:c}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:o}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,n=t.nodes[i.get(e)],r=e.skeleton;if(void 0===r)return null;const o=e.skeleton.bones[0];if(void 0===o)return null;const a=[],s=new Float32Array(16*r.bones.length),l=new hr;for(let c=0;c<r.bones.length;++c)a.push(i.get(r.bones[c])),l.copy(r.boneInverses[c]),l.multiply(e.bindMatrix).toArray(s,16*c);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new po(s,16)),joints:a,skeleton:i.get(o)}),n.skin=t.skins.length-1}processNode(e){const t=this.json,i=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const t=e.quaternion.toArray(),i=e.position.toArray(),n=e.scale.toArray();Ef(t,[0,0,0,1])||(r.rotation=t),Ef(i,[0,0,0])||(r.translation=i),Ef(n,[1,1,1])||(r.scale=n)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===Ef(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=e.matrix.elements);if(""!==e.name&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const t=this.processMesh(e);null!==t&&(r.mesh=t)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const t=[];for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n];if(r.visible||!1===i.onlyVisible){const e=this.processNode(r);null!==e&&t.push(e)}}t.length>0&&(r.children=t)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,r)}));const o=t.nodes.push(r)-1;return n.set(e,o),o}processScene(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const n={};""!==e.name&&(n.name=e.name),t.scenes.push(n);const r=[];for(let o=0,a=e.children.length;o<a;o++){const t=e.children[o];if(t.visible||!1===i.onlyVisible){const e=this.processNode(t);null!==e&&r.push(e)}}r.length>0&&(n.nodes=r),this.serializeUserData(e,n)}processObjects(e){const t=new $l;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));const i=[];for(let n=0;n<e.length;n++)e[n]instanceof $l?this.processScene(e[n]):i.push(e[n]);i.length>0&&this.processObjects(i);for(let n=0;n<this.skins.length;++n)this.processSkin(this.skins[n]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}}class Pf{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const i=this.writer,n=i.json,r=i.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(1-e.penumbra)*e.angle,o.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},r[this.name]=!0);const a=n.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class kf{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Lf{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const t={index:i.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(t,e.clearcoatMap),r.clearcoatTexture=t}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const t={index:i.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(t,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){const t={index:i.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};1!==e.clearcoatNormalScale.x&&(t.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(t,e.clearcoatNormalMap),r.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Df{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.dispersion)return;const i=this.writer.extensionsUsed,n={};n.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class Nf{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const t={index:i.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(t,e.iridescenceMap),r.iridescenceTexture=t}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const t={index:i.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(t,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Of{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const t={index:i.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(t,e.transmissionMap),r.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Ff{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const i=this.writer,n=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const t={index:i.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(t,e.thicknessMap),r.thicknessTexture=t}e.attenuationDistance!==1/0&&(r.attenuationDistance=e.attenuationDistance),r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Uf{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;const i=this.writer.extensionsUsed,n={};n.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class zf{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(Cf)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.specularIntensityMap){const t={index:i.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(t,e.specularIntensityMap),r.specularTexture=t}if(e.specularColorMap){const t={index:i.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(t,e.specularColorMap),r.specularColorTexture=t}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Hf{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const t={index:i.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(t,e.sheenRoughnessMap),r.sheenRoughnessTexture=t}if(e.sheenColorMap){const t={index:i.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(t,e.sheenColorMap),r.sheenColorTexture=t}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Gf{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.anisotropy)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.anisotropyMap){const t={index:i.processTexture(e.anisotropyMap)};i.applyTextureTransform(t,e.anisotropyMap),r.anisotropyTexture=t}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class Vf{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;const i=this.writer.extensionsUsed,n={};n.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class Qf{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.bumpScale&&!e.bumpMap)return;const i=this.writer,n=i.extensionsUsed,r={};if(e.bumpMap){const t={index:i.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(t,e.bumpMap),r.bumpTexture=t}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class jf{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,n=e,r=new Float32Array(3*n.count),o=new Float32Array(4*n.count),a=new Float32Array(3*n.count),s=new hr,l=new Dn,c=new Ln,u=new Dn;for(let d=0;d<n.count;d++)n.getMatrixAt(d,s),s.decompose(l,c,u),l.toArray(r,3*d),c.toArray(o,4*d),u.toArray(a,3*d);const h={TRANSLATION:i.processAccessor(new po(r,3)),ROTATION:i.processAccessor(new po(o,4)),SCALE:i.processAccessor(new po(a,3))};n.instanceColor&&(h._COLOR_0=i.processAccessor(n.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:h},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}gf.Utils={insertKeyframe:function(e,t){const i=.001,n=e.getValueSize(),r=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+n),a=e.createInterpolant(new e.ValueBufferType(n));let s;if(0===e.times.length){r[0]=t;for(let e=0;e<n;e++)o[e]=0;s=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<i)return 0;r[0]=t,r.set(e.times,1),o.set(a.evaluate(t),0),o.set(e.values,n),s=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<i)return e.times.length-1;r[r.length-1]=t,r.set(e.times,0),o.set(e.values,0),o.set(a.evaluate(t),e.values.length),s=r.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<i)return l;if(e.times[l]<t&&e.times[l+1]>t){r.set(e.times.slice(0,l+1),0),r[l+1]=t,r.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*n),0),o.set(a.evaluate(t),(l+1)*n),o.set(e.values.slice((l+1)*n),(l+2)*n),s=l+1;break}}return e.times=r,e.values=o,s},mergeMorphTargetTracks:function(e,t){const i=[],n={},r=e.tracks;for(let o=0;o<r.length;++o){let e=r[o];const a=fh.parseTrackName(e.name),s=fh.findNode(t,a.nodeName);if("morphTargetInfluences"!==a.propertyName||void 0===a.propertyIndex){i.push(e);continue}if(e.createInterpolant!==e.InterpolantFactoryMethodDiscrete&&e.createInterpolant!==e.InterpolantFactoryMethodLinear){if(e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),e=e.clone(),e.setInterpolation(bi)}const l=s.morphTargetInfluences.length,c=s.morphTargetDictionary[a.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(void 0===n[s.uuid]){u=e.clone();const t=new u.ValueBufferType(l*u.times.length);for(let e=0;e<u.times.length;e++)t[e*l+c]=u.values[e];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=t,n[s.uuid]=u,i.push(u);continue}const h=e.createInterpolant(new e.ValueBufferType(1));u=n[s.uuid];for(let t=0;t<u.times.length;t++)u.values[t*l+c]=h.evaluate(u.times[t]);for(let t=0;t<e.times.length;t++){const i=this.insertKeyframe(u,e.times[t]);u.values[i*l+c]=e.values[t]}}return e.tracks=i,e}};const qf=e=>void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter((e=>Wf(e.material))),Wf=e=>e&&e.isMaterial&&!Array.isArray(e);class $f{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set;for(const i of e)i.traverse((e=>{if(!qf(e))return;const i=e.userData.variantMaterials,n=e.userData.variantData;for(const[r,o]of n){const e=i.get(o.index);e&&Wf(e.material)&&t.add(r)}}));t.forEach((e=>this.variantNames.push(e)))}writeMesh(e,t){if(!qf(e))return;const i=e.userData,n=i.variantMaterials,r=i.variantData,o=new Map,a=new Map,s=Array.from(r.values()).sort(((e,t)=>e.index-t.index));for(const[u,h]of s.entries())a.set(h.index,u);for(const u of r.values()){const e=n.get(u.index);if(!e||!Wf(e.material))continue;const t=this.writer.processMaterial(e.material);o.has(t)||o.set(t,{material:t,variants:[]}),o.get(t).variants.push(a.get(u.index))}const l=Array.from(o.values()).map((e=>e.variants.sort(((e,t)=>e-t))&&e)).sort(((e,t)=>e.material-t.material));if(0===l.length)return;const c=Wf(i.originalMaterial)?this.writer.processMaterial(i.originalMaterial):-1;for(const u of t.primitives)c>=0&&(u.material=c),u.extensions=u.extensions||{},u.extensions[this.name]={mappings:l}}afterParse(){if(0===this.variantNames.length)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map((e=>({name:e})));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class Xf{constructor(e,t,i,n,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const o=t.xr.getSession();if(n&&"XRWebGLBinding"in window){const i=new Zo(16);e.environment=i.texture;const n=t.getContext();switch(o.preferredReflectionFormat){case"srgba8":n.getExtension("EXT_sRGB");break;case"rgba16f":n.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(o,n),this.lightProbe.addEventListener("reflectionchange",(()=>{this.updateReflection()}))}o.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const e=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/e,i.primaryLightIntensity.y/e,i.primaryLightIntensity.z/e),this.xrLight.directionalLight.intensity=e,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class Yf extends Fl{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.lightProbe=new rh,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new ih,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,n=!1;e.xr.addEventListener("sessionstart",(()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then((r=>{i=new Xf(this,e,r,t,(()=>{n=!0,this.dispatchEvent({type:"estimationstart"})}))}))})),e.xr.addEventListener("sessionend",(()=>{i&&(i.dispose(),i=null),n&&this.dispatchEvent({type:"estimationend"})})),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}class Kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(.001,e)}update(e,t,i,n){const r=2e-4*this.naturalFrequency;if(null==e||0===n)return t;if(e===t&&0===this.velocity)return t;if(i<0)return e;const o=e-t,a=this.velocity+this.naturalFrequency*o,s=o+i*a,l=Math.exp(-this.naturalFrequency*i),c=(a-this.naturalFrequency*s)*l,u=-this.naturalFrequency*(c+a*l);return Math.abs(c)<r*Math.abs(n)&&u*o>=0?(this.velocity=0,t):(this.velocity=c,t+s*l)}}const Zf=.2,Jf=Math.PI/24,em=new sn,tm=(e,t,i)=>{let n=t>0?i>0?0:-Math.PI/2:i>0?Math.PI/2:Math.PI;for(let r=0;r<=12;++r)e.push(t+.17*Math.cos(n),i+.17*Math.sin(n),0,t+Zf*Math.cos(n),i+Zf*Math.sin(n),0),n+=Jf};class im extends No{constructor(e,t){const i=new So,n=[],r=[],{size:o,boundingBox:a}=e,s=o.x/2,l=("back"===t?o.y:o.z)/2;tm(r,s,l),tm(r,-s,l),tm(r,-s,-l),tm(r,s,-l);const c=r.length/3;for(let d=0;d<c-2;d+=2)n.push(d,d+1,d+3,d,d+3,d+2);const u=c-2;n.push(u,u+1,1,u,1,0),i.setAttribute("position",new go(r,3)),i.setIndex(n),super(i),this.side=t;const h=this.material;switch(h.side=2,h.transparent=!0,h.opacity=0,this.goalOpacity=0,this.opacityDamper=new Kf,this.hitPlane=new No(new la(2*(s+Zf),2*(l+Zf))),this.hitPlane.visible=!1,this.hitPlane.material.side=2,this.add(this.hitPlane),this.hitBox=new No(new Fo(o.x+.4,o.y+Zf,o.z+.4)),this.hitBox.visible=!1,this.hitBox.material.side=2,this.add(this.hitBox),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(o.y+Zf)/2+a.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,i){em.set(t,-i),this.hitPlane.visible=!0;const n=e.positionAndNormalFromPoint(em,this.hitPlane);return this.hitPlane.visible=!1,null==n?null:n.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const n=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),n}controllerIntersection(e,t){this.hitBox.visible=!0;const i=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,i}set offsetHeight(e){e-=.001,"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?.75:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}const nm=(e,t)=>({type:"number",number:e,unit:t}),rm=(()=>{const e={};return t=>{const i=t;if(i in e)return e[i];const n=[];let r=0;for(;t;){if(++r>1e3){t="";break}const e=om(t),i=e.nodes[0];if(null==i||0===i.terms.length)break;n.push(i),t=e.remainingInput}return e[i]=n}})(),om=(()=>{const e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,i=/^[\),]/;return n=>{const r=[];for(;n.length&&(n=n.trim(),!i.test(n));)if("("===n[0]){const{nodes:e,remainingInput:t}=cm(n);n=t,r.push({type:"function",name:{type:"ident",value:"calc"},arguments:e})}else if(e.test(n)){const e=am(n),t=e.nodes[0];if("("===(n=e.remainingInput)[0]){const{nodes:e,remainingInput:i}=cm(n);r.push({type:"function",name:t,arguments:e}),n=i}else r.push(t)}else if(t.test(n))r.push({type:"operator",value:n[0]}),n=n.slice(1);else{const{nodes:e,remainingInput:t}="#"===n[0]?lm(n):sm(n);if(0===e.length)break;r.push(e[0]),n=t}return{nodes:[{type:"expression",terms:r}],remainingInput:n}}})(),am=(()=>{const e=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{const i=t.match(e);return{nodes:[{type:"ident",value:null==i?t:t.substr(0,i.index)}],remainingInput:null==i?"":t.substr(i.index)}}})(),sm=(()=>{const e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,i=/^(m|mm|cm|rad|deg|[%])$/;return n=>{const r=n.match(e),o=null==r?"0":r[0],a=(n=null==o?n:n.slice(o.length)).match(t);let s=null!=a&&""!==a[0]?a[0]:null;const l=null==a?n:n.slice(s.length);return null==s||i.test(s)||(s=null),{nodes:[{type:"number",number:parseFloat(o)||0,unit:s}],remainingInput:l}}})(),lm=(()=>{const e=/^[a-f0-9]*/i;return t=>{const i=(t=t.slice(1).trim()).match(e);return{nodes:null==i?[]:[{type:"hex",value:i[0]}],remainingInput:null==i?t:t.slice(i[0].length)}}})(),cm=e=>{const t=[];for(e=e.slice(1).trim();e.length;){const i=om(e);if(t.push(i.nodes[0]),","===(e=i.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},um=Symbol("visitedTypes");class hm{constructor(e){this[um]=e}walk(e,t){const i=e.slice();for(;i.length;){const e=i.shift();switch(this[um].indexOf(e.type)>-1&&t(e),e.type){case"expression":i.unshift(...e.terms);break;case"function":i.unshift(e.name,...e.arguments)}}}}const dm=Object.freeze({type:"number",number:0,unit:null}),pm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:i,unit:n}=e;if(isFinite(i)){if("rad"===e.unit||null==e.unit)return e}else i=t,n="rad";return{type:"number",number:("deg"===n&&null!=i?i:0)*Math.PI/180,unit:"rad"}},fm=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:n,unit:r}=e;if(isFinite(n)){if("m"===e.unit)return e}else n=i,r="m";switch(r){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*n,unit:"m"}},mm=(()=>{const e=e=>e,t={rad:e,deg:pm,m:e,mm:fm,cm:fm};return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dm;isFinite(e.number)||(e.number=i.number,e.unit=i.unit);const{unit:n}=e;if(null==n)return e;const r=t[n];return null==r?i:r(e)}})();var gm,_m,vm;const ym=Symbol("evaluate"),Am=Symbol("lastValue");class bm{constructor(){this[gm]=null}static evaluatableFor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dm;if(e instanceof bm)return e;if("number"===e.type)return"%"===e.unit?new Sm(e,t):e;switch(e.name.value){case"calc":return new Im(e,t);case"env":return new Em(e)}return dm}static evaluate(e){return e instanceof bm?e.evaluate():e}static isConstant(e){return!(e instanceof bm)||e.isConstant}static applyIntrinsics(e,t){const{basis:i,keywords:n}=t,{auto:r}=n;return i.map(((t,i)=>{const o=null==r[i]?t:r[i];let a=e[i]?e[i]:o;if("ident"===a.type){const e=a.value;e in n&&(a=n[e][i])}return null!=a&&"ident"!==a.type||(a=o),"%"===a.unit?nm(a.number/100*t.number,t.unit):(a=mm(a,t),a.unit!==t.unit?t:a)}))}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[Am]||(this[Am]=this[ym]()),this[Am]}}gm=Am;const xm=Symbol("percentage"),wm=Symbol("basis");class Sm extends bm{constructor(e,t){super(),this[xm]=e,this[wm]=t}get isConstant(){return!0}[ym](){return nm(this[xm].number/100*this[wm].number,this[wm].unit)}}const Cm=Symbol("identNode");class Em extends bm{constructor(e){super(),this[_m]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;null!=t&&"ident"===t.type&&(this[Cm]=t)}get isConstant(){return!1}[(_m=Cm,ym)](){return null!=this[Cm]&&"window-scroll-y"===this[Cm].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:dm}}const Tm=/[\*\/]/,Mm=Symbol("evaluator");class Im extends bm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dm;if(super(),this[vm]=null,1!==e.arguments.length)return;const i=e.arguments[0].terms.slice(),n=[];for(;i.length;){const e=i.shift();if(n.length>0){const i=n[n.length-1];if("operator"===i.type&&Tm.test(i.value)){const i=n.pop(),r=n.pop();if(null==r)return;n.push(new km(i,bm.evaluatableFor(r,t),bm.evaluatableFor(e,t)));continue}}n.push("operator"===e.type?e:bm.evaluatableFor(e,t))}for(;n.length>2;){const[e,i,r]=n.splice(0,3);if("operator"!==i.type)return;n.unshift(new km(i,bm.evaluatableFor(e,t),bm.evaluatableFor(r,t)))}1===n.length&&(this[Mm]=n[0])}get isConstant(){return null==this[Mm]||bm.isConstant(this[Mm])}[(vm=Mm,ym)](){return null!=this[Mm]?bm.evaluate(this[Mm]):dm}}const Bm=Symbol("operator"),Rm=Symbol("left"),Pm=Symbol("right");class km extends bm{constructor(e,t,i){super(),this[Bm]=e,this[Rm]=t,this[Pm]=i}get isConstant(){return bm.isConstant(this[Rm])&&bm.isConstant(this[Pm])}[ym](){const e=mm(bm.evaluate(this[Rm])),t=mm(bm.evaluate(this[Pm])),{number:i,unit:n}=e,{number:r,unit:o}=t;if(null!=o&&null!=n&&o!=n)return dm;const a=n||o;let s;switch(this[Bm].value){case"+":s=i+r;break;case"-":s=i-r;break;case"/":s=i/r;break;case"*":s=i*r;break;default:return dm}return{type:"number",number:s,unit:a}}}const Lm=Symbol("evaluatables"),Dm=Symbol("intrinsics");class Nm extends bm{constructor(e,t){super(),this[Dm]=t;const i=e[0],n=null!=i?i.terms:[];this[Lm]=t.basis.map(((e,t)=>{const i=n[t];return null==i?{type:"ident",value:"auto"}:"ident"===i.type?i:bm.evaluatableFor(i,e)}))}get isConstant(){for(const e of this[Lm])if(!bm.isConstant(e))return!1;return!0}[ym](){const e=this[Lm].map((e=>bm.evaluate(e)));return bm.applyIntrinsics(e,this[Dm]).map((e=>e.number))}}var Om,Fm,Um,zm;const Hm=Symbol("instances"),Gm=Symbol("activateListener"),Vm=Symbol("deactivateListener"),Qm=Symbol("notifyInstances"),jm=Symbol("notify"),qm=Symbol("callback");class Wm{constructor(e){this[qm]=e}static[Qm](){for(const e of Wm[Hm])e[jm]()}static[(Om=Hm,Gm)](){window.addEventListener("scroll",this[Qm],{passive:!0})}static[Vm](){window.removeEventListener("scroll",this[Qm])}observe(){0===Wm[Hm].size&&Wm[Gm](),Wm[Hm].add(this)}disconnect(){Wm[Hm].delete(this),0===Wm[Hm].size&&Wm[Vm]()}[jm](){this[qm]()}}Wm[Om]=new Set;const $m=Symbol("computeStyleCallback"),Xm=Symbol("astWalker"),Ym=Symbol("dependencies"),Km=Symbol("onScroll");class Zm{constructor(e){this[Fm]={},this[Um]=new hm(["function"]),this[zm]=()=>{this[$m]({relatedState:"window-scroll"})},this[$m]=e}observeEffectsFor(e){const t={},i=this[Ym];this[Xm].walk(e,(e=>{const{name:n}=e,r=e.arguments[0].terms[0];if("env"===n.value&&null!=r&&"ident"===r.type&&"window-scroll-y"===r.value&&null==t["window-scroll"]){const e="window-scroll"in i?i["window-scroll"]:new Wm(this[Km]);e.observe(),delete i["window-scroll"],t["window-scroll"]=e}}));for(const n in i)i[n].disconnect();this[Ym]=t}dispose(){for(const e in this[Ym])this[Ym][e].disconnect()}}Fm=Ym,Um=Xm,zm=Km;const Jm=e=>{const t=e.observeEffects||!1,i=e.intrinsics instanceof Function?e.intrinsics:()=>e.intrinsics;return(n,r)=>{const o=n.updated,a=n.connectedCallback,s=n.disconnectedCallback,l=Symbol(`${r}StyleEffector`),c=Symbol(`${r}StyleEvaluator`),u=Symbol(`${r}UpdateEvaluator`),h=Symbol(`${r}EvaluateAndSync`);Object.defineProperties(n,{[l]:{value:null,writable:!0},[c]:{value:null,writable:!0},[u]:{value:function(){const e=rm(this[r]);this[c]=new Nm(e,i(this)),null==this[l]&&t&&(this[l]=new Zm((()=>this[h]()))),null!=this[l]&&this[l].observeEffectsFor(e)}},[h]:{value:function(){if(null==this[c])return;const t=this[c].evaluate();this[e.updateHandler](t)}},updated:{value:function(e){e.has(r)&&(this[u](),this[h]()),o.call(this,e)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(r,this[r])}},disconnectedCallback:{value:function(){s.call(this),null!=this[l]&&(this[l].dispose(),this[l]=null)}}})}},eg=e=>e<.5?2*e*e:(4-2*e)*e-1,tg=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eg;return n=>e+(t-e)*i(n)},ig=e=>{const t=[],i=[];let n=e.initialValue;for(let r=0;r<e.keyframes.length;++r){const o=e.keyframes[r],{value:a,frames:s}=o,l=o.ease||eg,c=tg(n,a,l);t.push(c),i.push(s),n=a}return((e,t)=>{const i=t.map((n=0,e=>n+=e));var n;return t=>{t=Qh(t,0,1),t*=i[i.length-1];const n=i.findIndex((e=>e>=t)),r=n<1?0:i[n-1],o=i[n];return e[n]((t-r)/(o-r))}})(t,i)};var ng=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const rg=ig({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),og=ig({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),ag="0deg 75deg 105%",sg=["front","right","back","left"],lg=["upper-","","lower-"],cg="auto",ug="wiggle",hg=()=>({basis:[pm(nm(30,"deg"))],keywords:{auto:[null]}}),dg=()=>({basis:[pm(nm(12,"deg"))],keywords:{auto:[null]}}),pg=(()=>{const e=rm(ag)[0].terms,t=mm(e[0]),i=mm(e[1]);return e=>{const n=e[jA].idealCameraDistance();return{basis:[t,i,nm(n,"m")],keywords:{auto:[null,null,nm(105,"%")]}}}})(),fg=e=>{const t=2.2*e[jA].boundingSphere.radius;return{basis:[nm(-1/0,"rad"),nm(0,"rad"),nm(t,"m")],keywords:{auto:[null,null,null]}}},mg=e=>{const t=pg(e),i=new Nm([],t).evaluate()[2];return{basis:[nm(1/0,"rad"),nm(Math.PI,"rad"),nm(i,"m")],keywords:{auto:[null,null,null]}}},gg=e=>{const t=e[jA].boundingBox.getCenter(new Dn);return{basis:[nm(t.x,"m"),nm(t.y,"m"),nm(t.z,"m")],keywords:{auto:[null,null,null]}}},_g=Math.PI/2,vg=Math.PI/3,yg=_g/2,Ag=2*Math.PI,bg=Symbol("controls"),xg=Symbol("panElement"),wg=Symbol("promptElement"),Sg=Symbol("promptAnimatedContainer"),Cg=Symbol("fingerAnimatedContainers"),Eg=Symbol("deferInteractionPrompt"),Tg=Symbol("updateAria"),Mg=Symbol("a11y"),Ig=Symbol("updateA11y"),Bg=Symbol("updateCameraForRadius"),Rg=Symbol("cancelPrompts"),Pg=Symbol("onChange"),kg=Symbol("onPointerChange"),Lg=Symbol("waitingToPromptUser"),Dg=Symbol("userHasInteracted"),Ng=Symbol("promptElementVisibleTime"),Og=Symbol("lastPromptOffset"),Fg=Symbol("cancellationSource"),Ug=Symbol("lastSpherical"),zg=Symbol("jumpCamera"),Hg=Symbol("initialized"),Gg=Symbol("maintainThetaPhi"),Vg=Symbol("syncCameraOrbit"),Qg=Symbol("syncFieldOfView"),jg=Symbol("syncCameraTarget"),qg=Symbol("syncMinCameraOrbit"),Wg=Symbol("syncMaxCameraOrbit"),$g=Symbol("syncMinFieldOfView"),Xg=Symbol("syncMaxFieldOfView"),Yg=new sn,Kg=new Dn,Zg=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),Jg=Math.PI/8,e_=.04,t_="user-interaction",i_="none",n_="automatic";class r_ extends $i{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=i_,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new ln,this.panPerPixel=0,this.spherical=new wh,this.goalSpherical=new wh,this.thetaDamper=new Kf,this.phiDamper=new Kf,this.radiusDamper=new Kf,this.logFov=Math.log(Zg.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Kf,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=e=>{if(this.enablePan)e.preventDefault();else for(const t of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:t.id})))},this.touchModeZoom=(e,t)=>{if(!this._disableZoom){const e=this.twoTouchDistance(this.pointers[0],this.pointers[1]),t=e_*this.zoomSensitivity*(this.lastSeparation-e)*50/this.scene.height;this.lastSeparation=e,this.userAdjustOrbit(0,0,t)}this.panPerPixel>0&&this.movePan(e,t)},this.disableScroll=e=>{e.preventDefault()},this.touchModeRotate=(e,t)=>{const{touchAction:i}=this._options;if(!this.touchDecided&&"none"!==i){this.touchDecided=!0;const n=Math.abs(e),r=Math.abs(t);if(this.changeSource===t_&&("pan-y"===i&&r>n||"pan-x"===i&&n>r))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(e,t)},this.onPointerDown=e=>{if(this.pointers.length>2)return;const{element:t}=this;0===this.pointers.length&&(t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=e.clientX,this.startPointerPosition.clientY=e.clientY,this.startTime=performance.now());try{t.setPointerCapture(e.pointerId)}catch(e){}this.pointers.push({clientX:e.clientX,clientY:e.clientY,id:e.pointerId}),this.isUserPointing=!1,"touch"===e.pointerType?(this.changeSource=e.altKey?n_:t_,this.onTouchChange(e)):(this.changeSource=t_,this.onMouseDown(e)),this.changeSource===t_&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=e=>{const t=this.pointers.find((t=>t.id===e.pointerId));if(null==t)return;if("mouse"===e.pointerType&&0===e.buttons)return void this.onPointerUp(e);const i=this.pointers.length,n=(e.clientX-t.clientX)/i,r=(e.clientY-t.clientY)/i;0===n&&0===r||(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(this.changeSource=e.altKey?n_:t_,null!==this.touchMode&&this.touchMode(n,r)):(this.changeSource=t_,this.panPerPixel>0?this.movePan(n,r):this.handleSinglePointerMove(n,r)))},this.onPointerUp=e=>{const{element:t}=this,i=this.pointers.findIndex((t=>t.id===e.pointerId));-1!==i&&this.pointers.splice(i,1),this.panPerPixel>0&&!e.altKey&&this.resetRadius(),0===this.pointers.length?(t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(e)):null!==this.touchMode&&this.onTouchChange(e),this.scene.element[xg].style.opacity=0,t.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=e=>{this.changeSource=t_;const t=e.deltaY*(1==e.deltaMode?18:1)*e_*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,t),e.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=e=>{const{changeSource:t}=this;this.changeSource=t_,(e.shiftKey&&this.enablePan?this.panKeyCodeHandler(e):this.orbitZoomKeyCodeHandler(e))?(e.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=t},this._options=Object.assign({},Zg),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",(()=>{}),{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wh).copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=0===t?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius;const{minimumAzimuthalAngle:n,maximumAzimuthalAngle:r,minimumPolarAngle:o,maximumPolarAngle:a,minimumRadius:s,maximumRadius:l}=this._options,{theta:c,phi:u,radius:h}=this.goalSpherical,d=Qh(e,n,r);isFinite(n)||isFinite(r)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-d)+d);const p=Qh(t,o,a),f=Qh(i,s,l);return!(d===c&&p===u&&f===h||!(isFinite(d)&&isFinite(p)&&isFinite(f))||(this.goalSpherical.theta=d,this.goalSpherical.phi=p,this.goalSpherical.radius=f,this.goalSpherical.makeSafe(),0))}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=Qh(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:n,phi:r,radius:o}=this.goalSpherical,{minimumRadius:a,maximumRadius:s,minimumFieldOfView:l,maximumFieldOfView:c}=this._options,u=this.spherical.theta-n,h=Math.PI-.001,d=n-Qh(e,-h-u,h-u),p=r-t,f=0===i?0:((i>0?s:a)-o)/(Math.log(i>0?c:l)-this.goalLogFov),m=o+i*(isFinite(f)?f:2*(s-a));if(this.setOrbit(d,p,m),0!==i){const e=this.goalLogFov+i;this.setFieldOfView(Math.exp(e))}}jumpToGoal(){this.update(0,1e4)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:n}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(r)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,n),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new br(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:n}=e,{clientX:r,clientY:o}=t,a=r-i,s=o-n;return Math.sqrt(a*a+s*s)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),n=this.pixelLengthToSphericalAngle(t);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,n,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=.018*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,n=Kg.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;n.multiplyScalar(r);const o=i.getTarget();o.add(n.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(o,o),i.setTarget(o.x,o.y,o.z)}recenter(e){if(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(null==i){const{cameraTarget:e}=t.element;t.element.cameraTarget="",t.element.cameraTarget=e,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(Yg.set(0,0));if(null==t)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:n,phi:r}=this.spherical,o=n-e.yaw,a=Kg.set(Math.sin(r)*Math.sin(o),Math.cos(r),Math.sin(r)*Math.cos(o)),s=a.dot(t.position.sub(i));i.add(a.multiplyScalar(s)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-s)}onTouchChange(e){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),e.altKey||(this.scene.element[xg].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(2===e.button||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[xg].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,e_*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-.04*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-Jg,0);break;case"ArrowDown":this.userAdjustOrbit(0,Jg,0);break;case"ArrowLeft":this.userAdjustOrbit(-Jg,0,0);break;case"ArrowRight":this.userAdjustOrbit(Jg,0,0);break;default:t=!1}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}}const o_=150,a_="not-presenting",s_="session-started",l_="tracking",c_=new Dn,u_=new Ln,h_=new hr,d_=new Dn,p_=new $o(45,1,.1,100),f_=(new So).setFromPoints([new Dn(0,0,0),new Dn(0,0,-1)]),m_=new Fo;class g_ extends $i{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Dn,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Dn,this.relativeOrientation=new Ln,this.scaleLine=new qc(f_),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Dn,this.goalYaw=0,this.goalScale=1,this.xDamper=new Kf,this.yDamper=new Kf,this.zDamper=new Kf,this.yawDamper=new Kf,this.pitchDamper=new Kf,this.rollDamper=new Kf,this.scaleDamper=new Kf,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=e=>{const t=this.presentedScene,i=e.target;if(null!=this.placementBox.controllerIntersection(t,i))null!=this.selectedController&&(this.selectedController.userData.line.visible=!1,t.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/t.pivot.scale.x,this.scaleLine.visible=!0)),i.attach(t.pivot),this.selectedController=i,t.setShadowIntensity(.01);else{const e=i===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(i.quaternion).invert().multiply(t.pivot.getWorldQuaternion(u_)),e.userData.turning=!1,i.userData.turning=!0,i.userData.line.visible=!1}},this.onControllerSelectEnd=e=>{const t=e.target;if(t.userData.turning=!1,t.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,null!=this.selectedController&&this.selectedController!=t)return;const i=this.presentedScene;i.attach(i.pivot),this.selectedController=null,this.goalYaw=Math.atan2(i.pivot.matrix.elements[8],i.pivot.matrix.elements[10]),this.goalPosition.x=i.pivot.position.x,this.goalPosition.z=i.pivot.position.z},this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new im(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=e=>{const t=this.transientHitTestSource;if(null==t)return;const i=this.frame.getHitTestResultsForTransientInput(t),n=this.presentedScene,r=this.placementBox;if(1===i.length){this.inputSource=e.inputSource;const{axes:t}=this.inputSource.gamepad,i=r.getHit(this.presentedScene,t[0],t[1]);r.show=!0,null!=i?(this.isTranslating=!0,this.lastDragPosition.copy(i)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*t[0])}else if(2===i.length){r.show=!0,this.isTwoFingering=!0;const{separation:e}=this.fingerPolar(i);this.firstRatio=e/n.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){Hh();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return Hh(),await navigator.xr.isSessionSupported("immersive-ar")}catch(fv){return console.warn("Request to present in WebXR denied:"),console.warn(fv),console.warn("Falling back to next ar-mode"),!1}}async present(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise(((e,t)=>{requestAnimationFrame((()=>e()))}));e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),!0===t&&(this.xrLight=new Yf(this.threeRenderer),this.xrLight.addEventListener("estimationstart",(()=>{if(!this.isPresenting||null==this.xrLight)return;const e=this.presentedScene;e.add(this.xrLight),e.environment=this.xrLight.environment})));const n=await this.resolveARSession();n.addEventListener("end",(()=>{this.postSessionCleanup()}),{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const o=await n.requestReferenceSpace("viewer");this.xrMode=n.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const a=20*Math.PI/180,s=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});n.requestHitTestSource({space:o,offsetRay:s}).then((e=>{this.initialHitSource=e})),"screen-space"!==this.xrMode&&(this.setupControllers(),this.xDamper.setDecayTime(o_),this.yDamper.setDecayTime(o_),this.zDamper.setDecayTime(o_),this.yawDamper.setDecayTime(o_),this.pitchDamper.setDecayTime(o_),this.rollDamper.setDecayTime(o_)),this.currentSession=n,this.placementBox=new im(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:s_})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new qc(f_);t.name="line",t.scale.z=5,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const i=t.clone();this.controller2.userData.line=i,this.controller2.add(i),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:n}=e,r=.1/Math.max(n.x,n.y,n.z),o=new No(m_);o.name="box",o.scale.copy(n).multiplyScalar(r),o.visible=!1,this.controller1.userData.box=o,e.add(o);const a=o.clone();this.controller2.userData.box=a,e.add(a)}}hover(e){if("screen-space"===this.xrMode||this.selectedController==e)return!1;const t=this.presentedScene,i=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(null==i||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=null==i?5:i.distance,null!=i}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise((e=>{this.resolveCleanup=e}));try{await this.currentSession.end(),await e}catch(e){console.warn("Error while trying to end WebXR AR session"),console.warn(e),this.postSessionCleanup()}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(null!=e){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,null!=t){const{element:e}=t;null!=this.xrLight&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const i=this.turntableRotation;null!=i&&(t.yaw=i);const n=this.oldShadowIntensity;null!=n&&t.setShadowIntensity(n),t.setEnvironmentAndSkybox(e[Wh],e[$h]);const r=this.oldTarget;t.setTarget(r.x,r.y,r.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:o,height:a}=e.getBoundingClientRect();t.setSize(o,a),requestAnimationFrame((()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:i_}}))}))}this.renderer.height=0;const i=this.exitWebXRButtonContainer;null!=i&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const n=this.transientHitTestSource;null!=n&&(n.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;null!=r&&(r.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),"screen-space"!==this.xrMode&&(null!=this.controller1&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),null!=this.controller2&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:a_})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(p_),t.xrCamera=i.getCamera();const{elements:n}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(n[1],n[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const t=e.recommendedViewportScale;e.requestViewportScale(Math.max(t,.25))}const r=i.getBaseLayer();if(null!=r){const t=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(t.x,t.y,t.width,t.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:i}=e,{position:n}=t,r=e.getCamera(),{width:o,height:a}=this.overlay.getBoundingClientRect();e.setSize(o,a),r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const{theta:s}=i.getCameraOrbit(),l=r.getWorldDirection(c_);e.yaw=Math.atan2(-l.x,-l.z)-s,this.goalYaw=e.yaw;const c=Math.max(1,2*e.boundingSphere.radius);n.copy(r.position).add(l.multiplyScalar(c)),this.updateTarget();const u=e.getTarget();if(n.add(u).sub(this.oldTarget),this.goalPosition.copy(n),e.setHotspotsVisibility(!0),"screen-space"===this.xrMode){const{session:e}=this.frame;e.addEventListener("selectstart",this.onSelectStart),e.addEventListener("selectend",this.onSelectEnd),e.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((e=>{this.transientHitTestSource=e}))}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(c_.copy(t).sub(this.presentedScene.getCamera().position),c_.length()>10)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(null==i)return null;const n=h_.fromArray(i.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(n.elements[4],n.elements[6])),n.elements[5]>.75!==this.placeOnWall?d_.setFromMatrixPosition(n):null}moveToFloor(e){const t=this.initialHitSource;if(null==t)return;const i=e.getHitTestResults(t);if(0==i.length)return;const n=i[0],r=this.getHitPoint(n);null!=r&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:"object-placed"}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,n=i[0]-t[0],r=i[1]-t[1],o=Math.atan2(r,n);let a=this.lastAngle-o;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=o,{separation:Math.sqrt(n*n+r*r),deltaYaw:a}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<.2?1:t}processInput(e){const t=this.transientHitTestSource;if(null==t)return;if(!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),n=this.presentedScene,r=n.pivot.scale.x;if(this.isTwoFingering)if(i.length<2)this.isTwoFingering=!1;else{const{separation:e,deltaYaw:t}=this.fingerPolar(i);!1===this.placeOnWall&&(this.goalYaw+=t),n.canScale&&this.setScale(e)}else if(2!==i.length)if(this.isRotating){const e=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=e-this.lastAngle,this.lastAngle=e}else this.isTranslating&&i.forEach((e=>{if(e.inputSource!==this.inputSource)return;let t=null;if(e.results.length>0&&(t=this.getHitPoint(e.results[0])),null==t&&(t=this.getTouchLocation()),null!=t){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){const e=t.y-this.lastDragPosition.y;if(e<0){this.placementBox.offsetHeight=e/r,this.presentedScene.setShadowOffset(e);const i=c_.copy(n.getCamera().position),o=-e/(i.y-t.y);i.multiplyScalar(o),t.multiplyScalar(1-o).add(i)}}this.goalPosition.add(t),this.lastDragPosition.copy(t)}}));else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:e}=this.fingerPolar(i);this.firstRatio=e/r}}moveScene(e){const t=this.presentedScene,{pivot:i}=t,n=this.placementBox;if(n.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(i.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&i.quaternion.premultiply(u_.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),i.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(i.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&i.quaternion.premultiply(u_.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),i.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const e=this.controllerSeparation();this.setScale(e),this.scaleLine.scale.z=-e,this.scaleLine.lookAt(this.controller2.position)}const r=t.pivot.scale.x;if(this.goalScale!==r){const i=this.scaleDamper.update(r,this.goalScale,e,1);t.pivot.scale.set(i,i,i)}if(i.parent!==t)return;const{position:o}=i,a=t.boundingSphere.radius,s=this.goalPosition;let l=i_;if(!s.equals(o)){l=t_;let{x:i,y:r,z:c}=o;if(i=this.xDamper.update(i,s.x,e,a),r=this.yDamper.update(r,s.y,e,a),c=this.zDamper.update(c,s.z,e,a),o.set(i,r,c),"screen-space"===this.xrMode&&!this.isTranslating){const e=s.y-r;this.placementComplete&&!1===this.placeOnWall?(n.offsetHeight=e/t.pivot.scale.x,t.setShadowOffset(e)):0===e&&(this.placementComplete=!0,n.show=!1,t.setShadowIntensity(.8))}"screen-space"!==this.xrMode&&s.equals(o)&&t.setShadowIntensity(.8)}t.updateTarget(e),u_.setFromAxisAngle(c_.set(0,1,0),this.goalYaw);const c=t.pivot.quaternion.angleTo(u_),u=c-this.yawDamper.update(c,0,e,Math.PI);t.pivot.quaternion.rotateTowards(u_,u),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:l}}))}onWebXRFrame(e,t){if("screen-space"!==this.xrMode){const e=this.hover(this.controller1),t=this.hover(this.controller2);this.placementBox.show=(e||t)&&!this.isTwoFingering}this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),n=t.getViewerPose(i);null==n&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:"not-tracking"}));const r=this.presentedScene;if(null==n||null==r||!r.element.loaded)return void this.threeRenderer.clear();!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:l_}));let o=!0;for(const a of n.views){if(this.updateView(a),o){this.moveToFloor(t),this.processInput(t);const i=e-this.lastTick;this.moveScene(i),this.renderer.preRender(r,e,i),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),o=!1}}}function __(e){const t=new Map,i=new Map,n=e.clone();return v_(e,n,(function(e,n){t.set(n,e),i.set(e,n)})),n.traverse((function(e){if(!e.isSkinnedMesh)return;const n=e,r=t.get(e),o=r.skeleton.bones;n.skeleton=r.skeleton.clone(),n.bindMatrix.copy(r.bindMatrix),n.skeleton.bones=o.map((function(e){return i.get(e)})),n.bind(n.skeleton,n.bindMatrix)})),n}function v_(e,t,i){i(e,t);for(let n=0;n<e.children.length;n++)v_(e.children[n],t.children[n],i)}const y_=Symbol("prepared"),A_=Symbol("prepare"),b_=Symbol("preparedGLTF"),x_=Symbol("clone");class w_{constructor(e){this[b_]=e}static prepare(e){if(null==e.scene)throw new Error("Model does not have a scene");if(e[y_])return e;const t=this[A_](e);return t[y_]=!0,t}static[A_](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[b_].parser}get animations(){return this[b_].animations}get scene(){return this[b_].scene}get scenes(){return this[b_].scenes}get cameras(){return this[b_].cameras}get asset(){return this[b_].asset}get userData(){return this[b_].userData}clone(){return new this.constructor(this[x_]())}dispose(){this.scenes.forEach((e=>{e.traverse((e=>{const t=e;t.material&&((Array.isArray(t.material)?t.material:[t.material]).forEach((e=>{for(const t in e){const i=e[t];if(i instanceof Mn){const e=i.source.data;null!=e.close&&e.close(),i.dispose()}}e.dispose()})),t.geometry.dispose())}))}))}[x_](){const e=this[b_],t=__(this.scene);S_(t,this.scene);const i=[t],n=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:n})}}const S_=(e,t)=>{C_(e,t,((e,t)=>{void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.variantData&&(e.userData.variantData=t.userData.variantData),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)}))},C_=(e,t,i)=>{i(e,t);for(let n=0;n<e.children.length;n++)C_(e.children[n],t.children[n],i)},E_=Symbol("threeGLTF"),T_=Symbol("gltf"),M_=Symbol("gltfElementMap"),I_=Symbol("threeObjectMap"),B_=Symbol("parallelTraverseThreeScene"),R_=Symbol("correlateOriginalThreeGLTF"),P_=Symbol("correlateCloneThreeGLTF");class k_{constructor(e,t,i,n){this[E_]=e,this[T_]=t,this[M_]=n,this[I_]=i}static from(e,t){return null!=t?this[P_](e,t):this[R_](e)}static[R_](e){const t=e.parser.json,i=e.parser.associations,n=new Map,r={name:"Default"},o={type:"materials",index:-1};for(const a of i.keys())a instanceof ao&&null==i.get(a)&&(o.index<0&&(null==t.materials&&(t.materials=[]),o.index=t.materials.length,t.materials.push(r)),a.name=r.name,i.set(a,{materials:o.index}));for(const[a,s]of i){s&&(a.userData=a.userData||{},a.userData.associations=s);for(const e in s)if(null!=e&&"primitives"!==e){const i=e,r=(t[i]||[])[s[i]];if(null==r)continue;let o=n.get(r);null==o&&(o=new Set,n.set(r,o)),o.add(a)}}return new k_(e,t,i,n)}static[P_](e,t){const i=t.threeGLTF,n=t.gltf,r=JSON.parse(JSON.stringify(n)),o=new Map,a=new Map;for(let s=0;s<i.scenes.length;s++)this[B_](i.scenes[s],e.scenes[s],((e,i)=>{const n=t.threeObjectMap.get(e);if(null!=n)for(const t in n)if(null!=t&&"primitives"!==t){const e=t,s=n[e],l=r[e][s],c=o.get(i)||{};c[e]=s,o.set(i,c);const u=a.get(l)||new Set;u.add(i),a.set(l,u)}}));return new k_(e,r,o,a)}static[B_](e,t,i){const n=(e,t)=>{if(i(e,t),e.isObject3D){const r=e,o=t;if(r.material)if(Array.isArray(r.material))for(let e=0;e<r.material.length;++e)i(r.material[e],o.material[e]);else i(r.material,o.material);for(let i=0;i<e.children.length;++i)n(e.children[i],t.children[i])}};n(e,t)}get threeGLTF(){return this[E_]}get gltf(){return this[T_]}get gltfElementMap(){return this[M_]}get threeObjectMap(){return this[I_]}}const L_=Symbol("correlatedSceneGraph");class D_ extends w_{static[A_](e){const t=super[A_](e);null==t[L_]&&(t[L_]=k_.from(t));const{scene:i}=t,n=new ir(void 0,1/0);return i.traverse((e=>{e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);const i=e;if(i.material){const{geometry:e}=i;i.castShadow=!0,i.isSkinnedMesh&&(e.boundingSphere=n,e.boundingBox=null);const r=i.material;if(!0===r.isMeshBasicMaterial&&(r.toneMapped=!1),r.shadowSide=0,r.aoMap){const{gltf:i,threeObjectMap:n}=t[L_],o=n.get(r);if(null!=i.materials&&null!=o&&null!=o.materials){const t=i.materials[o.materials];t.occlusionTexture&&0===t.occlusionTexture.texCoord&&null!=e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv)}}}})),t}get correlatedSceneGraph(){return this[b_][L_]}[x_](){const e=super[x_](),t=new Map;return e.scene.traverse((e=>{const i=e;if(i.material){const e=i.material;if(null!=e){if(t.has(e.uuid))return void(i.material=t.get(e.uuid));i.material=e.clone(),t.set(e.uuid,i.material)}}const n=e;void 0!==n.target&&n.add(n.target)})),e[L_]=k_.from(e,this.correlatedSceneGraph),e}}const N_=(e,t,i)=>{let n;switch(e){case wt:n=new Uint8ClampedArray(t*i*4);break;case Bt:n=new Uint16Array(t*i*4);break;case Mt:n=new Uint32Array(t*i*4);break;case St:n=new Int8Array(t*i*4);break;case Ct:n=new Int16Array(t*i*4);break;case Tt:n=new Int32Array(t*i*4);break;case It:n=new Float32Array(t*i*4);break;default:throw new Error("Unsupported data type")}return n};let O_;class F_{constructor(e){var t,i,n,r,o,a,s,l,c,u,h,d,p,f,m,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const _={format:Lt,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(i=e.renderTargetOptions)||void 0===i?void 0:i.anisotropy:1,generateMipmaps:void 0!==(null===(n=e.renderTargetOptions)||void 0===n?void 0:n.generateMipmaps)&&(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps),magFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter)?null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter:At,minFilter:void 0!==(null===(s=e.renderTargetOptions)||void 0===s?void 0:s.minFilter)?null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter:At,samples:void 0!==(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.samples:void 0,wrapS:void 0!==(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS)?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.wrapS:mt,wrapT:void 0!==(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)?null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapT:mt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=F_.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new $l,this._camera=new ba,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,i,n)=>{if(void 0!==O_)return O_;const r=new Rn(1,1,n);t.setRenderTarget(r);const o=new No(new la,new so({color:16777215}));t.render(o,i),t.setRenderTarget(null);const a=N_(e,r.width,r.height);return t.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),o.geometry.dispose(),o.material.dispose(),O_=0!==a[0],O_})(this._type,this._renderer,this._camera,_)){let e;this._type===Bt&&(e=this._renderer.extensions.has("EXT_color_buffer_float")?It:void 0),void 0!==e?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to 1015`),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new No(new la,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Rn(this.width,this.height,_),this._renderTarget.texture.mapping=void 0!==(null===(m=e.renderTargetOptions)||void 0===m?void 0:m.mapping)?null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping:ct}static instantiateRenderer(){const e=new Wl;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=N_(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Cc(this.toArray(),this.width,this.height,Lt,this._type,(null==e?void 0:e.mapping)||ct,(null==e?void 0:e.wrapS)||mt,(null==e?void 0:e.wrapT)||mt,(null==e?void 0:e.magFilter)||At,(null==e?void 0:e.minFilter)||At,(null==e?void 0:e.anisotropy)||1,Mi);return t.generateMipmaps=void 0!==(null==e?void 0:e.generateMipmaps)&&(null==e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Vo&&Object.values(this.material.uniforms).forEach((e=>{e.value instanceof Mn&&e.value.dispose()})),Object.values(this.material).forEach((e=>{e instanceof Mn&&e.dispose()})),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class U_ extends Vo{constructor(e){let{gamma:t,offsetHdr:i,offsetSdr:n,gainMapMin:r,gainMapMax:o,maxDisplayBoost:a,hdrCapacityMin:s,hdrCapacityMax:l,sdr:c,gainMap:u}=e;super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new Dn(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:(new Dn).fromArray(i)},offsetSdr:{value:(new Dn).fromArray(n)},gainMapMin:{value:(new Dn).fromArray(r)},gainMapMax:{value:(new Dn).fromArray(o)},weightFactor:{value:(Math.log2(a)-s)/(l-s)}},blending:0,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=s,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class z_ extends Error{}class H_ extends Error{}const G_=(e,t,i)=>{var n;let r;const o=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.nodeValue;if(o)r=o;else{const n=e.getElementsByTagName(t)[0];if(!n){if(i)return i;throw new Error(`Can't find ${t} in gainmap metadata`)}{const e=n.getElementsByTagName("rdf:li");if(3!==e.length)throw new Error(`Gainmap metadata contains an array of items for ${t} but its length is not 3`);r=Array.from(e).map((e=>e.innerHTML))}}return r};class V_{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise(((t,i)=>{const n=this.options.debug,r=new DataView(e.buffer);if(65496!==r.getUint16(0))return void i(new Error("Not a valid jpeg"));const o=r.byteLength;let a,s=2,l=0;for(;s<o;){if(++l>250)return void i(new Error(`Found no marker after ${l} loops \ud83d\ude35`));if(255!==r.getUint8(s))return void i(new Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${r.getUint8(s).toString(16)}`));if(a=r.getUint8(s+1),n&&console.log(`Marker: ${a.toString(16)}`),226===a){n&&console.log("Found APP2 marker (0xffe2)");const e=s+4;if(1297106432===r.getUint32(e)){const n=e+4;let o;if(18761===r.getUint16(n))o=!1;else{if(19789!==r.getUint16(n))return void i(new Error("No valid endianness marker found in TIFF header"));o=!0}if(42!==r.getUint16(n+2,!o))return void i(new Error("Not valid TIFF data! (no 0x002A marker)"));const a=r.getUint32(n+4,!o);if(a<8)return void i(new Error("Not valid TIFF data! (First offset less than 8)"));const s=n+a,l=r.getUint16(s,!o),c=s+2;let u=0;for(let e=c;e<c+12*l;e+=12)45057===r.getUint16(e,!o)&&(u=r.getUint32(e+8,!o));const h=s+2+12*l+4,d=[];for(let e=h;e<h+16*u;e+=16){const t={MPType:r.getUint32(e,!o),size:r.getUint32(e+4,!o),dataOffset:r.getUint32(e+8,!o),dependantImages:r.getUint32(e+12,!o),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=n+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,d.push(t)}if(this.options.extractNonFII&&d.length){const e=new Blob([r]),i=[];for(const t of d){if(t.isFII&&!this.options.extractFII)continue;const n=e.slice(t.start,t.end+1,"image/jpeg");i.push(n)}t(i)}}}s+=2+r.getUint16(s+2)}}))}}const Q_=e=>new Promise(((t,i)=>{const n=document.createElement("img");n.onload=()=>{t(n)},n.onerror=e=>{i(e)},n.src=URL.createObjectURL(e)}));class j_ extends Nu{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Lu}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new U_({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Mn,sdr:new Mn});return new F_({width:16,height:16,type:Bt,colorSpace:Mi,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,n){const r=n?new Blob([n],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,s,l=!1;if("undefined"==typeof createImageBitmap){const e=await Promise.all([r?Q_(r):Promise.resolve(void 0),Q_(o)]);s=e[0],a=e[1],l=!0}else{const e=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);s=e[0],a=e[1]}const c=new Mn(s||new ImageData(2,2),ct,mt,mt,At,1008,Lt,wt,1,Mi);c.flipY=l,c.needsUpdate=!0;const u=new Mn(a,ct,mt,mt,At,1008,Lt,wt,1,Ti);u.flipY=l,u.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=c,e.material.sdr=u,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class q_ extends j_{load(e,t,i,n){const r=this.prepareQuadRenderer(),o=new Uu(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,(async i=>{if("string"==typeof i)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const o=new Uint8Array(i);let a,s,l;try{const e=await(async e=>{const t=(e=>{var t,i;let n;n="undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let r=n.indexOf("<x:xmpmeta");const o=new DOMParser;for(;-1!==r;){const a=n.indexOf("x:xmpmeta>",r);n.slice(r,a+10);const s=n.slice(r,a+10);try{const e=o.parseFromString(s,"text/xml").getElementsByTagName("rdf:Description")[0],n=G_(e,"hdrgm:GainMapMin","0"),r=G_(e,"hdrgm:GainMapMax"),a=G_(e,"hdrgm:Gamma","1"),l=G_(e,"hdrgm:OffsetSDR","0.015625"),c=G_(e,"hdrgm:OffsetHDR","0.015625");let u=null===(t=e.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===t?void 0:t.nodeValue;u||(u="0");const h=null===(i=e.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===i?void 0:i.nodeValue;if(!h)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(n)?n.map((e=>parseFloat(e))):[parseFloat(n),parseFloat(n),parseFloat(n)],gainMapMax:Array.isArray(r)?r.map((e=>parseFloat(e))):[parseFloat(r),parseFloat(r),parseFloat(r)],gamma:Array.isArray(a)?a.map((e=>parseFloat(e))):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map((e=>parseFloat(e))):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map((e=>parseFloat(e))):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(u),hdrCapacityMax:parseFloat(h)}}catch(e){}r=n.indexOf("<x:xmpmeta",a)}})(e);if(!t)throw new H_("Gain map XMP metadata not found");const i=new V_({extractFII:!0,extractNonFII:!0}),n=await i.extract(e);if(2!==n.length)throw new z_("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:t}})(o);a=e.sdr,s=e.gainMap,l=e.metadata}catch(t){if(!(t instanceof H_||t instanceof z_))throw t;console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},a=o}try{await this.render(r,l,a,s)}catch(t){return this.manager.itemError(e),"function"==typeof n&&n(t),void r.disposeOnDemandRenderer()}"function"==typeof t&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()}),i,(t=>{this.manager.itemError(e),"function"==typeof n&&n(t)})),r}}class W_ extends Hu{constructor(e){super(e),this.type=Bt}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},i=function(e,t,i){t=t||1024;let n=e.pos,r=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(r=s.indexOf("\n"))&&o<t&&n<e.byteLength;)a+=s,o+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<r&&(e.pos+=o+r+1,a+s.slice(0,r))},n=function(e,t,i,n){const r=e[t+3],o=Math.pow(2,r-128)/255;i[n+0]=e[t+0]*o,i[n+1]=e[t+1]*o,i[n+2]=e[t+2]*o,i[n+3]=1},r=function(e,t,i,n){const r=e[t+3],o=Math.pow(2,r-128)/255;i[n+0]=co(Math.min(e[t+0]*o,65504)),i[n+1]=co(Math.min(e[t+1]*o,65504)),i[n+2]=co(Math.min(e[t+2]*o,65504)),i[n+3]=co(1)},o=new Uint8Array(e);o.pos=0;const a=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=i(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=i(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(n))&&(s.gamma=parseFloat(c[1])),(c=l.match(r))&&(s.exposure=parseFloat(c[1])),(c=l.match(o))&&(s.valid|=2,s.format=c[1]),(c=l.match(a))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid||t(3,"missing format specifier"),4&s.valid||t(3,"missing image size specifier"),s}(o),s=a.width,l=a.height,c=function(e,i,n){const r=i;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);r!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const o=new Uint8Array(4*i*n);o.length||t(4,"unable to allocate buffer space");let a=0,s=0;const l=4*r,c=new Uint8Array(4),u=new Uint8Array(l);let h=n;for(;h>0&&s<e.byteLength;){s+4>e.byteLength&&t(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==r||t(3,"bad rgbe scanline format");let i,n=0;for(;n<l&&s<e.byteLength;){i=e[s++];const r=i>128;if(r&&(i-=128),(0===i||n+i>l)&&t(3,"bad scanline data"),r){const t=e[s++];for(let e=0;e<i;e++)u[n++]=t}else u.set(e.subarray(s,s+i),n),n+=i,s+=i}const d=r;for(let e=0;e<d;e++){let t=0;o[a]=u[e+t],t+=r,o[a+1]=u[e+t],t+=r,o[a+2]=u[e+t],t+=r,o[a+3]=u[e+t],a+=4}h--}return o}(o.subarray(o.pos),s,l);let u,h,d;switch(this.type){case It:d=c.length/4;const e=new Float32Array(4*d);for(let i=0;i<d;i++)n(c,4*i,e,4*i);u=e,h=It;break;case Bt:d=c.length/4;const t=new Uint16Array(4*d);for(let i=0;i<d;i++)r(c,4*i,t,4*i);u=t,h=Bt;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:s,height:l,data:u,header:a.string,gamma:a.gamma,exposure:a.exposure,type:h}}setDataType(e){return this.type=e,this}load(e,t,i,n){return super.load(e,(function(e,i){switch(e.type){case It:case Bt:e.colorSpace=Mi,e.minFilter=At,e.magFilter=At,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)}),i,n)}}const $_={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},X_={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class Y_ extends $l{constructor(e){super(),this.position.y=-3.5;const t=new Fo;t.deleteAttribute("uv");const i=new du({metalness:0,side:1}),n=new du({metalness:0}),r="legacy"==e?$_:X_,o=new eh(16777215,r.topLight.intensity,28,2);o.position.set(...r.topLight.position),this.add(o);const a=new No(t,i);a.position.set(...r.room.position),a.scale.set(...r.room.scale),this.add(a);for(const s of r.boxes){const e=new No(t,n);e.position.set(...s.position),e.rotation.set(0,s.rotation,0),e.scale.set(...s.scale),this.add(e)}for(const s of r.lights){const e=new No(t,this.createAreaLightMaterial(s.intensity));e.position.set(...s.position),e.scale.set(...s.scale),this.add(e)}}createAreaLightMaterial(e){const t=new so;return t.color.setScalar(e),t}}const K_=/\.hdr(\.js)?$/;class Z_{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return null==this._ldrLoader&&(this._ldrLoader=new Gu),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return null==this._imageLoader&&(this._imageLoader=new q_(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return null==this._hdrLoader&&(this._hdrLoader=new W_,this._hdrLoader.setDataType(Bt)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(null==this._lottieLoader){const{LottieLoader:e}=await i(424)(this.lottieLoaderUrl);this._lottieLoader=new e}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const i=await new Promise(((i,n)=>this.ldrLoader(t).load(e,i,(()=>{}),n)));return i.name=e,i.flipY=!1,i}async loadLottie(e,t,i){const n=await this.getLottieLoader(i);n.setQuality(t);const r=await new Promise(((t,i)=>n.load(e,t,(()=>{}),i)));return r.name=e,r}async loadEquirect(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{const n=K_.test(e),r=n?this.hdrLoader(t):this.imageLoader(t),o=await new Promise(((t,n)=>r.load(e,(e=>{const{renderTarget:i}=e;if(null!=i){const{texture:n}=i;e.dispose(!1),t(n)}else t(e)}),(e=>{i(e.loaded/e.total*.9)}),n)));return i(1),o.name=e,o.mapping=dt,n||(o.colorSpace=Ti),o}finally{i&&i(1)}}async generateEnvironmentMapAndSkybox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r="legacy"!==t;"legacy"!==t&&"neutral"!==t||(t=null),t=zh(t);let o,a=Promise.resolve(null);e&&(a=this.loadEquirectFromUrl(e,n,i)),o=t?this.loadEquirectFromUrl(t,n,i):e?this.loadEquirectFromUrl(e,n,i):r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[s,l]=await Promise.all([o,a]);if(null==s)throw new Error("Failed to load environment map.");return{environmentMap:s,skybox:l}}async loadEquirectFromUrl(e,t,i){if(!this.skyboxCache.has(e)){const n=this.loadEquirect(e,t,i);this.skyboxCache.set(e,n)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>setTimeout(t,e)))}();const i=this.threeRenderer,n=new Zo(256,{generateMipmaps:!1,type:Bt,format:Lt,colorSpace:Mi,depthBuffer:!0}),r=new Yo(.1,100,n),o=r.renderTarget.texture;o.name=t;const a=i.outputColorSpace,s=i.toneMapping;return i.toneMapping=0,i.outputColorSpace=Mi,r.update(i,e),this.blurCubemap(n,.04),i.toneMapping=s,i.outputColorSpace=a,o}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new Y_("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new Y_("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(20);const e=new Fo,t=new No(e,this.blurMaterial);this.blurScene=new $l,this.blurScene.add(t)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,n){const r=e.width,o=isFinite(i)?Math.PI/(2*r):2*Math.PI/39,a=i/o,s=isFinite(i)?1+Math.floor(3*a):20;s>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${s} samples when the maximum is set to 20`);const l=[];let c=0;for(let h=0;h<20;++h){const e=h/a,t=Math.exp(-e*e/2);l.push(t),0==h?c+=t:h<s&&(c+=2*t)}for(let h=0;h<l.length;h++)l[h]=l[h]/c;const u=this.blurMaterial.uniforms;u.envMap.value=e.texture,u.samples.value=s,u.weights.value=l,u.latitudinal.value="latitudinal"===n,u.dTheta.value=o,new Yo(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new Dn(0,1,0);return new Vo({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:0,depthTest:!1,depthWrite:!1,side:1})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}}const J_=[1,.79,.62,.5,.4,.31,.25],ev="high-performance";class tv extends $i{constructor(e){super(),this.loader=new ef(D_),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=e=>{this.dispatchEvent({type:"contextlost",sourceEvent:e})},this.onWebGLContextRestored=()=>{var e;null===(e=this.textureUtils)||void 0===e||e.dispose(),this.textureUtils=new Z_(this.threeRenderer);for(const t of this.scenes)t.element[Xh]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Wl({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=4}catch(e){console.warn(e)}this.arRenderer=new g_(this),this.textureUtils=this.canRender?new Z_(this.threeRenderer):null,ef.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton||(this._singleton=new tv({powerPreference:(self.ModelViewerElement||{}).powerPreference||ev,debug:jh()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new tv({powerPreference:(self.ModelViewerElement||{}).powerPreference||ev,debug:jh()});for(const t of e)t.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return J_[this.scaleStep]}set minScale(e){let t=1;for(;t<J_.length&&!(J_[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new sn;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop(((e,t)=>this.render(e,t)))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[QA]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:n}=r;n.modelIsVisible&&null==r.externalRenderer&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const n=t>1;if(null!=i){const t=n&&!this.multipleScenesVisible,r=!i.element.modelIsVisible;if(t||r){const{width:t,height:n}=this.sceneSize(i);this.copyPixels(i,t,n),e.parentElement.removeChild(e)}}this.multipleScenesVisible=n}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const r of this.scenes){const{element:e}=r;e[RA](e.getBoundingClientRect())}let i=0,n=0;for(const r of this.scenes)i=Math.max(i,r.width),n=Math.max(n,r.height);if(i!==this.width||n!==this.height||t!==this.dpr){this.width=i,this.height=n,this.dpr=t,i=Math.ceil(i*t),n=Math.ceil(n*t),this.canRender&&this.threeRenderer.setSize(i,n,!1);for(const t of this.scenes){const{canvas:r}=t;r.width=i,r.height=n,t.forceRescale(),null===(e=t.effectRenderer)||void 0===e||e.setSize(i,n)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Qh(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(0==e.scaleStep)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}rescaleCanvas(e){const t=J_[e.scaleStep],i=Math.ceil(this.width/t),n=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${n}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${n}px`;const o=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:o,minimumDpr:this.dpr*J_[this.lastStep],pixelWidth:Math.ceil(e.width*o),pixelHeight:Math.ceil(e.height*o),reason:a}}))}sceneSize(e){const{dpr:t}=this,i=J_[e.scaleStep];return{width:Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*i*t),this.canvas3D.height)}}copyPixels(e,t,i){const n=e.context;null!=n?(n.clearRect(0,0,t,i),n.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")):console.log("could not acquire 2d context")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:n,exposure:r,toneMapping:o}=e;n[WA](t,i);const a="number"==typeof r&&!Number.isNaN(r),s=n.environmentImage,l=n.skyboxImage,c=7===o&&("neutral"===s||"legacy"===s||!s&&!l);this.threeRenderer.toneMappingExposure=(a?r:1)*(c?1.3:1)}render(e,t){if(null!=t)return void this.arRenderer.onWebXRFrame(e,t);const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:n}=this;for(const r of this.orderedScenes()){const{element:t}=r;if(!t.loaded||!t.modelIsVisible&&r.renderCount>0)continue;if(this.preRender(r,e,i),!this.shouldRender(r))continue;if(null!=r.externalRenderer){const e=r.getCamera();e.updateMatrix();const{matrix:t,projectionMatrix:i}=e,n=t.elements.slice(),o=r.getTarget();n[12]+=o.x,n[13]+=o.y,n[14]+=o.z,r.externalRenderer.render({viewMatrix:n,projectionMatrix:i.elements});continue}if(!t.modelIsVisible&&!this.multipleScenesVisible)for(const e of this.scenes)e.element.modelIsVisible&&e.queueRender();const{width:o,height:a}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-a,o,a),null!=r.effectRenderer?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&0===r.renderCount?this.copyPixels(r,o,a):n.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(n),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}const iv=Symbol("correlatedObjects"),nv=Symbol("onUpdate");class rv{constructor(e,t){this[nv]=e,this[iv]=t}}const ov=new so,av=new la(2,2);let sv=0;const lv=Symbol("threeTexture"),cv=Symbol("threeTextures");let uv=class extends rv{get[lv](){var e;return null===(e=this[iv])||void 0===e?void 0:e.values().next().value}get[cv](){return this[iv]}constructor(e,t){super(e,new Set(t?[t]:[])),this[lv].image.src||(this[lv].image.src=t.name?t.name:"adhoc_image"+sv++),this[lv].image.name||(this[lv].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[lv].image.name||""}get uri(){return this[lv].image.src}get bufferView(){return this[lv].image.bufferView}get element(){const e=this[lv];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[lv];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return null!=this.uri?"external":"embedded"}set name(e){for(const t of this[cv])t.image.name=e}update(){const e=this[lv];e&&e.isCanvasTexture&&!e.animation&&(this[lv].needsUpdate=!0,this[nv]())}async createThumbnail(e,t){const i=new $l;ov.map=this[lv];const n=new No(av,ov);i.add(n);const r=new ba(-1,1,1,-1,0,1),{threeRenderer:o}=tv.singleton,a=new Rn(e,t);o.setRenderTarget(a),o.render(i,r),o.setRenderTarget(null);const s=new Uint8Array(e*t*4);o.readRenderTargetPixels(a,0,0,e,t,s),bA.width=e,bA.height=t;const l=bA.getContext("2d"),c=l.createImageData(e,t);return c.data.set(s),l.putImageData(c,0,0),new Promise((async(e,t)=>{bA.toBlob((i=>{if(!i)return t("Failed to capture thumbnail.");e(URL.createObjectURL(i))}),"image/png")}))}};var hv,dv,pv,fv;(pv=hv||(hv={}))[pv.Nearest=9728]="Nearest",pv[pv.Linear=9729]="Linear",pv[pv.NearestMipmapNearest=9984]="NearestMipmapNearest",pv[pv.LinearMipmapNearest=9985]="LinearMipmapNearest",pv[pv.NearestMipmapLinear=9986]="NearestMipmapLinear",pv[pv.LinearMipmapLinear=9987]="LinearMipmapLinear",(fv=dv||(dv={}))[fv.ClampToEdge=33071]="ClampToEdge",fv[fv.MirroredRepeat=33648]="MirroredRepeat",fv[fv.Repeat=10497]="Repeat";const mv=new Map([[dv.Repeat,ft],[dv.ClampToEdge,mt],[dv.MirroredRepeat,gt]]),gv=new Map([[ft,dv.Repeat],[mt,dv.ClampToEdge],[gt,dv.MirroredRepeat]]),_v=new Map([[hv.Nearest,_t],[hv.Linear,At],[hv.NearestMipmapNearest,vt],[hv.LinearMipmapNearest,bt],[hv.NearestMipmapLinear,yt],[hv.LinearMipmapLinear,xt]]),vv=new Map([[_t,hv.Nearest],[At,hv.Linear],[vt,hv.NearestMipmapNearest],[bt,hv.LinearMipmapNearest],[yt,hv.NearestMipmapLinear],[xt,hv.LinearMipmapLinear]]),yv=new Map([[hv.Nearest,_t],[hv.Linear,At]]),Av=new Map([[_t,hv.Nearest],[At,hv.Linear]]),bv=Symbol("threeTexture"),xv=Symbol("threeTextures"),wv=Symbol("setProperty");class Sv extends rv{get[bv](){var e;return null===(e=this[iv])||void 0===e?void 0:e.values().next().value}get[xv](){return this[iv]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[bv].name||""}get minFilter(){return vv.get(this[bv].minFilter)}get magFilter(){return Av.get(this[bv].magFilter)}get wrapS(){return gv.get(this[bv].wrapS)}get wrapT(){return gv.get(this[bv].wrapT)}get rotation(){return this[bv].rotation}get scale(){return ib(this[bv].repeat)}get offset(){return ib(this[bv].offset)}setMinFilter(e){this[wv]("minFilter",_v.get(e))}setMagFilter(e){this[wv]("magFilter",yv.get(e))}setWrapS(e){this[wv]("wrapS",mv.get(e))}setWrapT(e){this[wv]("wrapT",mv.get(e))}setRotation(e){null==e&&(e=0),this[wv]("rotation",e)}setScale(e){null==e&&(e={u:1,v:1}),this[wv]("repeat",new sn(e.u,e.v))}setOffset(e){null==e&&(e={u:0,v:0}),this[wv]("offset",new sn(e.u,e.v))}[wv](e,t){if(((e,t)=>{switch(e){case"minFilter":return(e=>vv.has(e))(t);case"magFilter":return(e=>Av.has(e))(t);case"wrapS":case"wrapT":return(e=>gv.has(e))(t);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${e}" on Sampler`)}})(e,t))for(const i of this[xv])i[e]=t,i.needsUpdate=!0;this[nv]()}}const Cv=Symbol("image"),Ev=Symbol("sampler"),Tv=Symbol("threeTexture");class Mv extends rv{constructor(e,t){super(e,new Set(t?[t]:[])),this[Ev]=new Sv(e,t),this[Cv]=new uv(e,t)}get[Tv](){var e;return null===(e=this[iv])||void 0===e?void 0:e.values().next().value}get name(){return this[Tv].name||""}set name(e){for(const t of this[iv])t.name=e}get sampler(){return this[Ev]}get source(){return this[Cv]}}var Iv,Bv,Rv;const Pv=Symbol("texture"),kv=Symbol("transform"),Lv=Symbol("materials"),Dv=Symbol("usage"),Nv=Symbol("onUpdate"),Ov=Symbol("activeVideo");var Fv;!function(e){e[e.Base=0]="Base",e[e.MetallicRoughness=1]="MetallicRoughness",e[e.Normal=2]="Normal",e[e.Occlusion=3]="Occlusion",e[e.Emissive=4]="Emissive",e[e.Clearcoat=5]="Clearcoat",e[e.ClearcoatRoughness=6]="ClearcoatRoughness",e[e.ClearcoatNormal=7]="ClearcoatNormal",e[e.SheenColor=8]="SheenColor",e[e.SheenRoughness=9]="SheenRoughness",e[e.Transmission=10]="Transmission",e[e.Thickness=11]="Thickness",e[e.Specular=12]="Specular",e[e.SpecularColor=13]="SpecularColor",e[e.Iridescence=14]="Iridescence",e[e.IridescenceThickness=15]="IridescenceThickness",e[e.Anisotropy=16]="Anisotropy"}(Fv||(Fv={}));class Uv{constructor(e,t,i,n){this[Iv]=null,this[Bv]={rotation:0,scale:new sn(1,1),offset:new sn(0,0)},this[Rv]=!1,i&&(this[kv].rotation=i.rotation,this[kv].scale.copy(i.repeat),this[kv].offset.copy(i.offset),this[Pv]=new Mv(e,i)),this[Nv]=e,this[Lv]=n,this[Dv]=t}get texture(){return this[Pv]}setTexture(e){var t,i;const n=null!=e?e.source[lv]:null,r=null===(t=this[Pv])||void 0===t?void 0:t.source[lv];if(null!=r&&r.isVideoTexture?this[Ov]=!1:(null===(i=this[Pv])||void 0===i?void 0:i.source.animation)&&this[Pv].source.animation.removeEventListener("enterFrame",this[Nv]),this[Pv]=e,null!=n&&n.isVideoTexture){const e=n.image;if(this[Ov]=!0,null!=e.requestVideoFrameCallback){const t=()=>{this[Ov]&&(this[Nv](),e.requestVideoFrameCallback(t))};e.requestVideoFrameCallback(t)}else{const e=()=>{this[Ov]&&(this[Nv](),requestAnimationFrame(e))};requestAnimationFrame(e)}}else null!=(null==e?void 0:e.source.animation)&&e.source.animation.addEventListener("enterFrame",this[Nv]);let o=Ti;if(this[Lv])for(const a of this[Lv]){switch(this[Dv]){case Fv.Base:a.map=n;break;case Fv.MetallicRoughness:o=Mi,a.metalnessMap=n,a.roughnessMap=n;break;case Fv.Normal:o=Mi,a.normalMap=n;break;case Fv.Occlusion:o=Mi,a.aoMap=n;break;case Fv.Emissive:a.emissiveMap=n;break;case Fv.Clearcoat:a.clearcoatMap=n;break;case Fv.ClearcoatRoughness:a.clearcoatRoughnessMap=n;break;case Fv.ClearcoatNormal:a.clearcoatNormalMap=n;break;case Fv.SheenColor:a.sheenColorMap=n;break;case Fv.SheenRoughness:a.sheenRoughnessMap=n;break;case Fv.Transmission:a.transmissionMap=n;break;case Fv.Thickness:a.thicknessMap=n;break;case Fv.Specular:a.specularIntensityMap=n;break;case Fv.SpecularColor:a.specularColorMap=n;break;case Fv.Iridescence:a.iridescenceMap=n;break;case Fv.IridescenceThickness:a.iridescenceThicknessMap=n;break;case Fv.Anisotropy:a.anisotropyMap=n}a.needsUpdate=!0}n&&(n.colorSpace=o,n.rotation=this[kv].rotation,n.repeat=this[kv].scale,n.offset=this[kv].offset),this[Nv]()}}Iv=Pv,Bv=kv,Rv=Ov;const zv=Symbol("threeMaterial"),Hv=Symbol("threeMaterials"),Gv=Symbol("baseColorTexture"),Vv=Symbol("metallicRoughnessTexture");class Qv extends rv{constructor(e,t){super(e,t);const{map:i,metalnessMap:n}=t.values().next().value;this[Gv]=new Uv(e,Fv.Base,i,t),this[Vv]=new Uv(e,Fv.MetallicRoughness,n,t)}get[Hv](){return this[iv]}get[zv](){var e;return null===(e=this[iv])||void 0===e?void 0:e.values().next().value}get baseColorFactor(){const e=[0,0,0,this[zv].opacity];return this[zv].color.toArray(e),e}get metallicFactor(){return this[zv].metalness}get roughnessFactor(){return this[zv].roughness}get baseColorTexture(){return this[Gv]}get metallicRoughnessTexture(){return this[Vv]}setBaseColorFactor(e){const t=new no;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[Hv])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[nv]()}setMetallicFactor(e){for(const t of this[Hv])t.metalness=e;this[nv]()}setRoughnessFactor(e){for(const t of this[Hv])t.roughness=e;this[nv]()}}var jv,qv;const Wv=Symbol("pbrMetallicRoughness"),$v=Symbol("normalTexture"),Xv=Symbol("occlusionTexture"),Yv=Symbol("emissiveTexture"),Kv=Symbol("backingThreeMaterial"),Zv=Symbol("applyAlphaCutoff"),Jv=Symbol("getAlphaMode"),ey=Symbol("lazyLoadGLTFInfo"),ty=Symbol("initialize"),iy=Symbol("getLoadedMaterial"),ny=Symbol("ensureMaterialIsLoaded"),ry=Symbol("gltfIndex"),oy=Symbol("setActive"),ay=Symbol("variantIndices"),sy=Symbol("isActive"),ly=Symbol("modelVariants"),cy=Symbol("name"),uy=Symbol("pbrTextures");class hy extends rv{constructor(e,t,i,n,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;super(e,r),this[jv]=new Set,this[qv]=new Map,this[ry]=t,this[sy]=i,this[ly]=n,this[cy]=o,null==a?this[ty]():this[ey]=a}get[(jv=ay,qv=uy,Kv)](){return this[iv].values().next().value}[ty](){const e=this[nv],t=this[iv];this[Wv]=new Qv(e,t);const{normalMap:i,aoMap:n,emissiveMap:r}=t.values().next().value;this[$v]=new Uv(e,Fv.Normal,i,t),this[Xv]=new Uv(e,Fv.Occlusion,n,t),this[Yv]=new Uv(e,Fv.Emissive,r,t);const o=i=>{this[uy].set(i,new Uv(e,i,null,t))};o(Fv.Clearcoat),o(Fv.ClearcoatRoughness),o(Fv.ClearcoatNormal),o(Fv.SheenColor),o(Fv.SheenRoughness),o(Fv.Transmission),o(Fv.Thickness),o(Fv.Specular),o(Fv.SpecularColor),o(Fv.Iridescence),o(Fv.IridescenceThickness),o(Fv.Anisotropy)}async[iy](){if(null!=this[ey]){const e=await this[ey].doLazyLoad();return this[ty](),this[ey]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new no;return e instanceof Array?t.fromArray(e):t.set(e),t}[ny](){if(null!=this[ey])throw new Error(`Material "${this.name}" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[iy]()}get isLoaded(){return null==this[ey]}get isActive(){return this[sy]}[oy](e){this[sy]=e}get name(){return this[cy]||""}set name(e){if(this[cy]=e,null!=this[iv])for(const t of this[iv])t.name=e}get pbrMetallicRoughness(){return this[ny](),this[Wv]}get normalTexture(){return this[ny](),this[$v]}get occlusionTexture(){return this[ny](),this[Xv]}get emissiveTexture(){return this[ny](),this[Yv]}get emissiveFactor(){return this[ny](),this[Kv].emissive.toArray()}get index(){return this[ry]}hasVariant(e){const t=this[ly].get(e);return null!=t&&this[ay].has(t.index)}setEmissiveFactor(e){this[ny]();const t=this.colorFromRgb(e);for(const i of this[iv])i.emissive.set(t);this[nv]()}[Jv](){return this[Kv].transparent?"BLEND":this[Kv].alphaTest>0?"MASK":"OPAQUE"}[Zv](){this[ny]();for(const e of this[iv])"MASK"===this[Jv]()?null==e.alphaTest&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[ny]();for(const t of this[iv])t.alphaTest=e,t.needsUpdate=!0;this[Zv](),this[nv]()}getAlphaCutoff(){return this[ny](),this[Kv].alphaTest}setDoubleSided(e){this[ny]();for(const t of this[iv])t.side=e?2:0,t.needsUpdate=!0;this[nv]()}getDoubleSided(){return this[ny](),2==this[Kv].side}setAlphaMode(e){this[ny]();for(const n of this[iv])i="BLEND"===e,(t=n).transparent=i,t.depthWrite=!i,n.alphaTest="MASK"===e?.5:void 0,n.needsUpdate=!0;var t,i;this[nv]()}getAlphaMode(){return this[ny](),this[Jv]()}get emissiveStrength(){return this[ny](),this[Kv].emissiveIntensity}setEmissiveStrength(e){this[ny]();for(const t of this[iv])t.emissiveIntensity=e;this[nv]()}get clearcoatFactor(){return this[ny](),this[Kv].clearcoat}get clearcoatRoughnessFactor(){return this[ny](),this[Kv].clearcoatRoughness}get clearcoatTexture(){return this[ny](),this[uy].get(Fv.Clearcoat)}get clearcoatRoughnessTexture(){return this[ny](),this[uy].get(Fv.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[ny](),this[uy].get(Fv.ClearcoatNormal)}get clearcoatNormalScale(){return this[ny](),this[Kv].clearcoatNormalScale.x}setClearcoatFactor(e){this[ny]();for(const t of this[iv])t.clearcoat=e;this[nv]()}setClearcoatRoughnessFactor(e){this[ny]();for(const t of this[iv])t.clearcoatRoughness=e;this[nv]()}setClearcoatNormalScale(e){this[ny]();for(const t of this[iv])t.clearcoatNormalScale=new sn(e,e);this[nv]()}get ior(){return this[ny](),this[Kv].ior}setIor(e){this[ny]();for(const t of this[iv])t.ior=e;this[nv]()}get sheenColorFactor(){return this[ny](),this[Kv].sheenColor.toArray()}get sheenColorTexture(){return this[ny](),this[uy].get(Fv.SheenColor)}get sheenRoughnessFactor(){return this[ny](),this[Kv].sheenRoughness}get sheenRoughnessTexture(){return this[ny](),this[uy].get(Fv.SheenRoughness)}setSheenColorFactor(e){this[ny]();const t=this.colorFromRgb(e);for(const i of this[iv])i.sheenColor.set(t),i.sheen=1;this[nv]()}setSheenRoughnessFactor(e){this[ny]();for(const t of this[iv])t.sheenRoughness=e,t.sheen=1;this[nv]()}get transmissionFactor(){return this[ny](),this[Kv].transmission}get transmissionTexture(){return this[ny](),this[uy].get(Fv.Transmission)}setTransmissionFactor(e){this[ny]();for(const t of this[iv])t.transmission=e;this[nv]()}get thicknessFactor(){return this[ny](),this[Kv].thickness}get thicknessTexture(){return this[ny](),this[uy].get(Fv.Thickness)}get attenuationDistance(){return this[ny](),this[Kv].attenuationDistance}get attenuationColor(){return this[ny](),this[Kv].attenuationColor.toArray()}setThicknessFactor(e){this[ny]();for(const t of this[iv])t.thickness=e;this[nv]()}setAttenuationDistance(e){this[ny]();for(const t of this[iv])t.attenuationDistance=e;this[nv]()}setAttenuationColor(e){this[ny]();const t=this.colorFromRgb(e);for(const i of this[iv])i.attenuationColor.set(t);this[nv]()}get specularFactor(){return this[ny](),this[Kv].specularIntensity}get specularTexture(){return this[ny](),this[uy].get(Fv.Specular)}get specularColorFactor(){return this[ny](),this[Kv].specularColor.toArray()}get specularColorTexture(){return this[ny](),this[uy].get(Fv.SheenColor)}setSpecularFactor(e){this[ny]();for(const t of this[iv])t.specularIntensity=e;this[nv]()}setSpecularColorFactor(e){this[ny]();const t=this.colorFromRgb(e);for(const i of this[iv])i.specularColor.set(t);this[nv]()}get iridescenceFactor(){return this[ny](),this[Kv].iridescence}get iridescenceTexture(){return this[ny](),this[uy].get(Fv.Iridescence)}get iridescenceIor(){return this[ny](),this[Kv].iridescenceIOR}get iridescenceThicknessMinimum(){return this[ny](),this[Kv].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[ny](),this[Kv].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[ny](),this[uy].get(Fv.IridescenceThickness)}setIridescenceFactor(e){this[ny]();for(const t of this[iv])t.iridescence=e;this[nv]()}setIridescenceIor(e){this[ny]();for(const t of this[iv])t.iridescenceIOR=e;this[nv]()}setIridescenceThicknessMinimum(e){this[ny]();for(const t of this[iv])t.iridescenceThicknessRange[0]=e;this[nv]()}setIridescenceThicknessMaximum(e){this[ny]();for(const t of this[iv])t.iridescenceThicknessRange[1]=e;this[nv]()}get anisotropyStrength(){return this[ny](),this[Kv].anisotropy}get anisotropyRotation(){return this[ny](),this[Kv].anisotropyRotation}get anisotropyTexture(){return this[ny](),this[uy].get(Fv.Anisotropy)}setAnisotropyStrength(e){this[ny]();for(const t of this[iv])t.anisotropy=e;this[nv]()}setAnisotropyRotation(e){this[ny]();for(const t of this[iv])t.anisotropyRotation=e;this[nv]()}}let dy=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class py extends dy{constructor(e,t,i,n){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:o,threeObjectMap:a}=n;this.parser=o.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const s=a.get(e.material);null!=s.materials?this.initialMaterialIdx=this.activeMaterialIdx=s.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const l=e.userData.associations||{};if(null==l.meshes)return void console.error("Mesh is missing primitive index association");const c=((r.meshes||[])[l.meshes].primitives||[])[l.primitives];if(null!=c){if(null!=c.material)this.materials.set(c.material,t[c.material]);else{const e=t.findIndex((e=>"Default"===e.name));e>=0?this.materials.set(e,t[e]):console.warn("gltfPrimitive has no material!")}if(c.extensions&&c.extensions.KHR_materials_variants){const e=c.extensions.KHR_materials_variants,n=o.parser.json.extensions.KHR_materials_variants.variants;for(const r of e.mappings){const e=t[r.material];this.materials.set(r.material,e);for(const t of r.variants){const{name:r}=n[t];this.variantToMaterialMap.set(t,e),e[ay].add(t),i.has(r)||i.set(r,{name:r,index:t})}}}}else console.error("Mesh primitive definition is missing.")}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const i=t[iv],n=await t[iy]();this.mesh.material=null!=n?n:i.values().next().value,this.parser.assignFinalMaterial(this.mesh),i.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(null==e)return this.setActiveMaterial(this.initialMaterialIdx);if(null!=this.variantToMaterialMap&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(null!=this.variantToMaterialMap&&null!=e){const t=this.variantToMaterialMap.get(e);if(null!=t)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(null!=this.variantToMaterialMap)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(null!=t.material)continue;const i=await this.enableVariantHelper(e);null!=i&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const i=this.modelVariants.get(t).index;return e[ay].add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;null!=t&&t.delete(e)}}updateVariantUserData(e,t){t[ay].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[iv].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return null==t||!this.variantInfo.has(t.index)||(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1)}}var fy,my,gy,_y,vy,yy;const Ay=Symbol("materials"),by=Symbol("hierarchy"),xy=Symbol("roots"),wy=Symbol("primitives"),Sy=Symbol("prepareVariantsForExport"),Cy=Symbol("switchVariant"),Ey=Symbol("materialFromPoint"),Ty=Symbol("nodeFromPoint"),My=Symbol("nodeFromIndex"),Iy=Symbol("variantData"),By=Symbol("availableVariants"),Ry=Symbol("modelOnUpdate"),Py=Symbol("cloneMaterial");class ky{constructor(e,t,i,n){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=n}}class Ly{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};this[fy]=new Array,this[my]=new Array,this[gy]=new Array,this[_y]=new Array,this[vy]=()=>{},this[yy]=new Map,this[Ry]=t;const{gltf:i,threeGLTF:n,gltfElementMap:r}=e;for(const[s,l]of i.materials.entries()){const e=r.get(l);if(null!=e)this[Ay].push(new hy(t,s,!0,this[Iy],e,l.name));else{const e=(i.materials||[])[s],o=new Set;r.set(e,o);const a=async()=>{const e=await n.parser.getDependency("material",s);return o.add(e),e};this[Ay].push(new hy(t,s,!1,this[Iy],o,l.name,new ky(i,r,e,a)))}}const o=new Map,a=new Array;for(const s of n.scene.children)a.push(s);for(;a.length>0;){const t=a.pop();let i=null;t instanceof No?(i=new py(t,this.materials,this[Iy],e),this[wy].push(i)):i=new dy(t.name);const n=o.get(t);null!=n?n.children.push(i):this[xy].push(i),this[by].push(i);for(const e of t.children)a.push(e),o.set(t,i)}}get materials(){return this[Ay]}[(fy=Ay,my=by,gy=xy,_y=wy,vy=Ry,yy=Iy,By)](){const e=Array.from(this[Iy].values());return e.sort(((e,t)=>e.index-t.index)),e.map((e=>e.name))}getMaterialByName(e){const t=this[Ay].filter((t=>t.name===e));return t.length>0?t[0]:null}[My](e,t){const i=this[by].find((i=>{if(i instanceof py){const{meshes:n,primitives:r}=i.mesh.userData.associations;if(n==e&&r==t)return!0}return!1}));return null==i?null:i}[Ty](e){return this[by].find((t=>t instanceof py&&t.mesh===e.object))}[Ey](e){return this[Ty](e).getActiveMaterial()}async[Cy](e){for(const t of this[wy])await t.enableVariant(e);for(const t of this.materials)t[oy](!1);for(const t of this[wy])this.materials[t.getActiveMaterial().index][oy](!0)}async[Sy](){const e=new Array;for(const t of this[wy])e.push(t.instantiateVariants());await Promise.all(e)}[Py](e,t){const i=this.materials[e];i.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");const n=i[iv],r=new Set;for(const[a,s]of n.entries()){const e=s.clone();e.name=t+(n.size>1?"_inst"+a:""),r.add(e)}const o=new hy(this[Ry],this[Ay].length,!1,this[Iy],r,t);return this[Ay].push(o),o}createMaterialInstanceForVariant(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=null;for(const o of this[wy]){const n=this[Iy].get(i);null!=n&&o.variantInfo.has(n.index)||null!=o.getMaterial(e)&&(this.hasVariant(i)||this.createVariant(i),null==r&&(r=this[Py](e,t)),o.addVariant(r,i))}if(n&&null!=r){r[oy](!0),this.materials[e][oy](!1);for(const e of this[wy])e.enableVariant(i)}return r}createVariant(e){this[Iy].has(e)?console.warn(`Variant '${e}'' already exists`):this[Iy].set(e,{name:e,index:this[Iy].size})}hasVariant(e){return this[Iy].has(e)}setMaterialToVariant(e,t){if(null!=this[By]().find((e=>e===t)))if(e<0||e>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const i of this[wy]){const n=i.getMaterial(e);null!=n&&i.addVariant(n,t)}else console.warn(`Can't add material to '${t}', the variant does not exist.'`)}updateVariantName(e,t){const i=this[Iy].get(e);null!=i&&(i.name=t,this[Iy].set(t,i),this[Iy].delete(e))}deleteVariant(e){const t=this[Iy].get(e);if(null!=t){for(const i of this.materials)i.hasVariant(e)&&i[ay].delete(t.index);for(const e of this[wy])e.deleteVariant(t.index);this[Iy].delete(e)}}}var Dy=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const Ny=Symbol("currentGLTF"),Oy=Symbol("originalGltfJson"),Fy=Symbol("model"),Uy=Symbol("getOnUpdateMethod"),zy=Symbol("buildTexture");class Hy extends No{constructor(){super(void 0,new so({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&null!=this.geometry&&null!=this.map}updateGeometry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.height,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.radius,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;e==this.height&&t==this.radius&&i==this.resolution||(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=function(e,t,i){const n=new hu(t,2*i,i);n.scale(1,1,-1);const r=n.getAttribute("position"),o=new Dn;for(let a=0;a<r.count;++a)if(o.fromBufferAttribute(r,a),o.y<0){const t=3*-e/2,i=o.y<t?-e/o.y:1-o.y*o.y/(3*t*t);o.multiplyScalar(i),o.toArray(r.array,3*a)}return r.needsUpdate=!0,n}(e,t,i)))}}const Gy=new Dn,Vy=new Dn,Qy=new Dn,jy=new ln,qy=new Zr,Wy=new Ln;class $y extends tf{constructor(e){super(document.createElement("div")),this.normal=new Dn(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(e){if(null==e)return;const t=rm(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,mm(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(null==e)return;const t=rm(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(){const{mesh:e,tri:t,bary:i}=this;if(null==e||null==t||null==i)return;e.getVertexPosition(t.x,Gy),e.getVertexPosition(t.y,Vy),e.getVertexPosition(t.z,Qy),Gy.toArray(jy.elements,0),Vy.toArray(jy.elements,3),Qy.toArray(jy.elements,6),this.position.copy(i).applyMatrix3(jy);const n=this.parent;n.worldToLocal(e.localToWorld(this.position)),qy.set(Gy,Vy,Qy),qy.getNormal(this.normal).transformDirection(e.matrixWorld);const r=n.parent;Wy.setFromAxisAngle(Gy.set(0,1,0),-r.rotation.y),this.normal.applyQuaternion(Wy)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach((t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,n=i.dataset.visibilityAttribute;if(null!=n){const t=`data-${n}`;i.toggleAttribute(t,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))})),this.initialized=!0}}const Xy={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},Yy={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"};function Ky(e,t,i){return(1-i)*e+i*t}class Zy extends Fr{constructor(e,t,i){super(),this.camera=new ba,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Il,this.horizontalBlurMaterial=new Vo(Xy),this.verticalBlurMaterial=new Vo(Yy),this.intensity=0,this.softness=1,this.boundingBox=new Fn,this.size=new Dn,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:n}=this;n.rotation.x=Math.PI/2,n.left=-.5,n.right=.5,n.bottom=-.5,n.top=.5,this.add(n);const r=new la,o=new so({opacity:1,transparent:!0,side:1});this.floor=new No(r,o),this.floor.userData.noHit=!0,n.add(this.floor),this.blurPlane=new No(r),this.blurPlane.visible=!1,n.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:n,size:r,rotation:o,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(a),"back"===i){const{min:e,max:t}=n;[e.y,e.z]=[e.z,e.y],[t.y,t.z]=[t.z,t.y],[r.y,r.z]=[r.z,r.y],o.x=Math.PI/2,o.y=Math.PI}else o.x=0,o.y=0;if(this.isAnimated){const e=n.min.y,t=n.max.y;r.y=this.maxDimension,n.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),n.min.y=e,n.max.y=t,r.set(this.maxDimension,t-e,this.maxDimension)}"bottom"===i?a.y=n.min.y:a.z=n.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,n=this.isAnimated?2:1,r=n*Math.pow(2,9-3*e);this.setMapSize(r);const o=t.y/2,a=t.y*n;i.near=0,i.far=Ky(a,o,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=2);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),n=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10+i,o=10+n;if(null==this.renderTarget||this.renderTarget.width===r&&this.renderTarget.height===o||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){const e={format:Lt};this.renderTarget=new Rn(r,o,e),this.renderTargetBlur=new Rn(r,o,e),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/i),t.z*(1+10/n),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*Ky(.3,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return.001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const n=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=n,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:n,renderTarget:r,renderTargetBlur:o,blurPlane:a}=this;a.visible=!0,a.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(o),e.render(a,t),a.material=n,n.uniforms.v.value=1/this.renderTarget.height,n.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(a,t),a.visible=!1}dispose(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}const Jy=new Dn,eA=new Dn,tA=new Dn,iA=new Ah,nA=new Dn,rA=new sn;class oA extends $l{constructor(e){let{canvas:t,element:i,width:n,height:r}=e;super(),this.annotationRenderer=new lf,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new $o(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new Fr,this.target=new Fr,this.animationNames=[],this.boundingBox=new Fn,this.boundingSphere=new ir,this.size=new Dn,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=4,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Dn,this.targetDamperX=new Kf,this.targetDamperY=new Kf,this.targetDamperZ=new Kf,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new Hy,this.name="ModelScene",this.element=i,this.canvas=t,this.camera=new $o(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(n,r),this.target.name="Target",this.mixer=new _h(this.target);const{domElement:o}=this.annotationRenderer,{style:a}=o;a.display="none",a.pointerEvents="none",a.position="absolute",a.top="0",this.element.shadowRoot.querySelector(".default").appendChild(o),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!e||e===this.url)return void i(1);if(this.reset(),this.url=e,null!=this.externalRenderer){const e=await this.externalRenderer.load(i);return this.boundingSphere.radius=e.framedRadius,void(this.idealAspect=e.fieldOfViewAspect)}null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{t=await new Promise((async(t,n)=>{this.cancelPendingSourceChange=()=>n();try{t(await this.element[YA].loader.load(e,this.element,i))}catch(e){n(e)}}))}catch(e){if(null==e)return;throw e}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=t,null!=t&&(this._model=t.scene,this.target.add(t.scene));const{animations:n}=t,r=new Map,o=[];for(const a of n)r.set(a.name,a),o.push(a.name);this.animations=n,this.animationsByName=r,this.animationNames=o,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;null!=e&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;null!=t&&(t.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[Ny]=null,this.element[Oy]=null,this.element[Fy]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,null!=this.externalRenderer){const i=window.devicePixelRatio;this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Fn;e.traverse((e=>{const i=e;if(!i.material)return;if(!i.material.transparent)return;t.setFromObject(i);const n=t.getSize(nA),r=Math.min(n.x,n.y,n.z);Math.max(n.x,n.y,n.z)<100*r||this.markBakedShadow(i)}))}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new Fn;this.boundingBox.getSize(this.size);for(const n of this.bakedShadows)i.setFromObject(n),i.min.y<e.y+this.size.y/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z||i.min.z<e.z+this.size.z/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(n)}applyTransform(){const{model:e}=this;if(null==e)return;const t=rm(this.element.orientation)[0].terms,i=mm(t[0]).number,n=mm(t[1]).number,r=mm(t[2]).number;e.quaternion.setFromEuler(new br(n,r,i,"YXZ"));const o=rm(this.element.scale)[0].terms;e.scale.set(o[0].number,o[1].number,o[2].number)}updateBoundingBox(){const{model:e}=this;if(null==e)return;this.target.remove(e),this.findBakedShadows(e);const t=(e,t)=>e.expandByPoint(t);this.setBakedShadowVisibility(!1),this.boundingBox=cf(e,t,new Fn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach((e=>this.unmarkBakedShadow(e))),this.boundingBox=cf(e,t,new Fn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(null==e)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(cf(e,((e,i)=>Math.max(e,t.distanceToSquared(i))),0)),this.idealAspect=cf(e,((e,i)=>{i.sub(t);const n=Math.sqrt(i.x*i.x+i.z*i.z);return Math.max(e,n/(this.idealCameraDistance()-Math.abs(i.y)))}),0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shadowIntensity<=0;for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(null!=this.xrCamera)rA.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();rA.set((e-i.x)/this.width,(t-i.y)/this.height)}return rA.multiplyScalar(2).subScalar(1),rA.y*=-1,rA}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[YA].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(null!=this.groundedSkybox.parent?10:1)}setGroundedSkybox(){const e=rm(this.element.skyboxHeight)[0].terms[0],t=mm(e).number,i=10*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const n=this.boundingSphere.radius/10;let{x:r,y:o,z:a}=i;return r=this.targetDamperX.update(r,t.x,e,n),o=this.targetDamperY.update(o,t.y,e,n),a=this.targetDamperZ.update(a,t.z,e,n),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-a,this.target.position.set(r,o,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:n}=this.position;this.yaw=Math.atan2(e-i,t-n)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop!==yi||1&~e?this.currentAnimationAction.time:this.duration-this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2201,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null==this._currentGLTF)return;const{animations:r}=this;if(null==r||0===r.length)return;let o=null;if(null!=e&&(o=this.animationsByName.get(e),null==o)){const t=parseInt(e);!isNaN(t)&&t>=0&&t<r.length&&(o=r[t])}null==o&&(o=r[0]);try{const{currentAnimationAction:e}=this,r=this.mixer.clipAction(o,this);this.currentAnimationAction=r,this.element.paused?this.mixer.stopAllAction():(r.paused=!1,null!=e&&r!==e?r.crossFadeFrom(e,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),r.setLoop(i,n),r.enabled=!0,r.clampWhenFinished=!0,r.play()}catch(e){console.error(e)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(null!=e){const t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;null!=t&&1==t.needsUpdate&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(e<=0&&null==this.shadow))){if(null==this.shadow){const e="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new Zy(this,this.shadowSoftness,e)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;null!=t&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;null!=t&&t.setOffset(e)}getHit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return iA.intersectObject(e,!0).find((e=>e.object.visible&&!e.object.userData.noHit))}hitFromController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return iA.setFromXRController(e),this.getHit(t)}hitFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return iA.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;var i;const n=this.hitFromPoint(e,t);return null==n?null:{position:n.point,normal:null!=n.face?n.face.normal.clone().applyNormalMatrix((new ln).getNormalMatrix(n.object.matrixWorld)):iA.ray.direction.clone().multiplyScalar(-1),uv:null!==(i=n.uv)&&void 0!==i?i:null}}surfaceFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;const i=this.element.model;if(null==i)return null;const n=this.hitFromPoint(e,t);if(null==n||null==n.face)return null;const r=i[Ty](n),{meshes:o,primitives:a}=r.mesh.userData.associations,s=new Dn,l=new Dn,c=new Dn,{a:u,b:h,c:d}=n.face,p=n.object;p.getVertexPosition(u,s),p.getVertexPosition(h,l),p.getVertexPosition(d,c);const f=new Zr(s,l,c),m=new Dn;return f.getBarycoord(p.worldToLocal(n.point),m),`${o} ${a} ${u} ${h} ${d} ${m.x.toFixed(3)} ${m.y.toFixed(3)} ${m.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,n=t.length;i<n;i++){const n=t[i];n instanceof $y&&e(n)}}updateSurfaceHotspot(e){if(null==e.surface||null==this.element.model)return;const t=rm(e.surface)[0].terms;if(8!=t.length)return void console.warn(e.surface+" does not have exactly 8 numbers.");const i=this.element.model[My](t[0].number,t[1].number);if(null==i)return void console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");const n=i.mesh.geometry.attributes.position.count,r=new Dn(t[2].number,t[3].number,t[4].number);if(r.x>=n||r.y>=n||r.z>=n)return void console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");const o=new Dn(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=r,e.bary=o,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots((e=>{e.updateSurface()}))}updateHotspotsVisibility(e){this.forHotspots((t=>{Jy.copy(e),eA.setFromMatrixPosition(t.matrixWorld),Jy.sub(eA),tA.copy(t.normal).transformDirection(this.target.matrixWorld),Jy.dot(tA)<0?t.hide():t.show()}))}orientHotspots(e){this.forHotspots((t=>{t.orient(e)}))}setHotspotsVisibility(e){this.forHotspots((t=>{t.visible=e}))}updateSchema(e){var t;const{schemaElement:i,element:n}=this,{alt:r,poster:o,iosSrc:a}=n;if(null!=e){const n=[{"@type":"MediaObject",contentUrl:e,encodingFormat:"gltf"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];a&&n.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"});const s={"@context":"http://schema.org/","@type":"3DModel",image:null!=o?o:void 0,name:null!=r?r:void 0,encoding:n};i.textContent=JSON.stringify(s),document.head.appendChild(i)}else null!=i.parentElement&&i.parentElement.removeChild(i)}}class aA extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),1===this.ongoingActivityCount&&this.announceTotalProgress(t,0,e),i=>{let n;return n=Math.max(Qh(i,0,1),t.progress),n!==t.progress&&this.announceTotalProgress(t,n,e),t.progress}}announceTotalProgress(e,t,i){let n=0,r=0;1==t&&(e.completed=!0);for(const s of this.ongoingActivities){const{progress:e}=s;n+=1-e,s.completed&&r++}const o=e.progress;e.progress=t,this.totalProgress+=(t-o)*(1-this.totalProgress)/n;const a=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:a,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var sA,lA,cA,uA,hA,dA,pA,fA,mA,gA,_A,vA,yA,AA=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const bA=document.createElement("canvas"),xA=Symbol("fallbackResizeHandler"),wA=Symbol("defaultAriaLabel"),SA=Symbol("resizeObserver"),CA=Symbol("clearModelTimeout"),EA=Symbol("onContextLost"),TA=Symbol("loaded"),MA=Symbol("status"),IA=Symbol("onFocus"),BA=Symbol("onBlur"),RA=Symbol("updateSize"),PA=Symbol("intersectionObserver"),kA=Symbol("isElementInViewport"),LA=Symbol("announceModelVisibility"),DA=Symbol("ariaLabel"),NA=Symbol("altDefaulted"),OA=Symbol("statusElement"),FA=Symbol("updateStatus"),UA=Symbol("loadedTime"),zA=Symbol("updateSource"),HA=Symbol("markLoaded"),GA=Symbol("container"),VA=Symbol("input"),QA=Symbol("canvas"),jA=Symbol("scene"),qA=Symbol("needsRender"),WA=Symbol("tick"),$A=Symbol("onModelLoad"),XA=Symbol("onResize"),YA=Symbol("renderer"),KA=Symbol("progressTracker"),ZA=Symbol("getLoaded"),JA=Symbol("getModelIsVisible"),eb=Symbol("shouldAttemptPreload"),tb=e=>({x:e.x,y:e.y,z:e.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),ib=e=>({u:e.x,v:e.y,toString(){return`${this.u} ${this.v}`}});class nb extends k{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[sA]=!1,this[lA]=!1,this[cA]=0,this[uA]="",this[hA]=null,this[dA]=Vh((()=>{const e=this.getBoundingClientRect();this[RA](e)}),50),this[pA]=Vh((e=>{const t=this.modelIsVisible;t!==e&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:t}}))}),0),this[fA]=null,this[mA]=null,this[gA]=new aA,this[_A]=()=>{this[OA].textContent=this[MA]},this[vA]=()=>{this[OA].textContent=""},this[yA]=e=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:e.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;let t,i;if(xe(ed,e),this[GA]=e.querySelector(".container"),this[VA]=e.querySelector(".userInput"),this[QA]=e.querySelector("canvas"),this[OA]=e.querySelector("#status"),this[wA]=this[VA].getAttribute("aria-label"),this.isConnected){const e=this.getBoundingClientRect();t=e.width,i=e.height}else t=300,i=150;this[jA]=new oA({canvas:this[QA],element:this,width:t,height:i}),Promise.resolve().then((()=>{this[RA](this.getBoundingClientRect())})),Bh&&(this[SA]=new ResizeObserver((e=>{if(!this[YA].isPresenting)for(let t of e)t.target===this&&this[RA](t.contentRect)}))),Rh?this[PA]=new IntersectionObserver((e=>{for(let t of e)if(t.target===this){const e=this.modelIsVisible;this[kA]=t.isIntersecting,this[LA](e),this[kA]&&!this.loaded&&this[zA]()}}),{root:null,rootMargin:"0px",threshold:1e-5}):this[kA]=!0}static get is(){return"model-viewer"}static set modelCacheSize(e){ef[Zp].evictionThreshold=e}static get modelCacheSize(){return ef[Zp].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),tv.singleton.minScale=e}static get minimumRenderScale(){return tv.singleton.minScale}get loaded(){return this[ZA]()}get[(sA=kA,lA=TA,cA=UA,uA=MA,hA=CA,dA=xA,pA=LA,fA=SA,mA=PA,gA=KA,YA)](){return tv.singleton}get modelIsVisible(){return this[JA]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),Bh?this[SA].observe(this):self.addEventListener("resize",this[xA]),Rh&&this[PA].observe(this),this.addEventListener("focus",this[IA]),this.addEventListener("blur",this[BA]);const e=this[YA];e.addEventListener("contextlost",this[EA]),e.registerScene(this[jA]),null!=this[CA]&&(self.clearTimeout(this[CA]),this[CA]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Bh?this[SA].unobserve(this):self.removeEventListener("resize",this[xA]),Rh&&this[PA].unobserve(this),this.removeEventListener("focus",this[IA]),this.removeEventListener("blur",this[BA]);const e=this[YA];e.removeEventListener("contextlost",this[EA]),e.unregisterScene(this[jA]),this[CA]=self.setTimeout((()=>{this[jA].dispose(),this[CA]=null}),10)}updated(e){super.updated(e),e.has("src")&&(null==this.src?(this[TA]=!1,this[UA]=0,this[jA].reset()):this.src!==this[jA].url&&(this[TA]=!1,this[UA]=0,this[zA]())),e.has("alt")&&this[VA].setAttribute("aria-label",this[DA]),e.has("generateSchema")&&(this.generateSchema?this[jA].updateSchema(this.src):this[jA].updateSchema(null))}toDataURL(e,t){return this[YA].displayCanvas(this[jA]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,n=e?e.idealAspect:void 0,{width:r,height:o,idealAspect:a,aspect:s}=this[jA],{dpr:l,scaleFactor:c}=this[YA];let u=r*c*l,h=o*c*l,d=0,p=0;if(!0===n)if(a>s){const e=h;h=Math.round(u/a),p=(e-h)/2}else{const e=u;u=Math.round(h*a),d=(e-u)/2}bA.width=u,bA.height=h;try{return new Promise((async(e,n)=>{bA.getContext("2d").drawImage(this[YA].displayCanvas(this[jA]),d,p,u,h,0,0,u,h),bA.toBlob((t=>{if(!t)return n(new Error("Unable to retrieve canvas blob"));e(t)}),t,i)}))}finally{this[RA]({width:r,height:o})}}registerEffectComposer(e){e.setRenderer(this[YA].threeRenderer),e.setMainCamera(this[jA].getCamera()),e.setMainScene(this[jA]),this[jA].effectRenderer=e}unregisterEffectComposer(){this[jA].effectRenderer=null}registerRenderer(e){this[jA].externalRenderer=e}unregisterRenderer(){this[jA].externalRenderer=null}get[DA](){return this[NA]}get[NA](){return null==this.alt||"null"===this.alt?this[wA]:this.alt}[ZA](){return this[TA]}[JA](){return this.loaded&&this[kA]}[eb](){return!!this.src&&this[kA]}[RA](e){let{width:t,height:i}=e;0!==t&&0!==i&&(this[GA].style.width=`${t}px`,this[GA].style.height=`${i}px`,this[XA]({width:t,height:i}))}[WA](e,t){var i;null===(i=this[jA].effectRenderer)||void 0===i||i.beforeRender(e,t)}[HA](){this[TA]||(this[TA]=!0,this[UA]=performance.now())}[qA](){this[jA].queueRender()}[$A](){}[FA](e){this[MA]=e;const t=this.getRootNode();null!=t&&t.activeElement===this&&this[OA].textContent!=e&&(this[OA].textContent=e)}[(_A=IA,vA=BA,XA)](e){this[jA].setSize(e.width,e.height)}async[(yA=EA,zA)](){const e=this[jA];if(this.loaded||!this[eb]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[FA]("Loading"),e.stopAnimation();const t=this[KA].beginActivity("model-load"),i=this.src;try{const n=e.setSource(i,(e=>t(.95*Qh(e,0,1)))),r=this[Xh]();await Promise.all([n,r]),this[HA](),this[$A](),this.updateComplete.then((()=>{this.dispatchEvent(new CustomEvent("before-render"))})),await new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),e()}))}))}))}catch(e){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:e}}))}finally{t(1)}}}AA([Ie({type:String})],nb.prototype,"alt",void 0),AA([Ie({type:String})],nb.prototype,"src",void 0),AA([Ie({type:Boolean,attribute:"with-credentials"})],nb.prototype,"withCredentials",void 0),AA([Ie({type:Boolean,attribute:"generate-schema"})],nb.prototype,"generateSchema",void 0);var rb=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const ob=Symbol("changeAnimation"),ab=Symbol("paused"),sb={repetitions:1/0,pingpong:!1},lb=Symbol("hotspotMap"),cb=Symbol("mutationCallback"),ub=Symbol("observer"),hb=Symbol("addHotspot"),db=Symbol("removeHotspot"),pb=new hr;var fb=Uint8Array,mb=Uint16Array,gb=Int32Array,_b=new fb([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vb=new fb([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yb=new fb([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ab=function(e,t){for(var i=new mb(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var r=new gb(i[30]);for(n=1;n<30;++n)for(var o=i[n];o<i[n+1];++o)r[o]=o-i[n]<<5|n;return{b:i,r:r}},bb=Ab(_b,2),xb=bb.b,wb=bb.r;xb[28]=258,wb[258]=28;for(var Sb=Ab(vb,0).r,Cb=new mb(32768),Eb=0;Eb<32768;++Eb){var Tb=(43690&Eb)>>1|(21845&Eb)<<1;Tb=(61680&(Tb=(52428&Tb)>>2|(13107&Tb)<<2))>>4|(3855&Tb)<<4,Cb[Eb]=((65280&Tb)>>8|(255&Tb)<<8)>>1}var Mb=function(e,t,i){for(var n=e.length,r=0,o=new mb(t);r<n;++r)e[r]&&++o[e[r]-1];var a,s=new mb(t);for(r=1;r<t;++r)s[r]=s[r-1]+o[r-1]<<1;for(a=new mb(n),r=0;r<n;++r)e[r]&&(a[r]=Cb[s[e[r]-1]++]>>15-e[r]);return a},Ib=new fb(288);for(Eb=0;Eb<144;++Eb)Ib[Eb]=8;for(Eb=144;Eb<256;++Eb)Ib[Eb]=9;for(Eb=256;Eb<280;++Eb)Ib[Eb]=7;for(Eb=280;Eb<288;++Eb)Ib[Eb]=8;var Bb=new fb(32);for(Eb=0;Eb<32;++Eb)Bb[Eb]=5;var Rb=Mb(Ib,9),Pb=Mb(Bb,5),kb=function(e){return(e+7)/8|0},Lb=function(e,t,i){return(null==i||i>e.length)&&(i=e.length),new fb(e.subarray(t,i))},Db=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Nb=function(e,t,i){var n=new Error(t||Db[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Nb),!i)throw n;return n},Ob=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8},Fb=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8,e[n+2]|=i>>16},Ub=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var r=i.length,o=i.slice();if(!r)return{t:qb,l:0};if(1==r){var a=new fb(i[0].s+1);return a[i[0].s]=1,{t:a,l:1}}i.sort((function(e,t){return e.f-t.f})),i.push({s:-1,f:25001});var s=i[0],l=i[1],c=0,u=1,h=2;for(i[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=r-1;)s=i[i[c].f<i[h].f?c++:h++],l=i[c!=u&&i[c].f<i[h].f?c++:h++],i[u++]={s:-1,f:s.f+l.f,l:s,r:l};var d=o[0].s;for(n=1;n<r;++n)o[n].s>d&&(d=o[n].s);var p=new mb(d+1),f=zb(i[u-1],p,0);if(f>t){n=0;var m=0,g=f-t,_=1<<g;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));n<r;++n){var v=o[n].s;if(!(p[v]>t))break;m+=_-(1<<f-p[v]),p[v]=t}for(m>>=g;m>0;){var y=o[n].s;p[y]<t?m-=1<<t-p[y]++-1:++n}for(;n>=0&&m;--n){var A=o[n].s;p[A]==t&&(--p[A],++m)}f=t}return{t:new fb(p),l:f}},zb=function(e,t,i){return-1==e.s?Math.max(zb(e.l,t,i+1),zb(e.r,t,i+1)):t[e.s]=i},Hb=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new mb(++t),n=0,r=e[0],o=1,a=function(e){i[n++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(r),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(r);o=1,r=e[s]}return{c:i.subarray(0,n),n:t}},Gb=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},Vb=function(e,t,i){var n=i.length,r=kb(t+2);e[r]=255&n,e[r+1]=n>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var o=0;o<n;++o)e[r+o+4]=i[o];return 8*(r+4+n)},Qb=function(e,t,i,n,r,o,a,s,l,c,u){Ob(t,u++,i),++r[256];for(var h=Ub(r,15),d=h.t,p=h.l,f=Ub(o,15),m=f.t,g=f.l,_=Hb(d),v=_.c,y=_.n,A=Hb(m),b=A.c,x=A.n,w=new mb(19),S=0;S<v.length;++S)++w[31&v[S]];for(S=0;S<b.length;++S)++w[31&b[S]];for(var C=Ub(w,7),E=C.t,T=C.l,M=19;M>4&&!E[yb[M-1]];--M);var I,B,R,P,k=c+5<<3,L=Gb(r,Ib)+Gb(o,Bb)+a,D=Gb(r,d)+Gb(o,m)+a+14+3*M+Gb(w,E)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&k<=L&&k<=D)return Vb(t,u,e.subarray(l,l+c));if(Ob(t,u,1+(D<L)),u+=2,D<L){I=Mb(d,p),B=d,R=Mb(m,g),P=m;var N=Mb(E,T);for(Ob(t,u,y-257),Ob(t,u+5,x-1),Ob(t,u+10,M-4),u+=14,S=0;S<M;++S)Ob(t,u+3*S,E[yb[S]]);u+=3*M;for(var O=[v,b],F=0;F<2;++F){var U=O[F];for(S=0;S<U.length;++S){var z=31&U[S];Ob(t,u,N[z]),u+=E[z],z>15&&(Ob(t,u,U[S]>>5&127),u+=U[S]>>12)}}}else I=Rb,B=Ib,R=Pb,P=Bb;for(S=0;S<s;++S){var H=n[S];if(H>255){Fb(t,u,I[257+(z=H>>18&31)]),u+=B[z+257],z>7&&(Ob(t,u,H>>23&31),u+=_b[z]);var G=31&H;Fb(t,u,R[G]),u+=P[G],G>3&&(Fb(t,u,H>>5&8191),u+=vb[G])}else Fb(t,u,I[H]),u+=B[H]}return Fb(t,u,I[256]),u+B[256]},jb=new gb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qb=new fb(0),Wb=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var i=t,n=9;--n;)i=(1&i&&-306674912)^i>>>1;e[t]=i}return e}(),$b=function(){var e=-1;return{p:function(t){for(var i=e,n=0;n<t.length;++n)i=Wb[255&i^t[n]]^i>>>8;e=i},d:function(){return~e}}},Xb=function(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i},Yb=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8};function Kb(e,t){return function(e,t,i,n,r){if(!r&&(r={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new fb(o.length+e.length);a.set(o),a.set(e,o.length),e=a,r.w=o.length}return function(e,t,i,n,r,o){var a=o.z||e.length,s=new fb(0+a+5*(1+Math.ceil(a/7e3))+0),l=s.subarray(0,s.length-0),c=o.l,u=7&(o.r||0);if(t){u&&(l[0]=o.r>>3);for(var h=jb[t-1],d=h>>13,p=8191&h,f=(1<<i)-1,m=o.p||new mb(32768),g=o.h||new mb(f+1),_=Math.ceil(i/3),v=2*_,y=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<v)&f},A=new gb(25e3),b=new mb(288),x=new mb(32),w=0,S=0,C=o.i||0,E=0,T=o.w||0,M=0;C+2<a;++C){var I=y(C),B=32767&C,R=g[I];if(m[B]=R,g[I]=B,T<=C){var P=a-C;if((w>7e3||E>24576)&&(P>423||!c)){u=Qb(e,l,0,A,b,x,S,E,M,C-M,u),E=w=S=0,M=C;for(var k=0;k<286;++k)b[k]=0;for(k=0;k<30;++k)x[k]=0}var L=2,D=0,N=p,O=B-R&32767;if(P>2&&I==y(C-O))for(var F=Math.min(d,P)-1,U=Math.min(32767,C),z=Math.min(258,P);O<=U&&--N&&B!=R;){if(e[C+L]==e[C+L-O]){for(var H=0;H<z&&e[C+H]==e[C+H-O];++H);if(H>L){if(L=H,D=O,H>F)break;var G=Math.min(O,H-2),V=0;for(k=0;k<G;++k){var Q=C-O+k&32767,j=Q-m[Q]&32767;j>V&&(V=j,R=Q)}}}O+=(B=R)-(R=m[B])&32767}if(D){A[E++]=268435456|wb[L]<<18|Sb[D];var q=31&wb[L],W=31&Sb[D];S+=_b[q]+vb[W],++b[257+q],++x[W],T=C+L,++w}else A[E++]=e[C],++b[e[C]]}}for(C=Math.max(C,T);C<a;++C)A[E++]=e[C],++b[e[C]];u=Qb(e,l,c,A,b,x,S,E,M,C-M,u),c||(o.r=7&u|l[u/8|0]<<3,u-=7,o.h=g,o.p=m,o.i=C,o.w=T)}else{for(C=o.w||0;C<a+c;C+=65535){var $=C+65535;$>=a&&(l[u/8|0]=c,$=a),u=Vb(l,u+1,e.subarray(C,$))}o.i=a}return Lb(s,0,0+kb(u)+0)}(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,0,0,r)}(e,t||{})}var Zb=function(e,t,i,n){for(var r in e){var o=e[r],a=t+r,s=n;Array.isArray(o)&&(s=Xb(n,o[1]),o=o[0]),o instanceof fb?i[a]=[o,s]:(i[a+="/"]=[new fb(0),s],Zb(o,a,i,n))}},Jb="undefined"!=typeof TextEncoder&&new TextEncoder,ex="undefined"!=typeof TextDecoder&&new TextDecoder;try{ex.decode(qb,{stream:!0})}catch(fv){}function tx(e,t){if(Jb)return Jb.encode(e);for(var i=e.length,n=new fb(e.length+(e.length>>1)),r=0,o=function(e){n[r++]=e},a=0;a<i;++a){if(r+5>n.length){var s=new fb(r+8+(i-a<<1));s.set(n),n=s}var l=e.charCodeAt(a);l<128||t?o(l):l<2048?(o(192|l>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++a))>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|63&l)):(o(224|l>>12),o(128|l>>6&63),o(128|63&l))}return Lb(n,0,r)}var ix=function(e){var t=0;if(e)for(var i in e){var n=e[i].length;n>65535&&Nb(9),t+=n+4}return t},nx=function(e,t,i,n,r,o,a,s){var l=n.length,c=i.extra,u=s&&s.length,h=ix(c);Yb(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(o<0&&8),e[t++]=r&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var d=new Date(null==i.mtime?Date.now():i.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&Nb(10),Yb(e,t,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),t+=4,-1!=o&&(Yb(e,t,i.crc),Yb(e,t+4,o<0?-o-2:o),Yb(e,t+8,i.size)),Yb(e,t+12,l),Yb(e,t+14,h),t+=16,null!=a&&(Yb(e,t,u),Yb(e,t+6,i.attrs),Yb(e,t+10,a),t+=14),e.set(n,t),t+=l,h)for(var f in c){var m=c[f],g=m.length;Yb(e,t,+f),Yb(e,t+2,g),e.set(m,t+4),t+=4+g}return u&&(e.set(s,t),t+=u),t};class rx{parse(e,t,i,n){this.parseAsync(e,n).then(t).catch(i)}async parseAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const i={},n="model.usda";i[n]=null;let r='#usda 1.0\n(\n\tcustomLayerData = {\n\t\tstring creator = "Three.js USDZExporter"\n\t}\n\tdefaultPrim = "Root"\n\tmetersPerUnit = 1\n\tupAxis = "Y"\n)\n\n';var o;r+=`def Xform "Root"\n{\n\tdef Scope "Scenes" (\n\t\tkind = "sceneLibrary"\n\t)\n\t{\n\t\tdef Xform "Scene" (\n\t\t\tcustomData = {\n\t\t\t\tbool preliminary_collidesWithEnvironment = 0\n\t\t\t\tstring sceneName = "Scene"\n\t\t\t}\n\t\t\tsceneName = "Scene"\n\t\t)\n\t\t{${!0===(o=t).includeAnchoringProperties?`\n\t\ttoken preliminary:anchoring:type = "${o.ar.anchoring.type}"\n\t\ttoken preliminary:planeAnchoring:alignment = "${o.ar.planeAnchoring.alignment}"\n\t`:""}\n`;const a={},s={};e.traverseVisible((e=>{if(e.isMesh){const t=e.geometry,n=e.material;if(n.isMeshStandardMaterial){const o="geometries/Geometry_"+t.id+".usda";if(!(o in i)){const e=`\ndef "Geometry"\n{\n${function(e){const t=e.attributes,i=t.position.count;return`\n\tdef Mesh "Geometry"\n\t{\n\t\tint[] faceVertexCounts = [${function(e){const t=null!==e.index?e.index.count:e.attributes.position.count;return Array(t/3).fill(3).join(", ")}(e)}]\n\t\tint[] faceVertexIndices = [${function(e){const t=e.index,i=[];if(null!==t)for(let n=0;n<t.count;n++)i.push(t.getX(n));else{const t=e.attributes.position.count;for(let e=0;e<t;e++)i.push(e)}return i.join(", ")}(e)}]\n\t\tnormal3f[] normals = [${cx(t.normal,i)}] (\n\t\t\tinterpolation = "vertex"\n\t\t)\n\t\tpoint3f[] points = [${cx(t.position,i)}]\n${function(e){let t="";for(let n=0;n<4;n++){const i=n>0?n:"",r=e["uv"+i];void 0!==r&&(t+=`\n\t\ttexCoord2f[] primvars:st${i} = [${ux(r)}] (\n\t\t\tinterpolation = "vertex"\n\t\t)`)}const i=e.color;return void 0!==i&&(t+=`\n\tcolor3f[] primvars:displayColor = [${cx(i,i.count)}] (\n\t\tinterpolation = "vertex"\n\t\t)`),t}(t)}\n\t\tuniform token subdivisionScheme = "none"\n\t}\n`}(t)}\n}\n`;i[o]=function(e){let t='#usda 1.0\n(\n\tcustomLayerData = {\n\t\tstring creator = "Three.js USDZExporter"\n\t}\n\tdefaultPrim = "Root"\n\tmetersPerUnit = 1\n\tupAxis = "Y"\n)\n\n';return t+=e,tx(t)}(e)}n.uuid in a||(a[n.uuid]=n),r+=function(e,t,i){const n="Object_"+e.id,r=sx(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),`def Xform "${n}" (\n\tprepend references = @./geometries/Geometry_${t.id}.usda@</Geometry>\n\tprepend apiSchemas = ["MaterialBindingAPI"]\n)\n{\n\tmatrix4d xformOp:transform = ${r}\n\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\trel material:binding = </Materials/Material_${i.id}>\n}\n\n`}(e,t,n)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",e)}else e.isCamera&&(r+=function(e){const t=e.name?e.name:"Camera_"+e.id,i=sx(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),e.isOrthographicCamera?`def Camera "${t}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${i}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\t\t\tfloat2 clippingRange = (${e.near.toPrecision(ax)}, ${e.far.toPrecision(ax)})\n\t\t\tfloat horizontalAperture = ${(10*(Math.abs(e.left)+Math.abs(e.right))).toPrecision(ax)}\n\t\t\tfloat verticalAperture = ${(10*(Math.abs(e.top)+Math.abs(e.bottom))).toPrecision(ax)}\n\t\t\ttoken projection = "orthographic"\n\t\t}\n\t\n\t`:`def Camera "${t}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${i}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\n\t\t\tfloat2 clippingRange = (${e.near.toPrecision(ax)}, ${e.far.toPrecision(ax)})\n\t\t\tfloat focalLength = ${e.getFocalLength().toPrecision(ax)}\n\t\t\tfloat focusDistance = ${e.focus.toPrecision(ax)}\n\t\t\tfloat horizontalAperture = ${e.getFilmWidth().toPrecision(ax)}\n\t\t\ttoken projection = "perspective"\n\t\t\tfloat verticalAperture = ${e.getFilmHeight().toPrecision(ax)}\n\t\t}\n\t\n\t`}(e))})),r+="\n\t\t}\n\t}\n}\n\n",r+=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];for(const r in e){const o=e[r];n.push(hx(o,t,i))}return`def "Materials"\n{\n${n.join("")}\n}\n\n`}(a,s,t.quickLookCompatible),i[n]=tx(r),r=null;for(const c in s){let e=s[c];!0===e.isCompressedTexture&&(e=ff(e));const n=ox(e.image,e.flipY,t.maxTextureSize),r=await new Promise((e=>n.toBlob(e,"image/png",1)));i[`textures/Texture_${c}.png`]=new Uint8Array(await r.arrayBuffer())}let l=0;for(const c in i){const e=i[c];l+=34+c.length;const t=63&l;if(4!==t){const n=new Uint8Array(64-t);i[c]=[e,{extra:{12345:n}}]}l=e.length}return function(e,t){t||(t={});var i={},n=[];Zb(e,"",i,t);var r,o,a,s,l,c=0,u=0;for(var h in i){var d=i[h],p=d[0],f=d[1],m=0==f.level?0:8,g=(M=tx(h)).length,_=f.comment,v=_&&tx(_),y=v&&v.length,A=ix(f.extra);g>65535&&Nb(11);var b=m?Kb(p,f):p,x=b.length,w=$b();w.p(p),n.push(Xb(f,{size:p.length,crc:w.d(),c:b,f:M,m:v,u:g!=h.length||v&&_.length!=y,o:c,compression:m})),c+=30+g+A+x,u+=76+2*(g+A)+(y||0)+x}for(var S=new fb(u+22),C=c,E=u-c,T=0;T<n.length;++T){var M=n[T];nx(S,M.o,M,M.f,M.u,M.c.length);var I=30+M.f.length+ix(M.extra);S.set(M.c,M.o+I),nx(S,c,M,M.f,M.u,M.c.length,M.o,M.m),c+=16+I+(M.m?M.m.length:0)}return r=S,o=c,a=n.length,s=E,l=C,Yb(r,o,101010256),Yb(r,o+8,a),Yb(r,o+10,a),Yb(r,o+12,s),Yb(r,o+16,l),S}(i,{level:0})}}function ox(e,t,i){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=i/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=e.width*Math.min(1,n),r.height=e.height*Math.min(1,n);const o=r.getContext("2d");return!0===t&&(o.translate(0,r.height),o.scale(1,-1)),o.drawImage(e,0,0,r.width,r.height),r}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const ax=7;function sx(e){const t=e.elements;return`( ${lx(t,0)}, ${lx(t,4)}, ${lx(t,8)}, ${lx(t,12)} )`}function lx(e,t){return`(${e[t+0]}, ${e[t+1]}, ${e[t+2]}, ${e[t+3]})`}function cx(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");const i=[];for(let n=0;n<e.count;n++){const t=e.getX(n),r=e.getY(n),o=e.getZ(n);i.push(`(${t.toPrecision(ax)}, ${r.toPrecision(ax)}, ${o.toPrecision(ax)})`)}return i.join(", ")}function ux(e){const t=[];for(let i=0;i<e.count;i++){const n=e.getX(i),r=e.getY(i);t.push(`(${n.toPrecision(ax)}, ${1-r.toPrecision(ax)})`)}return t.join(", ")}function hx(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n="\t\t\t",r=[],o=[];function a(n,r,o){const a=n.source.id+"_"+n.flipY;t[a]=n;const s=n.channel>0?"st"+n.channel:"st",l={1e3:"repeat",1001:"clamp",1002:"mirror"},c=n.repeat.clone(),u=n.offset.clone(),h=n.rotation,d=Math.sin(h),p=Math.cos(h);return u.y=1-u.y-c.y,i?(u.x=u.x/c.x,u.y=u.y/c.y,u.x+=d/c.x,u.y+=p-1):(u.x+=d*c.x,u.y+=(1-p)*c.y),`\n\t\tdef Shader "PrimvarReader_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdPrimvarReader_float2"\n\t\t\tfloat2 inputs:fallback = (0.0, 0.0)\n\t\t\ttoken inputs:varname = "${s}"\n\t\t\tfloat2 outputs:result\n\t\t}\n\n\t\tdef Shader "Transform2d_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdTransform2d"\n\t\t\ttoken inputs:in.connect = </Materials/Material_${e.id}/PrimvarReader_${r}.outputs:result>\n\t\t\tfloat inputs:rotation = ${(h*(180/Math.PI)).toFixed(ax)}\n\t\t\tfloat2 inputs:scale = ${px(c)}\n\t\t\tfloat2 inputs:translation = ${px(u)}\n\t\t\tfloat2 outputs:result\n\t\t}\n\n\t\tdef Shader "Texture_${n.id}_${r}"\n\t\t{\n\t\t\tuniform token info:id = "UsdUVTexture"\n\t\t\tasset inputs:file = @textures/Texture_${a}.png@\n\t\t\tfloat2 inputs:st.connect = </Materials/Material_${e.id}/Transform2d_${r}.outputs:result>\n\t\t\t${void 0!==o?"float4 inputs:scale = "+(f=o,`(${f.r}, ${f.g}, ${f.b}, 1.0)`):""}\n\t\t\ttoken inputs:sourceColorSpace = "${n.colorSpace===Ei?"raw":"sRGB"}"\n\t\t\ttoken inputs:wrapS = "${l[n.wrapS]}"\n\t\t\ttoken inputs:wrapT = "${l[n.wrapT]}"\n\t\t\tfloat outputs:r\n\t\t\tfloat outputs:g\n\t\t\tfloat outputs:b\n\t\t\tfloat3 outputs:rgb\n\t\t\t${e.transparent||e.alphaTest>0?"float outputs:a":""}\n\t\t}`;var f}return 2===e.side&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",e),null!==e.map?(r.push(`${n}color3f inputs:diffuseColor.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:rgb>`),e.transparent?r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`):e.alphaTest>0&&(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.map.id}_diffuse.outputs:a>`),r.push(`${n}float inputs:opacityThreshold = ${e.alphaTest}`)),o.push(a(e.map,"diffuse",e.color))):r.push(`${n}color3f inputs:diffuseColor = ${dx(e.color)}`),null!==e.emissiveMap?(r.push(`${n}color3f inputs:emissiveColor.connect = </Materials/Material_${e.id}/Texture_${e.emissiveMap.id}_emissive.outputs:rgb>`),o.push(a(e.emissiveMap,"emissive",new no(e.emissive.r*e.emissiveIntensity,e.emissive.g*e.emissiveIntensity,e.emissive.b*e.emissiveIntensity)))):e.emissive.getHex()>0&&r.push(`${n}color3f inputs:emissiveColor = ${dx(e.emissive)}`),null!==e.normalMap&&(r.push(`${n}normal3f inputs:normal.connect = </Materials/Material_${e.id}/Texture_${e.normalMap.id}_normal.outputs:rgb>`),o.push(a(e.normalMap,"normal"))),null!==e.aoMap&&(r.push(`${n}float inputs:occlusion.connect = </Materials/Material_${e.id}/Texture_${e.aoMap.id}_occlusion.outputs:r>`),o.push(a(e.aoMap,"occlusion",new no(e.aoMapIntensity,e.aoMapIntensity,e.aoMapIntensity)))),null!==e.roughnessMap?(r.push(`${n}float inputs:roughness.connect = </Materials/Material_${e.id}/Texture_${e.roughnessMap.id}_roughness.outputs:g>`),o.push(a(e.roughnessMap,"roughness",new no(e.roughness,e.roughness,e.roughness)))):r.push(`${n}float inputs:roughness = ${e.roughness}`),null!==e.metalnessMap?(r.push(`${n}float inputs:metallic.connect = </Materials/Material_${e.id}/Texture_${e.metalnessMap.id}_metallic.outputs:b>`),o.push(a(e.metalnessMap,"metallic",new no(e.metalness,e.metalness,e.metalness)))):r.push(`${n}float inputs:metallic = ${e.metalness}`),null!==e.alphaMap?(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${e.id}/Texture_${e.alphaMap.id}_opacity.outputs:r>`),r.push(`${n}float inputs:opacityThreshold = 0.0001`),o.push(a(e.alphaMap,"opacity"))):r.push(`${n}float inputs:opacity = ${e.opacity}`),e.isMeshPhysicalMaterial&&(null!==e.clearcoatMap?(r.push(`${n}float inputs:clearcoat.connect = </Materials/Material_${e.id}/Texture_${e.clearcoatMap.id}_clearcoat.outputs:r>`),o.push(a(e.clearcoatMap,"clearcoat",new no(e.clearcoat,e.clearcoat,e.clearcoat)))):r.push(`${n}float inputs:clearcoat = ${e.clearcoat}`),null!==e.clearcoatRoughnessMap?(r.push(`${n}float inputs:clearcoatRoughness.connect = </Materials/Material_${e.id}/Texture_${e.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),o.push(a(e.clearcoatRoughnessMap,"clearcoatRoughness",new no(e.clearcoatRoughness,e.clearcoatRoughness,e.clearcoatRoughness)))):r.push(`${n}float inputs:clearcoatRoughness = ${e.clearcoatRoughness}`),r.push(`${n}float inputs:ior = ${e.ior}`)),`\n\tdef Material "Material_${e.id}"\n\t{\n\t\tdef Shader "PreviewSurface"\n\t\t{\n\t\t\tuniform token info:id = "UsdPreviewSurface"\n${r.join("\n")}\n\t\t\tint inputs:useSpecularWorkflow = 0\n\t\t\ttoken outputs:surface\n\t\t}\n\n\t\ttoken outputs:surface.connect = </Materials/Material_${e.id}/PreviewSurface.outputs:surface>\n\n${o.join("\n")}\n\n\t}\n`}function dx(e){return`(${e.r}, ${e.g}, ${e.b})`}function px(e){return`(${e.x}, ${e.y})`}var fx=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let mx=!1,gx=!1;const _x="#model-viewer-no-ar-fallback",vx=(yx=["quick-look","scene-viewer","webxr","none"],e=>{try{const t=rm(e),i=(t.length?t[0].terms:[]).filter((e=>e&&"ident"===e.type)).map((e=>e.value)).filter((e=>yx.indexOf(e)>-1));return new Set(i)}catch(e){}return new Set});var yx;const Ax="quick-look",bx="scene-viewer",xx="webxr",wx="none",Sx=Symbol("arButtonContainer"),Cx=Symbol("enterARWithWebXR"),Ex=Symbol("openSceneViewer"),Tx=Symbol("openIOSARQuickLook"),Mx=Symbol("canActivateAR"),Ix=Symbol("arMode"),Bx=Symbol("arModes"),Rx=Symbol("arAnchor"),Px=Symbol("preload"),kx=Symbol("onARButtonContainerClick"),Lx=Symbol("onARStatus"),Dx=Symbol("onARTracking"),Nx=Symbol("onARTap"),Ox=Symbol("selectARMode"),Fx=Symbol("triggerLoad");var Ux=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const zx="auto",Hx=Symbol("defaultProgressBarElement"),Gx=Symbol("posterContainerElement"),Vx=Symbol("defaultPosterElement"),Qx=Symbol("shouldDismissPoster"),jx=Symbol("hidePoster"),qx=Symbol("modelIsRevealed"),Wx=Symbol("updateProgressBar"),$x=Symbol("ariaLabelCallToAction"),Xx=Symbol("onProgress");var Yx=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const Kx=Math.PI/32,Zx={basis:[pm(nm(Kx,"rad"))],keywords:{auto:[null]}},Jx=Symbol("autoRotateStartTime"),ew=Symbol("radiansPerSecond"),tw=Symbol("syncRotationRate"),iw=Symbol("onCameraChange"),nw=(e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this[t]=new Map,this[i]=e=>{e.forEach((e=>{e instanceof MutationRecord&&"childList"!==e.type||(e.addedNodes.forEach((e=>{this[hb](e)})),e.removedNodes.forEach((e=>{this[db](e)})),this[qA]())}))},this[n]=new MutationObserver(this[cb])}connectedCallback(){super.connectedCallback();for(let t=0;t<this.children.length;++t)this[hb](this.children[t]);const{ShadyDOM:e}=self;null==e?this[ub].observe(this,{childList:!0}):this[ub]=e.observeChildren(this,this[cb])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:e}=self;null==e?this[ub].disconnect():e.unobserveChildren(this[ub])}[(t=lb,i=cb,n=ub,$A)](){super[$A]();const e=this[jA];e.forHotspots((t=>{e.updateSurfaceHotspot(t)}))}[WA](e,t){super[WA](e,t);const i=this[jA],{annotationRenderer:n}=i,r=i.getCamera();i.shouldRender()&&(i.animateSurfaceHotspots(),i.updateHotspotsVisibility(r.position),n.domElement.style.display="",n.render(i,r))}updateHotspot(e){const t=this[lb].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),t.surface=e.surface,this[jA].updateSurfaceHotspot(t),this[qA]())}queryHotspot(e){const t=this[lb].get(e);if(null==t)return null;const i=tb(t.position),n=tb(t.normal),r=t.facingCamera,o=this[jA],a=o.getCamera(),s=new Dn;s.setFromMatrixPosition(t.matrixWorld),s.project(a);const l=o.width/2,c=o.height/2;s.x=s.x*l+l,s.y=-s.y*c+c;const u=tb(new Dn(s.x,s.y,s.z));return Number.isFinite(u.x)&&Number.isFinite(u.y)?{position:i,normal:n,canvasPosition:u,facingCamera:r}:null}positionAndNormalFromPoint(e,t){const i=this[jA],n=i.getNDC(e,t),r=i.positionAndNormalFromPoint(n);if(null==r)return null;pb.copy(i.target.matrixWorld).invert();const o=tb(r.position.applyMatrix4(pb)),a=tb(r.normal.transformDirection(pb));let s=null;return null!=r.uv&&(s=ib(r.uv)),{position:o,normal:a,uv:s}}surfaceFromPoint(e,t){const i=this[jA],n=i.getNDC(e,t);return i.surfaceFromPoint(n)}[hb](e){if(!(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")))return;let t=this[lb].get(e.slot);null!=t?t.increment():(t=new $y({name:e.slot,position:e.dataset.position,normal:e.dataset.normal,surface:e.dataset.surface}),this[lb].set(e.slot,t),this[jA].addHotspot(t)),this[jA].queueRender()}[db](e){if(!(e instanceof HTMLElement))return;const t=this[lb].get(e.slot);t&&(t.decrement()&&(this[jA].removeHotspot(t),this[lb].delete(e.slot)),this[jA].queueRender())}}return r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this[t]=void 0,this[i]=null,this[n]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[Fy]}get availableVariants(){return this.model?this.model[By]():[]}get originalGltfJson(){return this[Oy]}[(t=Fy,i=Ny,n=Oy,Uy)](){return()=>{this[qA]()}}[zy](e){return e.colorSpace=Ti,e.wrapS=ft,e.wrapT=ft,new Mv(this[Uy](),e)}async createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";const{textureUtils:i}=this[YA],n=await i.loadImage(e,this.withCredentials);return n.userData.mimeType=t,this[zy](n)}async createLottieTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const{textureUtils:i}=this[YA],n=await i.loadLottie(e,t,this.withCredentials);return this[zy](n)}createVideoTexture(e){const t=document.createElement("video");t.crossOrigin=this.withCredentials?"use-credentials":"anonymous",t.src=e,t.muted=!0,t.playsInline=!0,t.loop=!0,t.play();const i=new ou(t);return this[zy](i)}createCanvasTexture(){const e=document.createElement("canvas"),t=new cu(e);return this[zy](t)}async updated(e){if(super.updated(e),e.has("variantName")){const e=this[KA].beginActivity("variant-update");e(.1);const t=this[Fy],{variantName:i}=this;null!=t&&(await t[Cy](i),this[qA](),this.dispatchEvent(new CustomEvent("variant-applied"))),e(1)}if(e.has("orientation")||e.has("scale")){if(!this.loaded)return;const e=this[jA];e.applyTransform(),e.updateBoundingBox(),e.updateShadow(),this[YA].arRenderer.onUpdateScene(),this[qA]()}}[$A](){super[$A]();const{currentGLTF:e}=this[jA];if(null!=e){const{correlatedSceneGraph:t}=e;null!=t&&e!==this[Ny]&&(this[Fy]=new Ly(t,this[Uy]()),this[Oy]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")}this[Ny]=e}async exportScene(e){const t=this[jA];return new Promise((async(i,n)=>{const r={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(r,e),r.animations=t.animations,r.truncateDrawRange=!0;const o=t.shadow;let a=!1;null!=o&&(a=o.visible,o.visible=!1),await this[Fy][Sy](),(new gf).register((e=>new $f(e))).parse(t.model,(e=>i(new Blob([r.binary?e:JSON.stringify(e)],{type:r.binary?"application/octet-stream":"application/json"}))),(()=>n("glTF export failed")),r),null!=o&&(o.visible=a)}))}materialFromPoint(e,t){const i=this[Fy];if(null==i)return null;const n=this[jA],r=n.getNDC(e,t),o=n.hitFromPoint(r);return null==o||null==o.face?null:i[Ey](o)}}return Dy([Ie({type:String,attribute:"variant-name"})],r.prototype,"variantName",void 0),Dy([Ie({type:String,attribute:"orientation"})],r.prototype,"orientation",void 0),Dy([Ie({type:String,attribute:"scale"})],r.prototype,"scale",void 0),r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[t]=performance.now(),this[i]=0,this[n]=e=>{this.autoRotate&&"user-interaction"===e.detail.source&&(this[Jx]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[iw]),this[Jx]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[iw]),this[Jx]=performance.now()}updated(e){super.updated(e),e.has("autoRotate")&&(this[Jx]=performance.now())}[(t=Jx,i=ew,tw)](e){this[ew]=e[0]}[WA](e,t){if(super[WA](e,t),!this.autoRotate||!this[JA]()||this[YA].isPresenting)return;const i=Math.min(t,e-this[Jx]-this.autoRotateDelay);i>0&&(this[jA].yaw=this.turntableRotation+this[ew]*i*.001)}get turntableRotation(){return this[jA].yaw}resetTurntableRotation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[jA].yaw=e}}return n=iw,Yx([Ie({type:Boolean,attribute:"auto-rotate"})],r.prototype,"autoRotate",void 0),Yx([Ie({type:Number,attribute:"auto-rotate-delay"})],r.prototype,"autoRotateDelay",void 0),Yx([Jm({intrinsics:Zx,updateHandler:tw}),Ie({type:String,attribute:"rotation-per-second"})],r.prototype,"rotationPerSecond",void 0),r})((e=>{var t,i,n;class r extends e{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this.toneMapping="auto",this.skyboxHeight="0",this[t]=null,this[i]=null,this[n]=null}updated(e){super.updated(e),e.has("shadowIntensity")&&(this[jA].setShadowIntensity(.5*this.shadowIntensity),this[qA]()),e.has("shadowSoftness")&&(this[jA].setShadowSoftness(this.shadowSoftness),this[qA]()),e.has("exposure")&&(this[jA].exposure=this.exposure,this[qA]()),e.has("toneMapping")&&(this[jA].toneMapping="aces"===this.toneMapping?4:"agx"===this.toneMapping?6:7,this[qA]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[eb]()&&this[Xh](),e.has("skyboxHeight")&&(this[jA].setGroundedSkybox(),this[qA]())}hasBakedShadow(){return this[jA].bakedShadows.size>0}async[(t=Wh,i=$h,n=Yh,Xh)](){const{skyboxImage:e,environmentImage:t}=this;null!=this[Yh]&&(this[Yh](),this[Yh]=null);const{textureUtils:i}=this[YA];if(null==i)return;const n=this[KA].beginActivity("environment-update");try{const{environmentMap:r,skybox:o}=await i.generateEnvironmentMapAndSkybox(zh(e),t,(e=>n(Qh(e,0,1))),this.withCredentials);this[Wh]!==r&&(this[Wh]=r,this.dispatchEvent(new CustomEvent("environment-change"))),this[$h]=null!=o?o.name===r.name?r:o:null,this[jA].setEnvironmentAndSkybox(this[Wh],this[$h])}catch(e){if(e instanceof Error)throw this[jA].setEnvironmentAndSkybox(null,null),e}finally{n(1)}}}return qh([Ie({type:String,attribute:"environment-image"})],r.prototype,"environmentImage",void 0),qh([Ie({type:String,attribute:"skybox-image"})],r.prototype,"skyboxImage",void 0),qh([Ie({type:Number,attribute:"shadow-intensity"})],r.prototype,"shadowIntensity",void 0),qh([Ie({type:Number,attribute:"shadow-softness"})],r.prototype,"shadowSoftness",void 0),qh([Ie({type:Number})],r.prototype,"exposure",void 0),qh([Ie({type:String,attribute:"tone-mapping"})],r.prototype,"toneMapping",void 0),qh([Ie({type:String,attribute:"skybox-height"})],r.prototype,"skyboxHeight",void 0),r})((e=>{var t,i,n,r,o,a,s,l,c,u,h,d,p,f,m,g,_,v;class y extends e{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=ag,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=cg,this.interactionPromptStyle=ug,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction="none",this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this.a11y=null,this[t]=this.shadowRoot.querySelector(".interaction-prompt"),this[i]=this.shadowRoot.querySelector("#prompt"),this[n]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[r]=this.shadowRoot.querySelector(".pan-target"),this[o]=0,this[a]=1/0,this[s]=!1,this[l]=!1,this[c]=n_,this[u]=new r_(this[jA].camera,this[VA],this[jA]),this[h]=new wh,this[d]=!1,this[p]=!1,this[f]=!1,this[m]={},this[g]=()=>{const e=this[bg].changeSource;this[Fg]=e,e===t_&&(this[Dg]=!0,this[Eg]())},this[_]=()=>{this[Tg](),this[qA]();const e=this[bg].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:e}}))},this[v]=e=>{this[GA].classList.toggle("pointer-tumbling","pointer-change-start"===e.type)}}get inputSensitivity(){return this[bg].inputSensitivity}set inputSensitivity(e){this[bg].inputSensitivity=e}getCameraOrbit(){const{theta:e,phi:t,radius:i}=this[Ug];return{theta:e,phi:t,radius:i,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return tb(this[YA].isPresenting?this[YA].arRenderer.target:this[jA].getDynamicTarget())}getFieldOfView(){return this[bg].getFieldOfView()}getMinimumFieldOfView(){return this[bg].options.minimumFieldOfView}getMaximumFieldOfView(){return this[bg].options.maximumFieldOfView}getIdealAspect(){return this[jA].idealAspect}jumpCameraToGoal(){this[zg]=!0,this.requestUpdate(zg,!1)}resetInteractionPrompt(){this[Og]=0,this[Ng]=1/0,this[Dg]=!1,this[Lg]=this.interactionPrompt===cg&&this.cameraControls}zoom(e){const t=new WheelEvent("wheel",{deltaY:-30*e});this[VA].dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this[bg].addEventListener("user-interaction",this[Rg]),this[bg].addEventListener("pointer-change-start",this[kg]),this[bg].addEventListener("pointer-change-end",this[kg])}disconnectedCallback(){super.disconnectedCallback(),this[bg].removeEventListener("user-interaction",this[Rg]),this[bg].removeEventListener("pointer-change-start",this[kg]),this[bg].removeEventListener("pointer-change-end",this[kg])}updated(e){super.updated(e);const t=this[bg],i=this[jA];if(e.has("cameraControls")&&(this.cameraControls?(t.enableInteraction(),this.interactionPrompt===cg&&(this[Lg]=!0)):(t.disableInteraction(),this[Eg]()),this[VA].setAttribute("aria-label",this[DA])),e.has("disableZoom")&&(t.disableZoom=this.disableZoom),e.has("disablePan")&&(t.enablePan=!this.disablePan),e.has("disableTap")&&(t.enableTap=!this.disableTap),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===cg&&this.cameraControls&&!this[Dg]?this[Lg]=!0:this[Eg]()),e.has("interactionPromptStyle")&&(this[Sg].style.opacity="basic"==this.interactionPromptStyle?"1":"0"),e.has("touchAction")){const e=this.touchAction;t.applyOptions({touchAction:e}),t.updateTouchActionStyle()}e.has("orbitSensitivity")&&(t.orbitSensitivity=this.orbitSensitivity),e.has("zoomSensitivity")&&(t.zoomSensitivity=this.zoomSensitivity),e.has("panSensitivity")&&(t.panSensitivity=this.panSensitivity),e.has("interpolationDecay")&&(t.setDamperDecayTime(this.interpolationDecay),i.setTargetDamperDecayTime(this.interpolationDecay)),e.has("a11y")&&this[Ig](),!0===this[zg]&&Promise.resolve().then((()=>{t.jumpToGoal(),i.jumpToGoal(),this[Pg](),this[zg]=!1}))}async updateFraming(){const e=this[jA],t=e.adjustedFoV(e.framedFoVDeg);await e.updateFraming();const i=e.adjustedFoV(e.framedFoVDeg),n=this[bg].getFieldOfView()/t;this[bg].setFieldOfView(i*n),this[Gg]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(e,t,i){const n=this[VA],r=this[Cg];if("1"===r[0].style.opacity)return void console.warn("interact() failed because an existing interaction is running.");const o=new Array;o.push({x:ig(t.x),y:ig(t.y)});const a=[{x:o[0].x(0),y:o[0].y(0)}];null!=i&&(o.push({x:ig(i.x),y:ig(i.y)}),a.push({x:o[1].x(0),y:o[1].y(0)}));let s=performance.now();const{width:l,height:c}=this[jA],u=this.getBoundingClientRect(),h=e=>{for(const[t,i]of a.entries()){const{style:o}=r[t];o.transform=`translateX(${l*i.x}px) translateY(${c*i.y}px)`,"pointerdown"===e?o.opacity="1":"pointerup"===e&&(o.opacity="0");const a={pointerId:t-5678,pointerType:"touch",target:n,clientX:l*i.x+u.x,clientY:c*i.y+u.y,altKey:!0};n.dispatchEvent(new PointerEvent(e,a))}},d=()=>{const t=this[Fg];if(t!==n_||!n.isConnected){for(const e of this[Cg])e.style.opacity="0";return h("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),void document.removeEventListener("visibilitychange",p)}const i=Math.min(1,(performance.now()-s)/e);for(const[e,n]of a.entries())n.x=o[e].x(i),n.y=o[e].y(i);h("pointermove"),i<1?requestAnimationFrame(d):(h("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:n_}})),document.removeEventListener("visibilitychange",p))},p=()=>{let e=0;"hidden"===document.visibilityState?e=performance.now()-s:s=performance.now()-e};document.addEventListener("visibilitychange",p),h("pointerdown"),this[Fg]=n_,requestAnimationFrame(d)}[(t=wg,i=Sg,n=Cg,r=xg,o=Og,a=Ng,s=Dg,l=Lg,c=Fg,u=bg,h=Ug,d=zg,p=Hg,f=Gg,m=Mg,Qg)](e){const t=this[bg],i=this[jA];i.framedFoVDeg=180*e[0]/Math.PI,t.changeSource=i_,t.setFieldOfView(i.adjustedFoV(i.framedFoVDeg)),this[Rg]()}[Vg](e){const t=this[bg];if(this[Gg]){const{theta:t,phi:i}=this.getCameraOrbit();e[0]=t,e[1]=i,this[Gg]=!1}t.changeSource=i_,t.setOrbit(e[0],e[1],e[2]),this[Rg]()}[qg](e){this[bg].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}[Wg](e){this[bg].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[Bg](e[2]),this.jumpCameraToGoal()}[$g](e){this[bg].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}[Xg](e){const t=this[jA].adjustedFoV(180*e[0]/Math.PI);this[bg].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[jg](e){const[t,i,n]=e;this[YA].arRenderer.isPresenting||this[jA].setTarget(t,i,n),this[bg].changeSource=i_,this[YA].arRenderer.updateTarget(),this[Rg]()}[WA](e,t){if(super[WA](e,t),this[YA].isPresenting||!this[JA]())return;const i=this[bg],n=this[jA],r=performance.now();if(this[Lg]&&this.loaded&&r>this[UA]+this.interactionPromptThreshold&&(this[Lg]=!1,this[Ng]=r,this[wg].classList.add("visible")),isFinite(this[Ng])&&this.interactionPromptStyle===ug){const e=(r-this[Ng])/5e3%1,t=rg(e),o=og(e);if(this[Sg].style.opacity=`${o}`,t!==this[Og]){const e=t*n.width*.05,r=(t-this[Og])*Math.PI/16;this[Sg].style.transform=`translateX(${e}px)`,i.changeSource=n_,i.adjustOrbit(r,0,0),this[Og]=t}}const o=i.update(e,t),a=n.updateTarget(t);(o||a)&&this[Pg]()}[Eg](){this[Lg]=!1,this[wg].classList.remove("visible"),this[Ng]=1/0}[Bg](e){const t=Math.max(this[jA].farRadius(),e),i=Math.abs(2*t);this[bg].updateNearFar(0,i)}[Tg](){const{theta:e,phi:t}=this[bg].getCameraSpherical(this[Ug]),i=(4+Math.floor((e%Ag+yg)/_g))%4,n=Math.floor(t/vg),r=`${lg[n]}${sg[i]}`,o=r;o in this[Mg]?this[FA](this[Mg][o]):this[FA](`View from stage ${r}`)}get[DA](){let e=". Use mouse, touch or arrow keys to move.";return"interaction-prompt"in this[Mg]&&(e=`. ${this[Mg]["interaction-prompt"]}`),super[DA].replace(/\.$/,"")+(this.cameraControls?e:"")}async[XA](e){const t=this[bg],i=this[jA],n=i.adjustedFoV(i.framedFoVDeg);super[XA](e);const r=i.adjustedFoV(i.framedFoVDeg)/n,o=t.getFieldOfView()*(isFinite(r)?r:1);t.updateAspect(this[jA].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[bg].setFieldOfView(o),this.jumpCameraToGoal()}[$A](){super[$A](),this[Hg]?this[Gg]=!0:this[Hg]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(g=Rg,_=Pg,v=kg,Ig)](){if("string"==typeof this.a11y)if(this.a11y.startsWith("{"))try{this[Mg]=JSON.parse(this.a11y)}catch(e){console.warn("Error parsing a11y JSON:",e)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Mg]={};else"object"==typeof this.a11y&&null!=this.a11y?this[Mg]=Object.assign({},this.a11y):this[Mg]={};this[VA].setAttribute("aria-label",this[DA])}}return ng([Ie({type:Boolean,attribute:"camera-controls"})],y.prototype,"cameraControls",void 0),ng([Jm({intrinsics:pg,observeEffects:!0,updateHandler:Vg}),Ie({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],y.prototype,"cameraOrbit",void 0),ng([Jm({intrinsics:gg,observeEffects:!0,updateHandler:jg}),Ie({type:String,attribute:"camera-target",hasChanged:()=>!0})],y.prototype,"cameraTarget",void 0),ng([Jm({intrinsics:hg,observeEffects:!0,updateHandler:Qg}),Ie({type:String,attribute:"field-of-view",hasChanged:()=>!0})],y.prototype,"fieldOfView",void 0),ng([Jm({intrinsics:fg,updateHandler:qg}),Ie({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],y.prototype,"minCameraOrbit",void 0),ng([Jm({intrinsics:mg,updateHandler:Wg}),Ie({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],y.prototype,"maxCameraOrbit",void 0),ng([Jm({intrinsics:dg,updateHandler:$g}),Ie({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],y.prototype,"minFieldOfView",void 0),ng([Jm({intrinsics:hg,updateHandler:Xg}),Ie({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],y.prototype,"maxFieldOfView",void 0),ng([Ie({type:Number,attribute:"interaction-prompt-threshold"})],y.prototype,"interactionPromptThreshold",void 0),ng([Ie({type:String,attribute:"interaction-prompt"})],y.prototype,"interactionPrompt",void 0),ng([Ie({type:String,attribute:"interaction-prompt-style"})],y.prototype,"interactionPromptStyle",void 0),ng([Ie({type:Number,attribute:"orbit-sensitivity"})],y.prototype,"orbitSensitivity",void 0),ng([Ie({type:Number,attribute:"zoom-sensitivity"})],y.prototype,"zoomSensitivity",void 0),ng([Ie({type:Number,attribute:"pan-sensitivity"})],y.prototype,"panSensitivity",void 0),ng([Ie({type:String,attribute:"touch-action"})],y.prototype,"touchAction",void 0),ng([Ie({type:Boolean,attribute:"disable-zoom"})],y.prototype,"disableZoom",void 0),ng([Ie({type:Boolean,attribute:"disable-pan"})],y.prototype,"disablePan",void 0),ng([Ie({type:Boolean,attribute:"disable-tap"})],y.prototype,"disableTap",void 0),ng([Ie({type:Number,attribute:"interpolation-decay"})],y.prototype,"interpolationDecay",void 0),ng([Ie()],y.prototype,"a11y",void 0),y})((e=>{var t,i,n,r,o,a,s,l,c,u;class h extends e{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".ar-button"),this[n]=document.createElement("a"),this[r]=new Set,this[o]=wx,this[a]=!1,this[s]=e=>{e.preventDefault(),this.activateAR()},this[l]=e=>{let{status:t}=e;t!==a_&&this[YA].arRenderer.presentedScene!==this[jA]||(this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}})),t===a_?this.removeAttribute("ar-tracking"):t===s_&&this.setAttribute("ar-tracking",l_))},this[c]=e=>{let{status:t}=e;this.setAttribute("ar-tracking",t),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:t}}))},this[u]=e=>{"_apple_ar_quicklook_button_tapped"==e.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Ix]!==wx}connectedCallback(){super.connectedCallback(),this[YA].arRenderer.addEventListener("status",this[Lx]),this.setAttribute("ar-status",a_),this[YA].arRenderer.addEventListener("tracking",this[Dx]),this[Rx].addEventListener("message",this[Nx])}disconnectedCallback(){super.disconnectedCallback(),this[YA].arRenderer.removeEventListener("status",this[Lx]),this[YA].arRenderer.removeEventListener("tracking",this[Dx]),this[Rx].removeEventListener("message",this[Nx])}update(e){super.update(e),e.has("arScale")&&(this[jA].canScale="fixed"!==this.arScale),e.has("arPlacement")&&(this[jA].updateShadow(),this[qA]()),e.has("arModes")&&(this[Bx]=vx(this.arModes)),(e.has("ar")||e.has("arModes")||e.has("src")||e.has("iosSrc"))&&this[Ox]()}async activateAR(){switch(this[Ix]){case Ax:await this[Tx]();break;case xx:await this[Cx]();break;case bx:this[Ex]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(t=Mx,i=Sx,n=Rx,r=Bx,o=Ix,a=Px,s=kx,l=Lx,c=Dx,u=Nx,Ox)](){var e;let t=wx;if(this.ar){if(null!=this.src)for(const i of this[Bx]){if("webxr"===i&&Ph&&!mx&&await this[YA].arRenderer.supportsPresentation()){t=xx;break}if("scene-viewer"===i&&!gx&&(Oh||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(null===(e=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)||void 0===e?void 0:e.includes("XR")))){t=bx;break}if("quick-look"===i&&Uh){t=Ax;break}}t===wx&&null!=this.iosSrc&&Uh&&(t=Ax)}if(t!==wx)this[Sx].classList.add("enabled"),this[Sx].addEventListener("click",this[kx]);else if(this[Sx].classList.contains("enabled")){this[Sx].removeEventListener("click",this[kx]),this[Sx].classList.remove("enabled");const e="failed";this.setAttribute("ar-status",e),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:e}}))}this[Ix]=t}async[Cx](){console.log("Attempting to present in AR with WebXR..."),await this[Fx]();try{this[Sx].removeEventListener("click",this[kx]);const{arRenderer:e}=this[YA];e.placeOnWall="wall"===this.arPlacement,await e.present(this[jA],this.xrEnvironment)}catch(e){console.warn("Error while trying to present in AR with WebXR"),console.error(e),await this[YA].arRenderer.stopPresenting(),mx=!0,console.warn("Falling back to next ar-mode"),await this[Ox](),this.activateAR()}finally{this[Ox]()}}async[Fx](){this.loaded||(this[Px]=!0,this[zA](),await function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((n=>{e.addEventListener(t,(function r(o){i&&!i(o)||(n(o),e.removeEventListener(t,r))}))}))}(this,"load"),this[Px]=!1)}[eb](){return super[eb]()||this[Px]}[Ex](){const e=self.location.toString(),t=new URL(e),i=new URL(this.src,e);i.hash&&(i.hash="");const n=new URLSearchParams(i.search);if(t.hash=_x,n.set("mode","ar_preferred"),n.has("disable_occlusion")||n.set("disable_occlusion","true"),"fixed"===this.arScale&&n.set("resizable","false"),"wall"===this.arPlacement&&n.set("enable_vertical_placement","true"),n.has("sound")){const t=new URL(n.get("sound"),e);n.set("sound",t.toString())}if(n.has("link")){const t=new URL(n.get("link"),e);n.set("link",t.toString())}const r=`intent://arvr.google.com/scene-viewer/1.2?${n.toString()+"&file="+encodeURIComponent(i.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(t.toString())};end;`;self.addEventListener("hashchange",(()=>{self.location.hash===_x&&(gx=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[Ox]())}),{once:!0}),this[Rx].setAttribute("href",r),console.log("Attempting to present in AR with Scene Viewer..."),this[Rx].click()}async[Tx](){const e=!this.iosSrc;this[Sx].classList.remove("enabled");const t=e?await this.prepareUSDZ():this.iosSrc,i=new URL(t,self.location.toString());if(e){const e=self.location.toString(),t=new URL(e),n=new URL(this.src,t);n.hash&&(i.hash=n.hash)}"fixed"===this.arScale&&(i.hash&&(i.hash+="&"),i.hash+="allowsContentScaling=0");const n=this[Rx];n.setAttribute("rel","ar");const r=document.createElement("img");n.appendChild(r),n.setAttribute("href",i.toString()),e&&n.setAttribute("download","model.usdz"),n.style.display="none",n.isConnected||this.shadowRoot.appendChild(n),console.log("Attempting to present in AR with Quick Look..."),n.click(),n.removeChild(r),e&&URL.revokeObjectURL(t),this[Sx].classList.add("enabled")}async prepareUSDZ(){const e=this[KA].beginActivity("usdz-conversion");await this[Fx]();const{model:t,shadow:i,target:n}=this[jA];if(null==t)return"";let r=!1;null!=i&&(r=i.visible,i.visible=!1),e(.2);const o=new rx;n.remove(t),t.position.copy(n.position),t.updateWorldMatrix(!1,!0);const a=await o.parseAsync(t);t.position.set(0,0,0),n.add(t);const s=new Blob([a],{type:"model/vnd.usdz+zip"}),l=URL.createObjectURL(s);return e(1),null!=i&&(i.visible=r),l}}return fx([Ie({type:Boolean,attribute:"ar"})],h.prototype,"ar",void 0),fx([Ie({type:String,attribute:"ar-scale"})],h.prototype,"arScale",void 0),fx([Ie({type:String,attribute:"ar-placement"})],h.prototype,"arPlacement",void 0),fx([Ie({type:String,attribute:"ar-modes"})],h.prototype,"arModes",void 0),fx([Ie({type:String,attribute:"ios-src"})],h.prototype,"iosSrc",void 0),fx([Ie({type:Boolean,attribute:"xr-environment"})],h.prototype,"xrEnvironment",void 0),h})((e=>{var t,i,n,r,o,a,s,l;class c extends e{constructor(){super(...arguments),this.poster=null,this.reveal=zx,this.loading="auto",this[t]=!1,this[i]=!1,this[n]=this.shadowRoot.querySelector(".slot.poster"),this[r]=this.shadowRoot.querySelector("#default-poster"),this[o]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[Vx].getAttribute("aria-label"),this[s]=(e=>{let t=null;const i=function(){null==t&&(e(...arguments),t=self.setTimeout((()=>t=null),100))};return i.flush=()=>{null!=t&&(self.clearTimeout(t),t=null)},i})((e=>{const t=this[Hx].parentNode;requestAnimationFrame((()=>{this[Hx].style.transform=`scaleX(${e})`,0===e&&(t.removeChild(this[Hx]),t.appendChild(this[Hx])),this[Hx].classList.toggle("hide",1===e)}))})),this[l]=e=>{const t=e.detail.totalProgress,i=e.detail.reason;1===t&&(this[Wx].flush(),this.loaded&&(this[Qx]||this.reveal===zx)&&this[jx]()),this[Wx](t),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t,reason:i}}))};const e=self.ModelViewerElement||{},c=e.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.5.6/";ef.setDRACODecoderLocation(c);const u=e.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";ef.setKTX2TranscoderLocation(u),e.meshoptDecoderLocation&&ef.setMeshoptDecoderLocation(e.meshoptDecoderLocation);const h=e.lottieLoaderLocation||"https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js";tv.singleton.textureUtils.lottieLoaderUrl=h}static set dracoDecoderLocation(e){ef.setDRACODecoderLocation(e)}static get dracoDecoderLocation(){return ef.getDRACODecoderLocation()}static set ktx2TranscoderLocation(e){ef.setKTX2TranscoderLocation(e)}static get ktx2TranscoderLocation(){return ef.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(e){ef.setMeshoptDecoderLocation(e)}static get meshoptDecoderLocation(){return ef.getMeshoptDecoderLocation()}static set lottieLoaderLocation(e){tv.singleton.textureUtils.lottieLoaderUrl=e}static get lottieLoaderLocation(){return tv.singleton.textureUtils.lottieLoaderUrl}static mapURLs(e){tv.singleton.loader[Kp].manager.setURLModifier(e)}dismissPoster(){this.loaded?this[jx]():(this[Qx]=!0,this[zA]())}showPoster(){const e=this[Gx];if(e.classList.contains("show"))return;e.classList.add("show"),this[VA].classList.remove("show");const t=this[Vx];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden");const i=this.modelIsVisible;this[qx]=!1,this[LA](i)}getDimensions(){return tb(this[jA].size)}getBoundingBoxCenter(){return tb(this[jA].boundingBox.getCenter(new Dn))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[KA].addEventListener("progress",this[Xx])}disconnectedCallback(){super.disconnectedCallback(),this[KA].removeEventListener("progress",this[Xx])}async updated(e){super.updated(e),e.has("poster")&&null!=this.poster&&(this[Vx].style.backgroundImage=`url(${this.poster})`),e.has("alt")&&this[Vx].setAttribute("aria-label",this[NA]),(e.has("reveal")||e.has("loading"))&&this[zA]()}[(t=qx,i=Qx,n=Gx,r=Vx,o=Hx,a=$x,s=Wx,l=Xx,eb)](){return!!this.src&&(this[Qx]||"eager"===this.loading||this.reveal===zx&&this[kA])}[jx](){this[Qx]=!1;const e=this[Gx];if(!e.classList.contains("show"))return;e.classList.remove("show"),this[VA].classList.add("show");const t=this.modelIsVisible;this[qx]=!0,this[LA](t);const i=this.getRootNode();i&&i.activeElement===this&&this[VA].focus();const n=this[Vx];n.setAttribute("aria-hidden","true"),n.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[JA](){return super[JA]()&&this[qx]}}return Ux([Ie({type:String})],c.prototype,"poster",void 0),Ux([Ie({type:String})],c.prototype,"reveal",void 0),Ux([Ie({type:String})],c.prototype,"loading",void 0),c})((e=>{var t;class i extends e{constructor(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];super(i),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[t]=!0,this[jA].subscribeMixerEvent("loop",(e=>{const t=e.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:t}}))})),this[jA].subscribeMixerEvent("finished",(()=>{this[ab]=!0,this.dispatchEvent(new CustomEvent("finished"))}))}get availableAnimations(){return this.loaded?this[jA].animationNames:[]}get duration(){return this[jA].duration}get paused(){return this[ab]}get currentTime(){return this[jA].animationTime}set currentTime(e){this[jA].animationTime=e,this[qA]()}get timeScale(){return this[jA].animationTimeScale}set timeScale(e){this[jA].animationTimeScale=e}pause(){this[ab]||(this[ab]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(e){this.availableAnimations.length>0&&(this[ab]=!1,this[ob](e),this.dispatchEvent(new CustomEvent("play")))}[(t=ab,$A)](){super[$A](),this[ab]=!0,null!=this.animationName&&this[ob](),this.autoplay&&this.play()}[WA](e,t){super[WA](e,t),this[ab]||!this[JA]()&&!this[YA].isPresenting||(this[jA].updateAnimation(t/1e3),this[qA]())}updated(e){super.updated(e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[ob]()}[ob](){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sb;var t;const i=null!==(t=e.repetitions)&&void 0!==t?t:1/0,n=e.pingpong?yi:1===i?2200:2201;this[jA].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,n,i),this[ab]&&(this[jA].updateAnimation(0),this[qA]())}}return rb([Ie({type:Boolean})],i.prototype,"autoplay",void 0),rb([Ie({type:String,attribute:"animation-name"})],i.prototype,"animationName",void 0),rb([Ie({type:Number,attribute:"animation-crossfade-duration"})],i.prototype,"animationCrossfadeDuration",void 0),i})(nb))))))));customElements.define("model-viewer",nw);var rw,ow="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof i.g?i.g:"undefined"!=typeof self?self:{},aw={exports:{}},sw="object"==typeof Reflect?Reflect:null,lw=sw&&"function"==typeof sw.apply?sw.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};rw=sw&&"function"==typeof sw.ownKeys?sw.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var cw=Number.isNaN||function(e){return e!=e};function uw(){uw.init.call(this)}aw.exports=uw,aw.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,o),n(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}var a,s;Aw(e,t,o,{once:!0}),"error"!==t&&(s=r,"function"==typeof(a=e).on&&Aw(a,"error",s,{once:!0}))}))},uw.EventEmitter=uw,uw.prototype._events=void 0,uw.prototype._eventsCount=0,uw.prototype._maxListeners=void 0;var hw=10;function dw(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function pw(e){return void 0===e._maxListeners?uw.defaultMaxListeners:e._maxListeners}function fw(e,t,i,n){var r,o,a,s;if(dw(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),a=o[t]),void 0===a)a=o[t]=i,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=pw(e))>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function mw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gw(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=mw.bind(n);return r.listener=i,n.wrapFn=r,r}function _w(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):yw(r,r.length)}function vw(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function yw(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function Aw(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){n.once&&e.removeEventListener(t,r),i(o)}))}}Object.defineProperty(uw,"defaultMaxListeners",{enumerable:!0,get:function(){return hw},set:function(e){if("number"!=typeof e||e<0||cw(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");hw=e}}),uw.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},uw.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||cw(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},uw.prototype.getMaxListeners=function(){return pw(this)},uw.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)lw(s,this,t);else{var l=s.length,c=yw(s,l);for(i=0;i<l;++i)lw(c[i],this,t)}return!0},uw.prototype.addListener=function(e,t){return fw(this,e,t,!1)},uw.prototype.on=uw.prototype.addListener,uw.prototype.prependListener=function(e,t){return fw(this,e,t,!0)},uw.prototype.once=function(e,t){return dw(t),this.on(e,gw(this,e,t)),this},uw.prototype.prependOnceListener=function(e,t){return dw(t),this.prependListener(e,gw(this,e,t)),this},uw.prototype.removeListener=function(e,t){var i,n,r,o,a;if(dw(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},uw.prototype.off=uw.prototype.removeListener,uw.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},uw.prototype.listeners=function(e){return _w(this,e,!0)},uw.prototype.rawListeners=function(e){return _w(this,e,!1)},uw.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):vw.call(e,t)},uw.prototype.listenerCount=vw,uw.prototype.eventNames=function(){return this._eventsCount>0?rw(this._events):[]};var bw=aw.exports;const xw=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>e.apply(this,r)),i)}};class ww extends bw.EventEmitter{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mousedown",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;super(),this._isHoldEvent=!1,this._holdTimeoutId=-1,this._doubleClickTimeoutId=-1,this._numClick=0,e.addEventListener(t,this._handleMouseDown.bind(this)),e.addEventListener(i,this._handleMouseClick.bind(this)),this._delay=n}_handleMouseDown(){this._isHoldEvent=!1,window.clearTimeout(this._doubleClickTimeoutId),this._holdTimeoutId=window.setTimeout((()=>{this._isHoldEvent=!0,this.emit("pointerevent-is-hold-event")}),this._delay)}_handleMouseClick(e){if(this._isHoldEvent)return this._numClick=0,void(this._isHoldEvent=!1);window.clearTimeout(this._holdTimeoutId),this._numClick++,1===this._numClick?this._doubleClickTimeoutId=window.setTimeout((()=>{this._numClick=0,this.emit("single-click",e)}),this._delay):(this._numClick=0,this.emit("double-click",e))}}var Sw=Object.defineProperty,Cw=Object.getOwnPropertyDescriptor,Ew=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?Cw(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&Sw(t,i,o),o};function Tw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=document.createElement("canvas");i.width=64,i.height=64;const n=i.getContext("2d");if(null==n)return;if(n.beginPath(),n.arc(32,32,16,0,2*Math.PI),n.closePath(),n.fillStyle=e.getStyle(),n.fill(),null!==t){const e=20;n.font=e+"px Arial";const r=n.measureText(t),o=r.width,a=r.actualBoundingBoxAscent-r.actualBoundingBoxDescent,s=(i.width-o)/2,l=(i.height+a)/2;n.fillStyle="#ffffff",n.fillText(t,s,l)}const r=new cu(i);return new Zl({map:r,toneMapped:!1})}let Mw=class extends nw{constructor(){super(),this._coordinateAxes=[],this._coordinateLabel=[],this._lastSphericalPosition={theta:-1,phi:-1,radius:-1},this._lastFieldOfViewInDeg=-1,this._referenceFieldOfViewInRad=-1,this._referenceMaxRadius=-1,this._isRadiusConst=!1,this._maxZoomLevel=100,this._minZoomLevel=.5,this._currentZoomLevel=1,this._minPhiInDeg=0,this._maxPhiInDeg=1800,this._deltaX=0,this._deltaY=0,this._emitCamOrbitAngleChanged=xw((()=>{console.log("Cam Phi Theta",180*this._lastSphericalPosition.phi/Math.PI,180*this._lastSphericalPosition.theta/Math.PI),this.dispatchEvent(new Event("cam-orbit-angle-changed"))}),250),this.addEventListener("load",this._handleModelLoaded),this.addEventListener("camera-change",this._handleCameraChanged);const e=new ww(this);e.on("single-click",this._handleSceneClicked.bind(this)),this.addEventListener("pointerup",(()=>this[VA].style.cursor="default")),this.addEventListener("pointerdown",(()=>this[VA].style.cursor="pointer")),e.on("pointerevent-is-hold-event",(()=>{console.log("Single click over"),this[VA].style.cursor="grabbing"}))}firstUpdated(){this[jA].add(this.measurementTool.sceneElementGroup),this.measurementTool.on("scene-update-requested",(()=>this.updateRendering())),this.measurementTool.on("calculate-hotspot-requested",this._intersectObject.bind(this)),this.measurementTool.on("hotspot-added",this._handleHotspotAdded.bind(this))}connectWithSettings(e){e.modelOrientation.on("model-orientation-changed",(e=>{this.orientation=e.angleInRadAsString(),this.measurementTool.eulerOrientation=e})),e.environment3D.on("change-axes-visibility-requested",this._changeAxesVisibility.bind(this)),e.environment3D.on("change-viewer-background-color-requested",this._changeBackgroundColor.bind(this)),e.environment3D.on("change-exposure-requested",(e=>this.exposure=e));const[t,i]=e.environment3D.backgroundColor;this._changeBackgroundColor(t,i)}resize(e,t){this.style.height=e+"px",this.style.width=t+"px",this[jA].idealAspect=this[jA].aspect}getCamera(){return this[jA].camera}setReferenceFieldOfView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e==this._referenceFieldOfViewInRad)return void(t&&(this.fieldOfView=e+"rad"));this._referenceFieldOfViewInRad=e,this[jA].idealAspect=this[jA].aspect,this.minFieldOfView=e/this._maxZoomLevel+"rad",this.maxFieldOfView=e/this._minZoomLevel+"rad",t&&(this.fieldOfView=e+"rad");const i=this.getDimensions(),n=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z);this.clientWidth>this.clientHeight?this._referenceMaxRadius=n/e:this._referenceMaxRadius=n/e*this.clientHeight/this.clientWidth,this._isRadiusConst||(this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+this._referenceMaxRadius+"m")}rotateModel(e,t){const i=2*Math.PI/this[jA].height,n=i*e,r=i*t;let o=this[bg];o.changeSource=t_,o.adjustOrbit(n,r,0)}zoomTo(e){-1!=this._referenceFieldOfViewInRad?(this._currentZoomLevel=e,this[jA].idealAspect=this[jA].aspect,this.fieldOfView=this._referenceFieldOfViewInRad/e+"rad"):console.log("Return 3d  zoom, ",this._currentZoomLevel)}setViewerOffset(e,t){this._deltaX==e&&this._deltaY==t||(this._deltaX=e,this._deltaY=t,this[jA].camera.setViewOffset(this.clientWidth,this.clientHeight,e,t,this.clientWidth,this.clientHeight),this.updateRendering())}updateRendering(){this[jA].queueRender()}setMinZoomLevel(e){if(this._minZoomLevel!=e&&-1!=this._referenceFieldOfViewInRad){const t=this._referenceFieldOfViewInRad/e,i=this.getFieldOfView()/180*Math.PI;if(t<i)if(0==this._isRadiusConst){const e=this.getCameraOrbit(),n=this.getCameraOrbit().radius;e.radius=n*i/t,this.cameraOrbit=e.toString()}else this.fieldOfView=t+"rad";this.maxFieldOfView=t+"rad",this._minZoomLevel=e}}setCameraOrbitPos(e){this._isRadiusConst&&(this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+e.radius+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e.radius+"m"),this.cameraOrbit=e.toString()}updateRadiusMode(e){if(e!=this._isRadiusConst)if(this._isRadiusConst=e,e){const e=this.getCameraOrbit().radius;this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg "+e+"m",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e+"m"}else{this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto";const e=this._referenceMaxRadius>0?this._referenceMaxRadius+"m":"auto";this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg "+e}}_changeAxesVisibility(e){this._changeCoordinateVisibility(e),this.updateRendering()}_changeBackgroundColor(e,t){console.log("Change background color",e,t),this.style.background=t?"radial-gradient(circle at center, "+t+", "+e+")":e}_handleHotspotAdded(e){e.addEventListener("hotspot-position-changed",(()=>{this.updateHotspot({name:e.slot,position:e.dataset.position,normal:e.dataset.normal})})),this.appendChild(e)}_intersectObject(e,t){let i=this.getCameraTarget();console.log("Current translation 2",i),e.x-=i.x,e.y-=i.y,e.z-=i.z,this[jA].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const n=new Ah(e,t).intersectObject(this[jA],!0);this[jA].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements();var r=n.find((e=>e.object.visible&&!e.object.userData.shadow));if(null==r||null==r.face)return void console.log("Object intersection not found, not adding point from 3D scene.");let o,a;null==r.uv?(o=r.point,a=r.face.normal):(r.face.normal.applyNormalMatrix((new ln).getNormalMatrix(r.object.matrixWorld)),o=r.point,a=r.face.normal),o.x+=i.x,o.y+=i.y,o.z+=i.z,this.measurementTool.addPointFrom3DScene(o,a,!1)}_coordinateLabelIsClicked(e){if(0==this._coordinateAxes.length||!this._coordinateAxes[0].visible)return!1;const t=this[jA].getNDC(e.clientX,e.clientY),i=new Ah;i.setFromCamera(t,this.getCamera());const n=i.intersectObjects(this._coordinateLabel,!0);if(console.log("Label hit?",n.length),0==n.length)return!1;const r=n[0].object;let o=this.getCameraOrbit();switch(r.userData.type){case"posX":o.phi=.5*Math.PI,o.theta=.5*Math.PI;break;case"posY":o.phi=0,o.theta=0;break;case"posZ":o.phi=.5*Math.PI,o.theta=0;break;case"negX":o.phi=.5*Math.PI,o.theta=1.5*Math.PI;break;case"negY":o.phi=Math.PI,o.theta=0;break;case"negZ":o.phi=.5*Math.PI,o.theta=Math.PI;break;default:console.log("default")}return this.cameraOrbit=o.toString(),this._emitCamOrbitAngleChanged(),!0}_handleSceneClicked(e){if(console.log("Single Click into scene"),this._coordinateLabelIsClicked(e))return;if(!this.measurementTool.isEditModeActive)return;const t=e.clientX,i=e.clientY;this[jA].remove(this.measurementTool.sceneElementGroup),this._removeCoordinateElements();const n=this.positionAndNormalFromPoint(t,i);if(this[jA].add(this.measurementTool.sceneElementGroup),this._addCoordinateElements(),null==n)return void console.log("no hit result: mouse = ",t,", ",i);const{position:r,normal:o}=n;this.measurementTool.addPointFrom3DScene(r,o)}_addCoordinateElements(){this._coordinateAxes.forEach((e=>{this[jA].add(e)})),this._coordinateLabel.forEach((e=>{this[jA].add(e)}))}_removeCoordinateElements(){this._coordinateAxes.forEach((e=>{this[jA].remove(e)})),this._coordinateLabel.forEach((e=>{this[jA].remove(e)}))}_changeCoordinateVisibility(e){this._coordinateAxes.forEach((t=>{t.visible=e})),this._coordinateLabel.forEach((t=>{t.visible=e}))}_handleModelLoaded(){const e=this.getDimensions(),t=.5*Math.max(Math.max(e.x,e.y),e.z);this._coordinateAxes.push(new Th(new Dn(t,0,0),new Dn(-t,0,0),2*t,"red",.5,.25)),this._coordinateAxes.push(new Th(new Dn(0,t,0),new Dn(0,-t,0),2*t,"green",.5,.25)),this._coordinateAxes.push(new Th(new Dn(0,0,t),new Dn(0,0,-t),2*t,"blue",.5,.25));const i=new Dn(.5,.5,.5);let n=new hr;n.scale(i);let r=new dc(Tw(new no("red"),"X"));r.userData.type="posX",r.applyMatrix4(n),r.position.x=t,this._coordinateLabel.push(r);let o=new dc(Tw(new no(1,.2,.2),"-x"));o.userData.type="negX",o.applyMatrix4(n),o.position.x=-t,this._coordinateLabel.push(o);let a=new dc(Tw(new no("green"),"y"));a.userData.type="posY",a.applyMatrix4(n),a.position.y=t,this._coordinateLabel.push(a);let s=new dc(Tw(new no(.2,1,.2),"-y"));s.userData.type="negY",s.applyMatrix4(n),s.position.y=-t,this._coordinateLabel.push(s);let l=new dc(Tw(new no("blue"),"z"));l.userData.type="posZ",l.applyMatrix4(n),l.position.z=t,this._coordinateLabel.push(l);let c=new dc(Tw(new no(.2,.2,1),"-z"));c.userData.type="negZ",c.applyMatrix4(n),c.position.z=-t,this._coordinateLabel.push(c),this._addCoordinateElements(),this._lastSphericalPosition=this.getCameraOrbit(),this[jA].idealAspect=this[jA].aspect,this[jA].queueRender(),this._emitCamOrbitAngleChanged(),this[VA].style.cursor="default",this.minCameraOrbit="-Infinity "+this._minPhiInDeg+"deg  auto",this.maxCameraOrbit="Infinity "+this._maxPhiInDeg+"deg auto"}_handleCameraChanged(e){this.measurementTool.translation=(new Dn).setFromMatrixPosition(this[jA].target.matrixWorld);const t=this.getCameraOrbit(),i=this.getFieldOfView();if("user-interaction"!=e.detail.source)return this._lastSphericalPosition=t,void(this._lastFieldOfViewInDeg=i);this._lastSphericalPosition.phi==t.phi&&this._lastSphericalPosition.theta==t.theta||(console.log("CamChanged",this.getCameraOrbit(),this._lastSphericalPosition),t.radius>0&&this._emitCamOrbitAngleChanged()),this._lastSphericalPosition.radius==t.radius&&this._lastFieldOfViewInDeg!=i&&(this._currentZoomLevel=180*this._referenceFieldOfViewInRad/Math.PI/i,console.log("FOV change",this._currentZoomLevel,180*this._referenceFieldOfViewInRad/Math.PI,i),this.dispatchEvent(new CustomEvent("fov-based-zoom-changed",{detail:{zoomLevel:this._currentZoomLevel}}))),this._lastSphericalPosition=t,this._lastFieldOfViewInDeg=i}};Mw.styles=x`
 `,Ew([Ie({type:Object})],Mw.prototype,"measurementTool",2),Mw=Ew([Te("viewer-3d")],Mw);var Iw={exports:{}};!function(e){function t(e){return new t.Viewer(e)}var i,n,r,o;!function(e){e.version={versionStr:"5.0.0",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("0",10)};var i,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null==e?String(e):n[r.call(e)]||"object"},e.isPlainObject=function(i){if(!i||"object"!==t.type(i)||i.nodeType||e.isWindow(i))return!1;if(i.constructor&&!o.call(i,"constructor")&&!o.call(i.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in i)n=r;return void 0===n||o.call(i,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(i=document.createElement("canvas"),!(!e.isFunction(i.getContext)||!i.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var t=0;if(e.supportsAddEventListener)try{var i={get capture(){return t++,!1},get once(){return t++,!1},get passive(){return t++,!1}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(e){t=0}return t>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(i,1)/n}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(t),function(e){e.extend=function(){var i,n,r,o,a,s,l=arguments[0]||{},c=arguments.length,u=!1,h=1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},h=2),"object"==typeof l||t.isFunction(l)||(l={}),c===h&&(l=this,--h);h<c;h++)if(null!==(i=arguments[h])||void 0!==i)for(n in i){var d=Object.getOwnPropertyDescriptor(i,n);void 0!==d?d.get||d.set?Object.defineProperty(l,n,d):l!==(o=d.value)&&(u&&o&&(t.isPlainObject(o)||(a=t.isArray(o)))?(r=l[n],a?(a=!1,s=r&&t.isArray(r)?r:[]):s=r&&t.isPlainObject(r)?r:{},l[n]=t.extend(u,s,o)):void 0!==o&&(l[n]=o)):e.console.warn('Could not copy inherited property "'+n+'".')}return l},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(e,t){return function(){var i=arguments;return void 0===i&&(i=[]),t.apply(e,i)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(t){return e._viewers.get(this.getElement(t))},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(t){var i,n,r=new e.Point;for(n=o(t=e.getElement(t),i="fixed"===e.getElementStyle(t).position);n;)r.x+=t.offsetLeft,r.y+=t.offsetTop,i&&(r=r.plus(e.getPageScroll())),n=o(t=n,i="fixed"===e.getElementStyle(t).position);return r},getElementOffset:function(t){var i,n,r=(t=e.getElement(t))&&t.ownerDocument,o={top:0,left:0};return r?(i=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new e.Point(o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0),o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0))):new e.Point},getElementSize:function(t){return t=e.getElement(t),new e.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return(t=e.getElement(t)).currentStyle}:function(t){return t=e.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var i={};return e.getCssPropertyWithVendorPrefix=function(t){if(void 0!==i[t])return i[t];var n=document.createElement("div").style,r=null;if(void 0!==n[t])r=t;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],a=e.capitalizeFirstLetter(t),s=0;s<o.length;s++){var l=o[s]+a;if(void 0!==n[l]){r=l;break}}return i[t]=r,r},e.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var i=e%t;return i<0&&(i+=t),i},pointInElement:function(t,i){t=e.getElement(t);var n=e.getElementOffset(t),r=e.getElementSize(t);return i.x>=n.x&&i.x<n.x+r.x&&i.y<n.y+r.y&&i.y>=n.y},getMousePosition:function(t){if("number"==typeof t.pageX)e.getMousePosition=function(t){var i=new e.Point;return i.x=t.pageX,i.y=t.pageY,i};else{if("number"!=typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(t){var i=new e.Point;return i.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,i}}return e.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(i.scrollLeft||i.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(t){if(void 0!==window.scrollTo)e.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var i=e.getPageScroll();if(i.x===t.x&&i.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var n=e.getPageScroll();if(n.x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,(n=e.getPageScroll()).x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});e.setPageScroll=function(e){}}e.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!i.clientWidth&&!i.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(t){t=e.getElement(t);var i=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(i[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(i[1].style,{display:"table-row"}),e.extend(i[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),i[0].appendChild(i[1]),i[1].appendChild(i[2]),i[2].appendChild(t),i[0]},makeNeutralElement:function(e){var t=document.createElement(e),i=t.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",t},now:function(){return Date.now?e.now=Date.now:e.now=function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(t){var i=e.makeNeutralElement("img");return i.src=t,i},setElementOpacity:function(t,i,n){var r;t=e.getElement(t),n&&!e.Browser.alpha&&(i=Math.round(i)),e.Browser.opacity?t.style.opacity=i<1?i:"":i<1?(r="alpha(opacity="+Math.round(100*i)+")",t.style.filter=r):t.style.filter=""},setElementTouchActionNone:function(t){void 0!==(t=e.getElement(t)).style.touchAction?t.style.touchAction="none":void 0!==t.style.msTouchAction&&(t.style.msTouchAction="none")},setElementPointerEvents:function(t,i){void 0!==(t=e.getElement(t)).style&&void 0!==t.style.pointerEvents&&(t.style.pointerEvents=i)},setElementPointerEventsNone:function(t){e.setElementPointerEvents(t,"none")},addClass:function(t,i){(t=e.getElement(t)).className?-1===(" "+t.className+" ").indexOf(" "+i+" ")&&(t.className+=" "+i):t.className=i},indexOf:function(e,t,i){return Array.prototype.indexOf?this.indexOf=function(e,t,i){return e.indexOf(t,i)}:this.indexOf=function(e,t,i){var n,r,o=i||0;if(!e)throw new TypeError;if(0===(r=e.length)||o>=r)return-1;for(o<0&&(o=r-Math.abs(o)),n=o;n<r;n++)if(e[n]===t)return n;return-1},this.indexOf(e,t,i)},removeClass:function(t,i){var n,r,o=[];for(n=(t=e.getElement(t)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==i&&o.push(n[r]);t.className=o.join(" ")},normalizeEventListenerOptions:function(t){return void 0!==t?"boolean"==typeof t?e.supportsEventListenerOptions?{capture:t}:t:e.supportsEventListenerOptions?t:void 0!==t.capture&&t.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).addEventListener(i,n,r)};if(document.documentElement.attachEvent&&document.attachEvent)return function(t,i,n){(t=e.getElement(t)).attachEvent("on"+i,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).removeEventListener(i,n,r)};if(document.documentElement.detachEvent&&document.detachEvent)return function(t,i,n){(t=e.getElement(t)).detachEvent("on"+i,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e.preventDefault()},eventIsCanceled:function(e){return e.defaultPrevented},stopEvent:function(e){e.stopPropagation()},createCallback:function(e,t){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var i,n=[];for(i=2;i<arguments.length;i++)n.push(arguments[i]);return function(){var i,r=n.concat([]);for(i=0;i<arguments.length;i++)r.push(arguments[i]);return t.apply(e,r)}},getUrlParameter:function(e){return r[e]||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return e.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(t,i,n){var r,o,a,s;e.isPlainObject(t)&&(i=t.success,n=t.error,r=t.withCredentials,o=t.headers,a=t.responseType||null,s=t.postData||null,t=t.url);var l=e.getUrlProtocol(t),c=e.createAjaxRequest();if(!e.isFunction(i))throw new Error("makeAjaxRequest requires a success callback");c.onreadystatechange=function(){4===c.readyState&&(c.onreadystatechange=function(){},c.status>=200&&c.status<300||0===c.status&&"http:"!==l&&"https:"!==l?i(c):e.isFunction(n)?n(c):e.console.error("AJAX request returned %d: %s",c.status,t))};var u=s?"POST":"GET";try{if(c.open(u,t,!0),a&&(c.responseType=a),o)for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&o[h]&&c.setRequestHeader(h,o[h]);r&&(c.withCredentials=!0),c.send(s)}catch(t){e.console.error("%s while making AJAX request: %s",t.name,t.message),c.onreadystatechange=function(){},e.isFunction(n)&&n(c,t)}return c},jsonp:function(t){var i,n=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=t.callbackName||"openseadragon"+e.now(),a=window[o],s="$1"+o+"$2",l=t.param||"callback",c=t.callback;n=n.replace(/(=)\?(&|$)|\?\?/i,s),n+=(/\?/.test(n)?"&":"?")+l+"="+o,window[o]=function(t){if(a)window[o]=a;else try{delete window[o]}catch(e){}c&&e.isFunction(c)&&c(t)},i=document.createElement("script"),void 0===t.async&&!1===t.async||(i.async="async"),t.scriptCharset&&(i.charset=t.scriptCharset),i.src=n,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0)},r.insertBefore(i,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(!window.DOMParser)throw new Error("Browser doesn't support XML DOM.");return e.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")},e.parseXml(t)},parseJSON:function(t){return e.parseJSON=window.JSON.parse,e.parseJSON(t)},imageFormatSupported:function(e){return!!n[(e=e||"").toLowerCase()]},setImageFormatsSupported:function(t){e.extend(n,t)}});var i=function(e){};e.console=window.console||{log:i,debug:i,info:i,warn:i,error:i,assert:i},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var n={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},r={};function o(e,t){return t&&e!==document.body?document.body:e.offsetParent}!function(){var t=navigator.appVersion,i=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(i.substring(i.indexOf("MSIE")+5,i.indexOf(";",i.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(i.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edge")+5))):i.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edg")+4))):i.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(i.substring(i.indexOf("Firefox")+8))):i.indexOf("Safari")>=0?(e.Browser.vendor=i.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(i.substring(i.substring(0,i.indexOf("Safari")).lastIndexOf("/")+1,i.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(t)}var n,o,a,s=window.location.search.substring(1).split("&");for(a=0;a<s.length;a++)if((o=(n=s[a]).indexOf("="))>0){var l=n.substring(0,o),c=n.substring(o+1);try{r[l]=decodeURIComponent(c)}catch(t){e.console.error("Ignoring malformed URL parameter: %s=%s",l,c)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.console.error("Internet Explorer is not supported by OpenSeadragon")}(),function(t){var i=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(i&&n)e.requestAnimationFrame=function(){return i.apply(t,arguments)},e.cancelAnimationFrame=function(){return n.apply(t,arguments)};else{var r,o=[],a=[],s=0;e.requestAnimationFrame=function(t){return o.push([++s,t]),r||(r=setInterval((function(){if(o.length){var t=e.now(),i=a;for(a=o,o=i;a.length;)a.shift()[1](t)}else clearInterval(r),r=void 0}),20)),s},e.cancelAnimationFrame=function(e){var t,i;for(t=0,i=o.length;t<i;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,i=a.length;t<i;t+=1)if(a[t][0]===e)return void a.splice(t,1)}}}(window)}(t),i=ow,n=function(){return t},e.exports?e.exports=n():i.OpenSeadragon=n(),function(e){class t{constructor(e){e||(e=[0,0,0,0,0,0,0,0,0]),this.values=e}static makeIdentity(){return new t([1,0,0,0,1,0,0,0,1])}static makeTranslation(e,i){return new t([1,0,0,0,1,0,e,i,1])}static makeRotation(e){var i=Math.cos(e),n=Math.sin(e);return new t([i,-n,0,n,i,0,0,0,1])}static makeScaling(e,i){return new t([e,0,0,0,i,0,0,0,1])}multiply(e){let i=this.values,n=e.values;var r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=n[0],f=n[1],m=n[2],g=n[3],_=n[4],v=n[5],y=n[6],A=n[7],b=n[8];return new t([p*r+f*s+m*u,p*o+f*l+m*h,p*a+f*c+m*d,g*r+_*s+v*u,g*o+_*l+v*h,g*a+_*c+v*d,y*r+A*s+b*u,y*o+A*l+b*h,y*a+A*c+b*d])}}e.Mat3=t}(t),r=t,o={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.fullscreenElement},o.requestFullScreen=function(e){return e.requestFullscreen().catch((function(e){r.console.error("Fullscreen request failed: ",e)}))},o.exitFullScreen=function(){document.exitFullscreen().catch((function(e){r.console.error("Error while exiting fullscreen: ",e)}))},o.fullScreenEventName="fullscreenchange",o.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.msFullscreenElement},o.requestFullScreen=function(e){return e.msRequestFullscreen()},o.exitFullScreen=function(){document.msExitFullscreen()},o.fullScreenEventName="MSFullscreenChange",o.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.webkitFullscreenElement},o.requestFullScreen=function(e){return e.webkitRequestFullscreen()},o.exitFullScreen=function(){document.webkitExitFullscreen()},o.fullScreenEventName="webkitfullscreenchange",o.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},o.requestFullScreen=function(e){return e.webkitRequestFullScreen()},o.exitFullScreen=function(){document.webkitCancelFullScreen()},o.fullScreenEventName="webkitfullscreenchange",o.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(o.supportsFullScreen=!0,o.getFullScreenElement=function(){return document.mozFullScreenElement},o.requestFullScreen=function(e){return e.mozRequestFullScreen()},o.exitFullScreen=function(){document.mozCancelFullScreen()},o.fullScreenEventName="mozfullscreenchange",o.fullScreenErrorEventName="mozfullscreenerror"),o.isFullScreen=function(){return null!==o.getFullScreenElement()},o.cancelFullScreen=function(){r.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),o.exitFullScreen()},r.extend(r,o),function(e){e.EventSource=function(){this.events={},this._rejectedEventList={}},e.EventSource.prototype={addOnceHandler:function(e,t,i,n,r){var o=this;n=n||1;var a=0,s=function(i){return++a===n&&o.removeHandler(e,s),t(i)};return this.addHandler(e,s,i,r)},addHandler:function(t,i,n,r){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;var o=this.events[t];if(o||(this.events[t]=o=[]),i&&e.isFunction(i)){var a=o.length,s={handler:i,userData:n||null,priority:r||0};for(o[a]=s;a>0&&o[a-1].priority<o[a].priority;)o[a]=o[a-1],o[a-1]=s,a--}return!0},removeHandler:function(t,i){var n,r=this.events[t],o=[];if(r&&e.isArray(r)){for(n=0;n<r.length;n++)r[n].handler!==i&&o.push(r[n]);this.events[t]=o}},numberOfHandlers:function(e){var t=this.events[e];return t?t.length:0},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,i){var n,r=t.length;for(n=0;n<r;n++)t[n]&&(i.eventSource=e,i.userData=t[n].userData,t[n].handler(i))}):null},raiseEvent:function(t,i){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,t))return e.console.error(`Error adding handler for ${t}. ${this._rejectedEventList[t]}`),!1;var n=this.getHandler(t);return n&&n(this,i||{}),!0},rejectEventHandler(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._rejectedEventList[e]=t},allowEventHandler(e){delete this._rejectedEventList[e]}}}(t),function(e){var t={};e.MouseTracker=function(i){var n=arguments;e.isPlainObject(i)||(i={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(i.element),this.clickTimeThreshold=i.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=i.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=i.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=i.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=i.userData||null,this.stopDelay=i.stopDelay||50,this.preProcessEventHandler=i.preProcessEventHandler||null,this.contextMenuHandler=i.contextMenuHandler||null,this.enterHandler=i.enterHandler||null,this.leaveHandler=i.leaveHandler||null,this.exitHandler=i.exitHandler||null,this.overHandler=i.overHandler||null,this.outHandler=i.outHandler||null,this.pressHandler=i.pressHandler||null,this.nonPrimaryPressHandler=i.nonPrimaryPressHandler||null,this.releaseHandler=i.releaseHandler||null,this.nonPrimaryReleaseHandler=i.nonPrimaryReleaseHandler||null,this.moveHandler=i.moveHandler||null,this.scrollHandler=i.scrollHandler||null,this.clickHandler=i.clickHandler||null,this.dblClickHandler=i.dblClickHandler||null,this.dragHandler=i.dragHandler||null,this.dragEndHandler=i.dragEndHandler||null,this.pinchHandler=i.pinchHandler||null,this.stopHandler=i.stopHandler||null,this.keyDownHandler=i.keyDownHandler||null,this.keyUpHandler=i.keyUpHandler||null,this.keyHandler=i.keyHandler||null,this.focusHandler=i.focusHandler||null,this.blurHandler=i.blurHandler||null;var r=this;t[this.hash]={click:function(t){var i,n;D(r,n={originalEvent:i=t,eventType:"click",pointerType:"mouse",isEmulated:!1}),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i),n.stopPropagation&&e.stopEvent(i)},dblclick:function(t){var i,n;D(r,n={originalEvent:i=t,eventType:"dblclick",pointerType:"mouse",isEmulated:!1}),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i),n.stopPropagation&&e.stopEvent(i)},keydown:function(t){var i,n,o,a;o=null,D(i=r,a={originalEvent:n=t,eventType:"keydown",pointerType:"",isEmulated:!1}),!i.keyDownHandler||a.preventGesture||a.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:a.preventDefault||a.defaultPrevented,userData:i.userData},i.keyDownHandler(o)),(o&&o.preventDefault||a.preventDefault&&!a.defaultPrevented)&&e.cancelEvent(n),a.stopPropagation&&e.stopEvent(n)},keyup:function(t){var i,n,o,a;o=null,D(i=r,a={originalEvent:n=t,eventType:"keyup",pointerType:"",isEmulated:!1}),!i.keyUpHandler||a.preventGesture||a.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:a.preventDefault||a.defaultPrevented,userData:i.userData},i.keyUpHandler(o)),(o&&o.preventDefault||a.preventDefault&&!a.defaultPrevented)&&e.cancelEvent(n),a.stopPropagation&&e.stopEvent(n)},keypress:function(t){var i,n,o,a;o=null,D(i=r,a={originalEvent:n=t,eventType:"keypress",pointerType:"",isEmulated:!1}),!i.keyHandler||a.preventGesture||a.defaultPrevented||(o={eventSource:i,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefault:a.preventDefault||a.defaultPrevented,userData:i.userData},i.keyHandler(o)),(o&&o.preventDefault||a.preventDefault&&!a.defaultPrevented)&&e.cancelEvent(n),a.stopPropagation&&e.stopEvent(n)},focus:function(e){var t,i,n;D(t=r,n={originalEvent:i=e,eventType:"focus",pointerType:"",isEmulated:!1}),t.focusHandler&&!n.preventGesture&&t.focusHandler({eventSource:t,originalEvent:i,userData:t.userData})},blur:function(e){var t,i,n;D(t=r,n={originalEvent:i=e,eventType:"blur",pointerType:"",isEmulated:!1}),t.blurHandler&&!n.preventGesture&&t.blurHandler({eventSource:t,originalEvent:i,userData:t.userData})},contextmenu:function(t){var i,n,o,a;o=null,D(i=r,a={originalEvent:n=t,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1}),!i.contextMenuHandler||a.preventGesture||a.defaultPrevented||(o={eventSource:i,position:A(v(n),i.element),originalEvent:a.originalEvent,preventDefault:a.preventDefault||a.defaultPrevented,userData:i.userData},i.contextMenuHandler(o)),(o&&o.preventDefault||a.preventDefault&&!a.defaultPrevented)&&e.cancelEvent(n),a.stopPropagation&&e.stopEvent(n)},wheel:function(e){var t;w(r,t=e,t)},mousewheel:function(e){x(r,e)},DOMMouseScroll:function(e){x(r,e)},MozMousePixelScroll:function(e){x(r,e)},losecapture:function(t){var i,n,o,a;i=r,n=t,o={id:e.MouseTracker.mousePointerId,type:"mouse"},D(i,a={originalEvent:n,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1}),n.target===i.element&&N(i,o,!1),a.stopPropagation&&e.stopEvent(n)},mouseenter:function(e){S(r,e)},mouseleave:function(e){C(r,e)},mouseover:function(e){E(r,e)},mouseout:function(e){T(r,e)},mousedown:function(e){M(r,e)},mouseup:function(e){I(r,e)},mousemove:function(e){R(r,e)},touchstart:function(t){!function(t,i){var n,r,o,a=i.changedTouches.length,s=t.getActivePointersListByType("touch");n=e.now(),s.getLength()>i.touches.length-a&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var l={originalEvent:i,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(D(t,l),r=0;r<a;r++)O(t,l,o={id:i.changedTouches[r].identifier,type:"touch",isPrimary:0===s.getLength(),currentPos:v(i.changedTouches[r]),currentTime:n}),U(t,l,o,0),N(t,o,!0);l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(i),l.stopPropagation&&e.stopEvent(i)}(r,t)},touchend:function(t){!function(t,i){var n,r,o,a=i.changedTouches.length;n=e.now();var s={originalEvent:i,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(D(t,s),r=0;r<a;r++)z(t,s,o={id:i.changedTouches[r].identifier,type:"touch",currentPos:v(i.changedTouches[r]),currentTime:n},0),N(t,o,!1),F(t,s,o);s.preventDefault&&!s.defaultPrevented&&e.cancelEvent(i),s.stopPropagation&&e.stopEvent(i)}(r,t)},touchmove:function(t){!function(t,i){var n,r,o=i.changedTouches.length;n=e.now();var a={originalEvent:i,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(D(t,a),r=0;r<o;r++)H(t,a,{id:i.changedTouches[r].identifier,type:"touch",currentPos:v(i.changedTouches[r]),currentTime:n});a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(i),a.stopPropagation&&e.stopEvent(i)}(r,t)},touchcancel:function(t){!function(t,i){var n,r=i.changedTouches.length,o={originalEvent:i,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(D(t,o),n=0;n<r;n++)G(t,o,{id:i.changedTouches[n].identifier,type:"touch"});o.stopPropagation&&e.stopEvent(i)}(r,t)},gesturestart:function(t){var i;i=t,e.eventIsCanceled(i)||i.preventDefault()},gesturechange:function(t){var i;i=t,e.eventIsCanceled(i)||i.preventDefault()},gotpointercapture:function(t){var i,n,o;D(i=r,o={originalEvent:n=t,eventType:"gotpointercapture",pointerType:g(n),isEmulated:!1}),n.target===i.element&&N(i,{id:n.pointerId,type:g(n)},!0),o.stopPropagation&&e.stopEvent(n)},lostpointercapture:function(t){var i,n,o;D(i=r,o={originalEvent:n=t,eventType:"lostpointercapture",pointerType:g(n),isEmulated:!1}),n.target===i.element&&N(i,{id:n.pointerId,type:g(n)},!1),o.stopPropagation&&e.stopEvent(n)},pointerenter:function(e){S(r,e)},pointerleave:function(e){C(r,e)},pointerover:function(e){E(r,e)},pointerout:function(e){T(r,e)},pointerdown:function(e){M(r,e)},pointerup:function(e){I(r,e)},pointermove:function(e){R(r,e)},pointercancel:function(t){var i,n,o,a;i=r,o={id:(n=t).pointerId,type:g(n)},D(i,a={originalEvent:n,eventType:"pointercancel",pointerType:o.type,isEmulated:!1}),G(i,a,o),a.stopPropagation&&e.stopEvent(n)},pointerupcaptured:function(t){var i,n;n=t,(i=r).getActivePointersListByType(g(n)).getById(n.pointerId)&&B(i,n),e.stopEvent(n)},pointermovecaptured:function(t){var i,n;n=t,(i=r).getActivePointersListByType(g(n)).getById(n.pointerId)&&P(i,n),e.stopEvent(n)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),i.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){d(this),this.element=null,t[this.hash]=null,delete t[this.hash]},isTracking:function(){return t[this.hash].tracking},setTracking:function(i){return i?function(i){var n,r,o=t[i.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.addEvent(i.element,n,o[n],n===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});h(i),o.tracking=!0}}(this):d(this),this},getActivePointersListByType:function(i){var n,r,o=t[this.hash],a=o?o.activePointersLists.length:0;for(n=0;n<a;n++)if(o.activePointersLists[n].type===i)return o.activePointersLists[n];return r=new e.MouseTracker.GesturePointList(i),o&&o.activePointersLists.push(r),r},getActivePointerCount:function(){var e,i=t[this.hash],n=i.activePointersLists.length,r=0;for(e=0;e<n;e++)r+=i.activePointersLists[e].getLength();return r},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var i,n,r,o,a,s,l,c=function(){try{return window.self!==window.top}catch(e){return!0}}();function u(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}function h(e){var i,n,r,o,a,s=t[e.hash],l=s.activePointersLists.length;for(i=0;i<l;i++)if((r=s.activePointersLists[i]).getLength()>0){for(a=[],o=r.asArray(),n=0;n<o.length;n++)a.push(o[n]);for(n=0;n<a.length;n++)L(e,r,a[n])}for(i=0;i<l;i++)s.activePointersLists.pop();s.sentDragEvent=!1}function d(i){var n,r,o=t[i.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.removeEvent(i.element,n,o[n],!1);h(i),o.tracking=!1}}function p(e,i){var n=t[e.hash];if("pointerevent"===i)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("mouse"===i)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("touch"===i)return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function f(t,i){var n,r;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(r=t.getActivePointersListByType(i.type).getById(i.id))||!r.captured)return;try{t.element.releasePointerCapture(i.id)}catch(e){}}else t.element.releaseCapture();else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),c&&u(window.top)&&e.removeEvent(window.top,n.upName,n.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0);N(t,i,!1)}function m(t){return e.MouseTracker.havePointerEvents?t.pointerId:e.MouseTracker.mousePointerId}function g(t){return e.MouseTracker.havePointerEvents&&t.pointerType?t.pointerType:"mouse"}function _(t){return!e.MouseTracker.havePointerEvents||t.isPrimary}function v(t){return e.getMousePosition(t)}function y(e,t){return A(v(e),t)}function A(t,i){var n=e.getElementOffset(i);return t.minus(n)}function b(t,i){return new e.Point((t.x+i.x)/2,(t.y+i.y)/2)}function x(t,i){var n={target:i.target||i.srcElement,type:"wheel",shiftKey:i.shiftKey||!1,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX?i.pageX:i.clientX,pageY:i.pageY?i.pageY:i.clientY,deltaMode:"MozMousePixelScroll"===i.type?0:1,deltaX:0,deltaZ:0};"mousewheel"===e.MouseTracker.wheelEventName?n.deltaY=-i.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:n.deltaY=i.detail,w(t,n,i)}function w(t,i,n){var r,o,a=null;r=i.deltaY?i.deltaY<0?1:-1:0,D(t,o={originalEvent:i,eventType:"wheel",pointerType:"mouse",isEmulated:i!==n}),!t.scrollHandler||o.preventGesture||o.defaultPrevented||(a={eventSource:t,pointerType:"mouse",position:y(i,t.element),scroll:r,shift:i.shiftKey,isTouchEvent:!1,originalEvent:n,preventDefault:o.preventDefault||o.defaultPrevented,userData:t.userData},t.scrollHandler(a)),o.stopPropagation&&e.stopEvent(n),(a&&a.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(n)}function S(t,i){var n={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerenter",pointerType:n.type,isEmulated:!1};D(t,r),O(t,r,n)}function C(t,i){var n={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerleave",pointerType:n.type,isEmulated:!1};D(t,r),F(t,r,n)}function E(t,i){var n,r,o,a,s,l={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},c={originalEvent:i,eventType:"pointerover",pointerType:l.type,isEmulated:!1};D(t,c),r=c,o=l,(s=(a=(n=t).getActivePointersListByType(o.type)).getById(o.id))?o=s:(o.captured=!1,o.insideElementPressed=!1),n.overHandler&&n.overHandler({eventSource:n,pointerType:o.type,position:A(o.currentPos,n.element),buttons:a.buttons,pointers:n.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:r.originalEvent,userData:n.userData}),c.preventDefault&&!c.defaultPrevented&&e.cancelEvent(i),c.stopPropagation&&e.stopEvent(i)}function T(t,i){var n,r,o,a,s,l={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},c={originalEvent:i,eventType:"pointerout",pointerType:l.type,isEmulated:!1};D(t,c),r=c,o=l,(s=(a=(n=t).getActivePointersListByType(o.type)).getById(o.id))?o=s:(o.captured=!1,o.insideElementPressed=!1),n.outHandler&&n.outHandler({eventSource:n,pointerType:o.type,position:o.currentPos&&A(o.currentPos,n.element),buttons:a.buttons,pointers:n.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:r.originalEvent,userData:n.userData}),c.preventDefault&&!c.defaultPrevented&&e.cancelEvent(i),c.stopPropagation&&e.stopEvent(i)}function M(t,i){var n={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r=e.MouseTracker.havePointerEvents&&"touch"===n.type,o={originalEvent:i,eventType:"pointerdown",pointerType:n.type,isEmulated:!1};D(t,o),U(t,o,n,i.button),o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(i),o.stopPropagation&&e.stopEvent(i),o.shouldCapture&&(r?N(t,n,!0):function(t,i){var n;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{t.element.setPointerCapture(i.id)}catch(t){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else t.element.setCapture(!0);else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),c&&u(window.top)&&e.addEvent(window.top,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0);N(t,i,!0)}(t,n))}function I(e,t){B(e,t)}function B(t,i){var n,r={originalEvent:i,eventType:"pointerup",pointerType:(n={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()}).type,isEmulated:!1};D(t,r),z(t,r,n,i.button),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i),r.shouldReleaseCapture&&(i.target===t.element?f(t,n):N(t,n,!1))}function R(e,t){P(e,t)}function P(t,i){var n={id:m(i),type:g(i),isPrimary:_(i),currentPos:v(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointermove",pointerType:n.type,isEmulated:!1};D(t,r),H(t,r,n),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i)}function k(e,t){return t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function L(t,i,n){var r,o=i.getById(n.id);return o?(o.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),f(t,o)),i.removeContact(),r=i.removeById(n.id)):r=i.getLength(),r}function D(t,i){i.eventSource=t,i.eventPhase=i.originalEvent&&void 0!==i.originalEvent.eventPhase?i.originalEvent.eventPhase:0,i.defaultPrevented=e.eventIsCanceled(i.originalEvent),i.shouldCapture=!1,i.shouldReleaseCapture=!1,i.userData=t.userData,function(e,t){switch(t.eventType){case"pointermove":case"pointerdown":case"pointerup":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"wheel":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasScrollHandler,t.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":t.isStoppable=!0,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"click":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.clickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"dblclick":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.dblClickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;default:t.isStoppable=!1,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1}}(t,i),t.preProcessEventHandler&&t.preProcessEventHandler(i)}function N(t,i,n){var r=t.getActivePointersListByType(i.type),o=r.getById(i.id);o?n&&!o.captured?(o.captured=!0,r.captureCount++):!n&&o.captured&&(o.captured=!1,r.captureCount--,r.captureCount<0&&(r.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function O(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))?(n.insideElement=!0,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime,i=n):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,k(r,i)),e.enterHandler&&e.enterHandler({eventSource:e,pointerType:i.type,position:A(i.currentPos,e.element),buttons:r.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==r.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData})}function F(e,t,i){var n,r,o=e.getActivePointersListByType(i.type);(n=o.getById(i.id))?(n.captured?(n.insideElement=!1,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime):L(e,o,n),i=n):(i.captured=!1,i.insideElementPressed=!1),(e.leaveHandler||e.exitHandler)&&(r={eventSource:e,pointerType:i.type,position:i.currentPos&&A(i.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==o.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData},e.leaveHandler&&e.leaveHandler(r),e.exitHandler&&e.exitHandler(r))}function U(i,n,r,o){var a,s=t[i.hash],l=i.getActivePointersListByType(r.type);if(void 0!==n.originalEvent.buttons?l.buttons=n.originalEvent.buttons:0===o?l.buttons|=1:1===o?l.buttons|=4:2===o?l.buttons|=2:3===o?l.buttons|=8:4===o?l.buttons|=16:5===o&&(l.buttons|=32),0!==o)return n.shouldCapture=!1,n.shouldReleaseCapture=!1,void(!i.nonPrimaryPressHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,i.nonPrimaryPressHandler({eventSource:i,pointerType:r.type,position:A(r.currentPos,i.element),button:o,buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData})));(a=l.getById(r.id))?(a.insideElementPressed=!0,a.insideElement=!0,a.originalTarget=n.originalEvent.target,a.contactPos=r.currentPos,a.contactTime=r.currentTime,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=r.currentPos,a.currentTime=r.currentTime,r=a):(r.captured=!1,r.insideElementPressed=!0,r.insideElement=!0,r.originalTarget=n.originalEvent.target,k(l,r)),l.addContact(),n.preventGesture||n.defaultPrevented?(n.shouldCapture=!1,n.shouldReleaseCapture=!1):(n.shouldCapture=!0,n.shouldReleaseCapture=!1,n.preventDefault=!0,(i.dragHandler||i.dragEndHandler||i.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(i,r),1===l.contacts?i.pressHandler&&!n.preventGesture&&i.pressHandler({eventSource:i,pointerType:r.type,position:A(r.contactPos,i.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData}):2===l.contacts&&i.pinchHandler&&"touch"===r.type&&(s.pinchGPoints=l.asArray(),s.lastPinchDist=s.currentPinchDist=s.pinchGPoints[0].currentPos.distanceTo(s.pinchGPoints[1].currentPos),s.lastPinchCenter=s.currentPinchCenter=b(s.pinchGPoints[0].currentPos,s.pinchGPoints[1].currentPos)))}function z(i,n,r,o){var a,s,l,c,u=t[i.hash],h=i.getActivePointersListByType(r.type),d=!1;if(void 0!==n.originalEvent.buttons?h.buttons=n.originalEvent.buttons:0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),n.shouldCapture=!1,0!==o)return n.shouldReleaseCapture=!1,void(!i.nonPrimaryReleaseHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,i.nonPrimaryReleaseHandler({eventSource:i,pointerType:r.type,position:A(r.currentPos,i.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:i.userData})));(l=h.getById(r.id))?(h.removeContact(),l.captured&&(d=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=r.currentPos,l.currentTime=r.currentTime,l.insideElement||L(i,h,l),a=l.currentPos,s=l.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,k(h,r),l=r),n.preventGesture||n.defaultPrevented||(d?(n.shouldReleaseCapture=!0,n.preventDefault=!0,(i.dragHandler||i.dragEndHandler||i.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(i,l),0===h.contacts?(i.releaseHandler&&a&&i.releaseHandler({eventSource:i,pointerType:l.type,position:A(a,i.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),i.dragEndHandler&&u.sentDragEvent&&i.dragEndHandler({eventSource:i,pointerType:l.type,position:A(l.currentPos,i.element),speed:l.speed,direction:l.direction,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),u.sentDragEvent=!1,(i.clickHandler||i.dblClickHandler)&&l.insideElement&&(c=s-l.contactTime<=i.clickTimeThreshold&&l.contactPos.distanceTo(a)<=i.clickDistThreshold,i.clickHandler&&i.clickHandler({eventSource:i,pointerType:l.type,position:A(l.currentPos,i.element),quick:c,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,originalTarget:l.originalTarget,userData:i.userData}),i.dblClickHandler&&c&&(h.clicks++,1===h.clicks?(u.lastClickPos=a,u.dblClickTimeOut=setTimeout((function(){h.clicks=0}),i.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(u.dblClickTimeOut),h.clicks=0,u.lastClickPos.distanceTo(a)<=i.dblClickDistThreshold&&i.dblClickHandler({eventSource:i,pointerType:l.type,position:A(l.currentPos,i.element),shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),u.lastClickPos=null)))):2===h.contacts&&i.pinchHandler&&"touch"===l.type&&(u.pinchGPoints=h.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=b(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos))):(n.shouldReleaseCapture=!1,i.releaseHandler&&a&&(i.releaseHandler({eventSource:i,pointerType:l.type,position:A(a,i.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:i.userData}),n.preventDefault=!0)))}function H(e,i,n){var r,o,a,s=t[e.hash],l=e.getActivePointersListByType(n.type);void 0!==i.originalEvent.buttons&&(l.buttons=i.originalEvent.buttons),(r=l.getById(n.id))&&(r.lastPos=r.currentPos,r.lastTime=r.currentTime,r.currentPos=n.currentPos,r.currentTime=n.currentTime,i.shouldCapture=!1,i.shouldReleaseCapture=!1,e.stopHandler&&"mouse"===n.type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout((function(){var t,r,o;t=e,r=i.originalEvent,o=n.type,t.stopHandler&&t.stopHandler({eventSource:t,pointerType:o,position:y(r,t.element),buttons:t.getActivePointersListByType(o).buttons,isTouchEvent:"touch"===o,originalEvent:r,userData:t.userData})}),e.stopDelay)),0===l.contacts?e.moveHandler&&e.moveHandler({eventSource:e,pointerType:n.type,position:A(n.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===n.type,originalEvent:i.originalEvent,userData:e.userData}):1===l.contacts?(e.moveHandler&&(r=l.asArray()[0],e.moveHandler({eventSource:e,pointerType:r.type,position:A(r.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:e.userData})),!e.dragHandler||i.preventGesture||i.defaultPrevented||(a=(r=l.asArray()[0]).currentPos.minus(r.lastPos),e.dragHandler({eventSource:e,pointerType:r.type,position:A(r.currentPos,e.element),buttons:l.buttons,delta:a,speed:r.speed,direction:r.direction,shift:i.originalEvent.shiftKey,isTouchEvent:"touch"===r.type,originalEvent:i.originalEvent,userData:e.userData}),i.preventDefault=!0,s.sentDragEvent=!0)):2===l.contacts&&(e.moveHandler&&(o=l.asArray(),e.moveHandler({eventSource:e,pointerType:o[0].type,position:A(b(o[0].currentPos,o[1].currentPos),e.element),buttons:l.buttons,isTouchEvent:"touch"===o[0].type,originalEvent:i.originalEvent,userData:e.userData})),!e.pinchHandler||"touch"!==n.type||i.preventGesture||i.defaultPrevented||(a=s.pinchGPoints[0].currentPos.distanceTo(s.pinchGPoints[1].currentPos))!==s.currentPinchDist&&(s.lastPinchDist=s.currentPinchDist,s.currentPinchDist=a,s.lastPinchCenter=s.currentPinchCenter,s.currentPinchCenter=b(s.pinchGPoints[0].currentPos,s.pinchGPoints[1].currentPos),e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:s.pinchGPoints,lastCenter:A(s.lastPinchCenter,e.element),center:A(s.currentPinchCenter,e.element),lastDistance:s.lastPinchDist,distance:s.currentPinchDist,shift:i.originalEvent.shiftKey,originalEvent:i.originalEvent,userData:e.userData}),i.preventDefault=!0)))}function G(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))&&L(e,r,n)}e.MouseTracker.gesturePointVelocityTracker=(i=[],n=0,r=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},a=function(){var t,n,o,a,s,l,c=i.length,u=e.now();for(a=u-r,r=u,t=0;t<c;t++)(o=(n=i[t]).gPoint).direction=Math.atan2(o.currentPos.y-n.lastPos.y,o.currentPos.x-n.lastPos.x),s=n.lastPos.distanceTo(o.currentPos),n.lastPos=o.currentPos,l=1e3*s/(a+1),o.speed=.75*l+.25*o.speed},{addPoint:function(t,s){var l=o(t,s);i.push({guid:l,gPoint:s,lastPos:s.currentPos}),1===i.length&&(r=e.now(),n=window.setInterval(a,50))},removePoint:function(e,t){var r,a=o(e,t),s=i.length;for(r=0;r<s;r++)if(i[r].guid===a){i.splice(r,1),0==--s&&window.clearInterval(n);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=(s=document.createElement("div"),e.isFunction(s.setPointerCapture)&&e.isFunction(s.releasePointerCapture)),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=(l=document.createElement("div"),e.isFunction(l.setCapture)&&e.isFunction(l.releaseCapture)),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(t),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,i,n){var r=t.parentNode;"number"==typeof i&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=void 0===i.attachToViewer||i.attachToViewer,this.autoFade=void 0===i.autoFade||i.autoFade,this.element=t,this.anchor=i.anchor,this.container=n,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof i.top?i.top+"px":i.top,this.wrapper.style.left="number"==typeof i.left?i.left+"px":i.left,this.wrapper.style.height="number"==typeof i.height?i.height+"px":i.height,this.wrapper.style.width="number"==typeof i.width?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){e.setElementOpacity(this.wrapper,t,!0)}}}(t),function(e){function t(e,t){var i,n=e.controls;for(i=n.length-1;i>=0;i--)if(n[i].element===t)return i;return-1}e.ControlDock=function(t){var i,n,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),"static"===e.getElementStyle(this.element).position&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),n=0;n<r.length;n++)i=r[n],this.controls[i]=e.makeNeutralElement("div"),this.controls[i].style.position="absolute",i.match("left")&&(this.controls[i].style.left="0px"),i.match("right")&&(this.controls[i].style.right="0px"),i.match("top")&&(this.controls[i].style.top="0px"),i.match("bottom")&&(this.controls[i].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(i,n){var r=null;if(!(t(this,i=e.getElement(i))>=0)){switch(n.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:default:case e.ControlAnchor.NONE:r=this.container,i.style.margin="0px",i.style.padding="0px"}this.controls.push(new e.Control(i,n,r)),i.style.display="inline-block"}},removeControl:function(i){var n=t(this,i=e.getElement(i));return n>=0&&(this.controls[n].destroy(),this.controls.splice(n,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(t),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(t),function(e){var i={},n=1;function r(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function o(t,i){if(i instanceof e.Overlay)return i;var n=null;if(i.element)n=e.getElement(i.element);else{var r=i.id?i.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(n=e.getElement(i.id))||((n=document.createElement("a")).href="#/overlay/"+r),n.id=r,e.addClass(n,i.className?i.className:"openseadragon-overlay")}var o=i.location,a=i.width,s=i.height;if(!o){var l=i.x,c=i.y;if(void 0!==i.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(i.px,i.py,a||0,s||0));l=u.x,c=u.y,a=void 0!==a?u.width:void 0,s=void 0!==s?u.height:void 0}o=new e.Point(l,c)}var h=i.placement;return h&&"string"===e.type(h)&&(h=e.Placement[i.placement.toUpperCase()]),new e.Overlay({element:n,location:o,placement:h,onDraw:i.onDraw,checkResize:i.checkResize,width:a,height:s,rotationMode:i.rotationMode})}function a(e,t){var i;for(i=e.length-1;i>=0;i--)if(e[i].element===t)return i;return-1}function s(t,i){return e.requestAnimationFrame((function(){i(t)}))}function l(t){e.requestAnimationFrame((function(){!function(t){var i,n;if(t.controlsShouldFade){for(i=1-(e.now()-t.controlsFadeBeginTime)/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),n=t.controls.length-1;n>=0;n--)t.controls[n].autoFade&&t.controls[n].setOpacity(i);i>0&&l(t)}}(t)}))}function c(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){l(t)}),t.controlsFadeDelay))}function u(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function h(){u(this)}function d(){c(this)}function p(e){var t={tracker:e.eventSource,position:e.position,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.raiseEvent("canvas-contextmenu",t),e.preventDefault=t.preventDefault}function f(t){var i={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",i),i.preventDefaultAction||t.ctrl||t.alt||t.meta)t.preventDefault=!1;else switch(t.keyCode){case 38:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 40:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 37:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 39:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 87:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 83:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 65:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 68:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 82:t.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),t.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:t.preventDefault=!1}}function m(e){var t={originalEvent:e.originalEvent};this.raiseEvent("canvas-key-press",t)}function g(t){var n;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x);var r={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,originalTarget:t.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",r),!r.preventDefaultAction&&this.viewport&&t.quick&&(!0===(n=this.gestureSettingsByDeviceType(t.pointerType)).clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),n.dblClickDragToZoom&&(!0===i[this.hash].draggingToZoom?(i[this.hash].lastClickTime=null,i[this.hash].draggingToZoom=!1):i[this.hash].lastClickTime=e.now()))}function _(e){var t,i={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",i),!i.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function v(e){var t,n={tracker:e.eventSource,pointerType:e.pointerType,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",n),t=this.gestureSettingsByDeviceType(e.pointerType),!n.preventDefaultAction&&this.viewport)if(t.dblClickDragToZoom&&i[this.hash].draggingToZoom){var r=Math.pow(this.zoomPerDblClickDrag,e.delta.y/50);this.viewport.zoomBy(r)}else if(t.dragToPan&&!i[this.hash].draggingToZoom){if(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var o=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=o.x,this.viewport.centerSpringY.target.value+=o.y;var a=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=o.x,this.viewport.centerSpringY.target.value-=o.y,a.xConstrained&&(e.delta.x=0),a.yConstrained&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function y(t){var n,r={tracker:t.eventSource,pointerType:t.pointerType,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",r),n=this.gestureSettingsByDeviceType(t.pointerType),!r.preventDefaultAction&&this.viewport){if(!i[this.hash].draggingToZoom&&n.dragToPan&&n.flickEnabled&&t.speed>=n.flickMinSpeed){var o=0;this.panHorizontal&&(o=n.flickMomentum*t.speed*Math.cos(t.direction));var a=0;this.panVertical&&(a=n.flickMomentum*t.speed*Math.sin(t.direction));var s=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),l=this.viewport.pointFromPixel(new e.Point(s.x-o,s.y-a));this.viewport.panTo(l,!1)}this.viewport.applyConstraints()}n.dblClickDragToZoom&&!0===i[this.hash].draggingToZoom&&(i[this.hash].draggingToZoom=!1)}function A(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function b(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function x(t){if(this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent}),this.gestureSettingsByDeviceType(t.pointerType).dblClickDragToZoom){var n=i[this.hash].lastClickTime,r=e.now();if(null===n)return;r-n<this.dblClickTimeThreshold&&(i[this.hash].draggingToZoom=!0),i[this.hash].lastClickTime=null}}function w(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function C(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){var t,i,n,r={tracker:e.eventSource,pointerType:e.pointerType,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",r),this.viewport&&(!(t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom||r.preventDefaultPanAction&&r.preventDefaultZoomAction||(i=this.viewport.pointFromPixel(e.center,!0),t.zoomToRefPoint&&!r.preventDefaultPanAction&&(n=this.viewport.pointFromPixel(e.lastCenter,!0).minus(i),this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.panBy(n,!0)),r.preventDefaultZoomAction||this.viewport.zoomBy(e.distance/e.lastDistance,i,!0),this.viewport.applyConstraints()),t.pinchRotate&&!r.preventDefaultRotateAction)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),a=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);i=this.viewport.pointFromPixel(e.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(o-a)*(180/Math.PI),i,!0)}}function T(e){this.raiseEvent("canvas-focus",{tracker:e.eventSource,originalEvent:e.originalEvent})}function M(e){this.raiseEvent("canvas-blur",{tracker:e.eventSource,originalEvent:e.originalEvent})}function I(t){var i,n,r,o;(o=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=o,i={tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",i),!i.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),t.preventDefault=i.preventDefault):t.preventDefault=!0}function B(e){i[this.hash].mouseInside=!0,u(this),this.raiseEvent("container-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function R(e){e.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||c(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function P(t){!function(t){if(!t._opening&&i[t.hash]){if(t.autoResize||i[t.hash].forceResize){var n;if(t._autoResizePolling){n=r(t.container);var o=i[t.hash].prevContainerSize;n.equals(o)||(i[t.hash].needsResize=!0)}i[t.hash].needsResize&&function(t,n){var r,o=t.viewport,a=o.getZoom(),s=o.getCenter();if(o.resize(n,t.preserveImageSizeOnResize),o.panTo(s,!0),t.preserveImageSizeOnResize)r=i[t.hash].prevContainerSize.x/n.x;else{var l=new e.Point(0,0),c=new e.Point(i[t.hash].prevContainerSize.x,i[t.hash].prevContainerSize.y).distanceTo(l);r=new e.Point(n.x,n.y).distanceTo(l)/c*i[t.hash].prevContainerSize.x/n.x}o.zoomTo(a*r,null,!0),i[t.hash].prevContainerSize=n,i[t.hash].forceRedraw=!0,i[t.hash].needsResize=!1,i[t.hash].forceResize=!1}(t,n||r(t.container))}var a=t.viewport.update(),s=t.world.update(a)||a;a&&t.raiseEvent("viewport-change"),t.referenceStrip&&(s=t.referenceStrip.update(t.viewport)||s);var l=i[t.hash].animating;!l&&s&&(t.raiseEvent("animation-start"),u(t));var h,d=l&&!s;d&&(i[t.hash].animating=!1),(s||d||i[t.hash].forceRedraw||t.world.needsDraw())&&((h=t).imageLoader.clear(),h.world.draw(),h.raiseEvent("update-viewport",{}),t._drawOverlays(),t.navigator&&t.navigator.update(t.viewport),i[t.hash].forceRedraw=!1,s&&t.raiseEvent("animation")),d&&(t.raiseEvent("animation-finish"),i[t.hash].mouseInside||c(t)),i[t.hash].animating=s}}(t),t.isOpen()?t._updateRequestId=s(t,P):t._updateRequestId=!1}function k(e,t){return e?e+t:t}function L(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,O(this)}function D(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,O(this)}function N(){i[this.hash].zooming=!1}function O(t){e.requestAnimationFrame(e.delegate(t,F))}function F(){var t,n,r;i[this.hash].zooming&&this.viewport&&(n=(t=e.now())-i[this.hash].lastZoomTime,r=Math.pow(i[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=t,O(this))}function U(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function z(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function H(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function G(){this.viewport&&this.viewport.goHome()}function V(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Q(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e+=this.rotationIncrement:e-=this.rotationIncrement,this.viewport.setRotation(e)}}function j(){if(this.viewport){var e=this.viewport.getRotation();this.viewport.flipped?e-=this.rotationIncrement:e+=this.rotationIncrement,this.viewport.setRotation(e)}}function q(){this.viewport.toggleFlip()}e.Viewer=function(t){var o,a,l=arguments,u=this;if(e.isPlainObject(t)||(t={id:l[0],xmlPath:l.length>1?l[1]:void 0,prefixUrl:l.length>2?l[2]:void 0,controls:l.length>3?l[3]:void 0,overlays:l.length>4?l[4]:void 0}),t.config&&(e.extend(!0,t,t.config),delete t.config),t.drawerOptions=Object.assign({},["useCanvas"].reduce(((e,i)=>(e[i]=t[i],delete t[i],e)),{}),t.drawerOptions),e.extend(!0,this,{id:t.id,hash:t.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,t),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");void 0!==i[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var i=e.getString("Errors.OpenFailed",t.eventSource,t.message);u._showMessage(i)})),e.ControlDock.call(this,t),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(a=this.canvas.style).width="100%",a.height="100%",a.overflow="hidden",a.position="absolute",a.top="0px",a.left="0px",e.setElementTouchActionNone(this.canvas),""!==t.tabIndex&&(this.canvas.tabIndex=void 0===t.tabIndex?0:t.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,p),keyDownHandler:e.delegate(this,f),keyHandler:e.delegate(this,m),clickHandler:e.delegate(this,g),dblClickHandler:e.delegate(this,_),dragHandler:e.delegate(this,v),dragEndHandler:e.delegate(this,y),enterHandler:e.delegate(this,A),leaveHandler:e.delegate(this,b),pressHandler:e.delegate(this,x),releaseHandler:e.delegate(this,w),nonPrimaryPressHandler:e.delegate(this,S),nonPrimaryReleaseHandler:e.delegate(this,C),scrollHandler:e.delegate(this,I),pinchHandler:e.delegate(this,E),focusHandler:e.delegate(this,T),blurHandler:e.delegate(this,M)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,B),leaveHandler:e.delegate(this,R)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=r(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver((function(){i[u.hash].needsResize=!0})),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){u.source=u.world.getItemAt(0).source,i[u.hash].forceRedraw=!0,u._updateRequestId||(u._updateRequestId=s(u,P))})),this.world.addHandler("remove-item",(function(e){u.world.getItemCount()?u.source=u.world.getItemAt(0).source:u.source=null,i[u.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){u.viewport&&u.viewport._setContentBounds(u.world.getHomeBounds(),u.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){u.source=u.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:t.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(e.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=e.HTMLDrawer),delete this.drawerOptions.useCanvas);let h=Array.isArray(this.drawer)?this.drawer:[this.drawer];0===h.length&&(h=[e.DEFAULT_SETTINGS.drawer].flat(),e.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const e of h)if(this.requestDrawer(e,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw e.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(o=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(o=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),o=0;o<this.customControls.length;o++)this.addControl(this.customControls[o].id,{anchor:this.customControls[o].anchor});e.requestAnimationFrame((function(){c(u)})),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(t,i){var n=this;if(this.close(),!t)return this;if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===i||isNaN(i)||(this.initialPage=i),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(t)||(t=[t]),!t.length)return this;this._opening=!0;for(var r,a=t.length,s=0,l=0,c=function(){if(s+l===a)if(s){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var i=0;i<n.overlays.length;i++)n.currentOverlays[i]=o(n,n.overlays[i]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)n.addOverlay(t.tileSource.overlays[r]);i&&i(e),c()};var o=t.error;t.error=function(e){l++,r||(r=e),o&&o(e),c()},n.addTiledImage(t)},h=0;h<t.length;h++)u(t[h]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(t,i){const n=(i=e.extend(!0,{mainDrawer:!0,redrawImmediately:!0,drawerOptions:null},i)).mainDrawer,r=i.redrawImmediately,o=i.drawerOptions,a=this.drawer;let s=null;if(t&&t.prototype instanceof e.DrawerBase?(s=t,t="custom"):"string"==typeof t&&(s=e.determineDrawer(t)),s||e.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),s&&s.isSupported()){a&&n&&a.destroy();const e=new s({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:o||this.drawerOptions[t]});return n&&(this.drawer=e,r&&this.forceRedraw()),e}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?u(this):c(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},setAjaxHeaders:function(t,i){if(null===t&&(t={}),e.isPlainObject(t)){if(void 0===i&&(i=!0),this.ajaxHeaders=t,i){for(var n=0;n<this.world.getItemCount();n++)this.world.getItemAt(n)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var r in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[r].setAjaxHeaders(this.ajaxHeaders,!0)}}else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},addButton:function(e){this.buttonGroup.addButton(e)},isFullPage:function(){return i[this.hash]&&i[this.hash].fullPage},setFullPage:function(t){var n,r,o=document.body,a=o.style,s=document.documentElement.style,l=this;if(t===this.isFullPage())return this;var c={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",c),c.preventDefaultAction)return this;if(t&&this.element){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=a.margin,this.docMargin=s.margin,a.margin="0",s.margin="0",this.bodyPadding=a.padding,this.docPadding=s.padding,a.padding="0",s.padding="0",this.bodyWidth=a.width,this.docWidth=s.width,a.width="100%",s.width="100%",this.bodyHeight=a.height,this.docHeight=s.height,a.height="100%",s.height="100%",this.bodyDisplay=a.display,a.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,n=o.childNodes.length,r=0;r<n;r++)this.previousBody.push(o.childNodes[0]),o.removeChild(o.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,o.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),o.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,B)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,a.margin=this.bodyMargin,s.margin=this.docMargin,a.padding=this.bodyPadding,s.padding=this.docPadding,a.width=this.bodyWidth,s.width=this.docWidth,a.height=this.bodyHeight,s.height=this.docHeight,a.display=this.bodyDisplay,o.removeChild(this.element),n=this.previousBody.length,r=0;r<n;r++)o.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(o.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var u=0,h=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++u<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(h)};e.requestAnimationFrame(h),i[this.hash].fullPage=!1,e.delegate(this,R)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var i=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),i.setFullPage(!1),i.isFullPage()&&(i.element.style.width=i.fullPageStyleWidth,i.element.style.height=i.fullPageStyleHeight)),i.navigator&&i.viewport&&setTimeout((function(){i.navigator.update(i.viewport)})),i.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var i=this;t.replace&&(t.replaceItem=i.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(t.ajaxHeaders)||(t.ajaxHeaders={});var n={options:t};function r(e){for(var r=0;r<i._loadQueue.length;r++)if(i._loadQueue[r]===n){i._loadQueue.splice(r,1);break}0===i._loadQueue.length&&o(n),i.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){i.collectionMode&&(i.world.arrange({immediately:e.options.collectionImmediately,rows:i.collectionRows,columns:i.collectionColumns,layout:i.collectionLayout,tileSize:i.collectionTileSize,tileMargin:i.collectionTileMargin}),i.world.setAutoRefigureSizes(!0))}function a(){for(var t,n,r;i._loadQueue.length&&(t=i._loadQueue[0]).tileSource;){if(i._loadQueue.splice(0,1),t.options.replace){var a=i.world.getIndexOfItem(t.options.replaceItem);-1!==a&&(t.options.index=a),i.world.removeItem(t.options.replaceItem)}n=new e.TiledImage({viewer:i,source:t.tileSource,viewport:i.viewport,drawer:i.drawer,tileCache:i.tileCache,imageLoader:i.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,flipped:t.options.flipped,compositeOperation:t.options.compositeOperation,springStiffness:i.springStiffness,animationTime:i.animationTime,minZoomImageRatio:i.minZoomImageRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,maxTilesPerFrame:i.maxTilesPerFrame,immediateRender:i.immediateRender,blendTime:i.blendTime,alwaysBlend:i.alwaysBlend,minPixelRatio:i.minPixelRatio,smoothTileEdgesMinZoom:i.smoothTileEdgesMinZoom,iOSDevice:i.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:i.debugMode,subPixelRoundingForTransparency:i.subPixelRoundingForTransparency}),i.collectionMode&&i.world.setAutoRefigureSizes(!1),i.navigator&&(r=e.extend({},t.options,{replace:!1,originalTiledImage:n,tileSource:t.tileSource}),i.navigator.addTiledImage(r)),i.world.addItem(n,{index:t.options.index}),0===i._loadQueue.length&&o(t),1!==i.world.getItemCount()||i.preserveViewport||i.viewport.goHome(!0),t.options.success&&t.options.success({item:n})}}e.isArray(t.tileSource)?setTimeout((function(){r({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(n),function(t,i,n,r,o){var a=t;if("string"===e.type(i))if(i.match(/^\s*<.*>\s*$/))i=e.parseXml(i);else if(i.match(/^\s*[{[].*[}\]]\s*$/))try{var s=e.parseJSON(i);i=s}catch(e){}function l(e,t){e.ready?r(e):(e.addHandler("ready",(function(){r(e)})),e.addHandler("open-failed",(function(e){o({message:e.message,source:t})})))}setTimeout((function(){if("string"===e.type(i))(i=new e.TileSource({url:i,crossOriginPolicy:void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:n.ajaxHeaders?n.ajaxHeaders:t.ajaxHeaders,splitHashDataForPost:t.splitHashDataForPost,success:function(e){r(e.tileSource)}})).addHandler("open-failed",(function(e){o(e)}));else if(e.isPlainObject(i)||i.nodeType)if(void 0!==i.crossOriginPolicy||void 0===n.crossOriginPolicy&&void 0===t.crossOriginPolicy||(i.crossOriginPolicy=void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy),void 0===i.ajaxWithCredentials&&(i.ajaxWithCredentials=t.ajaxWithCredentials),e.isFunction(i.getTileUrl)){var s=new e.TileSource(i);s.getTileUrl=i.getTileUrl,r(s)}else{var c=e.TileSource.determineType(a,i);if(!c)return void o({message:"Unable to load TileSource",source:i});var u=c.prototype.configure.apply(a,[i]);l(new c(u),i)}else l(i,i)}))}(this,t.tileSource,t,(function(e){n.tileSource=e,a()}),(function(e){e.options=t,r(e),a()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var i=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete i.url,this.addTiledImage(i)},addLayer:function(t){var i=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var n=e.extend({},t,{success:function(e){i.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){i.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(n),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,i){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,i)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},forceResize:function(){i[this.hash].needsResize=!0,i[this.hash].forceResize=!0},bindSequenceControls:function(){var t=e.delegate(this,h),i=e.delegate(this,d),n=e.delegate(this,this.goToNextPage),r=e.delegate(this,this.goToPreviousPage),o=this.navImages,a=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(a=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:k(this.prefixUrl,o.previous.REST),srcGroup:k(this.prefixUrl,o.previous.GROUP),srcHover:k(this.prefixUrl,o.previous.HOVER),srcDown:k(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:i}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:k(this.prefixUrl,o.next.REST),srcGroup:k(this.prefixUrl,o.next.GROUP),srcHover:k(this.prefixUrl,o.next.HOVER),srcDown:k(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:t,onBlur:i}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),a&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,L),i=e.delegate(this,N),n=e.delegate(this,U),r=e.delegate(this,D),o=e.delegate(this,z),a=e.delegate(this,G),s=e.delegate(this,V),l=e.delegate(this,Q),c=e.delegate(this,j),u=e.delegate(this,q),p=e.delegate(this,h),f=e.delegate(this,d),m=this.navImages,g=[],_=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(_=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:k(this.prefixUrl,m.zoomIn.REST),srcGroup:k(this.prefixUrl,m.zoomIn.GROUP),srcHover:k(this.prefixUrl,m.zoomIn.HOVER),srcDown:k(this.prefixUrl,m.zoomIn.DOWN),onPress:t,onRelease:i,onClick:n,onEnter:t,onExit:i,onFocus:p,onBlur:f})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:k(this.prefixUrl,m.zoomOut.REST),srcGroup:k(this.prefixUrl,m.zoomOut.GROUP),srcHover:k(this.prefixUrl,m.zoomOut.HOVER),srcDown:k(this.prefixUrl,m.zoomOut.DOWN),onPress:r,onRelease:i,onClick:o,onEnter:r,onExit:i,onFocus:p,onBlur:f}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:k(this.prefixUrl,m.home.REST),srcGroup:k(this.prefixUrl,m.home.GROUP),srcHover:k(this.prefixUrl,m.home.HOVER),srcDown:k(this.prefixUrl,m.home.DOWN),onRelease:a,onFocus:p,onBlur:f})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:k(this.prefixUrl,m.fullpage.REST),srcGroup:k(this.prefixUrl,m.fullpage.GROUP),srcHover:k(this.prefixUrl,m.fullpage.HOVER),srcDown:k(this.prefixUrl,m.fullpage.DOWN),onRelease:s,onFocus:p,onBlur:f})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:k(this.prefixUrl,m.rotateleft.REST),srcGroup:k(this.prefixUrl,m.rotateleft.GROUP),srcHover:k(this.prefixUrl,m.rotateleft.HOVER),srcDown:k(this.prefixUrl,m.rotateleft.DOWN),onRelease:l,onFocus:p,onBlur:f})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:k(this.prefixUrl,m.rotateright.REST),srcGroup:k(this.prefixUrl,m.rotateright.GROUP),srcHover:k(this.prefixUrl,m.rotateright.HOVER),srcDown:k(this.prefixUrl,m.rotateright.DOWN),onRelease:c,onFocus:p,onBlur:f}))),this.showFlipControl&&g.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:k(this.prefixUrl,m.flip.REST),srcGroup:k(this.prefixUrl,m.flip.GROUP),srcHover:k(this.prefixUrl,m.flip.HOVER),srcDown:k(this.prefixUrl,m.flip.DOWN),onRelease:u,onFocus:p,onBlur:f})),_?(this.buttonGroup=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,H)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=g),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,i,n,r){var s;if(s=e.isPlainObject(t)?t:{element:t,location:i,placement:n,onDraw:r},t=e.getElement(s.element),a(this.currentOverlays,t)>=0)return this;var l=o(this,s);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:s.location,placement:s.placement}),this},updateOverlay:function(t,n,r){var o;return t=e.getElement(t),(o=a(this.currentOverlays,t))>=0&&(this.currentOverlays[o].update(n,r),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:n,placement:r})),this},removeOverlay:function(t){var n;return t=e.getElement(t),(n=a(this.currentOverlays,t))>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var i;return t=e.getElement(t),(i=a(this.currentOverlays,t))>=0?this.currentOverlays[i]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var i=e.makeNeutralElement("div");i.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(i),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var t=e.pixelDensityRatio,i=e.getCurrentPixelDensityRatio();t!==i&&(e.pixelDensityRatio=i,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)},goToNextPage:function(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)},isAnimating:function(){return i[this.hash].animating}}),e.determineDrawer=function(i){for(let n in t){const r=t[n],o=r.prototype;if(o&&o instanceof t.DrawerBase&&e.isFunction(o.getType)&&o.getType.call(r)===i)return r}return null}}(t),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var i=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(i.x=this.viewer.viewport.getCenter(!0).x):i.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(i),this.viewer.viewport.applyConstraints()}}function i(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function n(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){var t={tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.viewer.raiseEvent("navigator-scroll",t),e.preventDefault=t.preventDefault}function o(e,t){a(e,"rotate("+t+"deg)")}function a(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(a){var s,l,c,u,h=a.viewer,d=this;function p(e,t){o(d.displayRegionContainer,e),o(d.displayRegion,-e),d.viewport.setRotation(e,t)}a.element||a.id?(a.element?(a.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),a.element.id?a.id=a.element.id:a.id="navigator-"+e.now(),this.element=a.element):this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:a.animationTime,autoResize:!1,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=h.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!==e.ControlAnchor.NONE&&(c=this.element.style,u=this.borderWidth,c.margin="0px",c.border=u+"px solid "+a.borderColor,c.padding="0px",c.background=a.background,c.opacity=a.opacity,c.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+a.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.zIndex=999999999,e.cursor="default",e.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),h.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!==e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(s=e.getElementSize(h.element),this.element.style.height=Math.round(s.y*a.sizeRatio)+"px",this.element.style.width=Math.round(s.x*a.sizeRatio)+"px",this.oldViewerSize=s,l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate&&(p(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0,!0),a.viewer.addHandler("rotate",(function(e){p(e.degrees,e.immediately)}))),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,i),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",(function(){d.viewport&&d.viewport.goHome(!0)})),h.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=d.world.getItemAt(e.previousIndex);d.world.setItemIndex(t,e.newIndex)}),1)})),h.world.addHandler("remove-item",(function(e){var t=e.item,i=d._getMatchingItem(t);i&&d.world.removeItem(i)})),this.update(h.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){a(this.displayRegion,e),a(this.canvas,e),a(this.element,e)},update:function(t){var i,n,r,a,s,l;if(t||(t=this.viewer.viewport),i=e.getElementSize(this.viewer.element),this._resizeWithViewer&&i.x&&i.y&&!i.equals(this.oldViewerSize)&&(this.oldViewerSize=i,this.maintainSizeRatio||!this.elementArea?(n=i.x*this.sizeRatio,r=i.y*this.sizeRatio):(n=Math.sqrt(this.elementArea*(i.x/i.y)),r=this.elementArea/n),this.element.style.width=Math.round(n)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=n*r),this.updateSize()),t&&this.viewport){if(a=t.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(a.getTopLeft(),!1),l=this.viewport.pixelFromPointNoRotate(a.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var c=t.getRotation(!0);o(this.displayRegion,-c)}var u=this.displayRegion.style;u.display=this.world.getItemCount()?"block":"none",u.top=s.y.toFixed(2)+"px",u.left=s.x.toFixed(2)+"px";var h=l.x-s.x,d=l.y-s.y;u.width=Math.round(Math.max(h,0))+"px",u.height=Math.round(Math.max(d,0))+"px"}},addTiledImage:function(t){var i=this,n=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;function r(){i._matchBounds(t,n)}t._originalForNavigator=n,i._matchBounds(t,n,!0),i._matchOpacity(t,n),i._matchCompositeOperation(t,n),n.addHandler("bounds-change",r),n.addHandler("clip-change",r),n.addHandler("opacity-change",(function(){i._matchOpacity(t,n)})),n.addHandler("composite-operation-change",(function(){i._matchCompositeOperation(t,n)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(e){for(var t,i=this.world.getItemCount(),n=0;n<i;n++)if((t=this.world.getItemAt(n))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,i){var n=t.getBoundsNoRotate();e.setPosition(n.getTopLeft(),i),e.setWidth(n.width,i),e.setRotation(t.getRotation(),i),e.setClip(t.getClip()),e.setFlip(t.getFlip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(t),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(i){var n,r=i.split("."),o=null,a=arguments,s=t;for(n=0;n<r.length-1;n++)s=s[r[n]]||{};return"string"!=typeof(o=s[r[n]])&&(e.console.error("Untranslated source string:",i),o=""),o.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<a.length?a[t]:""}))},setString:function(e,i){var n,r=e.split("."),o=t;for(n=0;n<r.length-1;n++)o[r[n]]||(o[r[n]]={}),o=o[r[n]];o[r[n]]=i}})}(t),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,i){var n,r;if(i=i||new e.Point(0,0),t%90==0)switch(e.positiveModulo(t,360)){case 0:n=1,r=0;break;case 90:n=0,r=1;break;case 180:n=-1,r=0;break;case 270:n=0,r=-1}else{var o=t*Math.PI/180;n=Math.cos(o),r=Math.sin(o)}var a=n*(this.x-i.x)-r*(this.y-i.y)+i.x,s=r*(this.x-i.x)+n*(this.y-i.y)+i.y;return new e.Point(a,s)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(t),function(e){e.TileSource=function(t,i,n,r,o,a){var s,l,c=this,u=arguments;if(s=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,s),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",(function(e){c.success(e)})),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new e.Point(s.width,s.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=void 0!==s.maxLevel&&null!==s.maxLevel?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},setMaxLevel:function(e){this.maxLevel=e,this._memoizeLevelScale()},getLevelScale:function(e){return this._memoizeLevelScale(),this.getLevelScale(e)},_memoizeLevelScale:function(){var e,t={};for(e=0;e<=this.maxLevel;e++)t[e]=1/Math.pow(2,this.maxLevel-e);this.getLevelScale=function(e){return t[e]}},getNumTiles:function(t){var i=this.getLevelScale(t),n=Math.ceil(i*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(i*this.dimensions.y/this.getTileHeight(t));return new e.Point(n,r)},getPixelRatio:function(t){var i=this.dimensions.times(this.getLevelScale(t)),n=1/i.x*e.pixelDensityRatio,r=1/i.y*e.pixelDensityRatio;return new e.Point(n,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,i){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),o=i.x*r,a=i.y*r,s=Math.floor(o/this.getTileWidth(t)),l=Math.floor(a/this.getTileHeight(t));return i.x>=1&&(s=this.getNumTiles(t).x-1),i.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(s,l)},getTileBounds:function(t,i,n,r){var o=this.dimensions.times(this.getLevelScale(t)),a=this.getTileWidth(t),s=this.getTileHeight(t),l=0===i?0:a*i-this.tileOverlap,c=0===n?0:s*n-this.tileOverlap,u=a+(0===i?1:2)*this.tileOverlap,h=s+(0===n?1:2)*this.tileOverlap,d=1/o.x;return u=Math.min(u,o.x-l),h=Math.min(h,o.y-c),r?new e.Rect(0,0,u,h):new e.Rect(l*d,c*d,u*d,h*d)},getImageInfo:function(t){var i,n,r,o,a,s,l,c=this;t&&(l=(s=(a=t.split("/"))[a.length-1]).lastIndexOf("."))>-1&&(a[a.length-1]=s.slice(0,l));var u=null;if(this.splitHashDataForPost){var h=t.indexOf("#");-1!==h&&(u=t.substring(h+1),t=t.substr(0,h))}n=function(i){"string"==typeof i&&(i=e.parseXml(i));var n=e.TileSource.determineType(c,i,t);n?(void 0===(o=n.prototype.configure.apply(c,[i,t,u])).ajaxWithCredentials&&(o.ajaxWithCredentials=c.ajaxWithCredentials),r=new n(o),c.ready=!0,c.raiseEvent("ready",{tileSource:r})):c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(i=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:i,callback:n})):e.makeAjaxRequest({url:t,postData:u,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var i=function(t){var i,n,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw i=404===(o=t.status)?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,i));if(r.match(/^\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(e){n=t.responseText}else if(r.match(/\s*[{[].*/))try{n=e.parseJSON(r)}catch(e){n=r}else n=r;return n}(t);n(i)},error:function(i,n){var r;try{r="HTTP "+i.status+" attempting to load TileSource: "+t}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource: "+t}e.console.error(r),c.raiseEvent("open-failed",{message:r,source:t,postData:u})}})},supports:function(e,t){return!1},configure:function(e,t,i){throw new Error("Method not implemented.")},getTileUrl:function(e,t,i){throw new Error("Method not implemented.")},getTilePostData:function(e,t,i){return null},getTileAjaxHeaders:function(e,t,i){return{}},getTileHashKey:function(e,t,i,n,r,o){return a="string"!=typeof n?e+"/"+t+"_"+i:n,r?a+"+"+JSON.stringify(r):a;var a},tileExists:function(e,t,i){var n=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&i>=0&&t<n.x&&i<n.y},hasTransparency:function(e,t,i,n){return!!e||t.match(".png")},downloadTileStart:function(t){var i=t.userData,n=new Image;i.image=n,i.request=null;var r=function(e){n?(n.onload=n.onerror=n.onabort=null,t.finish(e?null:n,i.request,e)):t.finish(null,i.request,"Image load failed: undefined Image instance.")};n.onload=function(){r()},n.onabort=n.onerror=function(){r("Image load aborted.")},t.loadWithAjax?i.request=e.makeAjaxRequest({url:t.src,withCredentials:t.ajaxWithCredentials,headers:t.ajaxHeaders,responseType:"arraybuffer",postData:t.postData,success:function(e){var t;try{t=new window.Blob([e.response])}catch(n){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===n.name&&i){var o=new i;o.append(e.response),t=o.getBlob()}}0===t.size?r("Empty image response."):n.src=(window.URL||window.webkitURL).createObjectURL(t)},error:function(e){r("Image load aborted - XHR error")}}):(!1!==t.crossOriginPolicy&&(n.crossOrigin=t.crossOriginPolicy),n.src=t.src)},downloadTileAbort:function(e){e.userData.request&&e.userData.request.abort();var t=e.userData.image;e.userData.image&&(t.onload=t.onerror=t.onabort=null)},createTileCache:function(e,t,i){e._data=t},destroyTileCache:function(e){e._data=null,e._renderedContext=null},getTileCacheData:function(e){return e._data},getTileCacheDataAsImage:function(e){return e._data},getTileCacheDataAsContext2D:function(e){if(!e._renderedContext){var t=document.createElement("canvas");t.width=e._data.width,t.height=e._data.height,e._renderedContext=t.getContext("2d"),e._renderedContext.drawImage(e._data,0,0),e._data=null}return e._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(i,n,r){var o;for(o in t)if(o.match(/.+TileSource$/)&&e.isFunction(t[o])&&e.isFunction(t[o].prototype.supports)&&t[o].prototype.supports.call(i,n,r))return t[o];return e.console.error("No TileSource was able to open %s %s",r,n),null}}(t),function(e){function t(t,i){var n,r,o=i.Image,a=o.Url,s=o.Format,l=o.Size,c=o.DisplayRect||[],u=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;r<c.length;r++)n=c[r].Rect,f.push(new e.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),parseInt(n.MinLevel,10),parseInt(n.MaxLevel,10)));return e.extend(!0,{width:u,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:s,displayRects:f},i)}e.DziTileSource=function(t,i,n,r,o,a,s,l,c){var u,h,d,p;if(p=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=p.tilesUrl,this.fileFormat=p.fileFormat,this.displayRects=p.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(d=(h=this.displayRects[u]).minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);e.TileSource.apply(this,[p])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var i;return e.Image?i=e.Image.xmlns:e.documentElement&&("Image"!==e.documentElement.localName&&"Image"!==e.documentElement.tagName||(i=e.documentElement.namespaceURI)),-1!==(i=(i||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==i.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(i,n,r){var o;return o=e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,a,s,l,c=n.documentElement,u=c.localName||c.tagName,h=n.documentElement.namespaceURI,d=null,p=[];if("Image"===u)try{if(void 0===(s=c.getElementsByTagName("Size")[0])&&(s=c.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(s.getAttribute("Height"),10),Width:parseInt(s.getAttribute("Width"),10)}}},!e.imageFormatSupported(d.Image.Format))throw new Error(e.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(void 0===(r=c.getElementsByTagName("DisplayRect"))&&(r=c.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)void 0===(a=(o=r[l]).getElementsByTagName("Rect")[0])&&(a=o.getElementsByTagNameNS(h,"Rect")[0]),p.push({Rect:{X:parseInt(a.getAttribute("X"),10),Y:parseInt(a.getAttribute("Y"),10),Width:parseInt(a.getAttribute("Width"),10),Height:parseInt(a.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),t(0,d)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===u)throw new Error(e.getString("Errors.Dzc"));if("Error"===u){var f=c.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}(0,i),n&&!o.tilesUrl&&(o.tilesUrl=n.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),-1!==n.search(/\.(dzi|xml|js)\?/)?o.queryParams=n.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,i){return[this.tilesUrl,e,"/",t,"_",i,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,i){var n,r,o,a,s,l,c,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(c=u.length-1;c>=0;c--)if(!(e<(n=u[c]).minLevel||e>n.maxLevel)&&(r=this.getLevelScale(e),o=n.x*r,a=n.y*r,s=o+n.width*r,l=a+n.height*r,o=Math.floor(o/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),l=Math.ceil(l/this._tileWidth),o<=t&&t<s&&a<=i&&i<l))return!0;return!1}})}(t),function(e){function i(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,i=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),n=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(n=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(n=-1!==e.extraFeatures.indexOf("sizeByWh")),!i||n}function n(e){for(var t=[],i=0;i<e.sizes.length;i++)t.push({url:e._id+"/full/"+e.sizes[i].width+","+(3===e.version?e.sizes[i].height:"")+"/0/default."+e.tileFormat,width:e.sizes[i].width,height:e.sizes[i].height});return t.sort((function(e,t){return e.width-t.width}))}function r(t,i,n){var o,a;if(3===t.nodeType&&n)(a=t.nodeValue.trim()).match(/^\d*$/)&&(a=Number(a)),i[n]?(e.isArray(i[n])||(i[n]=[i[n]]),i[n].push(a)):i[n]=a;else if(1===t.nodeType)for(o=0;o<t.childNodes.length;o++)r(t.childNodes[o],i,t.nodeName)}e.IIIFTileSource=function(t){if(e.extend(!0,this,t),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(t.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=t.version,this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var o=0;o<this.tiles[r].scaleFactors.length;o++){var a=this.tiles[r].scaleFactors[o];this.scale_factors.push(a),t.tileSizePerScaleFactor[a]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(i(t)){for(var s=Math.min(this.height,this.width),l=[256,512,1024],c=[],u=0;u<l.length;u++)l[u]<=s&&c.push(l[u]);c.length>0?t.tileSize=Math.max.apply(null,c):t.tileSize=s}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,t.levels=n(this),e.extend(!0,t,{width:t.levels[t.levels.length-1].width,height:t.levels[t.levels.length-1].height,tileSize:Math.max(t.height,t.width),tileOverlap:0,minLevel:0,maxLevel:t.levels.length-1}),this.levels=t.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!t.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var h=Math.max.apply(null,this.scale_factors);t.maxLevel=Math.round(Math.log(h)*Math.LOG2E)}else t.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));if(this.sizes){var d=this.sizes.length;d!==t.maxLevel&&d!==t.maxLevel+1||(this.levelSizes=this.sizes.slice().sort(((e,t)=>e.width-t.width)),d===t.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!!(e.protocol&&"http://iiif.io/api/image"===e.protocol||e["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"===e["@context"]||"http://iiif.io/api/image/1/context.json"===e["@context"])||e.profile&&0===e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||e.identifier&&e.width&&e.height||e.documentElement&&"info"===e.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"===e.documentElement.namespaceURI)},configure:function(i,n,o){if(e.isPlainObject(i)){if(i["@context"]){var a=i["@context"];if(Array.isArray(a))for(var s=0;s<a.length;s++)if("string"==typeof a[s]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(a[s])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===a[s])){a=a[s];break}switch(a){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":i.version=1;break;case"http://iiif.io/api/image/2/context.json":i.version=2;break;case"http://iiif.io/api/image/3/context.json":i.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=n.replace("/info.json",""),i.version=1;if(i.preferredFormats)for(var l=0;l<i.preferredFormats.length;l++)if(t.imageFormatSupported(i.preferredFormats[l])){i.tileFormat=i.preferredFormats[l];break}return i}var c=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var i=t.documentElement,n=null;if("info"===i.tagName)try{return r(i,n={}),n}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(i);return c["@context"]="http://iiif.io/api/image/1.0/context.json",c["@id"]=n.replace("/info.xml",""),c.version=1,c},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var i=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(i=this.levels[t].width/this.levels[this.maxLevel].width),i}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid)return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0);if(this.levelSizes){var i=this.levelSizes[t],n=Math.ceil(i.width/this.getTileWidth(t)),r=Math.ceil(i.height/this.getTileHeight(t));return new e.Point(n,r)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,i){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.levelSizes[t].width,o=i.x*r,a=i.y*r,s=Math.floor(o/this.getTileWidth(t)),l=Math.floor(a/this.getTileHeight(t));return i.x>=1&&(s=this.getNumTiles(t).x-1),i.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(s,l)}return e.TileSource.prototype.getTileAtPoint.call(this,t,i)},getTileUrl:function(e,t,i){if(this.emulateLegacyImagePyramid){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}var r,o,a,s,l,c,u,h,d,p,f,m,g,_,v,y=Math.pow(.5,this.maxLevel-e);return this.levelSizes?(r=this.levelSizes[e].width,o=this.levelSizes[e].height):(r=Math.ceil(this.width*y),o=Math.ceil(this.height*y)),a=this.getTileWidth(e),s=this.getTileHeight(e),l=Math.round(a/y),c=Math.round(s/y),v=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,r<a&&o<s?(m=2===this.version&&r===this.width?"full":3===this.version&&r===this.width&&o===this.height?"max":3===this.version?r+","+o:r+",",u="full"):(h=t*l,d=i*c,p=Math.min(l,this.width-h),f=Math.min(c,this.height-d),u=0===t&&0===i&&p===this.width&&f===this.height?"full":[h,d,p,f].join(","),g=Math.min(a,r-t*a),_=Math.min(s,o-i*s),m=2===this.version&&g===this.width?"full":3===this.version&&g===this.width&&_===this.height?"max":3===this.version?g+","+_:g+","),[this._id,u,m,"0",v].join("/")},__testonly__:{canBeTiled:i,constructLevels:n}})}(t),function(e){e.OsmTileSource=function(t,i,n,r,o){var a;(a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&a.height||(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){return this.tilesUrl+(e-8)+"/"+t+"/"+i+".png"}})}(t),function(e){e.TmsTileSource=function(t,i,n,r,o){var a;a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var s,l=256*Math.ceil(a.width/256),c=256*Math.ceil(a.height/256);s=l>c?l/256:c/256,a.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,a.tileSize=256,a.width=l,a.height=c,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(n-i)+".png"}})}(t),function(e){e.ZoomifyTileSource=function(e){void 0===e.tileSize&&(e.tileSize=256),void 0===e.fileFormat&&(e.fileFormat="jpg",this.fileFormat=e.fileFormat);var i={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(i.x,10)>e.tileSize||parseInt(i.y,10)>e.tileSize;)i.x=Math.floor(i.x/2),i.y=Math.floor(i.y/2),e.imageSizes.push({x:i.x,y:i.y}),e.gridSize.push(this._getGridSize(i.x,i.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,t.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,i){return{x:Math.ceil(e/i),y:Math.ceil(t/i)}},_calculateAbsoluteTileNumber:function(e,t,i){for(var n=0,r={},o=0;o<e;o++)n+=(r=this.gridSize[o]).x*r.y;return n+((r=this.gridSize[e]).x*i+t)},supports:function(e,t){return e.type&&"zoomifytileservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n,r=this._calculateAbsoluteTileNumber(e,t,i);return n=Math.floor(r/256),this.tilesUrl+"TileGroup"+n+"/"+e+"-"+t+"-"+i+"."+this.fileFormat}})}(t),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var i,n,r;e.isArray(t)&&(i={type:"legacy-image-pyramid",levels:t}),i.levels=function(t){var i,n,r=[];for(n=0;n<t.length;n++)(i=t[n]).height&&i.width&&i.url?r.push({url:i.url,width:Number(i.width),height:Number(i.height)}):e.console.error("Unsupported image format: %s",i.url?i.url:"<no URL>");return r.sort((function(e,t){return e.height-t.height}))}(i.levels),i.levels.length>0?(n=i.levels[i.levels.length-1].width,r=i.levels[i.levels.length-1].height):(n=0,r=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:n,height:r,tileSize:Math.max(r,n),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"===e.type||e.documentElement&&"legacy-image-pyramid"===e.documentElement.getAttribute("type")},configure:function(i,n,r){return e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,a=n.documentElement,s=a.tagName,l=null,c=[];if("image"===s)try{for(l={type:a.getAttribute("type"),levels:[]},c=a.getElementsByTagName("level"),o=0;o<c.length;o++)r=c[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return t(0,l)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===s)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===s)throw new Error("Error: "+n)}throw new Error("Unknown element "+s)}(0,i)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}})}(t),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t,i){return e},getImageInfo:function(t){var i=this._image=new Image,n=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),e.addEvent(i,"load",(function(){n.width=i.naturalWidth,n.height=i.naturalHeight,n.aspectRatio=n.width/n.height,n.dimensions=new e.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})})),e.addEvent(i,"error",(function(){n.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),i.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n},getContext2D:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].context2D),n},destroy:function(e){this._freeupCanvasMemory(e)},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas)return delete this._image,t;var i=this._image.naturalWidth,n=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=i,r.height=n,o.drawImage(this._image,0,0,i,n),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;i>=2&&n>=2;){i=Math.floor(i/2),n=Math.floor(n/2);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=i,a.height=n,s.drawImage(r,0,0,i,n),t.splice(0,0,{context2D:s,width:i,height:n}),r=a,o=s}return t},_freeupCanvasMemory:function(e){for(var t=0;t<this.levels.length;t++)this.levels[t].context2D&&(this.levels[t].context2D.canvas.height=0,this.levels[t].context2D.canvas.width=0,e&&e.raiseEvent("image-unloaded",{context2D:this.levels[t].context2D}))}})}(t),function(e){e.TileSourceCollection=function(t,i,n,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(t),function(e){function t(i){e.requestAnimationFrame((function(){var n,r;(n=i).shouldFade&&(r=1-(e.now()-n.fadeBeginTime)/n.fadeLength,r=Math.min(1,r),r=Math.max(0,r),n.imgGroup&&e.setElementOpacity(n.imgGroup,r,!0),r>0&&t(n))}))}function i(t,i){var n;t.element.disabled||(i>=e.ButtonState.GROUP&&t.currentState===e.ButtonState.REST&&((n=t).shouldFade=!1,n.imgGroup&&e.setElementOpacity(n.imgGroup,1,!0),t.currentState=e.ButtonState.GROUP),i>=e.ButtonState.HOVER&&t.currentState===e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),i>=e.ButtonState.DOWN&&t.currentState===e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function n(i,n){var r;i.element.disabled||(n<=e.ButtonState.HOVER&&i.currentState===e.ButtonState.DOWN&&(i.imgDown&&(i.imgDown.style.visibility="hidden"),i.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&i.currentState===e.ButtonState.HOVER&&(i.imgHover&&(i.imgHover.style.visibility="hidden"),i.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&i.currentState===e.ButtonState.GROUP&&((r=i).shouldFade=!0,r.fadeBeginTime=e.now()+r.fadeDelay,window.setTimeout((function(){t(r)}),r.fadeDelay),i.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var r=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(i(r,e.ButtonState.DOWN),r.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||i(r,e.ButtonState.HOVER)},focusHandler:function(e){r.tracker.enterHandler(e),r.raiseEvent("focus",{originalEvent:e.originalEvent})},leaveHandler:function(t){n(r,e.ButtonState.GROUP),t.insideElementPressed&&r.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){r.tracker.leaveHandler(e),r.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){i(r,e.ButtonState.DOWN),r.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(n(r,e.ButtonState.HOVER),r.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?n(r,e.ButtonState.GROUP):i(r,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&r.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){13===e.keyCode?(r.raiseEvent("click",{originalEvent:e.originalEvent}),r.raiseEvent("release",{originalEvent:e.originalEvent}),e.preventDefault=!0):e.preventDefault=!1}}),n(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){i(this,e.ButtonState.GROUP)},notifyGroupExit:function(){n(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(t),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var i,n=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",i=0;i<n.length;i++)this.element.appendChild(n[i].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},leaveHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(e){this.buttons.push(e),this.element.appendChild(e.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var e=this.buttons.pop();this.element.removeChild(e.element),e.destroy()}this.tracker.destroy(),this.element=null}}}(t),function(e){e.Rect=function(t,i,n,r,o){var a,s;this.x="number"==typeof t?t:0,this.y="number"==typeof i?i:0,this.width="number"==typeof n?n:0,this.height="number"==typeof r?r:0,this.degrees="number"==typeof o?o:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},e.Rect.fromSummits=function(t,i,n){var r=t.distanceTo(i),o=t.distanceTo(n),a=i.minus(t),s=Math.atan(a.y/a.x);return a.x<0?s+=Math.PI:a.y<0&&(s+=2*Math.PI),new e.Rect(t.x,t.y,r,o,s/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),r=Math.min(i.x,n.x),o=Math.min(i.y,n.y),a=Math.max(i.x+i.width,n.x+n.width),s=Math.max(i.y+i.height,n.y+n.height);return new e.Rect(r,o,a-r,s-o)},intersection:function(t){var i=1e-10,n=[],r=this.getTopLeft();t.containsPoint(r,i)&&n.push(r);var o=this.getTopRight();t.containsPoint(o,i)&&n.push(o);var a=this.getBottomLeft();t.containsPoint(a,i)&&n.push(a);var s=this.getBottomRight();t.containsPoint(s,i)&&n.push(s);var l=t.getTopLeft();this.containsPoint(l,i)&&n.push(l);var c=t.getTopRight();this.containsPoint(c,i)&&n.push(c);var u=t.getBottomLeft();this.containsPoint(u,i)&&n.push(u);var h=t.getBottomRight();this.containsPoint(h,i)&&n.push(h);for(var d=this._getSegments(),p=t._getSegments(),f=0;f<d.length;f++)for(var m=d[f],g=0;g<p.length;g++){var _=p[g],v=y(m[0],m[1],_[0],_[1]);v&&n.push(v)}function y(t,n,r,o){var a=n.minus(t),s=o.minus(r),l=-s.x*a.y+a.x*s.y;if(0===l)return null;var c=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/l,u=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/l;return-1e-10<=c&&c<=1-i&&-1e-10<=u&&u<=1-i?new e.Point(t.x+u*a.x,t.y+u*a.y):null}if(0===n.length)return null;for(var A=n[0].x,b=n[0].x,x=n[0].y,w=n[0].y,S=1;S<n.length;S++){var C=n[S];C.x<A&&(A=C.x),C.x>b&&(b=C.x),C.y<x&&(x=C.y),C.y>w&&(w=C.y)}return new e.Rect(A,x,b-A,w-x)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight();return[[e,t],[t,n],[n,i],[i,e]]},rotate:function(t,i){if(0===(t=e.positiveModulo(t,360)))return this.clone();i=i||this.getCenter();var n=this.getTopLeft().rotate(t,i),r=this.getTopRight().rotate(t,i).minus(n);r=r.apply((function(e){return Math.abs(e)<1e-15?0:e}));var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(n.x,n.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),i=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,i.x,n.x,r.x),a=Math.max(t.x,i.x,n.x,r.x),s=Math.min(t.y,i.y,n.y,r.y),l=Math.max(t.y,i.y,n.y,r.y);return new e.Rect(o,s,a-o,l-s)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),i=Math.floor(t.x),n=Math.floor(t.y),r=Math.ceil(t.width+t.x-i),o=Math.ceil(t.height+t.y-n);return new e.Rect(i,n,r,o)},containsPoint:function(e,t){t=t||0;var i=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),o=n.minus(i),a=r.minus(i);return(e.x-i.x)*o.x+(e.y-i.y)*o.y>=-t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y<=t&&(e.x-i.x)*a.x+(e.y-i.y)*a.y>=-t&&(e.x-r.x)*a.x+(e.y-r.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(t),function(e){var t={};function i(e){var t;e.quick&&(t="horizontal"===this.scroll?Math.floor(e.position.x/(this.panelWidth+4)):Math.floor(e.position.y/this.panelHeight),this.viewer.goToPage(t)),this.element.focus()}function n(t){if(this.dragging=!0,this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-t.delta.x>0?i>-(r-s.x)&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,s.x,i+2*t.delta.x)):-t.delta.x<0&&i<0&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,s.x,i+2*t.delta.x)):-t.delta.y>0?n>-(a-s.y)&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,s.y,n+2*t.delta.y)):-t.delta.y<0&&n<0&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,s.y,n+2*t.delta.y))}}function r(t){if(this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?t.scroll>0?i>-(r-s.x)&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,s.x,i-60*t.scroll)):t.scroll<0&&i<0&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,s.x,i-60*t.scroll)):t.scroll<0?n>s.y-a&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,s.y,n+60*t.scroll)):t.scroll>0&&n<0&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,s.y,n+60*t.scroll)),t.preventDefault=!0}}function o(t,i,n){var r,o,a,s,l,c;for(r="horizontal"===t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(i/r)+5,l=o=(o=(a=Math.ceil((Math.abs(n)+i)/r)+1)-o)<0?0:o;l<a&&l<t.panels.length;l++)if(!(c=t.panels[l]).activePanel){var u,h=t.viewer.tileSources[l];u=h.referenceStripThumbnailUrl?{type:"image",url:h.referenceStripThumbnailUrl}:h,s=new e.Viewer({id:c.id,tileSources:[u],element:c,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,drawer:"canvas"}),e.setElementPointerEventsNone(s.canvas),e.setElementPointerEventsNone(s.container),s.innerTracker.setTracking(!1),s.outerTracker.setTracking(!1),t.miniViewers[c.id]=s,c.activePanel=!0}}function a(e){var t=e.eventSource.element;"horizontal"===this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px"}function s(t){var i=t.eventSource.element;"horizontal"===this.scroll?i.style.marginBottom="-"+e.getElementSize(i).y/2+"px":i.style.marginLeft="-"+e.getElementSize(i).x/2+"px"}function l(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 38:case 39:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 40:case 37:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}function c(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 61:case 48:case 119:case 87:case 100:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 45:case 115:case 83:case 97:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}e.ReferenceStrip=function(u){var h,d,p,f=u.viewer,m=e.getElementSize(f.element);for(u.id||(u.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=u.id,this.element.className="referencestrip"),u=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},u,{element:this.element}),e.extend(this,u),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=f,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,i),dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,a),leaveHandler:e.delegate(this,s),keyDownHandler:e.delegate(this,l),keyHandler:e.delegate(this,c),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),u.width&&u.height?(this.element.style.width=u.width+"px",this.element.style.height=u.height+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===u.scroll?(this.element.style.width=m.x*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.height=m.y*u.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=m.y*u.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.width=m.x*u.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=m.x*this.sizeRatio+8,this.panelHeight=m.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<f.tileSources.length;p++)(h=e.makeNeutralElement("div")).id=this.element.id+"-"+p,h.style.width=this.panelWidth+"px",h.style.height=this.panelHeight+"px",h.style.display="inline",h.style.float="left",h.style.cssFloat="left",h.style.padding="2px",e.setElementTouchActionNone(h),e.setElementPointerEventsNone(h),this.element.appendChild(h),h.activePanel=!1,this.panels.push(h);o(this,"vertical"===this.scroll?m.y:m.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(t){var i,n=this.element.querySelector("#"+this.element.id+"-"+t),r=e.getElementSize(this.viewer.canvas),s=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),c=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==n&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=n,this.currentSelected.style.background="#999","horizontal"===this.scroll?(i=Number(t)*(this.panelWidth+3))>c+r.x-this.panelWidth?(i=Math.min(i,s-r.x),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):i<c&&(i=Math.max(0,i-r.x/2),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):(i=Number(t)*(this.panelHeight+3))>u+r.y-this.panelHeight?(i=Math.min(i,l-r.y),this.element.style.marginTop=-i+"px",o(this,r.y,-i)):i<u&&(i=Math.max(0,i-r.y/2),this.element.style.marginTop=-i+"px",o(this,r.y,-i)),this.currentPage=t,a.call(this,{eventSource:this.tracker}))},update:function(){return!!t[this.id].animating},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(t),function(e){e.DisplayRect=function(t,i,n,r,o,a){e.Rect.apply(this,[t,i,n,r]),this.minLevel=o,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(t),function(e){e.Spring=function(t){var i=arguments;"object"!=typeof t&&(t={initial:i.length&&"number"==typeof i[0]?i[0]:void 0,springStiffness:i.length>1?i[1].springStiffness:5,animationTime:i.length>1?i[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){let t,i;if(this.current.time=e.now(),this._exponential?(t=this.start._logValue,i=this.target._logValue):(t=this.start.value,i=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let e=t+(i-t)*(n=this.springStiffness,r=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(n*-r))/(1-Math.exp(-n)));this._exponential?this.current.value=Math.exp(e):this.current.value=e}var n,r;return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(t),function(e){e.ImageJob=function(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},t),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var e=this,t=this.abort;this.jobId=window.setTimeout((function(){e.finish(null,null,"Image load exceeded timeout ("+e.timeout+" ms)")}),this.timeout),this.abort=function(){e.source.downloadTileAbort(e),"function"==typeof t&&t()},this.source.downloadTileStart(this)},finish:function(e,t,i){this.data=e,this.request=t,this.errorMsg=i,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(t){if(!t.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var i=e.TileSource.prototype;t.source={downloadTileStart:i.downloadTileStart,downloadTileAbort:i.downloadTileAbort}}var n=this,r={src:t.src,tile:t.tile||{},source:t.source,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,postData:t.postData,callback:function(e){var i,r,o,a;i=n,r=e,o=t.callback,""!==r.errorMsg&&(null===r.data||void 0===r.data)&&r.tries<1+i.tileRetryMax&&i.failedTiles.push(r),i.jobsInProgress--,(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.jobQueue.length>0&&((a=i.jobQueue.shift()).start(),i.jobsInProgress++),i.tileRetryMax>0&&0===i.jobQueue.length&&(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.failedTiles.length>0&&(a=i.failedTiles.shift(),setTimeout((function(){a.start()}),i.tileRetryDelay),i.jobsInProgress++),o(r.data,r.errorMsg,r.request)},abort:t.abort,timeout:this.timeout},o=new e.ImageJob(r);!this.jobLimit||this.jobsInProgress<this.jobLimit?(o.start(),this.jobsInProgress++):this.jobQueue.push(o)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(t),function(e){e.Tile=function(i,n,r,o,a,s,l,c,u,h,d,p){this.level=i,this.x=n,this.y=r,this.bounds=o,this.positionedBounds=new t.Rect(o.x,o.y,o.width,o.height),this.sourceBounds=h,this.exists=a,this._url=s,this.postData=d,this.context2D=l,this.loadWithAjax=c,this.ajaxHeaders=u,void 0===p&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),p=e.TileSource.prototype.getTileHashKey(i,n,r,s,u,d)),this.cacheKey=p,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return"function"==typeof this._url?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,i,n){var r=Math.max(1,Math.ceil((n.x-i.x)/2)),o=Math.max(1,Math.ceil((n.y-i.y)/2));return new e.Point(r,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(t),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,i,n){var r;r=e.isPlainObject(t)?t:{element:t,location:i,placement:n},this.element=r.element,this.element.innerHTML="<div>"+this.element.innerHTML+"</div>",this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,i){var n=e.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?t.x-=i.x/2:n.isRight&&(t.x-=i.x),n.isVerticallyCentered?t.y-=i.y/2:n.isBottom&&(t.y-=i.y))},destroy:function(){var t=this.element,i=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(i.display="none",document.body.appendChild(t))),this.onDraw=null,i.top="",i.left="",i.position="",null!==this.width&&(i.width=""),null!==this.height&&(i.height="");var n=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");n&&r&&(i[n]="",i[r]="")},drawHTML:function(t,i){var n=this.element;n.parentNode!==t&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,t.appendChild(n),this.style.position="absolute",this.size=e.getElementSize(n));var r=this._getOverlayPositionAndSize(i),o=r.position,a=this.size=r.size,s="";i.overlayPreserveContentDirection&&(s=i.flipped?" scaleX(-1)":" scaleX(1)");var l=i.flipped?-r.rotate:r.rotate,c=i.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(o,a,this.element);else{var u=this.style,h=n.firstChild.style;u.left=o.x+"px",u.top=o.y+"px",null!==this.width&&(u.width=a.x+"px"),null!==this.height&&(u.height=a.y+"px");var d=e.getCssPropertyWithVendorPrefix("transformOrigin"),p=e.getCssPropertyWithVendorPrefix("transform");d&&p&&(l&&!i.flipped?(h[p]="",u[d]=this._getTransformOrigin(),u[p]="rotate("+l+"deg)"):!l&&i.flipped?(h[p]=s,u[d]=this._getTransformOrigin(),u[p]=c):l&&i.flipped?(h[p]=s,u[d]=this._getTransformOrigin(),u[p]="rotate("+l+"deg)"+c):(h[p]="",u[d]="",u[p]="")),u.display="block"}},_getOverlayPositionAndSize:function(t){var i=t.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(t);this.adjust(i,n);var r=0;if(t.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(i.x,i.y,n.x,n.y),a=this._getBoundingBox(o,t.getRotation(!0));i=a.getTopLeft(),n=a.getSize()}else r=t.getRotation(!0);return t.flipped&&(i.x=t.getContainerSize().x-i.x),{position:i,size:n,rotate:r}},_getSizeInPixels:function(t){var i=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(i=r.x),null!==this.height&&(n=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(i=o.x),null===this.height&&(n=o.y)}return new e.Point(i,n)},_getBoundingBox:function(e,t){var i=this._getPlacementPoint(e);return e.rotate(t,i).getBoundingBox()},_getPlacementPoint:function(t){var i=new e.Point(t.x,t.y),n=e.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?i.x+=t.width/2:n.isRight&&(i.x+=t.width),n.isVerticallyCentered?i.y+=t.height/2:n.isBottom&&(i.y+=t.height)),i},_getTransformOrigin:function(){var t="",i=e.Placement.properties[this.placement];return i?(i.isLeft?t="left":i.isRight&&(t="right"),i.isTop?t+=" top":i.isBottom&&(t+=" bottom"),t):t},update:function(t,i){var n=e.isPlainObject(t)?t:{location:t,placement:i};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,n=this.height;if(null===i||null===n){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===i&&(i=r.x),null===n&&(n=r.y)}var o=this.location.clone();return this.adjust(o,new e.Point(i,n)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,i,n))},_adjustBoundsForRotation:function(t,i){if(!t||0===t.getRotation(!0)||this.rotationMode===e.OverlayRotationMode.EXACT)return i;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return i;var n=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}return i.rotate(-t.getRotation(!0),this._getPlacementPoint(i))}}}(t),function(e){const t=e;t.DrawerBase=class{constructor(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required"),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,this.options=t.options||{},this.container=e.getElement(t.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",e.setElementOpacity(this.canvas,this.viewer.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return e.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){e.console.error("Drawer.getType must be implemented by child class")}static isSupported(){e.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return e.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(t){e.console.error("Drawer.draw must be implemented by child class")}canRotate(){e.console.error("Drawer.canRotate must be implemented by child class")}destroy(){e.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(e){return!1}setImageSmoothingEnabled(t){e.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(t){e.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){e.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===e.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===e.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===e.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===e.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===e.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(t){var i=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)}viewportCoordToDrawerCoord(t){var i=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)}_calculateCanvasSize(){var i=e.pixelDensityRatio,n=this.viewport.getContainerSize();return new t.Point(Math.round(n.x*i),Math.round(n.y*i))}_raiseTiledImageDrawnEvent(e,t){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:e,tiles:t})}_raiseDrawerErrorEvent(e,t){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:e,drawer:this,error:t})}}}(t),function(e){const t=e;class i extends t.DrawerBase{constructor(e){super(e),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(e){return!0}_createDrawingElement(){return e.makeNeutralElement("div")}draw(e){var t=this;this._prepareNewFrame(),e.forEach((function(e){0!==e.opacity&&t._drawTiles(e)}))}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(e){var t=e.getTilesToDraw().map((e=>e.tile));if(0!==e.opacity&&(0!==t.length||e.placeholderFillStyle))for(var i=t.length-1;i>=0;i--){var n=t[i];this._drawTile(n),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:n})}}_drawTile(t){e.console.assert(t,"[Drawer._drawTile] tile is required");let i=this.canvas;if(t.cacheImageRecord)if(t.loaded){if(!t.element){var n=t.getImage();if(!n)return;t.element=e.makeNeutralElement("div"),t.imgElement=n.cloneNode(),t.imgElement.style.msInterpolationMode="nearest-neighbor",t.imgElement.style.width="100%",t.imgElement.style.height="100%",t.style=t.element.style,t.style.position="absolute"}t.element.parentNode!==i&&i.appendChild(t.element),t.imgElement.parentNode!==t.element&&t.element.appendChild(t.imgElement),t.style.top=t.position.y+"px",t.style.left=t.position.x+"px",t.style.height=t.size.y+"px",t.style.width=t.size.x+"px",t.flipped&&(t.style.transform="scaleX(-1)"),e.setElementOpacity(t.element,t.opacity)}else e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString());else e.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",t.toString())}}e.HTMLDrawer=i}(t),function(e){const t=e;class i extends t.DrawerBase{constructor(e){super(e),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return e.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),i=this._calculateCanvasSize();return t.width=i.x,t.height=i.y,t}draw(e){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const t of e)0!==t.opacity&&this._drawTiles(t)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(e){return!0}setImageSmoothingEnabled(e){this._imageSmoothingEnabled=!!e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(t){var i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(e,t,i,n){this.viewer.raiseEvent("tile-drawing",{tiledImage:e,context:t,tile:i,rendered:n})}_prepareNewFrame(){var e=this._calculateCanvasSize();if((this.canvas.width!==e.x||this.canvas.height!==e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(e,t){var i=this._getContext(e);if(t)i.clearRect(t.x,t.y,t.width,t.height);else{var n=i.canvas;i.clearRect(0,0,n.width,n.height)}}_drawTiles(t){var i=t.getTilesToDraw().map((e=>e.tile));if(0!==t.opacity&&(0!==i.length||t.placeholderFillStyle)){var a,s,l,c=i[0];c&&(a=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&t.source.hasTransparency(c.context2D,c.getUrl(),c.ajaxHeaders,c.postData));var u,h=this.viewport.getZoom(!0),d=t.viewportToImageZoom(h);i.length>1&&d>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&(a=!0,s=c.getScaleForEdgeSmoothing(),l=c.getTranslationForEdgeSmoothing(s,this._getCanvasSize(!1),this._getCanvasSize(!0))),a&&(s||(u=(u=this.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox()).times(e.pixelDensityRatio)),this._clear(!0,u)),s||this._setRotations(t,a);var p=!1;if(t._clip){this._saveContext(a);var f=t.imageToViewportRectangle(t._clip,!0);f=f.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var m=this.viewportToDrawerRectangle(f);s&&(m=m.times(s)),l&&(m=m.translate(l)),this._setClip(m,a),p=!0}if(t._croppingPolygons){var g=this;p||this._saveContext(a);try{var _=t._croppingPolygons.map((function(e){return e.map((function(e){var i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(-t.getRotation(!0),t._getRotationPoint(!0)),n=g.viewportCoordToDrawerCoord(i);return s&&(n=n.times(s)),l&&(n=n.plus(l)),n}))}));this._clipWithPolygons(_,a)}catch(t){e.console.error(t)}p=!0}if(t._hasOpaqueTile=!1,t.placeholderFillStyle&&!1===t._hasOpaqueTile){let e=this.viewportToDrawerRectangle(t.getBoundsNoRotate(!0));s&&(e=e.times(s)),l&&(e=e.translate(l));let i=null;i="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,this.context):t.placeholderFillStyle,this._drawRectangle(e,i,a)}var v=function(t){if("number"==typeof t)return o(t);if(!t||!e.Browser)return n;var i=t[e.Browser.vendor];return r(i)&&(i=t["*"]),o(i)}(t.subPixelRoundingForTransparency),y=!1;v===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?y=!0:v===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(y=!(this.viewer&&this.viewer.isAnimating()));for(var A=0;A<i.length;A++)c=i[A],this._drawTile(c,t,a,s,l,y,t.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:c});p&&this._restoreContext(a),s||(t.getRotation(!0)%360!=0&&this._restoreRotationChanges(a),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(a)),a&&(s&&this._setRotations(t),this.blendSketch({opacity:t.opacity,scale:s,translate:l,compositeOperation:t.compositeOperation,bounds:u}),s&&(t.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(t,i),this._raiseTiledImageDrawnEvent(t,i)}}_drawDebugInfo(t,i){if(t.debugMode)for(var n=i.length-1;n>=0;n--){var r=i[n];try{this._drawDebugInfoOnTile(r,i.length,n,t)}catch(t){e.console.error(t)}}}_clipWithPolygons(e,t){var i=this._getContext(t);i.beginPath();for(const n of e)for(const[e,t]of n.entries())i[0===e?"moveTo":"lineTo"](t.x,t.y);i.clip()}_drawTile(t,i,n,r,o,a,s){e.console.assert(t,"[Drawer._drawTile] tile is required"),e.console.assert(i,"[Drawer._drawTile] drawingHandler is required");var l=this._getContext(n);r=r||1,this._drawTileToCanvas(t,l,i,r,o,a,s)}_drawTileToCanvas(t,i,n,r,o,a,s){var l,c,u,h=t.position.times(e.pixelDensityRatio),d=t.size.times(e.pixelDensityRatio);t.context2D||t.cacheImageRecord?(l=t.getCanvasContext(),t.loaded&&l?(i.save(),"number"==typeof r&&1!==r&&(h=h.times(r),d=d.times(r)),o instanceof e.Point&&(h=h.plus(o)),1===i.globalAlpha&&t.hasTransparency&&(a&&(h.x=Math.round(h.x),h.y=Math.round(h.y),d.x=Math.round(d.x),d.y=Math.round(d.y)),i.clearRect(h.x,h.y,d.x,d.y)),this._raiseTileDrawingEvent(n,i,t,l),t.sourceBounds?(c=Math.min(t.sourceBounds.width,l.canvas.width),u=Math.min(t.sourceBounds.height,l.canvas.height)):(c=l.canvas.width,u=l.canvas.height),i.translate(h.x+d.x/2,0),t.flipped&&i.scale(-1,1),i.drawImage(l.canvas,0,0,c,u,-d.x/2,h.y,d.x,d.y),i.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",t.toString())):e.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",t.toString())}_getContext(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var i=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var n=this;this.viewer.addHandler("rotate",(function e(){if(0!==n.viewport.getRotation()){n.viewer.removeHandler("rotate",e);var t=n._calculateSketchCanvasSize();n.sketchCanvas.width=t.x,n.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t}_saveContext(e){this._getContext(e).save()}_restoreContext(e){this._getContext(e).restore()}_setClip(e,t){var i=this._getContext(t);i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()}_drawRectangle(e,t,i){var n=this._getContext(i);n.save(),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height),n.restore()}blendSketch(t,i,n,r){var o=t;e.isPlainObject(o)||(o={opacity:t,scale:i,translate:n,compositeOperation:r}),t=o.opacity,r=o.compositeOperation;var a=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),a)a.x<0&&(a.width+=a.x,a.x=0),a.x+a.width>this.canvas.width&&(a.width=this.canvas.width-a.x),a.y<0&&(a.height+=a.y,a.y=0),a.y+a.height>this.canvas.height&&(a.height=this.canvas.height-a.y),this.context.drawImage(this.sketchCanvas,a.x,a.y,a.width,a.height,a.x,a.y,a.width,a.height);else{i=o.scale||1;var s=(n=o.translate)instanceof e.Point?n:new e.Point(0,0),l=0,c=0;if(n){var u=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;l=Math.round(u/2),c=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,s.x-l*i,s.y-c*i,(this.canvas.width+2*l)*i,(this.canvas.height+2*c)*i,-l,-c,this.canvas.width+2*l,this.canvas.height+2*c)}this.context.restore()}_drawDebugInfoOnTile(t,i,n,r){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[o],a.fillStyle=this.debugGridColor[o],this._setRotations(r),this._viewportFlipped&&this._flip({point:t.position.plus(t.size.divide(2))}),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var s=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;a.translate(s,l);const c=this.viewport.getRotation(!0);a.rotate(Math.PI/180*-c),a.translate(-s,-l),0===t.x&&0===t.y&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),a.restore()}_updateImageSmoothingEnabled(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(t){var i=this._getContext(t).canvas;return new e.Point(i.width,i.height)}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:t,saveContext:i}),i=!1),e.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:t,saveContext:i})}_offsetForRotation(t){var i=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._getContext(t.useSketch);n.save(),n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)}_flip(t){var i=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._getContext(t.useSketch);n.translate(i.x,0),n.scale(-1,1),n.translate(-i.x,0)}_restoreRotationChanges(e){this._getContext(e).restore()}_calculateCanvasSize(){var t=e.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:Math.round(i.x*t),y:Math.round(i.y*t)}}_calculateSketchCanvasSize(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}e.CanvasDrawer=i;var n=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function r(t){return t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function o(e){return r(e)?n:e}}(t),function(e){const t=e;t.WebGLDrawer=class extends t.DrawerBase{constructor(e){super(e),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._boundToTileReady=e=>this._tileReadyHandler(e),this._boundToImageUnloaded=e=>this._imageUnloadedHandler(e),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let e=this._gl;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(let n=0;n<t;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),Array.from(this._TextureMap.keys()).forEach((e=>{this._cleanupImageData(e)})),e.deleteBuffer(this._secondPass.bufferOutputPosition),e.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let i=e.getExtension("WEBGL_lose_context");i&&i.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let t=document.createElement("canvas"),i=e.isFunction(t.getContext)&&t.getContext("webgl"),n=i&&i.getExtension("WEBGL_lose_context");return n&&n.loseContext(),!!i}getType(){return"webgl"}minimumOverlapRequired(e){return e.isTainted()}_createDrawingElement(){let t=e.makeNeutralElement("canvas"),i=this._calculateCanvasSize();return t.width=i.x,t.height=i.y,t}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(t){let i=this._gl,n=this.viewport.getBoundsNoRotate(!0),r=this.viewport.getCenter(!0),o=this.viewport.getRotation(!0)*Math.PI/180,a=this.viewport.flipped?-1:1,s=e.Mat3.makeTranslation(-r.x,-r.y),l=e.Mat3.makeScaling(2/n.width*a,-2/n.height),c=e.Mat3.makeRotation(-o),u=l.multiply(c).multiply(s);i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let h=!1;t.forEach(((t,n)=>{if(t.isTainted()){h&&(this._outputContext.drawImage(this._renderingCanvas,0,0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT),h=!1);const e=this._getBackupCanvasDrawer();e.draw([t]),this._outputContext.drawImage(e.canvas,0,0)}else{let r=t.getTilesToDraw();if(t.placeholderFillStyle&&!1===t._hasOpaqueTile&&this._drawPlaceholder(t),0===r.length||0===t.getOpacity())return;let o=r[0],a=t.compositeOperation||this.viewer.compositeOperation||t._clip||t._croppingPolygons||t.debugMode,s=a||t.opacity<1||o.hasTransparency;a&&(h&&this._outputContext.drawImage(this._renderingCanvas,0,0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT)),i.useProgram(this._firstPass.shaderProgram),s?(i.bindFramebuffer(i.FRAMEBUFFER,this._glFrameBuffer),i.clear(i.COLOR_BUFFER_BIT)):i.bindFramebuffer(i.FRAMEBUFFER,null);let l=u,c=t.getRotation(!0);if(c%360!=0){let i=e.Mat3.makeRotation(-c*Math.PI/180),n=t.getBoundsNoRotate(!0).getCenter(),r=e.Mat3.makeTranslation(n.x,n.y),o=e.Mat3.makeTranslation(-n.x,-n.y),a=r.multiply(i).multiply(o);l=u.multiply(a)}let d=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(d<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${d}). This could happen\n                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let p=new Float32Array(12*d),f=new Array(d),m=new Array(d),g=new Array(d);for(let e=0;e<r.length;e++){let n=r[e].tile,o=e%d,a=o+1,s=n.getCanvasContext(),c=s?this._TextureMap.get(s.canvas):null;if(c||(this._tileReadyHandler({tile:n,tiledImage:t}),c=s?this._TextureMap.get(s.canvas):null),c&&this._getTileData(n,t,c,l,o,p,f,m,g),a===d||e===r.length-1){for(let e=0;e<=a;e++)i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,f[e]);i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),i.bufferData(i.ARRAY_BUFFER,p,i.DYNAMIC_DRAW),m.forEach(((e,t)=>{i.uniformMatrix3fv(this._firstPass.uTransformMatrices[t],!1,e)})),i.uniform1fv(this._firstPass.uOpacities,new Float32Array(g)),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),i.vertexAttribPointer(this._firstPass.aOutputPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),i.vertexAttribPointer(this._firstPass.aTexturePosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._firstPass.bufferIndex),i.vertexAttribPointer(this._firstPass.aIndex,1,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6*a)}}s&&(i.useProgram(this._secondPass.shaderProgram),i.bindFramebuffer(i.FRAMEBUFFER,null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,t.opacity),i.bindBuffer(i.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),i.vertexAttribPointer(this._secondPass.aTexturePosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),i.vertexAttribPointer(this._firstPass.aOutputPosition,2,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6)),h=!0,a&&(this._applyContext2dPipeline(t,r,n),h=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.clear(i.COLOR_BUFFER_BIT)),0===n&&this._raiseTiledImageDrawnEvent(t,r.map((e=>e.tile)))}})),h&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(e){}drawDebuggingRect(t){let i=this._outputContext;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}_getTextureDataFromTile(e){return e.getCanvasContext().canvas}_applyContext2dPipeline(e,t,i){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=0===i?null:e.compositeOperation||this.viewer.compositeOperation,e._croppingPolygons||e._clip?(this._renderToClippingCanvas(e),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),e.debugMode){const i=this.viewer.viewport.getFlip();i&&this._flip(),this._drawDebugInfo(t,e,i),i&&this._flip()}}_getTileData(t,i,n,r,o,a,s,l,c){let u=n.texture,h=n.position;a.set(h,12*o);let d=this._calculateOverlapFraction(t,i),p=t.positionedBounds.width*d.x,f=t.positionedBounds.height*d.y,m=t.positionedBounds.x+(0===t.x?0:p),g=t.positionedBounds.y+(0===t.y?0:f),_=t.positionedBounds.x+t.positionedBounds.width-(t.isRightMost?0:p)-m,v=t.positionedBounds.y+t.positionedBounds.height-(t.isBottomMost?0:f)-g,y=new e.Mat3([_,0,0,0,v,0,m,g,1]);if(t.flipped){let t=e.Mat3.makeTranslation(.5,0),i=e.Mat3.makeTranslation(-.5,0),n=t.multiply(e.Mat3.makeScaling(-1,1)).multiply(i);y=y.multiply(n)}let A=r.multiply(y);c[o]=t.opacity,s[o]=u,l[o]=A.values}_setupRenderer(){let t=this._gl;t||e.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._renderToTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._glFrameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._glFrameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._renderToTexture,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let e=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);const t=`\n            attribute vec2 a_output_position;\n            attribute vec2 a_texture_position;\n            attribute float a_index;\n\n            ${[...Array(e).keys()].map((e=>`uniform mat3 u_matrix_${e};`)).join("\n")} // create a uniform mat3 for each potential tile to draw\n\n            varying vec2 v_texture_position;\n            varying float v_image_index;\n\n            void main() {\n\n                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()\n\n                ${[...Array(e).keys()].map((e=>`${e>0?"else ":""}if(int(a_index) == ${e}) { transform_matrix = u_matrix_${e}; }`)).join("\n")}\n\n                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);\n\n                v_texture_position = a_texture_position;\n                v_image_index = a_index;\n            }\n            `,i=`\n            precision mediump float;\n\n            // our textures\n            uniform sampler2D u_images[${e}];\n            // our opacities\n            uniform float u_opacities[${e}];\n\n            // the varyings passed in from the vertex shader.\n            varying vec2 v_texture_position;\n            varying float v_image_index;\n\n            void main() {\n                // can't index directly with a variable, need to use a loop iterator hack\n                for(int i = 0; i < ${e}; ++i){\n                    if(i == int(v_image_index)){\n                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];\n                    }\n                }\n            }\n            `;let n=this._gl,r=this.constructor.initShaderProgram(n,t,i);n.useProgram(r),this._firstPass={shaderProgram:r,aOutputPosition:n.getAttribLocation(r,"a_output_position"),aTexturePosition:n.getAttribLocation(r,"a_texture_position"),aIndex:n.getAttribLocation(r,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map((e=>n.getUniformLocation(r,`u_matrix_${e}`))),uImages:n.getUniformLocation(r,"u_images"),uOpacities:n.getUniformLocation(r,"u_opacities"),bufferOutputPosition:n.createBuffer(),bufferTexturePosition:n.createBuffer(),bufferIndex:n.createBuffer()},n.uniform1iv(this._firstPass.uImages,[...Array(e).keys()]);let o=new Float32Array(12*e);for(let s=0;s<e;++s)o.set(Float32Array.from(this._unitQuad),12*s);n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),n.bufferData(n.ARRAY_BUFFER,o,n.STATIC_DRAW),n.enableVertexAttribArray(this._firstPass.aOutputPosition),n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),n.enableVertexAttribArray(this._firstPass.aTexturePosition),n.bindBuffer(n.ARRAY_BUFFER,this._firstPass.bufferIndex);let a=[...Array(this._glNumTextures).keys()].map((e=>Array(6).fill(e))).flat();n.bufferData(n.ARRAY_BUFFER,new Float32Array(a),n.STATIC_DRAW),n.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){let t=this._gl,i=this.constructor.initShaderProgram(t,"\n            attribute vec2 a_output_position;\n            attribute vec2 a_texture_position;\n\n            uniform mat3 u_matrix;\n\n            varying vec2 v_texture_position;\n\n            void main() {\n                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);\n\n                v_texture_position = a_texture_position;\n            }\n            ","\n            precision mediump float;\n\n            // our texture\n            uniform sampler2D u_image;\n\n            // the texCoords passed in from the vertex shader.\n            varying vec2 v_texture_position;\n\n            // the opacity multiplier for the image\n            uniform float u_opacity_multiplier;\n\n            void main() {\n                gl_FragColor = texture2D(u_image, v_texture_position);\n                gl_FragColor *= u_opacity_multiplier;\n            }\n            ");t.useProgram(i),this._secondPass={shaderProgram:i,aOutputPosition:t.getAttribLocation(i,"a_output_position"),aTexturePosition:t.getAttribLocation(i,"a_texture_position"),uMatrix:t.getUniformLocation(i,"u_matrix"),uImage:t.getUniformLocation(i,"u_image"),uOpacityMultiplier:t.getUniformLocation(i,"u_opacity_multiplier"),bufferOutputPosition:t.createBuffer(),bufferTexturePosition:t.createBuffer()},t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.STATIC_DRAW),t.enableVertexAttribArray(this._secondPass.aOutputPosition),t.bindBuffer(t.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),t.bufferData(t.ARRAY_BUFFER,this._unitQuad,t.DYNAMIC_DRAW),t.enableVertexAttribArray(this._secondPass.aTexturePosition);let n=e.Mat3.makeScaling(2,2).multiply(e.Mat3.makeTranslation(-.5,-.5));t.uniformMatrix3fv(this._secondPass.uMatrix,!1,n.values)}_resizeRenderer(){let e=this._gl,t=this._renderingCanvas.width,i=this._renderingCanvas.height;e.viewport(0,0,t,i),e.deleteTexture(this._renderToTexture),this._renderToTexture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._renderToTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this._glFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let e=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this.viewer.addHandler("resize",(function(){e._outputCanvas!==e.viewer.drawer.canvas&&(e._outputCanvas.style.width=e.viewer.drawer.canvas.clientWidth+"px",e._outputCanvas.style.height=e.viewer.drawer.canvas.clientHeight+"px");let t=e._calculateCanvasSize();e._outputCanvas.width===t.x&&e._outputCanvas.height===t.y||(e._outputCanvas.width=t.x,e._outputCanvas.height=t.y),e._renderingCanvas.style.width=e._outputCanvas.clientWidth+"px",e._renderingCanvas.style.height=e._outputCanvas.clientHeight+"px",e._renderingCanvas.width=e._clippingCanvas.width=e._outputCanvas.width,e._renderingCanvas.height=e._clippingCanvas.height=e._outputCanvas.height,e._resizeRenderer()}))}_makeQuadVertexBuffer(e,t,i,n){return new Float32Array([e,n,t,n,e,i,e,i,t,n,t,i])}_tileReadyHandler(t){let i=t.tile,n=t.tiledImage;if(n.isTainted())return;let r=i.getCanvasContext(),o=r&&r.canvas;if(o&&!e.isCanvasTainted(o)){if(!this._TextureMap.get(o)){let e,t,a,s=this._gl,l=s.createTexture(),c=n.source.tileOverlap;if(i.sourceBounds?(t=Math.min(i.sourceBounds.width,o.width)/o.width,a=Math.min(i.sourceBounds.height,o.height)/o.height):(t=1,a=1),c>0){let r=this._calculateOverlapFraction(i,n),o=(0===i.x?0:r.x)*t,s=(0===i.y?0:r.y)*a,l=(i.isRightMost?1:1-r.x)*t,c=(i.isBottomMost?1:1-r.y)*a;e=this._makeQuadVertexBuffer(o,l,s,c)}else e=1===t&&1===a?this._unitQuad:this._makeQuadVertexBuffer(0,t,0,a);let u={texture:l,position:e};this._TextureMap.set(o,u),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),this._uploadImageData(r)}}else n.isTainted()||(n.setTainted(!0),e.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(n,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."))}_calculateOverlapFraction(e,t){let i=t.source.tileOverlap,n=e.sourceBounds.width,r=e.sourceBounds.height;return{x:i/(n+((0===e.x?0:i)+(e.isRightMost?0:i))),y:i/(r+((0===e.y?0:i)+(e.isBottomMost?0:i)))}}_uploadImageData(t){let i=this._gl,n=t.canvas;try{if(!n)throw t;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)}catch(t){e.console.error("Error uploading image data to WebGL",t)}}_imageUnloadedHandler(e){let t=e.context2D.canvas;this._cleanupImageData(t)}_cleanupImageData(e){let t=this._TextureMap.get(e);this._TextureMap.delete(e),t&&this._gl.deleteTexture(t.texture)}_setClip(){}_renderToClippingCanvas(t){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}if(t._clip){let e=[{x:t._clip.x,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y},{x:t._clip.x+t._clip.width,y:t._clip.y+t._clip.height},{x:t._clip.x,y:t._clip.y+t._clip.height}].map((e=>{let i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(i)}));this._clippingContext.beginPath(),e.forEach(((e,t)=>{this._clippingContext[0===t?"moveTo":"lineTo"](e.x,e.y)})),this._clippingContext.clip(),this._setClip()}if(t._croppingPolygons){let e=t._croppingPolygons.map((e=>e.map((e=>{let i=t.imageToViewportCoordinates(e.x,e.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(i)}))));this._clippingContext.beginPath(),e.forEach((e=>{e.forEach(((e,t)=>{this._clippingContext[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const t=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(t.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-t.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(e){var t=!1;this.viewport.getRotation(!0)%360!=0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:t}),t=!1),e.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:e.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),saveContext:t})}_offsetForRotation(t){var i=t.point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._outputContext;n.save(),n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)}_flip(t){var i=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this._getCanvasCenter(),n=this._outputContext;n.translate(i.x,0),n.scale(-1,1),n.translate(-i.x,0)}_drawDebugInfo(t,i,n){for(var r=t.length-1;r>=0;r--){var o=t[r].tile;try{this._drawDebugInfoOnTile(o,t.length,r,i,n)}catch(t){e.console.error(t)}}}_drawDebugInfoOnTile(t,i,n,r,o){var a=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[a],s.fillStyle=this.debugGridColor[a],this._setRotations(r),o&&this._flip({point:t.position.plus(t.size.divide(2))}),s.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var l=(t.position.x+t.size.x/2)*e.pixelDensityRatio,c=(t.position.y+t.size.y/2)*e.pixelDensityRatio;s.translate(l,c);const u=this.viewport.getRotation(!0);s.rotate(Math.PI/180*-u),s.translate(-l,-c),0===t.x&&0===t.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),s.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),s.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),s.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),s.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),s.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),s.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),s.restore()}_drawPlaceholder(e){const t=e.getBounds(!0),i=this.viewportToDrawerRectangle(e.getBounds(!0)),n=this._outputContext;let r;r="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,n):e.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),n.fillStyle=r,n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y),n.fillRect(i.x,i.y,i.width,i.height),this._restoreRotationChanges()}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){this._outputContext.restore()}static initShaderProgram(t,i,n){function r(t,i,n){const r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(e.console.error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(r)}`),t.deleteShader(r),null)}const o=r(t,t.VERTEX_SHADER,i),a=r(t,t.FRAGMENT_SHADER,n),s=t.createProgram();return t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)?s:(e.console.error(`Unable to initialize the shader program: ${t.getProgramInfoLog(s)}`),null)}}}(t),function(e){e.Viewport=function(t){var i=arguments;i.length&&i[0]instanceof e.Point&&(t={containerSize:i[0],contentSize:i[1],config:i[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,t.initialDegrees=t.degrees,delete t.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:t.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(t){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(t)},resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,i){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,i)},_setContentBounds:function(t,i){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=t.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),n=i/this.getAspectRatio();return new e.Rect(t.x-i/2,t.y-n/2,i,n)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation(e))},getBoundsNoRotate:function(t){var i=this.getCenter(t),n=1/this.getZoom(t),r=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-r/2,n,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(e),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),i=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/i,t.y-=this._margins.top/i,t.width+=(this._margins.left+this._margins.right)/i,t.height+=(this._margins.top+this._margins.bottom)/i,t},getCenter:function(t){var i,n,r,o,a,s,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(i=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(n=this.getZoom()))/this.getAspectRatio(),a=new e.Rect(l.x-r/2,l.y-o/2,r,o),s=this._pixelFromPoint(this.zoomPoint,a).minus(i).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*n),c.plus(s)):c},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var t=this.viewportToViewerElementRectangle(e).getBoundingBox(),i=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),n=!1,r=!1;if(this.wrapHorizontal);else{var o,a,s,l=t.x+t.width,c=i.x+i.width;o=t.width>i.width?this.visibilityRatio*i.width:this.visibilityRatio*t.width,a=i.x-l+o,s=c-t.x-o,o>i.width?(t.x+=(a+s)/2,n=!0):s<0?(t.x+=s,n=!0):a>0&&(t.x+=a,n=!0)}if(this.wrapVertical);else{var u,h,d,p=t.y+t.height,f=i.y+i.height;u=t.height>i.height?this.visibilityRatio*i.height:this.visibilityRatio*t.height,h=i.y-p+u,d=f-t.y-u,u>i.height?(t.y+=(h+d)/2,r=!0):d<0?(t.y+=d,r=!0):h>0&&(t.y+=h,r=!0)}var m=n||r,g=m?this.viewerElementToViewportRectangle(t):e.clone();return g.xConstrained=n,g.yConstrained=r,g.constraintApplied=m,g},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),i=this._applyZoomConstraints(t);t!==i&&this.zoomTo(i,this.zoomPoint,e);var n=this.getConstrainedBounds(!1);return n.constraintApplied&&(this.fitBounds(n,e),this._raiseConstraintsEvent(e)),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,i){var n=(i=i||{}).immediately||!1,r=i.constraints||!1,o=this.getAspectRatio(),a=t.getCenter(),s=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();s.getAspectRatio()>=o?s.height=s.width/o:s.width=s.height*o,s.x=a.x-s.width/2,s.y=a.y-s.height/2;var l=1/s.width;if(n)return this.panTo(a,!0),this.zoomTo(l,null,!0),r&&this.applyConstraints(!0),this;var c=this.getCenter(!0),u=this.getZoom(!0);this.panTo(c,!0),this.zoomTo(u,null,!0);var h=this.getBounds(),d=this.getZoom();if(0===d||Math.abs(l/d-1)<1e-8)return this.zoomTo(l,null,!0),this.panTo(a,n),r&&this.applyConstraints(!1),this;if(r){this.panTo(a,!1),l=this._applyZoomConstraints(l),this.zoomTo(l,null,!1);var p=this.getConstrainedBounds();this.panTo(c,!0),this.zoomTo(u,null,!0),this.fitBounds(p)}else{var f=s.rotate(-this.getRotation()).getTopLeft().times(l).minus(h.getTopLeft().times(d)).divide(l-d);this.zoomTo(l,f,n)}return this},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var i=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,t)},fitHorizontally:function(t){var i=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,i){var n=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(t),i)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,i){return this.zoomTo(this.zoomSpring.target.value*e,t,i)},zoomTo:function(t,i,n){var r=this;return this.zoomPoint=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n?this._adjustCenterSpringsForZoomPoint((function(){r.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:i,immediately:n}),this},setRotation:function(e,t){return this.rotateTo(e,null,t)},getRotation:function(e){return e?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(e,t,i){return this.rotateTo(e,t,i)},rotateTo:function(t,i,n){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===t&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n)if(this.rotationPivot){if(!(t-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(t)}else this.degreesSpring.resetTo(t);else{var r=e.positiveModulo(this.degreesSpring.current.value,360),o=e.positiveModulo(t,360),a=o-r;a>180?o-=360:a<-180&&(o+=360);var s=r-o;this.degreesSpring.resetTo(t+s),this.degreesSpring.springTo(t)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t,immediately:!!n,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(e,t,i){return this.rotateTo(this.degreesSpring.target.value+e,t,i)},resize:function(e,t){var i,n=this.getBoundsNoRotate(),r=n;this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(i=e.x/this.containerSize.x,r.width=n.width*i,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t});var o=this.fitBounds(r,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:e,maintain:t}),o},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,t||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue()},_rotateAboutPivot:function(e){var t=!0===e,i=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),t?this.degreesSpring.update():this.degreesSpring.resetTo(e);var n=this.degreesSpring.current.value-this._oldDegrees,r=i.rotate(-1*n).times(-1);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y)},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var i=this.pixelFromPoint(this.zoomPoint,!0).minus(t),n=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation(t)),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation(t))},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,i){return t.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(!0),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,i){var n=this.getBoundsNoRotate(i);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(t),this.getCenter(t))},_viewportToImageDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/n,i*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(t,i){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,i,!0)}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*n,i/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(t,i){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,i,!0)}var r=this._imageToViewportDelta(t,i);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===a)return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,i,n,r,!0)}var s=this.imageToViewportCoordinates(o.x,o.y),l=this._imageToViewportDelta(o.width,o.height);return new e.Rect(s.x,s.y,l.x,l.y,o.degrees)},viewportToImageRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===a)return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,i,n,r,!0)}var s=this.viewportToImageCoordinates(o.x,o.y),l=this._viewportToImageDelta(o.width,o.height);return new e.Rect(s.x,s.y,l.x,l.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===i)return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}var n=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(1===i)return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.console.assert(!isNaN(t),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),isNaN(t)||(this.maxZoomPixelRatio=t,i&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(n))}}}(t),function(e){e.TiledImage=function(i){this._initialized=!1,e.console.assert(i.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(i.drawer,"[TiledImage] options.drawer is required"),e.console.assert(i.viewer,"[TiledImage] options.viewer is required"),e.console.assert(i.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(i.source,"[TiledImage] options.source is required"),e.console.assert(!i.clip||i.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=i.tileCache,delete i.tileCache,this._drawer=i.drawer,delete i.drawer,this._imageLoader=i.imageLoader,delete i.imageLoader,i.clip instanceof e.Rect&&(this._clip=i.clip.clone()),delete i.clip;var n=i.x||0;delete i.x;var r=i.y||0;delete i.y,this.normHeight=i.source.dimensions.y/i.source.dimensions.x,this.contentAspectX=i.source.dimensions.x/i.source.dimensions.y;var o=1;i.width?(o=i.width,delete i.width,i.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete i.height)):i.height&&(o=i.height/this.normHeight,delete i.height);var a=i.fitBounds;delete i.fitBounds;var s=i.fitBoundsPlacement||t.Placement.CENTER;delete i.fitBoundsPlacement;var l=i.degrees||0;delete i.degrees;var c=i.ajaxHeaders;delete i.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:e.DEFAULT_SETTINGS.maxTilesPerFrame},i),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),a&&this.fitBounds(a,s,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(c,!1),this._initialized=!0},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(e){let t=this._xSpring.update(),i=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update(),o=t||i||n||r||this._needsUpdate;if(o||e||!this._fullyLoaded){let e=this._updateLevelsForViewport();this._setFullyLoaded(e)}return this._needsUpdate=!1,!!o&&(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0)},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(e){this._isTainted=e},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var i=this.getBoundsNoRotate(t);if(this._clip){var n=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,r=this._clip.times(n);i=new e.Rect(i.x+r.x,i.y+r.y,r.width,r.height)}return i.rotate(this.getRotation(t),this._getRotationPoint(t))},getTileBounds:function(e,t,i){var n=this.source.getNumTiles(e),r=(n.x+t%n.x)%n.x,o=(n.y+i%n.y)%n.y,a=this.source.getTileBounds(e,r,o);return this.getFlip()&&(a.x=Math.max(0,1-a.x-a.width)),a.x+=(t-r)/n.x,a.y+=this._worldHeightCurrent/this._worldWidthCurrent*((i-o)/n.y),a},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var t=this.imageToWindowCoordinates(new e.Point(0,0)),i=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(i.x-t.x,i.y-t.y)},_viewportToImageDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),i*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,i,n){var r;return t instanceof e.Point?(n=i,r=t):r=new e.Point(t,i),r=r.rotate(-this.getRotation(n),this._getRotationPoint(n)),n?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,i/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,i,n){t instanceof e.Point&&(n=i,i=t.y,t=t.x);var r=this._imageToViewportDelta(t,i,n);return n?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(n),this._getRotationPoint(n))},imageToViewportRectangle:function(t,i,n,r,o){var a=t;a instanceof e.Rect?o=i:a=new e.Rect(t,i,n,r);var s=this.imageToViewportCoordinates(a.getTopLeft(),o),l=this._imageToViewportDelta(a.width,a.height,o);return new e.Rect(s.x,s.y,l.x,l.y,a.degrees+this.getRotation(o))},viewportToImageRectangle:function(t,i,n,r,o){var a=t;t instanceof e.Rect?o=i:a=new e.Rect(t,i,n,r);var s=this.viewportToImageCoordinates(a.getTopLeft(),o),l=this._viewportToImageDelta(a.width,a.height,o);return new e.Rect(s.x,s.y,l.x,l.y,a.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var i=e.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(t.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var i=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/i,(t.y-this._ySpring.current.value)/i,t.width/i,t.height/i,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var i=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(i&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(i)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0,this._needsUpdate=!0}i||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(t){return t.map((function(t){try{if((i=t)instanceof e.Point||"number"==typeof i.x&&"number"==typeof i.y)return{x:t.x,y:t.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}var i}))})),this._needsDraw=!0}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(t,i,n){i=i||e.Placement.CENTER;var r=e.Placement.properties[i],o=this.contentAspectX,a=0,s=0,l=1,c=1;if(this._clip&&(o=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,c=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(a=this._clip.x/this._clip.height*t.height,s=this._clip.y/this._clip.height*t.height):(a=this._clip.x/this._clip.width*t.width,s=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var u=t.height/c,h=0;r.isHorizontallyCentered?h=(t.width-t.height*o)/2:r.isRight&&(h=t.width-t.height*o),this.setPosition(new e.Point(t.x-a+h,t.y-s),n),this.setHeight(u,n)}else{var d=t.width/l,p=0;r.isVerticallyCentered?p=(t.height-t.width/o)/2:r.isBottom&&(p=t.height-t.width/o),this.setPosition(new e.Point(t.x-a,t.y-s+p),n),this.setWidth(d,n)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(e){this.flipped=e},get flipped(){return this._flipped},set flipped(e){let t=this._flipped!==!!e;this._flipped=!!e,t&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(e){let t=this._wrapHorizontal!==!!e;this._wrapHorizontal=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(e){let t=this._wrapVertical!==!!e;this._wrapVertical=!!e,this._initialized&&t&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(e){this._debugMode=!!e,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(e){this.opacity=e},get opacity(){return this._opacity},set opacity(e){e!==this.opacity&&(this._opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(0===this._opacity&&!this._preload)return!1;var e=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var t=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));e=e.intersection(t)}return e},getTilesToDraw:function(){let e=this._tilesToDraw.flat();return this._updateTilesInViewport(e),e=this._tilesToDraw.flat(),e.forEach((e=>{e.tile.beingDrawn=!0})),this._lastDrawn=e,e},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(e){e!==this._compositeOperation&&(this._compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(e){this.compositeOperation=e},setAjaxHeaders:function(t,i){null===t&&(t={}),e.isPlainObject(t)?(this._ownAjaxHeaders=t,this._updateAjaxHeaders(i)):console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},_updateAjaxHeaders:function(t){if(void 0===t&&(t=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,t){var i,n,r,o;for(var a in this.tilesMatrix)for(var s in i=this.source.getNumTiles(a),this.tilesMatrix[a])for(var l in n=(i.x+s%i.x)%i.x,this.tilesMatrix[a][s])if(r=(i.y+l%i.y)%i.y,(o=this.tilesMatrix[a][s][l]).loadWithAjax=this.loadTilesWithAjax,o.loadWithAjax){var c=this.source.getTileAjaxHeaders(a,n,r);o.ajaxHeaders=e.extend({},this.ajaxHeaders,c)}else o.ajaxHeaders=null;for(var u=0;u<this._imageLoader.jobQueue.length;u++){var h=this._imageLoader.jobQueue[u];h.loadWithAjax=h.tile.loadWithAjax,h.ajaxHeaders=h.tile.loadWithAjax?h.tile.ajaxHeaders:null}}},_setScale:function(e,t){var i=this._scaleSpring.target.value===e;if(t){if(i&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(i)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}i||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,i=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return i=Math.max(i,this.source.minLevel||0),{lowestLevel:e=Math.min(e,i),highestLevel:i}},_updateLevelsForViewport:function(){var t=this._getLevelsInterval(),i=t.lowestLevel,n=t.highestLevel,r=[],o=this.getDrawArea(),a=e.now();if(this._lastDrawn.forEach((e=>{e.tile.beingDrawn=!1})),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!o)return this._needsDraw=!1,this._fullyLoaded;var s=new Array(n-i+1);for(let e=0,y=n;y>=i;y--,e++)s[e]=y;for(let e=n+1;e<=this.source.maxLevel;e++){var l=this.tilesMatrix[e]&&this.tilesMatrix[e][0]&&this.tilesMatrix[e][0][0];if(l&&l.isBottomMost&&l.isRightMost&&l.loaded){s.push(e);break}}let c=!1;for(let e=0;e<s.length;e++){let t=s[e];var u=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t),!0).x*this._scaleSpring.current.value;if(e===s.length-1||u>=this.minPixelRatio)c=!0;else if(!c)continue;var h=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(t),!1).x*this._scaleSpring.current.value,d=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,p=this.immediateRender?1:d,f=Math.min(1,(u-.5)/.5),m=p/Math.abs(p-h),g=this._updateLevel(t,f,m,o,a,r);r=g.bestTiles;var _=g.updatedTiles.filter((e=>e.loaded)),v=function(e,t,i){return function(n){return{tile:n,level:e,levelOpacity:t,currentTime:i}}}(t,f,a);if(this._tilesToDraw[t]=_.map(v),this._providesCoverage(this.coverage,t))break}return r&&r.length>0?(r.forEach((function(e){e&&!e.context2D&&this._loadTile(e,a)}),this),this._needsDraw=!0,!1):0===this._tilesLoading},_updateTilesInViewport:function(t){let i=e.now(),n=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let r=t.length?t[0].level:0;if(!this.getDrawArea())return;function o(e){let t=e.tile;if(t&&t.loaded){let o=n._blendTile(t,t.x,t.y,e.level,e.levelOpacity,i,r);n._isBlending=n._isBlending||o,n._needsDraw=n._needsDraw||o||n._wasBlending}}let a=0;for(let e=0;e<t.length;e++){let i=t[e];o(i),this._providesCoverage(this.coverage,i.level)&&(a=Math.max(a,i.level))}if(a>0)for(let e in this._tilesToDraw)e<a&&delete this._tilesToDraw[e]},_blendTile:function(e,t,i,n,r,o,a){let s,l,c=1e3*this.blendTime;return e.blendStart||(e.blendStart=o),s=o-e.blendStart,l=c?Math.min(1,s/c):1,n===a&&(l=1,s=c),this.alwaysBlend&&(l*=r),e.opacity=l,1===l&&(this._setCoverage(this.coverage,n,t,i,!0),this._hasOpaqueTile=!0),s<c},_updateLevel:function(e,t,i,n,r,o){var a=n.getBoundingBox().getTopLeft(),s=n.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:e,opacity:t,visibility:i,drawArea:n,topleft:a,bottomright:s,currenttime:r,best:o}),this._resetCoverage(this.coverage,e),this._resetCoverage(this.loadingCoverage,e);var l=this._getCornerTiles(e,a,s),c=l.topLeft,u=l.bottomRight,h=this.source.getNumTiles(e),d=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(u.x+=1,this.wrapHorizontal||(u.x=Math.min(u.x,h.x-1)));for(var p=Math.max(0,(u.x-c.x)*(u.y-c.y)),f=new Array(p),m=0,g=c.x;g<=u.x;g++)for(var _=c.y;_<=u.y;_++){var v;if(this.getFlip()){var y=(h.x+g%h.x)%h.x;v=g+h.x-y-y-1}else v=g;if(null!==n.intersection(this.getTileBounds(e,v,_))){var A=this._updateTile(v,_,e,i,d,h,r,o);o=A.bestTiles,f[m]=A.tile,m+=1}}return{bestTiles:o,updatedTiles:f}},_positionTile:function(t,i,n,r,o){var a=t.bounds.getTopLeft();a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value,a.x+=this._xSpring.current.value,a.y+=this._ySpring.current.value;var s=t.bounds.getSize();s.x*=this._scaleSpring.current.value,s.y*=this._scaleSpring.current.value,t.positionedBounds.x=a.x,t.positionedBounds.y=a.y,t.positionedBounds.width=s.x,t.positionedBounds.height=s.y;var l=n.pixelFromPointNoRotate(a,!0),c=n.pixelFromPointNoRotate(a,!1),u=n.deltaPixelsFromPointsNoRotate(s,!0),h=n.deltaPixelsFromPointsNoRotate(s,!1),d=c.plus(h.divide(2)),p=r.squaredDistanceTo(d);this.viewer.drawer.minimumOverlapRequired(this)&&(i||(u=u.plus(new e.Point(1,1))),t.isRightMost&&this.wrapHorizontal&&(u.x+=.75),t.isBottomMost&&this.wrapVertical&&(u.y+=.75)),t.position=l,t.size=u,t.squaredDistance=p,t.visibility=o},_updateTile:function(e,t,i,n,r,o,a,s){var l=this._getTile(e,t,i,a,o);this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:l}),this._setCoverage(this.coverage,i,e,t,!1);var c=l.loaded||l.loading||this._isCovered(this.loadingCoverage,i,e,t);if(this._setCoverage(this.loadingCoverage,i,e,t,c),!l.exists)return{bestTiles:s,tile:l};if(l.loaded&&1===l.opacity&&this._setCoverage(this.coverage,i,e,t,!0),this._positionTile(l,this.source.tileOverlap,this.viewport,r,n),!l.loaded)if(l.context2D)this._setTileLoaded(l);else{var u=this._tileCache.getImageRecord(l.cacheKey);u&&this._setTileLoaded(l,u.getData())}return l.loading?this._tilesLoading++:c||(s=this._compareTiles(s,l,this.maxTilesPerFrame)),{bestTiles:s,tile:l}},_getCornerTiles:function(t,i,n){var r,o,a,s;this.wrapHorizontal?(r=e.positiveModulo(i.x,1),o=e.positiveModulo(n.x,1)):(r=Math.max(0,i.x),o=Math.min(1,n.x));var l=1/this.source.aspectRatio;this.wrapVertical?(a=e.positiveModulo(i.y,l),s=e.positiveModulo(n.y,l)):(a=Math.max(0,i.y),s=Math.min(l,n.y));var c=this.source.getTileAtPoint(t,new e.Point(r,a)),u=this.source.getTileAtPoint(t,new e.Point(o,s)),h=this.source.getNumTiles(t);return this.wrapHorizontal&&(c.x+=h.x*Math.floor(i.x),u.x+=h.x*Math.floor(n.x)),this.wrapVertical&&(c.y+=h.y*Math.floor(i.y/l),u.y+=h.y*Math.floor(n.y/l)),{topLeft:c,bottomRight:u}},_getTile:function(t,i,n,r,o){var a,s,l,c,u,h,d,p,f,m,g=this.tilesMatrix,_=this.source;return g[n]||(g[n]={}),g[n][t]||(g[n][t]={}),g[n][t][i]&&!g[n][t][i].flipped==!this.flipped||(a=(o.x+t%o.x)%o.x,s=(o.y+i%o.y)%o.y,l=this.getTileBounds(n,t,i),c=_.getTileBounds(n,a,s,!0),u=_.tileExists(n,a,s),h=_.getTileUrl(n,a,s),d=_.getTilePostData(n,a,s),this.loadTilesWithAjax?(p=_.getTileAjaxHeaders(n,a,s),e.isPlainObject(this.ajaxHeaders)&&(p=e.extend({},this.ajaxHeaders,p))):p=null,f=_.getContext2D?_.getContext2D(n,a,s):void 0,m=new e.Tile(n,t,i,l,u,h,f,this.loadTilesWithAjax,p,c,d,_.getTileHashKey(n,a,s,h,p,d)),this.getFlip()?0===a&&(m.isRightMost=!0):a===o.x-1&&(m.isRightMost=!0),s===o.y-1&&(m.isBottomMost=!0),m.flipped=this.flipped,g[n][t][i]=m),(m=g[n][t][i]).lastTouchTime=r,m},_loadTile:function(e,t){var i=this;e.loading=!0,this._imageLoader.addJob({src:e.getUrl(),tile:e,source:this.source,postData:e.postData,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(n,r,o){i._onTileLoad(e,t,n,r,o)},abort:function(){e.loading=!1}})},_onTileLoad:function(t,i,n,r,o){return n?(t.exists=!0,i<this.lastResetTime?(e.console.warn("Ignoring tile %s loaded before reset: %s",t,t.getUrl()),void(t.loading=!1)):(a=this.source.getClosestLevel(),void this._setTileLoaded(t,n,a,o))):(e.console.error("Tile %s failed to load: %s - error: %s",t,t.getUrl(),r),this.viewer.raiseEvent("tile-load-failed",{tile:t,tiledImage:this,time:i,message:r,tileRequest:o}),t.loading=!1,void(t.exists=!1));var a},_setTileLoaded:function(t,i,n,r){var o=0,a=!1,s=this;function l(){return a&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),o++,c}function c(){0==--o&&(t.loading=!1,t.loaded=!0,t.hasTransparency=s.source.hasTransparency(t.context2D,t.getUrl(),t.ajaxHeaders,t.postData),t.context2D||s._tileCache.cacheTile({data:i,tile:t,cutoff:n,tiledImage:s}),s.viewer.raiseEvent("tile-ready",{tile:t,tiledImage:s,tileRequest:r}),s._needsDraw=!0)}var u=l();this.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:this,tileRequest:r,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),i},data:i,getCompletionCallback:l}),a=!0,u()},_compareTiles:function(e,t,i){return e?(e.push(t),this._sortTiles(e),e.length>i&&e.pop(),e):[t]},_sortTiles:function(e){e.sort((function(e,t){return null===e?1:null===t?-1:e.visibility===t.visibility?e.squaredDistance-t.squaredDistance:t.visibility-e.visibility}))},_providesCoverage:function(e,t,i,n){var r,o,a,s;if(!e[t])return!1;if(void 0===i||void 0===n){for(a in r=e[t])if(Object.prototype.hasOwnProperty.call(r,a))for(s in o=r[a])if(Object.prototype.hasOwnProperty.call(o,s)&&!o[s])return!1;return!0}return void 0===e[t][i]||void 0===e[t][i][n]||!0===e[t][i][n]},_isCovered:function(e,t,i,n){return void 0===i||void 0===n?this._providesCoverage(e,t+1):this._providesCoverage(e,t+1,2*i,2*n)&&this._providesCoverage(e,t+1,2*i,2*n+1)&&this._providesCoverage(e,t+1,2*i+1,2*n)&&this._providesCoverage(e,t+1,2*i+1,2*n+1)},_setCoverage:function(t,i,n,r,o){t[i]?(t[i][n]||(t[i][n]={}),t[i][n][r]=o):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",i)},_resetCoverage:function(e,t){e[t]={}}})}(t),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},i=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.data,"[ImageRecord] options.data is required"),this._tiles=[],t.create.apply(null,[this,t.data,t.ownerTile]),this._destroyImplementation=t.destroy.bind(null,this),this.getImage=t.getImage.bind(null,this),this.getData=t.getData.bind(null,this),this.getRenderedContext=t.getRenderedContext.bind(null,this)};i.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var i=0;i<this._tiles.length;i++)if(this._tiles[i]===t)return void this._tiles.splice(i,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){e.console.assert(n,"[TileCache.cacheTile] options is required"),e.console.assert(n.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(n.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(n.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=n.cutoff||0,o=this._tilesLoaded.length,a=this._imagesLoaded[n.tile.cacheKey];if(a||(n.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),n.data=n.image),e.console.assert(n.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),a=this._imagesLoaded[n.tile.cacheKey]=new i({data:n.data,ownerTile:n.tile,create:n.tiledImage.source.createTileCache,destroy:n.tiledImage.source.destroyTileCache,getImage:n.tiledImage.source.getTileCacheDataAsImage,getData:n.tiledImage.source.getTileCacheData,getRenderedContext:n.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),a.addTile(n.tile),n.tile.cacheImageRecord=a,this._imagesLoadedCount>this._maxImageCacheCount){for(var s,l,c,u,h,d,p=null,f=-1,m=null,g=this._tilesLoaded.length-1;g>=0;g--)(s=(d=this._tilesLoaded[g]).tile).level<=r||s.beingDrawn||(p?(u=s.lastTouchTime,l=p.lastTouchTime,h=s.level,c=p.level,(u<l||u===l&&h>c)&&(p=s,f=g,m=d)):(p=s,f=g,m=d));p&&f>=0&&(this._unloadTile(m),o=f)}this._tilesLoaded[o]=new t({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){var i;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n=0;n<this._tilesLoaded.length;++n)(i=this._tilesLoaded[n]).tiledImage===t&&(this._unloadTile(i),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var i=t.tile,n=t.tiledImage;let r=i.getCanvasContext&&i.getCanvasContext();i.unload(),i.cacheImageRecord=null;var o=this._imagesLoaded[i.cacheKey];o&&(o.removeTile(i),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[i.cacheKey],this._imagesLoadedCount--,r&&(r.canvas.width=0,r.canvas.height=0,n.viewer.raiseEvent("image-unloaded",{context2D:r,tile:i}))),n.viewer.raiseEvent("tile-unloaded",{tile:i,tiledImage:n}))}}}(t),function(e){e.World=function(t){var i=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,i){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(i=i||{}).index){var n=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(n,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,i){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==i,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(t);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(i,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:n,newIndex:i}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var i=e.indexOf(this._items,t);-1!==i&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var i=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<i.length;t++)e=i[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(e){for(var t=!1,i=0;i<this._items.length;i++)t=this._items[i].update(e)||t;return t},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach((e=>{this._needsDraw=e.setDrawn()||this._needsDraw}))},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var i,n=(t=t||{}).immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,a=t.columns||e.DEFAULT_SETTINGS.collectionColumns,s=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=s+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);i=!t.rows&&a?a:Math.ceil(this._items.length/o);var c,u,h,d,p,f=0,m=0;this.setAutoRefigureSizes(!1);for(var g=0;g<this._items.length;g++)g&&g%i==0&&("horizontal"===r?(m+=l,f=0):(f+=l,m=0)),d=(h=(u=(c=this._items[g]).getBounds()).width>u.height?s:s*(u.width/u.height))*(u.height/u.width),p=new e.Point(f+(s-h)/2,m+(s-d)/2),c.setPosition(p,n),c.setWidth(h,n),"horizontal"===r?f+=l:m+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var a=r.getClippedBounds().getBoundingBox(),s=a.x,l=a.y,c=a.x+a.width,u=a.y+a.height,h=1;h<this._items.length;h++)o=(r=this._items[h]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),a=r.getClippedBounds().getBoundingBox(),s=Math.min(s,a.x),l=Math.min(l,a.y),c=Math.max(c,a.x+a.width),u=Math.max(u,a.y+a.height);this._homeBounds=new e.Rect(s,l,c-s,u-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(t)&&this._contentSize.equals(i)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(t)}(Iw);const Bw=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Iw.exports);var Rw=Object.defineProperty,Pw=Object.getOwnPropertyDescriptor,kw=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?Pw(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&Rw(t,i,o),o};let Lw=class extends Ce{constructor(){super(...arguments),this.src2D="",this._imageFiles=[],this._currentImageIdx=-1,this._currentSyncRotationAngle=0,this._imageCenter=new Bw.Point(0,0),this._deltaX=0,this._deltaY=0,this._minZoomLevel=-1,this._lastDoublePressPointer={clientX:-1,clientY:-1,id:-1},this._lastDoublePressTimeStamp=0,this._isDown=!1,this._viewer=null,this._viewerHomeBounds=new Bw.Rect(0,0,0,0,0),this._checkIfZoomIsInvalid=xw((()=>{if(null==this._viewer)return;const e=this._viewer.viewport;e.getZoom(!0)<e.getMinZoom()&&(console.log("Zoom is invalid",e.getZoom(!0)),e.applyConstraints())}),250),this._checkIfCenterPosIsUpdated=xw((()=>{const[e,t]=this.getImageCenter();this._deltaX==e&&this._deltaY==t||(this._deltaX=e,this._deltaY=t,this.dispatchEvent(new CustomEvent("image-shifted",{detail:{deltaX:e,deltaY:t}})))}),15)}render(){return ie`
      <div id="image_viewer" @pointermove="${this._handlePointerMove}"></div>
      <div id="overlay"></div>
    `}firstUpdated(){const e=this.renderRoot.querySelector("#image_viewer");null!=e?(this._viewer=Bw({element:e,autoResize:!0,showFullPageControl:!1,showZoomControl:!1,showHomeControl:!1,showNavigator:!1,navigatorPosition:"TOP_LEFT",minZoomImageRatio:1,maxZoomLevel:100,imageSmoothingEnabled:!1,visibilityRatio:1,constrainDuringPan:!0,defaultZoomLevel:0,placeholderFillStyle:"#FF8800",preserveViewport:!0,loadTilesWithAjax:!0,imageLoaderLimit:1,zoomPerScroll:1.4,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsPen:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},gestureSettingsUnknown:{scrollToZoom:!0,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!1},preserveOverlays:!0}),console.log("Viewer 2D",this._viewer,this.clientHeight,this.clientWidth),this._viewer.addHandler("resize",this._handleImageResizeEvent.bind(this)),this._viewer.addHandler("tile-loaded",this._handleTileLoaded.bind(this)),this._viewer.addHandler("zoom",this._handleZoomChanged.bind(this)),this._viewer.addHandler("rotate",this._checkIfMinZoomChanged.bind(this)),this._viewer.addHandler("update-viewport",this._checkIfCenterPosIsUpdated.bind(this)),this._viewer.addHandler("canvas-press",function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=0;return function(){n++,1===n?t=window.setTimeout((()=>{n=0}),i):(window.clearTimeout(t),e(...arguments),n=0)}}(this._handleCanvasDoublePressEvent.bind(this))),this._viewer.addHandler("viewport-change",this._handleViewportChangedEvent.bind(this)),this._viewer.addOverlay(this.hotspotOverlay,new Bw.Point(0,0),Bw.Placement.CENTER),this.hotspotOverlay.style.opacity="0",new ww(this.parentElement,"pointerdown").on("single-click",this._handleSingleClickEvent.bind(this)),this.measurementTool.on("change-image-hotspot-visibility",(e=>this.hotspotOverlay.style.opacity=e?"1":"0")),this.measurementTool.on("update-image-hotspot-position-requested",this._updateImageHotspotPosition.bind(this))):console.log("coudn't find element #image_viewer")}connectWithSettings(e){e.imageRotation.on("rotation-angle-changed",this.rotateImage.bind(this))}resize(e,t,i){this.style.height=e+"px",this.style.width=t+"px",this.style.transform=i,this._checkIfZoomIsInvalid()}setImageFiles(e){this._imageFiles=e,console.log("Image Files has been set")}async loadNextImage(e){if(e>=this._imageFiles.length)return void console.log("Image with index",e,"cannot be loaded because only",this._imageFiles.length,"images exist");if(this._currentImageIdx==e)return;if(this._currentImageIdx=e,null==this._viewer)return;const t=await this.viewSettings.resolve2dFileURL(this._imageFiles[this._currentImageIdx]);this._viewer.open({type:"image",url:t}),console.log("Loaded image",t)}rotateImage(e){this._currentSyncRotationAngle!=e&&(this._currentSyncRotationAngle=e,null!=this._viewer&&(this._viewer.viewport.setRotation(this._currentSyncRotationAngle),this._checkIfZoomIsInvalid()))}updatePointerEventsState(e){var t;null==(t=this._viewer)||t.setMouseNavEnabled(!e)}zoomImage(e){null!=this._viewer&&this._viewer.viewport.getZoom()!=e&&(console.log("Zooom image, ",e),this._viewer.viewport.zoomTo(e,void 0,!0))}getZoomLevel(){return null==this._viewer?1:this._viewer.viewport.getZoom()}getImageCenter(){if(null==this._viewer)return[0,0];const e=this._viewer.viewport.imageToViewerElementCoordinates(this._imageCenter);return[.5*this.clientWidth-e.x,.5*this.clientHeight-e.y]}_handlePointerMove(e){if(null==this._viewer||this._viewer.isMouseNavEnabled()||e.pointerId!=this._lastDoublePressPointer.id||!this._isDown)return;const t=e.clientX-this._lastDoublePressPointer.clientX,i=e.clientY-this._lastDoublePressPointer.clientY;0===t&&0===i||(this._lastDoublePressPointer.clientX=e.clientX,this._lastDoublePressPointer.clientY=e.clientY,this.dispatchEvent(new CustomEvent("pointer-move-in-disable-mode",{detail:{dx:t,dy:i}})))}_handlePointerUpAfterDoublePress(e){this._isDown=!1,null==this._viewer||this._viewer.isMouseNavEnabled()||e.timeStamp-this._lastDoublePressTimeStamp>700&&this.dispatchEvent(new Event("double-press-completed"))}_updateImageHotspotPosition(e,t){console.log("Hotspot update-image-hotspot-position",e,t),null!=this._viewer&&this._viewer.updateOverlay(this.hotspotOverlay,this._viewer.viewport.imageToViewportCoordinates(e,t),Bw.Placement.CENTER)}_handleSingleClickEvent(e){if(null==this._viewer||!this.measurementTool.isEditModeActive)return void console.log("Single click event: ignoring, viewer null or measurement tool not active.");const t=this.parentElement.getBoundingClientRect();var i=this._viewer.viewport.pointFromPixel(new Bw.Point(e.clientX-t.x,e.clientY-t.y)),n=this._viewer.viewport.viewportToImageCoordinates(i);this.measurementTool.addPointFromImage(n.x,n.y),this._viewer.updateOverlay(this.hotspotOverlay,i,Bw.Placement.CENTER),console.log("Hotspot in image added")}_handleCanvasDoublePressEvent(e){this._isDown=!0;const t=e.originalEvent;this._lastDoublePressPointer={clientX:t.clientX,clientY:t.clientX,id:t.pointerId},this.dispatchEvent(new CustomEvent("double-press",{detail:{pointerEvent:t}})),null!=this._viewer&&(console.log("Add event handler"),this._lastDoublePressTimeStamp=t.timeStamp,this.parentElement.addEventListener("pointerup",this._handlePointerUpAfterDoublePress.bind(this),{once:!0}))}_handleViewportChangedEvent(){null!=this._viewer&&(this._viewerHomeBounds.equals(this._viewer.viewport.getHomeBounds())||(this._viewerHomeBounds=this._viewer.viewport.getHomeBounds(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:this._viewer.viewport.getZoom(!1)}}))))}_handleImageResizeEvent(){this._checkIfMinZoomChanged()}_handleTileLoaded(e){this._checkIfZoomIsInvalid(),this._checkIfMinZoomChanged(),this._checkIfCenterPosIsUpdated();const t=e.tiledImage.source.dimensions;this._imageCenter.x=.5*t.x,this._imageCenter.y=.5*t.y}_checkIfMinZoomChanged(){null!=this._viewer&&this._minZoomLevel!=this._viewer.viewport.getMinZoom()&&(this._minZoomLevel=this._viewer.viewport.getMinZoom(),console.log("emit min zoom changed",this._minZoomLevel),this.dispatchEvent(new CustomEvent("min-zoom-level-changed",{detail:{zoomLevel:this._minZoomLevel}})))}_handleZoomChanged(e){null!=this._viewer&&1!=e.immediately?(console.log("image zoom changed 1",e.zoom),this._checkIfZoomIsInvalid(),this.dispatchEvent(new CustomEvent("image-zoom-changed",{detail:{zoomLevel:e.zoom}}))):console.log("Return zoom",e.zoom)}};Lw.styles=x`
    :host {
      background-color: black;
    }

    #image_viewer {
      height: inherit;
      width: inherit;
      background-color: transparent;
    }

    .hotspot {
      display: block;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: none;
      background-color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
      cursor: pointer;
      transition: opacity 0.3s;
      position: relative;
      font-size: 12px;
      padding: 0;
    }

    #overlay {
      display: none;
      background-color: transparent;
      opacity: 0;
      width: 20px;
      height: 20px;
      border-radius: 20px;
      border: 3px solid rgb(0, 128, 200);
    }
  `,kw([Ie()],Lw.prototype,"src2D",2),kw([Be("#image_viewer")],Lw.prototype,"parentElement",2),kw([Be("#overlay")],Lw.prototype,"hotspotOverlay",2),kw([Ie({type:Object})],Lw.prototype,"measurementTool",2),kw([Ie({type:Object})],Lw.prototype,"viewSettings",2),Lw=kw([Te("viewer-2d")],Lw);const Dw=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return{_$litDirective$:e,values:i}};let Nw=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}},Ow=class extends Nw{constructor(e){if(super(e),this.et=oe,2!==e.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===oe||null==e)return this.ft=void 0,this.et=e;if(e===re)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.ft;this.et=e;const t=[e];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}};Ow.directiveName="unsafeHTML",Ow.resultType=1;const Fw=Dw(Ow);let Uw=class extends Ow{};Uw.directiveName="unsafeSVG",Uw.resultType=2;const zw=Dw(Uw),Hw=()=>{const e=document.createElement("meta");return e.setAttribute("name","ui5-shared-resources"),e.setAttribute("content",""),e},Gw=(e,t)=>{const i=e.split(".");let n=typeof document>"u"?null:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,i=arguments.length>2?arguments[2]:void 0,n=document.querySelector(e);return n||(n=i?i():document.createElement(e),t.insertBefore(n,t.firstChild))}('meta[name="ui5-shared-resources"]',document.head,Hw);if(!n)return t;for(let r=0;r<i.length;r++){const e=i[r],o=r===i.length-1;Object.prototype.hasOwnProperty.call(n,e)||(n[e]=o?t:{}),n=n[e]}return n};var Vw=(e=>(e["SAP-icons"]="SAP-icons-v4",e.horizon="SAP-icons-v5",e["SAP-icons-TNT"]="tnt",e.BusinessSuiteInAppSymbols="business-suite",e))(Vw||{});const Qw=e=>Vw[e]?Vw[e]:e;var jw={},qw=jw.hasOwnProperty,Ww=jw.toString,$w=qw.toString,Xw=$w.call(Object),Yw=function(e){var t,i;return!(!e||"[object Object]"!==Ww.call(e)||(t=Object.getPrototypeOf(e))&&("function"!=typeof(i=qw.call(t,"constructor")&&t.constructor)||$w.call(i)!==Xw))},Kw=Object.create(null),Zw=function(e,t,i,n){var r,o,a,s,l,c,u=arguments[2]||{},h=3,d=arguments.length,p=arguments[0]||!1,f=arguments[1]?void 0:Kw;for("object"!=typeof u&&"function"!=typeof u&&(u={});h<d;h++)if(null!=(l=arguments[h]))for(s in l)r=u[s],a=l[s],"__proto__"!==s&&u!==a&&(p&&a&&(Yw(a)||(o=Array.isArray(a)))?(o?(o=!1,c=r&&Array.isArray(r)?r:[]):c=r&&Yw(r)?r:{},u[s]=Zw(p,arguments[1],c,a)):a!==f&&(u[s]=a));return u};const Jw=function(e,t){return Zw(!0,!1,...arguments)};let eS=class{constructor(){this._eventRegistry=new Map}attachEvent(e,t){const i=this._eventRegistry,n=i.get(e);Array.isArray(n)?n.includes(t)||n.push(t):i.set(e,[t])}detachEvent(e,t){const i=this._eventRegistry,n=i.get(e);if(!n)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&i.delete(e)}fireEvent(e,t){const i=this._eventRegistry.get(e);return i?i.map((e=>e.call(this,t))):[]}fireEventAsync(e,t){return Promise.all(this.fireEvent(e,t))}isHandlerAttached(e,t){const i=this._eventRegistry.get(e);return!!i&&i.includes(t)}hasListeners(e){return!!this._eventRegistry.get(e)}},tS=class{constructor(){}};const iS=new Map,nS=new Map,rS=new Map,oS=new eS,aS=e=>`componentFeatureLoad_${e}`,sS=e=>iS.get(e),lS=e=>nS.get(e),cS="sap_horizon",uS=["sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_horizon_exp","sap_horizon_dark_exp","sap_horizon_hcb_exp","sap_horizon_hcw_exp"],hS="en",dS="en",pS=["ar","ar_EG","ar_SA","bg","ca","cnr","cs","da","de","de_AT","de_CH","el","el_CY","en","en_AU","en_GB","en_HK","en_IE","en_IN","en_NZ","en_PG","en_SG","en_ZA","es","es_AR","es_BO","es_CL","es_CO","es_MX","es_PE","es_UY","es_VE","et","fa","fi","fr","fr_BE","fr_CA","fr_CH","fr_LU","he","hi","hr","hu","id","it","it_CH","ja","kk","ko","lt","lv","ms","mk","nb","nl","nl_BE","pl","pt","pt_PT","ro","ru","ru_UA","sk","sl","sr","sr_Latn","sv","th","tr","uk","vi","zh_CN","zh_HK","zh_SG","zh_TW"],fS=typeof document>"u",mS=()=>fS?"":window.location.href;var gS=(e=>(e.Full="full",e.Basic="basic",e.Minimal="minimal",e.None="none",e))(gS||{});const _S=new eS,vS=e=>{_S.attachEvent("configurationReset",e)};let yS=!1,AS={animationMode:gS.Full,theme:cS,themeRoot:void 0,rtl:void 0,language:void 0,timezone:void 0,calendarType:void 0,secondaryCalendarType:void 0,noConflict:!1,formatSettings:{},fetchDefaultLanguage:!1,defaultFontLoading:!0,enableDefaultTooltips:!0};const bS=new Map;bS.set("true",!0),bS.set("false",!1);const xS=(e,t,i)=>{const n=t.toLowerCase(),r=e.split(`${i}-`)[1];var o;bS.has(t)&&(t=bS.get(n)),"theme"===r?(AS.theme=(o=t,"theme"===r&&o.includes("@")?o.split("@")[0]:o),t&&t.includes("@")&&(AS.themeRoot=(e=>(e=>{let t;try{if(e.startsWith(".")||e.startsWith("/"))t=new URL(e,mS()).toString();else{const i=new URL(e),n=i.origin;t=n&&(e=>{const t=(()=>{const e=document.querySelector('META[name="sap-allowedThemeOrigins"]');return e&&e.getAttribute("content")})();return t&&t.split(",").some((t=>"*"===t||e===t.trim()))})(n)?i.toString():((e,t)=>{const i=new URL(e).pathname;return new URL(i,t).toString()})(i.toString(),mS())}return t.endsWith("/")||(t=`${t}/`),`${t}UI5/`}catch{}})(e.split("@")[1]))(t))):AS[r]=t},wS=()=>{typeof document>"u"||yS||(SS(),yS=!0)},SS=e=>{(()=>{const e=document.querySelector("[data-ui5-config]")||document.querySelector("[data-id='sap-ui-config']");let t;if(e){try{t=JSON.parse(e.innerHTML)}catch{console.warn("Incorrect data-sap-ui-config format. Please use JSON")}t&&(AS=Jw(AS,t))}})(),(()=>{const e=new URLSearchParams(fS?"":window.location.search);e.forEach(((e,t)=>{const i=t.split("sap-").length;0===i||i===t.split("sap-ui-").length||xS(t,e,"sap")})),e.forEach(((e,t)=>{t.startsWith("sap-ui")&&xS(t,e,"sap-ui")}))})(),(()=>{const e=sS("OpenUI5Support");if(!e||!e.isOpenUI5Detected())return;const t=e.getConfigurationSettingsObject();AS=Jw(AS,t)})()},CS={version:"2.4.0",major:2,minor:4,patch:0,suffix:"",isNext:!1,buildTime:1730643247};let ES={include:[/^ui5-/],exclude:[]};const TS=new Map,MS=e=>{if(!TS.has(e)){const t=ES.include.some((t=>e.match(t)))&&!ES.exclude.some((t=>e.match(t)));TS.set(e,t)}return TS.get(e)},IS=e=>{const t=`v${CS.version.replaceAll(".","-")}`;return e.replaceAll(/(--_?ui5)([^,:)\s]+)/g,`$1-${t}$2`)};let BS;const RS=new Map,PS=Gw("Runtimes",[]),kS=()=>BS,LS=(e,t)=>{const i=`${e},${t}`;if(RS.has(i))return RS.get(i);const n=PS[e],r=PS[t];if(!n||!r)throw new Error("Invalid runtime index supplied");if(n.isNext||r.isNext)return n.buildTime-r.buildTime;const o=n.major-r.major;if(o)return o;const a=n.minor-r.minor;if(a)return a;const s=n.patch-r.patch;if(s)return s;const l=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare(n.suffix,r.suffix);return RS.set(i,l),l},DS=Gw("Tags",new Map),NS=new Set;let OS,FS=new Map;const US=()=>[...NS.values()],zS=new Set,HS=new Set,GS=new eS,VS=new class{constructor(){this.list=[],this.lookup=new Set}add(e){this.lookup.has(e)||(this.list.push(e),this.lookup.add(e))}remove(e){this.lookup.has(e)&&(this.list=this.list.filter((t=>t!==e)),this.lookup.delete(e))}shift(){const e=this.list.shift();if(e)return this.lookup.delete(e),e}isEmpty(){return 0===this.list.length}isAdded(e){return this.lookup.has(e)}process(e){let t;const i=new Map;for(t=this.shift();t;){const n=i.get(t)||0;if(n>10)throw new Error("Web component processed too many times this task, max allowed is: 10");e(t),i.set(t,n+1),t=this.shift()}}};let QS,jS,qS,WS;const $S=async e=>{VS.add(e),await YS()},XS=e=>{GS.fireEvent("beforeComponentRender",e),HS.add(e),e._render()},YS=async()=>{WS||(WS=new Promise((e=>{window.requestAnimationFrame((()=>{VS.process(XS),WS=null,e(),qS||(qS=setTimeout((()=>{qS=void 0,VS.isEmpty()&&ZS()}),200))}))}))),await WS},KS=async()=>{await(()=>{const e=US().map((e=>customElements.whenDefined(e)));return Promise.all(e)})(),await(QS||(QS=new Promise((e=>{jS=e,window.requestAnimationFrame((()=>{VS.isEmpty()&&(QS=void 0,e())}))})),QS))},ZS=()=>{VS.isEmpty()&&jS&&(jS(),jS=void 0,QS=void 0)},JS=typeof document>"u",eC=(e,t)=>t?`${e}|${t}`:e,tC=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const r="string"==typeof e?e:e.content,o=kS(),a=new CSSStyleSheet;a.replaceSync(r),a._ui5StyleId=eC(t,i),n&&(a._ui5RuntimeIndex=o,a._ui5Theme=n),document.adoptedStyleSheets=[...document.adoptedStyleSheets,a]},iC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!!JS||!!document.adoptedStyleSheets.find((i=>i._ui5StyleId===eC(e,t)))},nC=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;iC(t,i)?function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;const r="string"==typeof e?e:e.content,o=kS(),a=document.adoptedStyleSheets.find((e=>e._ui5StyleId===eC(t,i)));if(a)if(n){const e=a._ui5RuntimeIndex;(a._ui5Theme!==n||void 0===(s=e)||1===LS(kS(),parseInt(s)))&&(a.replaceSync(r||""),a._ui5RuntimeIndex=String(o),a._ui5Theme=n)}else a.replaceSync(r||"");var s}(e,t,i,n):tC(e,t,i,n)},rC=new eS,oC="themeRegistered",aC=new Map,sC=new Map,lC=new Map,cC=new Set,uC=new Set,hC=(e,t,i)=>{var n;sC.set(`${e}/${t}`,i),cC.add(e),uC.add(t),n=t,rC.fireEvent(oC,n)},dC=async(e,t,i)=>{const n=`${e}_${t}_${i||""}`,r=aC.get(n);if(void 0!==r)return r;if(!uC.has(t)){const i=[...uC.values()].join(", ");return console.warn(`You have requested a non-registered theme ${t} - falling back to ${cS}. Registered themes are: ${i}`),pC(e,cS)}const[o,a]=await Promise.all([pC(e,t),i?pC(e,i,!0):void 0]),s=((e,t)=>{if(void 0===e)return t;if(void 0===t)return e;const i="string"==typeof t?t:t.content;return"string"==typeof e?`${e} ${i}`:{content:`${e.content} ${i}`,packageName:e.packageName,fileName:e.fileName}})(o,a);return s&&aC.set(n,s),s},pC=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(i?lC:sC).get(`${e}/${t}`);if(!n)return void(i||console.error(`Theme [${t}] not registered for package [${e}]`));let r;try{r=await n(t)}catch(t){return void console.error(e,t.message)}return r._||r},fC=()=>cC,mC=new Set,gC=()=>{const e=(()=>{let e=document.querySelector(".sapThemeMetaData-Base-baseLib")||document.querySelector(".sapThemeMetaData-UI5-sap-ui-core");if(e)return getComputedStyle(e).backgroundImage;e=document.createElement("span"),e.style.display="none",e.classList.add("sapThemeMetaData-Base-baseLib"),document.body.appendChild(e);let t=getComputedStyle(e).backgroundImage;return"none"===t&&(e.classList.add("sapThemeMetaData-UI5-sap-ui-core"),t=getComputedStyle(e).backgroundImage),document.body.removeChild(e),t})();if(!e||"none"===e)return;const t=(e=>{const t=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)$/i.exec(e);if(t&&t.length>=2){let e=t[1];if(e=e.replace(/\\"/g,'"'),"{"!==e.charAt(0)&&"}"!==e.charAt(e.length-1))try{e=decodeURIComponent(e)}catch{return void(mC.has("decode")||(console.warn("Malformed theme metadata string, unable to decodeURIComponent"),mC.add("decode")))}try{return JSON.parse(e)}catch{mC.has("parse")||(console.warn("Malformed theme metadata string, unable to parse JSON"),mC.add("parse"))}}})(e);return t?(e=>{let t,i;try{t=e.Path.match(/\.([^.]+)\.css_variables$/)[1],i=e.Extends[0]}catch{return void(mC.has("object")||(console.warn("Malformed theme metadata Object",e),mC.add("object")))}return{themeName:t,baseThemeName:i}})(t):void 0},_C=new eS;let vC;vS((()=>{vC=void 0}));const yC=()=>(void 0===vC&&(wS(),vC=AS.themeRoot),vC),AC="@ui5/webcomponents-theming",bC=async e=>{const t=await(async e=>{var t;const i=gC();if(i)return i;const n=sS("OpenUI5Support");if(n&&n.isOpenUI5Detected()){if(n.cssVariablesLoaded())return{themeName:null==(t=n.getConfigurationSettingsObject())?void 0:t.theme,baseThemeName:""}}else if(yC())return await(async e=>{const t=document.querySelector(`[sap-ui-webcomponents-theme="${e}"]`);var i;t&&document.head.removeChild(t),await((e,t)=>{const i=document.createElement("link");return i.type="text/css",i.rel="stylesheet",t&&Object.entries(t).forEach((e=>i.setAttribute(...e))),i.href=e,document.head.appendChild(i),new Promise((e=>{i.addEventListener("load",e),i.addEventListener("error",e)}))})((i=e,`${yC()}Base/baseLib/${i}/css_variables.css`),{"sap-ui-webcomponents-theme":e})})(e),gC()})(e);t&&e===t.themeName?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.adoptedStyleSheets=document.adoptedStyleSheets.filter((i=>i._ui5StyleId!==eC(e,t)))}("data-ui5-theme-properties",AC):await(async e=>{if(!fC().has(AC))return;const t=await dC(AC,e);t&&nC(t,"data-ui5-theme-properties",AC,e)})(e);const i=(n=e,uC.has(n)?e:t&&t.baseThemeName);var n;await(async(e,t)=>{const i=[...fC()].map((async i=>{if(i===AC)return;const n=await dC(i,e,t);n&&nC(n,`data-ui5-component-properties-${kS()}`,i)}));return Promise.all(i)})(i||cS,t&&t.themeName===e?e:void 0),(e=>{_C.fireEvent("themeLoaded",e)})(e)},xC={packageName:"@ui5/webcomponents-base",fileName:"FontFace.css",content:"@font-face{font-family:\"72\";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular.woff2?ui5-webcomponents) format(\"woff2\"),local(\"72\");unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:\"72full\";font-style:normal;font-weight:400;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Regular-full.woff2?ui5-webcomponents) format(\"woff2\"),local('72-full')}@font-face{font-family:\"72\";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:\"72full\";font-style:normal;font-weight:700;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72-Bold';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Boldfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Bold-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72-Light';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light.woff2?ui5-webcomponents) format(\"woff2\"),local('72-Light');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72-Lightfull';font-style:normal;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Light-full.woff2?ui5-webcomponents) format(\"woff2\")}@font-face{font-family:'72Mono';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular.woff2?ui5-webcomponents) format('woff2'),local('72Mono');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Monofull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Regular-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:'72Mono-Bold';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold.woff2?ui5-webcomponents) format('woff2'),local('72Mono-Bold');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Mono-Boldfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72Mono-Bold-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:\"72Black\";font-style:bold;font-weight:900;src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black.woff2?ui5-webcomponents) format(\"woff2\"),local('72Black');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}@font-face{font-family:'72Blackfull';src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-Black-full.woff2?ui5-webcomponents) format('woff2')}@font-face{font-family:\"72-SemiboldDuplex\";src:url(https://sdk.openui5.org/resources/sap/ui/core/themes/sap_horizon/fonts/72-SemiboldDuplex.woff2?ui5-webcomponents) format(\"woff2\"),local('72-SemiboldDuplex');unicode-range:U+00,U+0D,U+20-7E,U+A0-FF,U+131,U+152-153,U+161,U+178,U+17D-17E,U+192,U+237,U+2C6,U+2DC,U+3BC,U+1E9E,U+2013-2014,U+2018-201A,U+201C-201E,U+2020-2022,U+2026,U+2030,U+2039-203A,U+2044,U+20AC,U+2122}"},wC={packageName:"@ui5/webcomponents-base",fileName:"OverrideFontFace.css",content:"@font-face{font-family:'72override';unicode-range:U+0102-0103,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EB7,U+1EB8-1EC7,U+1EC8-1ECB,U+1ECC-1EE3,U+1EE4-1EF1,U+1EF4-1EF7;src:local('Arial'),local('Helvetica'),local('sans-serif')}"};let SC;vS((()=>{SC=void 0}));const CC={packageName:"@ui5/webcomponents-base",fileName:"SystemCSSVars.css",content:":root{--_ui5_content_density:cozy}.sapUiSizeCompact,.ui5-content-density-compact,[data-ui5-compact-size]{--_ui5_content_density:compact}"},EC=typeof document>"u",TC={get userAgent(){return EC?"":navigator.userAgent},get touch(){return!EC&&("ontouchstart"in window||navigator.maxTouchPoints>0)},get chrome(){return!EC&&/(Chrome|CriOS)/.test(TC.userAgent)},get firefox(){return!EC&&/Firefox/.test(TC.userAgent)},get safari(){return!EC&&!TC.chrome&&/(Version|PhantomJS)\/(\d+\.\d+).*Safari/.test(TC.userAgent)},get webkit(){return!EC&&/webkit/.test(TC.userAgent)},get windows(){return!EC&&-1!==navigator.platform.indexOf("Win")},get macOS(){return!EC&&!!navigator.userAgent.match(/Macintosh|Mac OS X/i)},get iOS(){return!(EC||!navigator.platform.match(/iPhone|iPad|iPod/)&&(!TC.userAgent.match(/Mac/)||!("ontouchend"in document)))},get android(){return!EC&&!TC.windows&&/Android/.test(TC.userAgent)},get androidPhone(){return!EC&&TC.android&&/(?=android)(?=.*mobile)/i.test(TC.userAgent)},get ipad(){return!EC&&(/ipad/i.test(TC.userAgent)||/Macintosh/i.test(TC.userAgent)&&"ontouchend"in document)},_isPhone:()=>(PC(),TC.touch&&!BC)};let MC,IC,BC;const RC=()=>{if(EC||!TC.windows)return!1;if(void 0===MC){const e=TC.userAgent.match(/Windows NT (\d+).(\d)/);MC=e?parseFloat(e[1]):0}return MC>=8},PC=()=>{if(EC)return!1;if(void 0===BC){if(TC.ipad)return void(BC=!0);if(TC.touch){if(RC())return void(BC=!0);if(TC.chrome&&TC.android)return void(BC=!/Mobile Safari\/[.0-9]+/.test(TC.userAgent));let e=window.devicePixelRatio?window.devicePixelRatio:1;return TC.android&&(()=>{if(EC||!TC.webkit)return!1;if(void 0===IC){const e=TC.userAgent.match(/(webkit)[ /]([\w.]+)/);IC=e?parseFloat(e[1]):0}return IC>=537.1})()&&(e=1),void(BC=Math.min(window.screen.width/e,window.screen.height/e)>=600)}BC=-1!==TC.userAgent.indexOf("Touch")||TC.android&&!TC.androidPhone}},kC=()=>TC.touch,LC=()=>TC.safari,DC=()=>TC._isPhone(),NC=()=>!EC&&(PC(),!((TC.touch||RC())&&BC||DC())||RC()),OC=()=>TC.iOS;let FC,UC=!1,zC=!1;const HC=new eS,GC=async()=>(void 0!==FC||(FC=new Promise((async e=>{if((()=>{if(void 0===BS){BS=PS.length;const e=CS;PS.push({...e,get scopingSuffix(){},get registeredTags(){return US()},get scopingRules(){return ES},alias:"",description:`Runtime ${BS} - ver ${e.version}`})}})(),typeof document>"u")return void e();var t;t=VC,rC.attachEvent(oC,t);const i=sS("OpenUI5Support"),n=!!i&&i.isOpenUI5Detected(),r=sS("F6Navigation");i&&await i.init(),r&&!n&&r.init(),await new Promise((e=>{document.body?e():document.addEventListener("DOMContentLoaded",(()=>{e()}))})),await bC(jC()),i&&i.attachListeners(),(()=>{const e=sS("OpenUI5Support");(!e||!e.isOpenUI5Detected())&&(()=>{const e=document.querySelector("head>style[data-ui5-font-face]");void 0===SC&&(wS(),SC=AS.defaultFontLoading),!SC||e||iC("data-ui5-font-face")||tC(xC,"data-ui5-font-face")})(),iC("data-ui5-font-face-override")||tC(wC,"data-ui5-font-face-override")})(),iC("data-ui5-system-css-vars")||tC(CC,"data-ui5-system-css-vars"),LC()&&OC()&&!UC&&(document.body.addEventListener("touchstart",(()=>{})),UC=!0),e(),zC=!0,HC.fireEvent("boot")}))),FC),VC=e=>{zC&&e===jC()&&bC(jC())};let QC;vS((()=>{QC=void 0}));const jC=()=>(void 0===QC&&(wS(),QC=AS.theme),QC);var qC=(e=>(e.SAPIconsV4="SAP-icons-v4",e.SAPIconsV5="SAP-icons-v5",e.SAPIconsTNTV2="tnt-v2",e.SAPIconsTNTV3="tnt-v3",e.SAPBSIconsV1="business-suite-v1",e.SAPBSIconsV2="business-suite-v2",e))(qC||{});const WC=new Map;WC.set("SAP-icons",{legacy:"SAP-icons-v4",sap_horizon:"SAP-icons-v5"}),WC.set("tnt",{legacy:"tnt-v2",sap_horizon:"tnt-v3"}),WC.set("business-suite",{legacy:"business-suite-v1",sap_horizon:"business-suite-v2"});const $C=new Map,XC=e=>{const t=(i=jC(),$C.get(i));var i;return!e&&t?Qw(t):(e=>{const t=(()=>{var e,t;const i=jC();return(e=>uS.includes(e))(i)?!i.startsWith("sap_horizon"):!(null==(t=null==(e=gC())?void 0:e.baseThemeName)?void 0:t.startsWith("sap_horizon"))})()?"legacy":"sap_horizon";return WC.has(e)?WC.get(e)[t]:e})(e||"SAP-icons")},YC=typeof document>"u",KC=new eS,ZC=e=>{KC.attachEvent("languageChange",e)};let JC,eE;vS((()=>{JC=void 0,eE=void 0}));const tE=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;let iE=class{constructor(e){const t=tE.exec(e.replace(/_/g,"-"));if(null===t)throw new Error(`The given language ${e} does not adhere to BCP-47.`);this.sLocaleId=e,this.sLanguage=t[1]||hS,this.sScript=t[2]||"",this.sRegion=t[3]||"",this.sVariant=t[4]&&t[4].slice(1)||null,this.sExtension=t[5]&&t[5].slice(1)||null,this.sPrivateUse=t[6]||null,this.sLanguage&&(this.sLanguage=this.sLanguage.toLowerCase()),this.sScript&&(this.sScript=this.sScript.toLowerCase().replace(/^[a-z]/,(e=>e.toUpperCase()))),this.sRegion&&(this.sRegion=this.sRegion.toUpperCase())}getLanguage(){return this.sLanguage}getScript(){return this.sScript}getRegion(){return this.sRegion}getVariant(){return this.sVariant}getVariantSubtags(){return this.sVariant?this.sVariant.split("-"):[]}getExtension(){return this.sExtension}getExtensionSubtags(){return this.sExtension?this.sExtension.slice(2).split("-"):[]}getPrivateUse(){return this.sPrivateUse}getPrivateUseSubtags(){return this.sPrivateUse?this.sPrivateUse.slice(2).split("-"):[]}hasPrivateUseSubtag(e){return this.getPrivateUseSubtags().indexOf(e)>=0}toString(){const e=[this.sLanguage];return this.sScript&&e.push(this.sScript),this.sRegion&&e.push(this.sRegion),this.sVariant&&e.push(this.sVariant),this.sExtension&&e.push(this.sExtension),this.sPrivateUse&&e.push(this.sPrivateUse),e.join("-")}};const nE=new Map,rE=e=>(nE.has(e)||nE.set(e,new iE(e)),nE.get(e)),oE=e=>{const t=(void 0===JC&&(wS(),JC=AS.language),JC);return t?rE(t):(e=>{try{if(e&&"string"==typeof e)return rE(e)}catch{}return new iE(dS)})((()=>{if(YC)return hS;const e=navigator.languages;return e&&e[0]||navigator.language||hS})())},aE=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i,sE=/(?:^|-)(saptrc|sappsd)(?:-|$)/i,lE={he:"iw",yi:"ji",nb:"no",sr:"sh"},cE=e=>{if(!e)return dS;if("zh_HK"===e)return"zh_TW";const t=e.lastIndexOf("_");return t>=0?e.slice(0,t):e!==dS?dS:""},uE=new Set,hE=new Set,dE=new Map,pE=new Map,fE=new Map,mE=(e,t)=>{dE.set(e,t)},gE=(e,t)=>{const i=`${e}/${t}`;return fE.has(i)},_E=(e,t)=>t!==hS&&!gE(e,t),vE=async e=>{const t=oE().getLanguage(),i=oE().getRegion(),n=oE().getVariant();let r=t+(i?`-${i}`:"")+(n?`-${n}`:"");if(_E(e,r))for(r=(e=>{let t;if(!e)return dS;if("string"==typeof e&&(t=aE.exec(e.replace(/_/g,"-")))){let e=t[1].toLowerCase(),i=t[3]?t[3].toUpperCase():void 0;const n=t[2]?t[2].toLowerCase():void 0,r=t[4]?t[4].slice(1):void 0,o=t[6];return e=lE[e]||e,o&&(t=sE.exec(o))||r&&(t=sE.exec(r))?`en_US_${t[1].toLowerCase()}`:("zh"===e&&!i&&("hans"===n?i="CN":"hant"===n&&(i="TW")),e+(i?"_"+i+(r?"_"+r.replace("-","_"):""):""))}return dS})(r);_E(e,r);)r=cE(r);const o=(void 0===eE&&(wS(),eE=AS.fetchDefaultLanguage),eE);if(r!==hS||o)if(gE(e,r))try{const t=await((e,t)=>{const i=`${e}/${t}`,n=fE.get(i);return n&&!pE.get(i)&&pE.set(i,n(t)),pE.get(i)})(e,r);mE(e,t)}catch(a){const e=a;hE.has(e.message)||(hE.add(e.message),console.error(e.message))}else a=e,uE.has(a)||(console.warn(`[${a}]: Message bundle assets are not configured. Falling back to English texts.`,` Add \`import "${a}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`),uE.add(a));else mE(e,null);var a};ZC((e=>{const t=[...dE.keys()];return Promise.all(t.map(vE))}));const yE=/('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g,AE=new Map;let bE=class{constructor(e){this.packageName=e}getText(e){if("string"==typeof e&&(e={key:e,defaultText:e}),!e||!e.key)return"";const t=(i=this.packageName,dE.get(i));for(var i,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t&&!t[e.key]&&console.warn(`Key ${e.key} not found in the i18n bundle, the default text will be used`),((e,t)=>(t=t||[],e.replace(yE,((e,i,n,r,o)=>{if(i)return"'";if(n)return n.replace(/''/g,"'");if(r){const e="string"==typeof r?parseInt(r):r;return String(t[e])}throw new Error(`[i18n]: pattern syntax error at pos ${o}`)}))))(t&&t[e.key]?t[e.key]:e.defaultText||e.key,r)}};const xE=async e=>(await vE(e),(e=>{if(AE.has(e))return AE.get(e);const t=new bE(e);return AE.set(e,t),t})(e)),wE=new Map,SE=Gw("SVGIcons.registry",new Map),CE=Gw("SVGIcons.promises",new Map),EE="ICON_NOT_FOUND",TE=e=>{Object.keys(e.data).forEach((t=>{const i=e.data[t];ME(t,{pathData:i.path||i.paths,ltr:i.ltr,accData:i.acc,collection:e.collection,packageName:e.packageName})}))},ME=(e,t)=>{const i=`${t.collection}/${e}`;SE.set(i,{pathData:t.pathData,ltr:t.ltr,accData:t.accData,packageName:t.packageName,customTemplate:t.customTemplate,viewBox:t.viewBox,collection:t.collection})},IE=e=>{let t;return e.startsWith("sap-icon://")&&(e=e.replace("sap-icon://","")),[e,t]=e.split("/").reverse(),e=e.replace("icon-",""),t&&(t=Qw(t)),{name:e,collection:t}},BE=e=>{const{name:t,collection:i}=IE(e);return PE(i,t)},RE=async e=>{const{name:t,collection:i}=IE(e);let n=EE;try{n=await(async e=>{if(!CE.has(e)){if(!wE.has(e))throw new Error(`No loader registered for the ${e} icons collection. Probably you forgot to import the "AllIcons.js" module for the respective package.`);const t=wE.get(e);CE.set(e,t(e))}return CE.get(e)})(XC(i))}catch(e){console.error(e.message)}return n===EE?n:PE(i,t)||(Array.isArray(n)?n.forEach((e=>{var t,n;TE(e),t=i,n={[e.themeFamily||"legacy"]:e.collection},WC.has(t)?WC.set(t,{...n,...WC.get(t)}):WC.set(t,n)})):TE(n),PE(i,t))},PE=(e,t)=>{const i=`${XC(e)}/${t}`;return SE.get(i)},kE=new Map,LE=new Map,DE=new Map,NE=e=>{if(!kE.has(e)){const t=FE(e.split("-"));kE.set(e,t)}return kE.get(e)},OE=e=>{if(!LE.has(e)){const t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();LE.set(e,t)}return LE.get(e)},FE=e=>e.map(((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(""),UE=e=>{const t=DE.get(e);if(t)return t;const i=NE(e),n=i.charAt(0).toUpperCase()+i.slice(1);return DE.set(e,n),n},zE=e=>e instanceof HTMLSlotElement?e.assignedNodes({flatten:!0}).filter((e=>e instanceof HTMLElement)):[e],HE=e=>e.reduce(((e,t)=>e.concat(zE(t))),[]);let GE=class{constructor(e){this.metadata=e}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const e={};if(this.slotsAreManaged()){const t=this.getSlots();for(const[i,n]of Object.entries(t)){const t=n.propertyName||i;e[t]=[],e[NE(t)]=e[t]}}return this._initialState=e,e}static validateSlotValue(e,t){return VE(e,t)}getPureTag(){return this.metadata.tag||""}getFeatures(){return this.metadata.features||[]}getTag(){const e=this.metadata.tag;if(!e)return"";const t=void MS(e);return t?`${e}-${t}`:e}hasAttribute(e){const t=this.getProperties()[e];return t.type!==Object&&t.type!==Array&&!t.noAttribute}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(OE)}canSlotText(){var e;return(null==(e=this.getSlots().default)?void 0:e.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some((e=>e.individualSlots))}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}needsCLDR(){return!!this.metadata.cldr}getShadowRootOptions(){return this.metadata.shadowRootOptions||{}}isFormAssociated(){return!!this.metadata.formAssociated}shouldInvalidateOnChildChange(e,t,i){const n=this.getSlots()[e].invalidateOnChildChange;if(void 0===n)return!1;if("boolean"==typeof n)return n;if("object"==typeof n){if("property"===t){if(void 0===n.properties)return!1;if("boolean"==typeof n.properties)return n.properties;if(Array.isArray(n.properties))return n.properties.includes(i);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if("slot"===t){if(void 0===n.slots)return!1;if("boolean"==typeof n.slots)return n.slots;if(Array.isArray(n.slots))return n.slots.includes(i);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}getI18n(){return this.metadata.i18n||(this.metadata.i18n={}),this.metadata.i18n}};const VE=(e,t)=>(e&&zE(e).forEach((e=>{if(!(e instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)})),e),QE=e=>{Gw("CustomStyle.eventProvider",new eS).attachEvent("CustomCSSChange",e)};QE((e=>{(async e=>{HS.forEach((t=>{const i=t.constructor,n=i.getMetadata().getTag(),r=(s=i,zS.has(s)),o=i.getMetadata().isLanguageAware(),a=i.getMetadata().isThemeAware();var s;(!e||e.tag===n||e.rtlAware&&r||e.languageAware&&o||e.themeAware&&a)&&$S(t)})),await KS()})({tag:e})}));const jE=e=>Array.isArray(e)?e.filter((e=>!!e)).flat(10).map((e=>"string"==typeof e?e:e.content)).join(" "):"string"==typeof e?e:e.content,qE=new Map;QE((e=>{qE.delete(`${e}_normal`)}));const WE=new Map;QE((e=>{WE.delete(`${e}_normal`)}));const $E=[],XE=new WeakMap,YE=["value-changed","click"];let KE;vS((()=>{KE=void 0}));const ZE=()=>(void 0===KE&&(wS(),KE=AS.noConflict),KE),JE=["disabled","title","hidden","role","draggable"],eT=e=>!(!JE.includes(e)&&!e.startsWith("aria")&&[HTMLElement,Element,Node].some((t=>t.prototype.hasOwnProperty(e)))),tT=(e,t)=>{if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},iT=(e,t)=>{const i=nT(t);return e.call(t,t,i,void 0)},nT=e=>{const t=e.constructor,i=t.getMetadata().getPureTag(),n=t.getUniqueDependencies().map((e=>e.getMetadata().getPureTag())).filter(MS);return MS(i)&&n.push(i),n},rT=e=>{var t,i;if(null==(t=e._internals)?void 0:t.form){if(oT(e),!e.name)return void(null==(i=e._internals)||i.setFormValue(null));e._internals.setFormValue(e.formFormattedValue)}},oT=async e=>{var t,i;if(null==(t=e._internals)?void 0:t.form)if(e.formValidity&&Object.keys(e.formValidity).some((e=>e))){const t=await(null==(i=e.formElementAnchor)?void 0:i.call(e));e._internals.setValidity(e.formValidity,e.formValidityMessage,t)}else e._internals.setValidity({})},aT=e=>{var t,i;null==(i=null==(t=e._internals)?void 0:t.form)||i.requestSubmit()},sT=new Map,lT=new Map,cT=new Map,uT=new Set;let hT=!1;const dT={iw:"he",ji:"yi",in:"id"},pT=e=>{hT||(console.warn(`[LocaleData] Supported locale "${e}" not configured, import the "Assets.js" module from the webcomponents package you are using.`),hT=!0)},fT=(e,t)=>{sT.set(e,t)},mT=async(e,t,i)=>{const n=((e,t,i)=>{"no"===(e=e&&dT[e]||e)&&(e="nb"),"zh"===e&&!t&&("Hans"===i?t="CN":"Hant"===i&&(t="TW")),("sh"===e||"sr"===e&&"Latn"===i)&&(e="sr",t="Latn");let n=`${e}_${t}`;return pS.includes(n)?lT.has(n)?n:(pT(n),dS):(n=e,pS.includes(n)?lT.has(n)?n:(pT(n),dS):dS)})(e,t,i),r=sS("OpenUI5Support");if(r){const e=r.getLocaleDataObject();if(e)return void fT(n,e)}try{const e=await(e=>{if(!cT.get(e)){const t=lT.get(e);if(!t)throw new Error(`CLDR data for locale ${e} is not loaded!`);cT.set(e,t(e))}return cT.get(e)})(n);fT(n,e)}catch(e){const t=e;uT.has(t.message)||(uT.add(t.message),console.error(t.message))}};lT.set("en",(async()=>(await fetch("https://sdk.openui5.org/1.120.17/resources/sap/ui/core/cldr/en.json")).json())),ZC((()=>{const e=oE();return mT(e.getLanguage(),e.getRegion(),e.getScript())}));let gT=0;const _T=new Map,vT=new Map,yT={fromAttribute:(e,t)=>t===Boolean?null!==e:t===Number?null===e?void 0:parseFloat(e):e,toAttribute:(e,t)=>t===Boolean?e?"":null:t===Object||t===Array||null==e?null:String(e)};function AT(e){this._suppressInvalidation||(this.onInvalidation(e),this._changedState.push(e),$S(this),this._invalidationEventProvider.fireEvent("invalidate",{...e,target:this}))}function bT(e,t){do{const i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;e=Object.getPrototypeOf(e)}while(e&&e!==HTMLElement.prototype)}let xT=(m=class extends HTMLElement{constructor(){super(),this._rendered=!1;const e=this.constructor;let t;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new eS,this._componentStateFinalizedEventProvider=new eS,this._domRefReadyPromise=new Promise((e=>{t=e})),this._domRefReadyPromise._deferredResolve=t,this._doNotSyncAttributes=new Set,this._slotsAssignedNodes=new WeakMap,this._state={...e.getMetadata().getInitialState()},this.initializedProperties=new Map,this.constructor.getMetadata().getPropertiesList().forEach((e=>{if(this.hasOwnProperty(e)){const t=this[e];this.initializedProperties.set(e,t)}})),this._internals=this.attachInternals(),this._initShadowRoot()}_initShadowRoot(){const e=this.constructor;if(e._needsShadowDOM()){const t={mode:"open"};this.attachShadow({...t,...e.getMetadata().getShadowRootOptions()}),e.getMetadata().slotsAreManaged()&&this.shadowRoot.addEventListener("slotchange",this._onShadowRootSlotChange.bind(this))}}_onShadowRootSlotChange(e){var t;(null==(t=e.target)?void 0:t.getRootNode())===this.shadowRoot&&this._processChildren()}get _id(){return this.__id||(this.__id="ui5wc_"+ ++gT),this.__id}render(){const e=this.constructor.template;return iT(e,this)}async connectedCallback(){const e=this.constructor;this.setAttribute(e.getMetadata().getPureTag(),""),e.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const t=e.getMetadata().slotsAreManaged();this._inDOM=!0,t&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(e.asyncFinished||await e.definePromise,XS(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const e=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,e&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this._domRefReadyPromise._deferredResolve(),VS.remove(this),HS.delete(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const e=this.constructor.getMetadata();if(!e.hasSlots())return;const t=e.canSlotText(),i={childList:!0,subtree:t,characterData:t};((e,t,i)=>{const n=new MutationObserver(t);XE.set(e,n),n.observe(e,i)})(this,this._processChildren.bind(this),i)}_stopObservingDOMChildren(){(e=>{const t=XE.get(e);t&&(t.disconnect(),XE.delete(e))})(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const e=this.constructor,t=e.getMetadata().getSlots(),i=e.getMetadata().canSlotText(),n=Array.from(i?this.childNodes:this.children),r=new Map,o=new Map;for(const[u,h]of Object.entries(t)){const e=h.propertyName||u;o.set(e,u),r.set(e,[...this._state[e]]),this._clearSlot(u,h)}const a=new Map,s=new Map,l=n.map((async(i,n)=>{const r=(e=>{if(!(e instanceof HTMLElement))return"default";const t=e.getAttribute("slot");if(t){const e=t.match(/^(.+?)-\d+$/);return e?e[1]:t}return"default"})(i),o=t[r];if(void 0===o){if("default"!==r){const e=Object.keys(t).join(", ");console.warn(`Unknown slotName: ${r}, ignoring`,i,`Valid values are: ${e}`)}return}if(o.individualSlots){const e=(a.get(r)||0)+1;a.set(r,e),i._individualSlot=`${r}-${e}`}if(i instanceof HTMLElement){const e=i.localName;if(e.includes("-")&&(l=e,!$E.some((e=>l.startsWith(e))))){if(!customElements.get(e)){const t=customElements.whenDefined(e);let i=_T.get(e);i||(i=new Promise((e=>setTimeout(e,1e3))),_T.set(e,i)),await Promise.race([t,i])}customElements.upgrade(i)}}var l;if(i=e.getMetadata().constructor.validateSlotValue(i,o),wT(i)&&o.invalidateOnChildChange){const e=this._getChildChangeListener(r);i.attachInvalidate.call(i,e)}i instanceof HTMLSlotElement&&this._attachSlotChange(i,r,!!o.invalidateOnChildChange);const c=o.propertyName||r;s.has(c)?s.get(c).push({child:i,idx:n}):s.set(c,[{child:i,idx:n}])}));await Promise.all(l),s.forEach(((e,t)=>{this._state[t]=e.sort(((e,t)=>e.idx-t.idx)).map((e=>e.child)),this._state[NE(t)]=this._state[t]}));let c=!1;for(const[u,h]of Object.entries(t)){const t=h.propertyName||u;tT(r.get(t),this._state[t])||(AT.call(this,{type:"slot",name:o.get(t),reason:"children"}),c=!0,e.getMetadata().isFormAssociated()&&rT(this))}c||AT.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(e,t){const i=t.propertyName||e;this._state[i].forEach((t=>{if(wT(t)){const i=this._getChildChangeListener(e);t.detachInvalidate.call(t,i)}t instanceof HTMLSlotElement&&this._detachSlotChange(t,e)})),this._state[i]=[],this._state[NE(i)]=this._state[i]}attachInvalidate(e){this._invalidationEventProvider.attachEvent("invalidate",e)}detachInvalidate(e){this._invalidationEventProvider.detachEvent("invalidate",e)}_onChildChange(e,t){this.constructor.getMetadata().shouldInvalidateOnChildChange(e,t.type,t.name)&&AT.call(this,{type:"slot",name:e,reason:"childchange",child:t.target})}attributeChangedCallback(e,t,i){let n;if(this._doNotSyncAttributes.has(e))return;const r=this.constructor.getMetadata().getProperties(),o=e.replace(/^ui5-/,""),a=NE(o);if(r.hasOwnProperty(a)){const e=r[a];n=(e.converter??yT).fromAttribute(i,e.type),this[a]=n}}formAssociatedCallback(){this.constructor.getMetadata().isFormAssociated()&&(e=>{(e=>"formFormattedValue"in e&&"name"in e)(e)&&rT(e)})(this)}static get formAssociated(){return this.getMetadata().isFormAssociated()}_updateAttribute(e,t){const i=this.constructor;if(!i.getMetadata().hasAttribute(e))return;const n=i.getMetadata().getProperties()[e],r=OE(e),o=(n.converter||yT).toAttribute(t,n.type);this._doNotSyncAttributes.add(r),null==o?this.removeAttribute(r):this.setAttribute(r,o),this._doNotSyncAttributes.delete(r)}_getChildChangeListener(e){return this._childChangeListeners.has(e)||this._childChangeListeners.set(e,this._onChildChange.bind(this,e)),this._childChangeListeners.get(e)}_getSlotChangeListener(e){return this._slotChangeListeners.has(e)||this._slotChangeListeners.set(e,this._onSlotChange.bind(this,e)),this._slotChangeListeners.get(e)}_attachSlotChange(e,t,i){const n=this._getSlotChangeListener(t);e.addEventListener("slotchange",(r=>{if(n.call(e,r),i){const i=this._slotsAssignedNodes.get(e);i&&i.forEach((e=>{if(wT(e)){const i=this._getChildChangeListener(t);e.detachInvalidate.call(e,i)}}));const n=HE([e]);this._slotsAssignedNodes.set(e,n),n.forEach((e=>{if(wT(e)){const i=this._getChildChangeListener(t);e.attachInvalidate.call(e,i)}}))}}))}_detachSlotChange(e,t){e.removeEventListener("slotchange",this._getSlotChangeListener(t))}_onSlotChange(e){AT.call(this,{type:"slot",name:e,reason:"slotchange"})}onInvalidation(e){}updateAttributes(){const e=this.constructor.getMetadata().getProperties();for(const[t,i]of Object.entries(e))this._updateAttribute(t,this[t])}_render(){const e=this.constructor,t=e.getMetadata().hasIndividualSlots();this.initializedProperties.size>0&&(Array.from(this.initializedProperties.entries()).forEach((e=>{let[t,i]=e;delete this[t],this[t]=i})),this.initializedProperties.clear()),this._suppressInvalidation=!0;try{this.onBeforeRendering(),this._rendered||this.updateAttributes(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized")}finally{this._suppressInvalidation=!1}this._changedState=[],e._needsShadowDOM()&&(e=>{const t=e.constructor,i=e.shadowRoot,n=e.render();i?(i.adoptedStyleSheets=(e=>{const t=`${e.getMetadata().getTag()}_normal`;if(!WE.has(t)){const i=(e=>{const t=e.getMetadata().getTag(),i=`${t}_normal`,n=sS("OpenUI5Enablement");if(!qE.has(i)){let r="";n&&(r=jE(n.getBusyIndicatorStyles()));const o=(e=>{const t=Gw("CustomStyle.customCSSFor",{});return t[e]?t[e].join(""):""})(t)||"",a=`${jE(e.styles)} ${o} ${r}`;qE.set(i,a)}return qE.get(i)})(e),n=new CSSStyleSheet;n.replaceSync(i),WE.set(t,[n])}return WE.get(t)})(t),t.renderer(n,i,{host:e})):console.warn("There is no shadow root to update")})(this),this._rendered=!0,t&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach((e=>{e._individualSlot&&e.setAttribute("slot",e._individualSlot)}))}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){return"function"==typeof this._getRealDomRef?this._getRealDomRef():this.shadowRoot&&0!==this.shadowRoot.children.length?this.shadowRoot.children[0]:void 0}getFocusDomRef(){const e=this.getDomRef();if(e)return e.querySelector("[data-sap-focus-ref]")||e}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(e){await this._waitForDomRef();const t=this.getFocusDomRef();t===this?HTMLElement.prototype.focus.call(this,e):t&&"function"==typeof t.focus&&t.focus(e)}fireEvent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=this._fireEvent(e,t,i,n),o=UE(e);return o!==e?r&&this._fireEvent(o,t,i,n):r}fireDecoratorEvent(e,t){const i=this.getEventData(e),n=!!i&&i.cancelable,r=!!i&&i.bubbles,o=this._fireEvent(e,t,n,r),a=UE(e);return a!==e?o&&this._fireEvent(a,t,n,r):o}_fireEvent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new CustomEvent(`ui5-${e}`,{detail:t,composed:!1,bubbles:n,cancelable:i}),o=this.dispatchEvent(r);if((e=>{const t=ZE();return i=e,!(YE.includes(i)||!0!==t&&(e=>{const t=ZE();return!("boolean"!=typeof t&&t.events&&t.events.includes&&t.events.includes(e))})(e));var i})(e))return o;const a=new CustomEvent(e,{detail:t,composed:!1,bubbles:n,cancelable:i});return this.dispatchEvent(a)&&o}getEventData(e){return this.constructor.getMetadata().getEvents()[e]}getSlottedNodes(e){return HE(this[e])}attachComponentStateFinalized(e){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",e)}detachComponentStateFinalized(e){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",e)}get effectiveDir(){return(e=>{zS.add(e)})(this.constructor),(()=>this.matches(":dir(rtl)")?"rtl":"ltr")()}get isUI5Element(){return!0}get classes(){return{}}get accessibilityInfo(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _generateAccessors(){const e=this.prototype,t=this.getMetadata().slotsAreManaged(),i=this.getMetadata().getProperties();for(const[n,r]of Object.entries(i)){eT(n)||console.warn(`"${n}" is not a valid property name. Use a name that does not collide with DOM APIs`);const t=bT(e,n);let i,r;(null==t?void 0:t.set)&&(i=t.set),(null==t?void 0:t.get)&&(r=t.get),Object.defineProperty(e,n,{get(){return r?r.call(this):this._state[n]},set(e){const t=this.constructor,o=r?r.call(this):this._state[n];o!==e&&(i?i.call(this,e):this._state[n]=e,AT.call(this,{type:"property",name:n,newValue:e,oldValue:o}),this._rendered&&this._updateAttribute(n,e),t.getMetadata().isFormAssociated()&&rT(this))}})}if(t){const t=this.getMetadata().getSlots();for(const[i,n]of Object.entries(t)){eT(i)||console.warn(`"${i}" is not a valid property name. Use a name that does not collide with DOM APIs`);const t=n.propertyName||i,r={get(){return void 0!==this._state[t]?this._state[t]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}};Object.defineProperty(e,t,r),t!==NE(t)&&Object.defineProperty(e,NE(t),r)}}}static get dependencies(){return[]}static cacheUniqueDependencies(){const e=this.dependencies.filter(((e,t,i)=>i.indexOf(e)===t));vT.set(this,e)}static getUniqueDependencies(){return vT.has(this)||this.cacheUniqueDependencies(),vT.get(this)||[]}static async onDefine(){return Promise.resolve()}static fetchI18nBundles(){return Promise.all(Object.entries(this.getMetadata().getI18n()).map((e=>{const{bundleName:t}=e[1];return xE(t)})))}static fetchCLDR(){return this.getMetadata().needsCLDR()?mT(oE().getLanguage(),oE().getRegion(),oE().getScript()):Promise.resolve()}static define(){this.definePromise=(async()=>{await GC();const e=await Promise.all([this.fetchI18nBundles(),this.fetchCLDR(),this.onDefine()]),[t]=e;Object.entries(this.getMetadata().getI18n()).forEach(((e,i)=>{const n=e[0];e[1].target[n]=t[i]})),this.asyncFinished=!0})();const e=this.getMetadata().getTag();this.getMetadata().getFeatures().forEach((e=>{lS(e)&&this.cacheUniqueDependencies(),((e,t,i)=>{const n=rS.get(t);(null==n?void 0:n.includes(e))||(n?n.push(e):rS.set(t,[e]),oS.attachEvent(aS(e),i))})(e,this,this.cacheUniqueDependencies.bind(this))}));const t=(n=e,NS.has(n)),i=customElements.get(e);var n;return i&&!t?(e=>{let t=DS.get(e);void 0===t&&(t=-1),FS.has(t)||FS.set(t,new Set),FS.get(t).add(e),OS||(OS=setTimeout((()=>{(()=>{const e=PS,t=kS(),i=e[t];let n="Multiple UI5 Web Components instances detected.";e.length>1&&(n=`${n}\nLoading order (versions before 1.1.0 not listed): ${e.map((e=>`\n${e.description}`)).join("")}`),[...FS.keys()].forEach((r=>{let o,a,s;-1===r?(o=1,a={description:"Older unknown runtime"}):(o=LS(t,r),a=e[r]),s=o>0?"an older":o<0?"a newer":"the same",n=`${n}\n\n"${i.description}" failed to define ${FS.get(r).size} tag(s) as they were defined by a runtime of ${s} version "${a.description}": ${[...FS.get(r)].sort().join(", ")}.`,n=o>0?`${n}\nWARNING! If your code uses features of the above web components, unavailable in ${a.description}, it might not work as expected!`:`${n}\nSince the above web components were defined by the same or newer version runtime, they should be compatible with your code.`})),n=`${n}\n\nTo prevent other runtimes from defining tags that you use, consider using scoping or have third-party libraries use scoping: https://github.com/SAP/ui5-webcomponents/blob/main/docs/2-advanced/03-scoping.md.`,console.warn(n)})(),FS=new Map,OS=void 0}),1e3))})(e):i||(this._generateAccessors(),(e=>{NS.add(e),DS.set(e,kS())})(e),customElements.define(e,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const e=[this.metadata];let t=this;for(;t!==m;)t=Object.getPrototypeOf(t),e.unshift(t.metadata);const i=Jw({},...e);return this._metadata=new GE(i),this._metadata}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}},m.metadata={},m.styles="",m);const wT=e=>"isUI5Element"in e,ST=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{if(Object.prototype.hasOwnProperty.call(t,"metadata")||(t.metadata={}),"string"==typeof e)return void(t.metadata.tag=e);const{tag:i,languageAware:n,themeAware:r,cldr:o,fastNavigation:a,formAssociated:s,shadowRootOptions:l,features:c}=e;t.metadata.tag=i,n&&(t.metadata.languageAware=n),o&&(t.metadata.cldr=o),c&&(t.metadata.features=c),r&&(t.metadata.themeAware=r),a&&(t.metadata.fastNavigation=a),s&&(t.metadata.formAssociated=s),l&&(t.metadata.shadowRootOptions=l),["renderer","template","styles","dependencies"].forEach((i=>{e[i]&&Object.defineProperty(t,i,{get:()=>e[i]})}))}},CT=e=>(t,i)=>{const n=t.constructor;Object.prototype.hasOwnProperty.call(n,"metadata")||(n.metadata={});const r=n.metadata;r.properties||(r.properties={});const o=r.properties;o[i]||(o[i]=e??{})},ET=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=>{Object.prototype.hasOwnProperty.call(i,"metadata")||(i.metadata={});const n=i.metadata;n.events||(n.events={});const r=n.events;r[e]||(t.bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,r[e]=t)}},TT=e=>(t,i)=>{const n=t.constructor;Object.prototype.hasOwnProperty.call(n,"metadata")||(n.metadata={});const r=n.metadata;r.slots||(r.slots={});const o=r.slots;if(e&&e.default&&o.default)throw new Error("Only one slot can be the default slot.");const a=e&&e.default?"default":i;(e=e||{type:HTMLElement}).type||(e.type=HTMLElement),o[a]||(o[a]=e),e.default&&(delete o.default.default,o.default.propertyName=i),n.metadata.managedSlots=!0},MT=e=>(e.key?"Enter"===e.key:13===e.keyCode)&&!eM(e),IT=e=>(e.key?"Spacebar"===e.key||" "===e.key:32===e.keyCode)&&!eM(e),BT=e=>(e.key?"Spacebar"===e.key||" "===e.key:32===e.keyCode)&&iM(e,!1,!1,!0),RT=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&!eM(e),PT=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&!eM(e),kT=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&!eM(e),LT=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&!eM(e),DT=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&iM(e,!0,!1,!1),NT=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&iM(e,!0,!1,!1),OT=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&iM(e,!0,!1,!1),FT=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&iM(e,!0,!1,!1),UT=e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&iM(e,!1,!1,!0),zT=e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&iM(e,!1,!1,!0),HT=e=>(e.key?"ArrowLeft"===e.key||"Left"===e.key:37===e.keyCode)&&iM(e,!1,!1,!0),GT=e=>(e.key?"ArrowRight"===e.key||"Right"===e.key:39===e.keyCode)&&iM(e,!1,!1,!0),VT=e=>(e.key?"Home"===e.key:36===e.keyCode)&&!eM(e),QT=e=>(e.key?"End"===e.key:35===e.keyCode)&&!eM(e),jT=e=>(e.key?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&!eM(e),qT=e=>(e.key?"Tab"===e.key:9===e.keyCode)&&!eM(e),WT=e=>(e.key?"Tab"===e.key:9===e.keyCode)&&iM(e,!1,!1,!0),$T=e=>(e.key?"Delete"===e.key:46===e.keyCode)&&!eM(e),XT=e=>(e.key?"PageUp"===e.key:33===e.keyCode)&&!eM(e),YT=e=>(e.key?"PageDown"===e.key:34===e.keyCode)&&!eM(e),KT=e=>(e.key?"+"===e.key:187===e.keyCode)||107===e.keyCode&&!eM(e),ZT=e=>(e.key?"-"===e.key:219===e.keyCode)||109===e.keyCode&&!eM(e),JT=e=>"F2"===e.key&&!eM(e),eM=e=>e.shiftKey||e.altKey||tM(e),tM=e=>!(!e.metaKey&&!e.ctrlKey),iM=(e,t,i,n)=>e.shiftKey===n&&e.altKey===i&&tM(e)===t,nM=()=>{let e=document.activeElement;for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e};var rM=(e=>(e.Auto="Auto",e.Vertical="Vertical",e.Horizontal="Horizontal",e.Paging="Paging",e))(rM||{}),oM=(e=>(e.Static="Static",e.Cyclic="Cyclic",e))(oM||{});let aM=class{constructor(e,t){if(!e.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");if(this.rootWebComponent=e,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this._initBound=this._init.bind(this),this.rootWebComponent.attachComponentStateFinalized(this._initBound),"function"!=typeof t.getItemsCallback)throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||oM.Static,this._navigationMode=t.navigationMode||rM.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[],this._skipItemsSize=t.skipItemsSize||null}setCurrentItem(e){const t=this._getItems().indexOf(e);-1!==t?(this._currentIndex=t,this._applyTabIndex()):console.warn("The provided item is not managed by ItemNavigation",e)}setRowSize(e){this._rowSize=e}_init(){this._getItems().forEach(((e,t)=>{e.forcedTabIndex=t===this._currentIndex?"0":"-1"}))}_onkeydown(e){if(!this._canNavigate())return;const t=this._navigationMode===rM.Horizontal||this._navigationMode===rM.Auto,i=this._navigationMode===rM.Vertical||this._navigationMode===rM.Auto,n="rtl"===this.rootWebComponent.effectiveDir;if(n&&RT(e)&&t)this._handleRight();else if(n&&PT(e)&&t)this._handleLeft();else if(RT(e)&&t)this._handleLeft();else if(PT(e)&&t)this._handleRight();else if(kT(e)&&i)this._handleUp();else if(LT(e)&&i)this._handleDown();else if(VT(e))this._handleHome();else if(QT(e))this._handleEnd();else if(XT(e))this._handlePageUp();else{if(!YT(e))return;this._handlePageDown()}e.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){const e=this._getItems().length;if(this._currentIndex-this._rowSize>=0)this._currentIndex-=this._rowSize;else if(this._behavior===oM.Cyclic){const t=this._currentIndex%this._rowSize;let i=(0===t?this._rowSize-1:t-1)+(Math.ceil(e/this._rowSize)-1)*this._rowSize;i>e-1&&(i-=this._rowSize),this._currentIndex=i}else this._currentIndex=0}_handleDown(){const e=this._getItems().length;if(this._currentIndex+this._rowSize<e)this._currentIndex+=this._rowSize;else if(this._behavior===oM.Cyclic){const e=(this._currentIndex%this._rowSize+1)%this._rowSize;this._currentIndex=e}else this._currentIndex=e-1}_handleLeft(){const e=this._getItems().length;this._currentIndex>0?this._currentIndex-=1:this._behavior===oM.Cyclic&&(this._currentIndex=e-1)}_handleRight(){const e=this._getItems().length;this._currentIndex<e-1?this._currentIndex+=1:this._behavior===oM.Cyclic&&(this._currentIndex=0)}_handleHome(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%e}_handleEnd(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=e-1-this._currentIndex%e}_handlePageUp(){this._rowSize>1||this._handlePageUpFlat()}_handlePageDown(){this._rowSize>1||this._handlePageDownFlat()}_handlePageUpFlat(){null!==this._skipItemsSize&&this._currentIndex+1>this._skipItemsSize?this._currentIndex-=this._skipItemsSize:this._currentIndex-=this._currentIndex}_handlePageDownFlat(){null!==this._skipItemsSize&&this._getItems().length-this._currentIndex-1>this._skipItemsSize?this._currentIndex+=this._skipItemsSize:this._currentIndex=this._getItems().length-1}_applyTabIndex(){const e=this._getItems();for(let t=0;t<e.length;t++)e[t].forcedTabIndex=t===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach((e=>{const t=this.rootWebComponent[e];this.rootWebComponent[e]=Array.isArray(t)?[...t]:{...t}}))}_focusCurrentItem(){const e=this._getCurrentItem();e&&e.focus()}_canNavigate(){const e=this._getCurrentItem(),t=nM();return e&&e===t}_getCurrentItem(){const e=this._getItems();if(!e.length)return;for(;this._currentIndex>=e.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);const t=e[this._currentIndex];if(!t)return;if(wT(t))return t.getFocusDomRef();const i=this.rootWebComponent.getDomRef();return i&&t.id?i.querySelector(`[id="${t.id}"]`):void 0}};const{I:sM}=Ae,lM=()=>document.createComment(""),cM=(e,t,i)=>{var n;const r=e._$AA.parentNode,o=void 0===t?e._$AB:t._$AA;if(void 0===i){const t=r.insertBefore(lM(),o),n=r.insertBefore(lM(),o);i=new sM(t,n,e,e.options)}else{const t=i._$AB.nextSibling,a=i._$AM,s=a!==e;if(s){let t;null===(n=i._$AQ)||void 0===n||n.call(i,e),i._$AM=e,void 0!==i._$AP&&(t=e._$AU)!==a._$AU&&i._$AP(t)}if(t!==o||s){let e=i._$AA;for(;e!==t;){const t=e.nextSibling;r.insertBefore(e,o),e=t}}}return i},uM=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e._$AI(t,i),e},hM={},dM=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let i=e._$AA;const n=e._$AB.nextSibling;for(;i!==n;){const e=i.nextSibling;i.remove(),i=e}},pM=(e,t,i)=>{const n=new Map;for(let r=t;r<=i;r++)n.set(e[r],r);return n},fM=Dw(class extends Nw{constructor(e){if(super(e),2!==e.type)throw Error("repeat() can only be used in text expressions")}ct(e,t,i){let n;void 0===i?i=t:void 0!==t&&(n=t);const r=[],o=[];let a=0;for(const s of e)r[a]=n?n(s,a):a,o[a]=i(s,a),a++;return{values:o,keys:r}}render(e,t,i){return this.ct(e,t,i).values}update(e,t){let[i,n,r]=t;var o;const a=e._$AH,{values:s,keys:l}=this.ct(i,n,r);if(!Array.isArray(a))return this.ut=l,s;const c=null!==(o=this.ut)&&void 0!==o?o:this.ut=[],u=[];let h,d,p=0,f=a.length-1,m=0,g=s.length-1;for(;p<=f&&m<=g;)if(null===a[p])p++;else if(null===a[f])f--;else if(c[p]===l[m])u[m]=uM(a[p],s[m]),p++,m++;else if(c[f]===l[g])u[g]=uM(a[f],s[g]),f--,g--;else if(c[p]===l[g])u[g]=uM(a[p],s[g]),cM(e,u[g+1],a[p]),p++,g--;else if(c[f]===l[m])u[m]=uM(a[f],s[m]),cM(e,a[p],a[f]),f--,m++;else if(void 0===h&&(h=pM(l,m,g),d=pM(c,p,f)),h.has(c[p]))if(h.has(c[f])){const t=d.get(l[m]),i=void 0!==t?a[t]:null;if(null===i){const t=cM(e,a[p]);uM(t,s[m]),u[m]=t}else u[m]=uM(i,s[m]),cM(e,a[p],i),a[t]=null;m++}else dM(a[f]),f--;else dM(a[p]),p++;for(;m<=g;){const t=cM(e,u[g+1]);uM(t,s[m]),u[m++]=t}for(;p<=f;){const e=a[p++];null!==e&&dM(e)}return this.ut=l,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hM;e._$AH=t}(e,u),re}}),mM=Dw(class extends Nw{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,t){let[i]=t;var n,r;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in i)i[e]&&!(null===(n=this.nt)||void 0===n?void 0:n.has(e))&&this.it.add(e);return this.render(i)}const o=e.element.classList;this.it.forEach((e=>{e in i||(o.remove(e),this.it.delete(e))}));for(const a in i){const e=!!i[a];e===this.it.has(a)||(null===(r=this.nt)||void 0===r?void 0:r.has(a))||(e?(o.add(a),this.it.add(a)):(o.remove(a),this.it.delete(a)))}return re}}),gM=Dw(class extends Nw{constructor(e){var t;if(super(e),1!==e.type||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw new Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return""}update(e,t){let[i]=t;const{style:n}=e.element;if(void 0===this._previousStyleProperties){this._previousStyleProperties=new Set;for(const e in i)this._previousStyleProperties.add(e)}this._previousStyleProperties.forEach((e=>{null==i[e]&&(this._previousStyleProperties.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const r in i){const e=i[r];null!=e&&(this._previousStyleProperties.add(r),r.includes("-")?n.setProperty(r,e):n[r]=e)}return re}}),_M=e=>null!=e?e:oe,vM=function(e){const t=sS("LitStatic");for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t?t.html:ie)(e,...n)},yM=function(e){const t=sS("LitStatic");for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t?t.svg:ne)(e,...n)},AM=(e,t,i)=>{const n=sS("OpenUI5Enablement");n&&(e=n.wrapTemplateResultInBusyMarkup(vM,i.host,e)),xe(e,t,i)},bM=(e,t,i)=>{const n=sS("LitStatic");if(n)return n.unsafeStatic((t||[]).includes(e)?`${e}-${i}`:e)},xM=e=>(t,i)=>{t.metadata.i18n||(t.metadata.i18n={}),t.metadata.i18n[i]={bundleName:e,target:t}},wM=Symbol.for(""),SM=e=>{if((null==e?void 0:e.r)===wM)return null==e?void 0:e._$litStatic$},CM=new Map,EM=e=>function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];const o=n.length;let a,s;const l=[],c=[];let u,h=0,d=!1;for(;h<o;){for(u=t[h];h<o&&void 0!==(s=n[h],a=SM(s));)u+=a+t[++h],d=!0;h!==o&&c.push(s),l.push(u),h++}if(h===o&&l.push(t[o]),d){const e=l.join("$$lit$$");void 0===(t=CM.get(e))&&(l.raw=l,CM.set(e,t=l)),n=c}return e(t,...n)},TM=EM(ie),MM=EM(ne);var IM;(g=class{}).html=TM,g.svg=MM,g.unsafeStatic=e=>({_$litStatic$:e,r:wM}),IM=g,iS.set("LitStatic",IM);const BM={key:"AVATAR_TOOLTIP",defaultText:"Avatar"},RM={key:"BUSY_INDICATOR_TITLE",defaultText:"Please wait"},PM={key:"BUTTON_ARIA_TYPE_ACCEPT",defaultText:"Positive Action"},kM={key:"BUTTON_ARIA_TYPE_REJECT",defaultText:"Negative Action"},LM={key:"BUTTON_ARIA_TYPE_EMPHASIZED",defaultText:"Emphasized"},DM={key:"COLORPALETTE_CONTAINER_LABEL",defaultText:"Color Palette - Predefined Colors"},NM={key:"COLORPALETTE_POPOVER_TITLE",defaultText:"Color Palette"},OM={key:"COLORPALETTE_COLOR_LABEL",defaultText:"Color"},FM={key:"COLOR_PALETTE_DIALOG_CANCEL_BUTTON",defaultText:"Cancel"},UM={key:"COLOR_PALETTE_DIALOG_OK_BUTTON",defaultText:"OK"},zM={key:"COLOR_PALETTE_DIALOG_TITLE",defaultText:"Change Color"},HM={key:"COLOR_PALETTE_MORE_COLORS_TEXT",defaultText:"More Colors..."},GM={key:"COLOR_PALETTE_DEFAULT_COLOR_TEXT",defaultText:"Default Color"},VM={key:"COLORPICKER_ALPHA_SLIDER",defaultText:"Alpha control"},QM={key:"COLORPICKER_HUE_SLIDER",defaultText:"Hue control"},jM={key:"COLORPICKER_HEX",defaultText:"Hexadecimal"},qM={key:"COLORPICKER_RED",defaultText:"Red"},WM={key:"COLORPICKER_GREEN",defaultText:"Green"},$M={key:"COLORPICKER_BLUE",defaultText:"Blue"},XM={key:"COLORPICKER_ALPHA",defaultText:"Alpha"},YM={key:"DELETE",defaultText:"Delete"},KM={key:"GROUP_HEADER_TEXT",defaultText:"Group Header"},ZM={key:"INPUT_SUGGESTIONS",defaultText:"Suggestions Available"},JM={key:"INPUT_SUGGESTIONS_TITLE",defaultText:"Select"},eI={key:"INPUT_SUGGESTIONS_ONE_HIT",defaultText:"1 result available"},tI={key:"INPUT_SUGGESTIONS_MORE_HITS",defaultText:"{0} results are available"},iI={key:"INPUT_SUGGESTIONS_NO_HIT",defaultText:"No results"},nI={key:"INPUT_CLEAR_ICON_ACC_NAME",defaultText:"Clear"},rI={key:"LIST_ITEM_SELECTED",defaultText:"Selected"},oI={key:"LIST_ITEM_NOT_SELECTED",defaultText:"Not Selected"},aI={key:"ARIA_LABEL_LIST_ITEM_CHECKBOX",defaultText:"Multiple Selection Mode"},sI={key:"ARIA_LABEL_LIST_ITEM_RADIO_BUTTON",defaultText:"Item Selection."},lI={key:"ARIA_LABEL_LIST_SELECTABLE",defaultText:"Contains Selectable Items"},cI={key:"ARIA_LABEL_LIST_MULTISELECTABLE",defaultText:"Contains Multi-Selectable Items"},uI={key:"ARIA_LABEL_LIST_DELETABLE",defaultText:"Contains Deletable Items"},hI={key:"INPUT_AVALIABLE_VALUES",defaultText:"Available Values"},dI={key:"PANEL_ICON",defaultText:"Expand/Collapse"},pI={key:"RESPONSIVE_POPOVER_CLOSE_DIALOG_BUTTON",defaultText:"Decline"},fI={key:"SEGMENTEDBUTTON_ARIA_DESCRIPTION",defaultText:"Segmented button group"},mI={key:"SEGMENTEDBUTTON_ARIA_DESCRIBEDBY",defaultText:"Press SPACE or ENTER to select an item"},gI={key:"SEGMENTEDBUTTONITEM_ARIA_DESCRIPTION",defaultText:"Segmented button"},_I={key:"SLIDER_ARIA_DESCRIPTION",defaultText:"Slider handle"},vI={key:"LOAD_MORE_TEXT",defaultText:"More"},yI={key:"VALUE_STATE_TYPE_ERROR",defaultText:"Value State Error"},AI={key:"VALUE_STATE_TYPE_WARNING",defaultText:"Value State Warning"},bI={key:"VALUE_STATE_TYPE_SUCCESS",defaultText:"Value State Success"},xI={key:"VALUE_STATE_TYPE_INFORMATION",defaultText:"Value State Information"},wI={key:"VALUE_STATE_ERROR",defaultText:"Invalid entry"},SI={key:"VALUE_STATE_WARNING",defaultText:"Warning issued"},CI={key:"VALUE_STATE_INFORMATION",defaultText:"Informative entry"},EI={key:"VALUE_STATE_SUCCESS",defaultText:"Entry successfully validated"},TI={key:"SLIDER_TOOLTIP_INPUT_DESCRIPTION",defaultText:"Press F2 to enter a value"},MI={key:"SLIDER_TOOLTIP_INPUT_LABEL",defaultText:"Current Value"},II={key:"STEPINPUT_DEC_ICON_TITLE",defaultText:"Decrease"},BI={key:"STEPINPUT_INC_ICON_TITLE",defaultText:"Increase"},RI={key:"DIALOG_HEADER_ARIA_ROLE_DESCRIPTION",defaultText:"Interactive Header"},PI={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE",defaultText:"Use Shift+Arrow keys to resize"},kI={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE",defaultText:"Use Arrow keys to move"},LI={key:"DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE",defaultText:"Use Arrow keys to move, Shift+Arrow keys to resize"},DI={key:"LABEL_COLON",defaultText:":"},NI={key:"FORM_CHECKABLE_REQUIRED",defaultText:"Please tick this box if you want to proceed."},OI={key:"FORM_SELECTABLE_REQUIRED2",defaultText:"Please select one of these options."},FI={key:"FORM_TEXTFIELD_REQUIRED",defaultText:"Please fill in this field."};let UI;const zI=()=>(void 0===UI&&(wS(),UI=AS.enableDefaultTooltips),UI),HI=new WeakMap,GI=new WeakMap,VI={attributes:!0,childList:!0,characterData:!0,subtree:!0},QI=e=>{const t=e;return t.accessibleNameRef?jI(e):t.accessibleName?t.accessibleName:void 0},jI=e=>{var t;const i=(null==(t=e.accessibleNameRef)?void 0:t.split(" "))??[],n=e.getRootNode();let r="";return i.forEach(((e,t)=>{const o=n.querySelector(`[id='${e}']`),a=`${o&&o.textContent?o.textContent:""}`;a&&(r+=a,t<i.length-1&&(r+=" "))})),r},qI=e=>{var t;const i=new Set;return WI(e).forEach((e=>{i.add(e)})),((null==(t=e.accessibleNameRef)?void 0:t.split(" "))??[]).forEach((t=>{const n=$I(e,t);n&&i.add(n)})),Array.from(i)},WI=e=>{const t=e.getRootNode().querySelectorAll(`[for="${e.id}"]`);return Array.from(t)},$I=(e,t)=>e.getRootNode().querySelector(`[id='${t}']`),XI=(e,t)=>{let i=HI.get(t);if(!i){i={observer:null,callbacks:[]};const n=new MutationObserver((()=>{i.callbacks.forEach((e=>{e()}));const n=document.getElementById(t.id);e.host.id===t.getAttribute("for")||n||YI(e,t)}));i.observer=n,n.observe(t,VI),HI.set(t,i)}i.callbacks.includes(e.callback)||i.callbacks.push(e.callback)},YI=(e,t)=>{var i;const n=HI.get(t);n&&(n.callbacks=n.callbacks.filter((t=>t!==e.callback)),n.callbacks.length||(null==(i=n.observer)||i.disconnect(),HI.delete(t))),e.observedElements=e.observedElements.filter((e=>e!==t))},KI=e=>Array.from(e).filter((e=>e.nodeType!==Node.COMMENT_NODE&&(e.nodeType!==Node.TEXT_NODE||0!==(e.nodeValue||"").trim().length))).length>0;function ZI(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-segmented-button-item-icon" name="${_M(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-segmented-button-item-icon" name="${_M(this.icon)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function JI(e,t,i){return yM`<title id="${_M(this._id)}-tooltip">${_M(this.effectiveAccessibleName)}</title>`}function eB(e,t,i){return yM`${_M(this.customSvg)}`}function tB(e,t,i,n,r){return yM`<path d="${_M(n)}"></path>`}function iB(e,t,i){return yM`${this.hasIconTooltip?JI.call(this,e,t,i):void 0}<g role="presentation">${this.customSvg?eB.call(this,e,t,i):void 0}${fM(this.pathData,((e,t)=>e._id||t),((n,r)=>tB.call(this,e,t,i,n,r)))}</g>`}var nB;!function(e){e.Image="Image",e.Decorative="Decorative",e.Interactive="Interactive"}(nB||(nB={}));const rB=nB,oB={packageName:"@ui5/webcomponents-theming",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:':root{--sapThemeMetaData-Base-baseLib:{"Path": "Base.baseLib.sap_horizon.css_variables","PathPattern": "/%frameworkId%/%libId%/%themeId%/%fileId%.css","Extends": ["baseTheme"],"Tags": ["Fiori_3","LightColorScheme"],"FallbackThemeId": "sap_fiori_3","Engine":{"Name": "theming-engine","Version": "14.0.2"},"Version":{"Build": "11.17.1.20240715084505","Source": "11.17.1"}};--sapBrandColor: #0070f2;--sapHighlightColor: #0064d9;--sapBaseColor: #fff;--sapShellColor: #fff;--sapBackgroundColor: #f5f6f7;--sapFontFamily: "72", "72full", Arial, Helvetica, sans-serif;--sapFontSize: .875rem;--sapTextColor: #1d2d3e;--sapLinkColor: #0064d9;--sapCompanyLogo: none;--sapBackgroundImage: none;--sapBackgroundImageOpacity: 1;--sapBackgroundImageRepeat: false;--sapSelectedColor: #0064d9;--sapHoverColor: #eaecee;--sapActiveColor: #dee2e5;--sapHighlightTextColor: #fff;--sapTitleColor: #1d2d3e;--sapNegativeColor: #aa0808;--sapCriticalColor: #e76500;--sapPositiveColor: #256f3a;--sapInformativeColor: #0070f2;--sapNeutralColor: #788fa6;--sapNegativeElementColor: #f53232;--sapCriticalElementColor: #e76500;--sapPositiveElementColor: #30914c;--sapInformativeElementColor: #0070f2;--sapNeutralElementColor: #788fa6;--sapNegativeTextColor: #aa0808;--sapCriticalTextColor: #b44f00;--sapPositiveTextColor: #256f3a;--sapInformativeTextColor: #0064d9;--sapNeutralTextColor: #1d2d3e;--sapErrorColor: #aa0808;--sapWarningColor: #e76500;--sapSuccessColor: #256f3a;--sapInformationColor: #0070f2;--sapErrorBackground: #ffeaf4;--sapWarningBackground: #fff8d6;--sapSuccessBackground: #f5fae5;--sapInformationBackground: #e1f4ff;--sapNeutralBackground: #eff1f2;--sapErrorBorderColor: #e90b0b;--sapWarningBorderColor: #dd6100;--sapSuccessBorderColor: #30914c;--sapInformationBorderColor: #0070f2;--sapNeutralBorderColor: #788fa6;--sapElement_LineHeight: 2.75rem;--sapElement_Height: 2.25rem;--sapElement_BorderWidth: .0625rem;--sapElement_BorderCornerRadius: .75rem;--sapElement_Compact_LineHeight: 2rem;--sapElement_Compact_Height: 1.625rem;--sapElement_Condensed_LineHeight: 1.5rem;--sapElement_Condensed_Height: 1.375rem;--sapContent_LineHeight: 1.5;--sapContent_IconHeight: 1rem;--sapContent_IconColor: #1d2d3e;--sapContent_ContrastIconColor: #fff;--sapContent_NonInteractiveIconColor: #758ca4;--sapContent_MarkerIconColor: #5d36ff;--sapContent_MarkerTextColor: #046c7a;--sapContent_MeasureIndicatorColor: #556b81;--sapContent_Selected_MeasureIndicatorColor: #0064d9;--sapContent_Placeholderloading_Background: #ccc;--sapContent_Placeholderloading_Gradient: linear-gradient(to right, #ccc 0%, #ccc 20%, #999 50%, #ccc 80%, #ccc 100%);--sapContent_ImagePlaceholderBackground: #eaecee;--sapContent_ImagePlaceholderForegroundColor: #5b738b;--sapContent_RatedColor: #d27700;--sapContent_UnratedColor: #758ca4;--sapContent_BusyColor: #0064d9;--sapContent_FocusColor: #0032a5;--sapContent_FocusStyle: solid;--sapContent_FocusWidth: .125rem;--sapContent_ContrastFocusColor: #fff;--sapContent_ShadowColor: #223548;--sapContent_ContrastShadowColor: #fff;--sapContent_Shadow0: 0 0 .125rem 0 rgba(34,53,72,.2), 0 .125rem .25rem 0 rgba(34,53,72,.2);--sapContent_Shadow1: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .125rem .5rem 0 rgba(34,53,72,.3);--sapContent_Shadow2: 0 0 0 .0625rem rgba(34,53,72,.48), 0 .625rem 1.875rem 0 rgba(34,53,72,.25);--sapContent_Shadow3: 0 0 0 .0625rem rgba(34,53,72,.48), 0 1.25rem 5rem 0 rgba(34,53,72,.25);--sapContent_TextShadow: 0 0 .125rem #fff;--sapContent_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapContent_HeaderShadow: 0 .125rem .125rem 0 rgba(34,53,72,.05), inset 0 -.0625rem 0 0 #d9d9d9;--sapContent_Interaction_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapContent_Selected_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapContent_Negative_Shadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapContent_Critical_Shadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapContent_Positive_Shadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapContent_Informative_Shadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapContent_Neutral_Shadow: inset 0 0 0 .0625rem rgba(120,143,166,.3);--sapContent_SearchHighlightColor: #dafdf5;--sapContent_HelpColor: #188918;--sapContent_LabelColor: #556b82;--sapContent_MonospaceFontFamily: "72Mono", "72Monofull", lucida console, monospace;--sapContent_MonospaceBoldFontFamily: "72Mono-Bold", "72Mono-Boldfull", lucida console, monospace;--sapContent_IconFontFamily: "SAP-icons";--sapContent_DisabledTextColor: rgba(29,45,62,.6);--sapContent_DisabledOpacity: .4;--sapContent_ContrastTextThreshold: .65;--sapContent_ContrastTextColor: #fff;--sapContent_ForegroundColor: #efefef;--sapContent_ForegroundBorderColor: #758ca4;--sapContent_ForegroundTextColor: #1d2d3e;--sapContent_BadgeBackground: #aa0808;--sapContent_BadgeTextColor: #fff;--sapContent_DragAndDropActiveColor: #0064d9;--sapContent_Selected_TextColor: #0064d9;--sapContent_Selected_Background: #fff;--sapContent_Selected_Hover_Background: #e3f0ff;--sapContent_Selected_ForegroundColor: #0064d9;--sapContent_ForcedColorAdjust: none;--sapContent_Illustrative_Color1: #5d36ff;--sapContent_Illustrative_Color2: #0070f2;--sapContent_Illustrative_Color3: #f58b00;--sapContent_Illustrative_Color4: #00144a;--sapContent_Illustrative_Color5: #a9b4be;--sapContent_Illustrative_Color6: #d5dadd;--sapContent_Illustrative_Color7: #ebf8ff;--sapContent_Illustrative_Color8: #fff;--sapContent_Illustrative_Color9: #64edd2;--sapContent_Illustrative_Color10: #ebf8ff;--sapContent_Illustrative_Color11: #f31ded;--sapContent_Illustrative_Color12: #00a800;--sapContent_Illustrative_Color13: #005dc9;--sapContent_Illustrative_Color14: #004da5;--sapContent_Illustrative_Color15: #cc7400;--sapContent_Illustrative_Color16: #3b0ac6;--sapContent_Illustrative_Color17: #00a58a;--sapContent_Illustrative_Color18: #d1efff;--sapContent_Illustrative_Color19: #b8e6ff;--sapContent_Illustrative_Color20: #9eddff;--sapFontLightFamily: "72-Light", "72-Lightfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBoldFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldFamily: "72-Semibold", "72-Semiboldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSemiboldDuplexFamily: "72-SemiboldDuplex", "72-SemiboldDuplexfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontBlackFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapFontHeaderFamily: "72-Bold", "72-Boldfull", "72", "72full", Arial, Helvetica, sans-serif;--sapFontSmallSize: .75rem;--sapFontLargeSize: 1rem;--sapFontHeader1Size: 3rem;--sapFontHeader2Size: 2rem;--sapFontHeader3Size: 1.5rem;--sapFontHeader4Size: 1.25rem;--sapFontHeader5Size: 1rem;--sapFontHeader6Size: .875rem;--sapLink_TextDecoration: none;--sapLink_Hover_Color: #0064d9;--sapLink_Hover_TextDecoration: underline;--sapLink_Active_Color: #0064d9;--sapLink_Active_TextDecoration: none;--sapLink_Visited_Color: #0064d9;--sapLink_InvertedColor: #a6cfff;--sapLink_SubtleColor: #1d2d3e;--sapShell_Background: #eff1f2;--sapShell_BackgroundImage: linear-gradient(to bottom, #eff1f2, #eff1f2);--sapShell_BackgroundImageOpacity: 1;--sapShell_BackgroundImageRepeat: false;--sapShell_BorderColor: #fff;--sapShell_TextColor: #1d2d3e;--sapShell_InteractiveBackground: #eff1f2;--sapShell_InteractiveTextColor: #1d2d3e;--sapShell_InteractiveBorderColor: #556b81;--sapShell_GroupTitleTextColor: #1d2d3e;--sapShell_GroupTitleTextShadow: 0 0 .125rem #fff;--sapShell_Hover_Background: #fff;--sapShell_Active_Background: #fff;--sapShell_Active_TextColor: #0070f2;--sapShell_Selected_Background: #fff;--sapShell_Selected_TextColor: #0070f2;--sapShell_Selected_Hover_Background: #fff;--sapShell_Favicon: none;--sapShell_Navigation_Background: #fff;--sapShell_Navigation_Hover_Background: #fff;--sapShell_Navigation_SelectedColor: #0064d9;--sapShell_Navigation_Selected_TextColor: #0064d9;--sapShell_Navigation_TextColor: #1d2d3e;--sapShell_Navigation_Active_TextColor: #0064d9;--sapShell_Navigation_Active_Background: #fff;--sapShell_Shadow: 0 .125rem .125rem 0 rgba(34,53,72,.15), inset 0 -.0625rem 0 0 rgba(34,53,72,.2);--sapShell_NegativeColor: #aa0808;--sapShell_CriticalColor: #b44f00;--sapShell_PositiveColor: #256f3a;--sapShell_InformativeColor: #0064d9;--sapShell_NeutralColor: #1d2d3e;--sapShell_Assistant_ForegroundColor: #5d36ff;--sapShell_Category_1_Background: #0057d2;--sapShell_Category_1_BorderColor: #0057d2;--sapShell_Category_1_TextColor: #fff;--sapShell_Category_1_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_2_Background: #df1278;--sapShell_Category_2_BorderColor: #df1278;--sapShell_Category_2_TextColor: #fff;--sapShell_Category_2_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_3_Background: #e76500;--sapShell_Category_3_BorderColor: #e76500;--sapShell_Category_3_TextColor: #fff;--sapShell_Category_3_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_4_Background: #7800a4;--sapShell_Category_4_BorderColor: #7800a4;--sapShell_Category_4_TextColor: #fff;--sapShell_Category_4_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_5_Background: #aa2608;--sapShell_Category_5_BorderColor: #aa2608;--sapShell_Category_5_TextColor: #fff;--sapShell_Category_5_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_6_Background: #07838f;--sapShell_Category_6_BorderColor: #07838f;--sapShell_Category_6_TextColor: #fff;--sapShell_Category_6_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_7_Background: #f31ded;--sapShell_Category_7_BorderColor: #f31ded;--sapShell_Category_7_TextColor: #fff;--sapShell_Category_7_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_8_Background: #188918;--sapShell_Category_8_BorderColor: #188918;--sapShell_Category_8_TextColor: #fff;--sapShell_Category_8_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_9_Background: #002a86;--sapShell_Category_9_BorderColor: #002a86;--sapShell_Category_9_TextColor: #fff;--sapShell_Category_9_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_10_Background: #5b738b;--sapShell_Category_10_BorderColor: #5b738b;--sapShell_Category_10_TextColor: #fff;--sapShell_Category_10_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_11_Background: #d20a0a;--sapShell_Category_11_BorderColor: #d20a0a;--sapShell_Category_11_TextColor: #fff;--sapShell_Category_11_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_12_Background: #7858ff;--sapShell_Category_12_BorderColor: #7858ff;--sapShell_Category_12_TextColor: #fff;--sapShell_Category_12_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_13_Background: #a00875;--sapShell_Category_13_BorderColor: #a00875;--sapShell_Category_13_TextColor: #fff;--sapShell_Category_13_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_14_Background: #14565b;--sapShell_Category_14_BorderColor: #14565b;--sapShell_Category_14_TextColor: #fff;--sapShell_Category_14_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_15_Background: #223548;--sapShell_Category_15_BorderColor: #223548;--sapShell_Category_15_TextColor: #fff;--sapShell_Category_15_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapShell_Category_16_Background: #1e592f;--sapShell_Category_16_BorderColor: #1e592f;--sapShell_Category_16_TextColor: #fff;--sapShell_Category_16_TextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapAssistant_Color1: #5d36ff;--sapAssistant_Color2: #a100c2;--sapAssistant_BackgroundGradient: linear-gradient(#5d36ff, #a100c2);--sapAssistant_Background: #5d36ff;--sapAssistant_BorderColor: #5d36ff;--sapAssistant_TextColor: #fff;--sapAssistant_Hover_Background: #2800cf;--sapAssistant_Hover_BorderColor: #2800cf;--sapAssistant_Hover_TextColor: #fff;--sapAssistant_Active_Background: #fff;--sapAssistant_Active_BorderColor: #5d36ff;--sapAssistant_Active_TextColor: #5d36ff;--sapAssistant_Question_Background: #eae5ff;--sapAssistant_Question_BorderColor: #eae5ff;--sapAssistant_Question_TextColor: #1d2d3e;--sapAssistant_Answer_Background: #eff1f2;--sapAssistant_Answer_BorderColor: #eff1f2;--sapAssistant_Answer_TextColor: #1d2d3e;--sapAvatar_1_Background: #fff3b8;--sapAvatar_1_BorderColor: #fff3b8;--sapAvatar_1_TextColor: #a45d00;--sapAvatar_2_Background: #ffd0e7;--sapAvatar_2_BorderColor: #ffd0e7;--sapAvatar_2_TextColor: #aa0808;--sapAvatar_3_Background: #ffdbe7;--sapAvatar_3_BorderColor: #ffdbe7;--sapAvatar_3_TextColor: #ba066c;--sapAvatar_4_Background: #ffdcf3;--sapAvatar_4_BorderColor: #ffdcf3;--sapAvatar_4_TextColor: #a100c2;--sapAvatar_5_Background: #ded3ff;--sapAvatar_5_BorderColor: #ded3ff;--sapAvatar_5_TextColor: #552cff;--sapAvatar_6_Background: #d1efff;--sapAvatar_6_BorderColor: #d1efff;--sapAvatar_6_TextColor: #0057d2;--sapAvatar_7_Background: #c2fcee;--sapAvatar_7_BorderColor: #c2fcee;--sapAvatar_7_TextColor: #046c7a;--sapAvatar_8_Background: #ebf5cb;--sapAvatar_8_BorderColor: #ebf5cb;--sapAvatar_8_TextColor: #256f3a;--sapAvatar_9_Background: #ddccf0;--sapAvatar_9_BorderColor: #ddccf0;--sapAvatar_9_TextColor: #6c32a9;--sapAvatar_10_Background: #eaecee;--sapAvatar_10_BorderColor: #eaecee;--sapAvatar_10_TextColor: #556b82;--sapButton_Background: #fff;--sapButton_BorderColor: #bcc3ca;--sapButton_BorderWidth: .0625rem;--sapButton_BorderCornerRadius: .5rem;--sapButton_TextColor: #0064d9;--sapButton_Hover_Background: #eaecee;--sapButton_Hover_BorderColor: #bcc3ca;--sapButton_Hover_TextColor: #0064d9;--sapButton_IconColor: #0064d9;--sapButton_Active_Background: #fff;--sapButton_Active_BorderColor: #0064d9;--sapButton_Active_TextColor: #0064d9;--sapButton_Emphasized_Background: #0070f2;--sapButton_Emphasized_BorderColor: #0070f2;--sapButton_Emphasized_TextColor: #fff;--sapButton_Emphasized_Hover_Background: #0064d9;--sapButton_Emphasized_Hover_BorderColor: #0064d9;--sapButton_Emphasized_Hover_TextColor: #fff;--sapButton_Emphasized_Active_Background: #fff;--sapButton_Emphasized_Active_BorderColor: #0064d9;--sapButton_Emphasized_Active_TextColor: #0064d9;--sapButton_Emphasized_TextShadow: transparent;--sapButton_Emphasized_FontWeight: bold;--sapButton_Reject_Background: #ffd6e9;--sapButton_Reject_BorderColor: #ffc2de;--sapButton_Reject_TextColor: #aa0808;--sapButton_Reject_Hover_Background: #ffbddb;--sapButton_Reject_Hover_BorderColor: #ffbddb;--sapButton_Reject_Hover_TextColor: #aa0808;--sapButton_Reject_Active_Background: #fff;--sapButton_Reject_Active_BorderColor: #e90b0b;--sapButton_Reject_Active_TextColor: #aa0808;--sapButton_Reject_Selected_Background: #fff;--sapButton_Reject_Selected_BorderColor: #e90b0b;--sapButton_Reject_Selected_TextColor: #aa0808;--sapButton_Reject_Selected_Hover_Background: #ffbddb;--sapButton_Reject_Selected_Hover_BorderColor: #e90b0b;--sapButton_Accept_Background: #ebf5cb;--sapButton_Accept_BorderColor: #dbeda0;--sapButton_Accept_TextColor: #256f3a;--sapButton_Accept_Hover_Background: #e3f1b6;--sapButton_Accept_Hover_BorderColor: #e3f1b6;--sapButton_Accept_Hover_TextColor: #256f3a;--sapButton_Accept_Active_Background: #fff;--sapButton_Accept_Active_BorderColor: #30914c;--sapButton_Accept_Active_TextColor: #256f3a;--sapButton_Accept_Selected_Background: #fff;--sapButton_Accept_Selected_BorderColor: #30914c;--sapButton_Accept_Selected_TextColor: #256f3a;--sapButton_Accept_Selected_Hover_Background: #e3f1b6;--sapButton_Accept_Selected_Hover_BorderColor: #30914c;--sapButton_Lite_Background: transparent;--sapButton_Lite_BorderColor: transparent;--sapButton_Lite_TextColor: #0064d9;--sapButton_Lite_Hover_Background: #eaecee;--sapButton_Lite_Hover_BorderColor: #bcc3ca;--sapButton_Lite_Hover_TextColor: #0064d9;--sapButton_Lite_Active_Background: #fff;--sapButton_Lite_Active_BorderColor: #0064d9;--sapButton_Selected_Background: #edf6ff;--sapButton_Selected_BorderColor: #0064d9;--sapButton_Selected_TextColor: #0064d9;--sapButton_Selected_Hover_Background: #d9ecff;--sapButton_Selected_Hover_BorderColor: #0064d9;--sapButton_Attention_Background: #fff3b7;--sapButton_Attention_BorderColor: #ffeb84;--sapButton_Attention_TextColor: #b44f00;--sapButton_Attention_Hover_Background: #ffef9e;--sapButton_Attention_Hover_BorderColor: #ffef9e;--sapButton_Attention_Hover_TextColor: #b44f00;--sapButton_Attention_Active_Background: #fff;--sapButton_Attention_Active_BorderColor: #dd6100;--sapButton_Attention_Active_TextColor: #b44f00;--sapButton_Attention_Selected_Background: #fff;--sapButton_Attention_Selected_BorderColor: #dd6100;--sapButton_Attention_Selected_TextColor: #b44f00;--sapButton_Attention_Selected_Hover_Background: #ffef9e;--sapButton_Attention_Selected_Hover_BorderColor: #dd6100;--sapButton_Negative_Background: #f53232;--sapButton_Negative_BorderColor: #f53232;--sapButton_Negative_TextColor: #fff;--sapButton_Negative_Hover_Background: #e90b0b;--sapButton_Negative_Hover_BorderColor: #e90b0b;--sapButton_Negative_Hover_TextColor: #fff;--sapButton_Negative_Active_Background: #fff;--sapButton_Negative_Active_BorderColor: #f53232;--sapButton_Negative_Active_TextColor: #aa0808;--sapButton_Critical_Background: #e76500;--sapButton_Critical_BorderColor: #e76500;--sapButton_Critical_TextColor: #fff;--sapButton_Critical_Hover_Background: #dd6100;--sapButton_Critical_Hover_BorderColor: #dd6100;--sapButton_Critical_Hover_TextColor: #fff;--sapButton_Critical_Active_Background: #fff;--sapButton_Critical_Active_BorderColor: #dd6100;--sapButton_Critical_Active_TextColor: #b44f00;--sapButton_Success_Background: #30914c;--sapButton_Success_BorderColor: #30914c;--sapButton_Success_TextColor: #fff;--sapButton_Success_Hover_Background: #2c8646;--sapButton_Success_Hover_BorderColor: #2c8646;--sapButton_Success_Hover_TextColor: #fff;--sapButton_Success_Active_Background: #fff;--sapButton_Success_Active_BorderColor: #30914c;--sapButton_Success_Active_TextColor: #256f3a;--sapButton_Information_Background: #e8f3ff;--sapButton_Information_BorderColor: #b5d8ff;--sapButton_Information_TextColor: #0064d9;--sapButton_Information_Hover_Background: #d4e8ff;--sapButton_Information_Hover_BorderColor: #b5d8ff;--sapButton_Information_Hover_TextColor: #0064d9;--sapButton_Information_Active_Background: #fff;--sapButton_Information_Active_BorderColor: #0064d9;--sapButton_Information_Active_TextColor: #0064d9;--sapButton_Neutral_Background: #e8f3ff;--sapButton_Neutral_BorderColor: #b5d8ff;--sapButton_Neutral_TextColor: #0064d9;--sapButton_Neutral_Hover_Background: #d4e8ff;--sapButton_Neutral_Hover_BorderColor: #b5d8ff;--sapButton_Neutral_Hover_TextColor: #0064d9;--sapButton_Neutral_Active_Background: #fff;--sapButton_Neutral_Active_BorderColor: #0064d9;--sapButton_Neutral_Active_TextColor: #0064d9;--sapButton_Track_Background: #788fa6;--sapButton_Track_BorderColor: #788fa6;--sapButton_Track_TextColor: #fff;--sapButton_Track_Hover_Background: #637d97;--sapButton_Track_Hover_BorderColor: #637d97;--sapButton_Track_Selected_Background: #0064d9;--sapButton_Track_Selected_BorderColor: #0064d9;--sapButton_Track_Selected_TextColor: #fff;--sapButton_Track_Selected_Hover_Background: #0058c0;--sapButton_Track_Selected_Hover_BorderColor: #0058c0;--sapButton_Handle_Background: #fff;--sapButton_Handle_BorderColor: #fff;--sapButton_Handle_TextColor: #1d2d3e;--sapButton_Handle_Hover_Background: #fff;--sapButton_Handle_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Handle_Selected_Background: #edf6ff;--sapButton_Handle_Selected_BorderColor: #edf6ff;--sapButton_Handle_Selected_TextColor: #0064d9;--sapButton_Handle_Selected_Hover_Background: #edf6ff;--sapButton_Handle_Selected_Hover_BorderColor: rgba(237,246,255,.5);--sapButton_Track_Negative_Background: #f53232;--sapButton_Track_Negative_BorderColor: #f53232;--sapButton_Track_Negative_TextColor: #fff;--sapButton_Track_Negative_Hover_Background: #e90b0b;--sapButton_Track_Negative_Hover_BorderColor: #e90b0b;--sapButton_Handle_Negative_Background: #fff;--sapButton_Handle_Negative_BorderColor: #fff;--sapButton_Handle_Negative_TextColor: #aa0808;--sapButton_Handle_Negative_Hover_Background: #fff;--sapButton_Handle_Negative_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_Track_Positive_Background: #30914c;--sapButton_Track_Positive_BorderColor: #30914c;--sapButton_Track_Positive_TextColor: #fff;--sapButton_Track_Positive_Hover_Background: #2c8646;--sapButton_Track_Positive_Hover_BorderColor: #2c8646;--sapButton_Handle_Positive_Background: #fff;--sapButton_Handle_Positive_BorderColor: #fff;--sapButton_Handle_Positive_TextColor: #256f3a;--sapButton_Handle_Positive_Hover_Background: #fff;--sapButton_Handle_Positive_Hover_BorderColor: rgba(255,255,255,.5);--sapButton_TokenBackground: #fff;--sapButton_TokenBorderColor: #bcc3ca;--sapField_Background: #fff;--sapField_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #556b81, #556b81) border-box;--sapField_TextColor: #131e29;--sapField_PlaceholderTextColor: #556b82;--sapField_BorderColor: #556b81;--sapField_HelpBackground: #fff;--sapField_BorderWidth: .0625rem;--sapField_BorderStyle: none;--sapField_BorderCornerRadius: .25rem;--sapField_Shadow: inset 0 0 0 .0625rem rgba(85,107,129,.25);--sapField_Hover_Background: #fff;--sapField_Hover_BackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #0064d9, #0064d9) border-box;--sapField_Hover_BorderColor: #0064d9;--sapField_Hover_HelpBackground: #fff;--sapField_Hover_Shadow: inset 0 0 0 .0625rem rgba(79,160,255,.5);--sapField_Hover_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_Hover_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_Hover_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_Hover_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapField_Active_BorderColor: #0064d9;--sapField_Focus_Background: #fff;--sapField_Focus_BorderColor: #0032a5;--sapField_Focus_HelpBackground: #fff;--sapField_ReadOnly_Background: #eaecee;--sapField_ReadOnly_BackgroundStyle: 0 100% / .375rem .0625rem repeat-x linear-gradient(90deg, #556b81 0, #556b81 .25rem, transparent .25rem) border-box;--sapField_ReadOnly_BorderColor: #556b81;--sapField_ReadOnly_BorderStyle: none;--sapField_ReadOnly_HelpBackground: #eaecee;--sapField_RequiredColor: #ba066c;--sapField_InvalidColor: #e90b0b;--sapField_InvalidBackground: #ffeaf4;--sapField_InvalidBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #e90b0b, #e90b0b) border-box;--sapField_InvalidBorderWidth: .125rem;--sapField_InvalidBorderStyle: none;--sapField_InvalidShadow: inset 0 0 0 .0625rem rgba(255,142,196,.45);--sapField_WarningColor: #dd6100;--sapField_WarningBackground: #fff8d6;--sapField_WarningBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #dd6100, #dd6100) border-box;--sapField_WarningBorderWidth: .125rem;--sapField_WarningBorderStyle: none;--sapField_WarningShadow: inset 0 0 0 .0625rem rgba(255,213,10,.4);--sapField_SuccessColor: #30914c;--sapField_SuccessBackground: #f5fae5;--sapField_SuccessBackgroundStyle: 0 100% / 100% .0625rem no-repeat linear-gradient(0deg, #30914c, #30914c) border-box;--sapField_SuccessBorderWidth: .0625rem;--sapField_SuccessBorderStyle: none;--sapField_SuccessShadow: inset 0 0 0 .0625rem rgba(48,145,76,.18);--sapField_InformationColor: #0070f2;--sapField_InformationBackground: #e1f4ff;--sapField_InformationBackgroundStyle: 0 100% / 100% .125rem no-repeat linear-gradient(0deg, #0070f2, #0070f2) border-box;--sapField_InformationBorderWidth: .125rem;--sapField_InformationBorderStyle: none;--sapField_InformationShadow: inset 0 0 0 .0625rem rgba(104,174,255,.5);--sapGroup_TitleBackground: #fff;--sapGroup_TitleBorderColor: #a8b2bd;--sapGroup_TitleTextColor: #1d2d3e;--sapGroup_Title_FontSize: 1rem;--sapGroup_ContentBackground: #fff;--sapGroup_ContentBorderColor: #d9d9d9;--sapGroup_BorderWidth: .0625rem;--sapGroup_BorderCornerRadius: .5rem;--sapGroup_FooterBackground: transparent;--sapToolbar_Background: #fff;--sapToolbar_SeparatorColor: #d9d9d9;--sapList_HeaderBackground: #fff;--sapList_HeaderBorderColor: #a8b2bd;--sapList_HeaderTextColor: #1d2d3e;--sapList_BorderColor: #e5e5e5;--sapList_BorderWidth: .0625rem;--sapList_TextColor: #1d2d3e;--sapList_Active_TextColor: #1d2d3e;--sapList_Active_Background: #dee2e5;--sapList_SelectionBackgroundColor: #ebf8ff;--sapList_SelectionBorderColor: #0064d9;--sapList_Hover_SelectionBackground: #dcf3ff;--sapList_Background: #fff;--sapList_Hover_Background: #eaecee;--sapList_AlternatingBackground: #f5f6f7;--sapList_GroupHeaderBackground: #fff;--sapList_GroupHeaderBorderColor: #a8b2bd;--sapList_GroupHeaderTextColor: #1d2d3e;--sapList_TableGroupHeaderBackground: #eff1f2;--sapList_TableGroupHeaderBorderColor: #a8b2bd;--sapList_TableGroupHeaderTextColor: #1d2d3e;--sapList_FooterBackground: #fff;--sapList_FooterTextColor: #1d2d3e;--sapList_TableFooterBorder: #a8b2bd;--sapList_TableFixedBorderColor: #8c8c8c;--sapMessage_ErrorBorderColor: #ff8ec4;--sapMessage_WarningBorderColor: #ffe770;--sapMessage_SuccessBorderColor: #cee67e;--sapMessage_InformationBorderColor: #7bcfff;--sapPopover_BorderCornerRadius: .5rem;--sapProgress_Background: #d5dadd;--sapProgress_BorderColor: #d5dadd;--sapProgress_TextColor: #1d2d3e;--sapProgress_FontSize: .875rem;--sapProgress_NegativeBackground: #ffdbec;--sapProgress_NegativeBorderColor: #ffdbec;--sapProgress_NegativeTextColor: #1d2d3e;--sapProgress_CriticalBackground: #fff4bd;--sapProgress_CriticalBorderColor: #fff4bd;--sapProgress_CriticalTextColor: #1d2d3e;--sapProgress_PositiveBackground: #e5f2ba;--sapProgress_PositiveBorderColor: #e5f2ba;--sapProgress_PositiveTextColor: #1d2d3e;--sapProgress_InformationBackground: #cdedff;--sapProgress_InformationBorderColor: #cdedff;--sapProgress_InformationTextColor: #1d2d3e;--sapProgress_Value_Background: #617b94;--sapProgress_Value_BorderColor: #617b94;--sapProgress_Value_TextColor: #788fa6;--sapProgress_Value_NegativeBackground: #f53232;--sapProgress_Value_NegativeBorderColor: #f53232;--sapProgress_Value_NegativeTextColor: #f53232;--sapProgress_Value_CriticalBackground: #e76500;--sapProgress_Value_CriticalBorderColor: #e76500;--sapProgress_Value_CriticalTextColor: #e76500;--sapProgress_Value_PositiveBackground: #30914c;--sapProgress_Value_PositiveBorderColor: #30914c;--sapProgress_Value_PositiveTextColor: #30914c;--sapProgress_Value_InformationBackground: #0070f2;--sapProgress_Value_InformationBorderColor: #0070f2;--sapProgress_Value_InformationTextColor: #0070f2;--sapScrollBar_FaceColor: #7b91a8;--sapScrollBar_TrackColor: #fff;--sapScrollBar_BorderColor: #7b91a8;--sapScrollBar_SymbolColor: #0064d9;--sapScrollBar_Dimension: .75rem;--sapScrollBar_Hover_FaceColor: #5b728b;--sapSlider_Background: #d5dadd;--sapSlider_BorderColor: #d5dadd;--sapSlider_Selected_Background: #0064d9;--sapSlider_Selected_BorderColor: #0064d9;--sapSlider_HandleBackground: #fff;--sapSlider_HandleBorderColor: #b0d5ff;--sapSlider_RangeHandleBackground: #fff;--sapSlider_Hover_HandleBackground: #d9ecff;--sapSlider_Hover_HandleBorderColor: #b0d5ff;--sapSlider_Hover_RangeHandleBackground: #d9ecff;--sapSlider_Active_HandleBackground: #fff;--sapSlider_Active_HandleBorderColor: #0064d9;--sapSlider_Active_RangeHandleBackground: transparent;--sapPageHeader_Background: #fff;--sapPageHeader_BorderColor: #d9d9d9;--sapPageHeader_TextColor: #1d2d3e;--sapPageFooter_Background: #fff;--sapPageFooter_BorderColor: #d9d9d9;--sapPageFooter_TextColor: #1d2d3e;--sapInfobar_Background: #c2fcee;--sapInfobar_Hover_Background: #fff;--sapInfobar_Active_Background: #fff;--sapInfobar_NonInteractive_Background: #f5f6f7;--sapInfobar_TextColor: #046c7a;--sapObjectHeader_Background: #fff;--sapObjectHeader_Hover_Background: #eaecee;--sapObjectHeader_BorderColor: #d9d9d9;--sapObjectHeader_Title_TextColor: #1d2d3e;--sapObjectHeader_Title_FontSize: 1.5rem;--sapObjectHeader_Title_SnappedFontSize: 1.25rem;--sapObjectHeader_Title_FontFamily: "72Black", "72Blackfull","72", "72full", Arial, Helvetica, sans-serif;--sapObjectHeader_Subtitle_TextColor: #556b82;--sapBlockLayer_Background: #000;--sapTile_Background: #fff;--sapTile_Hover_Background: #eaecee;--sapTile_Active_Background: #dee2e5;--sapTile_BorderColor: transparent;--sapTile_BorderCornerRadius: 1rem;--sapTile_TitleTextColor: #1d2d3e;--sapTile_TextColor: #556b82;--sapTile_IconColor: #556b82;--sapTile_SeparatorColor: #ccc;--sapTile_Interactive_BorderColor: #b3b3b3;--sapTile_OverlayBackground: #fff;--sapTile_OverlayForegroundColor: #1d2d3e;--sapAccentColor1: #d27700;--sapAccentColor2: #aa0808;--sapAccentColor3: #ba066c;--sapAccentColor4: #a100c2;--sapAccentColor5: #5d36ff;--sapAccentColor6: #0057d2;--sapAccentColor7: #046c7a;--sapAccentColor8: #256f3a;--sapAccentColor9: #6c32a9;--sapAccentColor10: #5b738b;--sapAccentBackgroundColor1: #fff3b8;--sapAccentBackgroundColor2: #ffd0e7;--sapAccentBackgroundColor3: #ffdbe7;--sapAccentBackgroundColor4: #ffdcf3;--sapAccentBackgroundColor5: #ded3ff;--sapAccentBackgroundColor6: #d1efff;--sapAccentBackgroundColor7: #c2fcee;--sapAccentBackgroundColor8: #ebf5cb;--sapAccentBackgroundColor9: #ddccf0;--sapAccentBackgroundColor10: #eaecee;--sapIndicationColor_1: #840606;--sapIndicationColor_1_Background: #840606;--sapIndicationColor_1_BorderColor: #840606;--sapIndicationColor_1_TextColor: #fff;--sapIndicationColor_1_Hover_Background: #6c0505;--sapIndicationColor_1_Active_Background: #fff;--sapIndicationColor_1_Active_BorderColor: #fb9d9d;--sapIndicationColor_1_Active_TextColor: #840606;--sapIndicationColor_1_Selected_Background: #fff;--sapIndicationColor_1_Selected_BorderColor: #fb9d9d;--sapIndicationColor_1_Selected_TextColor: #840606;--sapIndicationColor_1b: #fb9d9d;--sapIndicationColor_1b_BorderColor: #fb9d9d;--sapIndicationColor_1b_Hover_Background: #fa8585;--sapIndicationColor_2: #aa0808;--sapIndicationColor_2_Background: #aa0808;--sapIndicationColor_2_BorderColor: #aa0808;--sapIndicationColor_2_TextColor: #fff;--sapIndicationColor_2_Hover_Background: #920707;--sapIndicationColor_2_Active_Background: #fff;--sapIndicationColor_2_Active_BorderColor: #fcc4c4;--sapIndicationColor_2_Active_TextColor: #aa0808;--sapIndicationColor_2_Selected_Background: #fff;--sapIndicationColor_2_Selected_BorderColor: #fcc4c4;--sapIndicationColor_2_Selected_TextColor: #aa0808;--sapIndicationColor_2b: #fcc4c4;--sapIndicationColor_2b_BorderColor: #fcc4c4;--sapIndicationColor_2b_Hover_Background: #fbacac;--sapIndicationColor_3: #b95100;--sapIndicationColor_3_Background: #e76500;--sapIndicationColor_3_BorderColor: #e76500;--sapIndicationColor_3_TextColor: #fff;--sapIndicationColor_3_Hover_Background: #d85e00;--sapIndicationColor_3_Active_Background: #fff;--sapIndicationColor_3_Active_BorderColor: #fff2c0;--sapIndicationColor_3_Active_TextColor: #b95100;--sapIndicationColor_3_Selected_Background: #fff;--sapIndicationColor_3_Selected_BorderColor: #fff2c0;--sapIndicationColor_3_Selected_TextColor: #b95100;--sapIndicationColor_3b: #fff2c0;--sapIndicationColor_3b_BorderColor: #fff2c0;--sapIndicationColor_3b_Hover_Background: #ffeda6;--sapIndicationColor_4: #256f3a;--sapIndicationColor_4_Background: #256f3a;--sapIndicationColor_4_BorderColor: #256f3a;--sapIndicationColor_4_TextColor: #fff;--sapIndicationColor_4_Hover_Background: #1f5c30;--sapIndicationColor_4_Active_Background: #fff;--sapIndicationColor_4_Active_BorderColor: #bae8bc;--sapIndicationColor_4_Active_TextColor: #256f3a;--sapIndicationColor_4_Selected_Background: #fff;--sapIndicationColor_4_Selected_BorderColor: #bae8bc;--sapIndicationColor_4_Selected_TextColor: #256f3a;--sapIndicationColor_4b: #bae8bc;--sapIndicationColor_4b_BorderColor: #bae8bc;--sapIndicationColor_4b_Hover_Background: #a7e2a9;--sapIndicationColor_5: #0070f2;--sapIndicationColor_5_Background: #0070f2;--sapIndicationColor_5_BorderColor: #0070f2;--sapIndicationColor_5_TextColor: #fff;--sapIndicationColor_5_Hover_Background: #0064d9;--sapIndicationColor_5_Active_Background: #fff;--sapIndicationColor_5_Active_BorderColor: #d3effd;--sapIndicationColor_5_Active_TextColor: #0070f2;--sapIndicationColor_5_Selected_Background: #fff;--sapIndicationColor_5_Selected_BorderColor: #d3effd;--sapIndicationColor_5_Selected_TextColor: #0070f2;--sapIndicationColor_5b: #d3effd;--sapIndicationColor_5b_BorderColor: #d3effd;--sapIndicationColor_5b_Hover_Background: #bbe6fc;--sapIndicationColor_6: #046c7a;--sapIndicationColor_6_Background: #046c7a;--sapIndicationColor_6_BorderColor: #046c7a;--sapIndicationColor_6_TextColor: #fff;--sapIndicationColor_6_Hover_Background: #035661;--sapIndicationColor_6_Active_Background: #fff;--sapIndicationColor_6_Active_BorderColor: #cdf5ec;--sapIndicationColor_6_Active_TextColor: #046c7a;--sapIndicationColor_6_Selected_Background: #fff;--sapIndicationColor_6_Selected_BorderColor: #cdf5ec;--sapIndicationColor_6_Selected_TextColor: #046c7a;--sapIndicationColor_6b: #cdf5ec;--sapIndicationColor_6b_BorderColor: #cdf5ec;--sapIndicationColor_6b_Hover_Background: #b8f1e4;--sapIndicationColor_7: #5d36ff;--sapIndicationColor_7_Background: #5d36ff;--sapIndicationColor_7_BorderColor: #5d36ff;--sapIndicationColor_7_TextColor: #fff;--sapIndicationColor_7_Hover_Background: #481cff;--sapIndicationColor_7_Active_Background: #fff;--sapIndicationColor_7_Active_BorderColor: #e2dbff;--sapIndicationColor_7_Active_TextColor: #5d36ff;--sapIndicationColor_7_Selected_Background: #fff;--sapIndicationColor_7_Selected_BorderColor: #e2dbff;--sapIndicationColor_7_Selected_TextColor: #5d36ff;--sapIndicationColor_7b: #e2dbff;--sapIndicationColor_7b_BorderColor: #e2dbff;--sapIndicationColor_7b_Hover_Background: #cdc2ff;--sapIndicationColor_8: #a100c2;--sapIndicationColor_8_Background: #a100c2;--sapIndicationColor_8_BorderColor: #a100c2;--sapIndicationColor_8_TextColor: #fff;--sapIndicationColor_8_Hover_Background: #8c00a9;--sapIndicationColor_8_Active_Background: #fff;--sapIndicationColor_8_Active_BorderColor: #f8d6ff;--sapIndicationColor_8_Active_TextColor: #a100c2;--sapIndicationColor_8_Selected_Background: #fff;--sapIndicationColor_8_Selected_BorderColor: #f8d6ff;--sapIndicationColor_8_Selected_TextColor: #a100c2;--sapIndicationColor_8b: #f8d6ff;--sapIndicationColor_8b_BorderColor: #f8d6ff;--sapIndicationColor_8b_Hover_Background: #f4bdff;--sapIndicationColor_9: #1d2d3e;--sapIndicationColor_9_Background: #1d2d3e;--sapIndicationColor_9_BorderColor: #1d2d3e;--sapIndicationColor_9_TextColor: #fff;--sapIndicationColor_9_Hover_Background: #15202d;--sapIndicationColor_9_Active_Background: #fff;--sapIndicationColor_9_Active_BorderColor: #d9d9d9;--sapIndicationColor_9_Active_TextColor: #1d2d3e;--sapIndicationColor_9_Selected_Background: #fff;--sapIndicationColor_9_Selected_BorderColor: #d9d9d9;--sapIndicationColor_9_Selected_TextColor: #1d2d3e;--sapIndicationColor_9b: #fff;--sapIndicationColor_9b_BorderColor: #d9d9d9;--sapIndicationColor_9b_Hover_Background: #f2f2f2;--sapIndicationColor_10: #45484a;--sapIndicationColor_10_Background: #83888b;--sapIndicationColor_10_BorderColor: #83888b;--sapIndicationColor_10_TextColor: #fff;--sapIndicationColor_10_Hover_Background: #767b7e;--sapIndicationColor_10_Active_Background: #fff;--sapIndicationColor_10_Active_BorderColor: #eaecee;--sapIndicationColor_10_Active_TextColor: #45484a;--sapIndicationColor_10_Selected_Background: #fff;--sapIndicationColor_10_Selected_BorderColor: #eaecee;--sapIndicationColor_10_Selected_TextColor: #45484a;--sapIndicationColor_10b: #eaecee;--sapIndicationColor_10b_BorderColor: #eaecee;--sapIndicationColor_10b_Hover_Background: #dcdfe3;--sapLegend_WorkingBackground: #fff;--sapLegend_NonWorkingBackground: #ebebeb;--sapLegend_CurrentDateTime: #a100c2;--sapLegendColor1: #c35500;--sapLegendColor2: #d23a0a;--sapLegendColor3: #df1278;--sapLegendColor4: #840606;--sapLegendColor5: #cc00dc;--sapLegendColor6: #0057d2;--sapLegendColor7: #07838f;--sapLegendColor8: #188918;--sapLegendColor9: #5b738b;--sapLegendColor10: #7800a4;--sapLegendColor11: #a93e00;--sapLegendColor12: #aa2608;--sapLegendColor13: #ba066c;--sapLegendColor14: #8d2a00;--sapLegendColor15: #4e247a;--sapLegendColor16: #002a86;--sapLegendColor17: #035663;--sapLegendColor18: #1e592f;--sapLegendColor19: #1a4796;--sapLegendColor20: #470ced;--sapLegendBackgroundColor1: #ffef9f;--sapLegendBackgroundColor2: #feeae1;--sapLegendBackgroundColor3: #fbf6f8;--sapLegendBackgroundColor4: #fbebeb;--sapLegendBackgroundColor5: #ffe5fe;--sapLegendBackgroundColor6: #d1efff;--sapLegendBackgroundColor7: #c2fcee;--sapLegendBackgroundColor8: #f5fae5;--sapLegendBackgroundColor9: #f5f6f7;--sapLegendBackgroundColor10: #fff0fa;--sapLegendBackgroundColor11: #fff8d6;--sapLegendBackgroundColor12: #fff6f6;--sapLegendBackgroundColor13: #f7ebef;--sapLegendBackgroundColor14: #f1ecd5;--sapLegendBackgroundColor15: #f0e7f8;--sapLegendBackgroundColor16: #ebf8ff;--sapLegendBackgroundColor17: #dafdf5;--sapLegendBackgroundColor18: #ebf5cb;--sapLegendBackgroundColor19: #fafdff;--sapLegendBackgroundColor20: #eceeff;--sapChart_Background: #fff;--sapChart_ContrastTextShadow: 0 0 .0625rem rgba(0,0,0,.7);--sapChart_ContrastShadowColor: #fff;--sapChart_ContrastLineColor: #fff;--sapChart_LineColor_1: #e1e6eb;--sapChart_LineColor_2: #768da4;--sapChart_LineColor_3: #000001;--sapChart_Choropleth_Background: #edf0f3;--sapChart_ChoroplethRegion_Background: #758ca4;--sapChart_ChoroplethRegion_BorderColor: #edf0f3;--sapChart_Data_TextColor: #000;--sapChart_Data_ContrastTextColor: #fff;--sapChart_Data_InteractiveColor: #000001;--sapChart_Data_Active_Background: #dee2e5;--sapChart_OrderedColor_1: #3278be;--sapChart_OrderedColor_2: #c87b00;--sapChart_OrderedColor_3: #75980b;--sapChart_OrderedColor_4: #df1278;--sapChart_OrderedColor_5: #8b47d7;--sapChart_OrderedColor_6: #049f9a;--sapChart_OrderedColor_7: #0070f2;--sapChart_OrderedColor_8: #cc00dc;--sapChart_OrderedColor_9: #798c77;--sapChart_OrderedColor_10: #da6c6c;--sapChart_OrderedColor_11: #5d36ff;--sapChart_OrderedColor_12: #a68a5b;--sapChart_Bad: #f53232;--sapChart_Critical: #e26300;--sapChart_Good: #30914c;--sapChart_Neutral: #758ca4;--sapChart_Sequence_1_Plus3: #84b8eb;--sapChart_Sequence_1_Plus3_TextColor: #000;--sapChart_Sequence_1_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus2: #468acd;--sapChart_Sequence_1_Plus2_TextColor: #000;--sapChart_Sequence_1_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1_Plus1: #3c8cdd;--sapChart_Sequence_1_Plus1_TextColor: #000;--sapChart_Sequence_1_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_1: #3278be;--sapChart_Sequence_1_TextColor: #fff;--sapChart_Sequence_1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_BorderColor: #3278be;--sapChart_Sequence_1_Minus1: #31669c;--sapChart_Sequence_1_Minus1_TextColor: #fff;--sapChart_Sequence_1_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus2: #31669c;--sapChart_Sequence_1_Minus2_TextColor: #fff;--sapChart_Sequence_1_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus3: #204060;--sapChart_Sequence_1_Minus3_TextColor: #fff;--sapChart_Sequence_1_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus4: #19334e;--sapChart_Sequence_1_Minus4_TextColor: #fff;--sapChart_Sequence_1_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_1_Minus5: #13263a;--sapChart_Sequence_1_Minus5_TextColor: #fff;--sapChart_Sequence_1_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Plus3: #efbf72;--sapChart_Sequence_2_Plus3_TextColor: #000;--sapChart_Sequence_2_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus2: #eaaa44;--sapChart_Sequence_2_Plus2_TextColor: #000;--sapChart_Sequence_2_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_Plus1: #e29419;--sapChart_Sequence_2_Plus1_TextColor: #000;--sapChart_Sequence_2_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2: #c87b00;--sapChart_Sequence_2_TextColor: #000;--sapChart_Sequence_2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_2_BorderColor: #9f6200;--sapChart_Sequence_2_Minus1: #9f6200;--sapChart_Sequence_2_Minus1_TextColor: #fff;--sapChart_Sequence_2_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus2: #7c4c00;--sapChart_Sequence_2_Minus2_TextColor: #fff;--sapChart_Sequence_2_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus3: #623c00;--sapChart_Sequence_2_Minus3_TextColor: #fff;--sapChart_Sequence_2_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus4: #623c00;--sapChart_Sequence_2_Minus4_TextColor: #fff;--sapChart_Sequence_2_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_2_Minus5: #2f1d00;--sapChart_Sequence_2_Minus5_TextColor: #fff;--sapChart_Sequence_2_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Plus3: #b9d369;--sapChart_Sequence_3_Plus3_TextColor: #000;--sapChart_Sequence_3_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus2: #a6c742;--sapChart_Sequence_3_Plus2_TextColor: #000;--sapChart_Sequence_3_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_Plus1: #8fad33;--sapChart_Sequence_3_Plus1_TextColor: #000;--sapChart_Sequence_3_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3: #75980b;--sapChart_Sequence_3_TextColor: #000;--sapChart_Sequence_3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_3_BorderColor: #587208;--sapChart_Sequence_3_Minus1: #587208;--sapChart_Sequence_3_Minus1_TextColor: #fff;--sapChart_Sequence_3_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus2: #3e5106;--sapChart_Sequence_3_Minus2_TextColor: #fff;--sapChart_Sequence_3_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus3: #2c3904;--sapChart_Sequence_3_Minus3_TextColor: #fff;--sapChart_Sequence_3_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus4: #212b03;--sapChart_Sequence_3_Minus4_TextColor: #fff;--sapChart_Sequence_3_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_3_Minus5: #161c02;--sapChart_Sequence_3_Minus5_TextColor: #fff;--sapChart_Sequence_3_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Plus3: #f473b3;--sapChart_Sequence_4_Plus3_TextColor: #000;--sapChart_Sequence_4_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus2: #f14d9e;--sapChart_Sequence_4_Plus2_TextColor: #000;--sapChart_Sequence_4_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4_Plus1: #ee278a;--sapChart_Sequence_4_Plus1_TextColor: #000;--sapChart_Sequence_4_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_4: #df1278;--sapChart_Sequence_4_TextColor: #fff;--sapChart_Sequence_4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_BorderColor: #df1278;--sapChart_Sequence_4_Minus1: #b90f64;--sapChart_Sequence_4_Minus1_TextColor: #fff;--sapChart_Sequence_4_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus2: #930c4f;--sapChart_Sequence_4_Minus2_TextColor: #fff;--sapChart_Sequence_4_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus3: #770a40;--sapChart_Sequence_4_Minus3_TextColor: #fff;--sapChart_Sequence_4_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus4: #51072c;--sapChart_Sequence_4_Minus4_TextColor: #fff;--sapChart_Sequence_4_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_4_Minus5: #3a051f;--sapChart_Sequence_4_Minus5_TextColor: #fff;--sapChart_Sequence_4_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Plus3: #d5bcf0;--sapChart_Sequence_5_Plus3_TextColor: #000;--sapChart_Sequence_5_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus2: #b994e0;--sapChart_Sequence_5_Plus2_TextColor: #000;--sapChart_Sequence_5_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5_Plus1: #a679d8;--sapChart_Sequence_5_Plus1_TextColor: #000;--sapChart_Sequence_5_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_5: #8b47d7;--sapChart_Sequence_5_TextColor: #fff;--sapChart_Sequence_5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_BorderColor: #8b47d7;--sapChart_Sequence_5_Minus1: #7236b5;--sapChart_Sequence_5_Minus1_TextColor: #fff;--sapChart_Sequence_5_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus2: #5e2c96;--sapChart_Sequence_5_Minus2_TextColor: #fff;--sapChart_Sequence_5_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus3: #522682;--sapChart_Sequence_5_Minus3_TextColor: #fff;--sapChart_Sequence_5_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus4: #46216f;--sapChart_Sequence_5_Minus4_TextColor: #fff;--sapChart_Sequence_5_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_5_Minus5: #341358;--sapChart_Sequence_5_Minus5_TextColor: #fff;--sapChart_Sequence_5_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Plus3: #64ede9;--sapChart_Sequence_6_Plus3_TextColor: #000;--sapChart_Sequence_6_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus2: #2ee0da;--sapChart_Sequence_6_Plus2_TextColor: #000;--sapChart_Sequence_6_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_Plus1: #05c7c1;--sapChart_Sequence_6_Plus1_TextColor: #000;--sapChart_Sequence_6_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6: #049f9a;--sapChart_Sequence_6_TextColor: #000;--sapChart_Sequence_6_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_6_BorderColor: #05c7c1;--sapChart_Sequence_6_Minus1: #02837f;--sapChart_Sequence_6_Minus1_TextColor: #fff;--sapChart_Sequence_6_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus2: #006663;--sapChart_Sequence_6_Minus2_TextColor: #fff;--sapChart_Sequence_6_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus3: #00514f;--sapChart_Sequence_6_Minus3_TextColor: #fff;--sapChart_Sequence_6_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus4: #003d3b;--sapChart_Sequence_6_Minus4_TextColor: #fff;--sapChart_Sequence_6_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_6_Minus5: #002322;--sapChart_Sequence_6_Minus5_TextColor: #fff;--sapChart_Sequence_6_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Plus3: #68aeff;--sapChart_Sequence_7_Plus3_TextColor: #000;--sapChart_Sequence_7_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus2: #4098ff;--sapChart_Sequence_7_Plus2_TextColor: #000;--sapChart_Sequence_7_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7_Plus1: #1c85ff;--sapChart_Sequence_7_Plus1_TextColor: #000;--sapChart_Sequence_7_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_7: #0070f2;--sapChart_Sequence_7_TextColor: #fff;--sapChart_Sequence_7_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_BorderColor: #0070f2;--sapChart_Sequence_7_Minus1: #0062d3;--sapChart_Sequence_7_Minus1_TextColor: #fff;--sapChart_Sequence_7_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus2: #0054b5;--sapChart_Sequence_7_Minus2_TextColor: #fff;--sapChart_Sequence_7_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus3: #00418c;--sapChart_Sequence_7_Minus3_TextColor: #fff;--sapChart_Sequence_7_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus4: #00244f;--sapChart_Sequence_7_Minus4_TextColor: #fff;--sapChart_Sequence_7_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_7_Minus5: #001b3a;--sapChart_Sequence_7_Minus5_TextColor: #fff;--sapChart_Sequence_7_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Plus3: #f462ff;--sapChart_Sequence_8_Plus3_TextColor: #000;--sapChart_Sequence_8_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus2: #f034ff;--sapChart_Sequence_8_Plus2_TextColor: #000;--sapChart_Sequence_8_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8_Plus1: #ed0bff;--sapChart_Sequence_8_Plus1_TextColor: #000;--sapChart_Sequence_8_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_8: #cc00dc;--sapChart_Sequence_8_TextColor: #fff;--sapChart_Sequence_8_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_BorderColor: #cc00dc;--sapChart_Sequence_8_Minus1: #a600b3;--sapChart_Sequence_8_Minus1_TextColor: #fff;--sapChart_Sequence_8_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus2: #80008a;--sapChart_Sequence_8_Minus2_TextColor: #fff;--sapChart_Sequence_8_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus3: #6d0076;--sapChart_Sequence_8_Minus3_TextColor: #fff;--sapChart_Sequence_8_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus4: #56005d;--sapChart_Sequence_8_Minus4_TextColor: #fff;--sapChart_Sequence_8_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_8_Minus5: #350039;--sapChart_Sequence_8_Minus5_TextColor: #fff;--sapChart_Sequence_8_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Plus3: #bdc6bc;--sapChart_Sequence_9_Plus3_TextColor: #000;--sapChart_Sequence_9_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus2: #b5bfb4;--sapChart_Sequence_9_Plus2_TextColor: #000;--sapChart_Sequence_9_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_Plus1: #97a695;--sapChart_Sequence_9_Plus1_TextColor: #000;--sapChart_Sequence_9_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9: #798c77;--sapChart_Sequence_9_TextColor: #000;--sapChart_Sequence_9_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_9_BorderColor: #798c77;--sapChart_Sequence_9_Minus1: #667664;--sapChart_Sequence_9_Minus1_TextColor: #fff;--sapChart_Sequence_9_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus2: #536051;--sapChart_Sequence_9_Minus2_TextColor: #fff;--sapChart_Sequence_9_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus3: #404a3f;--sapChart_Sequence_9_Minus3_TextColor: #fff;--sapChart_Sequence_9_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus4: #2d342c;--sapChart_Sequence_9_Minus4_TextColor: #fff;--sapChart_Sequence_9_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_9_Minus5: #1e231e;--sapChart_Sequence_9_Minus5_TextColor: #fff;--sapChart_Sequence_9_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Plus3: #f1c6c6;--sapChart_Sequence_10_Plus3_TextColor: #000;--sapChart_Sequence_10_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus2: #eaadad;--sapChart_Sequence_10_Plus2_TextColor: #000;--sapChart_Sequence_10_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Plus1: #e28d8d;--sapChart_Sequence_10_Plus1_TextColor: #000;--sapChart_Sequence_10_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10: #da6c6c;--sapChart_Sequence_10_TextColor: #000;--sapChart_Sequence_10_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_BorderColor: #b75757;--sapChart_Sequence_10_Minus1: #b75757;--sapChart_Sequence_10_Minus1_TextColor: #000;--sapChart_Sequence_10_Minus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_10_Minus2: #9d4343;--sapChart_Sequence_10_Minus2_TextColor: #fff;--sapChart_Sequence_10_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus3: #803737;--sapChart_Sequence_10_Minus3_TextColor: #fff;--sapChart_Sequence_10_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus4: #672c2c;--sapChart_Sequence_10_Minus4_TextColor: #fff;--sapChart_Sequence_10_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_10_Minus5: #562424;--sapChart_Sequence_10_Minus5_TextColor: #fff;--sapChart_Sequence_10_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Plus3: #c0b0ff;--sapChart_Sequence_11_Plus3_TextColor: #000;--sapChart_Sequence_11_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus2: #9b83ff;--sapChart_Sequence_11_Plus2_TextColor: #000;--sapChart_Sequence_11_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11_Plus1: #8669ff;--sapChart_Sequence_11_Plus1_TextColor: #000;--sapChart_Sequence_11_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_11: #5d36ff;--sapChart_Sequence_11_TextColor: #fff;--sapChart_Sequence_11_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_BorderColor: #5d36ff;--sapChart_Sequence_11_Minus1: #4b25e7;--sapChart_Sequence_11_Minus1_TextColor: #fff;--sapChart_Sequence_11_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus2: #3a17cd;--sapChart_Sequence_11_Minus2_TextColor: #fff;--sapChart_Sequence_11_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus3: #2f13a8;--sapChart_Sequence_11_Minus3_TextColor: #fff;--sapChart_Sequence_11_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus4: #250f83;--sapChart_Sequence_11_Minus4_TextColor: #fff;--sapChart_Sequence_11_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_11_Minus5: #2f13a8;--sapChart_Sequence_11_Minus5_TextColor: #fff;--sapChart_Sequence_11_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Plus3: #e4ddcf;--sapChart_Sequence_12_Plus3_TextColor: #000;--sapChart_Sequence_12_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus2: #dacebb;--sapChart_Sequence_12_Plus2_TextColor: #000;--sapChart_Sequence_12_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_Plus1: #c4b293;--sapChart_Sequence_12_Plus1_TextColor: #000;--sapChart_Sequence_12_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12: #a68a5b;--sapChart_Sequence_12_TextColor: #000;--sapChart_Sequence_12_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_12_BorderColor: #a68a5b;--sapChart_Sequence_12_Minus1: #8c744c;--sapChart_Sequence_12_Minus1_TextColor: #fff;--sapChart_Sequence_12_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus2: #786441;--sapChart_Sequence_12_Minus2_TextColor: #fff;--sapChart_Sequence_12_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus3: #5e4e33;--sapChart_Sequence_12_Minus3_TextColor: #fff;--sapChart_Sequence_12_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus4: #433825;--sapChart_Sequence_12_Minus4_TextColor: #fff;--sapChart_Sequence_12_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_12_Minus5: #30271a;--sapChart_Sequence_12_Minus5_TextColor: #fff;--sapChart_Sequence_12_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Plus3: #fdcece;--sapChart_Sequence_Bad_Plus3_TextColor: #000;--sapChart_Sequence_Bad_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus2: #fa9d9d;--sapChart_Sequence_Bad_Plus2_TextColor: #000;--sapChart_Sequence_Bad_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_Plus1: #f86c6c;--sapChart_Sequence_Bad_Plus1_TextColor: #000;--sapChart_Sequence_Bad_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad: #f53232;--sapChart_Sequence_Bad_TextColor: #000;--sapChart_Sequence_Bad_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Bad_BorderColor: #f53232;--sapChart_Sequence_Bad_Minus1: #d00a0a;--sapChart_Sequence_Bad_Minus1_TextColor: #fff;--sapChart_Sequence_Bad_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus2: #a90808;--sapChart_Sequence_Bad_Minus2_TextColor: #fff;--sapChart_Sequence_Bad_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus3: #830606;--sapChart_Sequence_Bad_Minus3_TextColor: #fff;--sapChart_Sequence_Bad_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus4: #570404;--sapChart_Sequence_Bad_Minus4_TextColor: #fff;--sapChart_Sequence_Bad_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Bad_Minus5: #320000;--sapChart_Sequence_Bad_Minus5_TextColor: #fff;--sapChart_Sequence_Bad_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Plus3: #ffb881;--sapChart_Sequence_Critical_Plus3_TextColor: #000;--sapChart_Sequence_Critical_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus2: #ff933f;--sapChart_Sequence_Critical_Plus2_TextColor: #000;--sapChart_Sequence_Critical_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_Plus1: #ff760c;--sapChart_Sequence_Critical_Plus1_TextColor: #000;--sapChart_Sequence_Critical_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical: #e26300;--sapChart_Sequence_Critical_TextColor: #000;--sapChart_Sequence_Critical_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Critical_BorderColor: #e26300;--sapChart_Sequence_Critical_Minus1: #c35600;--sapChart_Sequence_Critical_Minus1_TextColor: #fff;--sapChart_Sequence_Critical_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus2: #aa4a00;--sapChart_Sequence_Critical_Minus2_TextColor: #fff;--sapChart_Sequence_Critical_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus3: #903f00;--sapChart_Sequence_Critical_Minus3_TextColor: #fff;--sapChart_Sequence_Critical_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus4: #6d3000;--sapChart_Sequence_Critical_Minus4_TextColor: #fff;--sapChart_Sequence_Critical_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Critical_Minus5: #492000;--sapChart_Sequence_Critical_Minus5_TextColor: #fff;--sapChart_Sequence_Critical_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Plus3: #88d79f;--sapChart_Sequence_Good_Plus3_TextColor: #000;--sapChart_Sequence_Good_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus2: #56c776;--sapChart_Sequence_Good_Plus2_TextColor: #000;--sapChart_Sequence_Good_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_Plus1: #3ab05c;--sapChart_Sequence_Good_Plus1_TextColor: #000;--sapChart_Sequence_Good_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good: #30914c;--sapChart_Sequence_Good_TextColor: #000;--sapChart_Sequence_Good_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Good_BorderColor: #30914c;--sapChart_Sequence_Good_Minus1: #287a40;--sapChart_Sequence_Good_Minus1_TextColor: #fff;--sapChart_Sequence_Good_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus2: #226736;--sapChart_Sequence_Good_Minus2_TextColor: #fff;--sapChart_Sequence_Good_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus3: #1c542c;--sapChart_Sequence_Good_Minus3_TextColor: #fff;--sapChart_Sequence_Good_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus4: #13391e;--sapChart_Sequence_Good_Minus4_TextColor: #fff;--sapChart_Sequence_Good_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Good_Minus5: #0a1e10;--sapChart_Sequence_Good_Minus5_TextColor: #fff;--sapChart_Sequence_Good_Minus5_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Plus3: #edf0f3;--sapChart_Sequence_Neutral_Plus3_TextColor: #000;--sapChart_Sequence_Neutral_Plus3_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus2: #c2ccd7;--sapChart_Sequence_Neutral_Plus2_TextColor: #000;--sapChart_Sequence_Neutral_Plus2_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_Plus1: #9aabbc;--sapChart_Sequence_Neutral_Plus1_TextColor: #000;--sapChart_Sequence_Neutral_Plus1_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral: #758ca4;--sapChart_Sequence_Neutral_TextColor: #000;--sapChart_Sequence_Neutral_TextShadow: 0 0 .125rem #fff;--sapChart_Sequence_Neutral_BorderColor: #758ca4;--sapChart_Sequence_Neutral_Minus1: #5b728b;--sapChart_Sequence_Neutral_Minus1_TextColor: #fff;--sapChart_Sequence_Neutral_Minus1_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus2: #495e74;--sapChart_Sequence_Neutral_Minus2_TextColor: #fff;--sapChart_Sequence_Neutral_Minus2_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus3: #364a5f;--sapChart_Sequence_Neutral_Minus3_TextColor: #fff;--sapChart_Sequence_Neutral_Minus3_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus4: #233649;--sapChart_Sequence_Neutral_Minus4_TextColor: #fff;--sapChart_Sequence_Neutral_Minus4_TextShadow: 0 0 .125rem #223548;--sapChart_Sequence_Neutral_Minus5: #1a2633;--sapChart_Sequence_Neutral_Minus5_TextColor: #fff;--sapChart_Sequence_Neutral_Minus5_TextShadow: 0 0 .125rem #223548;}\n'},aB={packageName:"@ui5/webcomponents",fileName:"themes/sap_horizon/parameters-bundle.css.ts",content:':root{--ui5-v2-4-0-avatar-hover-box-shadow-offset: 0px 0px 0px .0625rem;--ui5-v2-4-0-avatar-initials-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-border-radius-img-deduction: .0625rem;--_ui5-v2-4-0_avatar_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_focus_width: .0625rem;--_ui5-v2-4-0_avatar_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_avatar_overflow_button_focus_offset: .0625rem;--_ui5-v2-4-0_avatar_focus_offset: .1875rem;--ui5-v2-4-0-avatar-initials-border: .0625rem solid var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-border-radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_avatar_fontsize_XS: 1rem;--_ui5-v2-4-0_avatar_fontsize_S: 1.125rem;--_ui5-v2-4-0_avatar_fontsize_M: 1.5rem;--_ui5-v2-4-0_avatar_fontsize_L: 2.25rem;--_ui5-v2-4-0_avatar_fontsize_XL: 3rem;--ui5-v2-4-0-avatar-accent1: var(--sapAvatar_1_Background);--ui5-v2-4-0-avatar-accent2: var(--sapAvatar_2_Background);--ui5-v2-4-0-avatar-accent3: var(--sapAvatar_3_Background);--ui5-v2-4-0-avatar-accent4: var(--sapAvatar_4_Background);--ui5-v2-4-0-avatar-accent5: var(--sapAvatar_5_Background);--ui5-v2-4-0-avatar-accent6: var(--sapAvatar_6_Background);--ui5-v2-4-0-avatar-accent7: var(--sapAvatar_7_Background);--ui5-v2-4-0-avatar-accent8: var(--sapAvatar_8_Background);--ui5-v2-4-0-avatar-accent9: var(--sapAvatar_9_Background);--ui5-v2-4-0-avatar-accent10: var(--sapAvatar_10_Background);--ui5-v2-4-0-avatar-placeholder: var(--sapContent_ImagePlaceholderBackground);--ui5-v2-4-0-avatar-accent1-color: var(--sapAvatar_1_TextColor);--ui5-v2-4-0-avatar-accent2-color: var(--sapAvatar_2_TextColor);--ui5-v2-4-0-avatar-accent3-color: var(--sapAvatar_3_TextColor);--ui5-v2-4-0-avatar-accent4-color: var(--sapAvatar_4_TextColor);--ui5-v2-4-0-avatar-accent5-color: var(--sapAvatar_5_TextColor);--ui5-v2-4-0-avatar-accent6-color: var(--sapAvatar_6_TextColor);--ui5-v2-4-0-avatar-accent7-color: var(--sapAvatar_7_TextColor);--ui5-v2-4-0-avatar-accent8-color: var(--sapAvatar_8_TextColor);--ui5-v2-4-0-avatar-accent9-color: var(--sapAvatar_9_TextColor);--ui5-v2-4-0-avatar-accent10-color: var(--sapAvatar_10_TextColor);--ui5-v2-4-0-avatar-placeholder-color: var(--sapContent_ImagePlaceholderForegroundColor);--ui5-v2-4-0-avatar-accent1-border-color: var(--sapAvatar_1_BorderColor);--ui5-v2-4-0-avatar-accent2-border-color: var(--sapAvatar_2_BorderColor);--ui5-v2-4-0-avatar-accent3-border-color: var(--sapAvatar_3_BorderColor);--ui5-v2-4-0-avatar-accent4-border-color: var(--sapAvatar_4_BorderColor);--ui5-v2-4-0-avatar-accent5-border-color: var(--sapAvatar_5_BorderColor);--ui5-v2-4-0-avatar-accent6-border-color: var(--sapAvatar_6_BorderColor);--ui5-v2-4-0-avatar-accent7-border-color: var(--sapAvatar_7_BorderColor);--ui5-v2-4-0-avatar-accent8-border-color: var(--sapAvatar_8_BorderColor);--ui5-v2-4-0-avatar-accent9-border-color: var(--sapAvatar_9_BorderColor);--ui5-v2-4-0-avatar-accent10-border-color: var(--sapAvatar_10_BorderColor);--ui5-v2-4-0-avatar-placeholder-border-color: var(--sapContent_ImagePlaceholderBackground);--_ui5-v2-4-0_avatar_icon_XS: var(--_ui5-v2-4-0_avatar_fontsize_XS);--_ui5-v2-4-0_avatar_icon_S: var(--_ui5-v2-4-0_avatar_fontsize_S);--_ui5-v2-4-0_avatar_icon_M: var(--_ui5-v2-4-0_avatar_fontsize_M);--_ui5-v2-4-0_avatar_icon_L: var(--_ui5-v2-4-0_avatar_fontsize_L);--_ui5-v2-4-0_avatar_icon_XL: var(--_ui5-v2-4-0_avatar_fontsize_XL);--_ui5-v2-4-0_avatar_group_button_focus_border: none;--_ui5-v2-4-0_avatar_group_focus_border_radius: .375rem;--_ui5-v2-4-0-tag-height: 1rem;--_ui5-v2-4-0-tag-icon-width: .75rem;--ui5-v2-4-0-tag-text-shadow: var(--sapContent_TextShadow);--ui5-v2-4-0-tag-contrast-text-shadow: var(--sapContent_ContrastTextShadow);--ui5-v2-4-0-tag-information-text-shadow: var(--ui5-v2-4-0-tag-text-shadow);--ui5-v2-4-0-tag-set2-color-scheme-1-color: var(--sapIndicationColor_1);--ui5-v2-4-0-tag-set2-color-scheme-1-background: var(--sapIndicationColor_1b);--ui5-v2-4-0-tag-set2-color-scheme-1-border: var(--sapIndicationColor_1b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-1-hover-background: var(--sapIndicationColor_1b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-color: var(--sapIndicationColor_1_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-1-active-background: var(--sapIndicationColor_1_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-1-active-border: var(--sapIndicationColor_1_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-color: var(--sapIndicationColor_2);--ui5-v2-4-0-tag-set2-color-scheme-2-background: var(--sapIndicationColor_2b);--ui5-v2-4-0-tag-set2-color-scheme-2-border: var(--sapIndicationColor_2b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-2-hover-background: var(--sapIndicationColor_2b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-color: var(--sapIndicationColor_2_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-2-active-background: var(--sapIndicationColor_2_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-2-active-border: var(--sapIndicationColor_2_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-color: var(--sapIndicationColor_3);--ui5-v2-4-0-tag-set2-color-scheme-3-background: var(--sapIndicationColor_3b);--ui5-v2-4-0-tag-set2-color-scheme-3-border: var(--sapIndicationColor_3b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-3-hover-background: var(--sapIndicationColor_3b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-color: var(--sapIndicationColor_3_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-3-active-background: var(--sapIndicationColor_3_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-3-active-border: var(--sapIndicationColor_3_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-color: var(--sapIndicationColor_4);--ui5-v2-4-0-tag-set2-color-scheme-4-background: var(--sapIndicationColor_4b);--ui5-v2-4-0-tag-set2-color-scheme-4-border: var(--sapIndicationColor_4b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-4-hover-background: var(--sapIndicationColor_4b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-color: var(--sapIndicationColor_4_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-4-active-background: var(--sapIndicationColor_4_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-4-active-border: var(--sapIndicationColor_4_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-color: var(--sapIndicationColor_5);--ui5-v2-4-0-tag-set2-color-scheme-5-background: var(--sapIndicationColor_5b);--ui5-v2-4-0-tag-set2-color-scheme-5-border: var(--sapIndicationColor_5b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-5-hover-background: var(--sapIndicationColor_5b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-color: var(--sapIndicationColor_5_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-5-active-background: var(--sapIndicationColor_5_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-5-active-border: var(--sapIndicationColor_5_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-color: var(--sapIndicationColor_6);--ui5-v2-4-0-tag-set2-color-scheme-6-background: var(--sapIndicationColor_6b);--ui5-v2-4-0-tag-set2-color-scheme-6-border: var(--sapIndicationColor_6b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-6-hover-background: var(--sapIndicationColor_6b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-color: var(--sapIndicationColor_6_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-6-active-background: var(--sapIndicationColor_6_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-6-active-border: var(--sapIndicationColor_6_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-color: var(--sapIndicationColor_7);--ui5-v2-4-0-tag-set2-color-scheme-7-background: var(--sapIndicationColor_7b);--ui5-v2-4-0-tag-set2-color-scheme-7-border: var(--sapIndicationColor_7b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-7-hover-background: var(--sapIndicationColor_7b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-color: var(--sapIndicationColor_7_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-7-active-background: var(--sapIndicationColor_7_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-7-active-border: var(--sapIndicationColor_7_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-color: var(--sapIndicationColor_8);--ui5-v2-4-0-tag-set2-color-scheme-8-background: var(--sapIndicationColor_8b);--ui5-v2-4-0-tag-set2-color-scheme-8-border: var(--sapIndicationColor_8b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-8-hover-background: var(--sapIndicationColor_8b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-color: var(--sapIndicationColor_8_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-8-active-background: var(--sapIndicationColor_8_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-8-active-border: var(--sapIndicationColor_8_Active_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-9-color: var(--sapIndicationColor_9);--ui5-v2-4-0-tag-set2-color-scheme-9-background: var(--sapIndicationColor_9b);--ui5-v2-4-0-tag-set2-color-scheme-9-border: var(--sapIndicationColor_9b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-color: var(--sapIndicationColor_10);--ui5-v2-4-0-tag-set2-color-scheme-10-background: var(--sapIndicationColor_10b);--ui5-v2-4-0-tag-set2-color-scheme-10-border: var(--sapIndicationColor_10b_BorderColor);--ui5-v2-4-0-tag-set2-color-scheme-10-hover-background: var(--sapIndicationColor_10b_Hover_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-color: var(--sapIndicationColor_10_Active_TextColor);--ui5-v2-4-0-tag-set2-color-scheme-10-active-background: var(--sapIndicationColor_10_Active_Background);--ui5-v2-4-0-tag-set2-color-scheme-10-active-border: var(--sapIndicationColor_10_Active_BorderColor);--_ui5-v2-4-0-tag-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-min-width_size_l: 1.75rem;--_ui5-v2-4-0-tag-font-size_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_width_size_l: 1.25rem;--_ui5-v2-4-0-tag-icon_min_height_size_l:1.25rem;--_ui5-v2-4-0-tag-icon_height_size_l: 1.25rem;--_ui5-v2-4-0-tag-text_padding_size_l: .125rem .25rem;--_ui5-v2-4-0-tag-text-height_size_l: 1.5rem;--_ui5-v2-4-0-tag-text-padding: .1875rem .25rem;--_ui5-v2-4-0-tag-padding-inline-icon-only: .313rem;--_ui5-v2-4-0-tag-text-transform: none;--_ui5-v2-4-0-tag-icon-gap: .25rem;--_ui5-v2-4-0-tag-font-size: var(--sapFontSize);--_ui5-v2-4-0-tag-font: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0-tag-font-weight: normal;--_ui5-v2-4-0-tag-letter-spacing: normal;--_ui5-v2-4-0_bar_base_height: 2.75rem;--_ui5-v2-4-0_bar_subheader_height: 3rem;--_ui5-v2-4-0_bar-start-container-padding-start: 2rem;--_ui5-v2-4-0_bar-mid-container-padding-start-end: .5rem;--_ui5-v2-4-0_bar-end-container-padding-end: 2rem;--_ui5-v2-4-0_bar-start-container-padding-start_S: 1rem;--_ui5-v2-4-0_bar-start-container-padding-start_XL: 3rem;--_ui5-v2-4-0_bar-end-container-padding-end_S: 1rem;--_ui5-v2-4-0_bar-end-container-padding-end_XL: 3rem;--_ui5-v2-4-0_bar_subheader_margin-top: -.0625rem;--_ui5-v2-4-0_breadcrumbs_margin: 0 0 .5rem 0;--_ui5-v2-4-0_busy_indicator_block_layer: color-mix(in oklch, transparent, var(--sapBlockLayer_Background) 20%);--_ui5-v2-4-0_busy_indicator_color: var(--sapContent_BusyColor);--_ui5-v2-4-0_busy_indicator_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0-calendar-legend-root-padding: .75rem;--_ui5-v2-4-0-calendar-legend-root-width: 18.5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: 0;--_ui5-v2-4-0-calendar-legend-item-root-width: 7.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border: var(--sapContent_FocusWidth) solid var(--sapContent_FocusColor);--_ui5-v2-4-0_card_box_shadow: var(--sapContent_Shadow0);--_ui5-v2-4-0_card_header_border_color: var(--sapTile_SeparatorColor);--_ui5-v2-4-0_card_header_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_card_header_focus_bottom_radius: 0px;--_ui5-v2-4-0_card_header_title_font_weight: normal;--_ui5-v2-4-0_card_header_subtitle_margin_top: .25rem;--_ui5-v2-4-0_card_hover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_card_header_focus_offset: 0px;--_ui5-v2-4-0_card_header_focus_radius: var(--_ui5-v2-4-0_card_border-radius);--_ui5-v2-4-0_card_header_title_font_family: var(--sapFontHeaderFamily);--_ui5-v2-4-0_card_header_title_font_size: var(--sapFontHeader6Size);--_ui5-v2-4-0_card_header_hover_bg: var(--sapTile_Hover_Background);--_ui5-v2-4-0_card_header_active_bg: var(--sapTile_Active_Background);--_ui5-v2-4-0_card_header_border: none;--_ui5-v2-4-0_card_border-radius: var(--sapTile_BorderCornerRadius);--_ui5-v2-4-0_card_header_padding: 1rem 1rem .75rem 1rem;--_ui5-v2-4-0_card_border: none;--ui5-v2-4-0_carousel_background_color_solid: var(--sapGroup_ContentBackground);--ui5-v2-4-0_carousel_background_color_translucent: var(--sapBackgroundColor);--ui5-v2-4-0_carousel_button_size: 2.5rem;--ui5-v2-4-0_carousel_inactive_dot_size: .25rem;--ui5-v2-4-0_carousel_inactive_dot_margin: 0 .375rem;--ui5-v2-4-0_carousel_inactive_dot_border: 1px solid var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_inactive_dot_background: var(--sapContent_ForegroundBorderColor);--ui5-v2-4-0_carousel_active_dot_border: 1px solid var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_active_dot_background: var(--sapContent_Selected_ForegroundColor);--ui5-v2-4-0_carousel_navigation_button_active_box_shadow: none;--_ui5-v2-4-0_checkbox_box_shadow: none;--_ui5-v2-4-0_checkbox_transition: unset;--_ui5-v2-4-0_checkbox_focus_border: none;--_ui5-v2-4-0_checkbox_border_radius: 0;--_ui5-v2-4-0_checkbox_focus_outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_checkbox_outer_hover_background: transparent;--_ui5-v2-4-0_checkbox_inner_width_height: 1.375rem;--_ui5-v2-4-0_checkbox_inner_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_information_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_warning_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_error_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_success_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_default_box_shadow: none;--_ui5-v2-4-0_checkbox_inner_background: var(--sapField_Background);--_ui5-v2-4-0_checkbox_wrapped_focus_padding: .375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_checkbox_compact_wrapper_padding: .5rem;--_ui5-v2-4-0_checkbox_compact_width_height: 2rem;--_ui5-v2-4-0_checkbox_compact_inner_size: 1rem;--_ui5-v2-4-0_checkbox_compact_focus_position: .375rem;--_ui5-v2-4-0_checkbox_label_offset: var(--_ui5-v2-4-0_checkbox_wrapper_padding);--_ui5-v2-4-0_checkbox_disabled_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_checkbox_default_focus_border: none;--_ui5-v2-4-0_checkbox_focus_outline_display: block;--_ui5-v2-4-0_checkbox_wrapper_padding: .6875rem;--_ui5-v2-4-0_checkbox_width_height: 2.75rem;--_ui5-v2-4-0_checkbox_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_checkbox_inner_border: solid var(--sapField_BorderWidth) var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_checkbox_checkmark_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_checkbox_hover_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_hover_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_inner_selected_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_checkbox_inner_active_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_checkbox_active_background: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_checkbox_inner_readonly_border: var(--sapElement_BorderWidth) var(--sapField_ReadOnly_BorderColor) dashed;--_ui5-v2-4-0_checkbox_inner_error_border: var(--sapField_InvalidBorderWidth) solid var(--sapField_InvalidColor);--_ui5-v2-4-0_checkbox_inner_error_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_warning_border: var(--sapField_WarningBorderWidth) solid var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_warning_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_checkmark_warning_color: var(--sapField_WarningColor);--_ui5-v2-4-0_checkbox_inner_success_border: var(--sapField_SuccessBorderWidth) solid var(--sapField_SuccessColor);--_ui5-v2-4-0_checkbox_inner_success_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_inner_information_color: var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_border: var(--sapField_InformationBorderWidth) solid var(--sapField_InformationColor);--_ui5-v2-4-0_checkbox_inner_information_background_hover: var(--sapField_Hover_Background);--_ui5-v2-4-0_checkbox_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_checkbox_focus_position: .3125rem;--_ui5-v2-4-0_checkbox_focus_border_radius: .5rem;--_ui5-v2-4-0_checkbox_right_focus_distance: var(--_ui5-v2-4-0_checkbox_focus_position);--_ui5-v2-4-0_color-palette-item-after-focus-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-outer-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-inner-border-radius: .1875rem;--_ui5-v2-4-0_color-palette-item-after-not-focus-color: .0625rem solid var(--sapGroup_ContentBackground);--_ui5-v2-4-0_color-palette-item-container-sides-padding: .3125rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .6875rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1.5rem;--_ui5-v2-4-0_color-palette-item-container-padding: var(--_ui5-v2-4-0_color-palette-item-container-sides-padding) var(--_ui5-v2-4-0_color-palette-item-container-rows-padding);--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 9.5rem;--_ui5-v2-4-0_color-palette-button-height: 3rem;--_ui5-v2-4-0_color-palette-item-before-focus-color: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.3125rem;--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-color: .0625rem solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_color-palette-item-selected-focused-border-after: none;--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset: .0625rem;--_ui5-v2-4-0_color-palette-item-before-focus-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-after-focus-border-radius: .3125rem;--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius: .4375rem;--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius: .375rem;--_ui5-v2-4-0_color-palette-item-selected-focused-border-before: -.0625rem;--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border: none;--_ui5-v2-4-0_color-palette-item-selected-focused-border: none;--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset: -.375rem -.375rem;--_ui5-v2-4-0-color-palette-item-mobile-focus-inset: 0px;--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border: none;--_ui5-v2-4-0_color_picker_circle_outer_border: .0625rem solid var(--sapContent_ContrastShadowColor);--_ui5-v2-4-0_color_picker_circle_inner_border: .0625rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_circle_inner_circle_size: .5625rem;--_ui5-v2-4-0_color_picker_slider_handle_box_shadow: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_border: .125rem solid var(--sapField_BorderColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_hover: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_outline_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_color_picker_slider_handle_margin_top: -.1875rem;--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top: var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top);--_ui5-v2-4-0_color_picker_slider_container_margin_top: -11px;--_ui5-v2-4-0_color_picker_slider_handle_inline_focus: 1px solid var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_datepicker_icon_border: none;--_ui5-v2-4-0-datepicker-hover-background: var(--sapField_Hover_Background);--_ui5-v2-4-0-datepicker_border_radius: .25rem;--_ui5-v2-4-0-datepicker_icon_border_radius: .125rem;--_ui5-v2-4-0_daypicker_item_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_margin: 2px;--_ui5-v2-4-0_daypicker_item_border: none;--_ui5-v2-4-0_daypicker_item_selected_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_daynames_container_height: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_daypicker_item_othermonth_background_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_othermonth_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_othermonth_hover_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_now_inner_border_radius: 0;--_ui5-v2-4-0_daypicker_item_outline_width: 1px;--_ui5-v2-4-0_daypicker_item_outline_offset: 1px;--_ui5-v2-4-0_daypicker_item_now_focus_after_width: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_focus_after_height: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_now_selected_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_daypicker_item_selected_background: transparent;--_ui5-v2-4-0_daypicker_item_outline_focus_after: none;--_ui5-v2-4-0_daypicker_item_border_focus_after: var(--_ui5-v2-4-0_daypicker_item_outline_width) dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_width_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_height_focus_after: calc(100% - .25rem) ;--_ui5-v2-4-0_daypicker_item_now_outline: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset: none;--_ui5-v2-4-0_daypicker_item_now_outline_offset_focus_after: var(--_ui5-v2-4-0_daypicker_item_now_outline_offset);--_ui5-v2-4-0_daypicker_item_selected_between_hover_background: var(--sapList_Hover_SelectionBackground);--_ui5-v2-4-0_daypicker_item_now_not_selected_inset: 0;--_ui5-v2-4-0_daypicker_item_now_border_color: var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_border_radios: .25rem;--_ui5-v2-4-0_daypicker_special_day_top: 2.5rem;--_ui5-v2-4-0_daypicker_special_day_before_border_color: var(--sapList_Background);--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_after_border_width: .125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_dot: .375rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.4375rem;--_ui5-v2-4-0_daypicker_item_border_radius: .4375rem;--_ui5-v2-4-0_daypicker_item_focus_border: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_border: .0625rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_not_selected_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_daypicker_item_selected_focus_width: .125rem;--_ui5-v2-4-0_daypicker_item_no_selected_inset: .375rem;--_ui5-v2-4-0_daypicker_item_now_border_focus_after: .125rem solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_daypicker_item_now_border_radius_focus_after: .3125rem;--_ui5-v2-4-0_day_picker_item_selected_now_border_focus: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_day_picker_item_selected_now_border_radius_focus: .1875rem;--ui5-v2-4-0-dp-item_withsecondtype_border: .375rem;--_ui5-v2-4-0_daypicker_item_now_border: .125rem solid var(--sapLegend_CurrentDateTime);--_ui5-v2-4-0_daypicker_dayname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_weekname_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_daypicker_item_selected_box_shadow: inset 0 0 0 .0625rem var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_selected_daytext_hover_background: transparent;--_ui5-v2-4-0_daypicker_item_border_radius_item: .5rem;--_ui5-v2-4-0_daypicker_item_border_radius_focus_after: .1875rem;--_ui5-v2-4-0_daypicker_item_selected_between_border: .5rem;--_ui5-v2-4-0_daypicker_item_selected_between_background: var(--sapList_SelectionBackgroundColor);--_ui5-v2-4-0_daypicker_item_selected_between_text_background: transparent;--_ui5-v2-4-0_daypicker_item_selected_between_text_font: var(--sapFontFamily);--_ui5-v2-4-0_daypicker_item_selected_text_font: var(--sapFontBoldFamily);--_ui5-v2-4-0_daypicker_item_now_box_shadow: inset 0 0 0 .35rem var(--sapList_Background);--_ui5-v2-4-0_daypicker_item_selected_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_item_now_selected_outline_offset: -.25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_inset: .25rem;--_ui5-v2-4-0_daypicker_item_now_selected_between_border: .0625rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_now_selected_between_border_radius: .1875rem;--_ui5-v2-4-0_daypicker_item_select_between_border: 1px solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_daypicker_item_weeekend_filter: brightness(105%);--_ui5-v2-4-0_daypicker_item_selected_hover: var(--sapList_Hover_Background);--_ui5-v2-4-0_daypicker_item_now_inset: .3125rem;--_ui5-v2-4-0-dp-item_withsecondtype_border: .25rem;--_ui5-v2-4-0_daypicker_item_selected__secondary_type_text_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_daypicker_two_calendar_item_now_day_text_content: "";--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_width: .125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_radius: .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_border_focus_border_radius: .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_inset: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_now_border_radius_focus: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_selected_focus_inset: .1875rem;--_ui5-v2-4-0_daypicker_two_calendar_item_no_select_focus_border_radius: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_two_calendar_item_now_selected_border_inset: .125rem;--_ui5-v2-4-0_daypicker_selected_item_special_day_width: calc(100% - .125rem) ;--_ui5-v2-4-0_daypicker_special_day_border_bottom_radius: .5rem;--_ui5-v2-4-0-daypicker_item_selected_now_border_radius: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_width: calc(100% - .1875rem) ;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 2.4375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_inset: .3125rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_now_border_radius: .25rem;--_ui5-v2-4-0_daypicker_item_now_focus_margin: 0;--_ui5-v2-4-0_daypicker_special_day_border_top: none;--_ui5-v2-4-0_daypicker_special_day_selected_border_radius_bottom: .25rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 2.125rem;--_ui5-v2-4-0_daypicker_specialday_focused_width: calc(100% - .75rem) ;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 2.3125rem;--_ui5-v2-4-0_daypicker_item_now_specialday_width: calc(100% - .5rem) ;--_ui5-v2-4-0_dialog_header_error_state_icon_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_dialog_header_information_state_icon_color: var(--sapInformativeElementColor);--_ui5-v2-4-0_dialog_header_success_state_icon_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_dialog_header_warning_state_icon_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_dialog_header_state_line_height: .0625rem;--_ui5-v2-4-0_dialog_header_focus_bottom_offset: 2px;--_ui5-v2-4-0_dialog_header_focus_top_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_left_offset: 1px;--_ui5-v2-4-0_dialog_header_focus_right_offset: 1px;--_ui5-v2-4-0_dialog_header_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_file_uploader_value_state_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_file_uploader_hover_border: none;--_ui5-v2-4-0_table_cell_valign: center;--_ui5-v2-4-0_table_cell_min_width: 2.75rem;--_ui5-v2-4-0_table_navigated_cell_width: .1875rem;--_ui5-v2-4-0_table_shadow_border_left: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_top: inset 0 var(--sapContent_FocusWidth) var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_bottom: inset 0 -1px var(--sapContent_FocusColor);--ui5-v2-4-0-form-item-layout: 1fr 2fr;--ui5-v2-4-0-form-item-layout-span1: 1fr 11fr;--ui5-v2-4-0-form-item-layout-span2: 2fr 10fr;--ui5-v2-4-0-form-item-layout-span3: 3fr 9fr;--ui5-v2-4-0-form-item-layout-span4: 4fr 8fr;--ui5-v2-4-0-form-item-layout-span5: 5fr 7fr;--ui5-v2-4-0-form-item-layout-span6: 6fr 6fr;--ui5-v2-4-0-form-item-layout-span7: 7fr 5fr;--ui5-v2-4-0-form-item-layout-span8: 8fr 4fr;--ui5-v2-4-0-form-item-layout-span9: 9fr 3fr;--ui5-v2-4-0-form-item-layout-span10: 10fr 2fr;--ui5-v2-4-0-form-item-layout-span11: 11fr 1fr;--ui5-v2-4-0-form-item-layout-span12: 1fr;--ui5-v2-4-0-form-item-label-justify: end;--ui5-v2-4-0-form-item-label-justify-span12: start;--ui5-v2-4-0-form-item-label-padding: .125rem 0;--ui5-v2-4-0-form-item-label-padding-end: .85rem;--ui5-v2-4-0-form-item-label-padding-span12: .625rem .25rem 0 .25rem;--ui5-v2-4-0-group-header-listitem-background-color: var(--sapList_GroupHeaderBackground);--ui5-v2-4-0-icon-focus-border-radius: .25rem;--_ui5-v2-4-0_input_width: 13.125rem;--_ui5-v2-4-0_input_min_width: 2.75rem;--_ui5-v2-4-0_input_height: var(--sapElement_Height);--_ui5-v2-4-0_input_compact_height: 1.625rem;--_ui5-v2-4-0_input_value_state_error_hover_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_background_color: var(--sapField_Background);--_ui5-v2-4-0_input_border_radius: var(--sapField_BorderCornerRadius);--_ui5-v2-4-0_input_placeholder_style: italic;--_ui5-v2-4-0_input_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_bottom_border_height: 0;--_ui5-v2-4-0_input_bottom_border_color: transparent;--_ui5-v2-4-0_input_focused_border_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_input_state_border_width: .125rem;--_ui5-v2-4-0_input_information_border_width: .125rem;--_ui5-v2-4-0_input_error_font_weight: normal;--_ui5-v2-4-0_input_warning_font_weight: normal;--_ui5-v2-4-0_input_focus_border_width: 1px;--_ui5-v2-4-0_input_error_warning_font_style: inherit;--_ui5-v2-4-0_input_error_warning_text_indent: 0;--_ui5-v2-4-0_input_disabled_color: var(--sapContent_DisabledTextColor);--_ui5-v2-4-0_input_disabled_font_weight: normal;--_ui5-v2-4-0_input_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0-input_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_input_readonly_border_color: var(--sapField_ReadOnly_BorderColor);--_ui5-v2-4-0_input_readonly_background: var(--sapField_ReadOnly_Background);--_ui5-v2-4-0_input_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_input_icon_min_width: 2.25rem;--_ui5-v2-4-0_input_compact_min_width: 2rem;--_ui5-v2-4-0_input_transition: none;--_ui5-v2-4-0-input-value-state-icon-display: none;--_ui5-v2-4-0_input_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_error_border_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_warning_border_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focused_value_state_success_border_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_value_state_success_border_width: 1px;--_ui5-v2-4-0_input_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0_input_focused_value_state_information_border_color: var(--sapField_InformationColor);--_ui5-v2-4-0-input-value-state-information-border-width: 1px;--_ui5-v2-4-0-input-background-image: none;--ui5-v2-4-0_input_focus_pseudo_element_content: "";--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0-input_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_input_icon_width: 2.25rem;--_ui5-v2-4-0-input-icons-count: 0;--_ui5-v2-4-0_input_margin_top_bottom: .1875rem;--_ui5-v2-4-0_input_tokenizer_min_width: 3.25rem;--_ui5-v2-4-0-input-border: none;--_ui5-v2-4-0_input_hover_border: none;--_ui5-v2-4-0_input_focus_border_radius: .25rem;--_ui5-v2-4-0_input_readonly_focus_border_radius: .125rem;--_ui5-v2-4-0_input_error_warning_border_style: none;--_ui5-v2-4-0_input_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_input_focus_offset: 0;--_ui5-v2-4-0_input_readonly_focus_offset: .125rem;--_ui5-v2-4-0_input_information_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_custom_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .625rem .625rem .5rem .625rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_input_icon_wrapper_height: calc(100% - 1px) ;--_ui5-v2-4-0_input_icon_wrapper_state_height: calc(100% - 2px) ;--_ui5-v2-4-0_input_icon_wrapper_success_state_height: calc(100% - var(--_ui5-v2-4-0_input_value_state_success_border_width));--_ui5-v2-4-0_input_icon_color: var(--sapContent_IconColor);--_ui5-v2-4-0_input_icon_pressed_bg: var(--sapButton_Selected_Background);--_ui5-v2-4-0_input_icon_padding: .625rem .625rem .5625rem .625rem;--_ui5-v2-4-0_input_icon_hover_bg: var(--sapField_Focus_Background);--_ui5-v2-4-0_input_icon_pressed_color: var(--sapButton_Active_TextColor);--_ui5-v2-4-0_input_icon_border_radius: .25rem;--_ui5-v2-4-0_input_icon_box_shadow: var(--sapField_Hover_Shadow);--_ui5-v2-4-0_input_icon_border: none;--_ui5-v2-4-0_input_error_icon_box_shadow: var(--sapContent_Negative_Shadow);--_ui5-v2-4-0_input_warning_icon_box_shadow: var(--sapContent_Critical_Shadow);--_ui5-v2-4-0_input_information_icon_box_shadow: var(--sapContent_Informative_Shadow);--_ui5-v2-4-0_input_success_icon_box_shadow: var(--sapContent_Positive_Shadow);--_ui5-v2-4-0_input_icon_error_pressed_color: var(--sapButton_Reject_Selected_TextColor);--_ui5-v2-4-0_input_icon_warning_pressed_color: var(--sapButton_Attention_Selected_TextColor);--_ui5-v2-4-0_input_icon_information_pressed_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_input_icon_success_pressed_color: var(--sapButton_Accept_Selected_TextColor);--_ui5-v2-4-0_link_focus_text_decoration: underline;--_ui5-v2-4-0_link_text_decoration: var(--sapLink_TextDecoration);--_ui5-v2-4-0_link_hover_text_decoration: var(--sapLink_Hover_TextDecoration);--_ui5-v2-4-0_link_focused_hover_text_decoration: none;--_ui5-v2-4-0_link_focused_hover_text_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_active_text_decoration: var(--sapLink_Active_TextDecoration);--_ui5-v2-4-0_link_outline: none;--_ui5-v2-4-0_link_focus_border-radius: .125rem;--_ui5-v2-4-0_link_focus_background_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_link_focus_color: var(--sapContent_ContrastTextColor);--_ui5-v2-4-0_link_subtle_text_decoration: underline;--_ui5-v2-4-0_link_subtle_text_decoration_hover: none;--ui5-v2-4-0_list_footer_text_color: var(--sapList_FooterTextColor);--ui5-v2-4-0-listitem-background-color: var(--sapList_Background);--ui5-v2-4-0-listitem-border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--ui5-v2-4-0-listitem-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--ui5-v2-4-0-listitem-focused-selected-border-bottom: 1px solid var(--sapList_SelectionBorderColor);--_ui5-v2-4-0_listitembase_focus_width: 1px;--_ui5-v2-4-0-listitembase_disabled_opacity: .5;--_ui5-v2-4-0_product_switch_item_border: none;--ui5-v2-4-0-listitem-active-border-color: var(--sapContent_FocusColor);--_ui5-v2-4-0_menu_item_padding: 0 1rem 0 .75rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: 1rem;--_ui5-v2-4-0_menu_item_additional_text_start_margin: 1rem;--_ui5-v2-4-0_menu_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_monthpicker_item_margin: .0625rem;--_ui5-v2-4-0_monthpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_monthpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_monthpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_monthpicker_item_border_radius: .5rem;--_ui5-v2-4-0_message_strip_icon_width: 2.5rem;--_ui5-v2-4-0_message_strip_button_border_width: 0;--_ui5-v2-4-0_message_strip_button_border_style: none;--_ui5-v2-4-0_message_strip_button_border_color: transparent;--_ui5-v2-4-0_message_strip_button_border_radius: 0;--_ui5-v2-4-0_message_strip_padding: .4375rem 2.5rem .4375rem 2.5rem;--_ui5-v2-4-0_message_strip_padding_block_no_icon: .4375rem .4375rem;--_ui5-v2-4-0_message_strip_padding_inline_no_icon: 1rem 2.5rem;--_ui5-v2-4-0_message_strip_button_height: 1.625rem;--_ui5-v2-4-0_message_strip_border_width: 1px;--_ui5-v2-4-0_message_strip_close_button_border: none;--_ui5-v2-4-0_message_strip_icon_top: .4375rem;--_ui5-v2-4-0_message_strip_focus_width: 1px;--_ui5-v2-4-0_message_strip_focus_offset: -2px;--_ui5-v2-4-0_message_strip_close_button_top: .125rem;--_ui5-v2-4-0_message_strip_close_button_color_set_1_background: #eaecee4d;--_ui5-v2-4-0_message_strip_close_button_color_set_2_background: #eaecee80;--_ui5-v2-4-0_message_strip_close_button_color_set_1_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_close_button_color_set_1_hover_color: var(--sapButton_Emphasized_TextColor);--_ui5-v2-4-0_message_strip_scheme_1_set_2_background: var(--sapIndicationColor_1b);--_ui5-v2-4-0_message_strip_scheme_1_set_2_border_color: var(--sapIndicationColor_1b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_2_set_2_background: var(--sapIndicationColor_2b);--_ui5-v2-4-0_message_strip_scheme_2_set_2_border_color: var(--sapIndicationColor_2b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_3_set_2_background: var(--sapIndicationColor_3b);--_ui5-v2-4-0_message_strip_scheme_3_set_2_border_color: var(--sapIndicationColor_3b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_4_set_2_background: var(--sapIndicationColor_4b);--_ui5-v2-4-0_message_strip_scheme_4_set_2_border_color: var(--sapIndicationColor_4b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_5_set_2_background: var(--sapIndicationColor_5b);--_ui5-v2-4-0_message_strip_scheme_5_set_2_border_color: var(--sapIndicationColor_5b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_6_set_2_background: var(--sapIndicationColor_6b);--_ui5-v2-4-0_message_strip_scheme_6_set_2_border_color: var(--sapIndicationColor_6b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_7_set_2_background: var(--sapIndicationColor_7b);--_ui5-v2-4-0_message_strip_scheme_7_set_2_border_color: var(--sapIndicationColor_7b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_8_set_2_background: var(--sapIndicationColor_8b);--_ui5-v2-4-0_message_strip_scheme_8_set_2_border_color: var(--sapIndicationColor_8b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_9_set_2_background: var(--sapIndicationColor_9b);--_ui5-v2-4-0_message_strip_scheme_9_set_2_border_color: var(--sapIndicationColor_9b_BorderColor);--_ui5-v2-4-0_message_strip_scheme_10_set_2_background: var(--sapIndicationColor_10b);--_ui5-v2-4-0_message_strip_scheme_10_set_2_border_color: var(--sapIndicationColor_10b_BorderColor);--_ui5-v2-4-0_message_strip_close_button_right: .1875rem;--_ui5-v2-4-0_panel_focus_border: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);--_ui5-v2-4-0_panel_header_height: 2.75rem;--_ui5-v2-4-0_panel_button_root_width: 2.75rem;--_ui5-v2-4-0_panel_button_root_height: 2.75rem;--_ui5-v2-4-0_panel_header_padding_right: .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .25rem;--_ui5-v2-4-0_panel_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_panel_border_bottom: none;--_ui5-v2-4-0_panel_default_header_border: .0625rem solid var(--sapGroup_TitleBorderColor);--_ui5-v2-4-0_panel_outline_offset: -.125rem;--_ui5-v2-4-0_panel_border_radius_expanded: var(--sapElement_BorderCornerRadius) var(--sapElement_BorderCornerRadius) 0 0;--_ui5-v2-4-0_panel_icon_color: var(--sapButton_Lite_TextColor);--_ui5-v2-4-0_panel_focus_offset: 0px;--_ui5-v2-4-0_panel_focus_bottom_offset: -1px;--_ui5-v2-4-0_panel_content_padding: .625rem 1rem;--_ui5-v2-4-0_panel_header_background_color: var(--sapGroup_TitleBackground);--_ui5-v2-4-0_popover_background: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_popover_box_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_popover_no_arrow_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_popup_content_padding_s: 1rem;--_ui5-v2-4-0_popup_content_padding_m_l: 2rem;--_ui5-v2-4-0_popup_content_padding_xl: 3rem;--_ui5-v2-4-0_popup_header_footer_padding_s: 1rem;--_ui5-v2-4-0_popup_header_footer_padding_m_l: 2rem;--_ui5-v2-4-0_popup_header_footer_padding_xl: 3rem;--_ui5-v2-4-0_popup_viewport_margin: 10px;--_ui5-v2-4-0_popup_header_font_weight: 400;--_ui5-v2-4-0_popup_header_prop_header_text_alignment: flex-start;--_ui5-v2-4-0_popup_header_background: var(--sapPageHeader_Background);--_ui5-v2-4-0_popup_header_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_popup_header_border: none;--_ui5-v2-4-0_popup_border_radius: .5rem;--_ui5-v2-4-0_popup_block_layer_background: var(--sapBlockLayer_Background);--_ui5-v2-4-0_popup_block_layer_opacity: .2;--_ui5-v2-4-0_progress_indicator_bar_border_max: none;--_ui5-v2-4-0_progress_indicator_icon_visibility: inline-block;--_ui5-v2-4-0_progress_indicator_side_points_visibility: block;--_ui5-v2-4-0_progress_indicator_padding: 1.25rem 0 .75rem 0;--_ui5-v2-4-0_progress_indicator_padding_novalue: .3125rem;--_ui5-v2-4-0_progress_indicator_padding_end: 1.25rem;--_ui5-v2-4-0_progress_indicator_host_height: unset;--_ui5-v2-4-0_progress_indicator_host_min_height: unset;--_ui5-v2-4-0_progress_indicator_host_box_sizing: border-box;--_ui5-v2-4-0_progress_indicator_root_position: relative;--_ui5-v2-4-0_progress_indicator_root_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_root_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_min_height: .375rem;--_ui5-v2-4-0_progress_indicator_root_overflow: visible;--_ui5-v2-4-0_progress_indicator_bar_height: .625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_position: absolute;--_ui5-v2-4-0_progress_indicator_remaining_bar_width: 100%;--_ui5-v2-4-0_progress_indicator_remaining_bar_overflow: visible;--_ui5-v2-4-0_progress_indicator_icon_position: absolute;--_ui5-v2-4-0_progress_indicator_icon_right_position: -1.25rem;--_ui5-v2-4-0_progress_indicator_value_margin: 0 0 .1875rem 0;--_ui5-v2-4-0_progress_indicator_value_position: absolute;--_ui5-v2-4-0_progress_indicator_value_top_position: -1.3125rem;--_ui5-v2-4-0_progress_indicator_value_left_position: 0;--_ui5-v2-4-0_progress_indicator_background_none: var(--sapProgress_Background);--_ui5-v2-4-0_progress_indicator_background_error: var(--sapProgress_NegativeBackground);--_ui5-v2-4-0_progress_indicator_background_warning: var(--sapProgress_CriticalBackground);--_ui5-v2-4-0_progress_indicator_background_success: var(--sapProgress_PositiveBackground);--_ui5-v2-4-0_progress_indicator_background_information: var(--sapProgress_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_none: var(--sapProgress_Value_Background);--_ui5-v2-4-0_progress_indicator_value_state_error: var(--sapProgress_Value_NegativeBackground);--_ui5-v2-4-0_progress_indicator_value_state_warning: var(--sapProgress_Value_CriticalBackground);--_ui5-v2-4-0_progress_indicator_value_state_success: var(--sapProgress_Value_PositiveBackground);--_ui5-v2-4-0_progress_indicator_value_state_information: var(--sapProgress_Value_InformationBackground);--_ui5-v2-4-0_progress_indicator_value_state_error_icon_color: var(--sapProgress_Value_NegativeTextColor);--_ui5-v2-4-0_progress_indicator_value_state_warning_icon_color: var(--sapProgress_Value_CriticalTextColor);--_ui5-v2-4-0_progress_indicator_value_state_success_icon_color: var(--sapProgress_Value_PositiveTextColor);--_ui5-v2-4-0_progress_indicator_value_state_information_icon_color: var(--sapProgress_Value_InformationTextColor);--_ui5-v2-4-0_progress_indicator_border: none;--_ui5-v2-4-0_progress_indicator_border_color_error: var(--sapErrorBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_warning: var(--sapWarningBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_success: var(--sapSuccessBorderColor);--_ui5-v2-4-0_progress_indicator_border_color_information: var(--sapInformationBorderColor);--_ui5-v2-4-0_progress_indicator_color: var(--sapField_TextColor);--_ui5-v2-4-0_progress_indicator_bar_color: var(--sapProgress_TextColor);--_ui5-v2-4-0_progress_indicator_icon_size: var(--sapFontLargeSize);--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_rating_indicator_border_radius: .25rem;--_ui5-v2-4-0_rating_indicator_outline_offset: .125rem;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_spacing: .1875rem .1875rem;--_ui5-v2-4-0_segmented_btn_inner_border: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_border_odd_child: .0625rem solid transparent;--_ui5-v2-4-0_segmented_btn_inner_pressed_border_odd_child: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_segmented_btn_inner_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_segmented_btn_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_segmented_btn_border_color: var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_segmented_btn_hover_box_shadow: none;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_button_base_min_compact_width: 2rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Height);--_ui5-v2-4-0_button_compact_height: 1.625rem;--_ui5-v2-4-0_button_border_radius: var(--sapButton_BorderCornerRadius);--_ui5-v2-4-0_button_compact_padding: .4375rem;--_ui5-v2-4-0_button_emphasized_outline: 1px dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focus_offset: 1px;--_ui5-v2-4-0_button_focus_width: 1px;--_ui5-v2-4-0_button_emphasized_focused_border_before: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_emphasized_focused_active_border_color: transparent;--_ui5-v2-4-0_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_button_focused_border_radius: .375rem;--_ui5-v2-4-0_button_focused_inner_border_radius: .375rem;--_ui5-v2-4-0_button_base_min_width: 2.25rem;--_ui5-v2-4-0_button_base_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_only_padding: .5625rem;--_ui5-v2-4-0_button_base_icon_margin: .375rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_button_text_shadow: none;--_ui5-v2-4-0_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_button_pressed_focused_border_color: var(--sapContent_FocusColor);--_ui5-v2-4-0_button_fontFamily: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_button_emphasized_focused_border_color: var(--sapContent_ContrastFocusColor);--_ui5-v2-4-0_radio_button_min_width: 2.75rem;--_ui5-v2-4-0_radio_button_hover_fill_error: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_warning: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_success: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_hover_fill_information: var(--sapField_Hover_Background);--_ui5-v2-4-0_radio_button_checked_fill: var(--sapSelectedColor);--_ui5-v2-4-0_radio_button_checked_error_fill: var(--sapField_InvalidColor);--_ui5-v2-4-0_radio_button_checked_success_fill: var(--sapField_SuccessColor);--_ui5-v2-4-0_radio_button_checked_information_fill: var(--sapField_InformationColor);--_ui5-v2-4-0_radio_button_warning_error_border_dash: 0;--_ui5-v2-4-0_radio_button_outer_ring_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_width: var(--sapField_BorderWidth);--_ui5-v2-4-0_radio_button_outer_ring_bg: var(--sapField_Background);--_ui5-v2-4-0_radio_button_outer_ring_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_active_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color: var(--sapField_Hover_BorderColor);--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .6875rem;--_ui5-v2-4-0_radio_button_border: none;--_ui5-v2-4-0_radio_button_focus_outline: block;--_ui5-v2-4-0_radio_button_color: var(--sapField_BorderColor);--_ui5-v2-4-0_radio_button_label_offset: 1px;--_ui5-v2-4-0_radio_button_items_align: unset;--_ui5-v2-4-0_radio_button_information_border_width: var(--sapField_InformationBorderWidth);--_ui5-v2-4-0_radio_button_border_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_radio_button_border_radius: .5rem;--_ui5-v2-4-0_radio_button_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_inner_ring_radius: 27.5%;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .6875rem;--_ui5-v2-4-0_radio_button_read_only_border_type: 4,2;--_ui5-v2-4-0_radio_button_inner_ring_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_radio_button_checked_warning_fill: var(--sapField_WarningColor);--_ui5-v2-4-0_radio_button_read_only_inner_ring_color: var(--sapField_TextColor);--_ui5-v2-4-0_radio_button_read_only_border_width: var(--sapElement_BorderWidth);--_ui5-v2-4-0_radio_button_hover_fill: var(--sapContent_Selected_Hover_Background);--_ui5-v2-4-0_radio_button_focus_dist: .375rem;--_ui5-v2-4-0_switch_height: 2.75rem;--_ui5-v2-4-0_switch_foucs_border_size: 1px;--_ui5-v2-4-0-switch-root-border-radius: 0;--_ui5-v2-4-0-switch-root-box-shadow: none;--_ui5-v2-4-0-switch-focus: "";--_ui5-v2-4-0_switch_track_border_radius: .75rem;--_ui5-v2-4-0-switch-track-border: 1px solid;--_ui5-v2-4-0_switch_track_transition: none;--_ui5-v2-4-0_switch_handle_border_radius: 1rem;--_ui5-v2-4-0-switch-handle-icon-display: none;--_ui5-v2-4-0-switch-slider-texts-display: inline;--_ui5-v2-4-0_switch_width: 3.5rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.875rem;--_ui5-v2-4-0_switch_focus_outline: none;--_ui5-v2-4-0_switch_root_after_outline: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_switch_root_after_boreder: none;--_ui5-v2-4-0_switch_root_after_boreder_radius: 1rem;--_ui5-v2-4-0_switch_root_outline_top: .5rem;--_ui5-v2-4-0_switch_root_outline_bottom: .5rem;--_ui5-v2-4-0_switch_root_outline_left: .375rem;--_ui5-v2-4-0_switch_root_outline_right: .375rem;--_ui5-v2-4-0_switch_disabled_opacity: var(--sapContent_DisabledOpacity);--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.625rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(-100%) translateX(1.625rem);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(-100%) translateX(1.875rem);--_ui5-v2-4-0_switch_track_width: 2.5rem;--_ui5-v2-4-0_switch_track_height: 1.5rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.875rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.5rem;--_ui5-v2-4-0_switch_track_active_background_color: var(--sapButton_Track_Selected_Background);--_ui5-v2-4-0_switch_track_inactive_background_color: var(--sapButton_Track_Background);--_ui5-v2-4-0_switch_track_hover_active_background_color: var(--sapButton_Track_Selected_Hover_Background);--_ui5-v2-4-0_switch_track_hover_inactive_background_color: var(--sapButton_Track_Hover_Background);--_ui5-v2-4-0_switch_track_active_border_color: var(--sapButton_Track_Selected_BorderColor);--_ui5-v2-4-0_switch_track_inactive_border_color: var(--sapButton_Track_BorderColor);--_ui5-v2-4-0_switch_track_hover_active_border_color: var(--sapButton_Track_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_track_hover_inactive_border_color: var(--sapButton_Track_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_accept_background_color: var(--sapButton_Track_Positive_Background);--_ui5-v2-4-0_switch_track_semantic_reject_background_color: var(--sapButton_Track_Negative_Background);--_ui5-v2-4-0_switch_track_semantic_hover_accept_background_color: var(--sapButton_Track_Positive_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_hover_reject_background_color: var(--sapButton_Track_Negative_Hover_Background);--_ui5-v2-4-0_switch_track_semantic_accept_border_color: var(--sapButton_Track_Positive_BorderColor);--_ui5-v2-4-0_switch_track_semantic_reject_border_color: var(--sapButton_Track_Negative_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_accept_border_color: var(--sapButton_Track_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_track_semantic_hover_reject_border_color: var(--sapButton_Track_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_track_icon_display: inline-block;--_ui5-v2-4-0_switch_handle_width: 1.5rem;--_ui5-v2-4-0_switch_handle_height: 1.25rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_border: var(--_ui5-v2-4-0_switch_handle_border_width) solid var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_border_width: .125rem;--_ui5-v2-4-0_switch_handle_active_background_color: var(--sapButton_Handle_Selected_Background);--_ui5-v2-4-0_switch_handle_inactive_background_color: var(--sapButton_Handle_Background);--_ui5-v2-4-0_switch_handle_hover_active_background_color: var(--sapButton_Handle_Selected_Hover_Background);--_ui5-v2-4-0_switch_handle_hover_inactive_background_color: var(--sapButton_Handle_Hover_Background);--_ui5-v2-4-0_switch_handle_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_hover_active_border_color: var(--sapButton_Handle_Selected_BorderColor);--_ui5-v2-4-0_switch_handle_hover_inactive_border_color: var(--sapButton_Handle_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_accept_background_color: var(--sapButton_Handle_Positive_Background);--_ui5-v2-4-0_switch_handle_semantic_reject_background_color: var(--sapButton_Handle_Negative_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_background_color: var(--sapButton_Handle_Positive_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_background_color: var(--sapButton_Handle_Negative_Hover_Background);--_ui5-v2-4-0_switch_handle_semantic_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_accept_border_color: var(--sapButton_Handle_Positive_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_hover_reject_border_color: var(--sapButton_Handle_Negative_BorderColor);--_ui5-v2-4-0_switch_handle_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Selected_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_on_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Positive_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_semantic_off_hover_box_shadow: 0 0 0 .125rem var(--sapButton_Handle_Negative_Hover_BorderColor);--_ui5-v2-4-0_switch_handle_left: .0625rem;--_ui5-v2-4-0_switch_text_font_family: var(--sapContent_IconFontFamily);--_ui5-v2-4-0_switch_text_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_switch_text_width: 1.25rem;--_ui5-v2-4-0_switch_text_with_label_font_family: "72-Condensed-Bold" , "72" , "72full" , Arial, Helvetica, sans-serif;--_ui5-v2-4-0_switch_text_with_label_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_switch_text_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_text_inactive_left: .1875rem;--_ui5-v2-4-0_switch_text_inactive_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_inactive_right: auto;--_ui5-v2-4-0_switch_text_inactive_right_alternate: 0;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_switch_text_active_left_alternate: .0625rem;--_ui5-v2-4-0_switch_text_active_right: auto;--_ui5-v2-4-0_switch_text_active_color: var(--sapButton_Handle_Selected_TextColor);--_ui5-v2-4-0_switch_text_inactive_color: var(--sapButton_Handle_TextColor);--_ui5-v2-4-0_switch_text_semantic_accept_color: var(--sapButton_Handle_Positive_TextColor);--_ui5-v2-4-0_switch_text_semantic_reject_color: var(--sapButton_Handle_Negative_TextColor);--_ui5-v2-4-0_switch_text_overflow: hidden;--_ui5-v2-4-0_switch_text_z_index: 1;--_ui5-v2-4-0_switch_text_hidden: hidden;--_ui5-v2-4-0_switch_text_min_width: none;--_ui5-v2-4-0_switch_icon_width: 1rem;--_ui5-v2-4-0_switch_icon_height: 1rem;--_ui5-v2-4-0_select_disabled_background: var(--sapField_Background);--_ui5-v2-4-0_select_disabled_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_select_state_error_warning_border_style: solid;--_ui5-v2-4-0_select_state_error_warning_border_width: .125rem;--_ui5-v2-4-0_select_focus_width: 1px;--_ui5-v2-4-0_select_label_color: var(--sapField_TextColor);--_ui5-v2-4-0_select_hover_icon_left_border: none;--_ui5-v2-4-0_select_option_focus_border_radius: var(--sapElement_BorderCornerRadius);--_ui5-v2-4-0_split_button_host_transparent_hover_background: transparent;--_ui5-v2-4-0_split_button_transparent_disabled_background: transparent;--_ui5-v2-4-0_split_button_host_default_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_host_attention_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_button_host_emphasized_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_button_host_positive_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_button_host_negative_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_button_host_transparent_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_split_text_button_border_color: transparent;--_ui5-v2-4-0_split_text_button_background_color: transparent;--_ui5-v2-4-0_split_text_button_emphasized_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_border_width: .0625rem;--_ui5-v2-4-0_split_text_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_arrow_button_positive_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_arrow_button_negative_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_arrow_button_attention_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_arrow_button_transparent_hover_border: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Emphasized_BorderColor);--_ui5-v2-4-0_split_text_button_positive_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_left: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_focused_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_split_button_focused_border_radius: .375rem;--_ui5-v2-4-0_split_button_hover_border_radius: var(--_ui5-v2-4-0_button_border_radius);--_ui5-v2-4-0_split_button_middle_separator_width: 0;--_ui5-v2-4-0_split_button_middle_separator_left: -.0625rem;--_ui5-v2-4-0_split_button_middle_separator_hover_display: none;--_ui5-v2-4-0_split_button_text_button_width: 2.375rem;--_ui5-v2-4-0_split_button_text_button_right_border_width: .0625rem;--_ui5-v2-4-0_split_button_transparent_hover_background: var(--sapButton_Lite_Hover_Background);--_ui5-v2-4-0_split_button_transparent_hover_color: var(--sapButton_TextColor);--_ui5-v2-4-0_split_button_host_transparent_hover_box_shadow: inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_inner_focused_border_radius_outer: .375rem;--_ui5-v2-4-0_split_button_inner_focused_border_radius_inner: .375rem;--_ui5-v2-4-0_split_button_emphasized_separator_color: transparent;--_ui5-v2-4-0_split_button_positive_separator_color: transparent;--_ui5-v2-4-0_split_button_negative_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color: transparent;--_ui5-v2-4-0_split_button_attention_separator_color_default: var(--sapButton_Attention_TextColor);--_ui5-v2-4-0_split_text_button_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_text_button_emphasized_hover_border_right: none;--_ui5-v2-4-0_split_text_button_positive_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Accept_BorderColor);--_ui5-v2-4-0_split_text_button_negative_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Reject_BorderColor);--_ui5-v2-4-0_split_text_button_attention_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_Attention_BorderColor);--_ui5-v2-4-0_split_text_button_transparent_hover_border_right: var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);--_ui5-v2-4-0_split_button_middle_separator_hover_display_emphasized: none;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_header_height_text_only: var(--_ui5-v2-4-0_tc_item_text_only_height);--_ui5-v2-4-0_tc_header_height_text_with_additional_text: var(--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height);--_ui5-v2-4-0_tc_header_box_shadow: var(--sapContent_HeaderShadow);--_ui5-v2-4-0_tc_header_background: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_header_background_translucent: var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_content_background: var(--sapBackgroundColor);--_ui5-v2-4-0_tc_content_background_translucent: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_headeritem_padding: 1rem;--_ui5-v2-4-0_tc_headerItem_additional_text_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_tc_headerItem_text_selected_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_text_selected_hover_color: var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_additional_text_font_weight: normal;--_ui5-v2-4-0_tc_headerItem_neutral_color: var(--sapNeutralTextColor);--_ui5-v2-4-0_tc_headerItem_positive_color: var(--sapPositiveTextColor);--_ui5-v2-4-0_tc_headerItem_negative_color: var(--sapNegativeTextColor);--_ui5-v2-4-0_tc_headerItem_critical_color: var(--sapCriticalTextColor);--_ui5-v2-4-0_tc_headerItem_neutral_border_color: var(--sapNeutralElementColor);--_ui5-v2-4-0_tc_headerItem_positive_border_color: var(--sapPositiveElementColor);--_ui5-v2-4-0_tc_headerItem_negative_border_color: var(--sapNegativeElementColor);--_ui5-v2-4-0_tc_headerItem_critical_border_color: var(--sapCriticalElementColor);--_ui5-v2-4-0_tc_headerItem_neutral_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_neutral_color);--_ui5-v2-4-0_tc_headerItem_positive_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_positive_color);--_ui5-v2-4-0_tc_headerItem_negative_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_negative_color);--_ui5-v2-4-0_tc_headerItem_critical_selected_border_color: var(--_ui5-v2-4-0_tc_headerItem_critical_color);--_ui5-v2-4-0_tc_headerItem_transition: none;--_ui5-v2-4-0_tc_headerItem_hover_border_visibility: hidden;--_ui5-v2-4-0_tc_headerItemContent_border_radius: .125rem .125rem 0 0;--_ui5-v2-4-0_tc_headerItemContent_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_neutral_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_positive_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_negative_border_bg: transparent;--_ui5-v2-4-0_tc_headerItem_critical_border_bg: transparent;--_ui5-v2-4-0_tc_headerItemContent_border_height: 0;--_ui5-v2-4-0_tc_headerItemContent_focus_offset: 1rem;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_left: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_right: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_top: 0px;--_ui5-v2-4-0_tc_headerItem_text_focus_border_offset_bottom: 0px;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_left: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_right: .625rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_top: .75rem;--_ui5-v2-4-0_tc_headerItem_mixed_mode_focus_border_offset_bottom: .75rem;--_ui5-v2-4-0_tc_headerItemContent_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_default_focus_border: none;--_ui5-v2-4-0_tc_headerItemContent_focus_border_radius: 0;--_ui5-v2-4-0_tc_headerItemSemanticIcon_display: none;--_ui5-v2-4-0_tc_headerItemSemanticIcon_size: .75rem;--_ui5-v2-4-0_tc_mixedMode_itemText_font_family: var(--sapFontFamily);--_ui5-v2-4-0_tc_mixedMode_itemText_font_size: var(--sapFontSmallSize);--_ui5-v2-4-0_tc_mixedMode_itemText_font_weight: normal;--_ui5-v2-4-0_tc_overflowItem_positive_color: var(--sapPositiveColor);--_ui5-v2-4-0_tc_overflowItem_negative_color: var(--sapNegativeColor);--_ui5-v2-4-0_tc_overflowItem_critical_color: var(--sapCriticalColor);--_ui5-v2-4-0_tc_overflowItem_focus_offset: .125rem;--_ui5-v2-4-0_tc_overflowItem_extraIndent: 0rem;--_ui5-v2-4-0_tc_headerItemIcon_positive_selected_background: var(--sapPositiveColor);--_ui5-v2-4-0_tc_headerItemIcon_negative_selected_background: var(--sapNegativeColor);--_ui5-v2-4-0_tc_headerItemIcon_critical_selected_background: var(--sapCriticalColor);--_ui5-v2-4-0_tc_headerItemIcon_neutral_selected_background: var(--sapNeutralColor);--_ui5-v2-4-0_tc_headerItemIcon_semantic_selected_color: var(--sapGroup_ContentBackground);--_ui5-v2-4-0_tc_header_border_bottom: .0625rem solid var(--sapObjectHeader_Background);--_ui5-v2-4-0_tc_headerItemContent_border_bottom: .1875rem solid var(--sapSelectedColor);--_ui5-v2-4-0_tc_headerItem_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_default_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflowItem_current_color: CurrentColor;--_ui5-v2-4-0_tc_content_border_bottom: .0625rem solid var(--sapObjectHeader_BorderColor);--_ui5-v2-4-0_tc_headerItem_expand_button_margin_inline_start: 0rem;--_ui5-v2-4-0_tc_headerItem_single_click_expand_button_margin_inline_start: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_border_radius: .25rem;--_ui5-v2-4-0_tc_headerItem_expand_button_separator_display: inline-block;--_ui5-v2-4-0_tc_headerItem_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_tc_headerItem_focus_border_offset: -5px;--_ui5-v2-4-0_tc_headerItemIcon_focus_border_radius: 50%;--_ui5-v2-4-0_tc_headerItem_focus_border_radius: .375rem;--_ui5-v2-4-0_tc_headeritem_text_font_weight: bold;--_ui5-v2-4-0_tc_headerItem_focus_offset: 1px;--_ui5-v2-4-0_tc_headerItem_text_hover_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_border: .125rem solid var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_color: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_selected_background: var(--sapContent_Selected_ForegroundColor);--_ui5-v2-4-0_tc_headerItemIcon_background_color: var(--sapContent_Selected_Background);--_ui5-v2-4-0_tc_headerItemIcon_selected_color: var(--sapContent_ContrastIconColor);--_ui5-v2-4-0_tc_mixedMode_itemText_color: var(--sapTextColor);--_ui5-v2-4-0_tc_overflow_text_color: var(--sapTextColor);--_ui5-v2-4-0_text_max_lines: initial;--_ui5-v2-4-0_textarea_state_border_width: .125rem;--_ui5-v2-4-0_textarea_information_border_width: .125rem;--_ui5-v2-4-0_textarea_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_value_state_error_warning_placeholder_font_weight: normal;--_ui5-v2-4-0_textarea_error_placeholder_font_style: italic;--_ui5-v2-4-0_textarea_error_placeholder_color: var(--sapField_PlaceholderTextColor);--_ui5-v2-4-0_textarea_error_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_disabled_opacity: .4;--_ui5-v2-4-0_textarea_focus_pseudo_element_content: "";--_ui5-v2-4-0_textarea_min_height: 2.25rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .5625rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .4375rem;--_ui5-v2-4-0_textarea_exceeded_text_height: 1rem;--_ui5-v2-4-0_textarea_hover_border: none;--_ui5-v2-4-0_textarea_focus_border_radius: .25rem;--_ui5-v2-4-0_textarea_error_warning_border_style: none;--_ui5-v2-4-0_textarea_line_height: 1.5;--_ui5-v2-4-0_textarea_focused_value_state_error_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_warning_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_success_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_information_background: var(--sapField_Hover_Background);--_ui5-v2-4-0_textarea_focused_value_state_error_focus_outline_color: var(--sapField_InvalidColor);--_ui5-v2-4-0_textarea_focused_value_state_warning_focus_outline_color: var(--sapField_WarningColor);--_ui5-v2-4-0_textarea_focused_value_state_success_focus_outline_color: var(--sapField_SuccessColor);--_ui5-v2-4-0_textarea_focus_offset: 0;--_ui5-v2-4-0_textarea_readonly_focus_offset: 1px;--_ui5-v2-4-0_textarea_focus_outline_color: var(--sapField_Active_BorderColor);--_ui5-v2-4-0_textarea_value_state_focus_offset: 1px;--_ui5-v2-4-0_textarea_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_success_wrapper_padding: .0625rem;--_ui5-v2-4-0_textarea_warning_error_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_information_wrapper_padding: .0625rem .0625rem .125rem .0625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .375rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .4375rem;--_ui5-v2-4-0_textarea_padding_top_information: .5rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .4375rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .625rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .625rem;--_ui5-v2-4-0_textarea_readonly_border_style: dashed;--_ui5-v2-4-0_time_picker_border: .0625rem solid transparent;--_ui5-v2-4-0-time_picker_border_radius: .25rem;--_ui5-v2-4-0_toast_vertical_offset: 3rem;--_ui5-v2-4-0_toast_horizontal_offset: 2rem;--_ui5-v2-4-0_toast_background: var(--sapList_Background);--_ui5-v2-4-0_toast_shadow: var(--sapContent_Shadow2);--_ui5-v2-4-0_toast_offset_width: -.1875rem;--_ui5-v2-4-0_toggle_button_pressed_focussed: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_pressed_focussed_hovered: var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_toggle_button_selected_positive_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_negative_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_selected_attention_text_color: var(--sapButton_Selected_TextColor);--_ui5-v2-4-0_toggle_button_emphasized_pressed_focussed_hovered: var(--sapContent_FocusColor);--_ui5-v2-4-0_toggle_button_emphasized_text_shadow: none;--_ui5-v2-4-0_yearpicker_item_margin: .0625rem;--_ui5-v2-4-0_yearpicker_item_border: .0625rem solid var(--sapButton_Lite_BorderColor);--_ui5-v2-4-0_yearpicker_item_hover_border: .0625rem solid var(--sapButton_Lite_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_active_border: .0625rem solid var(--sapButton_Lite_Active_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_border: .0625rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_yearpicker_item_selected_hover_border: .0625rem solid var(--sapButton_Selected_Hover_BorderColor);--_ui5-v2-4-0_yearpicker_item_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_width: 6.25rem;--_ui5-v2-4-0_calendar_header_middle_button_flex: 1 1 auto;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_display: block;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_width: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_height: calc(100% - .375rem) ;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_top_offset: .125rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_left_offset: .125rem;--_ui5-v2-4-0_calendar_header_arrow_button_border: none;--_ui5-v2-4-0_calendar_header_arrow_button_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_button_background_color: var(--sapButton_Lite_Background);--_ui5-v2-4-0_calendar_header_arrow_button_box_shadow: 0 0 .125rem 0 rgb(85 107 130 / 72%);--_ui5-v2-4-0_calendar_header_middle_button_focus_border_radius: .5rem;--_ui5-v2-4-0_calendar_header_middle_button_focus_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_after_border: none;--_ui5-v2-4-0_calendar_header_middle_button_focus_background: transparent;--_ui5-v2-4-0_calendar_header_middle_button_focus_outline: .125rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_outline: .0625rem solid var(--sapSelectedColor);--_ui5-v2-4-0_calendar_header_middle_button_focus_active_background: transparent;--_ui5-v2-4-0_token_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_background: var(--sapButton_TokenBackground);--_ui5-v2-4-0_token_readonly_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_token_right_margin: .3125rem;--_ui5-v2-4-0_token_padding: .25rem 0;--_ui5-v2-4-0_token_left_padding: .3125rem;--_ui5-v2-4-0_token_focused_selected_border: 1px solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_focus_offset: -.25rem;--_ui5-v2-4-0_token_focus_outline_width: .0625rem;--_ui5-v2-4-0_token_hover_border_color: var(--sapButton_TokenBorderColor);--_ui5-v2-4-0_token_selected_focus_outline: none;--_ui5-v2-4-0_token_focus_outline: none;--_ui5-v2-4-0_token_outline_offset: .125rem;--_ui5-v2-4-0_token_selected_hover_border_color: var(--sapButton_Selected_BorderColor);--ui5-v2-4-0_token_focus_pseudo_element_content: "";--_ui5-v2-4-0_token_border_radius: .375rem;--_ui5-v2-4-0_token_focus_outline_border_radius: .5rem;--_ui5-v2-4-0_token_text_color: var(--sapTextColor);--_ui5-v2-4-0_token_selected_text_font_family: var(--sapFontSemiboldDuplexFamily);--_ui5-v2-4-0_token_selected_internal_border_bottom: .125rem solid var(--sapButton_Selected_BorderColor);--_ui5-v2-4-0_token_selected_internal_border_bottom_radius: .1875rem;--_ui5-v2-4-0_token_text_icon_top: .0625rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.375rem;--_ui5-v2-4-0_token_readonly_padding: .25rem .3125rem;--_ui5-v2-4-0_tokenizer-popover_offset: .3125rem;--_ui5-v2-4-0_tokenizer_n_more_text_color: var(--sapLinkColor);--_ui5-v2-4-0-multi_combobox_token_margin_top: 1px;--_ui5-v2-4-0_slider_progress_container_dot_background: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_progress_border: none;--_ui5-v2-4-0_slider_padding: 1.406rem 1.0625rem;--_ui5-v2-4-0_slider_inner_height: .25rem;--_ui5-v2-4-0_slider_outer_height: 1.6875rem;--_ui5-v2-4-0_slider_progress_border_radius: .25rem;--_ui5-v2-4-0_slider_tickmark_bg: var(--sapField_BorderColor);--_ui5-v2-4-0_slider_handle_margin_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2));--_ui5-v2-4-0_slider_handle_outline_offset: .075rem;--_ui5-v2-4-0_slider_progress_outline: .0625rem dotted var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_progress_outline_offset: -.8125rem;--_ui5-v2-4-0_slider_disabled_opacity: .4;--_ui5-v2-4-0_slider_tooltip_border_color: var(--sapField_BorderColor);--_ui5-v2-4-0_range_slider_handle_background_focus: transparent;--_ui5-v2-4-0_slider_progress_box_sizing: content-box;--_ui5-v2-4-0_range_slider_focus_outline_width: 100%;--_ui5-v2-4-0_slider_progress_outline_offset_left: 0;--_ui5-v2-4-0_range_slider_focus_outline_radius: 0;--_ui5-v2-4-0_slider_progress_container_top: 0;--_ui5-v2-4-0_slider_progress_height: 100%;--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_active_progress_left: 0;--_ui5-v2-4-0_slider_active_progress_top: 0;--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top: var(--_ui5-v2-4-0_slider_progress_container_top);--_ui5-v2-4-0_slider_no_tickmarks_progress_height: var(--_ui5-v2-4-0_slider_progress_height);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border: var(--_ui5-v2-4-0_slider_active_progress_border);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left: var(--_ui5-v2-4-0_slider_active_progress_left);--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top: var(--_ui5-v2-4-0_slider_active_progress_top);--_ui5-v2-4-0_slider_handle_focus_visibility: none;--_ui5-v2-4-0_slider_handle_icon_size: 1rem;--_ui5-v2-4-0_slider_progress_container_background: var(--sapSlider_Background);--_ui5-v2-4-0_slider_progress_container_dot_display: block;--_ui5-v2-4-0_slider_inner_min_width: 4rem;--_ui5-v2-4-0_slider_progress_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_before_background: var(--sapSlider_Selected_Background);--_ui5-v2-4-0_slider_progress_after_background: var(--sapContent_MeasureIndicatorColor);--_ui5-v2-4-0_slider_handle_background: var(--sapSlider_HandleBackground);--_ui5-v2-4-0_slider_handle_icon_display: inline-block;--_ui5-v2-4-0_slider_handle_border: .0625rem solid var(--sapSlider_HandleBorderColor);--_ui5-v2-4-0_slider_handle_border_radius: .5rem;--_ui5-v2-4-0_slider_handle_height: 1.5rem;--_ui5-v2-4-0_slider_handle_width: 2rem;--_ui5-v2-4-0_slider_handle_top: -.625rem;--_ui5-v2-4-0_slider_handle_font_family: "SAP-icons";--_ui5-v2-4-0_slider_handle_hover_border: .0625rem solid var(--sapSlider_Hover_HandleBorderColor);--_ui5-v2-4-0_slider_handle_focus_border: .125rem solid var(--sapContent_FocusColor);--_ui5-v2-4-0_slider_handle_background_focus: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_slider_handle_outline: none;--_ui5-v2-4-0_slider_handle_hover_background: var(--sapSlider_Hover_HandleBackground);--_ui5-v2-4-0_slider_tooltip_background: var(--sapField_Focus_Background);--_ui5-v2-4-0_slider_tooltip_border: none;--_ui5-v2-4-0_slider_tooltip_border_radius: .5rem;--_ui5-v2-4-0_slider_tooltip_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_range_slider_legacy_progress_focus_display: none;--_ui5-v2-4-0_range_slider_progress_focus_display: block;--_ui5-v2-4-0_slider_tickmark_in_range_bg: var(--sapSlider_Selected_BorderColor);--_ui5-v2-4-0_slider_label_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_label_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_min_width: 2rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_tooltip_fontsize: var(--sapFontSmallSize);--_ui5-v2-4-0_slider_tooltip_color: var(--sapContent_LabelColor);--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_slider_handle_focus_width: 1px;--_ui5-v2-4-0_slider_start_end_point_size: .5rem;--_ui5-v2-4-0_slider_start_end_point_left: -.75rem;--_ui5-v2-4-0_slider_start_end_point_top: -.125rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_slider_tooltip_border_box: border-box;--_ui5-v2-4-0_range_slider_handle_active_background: var(--sapSlider_Active_RangeHandleBackground);--_ui5-v2-4-0_range_slider_active_handle_icon_display: none;--_ui5-v2-4-0_range_slider_progress_focus_top: -15px;--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_range_slider_progress_focus_padding: 0 1rem 0 1rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_root_hover_handle_icon_display: inline-block;--_ui5-v2-4-0_range_slider_root_hover_handle_bg: var(--_ui5-v2-4-0_slider_handle_hover_background);--_ui5-v2-4-0_range_slider_root_active_handle_icon_display: none;--_ui5-v2-4-0_slider_tickmark_height: .5rem;--_ui5-v2-4-0_slider_tickmark_top: -2px;--_ui5-v2-4-0_slider_handle_box_sizing: border-box;--_ui5-v2-4-0_range_slider_handle_background: var(--sapSlider_RangeHandleBackground);--_ui5-v2-4-0_slider_tooltip_bottom: 2rem;--_ui5-v2-4-0_value_state_message_border: none;--_ui5-v2-4-0_value_state_header_border: none;--_ui5-v2-4-0_input_value_state_icon_offset: .5rem;--_ui5-v2-4-0_value_state_header_box_shadow_error: inset 0 -.0625rem var(--sapField_InvalidColor);--_ui5-v2-4-0_value_state_header_box_shadow_information: inset 0 -.0625rem var(--sapField_InformationColor);--_ui5-v2-4-0_value_state_header_box_shadow_success: inset 0 -.0625rem var(--sapField_SuccessColor);--_ui5-v2-4-0_value_state_header_box_shadow_warning: inset 0 -.0625rem var(--sapField_WarningColor);--_ui5-v2-4-0_value_state_message_icon_offset_phone: 1rem;--_ui5-v2-4-0_value_state_header_border_bottom: none;--_ui5-v2-4-0_input_value_state_icon_display: inline-block;--_ui5-v2-4-0_value_state_message_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_header_padding: .5rem .5rem .5rem 1.875rem;--_ui5-v2-4-0_value_state_message_popover_box_shadow: var(--sapContent_Shadow1);--_ui5-v2-4-0_value_state_message_icon_width: 1rem;--_ui5-v2-4-0_value_state_message_icon_height: 1rem;--_ui5-v2-4-0_value_state_header_offset: -.25rem;--_ui5-v2-4-0_value_state_message_popover_border_radius: var(--sapPopover_BorderCornerRadius);--_ui5-v2-4-0_value_state_message_padding_phone: .5rem .5rem .5rem 2.375rem;--_ui5-v2-4-0_value_state_message_line_height: 1.125rem;--_ui5-v2-4-0-toolbar-padding-left: .5rem;--_ui5-v2-4-0-toolbar-padding-right: .5rem;--_ui5-v2-4-0-toolbar-item-margin-left: 0;--_ui5-v2-4-0-toolbar-item-margin-right: .25rem;--_ui5-v2-4-0_step_input_min_width: 7.25rem;--_ui5-v2-4-0_step_input_padding: 2.5rem;--_ui5-v2-4-0_step_input_input_error_background_color: inherit;--_ui5-v2-4-0-step_input_button_state_hover_background_color: var(--sapField_Hover_Background);--_ui5-v2-4-0_step_input_border_style: none;--_ui5-v2-4-0_step_input_border_style_hover: none;--_ui5-v2-4-0_step_input_button_background_color: transparent;--_ui5-v2-4-0_step_input_input_border: none;--_ui5-v2-4-0_step_input_input_margin_top: 0;--_ui5-v2-4-0_step_input_button_display: inline-flex;--_ui5-v2-4-0_step_input_button_left: 0;--_ui5-v2-4-0_step_input_button_right: 0;--_ui5-v2-4-0_step_input_input_border_focused_after: .125rem solid #0070f2;--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after: 0;--_ui5-v2-4-0_step_input_input_border_radius_focused_after: .25rem;--_ui5-v2-4-0_step_input_input_information_border_color_focused_after: var(--sapField_InformationColor);--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after: var(--sapField_WarningColor);--_ui5-v2-4-0_step_input_input_success_border_color_focused_after: var(--sapField_SuccessColor);--_ui5-v2-4-0_step_input_input_error_border_color_focused_after: var(--sapField_InvalidColor);--_ui5-v2-4-0_step_input_disabled_button_background: none;--_ui5-v2-4-0_step_input_border_color_hover: none;--_ui5-v2-4-0_step_input_border_hover: none;--_ui5-v2-4-0_input_input_background_color: transparent;--_ui5-v2-4-0_load_more_padding: 0;--_ui5-v2-4-0_load_more_border: 1px top solid transparent;--_ui5-v2-4-0_load_more_border_radius: none;--_ui5-v2-4-0_load_more_outline_width: var(--sapContent_FocusWidth);--_ui5-v2-4-0_load_more_border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);--_ui5-v2-4-0_calendar_height: 24.5rem;--_ui5-v2-4-0_calendar_width: 20rem;--_ui5-v2-4-0_calendar_padding: 1rem;--_ui5-v2-4-0_calendar_left_right_padding: .5rem;--_ui5-v2-4-0_calendar_top_bottom_padding: 1rem;--_ui5-v2-4-0_calendar_header_height: 3rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2.5rem;--_ui5-v2-4-0_calendar_header_padding: .25rem 0;--_ui5-v2-4-0_checkbox_root_side_padding: .6875rem;--_ui5-v2-4-0_checkbox_icon_size: 1rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .75rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2.75rem;--_ui5-v2-4-0_day_picker_item_width: 2.25rem;--_ui5-v2-4-0_day_picker_item_height: 2.875rem;--_ui5-v2-4-0_day_picker_empty_height: 3rem;--_ui5-v2-4-0_day_picker_item_justify_content: space-between;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 2rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1.8125rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .4375rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-offset: -.125rem;--_ui5-v2-4-0-calendar-legend-item-box-margin: .25rem;--_ui5-v2-4-0-calendar-legend-item-box-inner-margin: .5rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .3125rem .6875rem;--_ui5-v2-4-0_datetime_picker_width: 40.0625rem;--_ui5-v2-4-0_datetime_picker_height: 25rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 19.5rem;--_ui5-v2-4-0_datetime_timeview_padding: 1rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 24.5rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 0;--_ui5-v2-4-0_dialog_content_min_height: 2.75rem;--_ui5-v2-4-0_dialog_footer_height: 2.75rem;--_ui5-v2-4-0_input_inner_padding: 0 .625rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .25rem 0 .625rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .1875rem;--_ui5-v2-4-0_list_no_data_height: 3rem;--_ui5-v2-4-0_list_item_cb_margin_right: 0;--_ui5-v2-4-0_list_item_title_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontLargeSize);--_ui5-v2-4-0_list_item_img_size: 3rem;--_ui5-v2-4-0_list_item_img_top_margin: .5rem;--_ui5-v2-4-0_list_item_img_bottom_margin: .5rem;--_ui5-v2-4-0_list_item_img_hn_margin: .75rem;--_ui5-v2-4-0_list_item_dropdown_base_height: 2.5rem;--_ui5-v2-4-0_list_item_base_height: var(--sapElement_LineHeight);--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1.125rem;--_ui5-v2-4-0_list_item_icon_padding-inline-end: .5rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_group_header_list_item_height: 2.75rem;--_ui5-v2-4-0_list_busy_row_height: 3rem;--_ui5-v2-4-0_month_picker_item_height: 3rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_form_item_min_height: 2.813rem;--_ui5-v2-4-0_form_item_padding: .65rem;--_ui5-v2-4-0-form-group-heading-height: 2.75rem;--_ui5-v2-4-0_popup_default_header_height: 2.75rem;--_ui5-v2-4-0_year_picker_item_height: 3rem;--_ui5-v2-4-0_tokenizer_padding: .25rem;--_ui5-v2-4-0_token_height: 1.625rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .25rem .5rem;--_ui5-v2-4-0_token_wrapper_right_padding: .3125rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_tl_bubble_padding: 1rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -1.625rem;--_ui5-v2-4-0_tl_padding: 1rem 1rem 1rem .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: 1.625rem;--_ui5-v2-4-0_switch_focus_width_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_switch_focus_height_size_horizon_exp: calc(100% + 4px) ;--_ui5-v2-4-0_tc_item_text: 3rem;--_ui5-v2-4-0_tc_item_height: 4.75rem;--_ui5-v2-4-0_tc_item_text_only_height: 2.75rem;--_ui5-v2-4-0_tc_item_text_only_with_additional_text_height: 3.75rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_icon_circle_size: 2.75rem;--_ui5-v2-4-0_tc_item_icon_size: 1.25rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .375rem;--_ui5-v2-4-0_textarea_margin: .25rem 0;--_ui5-v2-4-0_radio_button_height: 2.75rem;--_ui5-v2-4-0_radio_button_label_side_padding: .875rem;--_ui5-v2-4-0_radio_button_inner_size: 2.75rem;--_ui5-v2-4-0_radio_button_svg_size: 1.375rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.75rem;--ui5-v2-4-0_side_navigation_item_height: 2.75rem;--_ui5-v2-4-0-tree-indent-step: 1.5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2.75rem;--_ui5-v2-4-0-tree-toggle-box-height: 2.25rem;--_ui5-v2-4-0-tree-toggle-icon-size: 1.0625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -1.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -1.625rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1.875rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -1.9375rem;--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% + 1rem) ;--_ui5-v2-4-0_timeline_tli_indicator_before_height: 100%;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.9375rem;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: calc(100% + .5rem) ;--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: calc(100% + .25rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% + .375rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: 100%;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 1.5rem) ;--_ui5-v2-4-0-toolbar-separator-height: 2rem;--_ui5-v2-4-0-toolbar-height: 2.75rem;--_ui5-v2-4-0_toolbar_overflow_padding: .25rem .5rem;--_ui5-v2-4-0_table_cell_padding: .25rem .5rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_split_button_middle_separator_top: .625rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-border-radius: .25rem;--_ui5-v2-4-0_color-palette-item-height: 1.75rem;--_ui5-v2-4-0_color-palette-item-hover-height: 2.25rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 12rem;--_ui5-v2-4-0_textarea_padding_top: .5rem;--_ui5-v2-4-0_textarea_padding_bottom: .4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .5rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .5rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: 0;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .5rem}[dir=rtl]{--_ui5-v2-4-0_table_shadow_border_left: inset calc(-1 * var(--sapContent_FocusWidth)) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_table_shadow_border_right: inset var(--sapContent_FocusWidth) 0 var(--sapContent_FocusColor);--_ui5-v2-4-0_icon_transform_scale: scale(-1, 1);--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_minus_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: -.5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem .125rem 0 0;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem .25rem 0 0;--_ui5-v2-4-0_popover_downward_arrow_margin: -.4375rem .125rem 0 0;--_ui5-v2-4-0_popover_left_arrow_margin: .1875rem -.375rem 0 0;--_ui5-v2-4-0_dialog_resize_cursor:sw-resize;--_ui5-v2-4-0_menu_submenu_margin_offset: 0 -.25rem;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: 0 .25rem;--_ui5-v2-4-0-menu_item_icon_float: left;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: auto;--_ui5-v2-4-0_segmented_btn_item_border_left: .0625rem;--_ui5-v2-4-0_segmented_btn_item_border_right: .0625rem;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: .25rem}[data-ui5-compact-size],.ui5-content-density-compact,.sapUiSizeCompact{--_ui5-v2-4-0_input_min_width: 2rem;--_ui5-v2-4-0_input_icon_width: 2rem;--_ui5-v2-4-0_input_information_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_custom_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_information_custom_icon_padding: .3125rem .5rem .1875rem .5rem;--_ui5-v2-4-0_input_information_custom_focused_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_input_icon_padding: .3125rem .5rem .25rem .5rem;--_ui5-v2-4-0_panel_header_button_wrapper_padding: .1875rem .25rem;--_ui5-v2-4-0_rating_indicator_item_height: 1em;--_ui5-v2-4-0_rating_indicator_item_width: 1em;--_ui5-v2-4-0_rating_indicator_readonly_item_height: .75em;--_ui5-v2-4-0_rating_indicator_readonly_item_width: .75em;--_ui5-v2-4-0_rating_indicator_component_spacing: .5rem 0px;--_ui5-v2-4-0_radio_button_min_width: 2rem;--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label: 0 .5rem;--_ui5-v2-4-0_radio_button_outer_ring_padding: 0 .5rem;--_ui5-v2-4-0_radio_button_focus_dist: .1875rem;--_ui5-v2-4-0_switch_height: 2rem;--_ui5-v2-4-0_switch_width: 3rem;--_ui5-v2-4-0_switch_min_width: none;--_ui5-v2-4-0_switch_with_label_width: 3.75rem;--_ui5-v2-4-0_switch_root_outline_top: .25rem;--_ui5-v2-4-0_switch_root_outline_bottom: .25rem;--_ui5-v2-4-0_switch_transform: translateX(100%) translateX(-1.375rem);--_ui5-v2-4-0_switch_transform_with_label: translateX(100%) translateX(-1.875rem);--_ui5-v2-4-0_switch_rtl_transform: translateX(1.375rem) translateX(-100%);--_ui5-v2-4-0_switch_rtl_transform_with_label: translateX(1.875rem) translateX(-100%);--_ui5-v2-4-0_switch_track_width: 2rem;--_ui5-v2-4-0_switch_track_height: 1.25rem;--_ui5-v2-4-0_switch_track_with_label_width: 2.75rem;--_ui5-v2-4-0_switch_track_with_label_height: 1.25rem;--_ui5-v2-4-0_switch_handle_width: 1.25rem;--_ui5-v2-4-0_switch_handle_height: 1rem;--_ui5-v2-4-0_switch_handle_with_label_width: 1.75rem;--_ui5-v2-4-0_switch_handle_with_label_height: 1rem;--_ui5-v2-4-0_switch_text_font_size: var(--sapFontSize);--_ui5-v2-4-0_switch_text_width: 1rem;--_ui5-v2-4-0_switch_text_active_left: .1875rem;--_ui5-v2-4-0_textarea_padding_right_and_left_readonly: .4375rem;--_ui5-v2-4-0_textarea_padding_top_readonly: .125rem;--_ui5-v2-4-0_textarea_exceeded_text_height: .375rem;--_ui5-v2-4-0_textarea_min_height: 1.625rem;--_ui5-v2-4-0_textarea_padding_bottom_readonly: .0625rem;--_ui5-v2-4-0_textarea_padding_top_error_warning: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_error_warning: .125rem;--_ui5-v2-4-0_textarea_padding_top_information: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom_information: .125rem;--_ui5-v2-4-0_textarea_padding_right_and_left: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_error_warning: .5rem;--_ui5-v2-4-0_textarea_padding_right_and_left_information: .5rem;--_ui5-v2-4-0_token_selected_focused_offset_bottom: -.25rem;--_ui5-v2-4-0_tokenizer-popover_offset: .1875rem;--_ui5-v2-4-0_slider_handle_icon_size: .875rem;--_ui5-v2-4-0_slider_padding: 1rem 1.0625rem;--_ui5-v2-4-0_range_slider_progress_focus_width: calc(100% + var(--_ui5-v2-4-0_slider_handle_width) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_height: calc(var(--_ui5-v2-4-0_slider_handle_height) + 10px);--_ui5-v2-4-0_range_slider_progress_focus_top: -.8125rem;--_ui5-v2-4-0_slider_tooltip_bottom: 1.75rem;--_ui5-v2-4-0_slider_handle_focused_tooltip_distance: calc(var(--_ui5-v2-4-0_slider_tooltip_bottom) - var(--_ui5-v2-4-0_slider_handle_focus_width));--_ui5-v2-4-0_range_slider_progress_focus_left: calc(-1 * (var(--_ui5-v2-4-0_slider_handle_width) / 2) - 5px);--_ui5-v2-4-0_bar_base_height: 2.5rem;--_ui5-v2-4-0_bar_subheader_height: 2.25rem;--_ui5-v2-4-0_button_base_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_button_base_padding: .4375rem;--_ui5-v2-4-0_button_base_min_width: 2rem;--_ui5-v2-4-0_button_icon_font_size: 1rem;--_ui5-v2-4-0_calendar_height: 18rem;--_ui5-v2-4-0_calendar_width: 17.75rem;--_ui5-v2-4-0_calendar_left_right_padding: .25rem;--_ui5-v2-4-0_calendar_top_bottom_padding: .5rem;--_ui5-v2-4-0_calendar_header_height: 2rem;--_ui5-v2-4-0_calendar_header_arrow_button_width: 2rem;--_ui5-v2-4-0_calendar_header_padding: 0;--_ui5-v2-4-0-calendar-legend-root-padding: .5rem;--_ui5-v2-4-0-calendar-legend-root-width: 16.75rem;--_ui5-v2-4-0-calendar-legend-item-root-focus-margin: -.125rem;--_ui5-v2-4-0_checkbox_root_side_padding: var(--_ui5-v2-4-0_checkbox_wrapped_focus_padding);--_ui5-v2-4-0_checkbox_width_height: var(--_ui5-v2-4-0_checkbox_compact_width_height);--_ui5-v2-4-0_checkbox_wrapper_padding: var(--_ui5-v2-4-0_checkbox_compact_wrapper_padding);--_ui5-v2-4-0_checkbox_inner_width_height: var(--_ui5-v2-4-0_checkbox_compact_inner_size);--_ui5-v2-4-0_checkbox_icon_size: .75rem;--_ui5-v2-4-0_checkbox_partially_icon_size: .5rem;--_ui5-v2-4-0_custom_list_item_rb_min_width: 2rem;--_ui5-v2-4-0_daypicker_weeknumbers_container_padding_top: 2rem;--_ui5-v2-4-0_day_picker_item_width: 2rem;--_ui5-v2-4-0_day_picker_item_height: 2rem;--_ui5-v2-4-0_day_picker_empty_height: 2.125rem;--_ui5-v2-4-0_day_picker_item_justify_content: flex-end;--_ui5-v2-4-0_dp_two_calendar_item_now_text_padding_top: .5rem;--_ui5-v2-4-0_dp_two_calendar_item_primary_text_height: 1rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_height: .75rem;--_ui5-v2-4-0_dp_two_calendar_item_text_padding_top: .5rem;--_ui5-v2-4-0_daypicker_special_day_top: 1.625rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_top: 1.25rem;--_ui5-v2-4-0_daypicker_twocalendar_item_special_day_right: 1.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_margin_bottom: 0;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_top: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_special_day_right: 1.125rem;--_ui5-v2-4-0_daypicker_item_now_selected_two_calendar_focus_secondary_text_padding_block: 0 1rem;--_ui5-v2-4-0_datetime_picker_height: 20.5rem;--_ui5-v2-4-0_datetime_picker_width: 35.5rem;--_ui5-v2-4-0_datetime_timeview_width: 17rem;--_ui5-v2-4-0_datetime_timeview_phonemode_width: 18.5rem;--_ui5-v2-4-0_datetime_timeview_padding: .5rem;--_ui5-v2-4-0_datetime_timeview_phonemode_clocks_width: 21.125rem;--_ui5-v2-4-0_datetime_dateview_phonemode_margin_bottom: 3.125rem;--_ui5-v2-4-0_dialog_content_min_height: 2.5rem;--_ui5-v2-4-0_dialog_footer_height: 2.5rem;--_ui5-v2-4-0_form_item_min_height: 2rem;--_ui5-v2-4-0_form_item_padding: .25rem;--_ui5-v2-4-0-form-group-heading-height: 2rem;--_ui5-v2-4-0_input_height: var(--sapElement_Compact_Height);--_ui5-v2-4-0_input_inner_padding: 0 .5rem;--_ui5-v2-4-0_input_inner_padding_with_icon: 0 .2rem 0 .5rem;--_ui5-v2-4-0_input_inner_space_to_tokenizer: .125rem;--_ui5-v2-4-0_input_inner_space_to_n_more_text: .125rem;--_ui5-v2-4-0_input_icon_min_width: var(--_ui5-v2-4-0_input_compact_min_width);--_ui5-v2-4-0_menu_item_padding: 0 .75rem 0 .5rem;--_ui5-v2-4-0_menu_item_submenu_icon_right: .75rem;--_ui5-v2-4-0_popup_default_header_height: 2.5rem;--_ui5-v2-4-0_textarea_margin: .1875rem 0;--_ui5-v2-4-0_list_no_data_height: 2rem;--_ui5-v2-4-0_list_item_cb_margin_right: .5rem;--_ui5-v2-4-0_list_item_title_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_img_top_margin: .55rem;--_ui5-v2-4-0_list_no_data_font_size: var(--sapFontSize);--_ui5-v2-4-0_list_item_dropdown_base_height: 2rem;--_ui5-v2-4-0_list_item_base_height: 2rem;--_ui5-v2-4-0_list_item_base_padding: 0 1rem;--_ui5-v2-4-0_list_item_icon_size: 1rem;--_ui5-v2-4-0_list_item_selection_btn_margin_top: calc(-1 * var(--_ui5-v2-4-0_checkbox_wrapper_padding));--_ui5-v2-4-0_list_item_content_vertical_offset: calc((var(--_ui5-v2-4-0_list_item_base_height) - var(--_ui5-v2-4-0_list_item_title_size)) / 2);--_ui5-v2-4-0_list_busy_row_height: 2rem;--_ui5-v2-4-0_list_buttons_left_space: .125rem;--_ui5-v2-4-0_month_picker_item_height: 2rem;--_ui5-v2-4-0_year_picker_item_height: 2rem;--_ui5-v2-4-0_panel_header_height: 2rem;--_ui5-v2-4-0_panel_button_root_height: 2rem;--_ui5-v2-4-0_panel_button_root_width: 2.5rem;--_ui5-v2-4-0_token_height: 1.25rem;--_ui5-v2-4-0_token_right_margin: .25rem;--_ui5-v2-4-0_token_left_padding: .25rem;--_ui5-v2-4-0_token_readonly_padding: .125rem .25rem;--_ui5-v2-4-0_token_focus_offset: -.125rem;--_ui5-v2-4-0_token_icon_size: .75rem;--_ui5-v2-4-0_token_icon_padding: .375rem .375rem;--_ui5-v2-4-0_token_wrapper_right_padding: .25rem;--_ui5-v2-4-0_token_wrapper_left_padding: 0;--_ui5-v2-4-0_token_outline_offset: -.125rem;--_ui5-v2-4-0_tl_bubble_padding: .5rem;--_ui5-v2-4-0_tl_indicator_before_bottom: -.5rem;--_ui5-v2-4-0_tl_padding: .5rem;--_ui5-v2-4-0_tl_li_margin_bottom: .5rem;--_ui5-v2-4-0_tc_item_text: 2rem;--_ui5-v2-4-0_tc_item_text_line_height: 1.325rem;--_ui5-v2-4-0_tc_item_add_text_margin_top: .3125rem;--_ui5-v2-4-0_tc_item_height: 4rem;--_ui5-v2-4-0_tc_header_height: var(--_ui5-v2-4-0_tc_item_height);--_ui5-v2-4-0_tc_item_icon_circle_size: 2rem;--_ui5-v2-4-0_tc_item_icon_size: 1rem;--_ui5-v2-4-0_radio_button_height: 2rem;--_ui5-v2-4-0_radio_button_label_side_padding: .5rem;--_ui5-v2-4-0_radio_button_inner_size: 2rem;--_ui5-v2-4-0_radio_button_svg_size: 1rem;--_ui5-v2-4-0-responsive_popover_header_height: 2.5rem;--ui5-v2-4-0_side_navigation_item_height: 2rem;--_ui5-v2-4-0_slider_handle_height: 1.25rem;--_ui5-v2-4-0_slider_handle_width: 1.5rem;--_ui5-v2-4-0_slider_tooltip_padding: .25rem;--_ui5-v2-4-0_slider_progress_outline_offset: -.625rem;--_ui5-v2-4-0_slider_outer_height: 1.3125rem;--_ui5-v2-4-0_step_input_min_width: 6rem;--_ui5-v2-4-0_step_input_padding: 2rem;--_ui5-v2-4-0-tree-indent-step: .5rem;--_ui5-v2-4-0-tree-toggle-box-width: 2rem;--_ui5-v2-4-0-tree-toggle-box-height: 1.5rem;--_ui5-v2-4-0-tree-toggle-icon-size: .8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_bottom: -.75rem;--_ui5-v2-4-0_timeline_tli_indicator_before_right: -.5rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_bottom: -1rem;--_ui5-v2-4-0_timeline_tli_indicator_before_without_icon_right: -.8125rem;--_ui5-v2-4-0_timeline_tli_indicator_before_height: calc(100% - 1.25rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_without_icon_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_horizontal_indicator_before_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_icon_horizontal_indicator_after_width: var(--_ui5-v2-4-0_timeline_tli_indicator_after_height);--_ui5-v2-4-0_timeline_tli_indicator_after_top: calc(-100% + .9375rem) ;--_ui5-v2-4-0_timeline_tli_indicator_after_height: calc(100% - .75rem) ;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_after_left: 1.8625rem;--_ui5-v2-4-0_timeline_tli_horizontal_indicator_short_after_width: calc(100% - 1rem) ;--_ui5-v2-4-0_timeline_tli_without_icon_horizontal_indicator_before_width: calc(100% - .625rem) ;--_ui5-v2-4-0_timeline_tli_last_child_vertical_indicator_before_height: calc(100% - 2.5rem) ;--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height: calc(100% + 1.5rem) ;--_ui5-v2-4-0_timeline_tlgi_horizontal_line_placeholder_before_width: var(--_ui5-v2-4-0_timeline_tlgi_compact_icon_before_height);--_ui5-v2-4-0_timeline_tlgi_horizontal_compact_root_margin_left: .5rem;--_ui5-v2-4-0_timeline_tlgi_compact_root_gap: .5rem;--_ui5-v2-4-0_timeline_tlgi_root_horizontal_height: 19.375rem;--_ui5-v2-4-0_vsd_header_container: 2.5rem;--_ui5-v2-4-0_vsd_sub_header_container_height: 2rem;--_ui5-v2-4-0_vsd_header_height: 4rem;--_ui5-v2-4-0_vsd_expand_content_height: 25.4375rem;--_ui5-v2-4-0-toolbar-separator-height: 1.5rem;--_ui5-v2-4-0-toolbar-height: 2rem;--_ui5-v2-4-0_toolbar_overflow_padding: .1875rem .375rem;--_ui5-v2-4-0_dynamic_page_title_actions_separator_height: var(--_ui5-v2-4-0-toolbar-separator-height);--_ui5-v2-4-0_textarea_padding_top: .1875rem;--_ui5-v2-4-0_textarea_padding_bottom: .125rem;--_ui5-v2-4-0_checkbox_focus_position: .25rem;--_ui5-v2-4-0_split_button_middle_separator_top: .3125rem;--_ui5-v2-4-0_split_button_middle_separator_height: 1rem;--_ui5-v2-4-0_slider_handle_top: -.5rem;--_ui5-v2-4-0_slider_tooltip_height: 1.375rem;--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block: .125rem;--_ui5-v2-4-0_color-palette-item-height: 1.25rem;--_ui5-v2-4-0_color-palette-item-focus-height: 1rem;--_ui5-v2-4-0_color-palette-item-container-sides-padding: .1875rem;--_ui5-v2-4-0_color-palette-item-container-rows-padding: .8125rem;--_ui5-v2-4-0_color-palette-item-hover-height: 1.625rem;--_ui5-v2-4-0_color-palette-item-margin: calc(((var(--_ui5-v2-4-0_color-palette-item-hover-height) - var(--_ui5-v2-4-0_color-palette-item-height)) / 2) + .0625rem);--_ui5-v2-4-0_color-palette-row-width: 8.75rem;--_ui5-v2-4-0_color-palette-swatch-container-padding: .1875rem .5rem;--_ui5-v2-4-0_color-palette-item-hover-margin: .0625rem;--_ui5-v2-4-0_color-palette-row-height: 7.5rem;--_ui5-v2-4-0_color-palette-button-height: 2rem;--_ui5-v2-4-0_color-palette-item-before-focus-inset: -.25rem;--_ui5-v2-4-0_color_picker_slider_container_margin_top: -9px;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_top: 1.5625rem;--_ui5-v2-4-0_daypicker_specialday_focused_top: 1.3125rem;--_ui5-v2-4-0_daypicker_selected_item_now_special_day_border_bottom_radius_alternate: .5rem;--_ui5-v2-4-0_daypicker_specialday_focused_border_bottom: .25rem;--_ui5-v2-4-0_daypicker_item_now_specialday_top: 1.4375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding_block: 0 .375rem;--_ui5-v2-4-0_dp_two_calendar_item_secondary_text_padding: 0 .375rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_margin_bottom: -.25rem;--_ui5-v2-4-0_daypicker_two_calendar_item_selected_focus_padding_right: .4375rem}:root,[dir=ltr]{--_ui5-v2-4-0_rotation_90deg: rotate(90deg);--_ui5-v2-4-0_rotation_minus_90deg: rotate(-90deg);--_ui5-v2-4-0_icon_transform_scale: none;--_ui5-v2-4-0_panel_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_li_notification_group_toggle_btn_rotation: var(--_ui5-v2-4-0_rotation_90deg);--_ui5-v2-4-0_timeline_scroll_container_offset: .5rem;--_ui5-v2-4-0_popover_upward_arrow_margin: .1875rem 0 0 .1875rem;--_ui5-v2-4-0_popover_right_arrow_margin: .1875rem 0 0 -.375rem;--_ui5-v2-4-0_popover_downward_arrow_margin: -.375rem 0 0 .125rem;--_ui5-v2-4-0_popover_left_arrow_margin: .125rem 0 0 .25rem;--_ui5-v2-4-0_dialog_resize_cursor: se-resize;--_ui5-v2-4-0_progress_indicator_bar_border_radius: .5rem 0 0 .5rem;--_ui5-v2-4-0_progress_indicator_remaining_bar_border_radius: 0 .5rem .5rem 0;--_ui5-v2-4-0_menu_submenu_margin_offset: -.25rem 0;--_ui5-v2-4-0_menu_submenu_placement_type_left_margin_offset: .25rem 0;--_ui5-v2-4-0-menu_item_icon_float: right;--_ui5-v2-4-0-shellbar-notification-btn-count-offset: -.125rem}\n'};hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var sB=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let lB=class extends xT{constructor(){super(...arguments),this.design="Default",this.showTooltip=!1,this.mode="Image",this.pathData=[],this.invalid=!1}_onkeydown(e){this.mode===rB.Interactive&&(MT(e)&&this.fireDecoratorEvent("click"),IT(e)&&e.preventDefault())}_onkeyup(e){this.mode===rB.Interactive&&IT(e)&&this.fireDecoratorEvent("click")}get _dir(){return this.ltr?"ltr":void 0}get effectiveAriaHidden(){return this.mode===rB.Decorative?"true":void 0}get _tabIndex(){return this.mode===rB.Interactive?"0":void 0}get effectiveAccessibleRole(){switch(this.mode){case rB.Interactive:return"button";case rB.Decorative:return"presentation";default:return"img"}}onEnterDOM(){NC()&&this.setAttribute("desktop","")}async onBeforeRendering(){const e=this.name;if(!e)return console.warn("Icon name property is required",this);let t=BE(e);if(t||(t=await RE(e)),!t)return this.invalid=!0,console.warn(`Required icon is not registered. Invalid icon name: ${this.name}`);if("ICON_NOT_FOUND"===t)return this.invalid=!0,console.warn(`Required icon is not registered. You can either import the icon as a module in order to use it e.g. "@ui5/webcomponents-icons/dist/${e.replace("sap-icon://","")}.js", or setup a JSON build step and import "@ui5/webcomponents-icons/dist/AllIcons.js".`);if(this.viewBox=t.viewBox||"0 0 512 512",t.customTemplate&&(t.pathData=[],this.customSvg=iT(t.customTemplate,this)),this.invalid=!1,this.pathData=Array.isArray(t.pathData)?t.pathData:[t.pathData],this.accData=t.accData,this.ltr=t.ltr,this.packageName=t.packageName,this.accessibleName)this.effectiveAccessibleName=this.accessibleName;else if(this.accData){const e=await xE(this.packageName);this.effectiveAccessibleName=e.getText(this.accData)||void 0}else this.effectiveAccessibleName=void 0}get hasIconTooltip(){return this.showTooltip&&this.effectiveAccessibleName}};sB([CT()],lB.prototype,"design",void 0),sB([CT()],lB.prototype,"name",void 0),sB([CT()],lB.prototype,"accessibleName",void 0),sB([CT({type:Boolean})],lB.prototype,"showTooltip",void 0),sB([CT()],lB.prototype,"mode",void 0),sB([CT({type:Array})],lB.prototype,"pathData",void 0),sB([CT({type:Object,noAttribute:!0})],lB.prototype,"accData",void 0),sB([CT({type:Boolean})],lB.prototype,"invalid",void 0),sB([CT({noAttribute:!0})],lB.prototype,"effectiveAccessibleName",void 0),lB=sB([ST({tag:"ui5-icon",languageAware:!0,themeAware:!0,renderer:AM,template:function(e,t,i){return vM`<svg class="ui5-icon-root" part="root" tabindex="${_M(this._tabIndex)}" dir="${_M(this._dir)}" viewBox="${_M(this.viewBox)}" role="${_M(this.effectiveAccessibleRole)}" focusable="false" preserveAspectRatio="xMidYMid meet" aria-label="${_M(this.effectiveAccessibleName)}" aria-hidden=${_M(this.effectiveAriaHidden)} xmlns="http://www.w3.org/2000/svg" @keydown=${this._onkeydown} @keyup=${this._onkeyup}>${iB.call(this,e,t,i)}</svg>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Icon.css.ts",content:':host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([hidden]){display:none}:host([invalid]){display:none}:host(:not([hidden]).ui5_hovered){opacity:.7}:host{display:inline-block;width:1rem;height:1rem;color:var(--sapContent_IconColor);fill:currentColor;outline:none}:host([design="Contrast"]){color:var(--sapContent_ContrastIconColor)}:host([design="Critical"]){color:var(--sapCriticalElementColor)}:host([design="Information"]){color:var(--sapInformativeElementColor)}:host([design="Negative"]){color:var(--sapNegativeElementColor)}:host([design="Neutral"]){color:var(--sapNeutralElementColor)}:host([design="NonInteractive"]){color:var(--sapContent_NonInteractiveIconColor)}:host([design="Positive"]){color:var(--sapPositiveElementColor)}:host([mode="Interactive"][desktop]) .ui5-icon-root:focus,:host([mode="Interactive"]) .ui5-icon-root:focus-visible{outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--ui5-v2-4-0-icon-focus-border-radius)}.ui5-icon-root{display:flex;height:100%;width:100%;outline:none;vertical-align:top}:host([mode="Interactive"]){cursor:pointer}.ui5-icon-root:not([dir=ltr]){transform:var(--_ui5-v2-4-0_icon_transform_scale);transform-origin:center}\n'}}),ET("click",{bubbles:!0})],lB),lB.define();const cB=lB;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var uB,hB=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let dB=uB=class extends xT{get ariaDescription(){return uB.i18nBundle.getText(gI)}constructor(){super(),this.disabled=!1,this.selected=!1,this.iconOnly=!1,this.nonInteractive=!1,this.posInSet=0,this.sizeOfSet=0}_onclick(e){this.disabled&&(e.preventDefault(),e.stopPropagation()),this.selected=!this.selected}onEnterDOM(){NC()&&this.setAttribute("desktop","")}onBeforeRendering(){this.iconOnly=!KI(this.text)}_onkeyup(e){BT(e)&&e.preventDefault()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||this.forcedTabIndex}get ariaLabelText(){return QI(this)}get showIconTooltip(){return zI()&&this.iconOnly&&!this.tooltip}};hB([CT({type:Boolean})],dB.prototype,"disabled",void 0),hB([CT({type:Boolean})],dB.prototype,"selected",void 0),hB([CT()],dB.prototype,"tooltip",void 0),hB([CT()],dB.prototype,"accessibleName",void 0),hB([CT()],dB.prototype,"accessibleNameRef",void 0),hB([CT()],dB.prototype,"icon",void 0),hB([CT({type:Boolean})],dB.prototype,"iconOnly",void 0),hB([CT({type:Boolean})],dB.prototype,"nonInteractive",void 0),hB([CT({noAttribute:!0})],dB.prototype,"forcedTabIndex",void 0),hB([CT({type:Number})],dB.prototype,"posInSet",void 0),hB([CT({type:Number})],dB.prototype,"sizeOfSet",void 0),hB([TT({type:Node,default:!0})],dB.prototype,"text",void 0),hB([xM("@ui5/webcomponents")],dB,"i18nBundle",void 0),dB=uB=hB([ST({tag:"ui5-segmented-button-item",renderer:AM,template:function(e,t,i){return vM`<li role="option" aria-roledescription="${_M(this.ariaDescription)}" aria-posinset="${_M(this.posInSet)}" aria-setsize="${_M(this.sizeOfSet)}" aria-selected="${_M(this.selected)}" class="ui5-segmented-button-item-root" aria-disabled="${_M(this.disabled)}" data-sap-focus-ref @click=${this._onclick} @keyup=${this._onkeyup} tabindex=${_M(this.tabIndexValue)} aria-label="${_M(this.ariaLabelText)}" title="${_M(this.tooltip)}">${this.icon?ZI.call(this,e,t,i):void 0}<span id="${_M(this._id)}-content" class="ui5-segmented-button-item-text"><bdi><slot></slot></bdi></span></li>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButtonItem.css.ts",content:':host{vertical-align:middle}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-segmented-button-item-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:.0625rem solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-segmented-button-item-icon{color:inherit;flex-shrink:0;padding-inline-end:.375rem}:host([icon-only]) .ui5-segmented-button-item-icon{padding-inline-end:0}:host([icon-only]) .ui5-segmented-button-item-root{min-width:auto;padding:0}:host([icon-only]) .ui5-segmented-button-item-text{display:none}.ui5-segmented-button-item-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not([icon-end])) .ui5-segmented-button-item-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-icon][icon-end]) .ui5-segmented-button-item-text{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only])) .ui5-segmented-button-item-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]){pointer-events:none}:host([desktop]:not([active])) .ui5-segmented-button-item-root:focus-within:after,:host(:not([active])) .ui5-segmented-button-item-root:focus-visible:after,:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-segmented-button-item-root:focus-within:before,:host([active]) .ui5-segmented-button-item-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}.ui5-segmented-button-item-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([active][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([active]) .ui5-segmented-button-item-root:focus-visible:after,:host([selected][desktop]) .ui5-segmented-button-item-root:focus-within:after,:host([selected]) .ui5-segmented-button-item-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([desktop]:not(:last-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:last-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-end-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([desktop]:not(:first-child)) .ui5-segmented-button-item-root:focus-within:after,:host(:not(:first-child)) .ui5-segmented-button-item-root:focus-visible:after{border-start-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-end-start-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n'},dependencies:[cB]})],dB),dB.define();const pB=dB;var fB;!function(e){e.Single="Single",e.Multiple="Multiple"}(fB||(fB={}));const mB=fB;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var gB,_B=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let vB=gB=class extends xT{constructor(){super(),this.selectionMode="Single",this._itemNavigation=new aM(this,{getItemsCallback:()=>this.navigatableItems}),this.hasPreviouslyFocusedItem=!1}onBeforeRendering(){const e=this.getSlottedNodes("items");e.forEach(((e,t,i)=>{e.posInSet=t+1,e.sizeOfSet=i.length})),this.normalizeSelection(),this.style.setProperty(IS("--_ui5_segmented_btn_items_count"),`${e.length}`)}normalizeSelection(){if(this.items.length)switch(this.selectionMode){case mB.Single:{const e=this.selectedItems,t=this._selectedItem?e.indexOf(this._selectedItem):-1;this._selectedItem&&e.length>1&&e.splice(t,1);const i=e.pop()||this.items[0];this._applySingleSelection(i);break}}}_selectItem(e){const t=e.target,i=t.hasAttribute("ui5-segmented-button-item");if(!t.disabled&&t!==this.getDomRef()&&i)return this.selectionMode===mB.Multiple?e instanceof KeyboardEvent&&(t.selected=!t.selected):this._applySingleSelection(t),this.fireDecoratorEvent("selection-change",{selectedItems:this.selectedItems}),this._itemNavigation.setCurrentItem(t),this}_applySingleSelection(e){this.items.forEach((e=>{e.selected=!1})),e.selected=!0,this._selectedItem=e}_onclick(e){this._selectItem(e)}_onkeydown(e){MT(e)?this._selectItem(e):IT(e)&&e.preventDefault()}_onkeyup(e){IT(e)&&this._selectItem(e)}_onmousedown(e){const t=e.target;t.hasAttribute("ui5-segmented-button-item")&&(this._itemNavigation.setCurrentItem(t),this.hasPreviouslyFocusedItem=!0)}_onfocusin(e){this.hasPreviouslyFocusedItem?this._itemNavigation.setCurrentItem(e.target):this.selectedItems.length&&(this._itemNavigation.setCurrentItem(this.selectedItems[0]),this.selectedItems[0].focus(),this.hasPreviouslyFocusedItem=!0)}get selectedItems(){return this.items.filter((e=>e.selected))}get navigatableItems(){return this.getSlottedNodes("items").filter((e=>!e.disabled))}get ariaDescribedBy(){return gB.i18nBundle.getText(mI)}get ariaDescription(){return gB.i18nBundle.getText(fI)}};var yB;_B([CT()],vB.prototype,"accessibleName",void 0),_B([CT()],vB.prototype,"selectionMode",void 0),_B([TT({type:HTMLElement,invalidateOnChildChange:!0,default:!0})],vB.prototype,"items",void 0),_B([xM("@ui5/webcomponents")],vB,"i18nBundle",void 0),vB=gB=_B([ST({tag:"ui5-segmented-button",languageAware:!0,renderer:AM,template:function(e,t,i){return vM`<ul @click="${this._onclick}" @mousedown="${this._onmousedown}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @focusin="${this._onfocusin}" class="ui5-segmented-button-root" role="listbox" aria-multiselectable="true" aria-describedby="${_M(this._id)}-invisibleText" aria-roledescription=${_M(this.ariaDescription)} aria-label=${_M(this.accessibleName)}><slot></slot><span id="${_M(this._id)}-invisibleText" class="ui5-hidden-text">${_M(this.ariaDescribedBy)}</span></ul>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/SegmentedButton.css.ts",content:":host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block;min-width:calc(var(--_ui5-v2-4-0_segmented_btn_items_count) * var(--_ui5-v2-4-0_button_base_min_width))}.ui5-segmented-button-root{width:inherit;display:grid;grid-template-columns:repeat(var(--_ui5-v2-4-0_segmented_btn_items_count),minmax(var(--_ui5-v2-4-0_button_base_min_width),1fr));margin:0;padding:0;background-color:var(--sapButton_Background);border-radius:var(--sapButton_BorderCornerRadius);box-shadow:inset 0 0 0 var(--sapButton_BorderWidth) var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item]){border-radius:var(--_ui5-v2-4-0_segmented_btn_inner_border_radius);border-color:var(--_ui5-v2-4-0_segmented_btn_border_color);background-color:var(--_ui5-v2-4-0_segmented_btn_background_color);height:var(--_ui5-v2-4-0_button_base_height);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;z-index:initial}::slotted([ui5-segmented-button-item]:hover){z-index:2;box-shadow:var(--_ui5-v2-4-0_segmented_btn_hover_box_shadow);border-color:var(--sapButton_Hover_BorderColor);background-color:var(--sapButton_Hover_Background)}::slotted([ui5-segmented-button-item][selected]),::slotted([ui5-segmented-button-item][active]){border-color:var(--sapButton_Selected_BorderColor);background-color:var(--sapButton_Selected_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item][selected]:hover){border-color:var(--sapButton_Selected_Hover_BorderColor);background-color:var(--sapButton_Selected_Hover_Background);color:var(--sapButton_Selected_TextColor)}::slotted([ui5-segmented-button-item]:last-child){border-start-end-radius:var(--sapButton_BorderCornerRadius);border-end-end-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:first-child){border-start-start-radius:var(--sapButton_BorderCornerRadius);border-end-start-radius:var(--sapButton_BorderCornerRadius)}::slotted([ui5-segmented-button-item]:not(:first-child)){border-left-width:var(--_ui5-v2-4-0_segmented_btn_item_border_left);border-right-width:var(--_ui5-v2-4-0_segmented_btn_item_border_right)}::slotted([ui5-segmented-button-item][active]:not([active]):hover){border-color:var(--sapButton_BorderColor)}::slotted([ui5-segmented-button-item][active]:hover){border-color:var(--sapButton_Selected_BorderColor)}\n"},dependencies:[pB]}),ET("selection-change",{detail:{selectedItems:{type:Array}},bubbles:!0})],vB),vB.define(),function(e){e.Default="Default",e.Positive="Positive",e.Negative="Negative",e.Transparent="Transparent",e.Emphasized="Emphasized",e.Attention="Attention"}(yB||(yB={}));const AB=yB;var bB;!function(e){e.Button="Button",e.Submit="Submit",e.Reset="Reset"}(bB||(bB={}));const xB=bB;function wB(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-button-icon" name="${_M(this.icon)}" mode="${_M(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-button-icon" name="${_M(this.icon)}" mode="${_M(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function SB(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-button-end-icon" name="${_M(this.endIcon)}" mode="${_M(this.endIconMode)}" part="endIcon"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-button-end-icon" name="${_M(this.endIcon)}" mode="${_M(this.endIconMode)}" part="endIcon"></ui5-icon>`}function CB(e,t,i){return vM`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${_M(this.buttonTypeText)}</span>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var EB,TB=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let MB=!1,IB=null,BB=EB=class extends xT{constructor(){super(),this.design="Default",this.disabled=!1,this.submits=!1,this.accessibilityAttributes={},this.type="Button",this.accessibleRole="Button",this.active=!1,this.iconOnly=!1,this.hasIcon=!1,this.hasEndIcon=!1,this.nonInteractive=!1,this._iconSettings={},this.forcedTabIndex="0",this._isTouch=!1,this._cancelAction=!1,this._deactivate=()=>{IB&&IB._setActiveState(!1)},MB||(document.addEventListener("mouseup",this._deactivate),MB=!0),this._ontouchstart={handleEvent:()=>{this.nonInteractive||this._setActiveState(!0)},passive:!0}}onEnterDOM(){NC()&&this.setAttribute("desktop","")}async onBeforeRendering(){this.hasIcon=!!this.icon,this.hasEndIcon=!!this.endIcon,this.iconOnly=this.isIconOnly,this.buttonTitle=this.tooltip||await this.getDefaultTooltip()}_onclick(){var e;this.nonInteractive||(this._isSubmit&&aT(this),this._isReset&&(()=>{var e,t;null==(t=null==(e=this._internals)?void 0:e.form)||t.reset()})(),LC()&&(null==(e=this.getDomRef())||e.focus()))}_onmousedown(){this.nonInteractive||(this._setActiveState(!0),IB=this)}_ontouchend(e){this.disabled&&(e.preventDefault(),e.stopPropagation()),this.active&&this._setActiveState(!1),IB&&IB._setActiveState(!1)}_onkeydown(e){var t;this._cancelAction="Shift"===(t=e).key||16===t.keyCode||jT(e),IT(e)||MT(e)?this._setActiveState(!0):this._cancelAction&&this._setActiveState(!1)}_onkeyup(e){this._cancelAction&&e.preventDefault(),(IT(e)||MT(e))&&this.active&&this._setActiveState(!1)}_onfocusout(){this.nonInteractive||this.active&&this._setActiveState(!1)}_setActiveState(e){!this.fireDecoratorEvent("_active-state-change")||(this.active=e)}get _hasPopup(){return this.accessibilityAttributes.hasPopup}get hasButtonType(){return this.design!==AB.Default&&this.design!==AB.Transparent}get iconMode(){return this.icon?rB.Decorative:""}get endIconMode(){return this.endIcon?rB.Decorative:""}get isIconOnly(){return!KI(this.text)}static typeTextMappings(){return{Positive:PM,Negative:kM,Emphasized:LM}}getDefaultTooltip(){if(zI())return(async e=>{if(!e)return;let t=BE(e);return t||(t=await RE(e)),t&&t!==EE&&t.accData?(await xE(t.packageName)).getText(t.accData):void 0})(this.icon)}get buttonTypeText(){return EB.i18nBundle.getText(EB.typeTextMappings()[this.design])}get effectiveAccRole(){return this.accessibleRole.toLowerCase()}get tabIndexValue(){if(!this.disabled)return this.getAttribute("tabindex")||(this.nonInteractive?"-1":this.forcedTabIndex)}get showIconTooltip(){return zI()&&this.iconOnly&&!this.tooltip}get ariaLabelText(){return QI(this)}get ariaDescribedbyText(){return this.hasButtonType?"ui5-button-hiddenText-type":void 0}get _isSubmit(){return this.type===xB.Submit||this.submits}get _isReset(){return this.type===xB.Reset}};TB([CT()],BB.prototype,"design",void 0),TB([CT({type:Boolean})],BB.prototype,"disabled",void 0),TB([CT()],BB.prototype,"icon",void 0),TB([CT()],BB.prototype,"endIcon",void 0),TB([CT({type:Boolean})],BB.prototype,"submits",void 0),TB([CT()],BB.prototype,"tooltip",void 0),TB([CT()],BB.prototype,"accessibleName",void 0),TB([CT()],BB.prototype,"accessibleNameRef",void 0),TB([CT({type:Object})],BB.prototype,"accessibilityAttributes",void 0),TB([CT()],BB.prototype,"type",void 0),TB([CT()],BB.prototype,"accessibleRole",void 0),TB([CT({type:Boolean})],BB.prototype,"active",void 0),TB([CT({type:Boolean})],BB.prototype,"iconOnly",void 0),TB([CT({type:Boolean})],BB.prototype,"hasIcon",void 0),TB([CT({type:Boolean})],BB.prototype,"hasEndIcon",void 0),TB([CT({type:Boolean})],BB.prototype,"nonInteractive",void 0),TB([CT({noAttribute:!0})],BB.prototype,"buttonTitle",void 0),TB([CT({type:Object})],BB.prototype,"_iconSettings",void 0),TB([CT({noAttribute:!0})],BB.prototype,"forcedTabIndex",void 0),TB([CT({type:Boolean})],BB.prototype,"_isTouch",void 0),TB([CT({type:Boolean,noAttribute:!0})],BB.prototype,"_cancelAction",void 0),TB([TT({type:Node,default:!0})],BB.prototype,"text",void 0),TB([xM("@ui5/webcomponents")],BB,"i18nBundle",void 0),BB=EB=TB([ST({tag:"ui5-button",formAssociated:!0,languageAware:!0,renderer:AM,template:function(e,t,i){return vM`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${_M(this.tabIndexValue)} aria-expanded="${_M(this.accessibilityAttributes.expanded)}" aria-controls="${_M(this.accessibilityAttributes.controls)}" aria-haspopup="${_M(this._hasPopup)}" aria-label="${_M(this.ariaLabelText)}" aria-describedby="${_M(this.ariaDescribedbyText)}" title="${_M(this.buttonTitle)}" part="button" role="${_M(this.effectiveAccRole)}">${this.icon?wB.call(this,e,t,i):void 0}<span id="${_M(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?SB.call(this,e,t,i):void 0}${this.hasButtonType?CB.call(this,e,t,i):void 0}</button> `},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Button.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_button_base_min_width);height:var(--_ui5-v2-4-0_button_base_height);line-height:normal;font-family:var(--_ui5-v2-4-0_button_fontFamily);font-size:var(--sapFontSize);text-shadow:var(--_ui5-v2-4-0_button_text_shadow);border-radius:var(--_ui5-v2-4-0_button_border_radius);cursor:pointer;background-color:var(--sapButton_Background);border:var(--sapButton_BorderWidth) solid var(--sapButton_BorderColor);color:var(--sapButton_TextColor);box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-button-root{min-width:inherit;cursor:inherit;height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;outline:none;padding:0 var(--_ui5-v2-4-0_button_base_padding);position:relative;background:transparent;border:none;color:inherit;text-shadow:inherit;font:inherit;white-space:inherit;overflow:inherit;text-overflow:inherit;letter-spacing:inherit;word-spacing:inherit;line-height:inherit;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host(:not([hidden]):not([disabled]).ui5_hovered){background:var(--sapButton_Hover_Background);border:1px solid var(--sapButton_Hover_BorderColor);color:var(--sapButton_Hover_TextColor)}.ui5-button-icon,.ui5-button-end-icon{color:inherit;flex-shrink:0}.ui5-button-end-icon{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([icon-only]:not([has-end-icon])) .ui5-button-root{min-width:auto;padding:0}:host([icon-only]) .ui5-button-text{display:none}.ui5-button-text{outline:none;position:relative;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([has-icon]:not(:empty)) .ui5-button-text{margin-inline-start:var(--_ui5-v2-4-0_button_base_icon_margin)}:host([has-end-icon]:not([has-icon]):empty) .ui5-button-end-icon{margin-inline-start:0}:host([disabled]){opacity:var(--sapContent_DisabledOpacity);pointer-events:unset;cursor:default}:host([has-icon]:not([icon-only]):not([has-end-icon])) .ui5-button-text{min-width:calc(var(--_ui5-v2-4-0_button_base_min_width) - var(--_ui5-v2-4-0_button_base_icon_margin) - 1rem)}:host([disabled]:active){pointer-events:none}:host([desktop]:not([active])) .ui5-button-root:focus-within:after,:host(:not([active])) .ui5-button-root:focus-visible:after,:host([desktop][active][design="Emphasized"]) .ui5-button-root:focus-within:after,:host([active][design="Emphasized"]) .ui5-button-root:focus-visible:after,:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_focused_border);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}:host([desktop][active]) .ui5-button-root:focus-within:before,:host([active]) .ui5-button-root:focus-visible:before{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:before,:host([design="Emphasized"]) .ui5-button-root:focus-visible:before{content:"";position:absolute;box-sizing:border-box;inset:.0625rem;border:var(--_ui5-v2-4-0_button_emphasized_focused_border_before);border-radius:var(--_ui5-v2-4-0_button_focused_border_radius)}.ui5-button-root::-moz-focus-inner{border:0}bdi{display:block;white-space:inherit;overflow:inherit;text-overflow:inherit}:host([ui5-button][active]:not([disabled]):not([non-interactive])){background-image:none;background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([design="Positive"]){background-color:var(--sapButton_Accept_Background);border-color:var(--sapButton_Accept_BorderColor);color:var(--sapButton_Accept_TextColor)}:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Positive"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Accept_Hover_Background);border-color:var(--sapButton_Accept_Hover_BorderColor);color:var(--sapButton_Accept_Hover_TextColor)}:host([ui5-button][design="Positive"][active]:not([non-interactive])){background-color:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Active_TextColor)}:host([design="Negative"]){background-color:var(--sapButton_Reject_Background);border-color:var(--sapButton_Reject_BorderColor);color:var(--sapButton_Reject_TextColor)}:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Negative"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Reject_Hover_Background);border-color:var(--sapButton_Reject_Hover_BorderColor);color:var(--sapButton_Reject_Hover_TextColor)}:host([ui5-button][design="Negative"][active]:not([non-interactive])){background-color:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Attention"]){background-color:var(--sapButton_Attention_Background);border-color:var(--sapButton_Attention_BorderColor);color:var(--sapButton_Attention_TextColor)}:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Attention"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Attention_Hover_Background);border-color:var(--sapButton_Attention_Hover_BorderColor);color:var(--sapButton_Attention_Hover_TextColor)}:host([ui5-button][design="Attention"][active]:not([non-interactive])){background-color:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Emphasized"]){background-color:var(--sapButton_Emphasized_Background);border-color:var(--sapButton_Emphasized_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_TextColor);font-family:var(--sapFontBoldFamily )}:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Emphasized"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Emphasized_Hover_Background);border-color:var(--sapButton_Emphasized_Hover_BorderColor);border-width:var(--_ui5-v2-4-0_button_emphasized_border_width);color:var(--sapButton_Emphasized_Hover_TextColor)}:host([ui5-button][design="Empasized"][active]:not([non-interactive])){background-color:var(--sapButton_Emphasized_Active_Background);border-color:var(--sapButton_Emphasized_Active_BorderColor);color:var(--sapButton_Emphasized_Active_TextColor)}:host([design="Emphasized"][desktop]) .ui5-button-root:focus-within:after,:host([design="Emphasized"]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_border_color);outline:none}:host([design="Emphasized"][desktop][active]:not([non-interactive])) .ui5-button-root:focus-within:after,:host([design="Emphasized"][active]:not([non-interactive])) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_emphasized_focused_active_border_color)}:host([design="Transparent"]){background-color:var(--sapButton_Lite_Background);color:var(--sapButton_Lite_TextColor);border-color:var(--sapButton_Lite_BorderColor)}:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]):hover),:host([design="Transparent"]:not([active]):not([non-interactive]):not([_is-touch]):not([disabled]).ui5_hovered){background-color:var(--sapButton_Lite_Hover_Background);border-color:var(--sapButton_Lite_Hover_BorderColor);color:var(--sapButton_Lite_Hover_TextColor)}:host([ui5-button][design="Transparent"][active]:not([non-interactive])){background-color:var(--sapButton_Lite_Active_Background);border-color:var(--sapButton_Lite_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([ui5-segmented-button-item][active][desktop]) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item][active]) .ui5-button-root:focus-visible:after,:host([pressed][desktop]) .ui5-button-root:focus-within:after,:host([pressed]) .ui5-button-root:focus-visible:after{border-color:var(--_ui5-v2-4-0_button_pressed_focused_border_color);outline:none}:host([ui5-segmented-button-item][desktop]:not(:last-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:last-child)) .ui5-button-root:focus-visible:after{border-top-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}:host([ui5-segmented-button-item][desktop]:not(:first-child)) .ui5-button-root:focus-within:after,:host([ui5-segmented-button-item]:not(:first-child)) .ui5-button-root:focus-visible:after{border-top-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius);border-bottom-left-radius:var(--_ui5-v2-4-0_button_focused_inner_border_radius)}\n'},dependencies:[cB],shadowRootOptions:{delegatesFocus:!0}}),ET("click",{bubbles:!0}),ET("_active-state-change",{bubbles:!0,cancelable:!0})],BB),BB.define();const RB=BB,PB={key:"ICON_ADD",defaultText:"Add"},kB={key:"ICON_DECLINE",defaultText:"Decline"},LB={key:"ICON_ERROR",defaultText:"Error"};function DB(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-button-icon" name="${_M(this.icon)}" mode="${_M(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-button-icon" name="${_M(this.icon)}" mode="${_M(this.iconMode)}" part="icon" ?show-tooltip=${this.showIconTooltip}></ui5-icon>`}function NB(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-button-end-icon" name="${_M(this.endIcon)}" mode="${_M(this.endIconMode)}" part="endIcon"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-button-end-icon" name="${_M(this.endIcon)}" mode="${_M(this.endIconMode)}" part="endIcon"></ui5-icon>`}function OB(e,t,i){return vM`<span id="ui5-button-hiddenText-type" aria-hidden="true" class="ui5-hidden-text">${_M(this.buttonTypeText)}</span>`}ME("decline",{pathData:"M86 109l22-23q5-5 12-5 6 0 11 5l124 125L380 86q5-5 11-5 7 0 12 5l22 23q6 5 6 11t-6 12L301 256l124 125q6 5 6 11 0 5-6 11l-22 23q-8 5-12 5-3 0-11-5L255 301 131 426q-5 5-11 5-4 0-12-5l-22-23q-6-6-6-11 0-6 6-11l124-125L86 132q-6-6-6-12t6-11z",ltr:!1,accData:kB,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("decline",{pathData:"M292 256l117 116q7 7 7 18 0 12-7.5 19t-18.5 7q-9 0-18-7L256 292 140 409q-9 7-18 7-11 0-18.5-7.5T96 390t7-18l117-116-117-116q-7-7-7-18t7.5-18.5T122 96t18 7l116 117 116-117q7-7 18-7t18.5 7.5T416 122t-7 18z",ltr:!1,accData:kB,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("unit",{pathData:"M369.154 238q-11 0-18-8l-16-16-41 40 17 17q8 8 8 18t-8 18q-7 7-18 7t-18-7l-17-17-40 40 17 17q8 8 7.5 18t-7.5 18q-7 7-18 7t-18-7l-17-17-92 93h370V89l-90 89 17 17q8 8 8 18t-8 17q-7 8-18 8zm-340 271q-11 0-18-7 0-1-.5-1t-.5-1q-6-6-6-16t6-17l457-457 2-2q8-6 16-6 5 0 9 2l8 4q0 1 .5 1t.5 1q10 10 7 22v452q0 11-7 18t-18 7h-456zm381-101h-108l108-109v109z",ltr:!1,collection:"tnt-v2",packageName:"@ui5/webcomponents-icons-tnt"}),ME("unit",{pathData:"M199 448l-45-45-77 77h403V77l-77 77 45 45-23 23-45-45-22 22 45 45-23 23-45-45-22 23 44 45-22 22-45-45-23 23 45 45-22 22-45-44-23 22 45 45-23 23-45-45-22 22 45 45zm217-90l-58 58h58v-58zM512 0v512H0zm-64 281v167H281z",ltr:!1,collection:"tnt-v3",packageName:"@ui5/webcomponents-icons-tnt"}),ME("measure",{pathData:"M0 208V64h512v32h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96h-32v80q0 16-16 16t-16-16V96h-32v112q0 16-16 16t-16-16V96H96v80q0 16-16 16t-16-16V96H32v112q0 16-16 16T0 208zm0 112h304l25-49q2-5 7-5t7 5l25 49h144v32H384l16 32h112v32h-96l10 21q1 2 1 4t-1.5 4.5-6.5 2.5H253q-5 0-6.5-2.5T245 441t1-4l10-21H0v-32h272l16-32H0v-32zm292 96h88l-44-88z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("measure",{pathData:"M454 96q24 0 41 17t17 41v160q0 23-17 40t-41 17h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T442 320h12q7 0 7-6V154q0-7-7-7h-38v51q0 11-7.5 18.5T390 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T275 198v-51h-38v51q0 11-7.5 18.5T211 224t-18-7.5-7-18.5v-51h-39v51q0 11-7 18.5t-18 7.5-18.5-7.5T96 198v-51H58q-7 0-7 7v160q0 6 7 6h108q11 0 18.5 7.5T192 346t-7.5 18-18.5 7H58q-24 0-41-17T0 314V154q0-24 17-41t41-17h396zm-75 280q5 7 5 14 0 11-7.5 18.5T358 416H250q-11 0-18.5-7.5T224 390q0-7 5-14l54-77q8-11 21-11t21 11z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("chart-axis",{pathData:"M487.5 408q9 10 9 23t-9 23l-61 53q-5 5-11 5t-11-5-5-11.5 5-11.5l44-36h-336q-14 0-23-9.5t-9-22.5V80l-37 43q-5 5-11.5 5t-11.5-5-5-11 5-11l52-60q10-9 23-9t23 9l53 60q5 5 5 11t-5 11-11.5 5-11.5-5l-36-43v313l225-225-57 5q-16-2-16-16 0-7 4.5-11.5t10.5-4.5l80-6q13 1 22.5 10t9.5 22l-5 81q0 6-4.5 10.5t-10.5 4.5q-17 0-17-16l5-56-224 225h313l-44-37q-5-5-5-11.5t5-11.5 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("chart-axis",{pathData:"M505 391q7 7 7 19 0 11-7 18l-77 76q-8 8-18 8-11 0-18.5-7.5T384 486q0-10 8-18l33-33H102q-11 0-18-7t-7-18V87l-33 34q-7 7-18 7t-18.5-7.5T0 102q0-10 8-18L84 7q9-7 19-7 9 0 18 7l76 77q8 7 8 18t-7.5 18.5T179 128t-18-7l-33-34v261l233-233h-47q-11 0-18.5-7T288 90t7.5-18.5T314 64h108q11 0 18.5 7.5T448 90v108q0 11-7.5 18.5T422 224t-18-7.5-7-18.5v-47L164 384h261l-33-33q-8-8-8-18 0-11 7.5-18.5T410 307q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("rotate",{pathData:"M200 59q5 5 5 11 0 5-5 12l-54 54q-5 5-12 5-6 0-11-4.5t-5-11.5q0-5 5-12l27-27H80q-20 0-34 14t-14 34v77q0 16-16 16T0 211v-77q0-33 23.5-56.5T80 54h70l-27-27q-5-5-5-11t5-11q4-5 11-5 8 0 12 5zm296 133q16 0 16 16v288q0 16-16 16H208q-16 0-16-16V208q0-16 16-16h288zm-16 288V224H224v256h256z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("rotate",{pathData:"M486 192q11 0 18.5 7.5T512 218v268q0 11-7.5 18.5T486 512H218q-11 0-18.5-7.5T192 486V218q0-11 7.5-18.5T218 192h268zm-25 51H243v218h218V243zM217 62q7 7 7 18t-7 18l-55 54q-8 8-18 8-11 0-18.5-7.5T118 134q0-10 8-18l11-10H90q-17 0-28 11t-11 27v86q0 11-7 18.5T26 256t-18.5-7.5T0 230v-86q0-37 26-63.5T90 54h47l-11-10q-8-8-8-18 0-11 7.5-18.5T144 0q10 0 18 8z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var FB=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let UB=class extends RB{constructor(){super(...arguments),this.pressed=!1}_onclick(){this.pressed=!this.pressed,LC()&&this.getDomRef().focus()}_onkeyup(e){BT(e)?e.preventDefault():super._onkeyup(e)}};FB([CT({type:Boolean})],UB.prototype,"pressed",void 0),UB=FB([ST({tag:"ui5-toggle-button",template:function(e,t,i){return vM`<button type="button" class="ui5-button-root" ?disabled="${this.disabled}" data-sap-focus-ref  aria-pressed="${_M(this.pressed)}"  @focusout=${this._onfocusout} @click=${this._onclick} @mousedown=${this._onmousedown} @keydown=${this._onkeydown} @keyup=${this._onkeyup} @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" tabindex=${_M(this.tabIndexValue)} aria-expanded="${_M(this.accessibilityAttributes.expanded)}" aria-controls="${_M(this.accessibilityAttributes.controls)}" aria-haspopup="${_M(this._hasPopup)}" aria-label="${_M(this.ariaLabelText)}" aria-describedby="${_M(this.ariaDescribedbyText)}" title="${_M(this.buttonTitle)}" part="button" role="${_M(this.effectiveAccRole)}">${this.icon?DB.call(this,e,t,i):void 0}<span id="${_M(this._id)}-content" class="ui5-button-text"><bdi><slot></slot></bdi></span>${this.endIcon?NB.call(this,e,t,i):void 0}${this.hasButtonType?OB.call(this,e,t,i):void 0}</button> `},styles:[RB.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ToggleButton.css.ts",content:':host(:not([hidden])){display:inline-block}:host([design="Emphasized"]:not([pressed])){text-shadow:var(--_ui5-v2-4-0_toggle_button_emphasized_text_shadow)}:host([pressed]),:host([design="Default"][pressed]),:host([design="Transparent"][pressed]),:host([design="Emphasized"][pressed]){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor);text-shadow:none}:host([pressed]:hover),:host([pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Default"][pressed]:hover),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Transparent"][pressed]:hover),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover),:host([design="Emphasized"][pressed]:hover),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Selected_Hover_Background);border-color:var(--sapButton_Selected_Hover_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([active]:not([disabled])),:host([design="Default"][active]:not([disabled])),:host([design="Transparent"][active]:not([disabled])),:host([design="Emphasized"][active]:not([disabled])){background:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Default"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Transparent"][pressed]:not([active]):not([non-interactive]):not([_is-touch])),:host([design="Emphasized"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Selected_Background);border-color:var(--sapButton_Selected_BorderColor);color:var(--sapButton_Selected_TextColor)}:host([design="Negative"][pressed]){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][active]:not([disabled])){background:var(--sapButton_Reject_Active_Background);border-color:var(--sapButton_Reject_Active_BorderColor);color:var(--sapButton_Reject_Active_TextColor)}:host([design="Negative"][pressed][active]:hover),:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Reject_Selected_Hover_Background);border-color:var(--sapButton_Reject_Selected_Hover_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Negative"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Reject_Selected_Background);border-color:var(--sapButton_Reject_Selected_BorderColor);color:var(--sapButton_Reject_Selected_TextColor)}:host([design="Positive"][pressed]){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][active]:not([disabled])){background:var(--sapButton_Accept_Active_Background);border-color:var(--sapButton_Accept_Active_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed][active]:hover),:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Accept_Selected_Hover_Background);border-color:var(--sapButton_Accept_Selected_Hover_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Positive"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Accept_Selected_Background);border-color:var(--sapButton_Accept_Selected_BorderColor);color:var(--sapButton_Accept_Selected_TextColor)}:host([design="Attention"][pressed]){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][active]:not([disabled])){background:var(--sapButton_Attention_Active_Background);border-color:var(--sapButton_Attention_Active_BorderColor);color:var(--sapButton_Attention_Active_TextColor)}:host([design="Attention"][pressed][active]:hover),:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch]):hover){background:var(--sapButton_Attention_Selected_Hover_Background);border-color:var(--sapButton_Attention_Selected_Hover_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}:host([design="Attention"][pressed]:not([active]):not([non-interactive]):not([_is-touch])){background:var(--sapButton_Attention_Selected_Background);border-color:var(--sapButton_Attention_Selected_BorderColor);color:var(--sapButton_Attention_Selected_TextColor)}\n'}]})],UB),UB.define();const zB=()=>{const e=nM();return e&&"function"==typeof e.focus?e:null},HB=(e,t)=>{let i=e;if(i.shadowRoot&&(i=Array.from(i.shadowRoot.children).find((e=>"style"!==e.localName)),!i))return!1;if(i===t)return!0;const n="slot"===i.localName?i.assignedNodes():i.children;return!!n&&Array.from(n).some((e=>HB(e,t)))},GB=(e,t)=>{let i,n;if(e instanceof MouseEvent)i=e.clientX,n=e.clientY;else{const t=e.touches[0];i=t.clientX,n=t.clientY}return o=n,(r=i)>=(a=t).left&&r<=a.right&&o>=a.top&&o<=a.bottom;var r,o,a},VB=e=>{const t=e.parentElement||e.getRootNode&&e.getRootNode().host;return t&&("isUI5Element"in(i=t)&&"_show"in i||t===document.documentElement)?t:VB(t);var i},QB=(e,t,i)=>Math.min(Math.max(e,t),Math.max(t,i)),jB=e=>{const t=getComputedStyle(e);return["size","inline-size"].indexOf(t.containerType)>-1||["transform","perspective"].indexOf(t.willChange)>-1||["layout","paint","strict","content"].indexOf(t.contain)>-1||t.transform&&"none"!==t.transform||t.perspective&&"none"!==t.perspective||t.backdropFilter&&"none"!==t.backdropFilter},qB=typeof document>"u",WB=()=>qB||document.body.classList.contains("ui5-content-native-scrollbars")?"":"::-webkit-scrollbar:horizontal {\n\theight: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar:vertical {\n\twidth: var(--sapScrollBar_Dimension);\n}\n\n::-webkit-scrollbar {\n\tbackground-color: var(--sapScrollBar_TrackColor);\n\tborder-left: none;\n}\n\n::-webkit-scrollbar-thumb {\n\tborder-radius: var(--sapElement_BorderCornerRadius);\n\tbackground-color: var(--sapScrollBar_FaceColor);\n}\n\n::-webkit-scrollbar-thumb:hover {\n\tbackground-color: var(--sapScrollBar_Hover_FaceColor);\n}\n\n::-webkit-scrollbar-corner {\n\tbackground-color: var(--sapScrollBar_TrackColor);\n}",$B=e=>e.parentElement?e.parentNode:e.parentNode.host,XB={toAttribute:e=>e instanceof HTMLElement?null:e,fromAttribute:e=>e},YB=e=>"SLOT"!==e.nodeName&&(e.offsetWidth<=0&&e.offsetHeight<=0||e.style&&"hidden"===e.style.visibility),KB=/^(?:a|area)$/i,ZB=/^(?:input|select|textarea|button)$/i,JB=e=>{if(e.disabled)return!1;const t=e.getAttribute("tabindex");return null!=t?parseInt(t)>=0:ZB.test(e.nodeName)||KB.test(e.nodeName)&&!!e.href},eR=e=>e.hasAttribute("data-ui5-focus-trap"),tR=async(e,t)=>!e||YB(e)?null:nR(e,!0),iR=e=>e.hasAttribute("data-ui5-focus-redirect")||!YB(e),nR=async(e,t,i)=>{let n,r,o,a=-1;for(e.shadowRoot?n=t?e.shadowRoot.firstChild:e.shadowRoot.lastChild:e instanceof HTMLSlotElement&&e.assignedNodes()?(r=e.assignedNodes(),a=t?0:r.length-1,n=r[a]):n=t?e.firstElementChild:e.lastElementChild;n;){const e=n;if(wT(n)&&(n=await n.getFocusDomRefAsync()),!n)return null;if(1===n.nodeType&&iR(n)&&!eR(n)){if(JB(n))return n&&"function"==typeof n.focus?n:null;if(o=await nR(n,t),o)return o&&"function"==typeof o.focus?o:null}n=t?e.nextSibling:e.previousSibling,r&&!r[a].contains(n)&&(a=t?a+1:a-1,n=r[a])}return null};let rR;const oR=new Map,aR=()=>(rR||(rR=new window.ResizeObserver((e=>{window.requestAnimationFrame((()=>{e.forEach((e=>{const t=oR.get(e.target);t&&Promise.all(t.map((e=>e())))}))}))}))),rR);let sR=class{static register(e,t){let i=e;wT(i)&&(i=i.getDomRef()),i instanceof HTMLElement?((e,t)=>{const i=oR.get(e)||[];i.length||aR().observe(e),oR.set(e,[...i,t])})(i,t):console.warn("Cannot register ResizeHandler for element",e)}static deregister(e,t){let i=e;wT(i)&&(i=i.getDomRef()),i instanceof HTMLElement?((e,t)=>{const i=oR.get(e)||[];if(0===i.length)return;const n=i.filter((e=>e!==t));0===n.length?(aR().unobserve(e),oR.delete(e)):oR.set(e,n)})(i,t):console.warn("Cannot deregister ResizeHandler for element",e)}};const lR=new Map,cR=new Map;cR.set("S",[0,599]),cR.set("M",[600,1023]),cR.set("L",[1024,1439]),cR.set("XL",[1440,1/0]);var uR=(e=>(e.RANGE_4STEPS="4Step",e))(uR||{});const hR={RANGESETS:uR,initRangeSet:(e,t)=>{lR.set(e,t)},getCurrentRange:function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerWidth,n=lR.get(e);n||(n=lR.get("4Step"));const r=Math.floor(i);return n.forEach(((e,i)=>{r>=e[0]&&r<=e[1]&&(t=i)})),t||[...n.keys()][0]}};var dR;hR.initRangeSet(hR.RANGESETS.RANGE_4STEPS,cR),function(e){e.H1="H1",e.H2="H2",e.H3="H3",e.H4="H4",e.H5="H5",e.H6="H6"}(dR||(dR={}));const pR=dR;function fR(e,t,i){return vM`<h1 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h1>`}function mR(e,t,i){return vM`<h2 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h2>`}function gR(e,t,i){return vM`<h3 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h3>`}function _R(e,t,i){return vM`<h4 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h4>`}function vR(e,t,i){return vM`<h5 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h5>`}function yR(e,t,i){return vM`<h6 class="ui5-title-root"><span id="${_M(this._id)}-inner"><slot></slot></span></h6>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var AR=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let bR=class extends xT{constructor(){super(...arguments),this.wrappingType="Normal",this.level="H2",this.size="H5"}get h1(){return this.level===pR.H1}get h2(){return this.level===pR.H2}get h3(){return this.level===pR.H3}get h4(){return this.level===pR.H4}get h5(){return this.level===pR.H5}get h6(){return this.level===pR.H6}};AR([CT()],bR.prototype,"wrappingType",void 0),AR([CT()],bR.prototype,"level",void 0),AR([CT()],bR.prototype,"size",void 0),bR=AR([ST({tag:"ui5-title",renderer:AM,template:function(e,t,i){return vM`${this.h1?fR.call(this,e,t,i):void 0}${this.h2?mR.call(this,e,t,i):void 0}${this.h3?gR.call(this,e,t,i):void 0}${this.h4?_R.call(this,e,t,i):void 0}${this.h5?vR.call(this,e,t,i):void 0}${this.h6?yR.call(this,e,t,i):void 0}`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Title.css.ts",content:':host(:not([hidden])){display:block;cursor:text}:host{max-width:100%;color:var(--sapGroup_TitleTextColor);font-size:var(--sapFontHeader5Size);font-family:"72override",var(--sapFontHeaderFamily);text-shadow:var(--sapContent_TextShadow)}.ui5-title-root{display:inline-block;position:relative;font-weight:400;font-size:inherit;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;max-width:100%;vertical-align:bottom;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;margin:0;cursor:inherit}:host{white-space:pre-line}:host([wrapping-type="None"]){white-space:nowrap}.ui5-title-root,:host ::slotted(*){white-space:inherit}::slotted(*){font-size:inherit;font-family:inherit;text-shadow:inherit}:host([size="H1"]){font-size:var(--sapFontHeader1Size)}:host([size="H2"]){font-size:var(--sapFontHeader2Size)}:host([size="H3"]){font-size:var(--sapFontHeader3Size)}:host([size="H4"]){font-size:var(--sapFontHeader4Size)}:host([size="H5"]){font-size:var(--sapFontHeader5Size)}:host([size="H6"]){font-size:var(--sapFontHeader6Size)}\n'}})],bR),bR.define();const xR=bR;var wR;!function(e){e.None="None",e.Dialog="Dialog",e.AlertDialog="AlertDialog"}(wR||(wR={}));const SR=wR,CR=Gw("OpenedPopupsRegistry",{openedRegistry:[]}),ER=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];CR.openedRegistry.some((t=>t.instance===e))||CR.openedRegistry.push({instance:e,parentPopovers:t}),RR(),1===CR.openedRegistry.length&&IR()},TR=e=>{CR.openedRegistry=CR.openedRegistry.filter((t=>t.instance!==e)),RR(),CR.openedRegistry.length||BR()},MR=e=>{CR.openedRegistry.length&&jT(e)&&(e.stopPropagation(),CR.openedRegistry[CR.openedRegistry.length-1].instance.closePopup(!0))},IR=()=>{document.addEventListener("keydown",MR)},BR=()=>{document.removeEventListener("keydown",MR)},RR=()=>{let e,t=!1;for(let i=CR.openedRegistry.length-1;i>=0;i--)e=CR.openedRegistry[i].instance,!t&&e.isModal?(e.isTopModalPopup=!0,t=!0):e.isTopModalPopup=!1};hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var PR,kR=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};iC("data-ui5-popup-scroll-blocker")||tC({packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:".ui5-popup-scroll-blocker{overflow:hidden}\n"},"data-ui5-popup-scroll-blocker");const LR=new Set;let DR=PR=class extends xT{constructor(){super(),this.preventFocusRestore=!1,this.accessibleRole="Dialog",this.preventInitialFocus=!1,this.isTopModalPopup=!1,this.onPhone=!1,this.onDesktop=!1,this._opened=!1,this._open=!1,this._resizeHandler=this._resize.bind(this),this._getRealDomRef=()=>this.shadowRoot.querySelector("[root-element]")}onBeforeRendering(){this.onPhone=DC(),this.onDesktop=NC()}onAfterRendering(){KS().then((()=>{this._updateMediaRange()}))}onEnterDOM(){this.setAttribute("popover","manual"),sR.register(this,this._resizeHandler),NC()&&this.setAttribute("desktop",""),this.tabIndex=-1,this.open&&this.showPopover()}onExitDOM(){this._opened&&(PR.unblockPageScrolling(this),this._removeOpenedPopup()),sR.deregister(this,this._resizeHandler)}set open(e){this._open!==e&&(this._open=e,e?this.openPopup():this.closePopup())}get open(){return this._open}async openPopup(){this._opened||!this.fireDecoratorEvent("before-open",{})||this._opened||(this._opened=!0,this.isModal&&PR.blockPageScrolling(this),this._focusedElementBeforeOpen=zB(),this._show(),this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.open=!0,await this.applyInitialFocus(),await KS(),await this.applyInitialFocus(),this.isConnected&&this.fireDecoratorEvent("open",{}))}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(e){e.preventDefault()}static blockPageScrolling(e){LR.add(e),1===LR.size&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(e){LR.delete(e),0===LR.size&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(e){this.fireDecoratorEvent("scroll",{scrollTop:e.target.scrollTop,targetRef:e.target})}_onkeydown(e){const t=e.target===this._root&&WT(e),i=MT(e)&&!this.open;(t||i)&&e.preventDefault()}_onfocusout(e){e.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(e){this.shadowRoot.contains(e.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._shouldFocusRoot&&(TC.chrome&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const e=await tR(this);e?e.focus():this._root.focus()}async forwardToLast(){const e=await(async e=>!e||YB(e)?null:nR(e,!1))(this);e?e.focus():this._root.focus()}async applyInitialFocus(){this.preventInitialFocus||await this.applyFocus()}async applyFocus(){if(this.querySelector("[autofocus]"))return;if(await this._waitForDomRef(),this.getRootNode()===this)return;let e;this.initialFocus&&(e=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),e=e||await tR(this)||this._root,e&&(e===this._root&&(e.tabIndex=-1),e.focus())}isFocusWithin(){return(e=>{const t=zB();return!!t&&HB(e,t)})(this._root)}_updateMediaRange(){this.mediaRange=hR.getCurrentRange(hR.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_addOpenedPopup(){ER(this)}closePopup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._opened&&(!this.fireDecoratorEvent("before-close",{escPressed:e})||(this._opened=!1,this.isModal&&PR.unblockPageScrolling(this),this.hide(),this.open=!1,t||this._removeOpenedPopup(),this.preventFocusRestore||i||this.resetFocus(),this.fireDecoratorEvent("close",{})))}_removeOpenedPopup(){TR(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null)}_show(){this.isConnected&&(this.setAttribute("popover","manual"),this.showPopover())}hide(){this.isConnected&&this.hidePopover()}get _ariaLabel(){return QI(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===SR.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===SR.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{}}}get classes(){return{root:{"ui5-popup-root":!0},content:{"ui5-popup-content":!0}}}};kR([CT()],DR.prototype,"initialFocus",void 0),kR([CT({type:Boolean})],DR.prototype,"preventFocusRestore",void 0),kR([CT()],DR.prototype,"accessibleName",void 0),kR([CT()],DR.prototype,"accessibleNameRef",void 0),kR([CT()],DR.prototype,"accessibleRole",void 0),kR([CT()],DR.prototype,"mediaRange",void 0),kR([CT({type:Boolean})],DR.prototype,"preventInitialFocus",void 0),kR([CT({type:Boolean,noAttribute:!0})],DR.prototype,"isTopModalPopup",void 0),kR([TT({type:HTMLElement,default:!0})],DR.prototype,"content",void 0),kR([CT({type:Boolean})],DR.prototype,"onPhone",void 0),kR([CT({type:Boolean})],DR.prototype,"onDesktop",void 0),kR([CT({type:Boolean})],DR.prototype,"open",null),DR=PR=kR([ST({renderer:AM,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:":host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/PopupBlockLayer.css.ts",content:".ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}\n"}],template:function(e,t,i){return vM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${gM(this.styles.root)}" class="${mM(this.classes.root)}" role="${_M(this._role)}" aria-modal="${_M(this._ariaModal)}" aria-label="${_M(this._ariaLabel)}" aria-labelledby="${_M(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><div style="${gM(this.styles.content)}" class="${mM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`},dependencies:[xR]}),ET("before-open",{cancelable:!0}),ET("open"),ET("before-close",{detail:{escPressed:{type:Boolean}},cancelable:!0}),ET("close"),ET("scroll",{bubbles:!0})],DR);const NR=DR;var OR;!function(e){e.Start="Start",e.End="End",e.Top="Top",e.Bottom="Bottom"}(OR||(OR={}));const FR=OR;var UR;!function(e){e.Center="Center",e.Top="Top",e.Bottom="Bottom",e.Stretch="Stretch"}(UR||(UR={}));const zR=UR;var HR;!function(e){e.Center="Center",e.Start="Start",e.End="End",e.Stretch="Stretch"}(HR||(HR={}));const GR=HR;let VR;const QR=[],jR=()=>{QR.forEach((e=>{e.instance.reposition()}))},qR=e=>{const t=[...CR.openedRegistry];if(0!==t.length&&rP(t[t.length-1].instance))for(let i=t.length-1;-1!==i;i--){const n=t[i].instance;if(n.isModal||n.isOpenerClicked(e))return;if(GB(e,n.getBoundingClientRect()))break;n.closePopup()}},WR=()=>QR,$R=e=>{let t=e.parentNode;const i=[];for(;t&&t.parentNode;){for(let e=0;e<QR.length;e++)t===QR[e].instance&&i.push(t);t=t.parentNode}return i};function XR(e,t,i){return vM`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?YR.call(this,e,t,i):KR.call(this,e,t,i)}</header>`}function YR(e,t,i){return vM`<slot name="header"></slot>`}function KR(e,t,i){return i?vM`<${bM("ui5-title",t,i)} level="H1" class="ui5-popup-header-text">${_M(this.headerText)}</${bM("ui5-title",t,i)}>`:vM`<ui5-title level="H1" class="ui5-popup-header-text">${_M(this.headerText)}</ui5-title>`}function ZR(e,t,i){return vM`${this.footer.length?JR.call(this,e,t,i):void 0}`}function JR(e,t,i){return vM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));const eP={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:':host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-4-0_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v2-4-0_popup_header_shadow);border-bottom:var(--_ui5-v2-4-0_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v2-4-0_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{min-height:var(--_ui5-v2-4-0_popup_default_header_height);max-height:var(--_ui5-v2-4-0_popup_default_header_height);line-height:var(--_ui5-v2-4-0_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([no-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-4-0_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-4-0_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-4-0_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-4-0_popup_header_footer_padding_xl)}\n'};hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var tP,iP=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let nP=tP=class extends NR{static get VIEWPORT_MARGIN(){return 10}constructor(){super(),this.placement="End",this.horizontalAlign="Center",this.verticalAlign="Center",this.modal=!1,this.hideArrow=!1,this.allowTargetOverlap=!1,this.disableScrolling=!1,this.arrowTranslateX=0,this.arrowTranslateY=0,this.actualPlacement="End"}set opener(e){this._opener!==e&&(this._opener=e,e&&this.open&&this.openPopup())}get opener(){return this._opener}async openPopup(){if(this._opened)return;const e=this.getOpenerHTMLElement(this.opener);if(e){if(this.isOpenerOutsideViewport(e.getBoundingClientRect()))return await KS(),this.open=!1,void this.fireDecoratorEvent("close");this._openerRect=e.getBoundingClientRect(),await super.openPopup()}else console.warn("Valid opener id is required. It must be defined before opening the popover.")}isOpenerClicked(e){const t=e.target;if(t===this._opener)return!0;const i=t;return!(!i.getFocusDomRef||i.getFocusDomRef()!==this._opener)||e.composedPath().indexOf(this._opener)>-1}_addOpenedPopup(){(e=>{const t=$R(e);var i;ER(e,t),QR.push({instance:e,parentPopovers:t}),(i=e)&&i.shadowRoot.addEventListener("scroll",jR,{capture:!0}),1===QR.length&&(document.addEventListener("scroll",jR,{capture:!0}),document.addEventListener("mousedown",qR),VR=setInterval((()=>{jR(),"IFRAME"===nM().tagName&&WR().reverse().forEach((e=>e.instance.closePopup(!1,!1,!0)))}),300))})(this)}_removeOpenedPopup(){(e=>{const t=[e];for(let n=0;n<QR.length;n++){const i=QR[n].parentPopovers.indexOf(e);QR[n].parentPopovers.length>0&&i>-1&&t.push(QR[n].instance)}for(let n=t.length-1;n>=0;n--)for(let e=0;e<QR.length;e++){let r=-1;t[n]===QR[e].instance&&(r=e),r>=0&&(TR(QR[r].instance),(i=QR[r].instance)&&i.shadowRoot.removeEventListener("scroll",jR,{capture:!0}),QR.splice(r,1)[0].instance.closePopup(!1,!0))}var i;QR.length||(document.removeEventListener("scroll",jR,{capture:!0}),document.removeEventListener("mousedown",qR),clearInterval(VR))})(this)}getOpenerHTMLElement(e){if(void 0===e||e instanceof HTMLElement)return e;const t=this.getRootNode();return t instanceof Document?t.getElementById(e):document.getElementById(e)}shouldCloseDueToOverflow(e,t){const i={Start:t.right,End:t.left,Top:t.top,Bottom:t.bottom},n=this.getOpenerHTMLElement(this.opener),r=VB(n);let o=!1,a=!1;if(r instanceof tP){const e=r.contentDOM.getBoundingClientRect();o=t.top>e.top+e.height,a=t.top+t.height<e.top}return i[e]<0||i[e]+32>r.innerHeight||o||a}shouldCloseDueToNoOpener(e){return 0===e.top&&0===e.bottom&&0===e.left&&0===e.right}isOpenerOutsideViewport(e){return e.bottom<0||e.top>window.innerHeight||e.right<0||e.left>window.innerWidth}_resize(){super._resize(),this.open&&this.reposition()}reposition(){this._show()}async _show(){super._show();const e=this.getOpenerHTMLElement(this.opener);if(e&&this._isUI5Element(e)&&!e.getDomRef())return;this._opened||this._showOutsideViewport();const t=this.getPopoverSize();let i;if(0===t.width||0===t.height)return;if(this.open&&(this._openerRect=e.getBoundingClientRect()),i=this._oldPlacement&&this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?this._oldPlacement:this.calcPlacement(this._openerRect,t),this._preventRepositionAndClose||this.isOpenerOutsideViewport(this._openerRect))return await this._waitForDomRef(),this.closePopup();this._oldPlacement=i,this.actualPlacement=i.placement;let n=QB(this._left,tP.VIEWPORT_MARGIN,document.documentElement.clientWidth-t.width-tP.VIEWPORT_MARGIN);this.actualPlacement===FR.End&&(n=Math.max(n,this._left));let r=QB(this._top,tP.VIEWPORT_MARGIN,document.documentElement.clientHeight-t.height-tP.VIEWPORT_MARGIN);this.actualPlacement===FR.Bottom&&(r=Math.max(r,this._top)),this.arrowTranslateX=i.arrow.x,this.arrowTranslateY=i.arrow.y,r=this._adjustForIOSKeyboard(r),Object.assign(this.style,{top:`${r}px`,left:`${n}px`}),this.horizontalAlign===GR.Stretch&&this._width&&(this.style.width=this._width),this.verticalAlign===zR.Stretch&&this._height&&(this.style.height=this._height)}_adjustForIOSKeyboard(e){if(!OC())return e;const t=Math.ceil(this.getBoundingClientRect().top);return e+(Number.parseInt(this.style.top||"0")-t)}_getContainingBlockClientLocation(){let e=$B(this);for(;e;){if(jB(e))return e.getBoundingClientRect();e=$B(e)}return{left:0,top:0}}getPopoverSize(){const e=this.getBoundingClientRect();return{width:e.width,height:e.height}}_showOutsideViewport(){Object.assign(this.style,{top:"-10000px",left:"-10000px"})}_isUI5Element(e){return"isUI5Element"in e}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(e,t){let i=tP.VIEWPORT_MARGIN,n=0;const r=this.allowTargetOverlap,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight;let s=a,l=o;const c=this.getActualPlacement(e,t);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(e)||this.shouldCloseDueToOverflow(c,e);const u=c===FR.Top||c===FR.Bottom;this.horizontalAlign===GR.Stretch&&u?(t.width=e.width,this._width=`${e.width}px`):this.verticalAlign!==zR.Stretch||u||(t.height=e.height,this._height=`${e.height}px`);const h=this.hideArrow?0:8;switch(c){case FR.Top:i=this.getVerticalLeft(e,t),n=Math.max(e.top-t.height-h,0),r||(s=e.top-h);break;case FR.Bottom:i=this.getVerticalLeft(e,t),n=e.bottom+h,r?n=Math.max(Math.min(n,a-t.height),0):s=a-e.bottom-h;break;case FR.Start:i=Math.max(e.left-t.width-h,0),n=this.getHorizontalTop(e,t),r||(l=e.left-h);break;case FR.End:i=e.left+e.width+h,n=this.getHorizontalTop(e,t),r?i=Math.max(Math.min(i,o-t.width),0):l=o-e.right-h}u?t.width>o||i<tP.VIEWPORT_MARGIN?i=tP.VIEWPORT_MARGIN:i+t.width>o-tP.VIEWPORT_MARGIN&&(i=o-tP.VIEWPORT_MARGIN-t.width):t.height>a||n<tP.VIEWPORT_MARGIN?n=tP.VIEWPORT_MARGIN:n+t.height>a-tP.VIEWPORT_MARGIN&&(n=a-tP.VIEWPORT_MARGIN-t.height),this._maxHeight=Math.round(s-tP.VIEWPORT_MARGIN),this._maxWidth=Math.round(l-tP.VIEWPORT_MARGIN),(void 0===this._left||Math.abs(this._left-i)>1.5)&&(this._left=Math.round(i)),(void 0===this._top||Math.abs(this._top-n)>1.5)&&(this._top=Math.round(n));const d=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius"));return{arrow:this.getArrowPosition(e,t,i,n,u,d),top:this._top,left:this._left,placement:c}}getArrowPosition(e,t,i,n,r,o){const a=this._actualHorizontalAlign;let s=a===GR.Center||a===GR.Stretch;a===GR.End&&i<=e.left&&(s=!0),a===GR.Start&&i+t.width>=e.left+e.width&&(s=!0);let l=0;r&&s&&(l=e.left+e.width/2-i-t.width/2);let c=0;r||(c=e.top+e.height/2-n-t.height/2);const u=t.height/2-o-4;c=QB(c,-u,u);const h=t.width/2-o-4;return l=QB(l,-h,h),{x:Math.round(l),y:Math.round(c)}}fallbackPlacement(e,t,i,n){return i.left>n.width?FR.Start:e-i.right>i.left?FR.End:t-i.bottom>n.height?FR.Bottom:t-i.bottom<i.top?FR.Top:void 0}getActualPlacement(e,t){const i=this.placement;let n=i;const r=document.documentElement.clientWidth,o=document.documentElement.clientHeight;switch(i){case FR.Top:e.top<t.height&&e.top<o-e.bottom&&(n=FR.Bottom);break;case FR.Bottom:o-e.bottom<t.height&&o-e.bottom<e.top&&(n=FR.Top);break;case FR.Start:e.left<t.width&&(n=this.fallbackPlacement(r,o,e,t)||i);break;case FR.End:r-e.right<t.width&&(n=this.fallbackPlacement(r,o,e,t)||i)}return n}getVerticalLeft(e,t){const i=this._actualHorizontalAlign;let n=tP.VIEWPORT_MARGIN;switch(i){case GR.Center:case GR.Stretch:n=e.left-(t.width-e.width)/2;break;case GR.Start:n=e.left;break;case GR.End:n=e.right-t.width}return n}getHorizontalTop(e,t){let i=0;switch(this.verticalAlign){case zR.Center:case zR.Stretch:i=e.top-(t.height-e.height)/2;break;case zR.Top:i=e.top;break;case zR.Bottom:i=e.bottom-t.height}return i}get isModal(){return this.modal}get _ariaLabelledBy(){if(!this._ariaLabel&&this._displayHeader)return"ui5-popup-header"}get styles(){return{...super.styles,root:{"max-height":this._maxHeight?`${this._maxHeight}px`:"","max-width":this._maxWidth?`${this._maxWidth}px`:""},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}}}get classes(){const e=super.classes;return e.root["ui5-popover-root"]=!0,e}get _displayHeader(){return!(!this.header.length&&!this.headerText)}get _displayFooter(){return!0}get _actualHorizontalAlign(){if("rtl"===this.effectiveDir){if(this.horizontalAlign===GR.Start)return GR.End;if(this.horizontalAlign===GR.End)return GR.Start}return this.horizontalAlign}};iP([CT()],nP.prototype,"headerText",void 0),iP([CT()],nP.prototype,"placement",void 0),iP([CT()],nP.prototype,"horizontalAlign",void 0),iP([CT()],nP.prototype,"verticalAlign",void 0),iP([CT({type:Boolean})],nP.prototype,"modal",void 0),iP([CT({type:Boolean})],nP.prototype,"hideArrow",void 0),iP([CT({type:Boolean})],nP.prototype,"allowTargetOverlap",void 0),iP([CT({type:Boolean})],nP.prototype,"disableScrolling",void 0),iP([CT({type:Number,noAttribute:!0})],nP.prototype,"arrowTranslateX",void 0),iP([CT({type:Number,noAttribute:!0})],nP.prototype,"arrowTranslateY",void 0),iP([CT()],nP.prototype,"actualPlacement",void 0),iP([CT({type:Number,noAttribute:!0})],nP.prototype,"_maxHeight",void 0),iP([CT({type:Number,noAttribute:!0})],nP.prototype,"_maxWidth",void 0),iP([TT({type:HTMLElement})],nP.prototype,"header",void 0),iP([TT({type:HTMLElement})],nP.prototype,"footer",void 0),iP([CT({converter:XB})],nP.prototype,"opener",null),nP=tP=iP([ST({tag:"ui5-popover",styles:[NR.styles,eP,{packageName:"@ui5/webcomponents",fileName:"themes/Popover.css.ts",content:':host{box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);background-color:var(--_ui5-v2-4-0_popover_background);max-width:calc(100vw - (100vw - 100%) - 2 * var(--_ui5-v2-4-0_popup_viewport_margin))}:host([hide-arrow]){box-shadow:var(--_ui5-v2-4-0_popover_no_arrow_box_shadow)}:host([opened][actual-placement="Top"]){margin-top:var(--_ui5-v2-4-0-popover-margin-bottom)}:host([opened][actual-placement="Bottom"]){margin-top:var(--_ui5-v2-4-0-popover-margin-top)}:host([actual-placement="Bottom"]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5rem}:host([actual-placement="Bottom"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_upward_arrow_margin)}:host([actual-placement="Start"]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement="Start"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_right_arrow_margin)}:host([actual-placement="Top"]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement="Top"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_downward_arrow_margin)}:host(:not([actual-placement])) .ui5-popover-arrow,:host([actual-placement="End"]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement])) .ui5-popover-arrow:after,:host([actual-placement="End"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-4-0_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--_ui5-v2-4-0_popover_background);box-shadow:var(--_ui5-v2-4-0_popover_box_shadow);transform:rotate(-45deg)}:host([modal])::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}:host([modal]) .ui5-block-layer{display:block}\n'},WB()],template:function(e,t,i){return vM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${gM(this.styles.root)}" class="${mM(this.classes.root)}" role="${_M(this._role)}" aria-modal="${_M(this._ariaModal)}" aria-label="${_M(this._ariaLabel)}" aria-labelledby="${_M(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${gM(this.styles.arrow)}"></span>${this._displayHeader?XR.call(this,e,t,i):void 0}<div style="${gM(this.styles.content)}" class="${mM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?ZR.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `}})],nP);const rP=e=>"opener"in e;nP.define();const oP=nP;var aP=Object.defineProperty,sP=Object.getOwnPropertyDescriptor,lP=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?sP(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&aP(t,i,o),o};let cP=class extends Ce{constructor(){super(...arguments),this.isColumnMode=!1}render(){return ie`
      <div
        id="toolBar"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div
          id="btnBar"
          class="${this.isColumnMode?"hor-orientation":"ver-orientation"}"
        >
          <slot @slotchange=${this._handleSlotChange}></slot>
        </pv-tool-area>
      </div>
    `}_handleSlotChange(e){console.log("Slot changed",e)}};cP.styles=x`
    :host {
      max-height: 100%;
      max-width: 100%;
      --size: 13.5rem;
    }

    #btnBar.hor-orientation{
      width: 100%;
      flex-direction: row;
    }

    #btnBar.ver-orientation{
      height: 100%;
      flex-direction: column;
    }

    #btnBar
    {
      display: flex;
      gap: 0.25rem;
      pointer-events: auto;
    }

    #toolBar.hor-orientation{
      width: calc(100% - 1rem);
      height: var(--size);
      flex-direction: row;
    }

    #toolBar.ver-orientation{
      height: calc(100% - 1rem);
      width: var(--size);
      flex-direction: column;
    }

    #toolBar {
      display: flex;
      gap: 0.5625rem;
      left: 0.5rem;
      top: 0.5rem;
      position: absolute;
      pointer-events: none;
    }

    #toolBar.hor-orientation pv-tool-area{
      height: 100%;
    }

    #toolBar.ver-orientation pv-tool-area{
      width: 100%;
    }

    ui5-toggle-button{
      height: 2.5rem;
      width: 2.5rem;
    }

    ui5-toggle-button ui5-icon{
      height: 85%;
      width: 85%;
    }

    ui5-icon {
      stroke:black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%)
    }
  `,lP([Ie({type:Boolean})],cP.prototype,"isColumnMode",2),cP=lP([Te("pv-menu")],cP);var uP=Object.defineProperty,hP=Object.getOwnPropertyDescriptor,dP=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?hP(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&uP(t,i,o),o};let pP=class extends Ce{constructor(){super(...arguments),this.title="",this.icon="",this.idx=0}render(){return ie`
      <ui5-button
        data-index=${this.idx}
        tooltip=${this.title}
        id="tool-button"
        @click="${this._togglePopover}"
        icon=${this.icon}
      >
      </ui5-button>
      <ui5-popover id="tool-popover" header-text="${this.title}">
        <slot></slot>
      </ui5-popover>
    `}_togglePopover(){null!==this.toolPopover?(void 0===this.toolPopover.opener&&(this.toolPopover.opener=this.toolButton),this.toolPopover.open=!this.toolPopover.open):console.warn("Popover not found.")}updated(e){super.updated(e)}};pP.styles=x`
    :host {
      max-height: 100%;
      max-width: 100%;
    }
  `,dP([Ie()],pP.prototype,"title",2),dP([Ie()],pP.prototype,"icon",2),dP([Ie()],pP.prototype,"idx",2),dP([Be("#tool-popover")],pP.prototype,"toolPopover",2),dP([Be("#tool-button")],pP.prototype,"toolButton",2),pP=dP([Te("pv-menu-item")],pP),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var fP,mP=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let gP=fP=class extends xT{constructor(){super(...arguments),this.showColon=!1,this.required=!1,this.wrappingType="Normal"}_onclick(){if(!this.for)return;const e=this.getRootNode().querySelector(`[id="${this.for}"]`);e&&e.focus()}get _colonSymbol(){return fP.i18nBundle.getText(DI)}};mP([CT()],gP.prototype,"for",void 0),mP([CT({type:Boolean})],gP.prototype,"showColon",void 0),mP([CT({type:Boolean})],gP.prototype,"required",void 0),mP([CT()],gP.prototype,"wrappingType",void 0),mP([xM("@ui5/webcomponents")],gP,"i18nBundle",void 0),gP=fP=mP([ST({tag:"ui5-label",renderer:AM,template:function(e,t,i){return vM`<label class="ui5-label-root" @click=${this._onclick}><span class="ui5-label-text-wrapper"><slot></slot></span><span aria-hidden="true" class="ui5-label-required-colon" data-colon="${_M(this._colonSymbol)}"></span></label>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Label.css.ts",content:':host(:not([hidden])){display:inline-flex}:host{max-width:100%;color:var(--sapContent_LabelColor);font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSize);font-weight:400;cursor:text}.ui5-label-root{width:100%;cursor:inherit}:host{white-space:normal}:host([wrapping-type="None"]){white-space:nowrap}:host([wrapping-type="None"]) .ui5-label-root{display:inline-flex}:host([wrapping-type="None"]) .ui5-label-text-wrapper{text-overflow:ellipsis;overflow:hidden;display:inline-block;vertical-align:top;flex:0 1 auto;min-width:0}:host([show-colon]) .ui5-label-required-colon:before{content:attr(data-colon)}:host([required]) .ui5-label-required-colon:after{content:"*";color:var(--sapField_RequiredColor);font-size:1.25rem;font-weight:700;position:relative;font-style:normal;vertical-align:middle;line-height:0}.ui5-label-text-wrapper{padding-inline-end:.075rem}:host([required][show-colon]) .ui5-label-required-colon:after{margin-inline-start:.125rem}:host([show-colon]) .ui5-label-required-colon{margin-inline-start:-.05rem;white-space:pre}\n'},languageAware:!0})],gP),gP.define();const _P=gP;var vP=(e=>(e.None="None",e.Positive="Positive",e.Critical="Critical",e.Negative="Negative",e.Information="Information",e))(vP||{});function yP(e,t,i){return i?vM`<div class="ui5-checkbox-display-only-icon-inner"><${bM("ui5-icon",t,i)} aria-hidden="true" name=${_M(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></${bM("ui5-icon",t,i)}></div>`:vM`<div class="ui5-checkbox-display-only-icon-inner"><ui5-icon aria-hidden="true" name=${_M(this.displayOnlyIcon)} class="ui5-checkbox-display-only-icon" part="icon"></ui5-icon></div>`}function AP(e,t,i){return vM`<div id="${_M(this._id)}-CbBg" class="ui5-checkbox-inner">${this.isCompletelyChecked?bP.call(this,e,t,i):void 0}</div>`}function bP(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon aria-hidden="true" name="accept" class="ui5-checkbox-icon" part="icon"></ui5-icon>`}function xP(e,t,i){return i?vM`<${bM("ui5-label",t,i)} part="label" id="${_M(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${_M(this.wrappingType)}">${_M(this.text)}</${bM("ui5-label",t,i)}>`:vM`<ui5-label part="label" id="${_M(this._id)}-label" class="ui5-checkbox-label" wrapping-type="${_M(this.wrappingType)}">${_M(this.text)}</ui5-label>`}function wP(e,t,i){return vM`<span id="${_M(this._id)}-descr" class="ui5-hidden-text">${_M(this.valueStateText)}</span>`}ME("accept",{pathData:"M456 94q5 5 5 11 0 4-2 8L237 439q-4 8-8.5 8.5t-5.5.5q-7 0-12-5L60 276q-5-5-5-10l.5-3.5L61 254l25-25q6-6 12-6t11 6l96 96q5 5 12 5l4.5-.5 8.5-8.5L405 72q4-7 8.5-7.5t5.5-.5q6 0 11 4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("accept",{pathData:"M187 416q-12 0-20-9L71 299q-7-7-7-17 0-11 7.5-18.5T90 256q12 0 19 9l77 87 217-247q8-9 19-9t18.5 7.5T448 122q0 10-6 16L206 407q-7 9-19 9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("complete",{pathData:"M492 25q4 4 4 9 0 3-2 7L309 313q-3 6-7 6.5t-5 .5q-6 0-10-4L162 177q-4-5-4-9 0-5 4-9l21-21q5-5 10-5t9 5l80 80q4 4 9 4 1 0 5-.5t7-7.5L449 7q3-6 7-6.5t5-.5q5 0 9 4zm-60 295h32v128q0 14-9.5 23t-22.5 9H48q-14 0-23-9t-9-23V64q0-13 9-22.5T48 32h128v32H48v384h384V320z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("complete",{pathData:"M438 224q11 0 18.5 7.5T464 250v140q0 38-26 64t-64 26H106q-38 0-64-26t-26-64V122q0-38 26-64t64-26h237q11 0 18 7.5t7 18.5-7 18-18 7H106q-16 0-27.5 11.5T67 122v268q0 16 11.5 27.5T106 429h268q16 0 27.5-11.5T413 390V250q0-11 7-18.5t18-7.5zm32-192q11 0 18.5 7.5T496 58t-7 17L257 312q-6 8-18 8-10 0-18-8l-70-71q-7-7-7-18t7.5-18 18.5-7 18 7l51 53L452 40q8-8 18-8z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("border",{pathData:"M448 32q13 0 22.5 9t9.5 23v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-14 9-23t23-9h384zm0 32H64v384h384V64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("border",{pathData:"M390 480H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268q38 0 64 26t26 64v268q0 38-26 64t-64 26zM122 83q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122q0-17-11-28t-28-11H122z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("tri-state",{pathData:"M448 32q13 0 22.5 9.5T480 64v384q0 14-9.5 23t-22.5 9H64q-14 0-23-9t-9-23V64q0-13 9-22.5T64 32h384zm0 32H64v384h384V64zM160 345V169q0-8 8-8h176q8 0 8 8v176q0 8-8 8H168q-8 0-8-8z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("tri-state",{pathData:"M390 32q38 0 64 26t26 64v268q0 38-26 64t-64 26H122q-38 0-64-26t-26-64V122q0-38 26-64t64-26h268zm39 90q0-17-11-28t-28-11H122q-17 0-28 11t-11 28v268q0 17 11 28t28 11h268q17 0 28-11t11-28V122zm-77 38v192H160V160h192z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var SP,CP=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let EP,TP=!1,MP=SP=class extends xT{get formValidityMessage(){return SP.i18nBundle.getText(NI)}get formValidity(){return{valueMissing:this.required&&!this.checked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.displayOnly=!1,this.required=!1,this.indeterminate=!1,this.checked=!1,this.valueState="None",this.wrappingType="Normal",this.active=!1,this._deactivate=()=>{EP&&(EP.active=!1)},TP||(document.addEventListener("mouseup",this._deactivate),TP=!0)}onEnterDOM(){NC()&&this.setAttribute("desktop","")}_onclick(){this.toggle()}_onmousedown(){this.readonly||this.disabled||(this.active=!0,EP=this)}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}_onkeydown(e){IT(e)&&e.preventDefault(),this.readonly||this.disabled||(MT(e)&&this.toggle(),this.active=!0)}_onkeyup(e){IT(e)&&this.toggle(),this.active=!1}toggle(){if(this.canToggle()){const e={checked:this.checked,indeterminate:this.indeterminate};this.indeterminate?(this.indeterminate=!1,this.checked=!0):this.checked=!this.checked;const t=!this.fireDecoratorEvent("change"),i=!this.fireDecoratorEvent("value-changed");(t||i)&&(this.checked=e.checked,this.indeterminate=e.indeterminate)}return this}canToggle(){return!(this.disabled||this.readonly||this.displayOnly)}valueStateTextMappings(){return{Negative:SP.i18nBundle.getText(wI),Critical:SP.i18nBundle.getText(SI),Positive:SP.i18nBundle.getText(EI)}}get ariaLabelText(){return QI(this)}get classes(){return{main:{"ui5-checkbox--hoverable":!this.disabled&&!this.readonly&&NC()}}}get ariaReadonly(){return this.readonly||this.displayOnly?"true":void 0}get effectiveAriaDisabled(){return this.disabled?"true":void 0}get effectiveAriaChecked(){return this.indeterminate&&this.checked?"mixed":this.checked}get ariaLabelledBy(){if(!this.ariaLabelText)return this.text?`${this._id}-label`:void 0}get ariaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==vP.None}get valueStateText(){if(this.valueState!==vP.None&&this.valueState!==vP.Information)return this.valueStateTextMappings()[this.valueState]}get effectiveTabIndex(){const e=this.getAttribute("tabindex");return this.disabled||this.displayOnly?void 0:e||"0"}get isCompletelyChecked(){return this.checked&&!this.indeterminate}get isDisplayOnly(){return this.displayOnly&&!this.disabled}get displayOnlyIcon(){return this.isCompletelyChecked?"complete":this.checked&&this.indeterminate?"tri-state":"border"}};CP([CT()],MP.prototype,"accessibleNameRef",void 0),CP([CT()],MP.prototype,"accessibleName",void 0),CP([CT({type:Boolean})],MP.prototype,"disabled",void 0),CP([CT({type:Boolean})],MP.prototype,"readonly",void 0),CP([CT({type:Boolean})],MP.prototype,"displayOnly",void 0),CP([CT({type:Boolean})],MP.prototype,"required",void 0),CP([CT({type:Boolean})],MP.prototype,"indeterminate",void 0),CP([CT({type:Boolean})],MP.prototype,"checked",void 0),CP([CT()],MP.prototype,"text",void 0),CP([CT()],MP.prototype,"valueState",void 0),CP([CT()],MP.prototype,"wrappingType",void 0),CP([CT()],MP.prototype,"name",void 0),CP([CT({type:Boolean})],MP.prototype,"active",void 0),CP([xM("@ui5/webcomponents")],MP,"i18nBundle",void 0),MP=SP=CP([ST({tag:"ui5-checkbox",languageAware:!0,formAssociated:!0,renderer:AM,template:function(e,t,i){return vM`<div class="ui5-checkbox-root ${mM(this.classes.main)}" role="checkbox" part="root" aria-checked="${_M(this.effectiveAriaChecked)}" aria-readonly="${_M(this.ariaReadonly)}" aria-disabled="${_M(this.effectiveAriaDisabled)}" aria-label="${_M(this.ariaLabelText)}" aria-labelledby="${_M(this.ariaLabelledBy)}" aria-describedby="${_M(this.ariaDescribedBy)}" aria-required="${_M(this.required)}" tabindex="${_M(this.effectiveTabIndex)}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click="${this._onclick}" @focusout="${this._onfocusout}">${this.isDisplayOnly?yP.call(this,e,t,i):AP.call(this,e,t,i)}<input id="${_M(this._id)}-CB" type='checkbox' ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.disabled}" tabindex="-1" aria-hidden="true" data-sap-no-tab-ref />${this.text?xP.call(this,e,t,i):void 0}${this.hasValueState?wP.call(this,e,t,i):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/CheckBox.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{-webkit-tap-highlight-color:rgba(0,0,0,0)}:host(:not([hidden])){display:inline-block}:host{overflow:hidden;max-width:100%;outline:none;border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);transition:var(--_ui5-v2-4-0_checkbox_transition);cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host([disabled]){cursor:default}:host([disabled]) .ui5-checkbox-root{opacity:var(--_ui5-v2-4-0_checkbox_disabled_opacity)}:host([disabled]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_disabled_border_color)}:host([disabled]) .ui5-checkbox-label{color:var(--_ui5-v2-4-0_checkbox_disabled_label_color)}:host([readonly]:not([value-state="Critical"]):not([value-state="Negative"])) .ui5-checkbox-inner{background:var(--sapField_ReadOnly_Background);border:var(--_ui5-v2-4-0_checkbox_inner_readonly_border);color:var(--sapField_TextColor)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root{min-height:auto;box-sizing:border-box;align-items:flex-start;padding-top:var(--_ui5-v2-4-0_checkbox_root_side_padding);padding-bottom:var(--_ui5-v2-4-0_checkbox_root_side_padding)}:host(:not([wrapping-type="None"])[text]) .ui5-checkbox-root .ui5-checkbox-label{overflow-wrap:break-word;align-self:center}:host([desktop][text]:not([wrapping-type="None"])) .ui5-checkbox-root:focus:before,.ui5-checkbox-root[text]:focus-visible:before{inset-block:var(--_ui5-v2-4-0_checkbox_wrapped_focus_inset_block)}:host([value-state="Negative"]) .ui5-checkbox-inner,:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InvalidBackground);border:var(--_ui5-v2-4-0_checkbox_inner_error_border);color:var(--sapField_InvalidColor)}:host([value-state="Negative"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_error_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-inner,:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_WarningBackground);border:var(--_ui5-v2-4-0_checkbox_inner_warning_border);color:var(--_ui5-v2-4-0_checkbox_inner_warning_color)}:host([value-state="Critical"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_warning_background_hover)}:host([value-state="Information"]) .ui5-checkbox-inner,:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_InformationBackground);border:var(--_ui5-v2-4-0_checkbox_inner_information_border);color:var(--_ui5-v2-4-0_checkbox_inner_information_color)}:host([value-state="Information"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_information_background_hover)}:host([value-state="Positive"]) .ui5-checkbox-inner,:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--sapField_SuccessBackground);border:var(--_ui5-v2-4-0_checkbox_inner_success_border);color:var(--sapField_SuccessColor)}:host([value-state="Positive"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_inner_success_background_hover)}:host([value-state="Critical"]) .ui5-checkbox-icon,:host([value-state="Critical"][indeterminate]) .ui5-checkbox-inner:after{color:var(--_ui5-v2-4-0_checkbox_checkmark_warning_color)}.ui5-checkbox-root{position:relative;display:inline-flex;align-items:center;width:100%;min-height:var(--_ui5-v2-4-0_checkbox_width_height);min-width:var(--_ui5-v2-4-0_checkbox_width_height);padding:0 var(--_ui5-v2-4-0_checkbox_wrapper_padding);outline:none;transition:var(--_ui5-v2-4-0_checkbox_transition);border:var(--_ui5-v2-4-0_checkbox_default_focus_border);border-radius:var(--_ui5-v2-4-0_checkbox_border_radius);box-sizing:border-box}:host([desktop]) .ui5-checkbox-root:focus:before,.ui5-checkbox-root:focus-visible:before{display:var(--_ui5-v2-4-0_checkbox_focus_outline_display);content:"";position:absolute;inset-inline:var(--_ui5-v2-4-0_checkbox_focus_position);inset-block:var(--_ui5-v2-4-0_checkbox_focus_position);border:var(--_ui5-v2-4-0_checkbox_focus_outline);border-radius:var(--_ui5-v2-4-0_checkbox_focus_border_radius)}:host([text]) .ui5-checkbox-root{padding-inline-end:var(--_ui5-v2-4-0_checkbox_right_focus_distance)}:host([text]) .ui5-checkbox-root:focus:before,:host([text]) .ui5-checkbox-root:focus-visible:before{inset-inline-end:0}:host(:hover:not([disabled])){background:var(--_ui5-v2-4-0_checkbox_outer_hover_background)}.ui5-checkbox--hoverable .ui5-checkbox-label:hover{color:var(--_ui5-v2-4-0_checkbox_label_color)}:host(:not([active]):not([checked]):not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active]):not([checked])[value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_border_color)}:host(:not([active])[checked]:not([value-state])) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner,:host(:not([active])[checked][value-state="None"]) .ui5-checkbox--hoverable:hover .ui5-checkbox-inner{background:var(--_ui5-v2-4-0_checkbox_hover_background);border-color:var(--_ui5-v2-4-0_checkbox_inner_hover_checked_border_color)}:host([checked]:not([value-state])) .ui5-checkbox-inner,:host([checked][value-state="None"]) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color)}:host([active]:not([checked]):not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active]:not([checked])[value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_active_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}:host([active][checked]:not([value-state]):not([disabled])) .ui5-checkbox-inner,:host([active][checked][value-state="None"]:not([disabled])) .ui5-checkbox-inner{border-color:var(--_ui5-v2-4-0_checkbox_inner_selected_border_color);background-color:var(--_ui5-v2-4-0_checkbox_active_background)}.ui5-checkbox-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);border:var(--_ui5-v2-4-0_checkbox_inner_border);border-radius:var(--_ui5-v2-4-0_checkbox_inner_border_radius);background:var(--_ui5-v2-4-0_checkbox_inner_background);color:var(--_ui5-v2-4-0_checkbox_checkmark_color);box-sizing:border-box;position:relative;cursor:inherit}:host([indeterminate][checked]) .ui5-checkbox-inner:after{content:"";background-color:currentColor;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:var(--_ui5-v2-4-0_checkbox_partially_icon_size);height:var(--_ui5-v2-4-0_checkbox_partially_icon_size)}:host input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit}.ui5-checkbox-root .ui5-checkbox-label{margin-inline-start:var(--_ui5-v2-4-0_checkbox_label_offset);cursor:inherit;text-overflow:ellipsis;overflow:hidden;pointer-events:none;color:var(--_ui5-v2-4-0_checkbox_label_color)}.ui5-checkbox-icon{width:var(--_ui5-v2-4-0_checkbox_icon_size);height:var(--_ui5-v2-4-0_checkbox_icon_size);color:currentColor;cursor:inherit;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}:host([display-only]){cursor:default}:host([display-only]) .ui5-checkbox-display-only-icon-inner [ui5-icon]{color:var(--sapTextColor)}:host([display-only]) .ui5-checkbox-display-only-icon-inner{min-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-width:var(--_ui5-v2-4-0_checkbox_inner_width_height);height:var(--_ui5-v2-4-0_checkbox_inner_width_height);max-height:var(--_ui5-v2-4-0_checkbox_inner_width_height);display:flex;align-items:center;justify-content:center}\n'},dependencies:[_P,cB]}),ET("change",{bubbles:!0,cancelable:!0}),ET("value-changed",{bubbles:!0,cancelable:!0})],MP),MP.define();const IP=MP;function BP(e,t,i){return i?vM`<div class="ui5-cp-default-color-button-wrapper"><${bM("ui5-button",t,i)} class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${_M(this.colorPaletteDefaultColorText)}</${bM("ui5-button",t,i)}><div class="ui5-cp-separator"></div></div>`:vM`<div class="ui5-cp-default-color-button-wrapper"><ui5-button class="ui5-cp-default-color-button" design="Transparent" @click=${this._onDefaultColorClick} @keydown=${this._onDefaultColorKeyDown} @keyup=${this._onDefaultColorKeyUp}>${_M(this.colorPaletteDefaultColorText)}</ui5-button><div class="ui5-cp-separator"></div></div>`}function RP(e,t,i,n,r){return vM`<slot name="${_M(n._individualSlot)}"></slot>`}function PP(e,t,i){return i?vM`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><${bM("ui5-button",t,i)} design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${_M(this.colorPaletteMoreColorsText)}</${bM("ui5-button",t,i)}></div>`:vM`<div class="ui5-cp-more-colors-wrapper"><div class="ui5-cp-separator"></div><ui5-button design="Transparent" class="ui5-cp-more-colors" @click="${this._openMoreColorsDialog}" @keydown=${this._onMoreColorsKeyDown}>${_M(this.colorPaletteMoreColorsText)}</ui5-button></div>`}function kP(e,t,i){return vM`<div class="ui5-cp-recent-colors-wrapper"><div class="ui5-cp-separator"></div><div class="ui5-cp-recent-colors-container" @keydown="${this._onRecentColorsContainerKeyDown}">${fM(this.recentColors,((e,t)=>e._id||t),((n,r)=>LP.call(this,e,t,i,n,r)))}</div></div>`}function LP(e,t,i,n,r){return i?vM`<${bM("ui5-color-palette-item",t,i)} value="${_M(n)}"></${bM("ui5-color-palette-item",t,i)}>`:vM`<ui5-color-palette-item value="${_M(n)}"></ui5-color-palette-item>`}function DP(e,t,i){return i?vM`<${bM("ui5-dialog",t,i)} header-text="${_M(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><${bM("ui5-color-picker",t,i)}></${bM("ui5-color-picker",t,i)}></div><div slot="footer" class="ui5-cp-dialog-footer"><${bM("ui5-button",t,i)} design="Emphasized" @click="${this._chooseCustomColor}">${_M(this.colorPaletteDialogOKButton)}</${bM("ui5-button",t,i)}><${bM("ui5-button",t,i)} design="Transparent" @click="${this._closeDialog}">${_M(this.colorPaletteCancelButton)}</${bM("ui5-button",t,i)}></div></${bM("ui5-dialog",t,i)}>`:vM`<ui5-dialog header-text="${_M(this.colorPaletteDialogTitle)}"><div class="ui5-cp-dialog-content"><ui5-color-picker></ui5-color-picker></div><div slot="footer" class="ui5-cp-dialog-footer"><ui5-button design="Emphasized" @click="${this._chooseCustomColor}">${_M(this.colorPaletteDialogOKButton)}</ui5-button><ui5-button design="Transparent" @click="${this._closeDialog}">${_M(this.colorPaletteCancelButton)}</ui5-button></div></ui5-dialog>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var NP,OP=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let FP=NP=class extends xT{constructor(){super(),this.value="",this.selected=!1,this.forcedTabIndex="-1",this.onPhone=!1,this._disabled=!1}onBeforeRendering(){this._disabled=!this.value,this.onPhone=DC(),this.setAttribute("style",`background-color: ${this.value}`);const e=this.offsetHeight+4;this.style.setProperty(IS("--_ui5_color_palette_item_height"),`${e}px`)}get colorLabel(){return NP.i18nBundle.getText(OM)}get styles(){return{root:{"background-color":this.value}}}get classes(){return{root:{"ui5-cp-item":!0}}}};OP([CT()],FP.prototype,"value",void 0),OP([CT({type:Boolean})],FP.prototype,"selected",void 0),OP([CT({noAttribute:!0})],FP.prototype,"forcedTabIndex",void 0),OP([CT({type:Number})],FP.prototype,"index",void 0),OP([CT({type:Boolean})],FP.prototype,"onPhone",void 0),OP([CT({type:Boolean})],FP.prototype,"_disabled",void 0),OP([xM("@ui5/webcomponents")],FP,"i18nBundle",void 0),FP=NP=OP([ST({tag:"ui5-color-palette-item",renderer:AM,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteItem.css.ts",content:':host(:not([hidden])){height:var(--_ui5-v2-4-0_color-palette-item-height);width:var(--_ui5-v2-4-0_color-palette-item-height);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:var(--_ui5-v2-4-0_color-palette-item-outer-border-radius);display:inline-block;margin:var(--_ui5-v2-4-0_color-palette-item-margin);box-sizing:border-box}:host(:not([_disabled]):hover),:host([selected]){height:var(--_ui5-v2-4-0_color-palette-item-hover-height);width:var(--_ui5-v2-4-0_color-palette-item-hover-height);margin:var(--_ui5-v2-4-0_color-palette-item-hover-margin);border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-outer-border-radius)}:host(:not([hidden])[on-phone]){width:calc(100% - .5rem);padding-block-start:calc(100% - .625rem);border:.0625rem solid var(--sapContent_ForegroundBorderColor);border-radius:.25rem;display:inline-block;margin:.625rem;height:0;max-width:4.5rem;max-height:4.5rem}:host([selected][on-phone]){padding-block-start:calc(100% - .125rem);width:100%;margin:0}.ui5-cp-item{position:relative;box-sizing:border-box;border-radius:var(--_ui5-v2-4-0_color-palette-item-inner-border-radius);width:100%;height:100%}:host(:not([_disabled]):not([on-phone]):hover) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius)}:host(:not([_disabled])[on-phone]) .ui5-cp-item{border-radius:.1875rem}.ui5-cp-item:hover:not(:focus),:host([selected]:not([on-phone])) .ui5-cp-item{border-radius:var(--_ui5-v2-4-0_color-palette-item-hover-inner-border-radius);box-sizing:border-box}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus,:host([selected]:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item{border:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border)}:host([selected]) .ui5-cp-item:focus,:host(:not([_disabled])) .ui5-cp-item:focus{outline:none}:host(:not([_disabled]):not([on-phone]):focus) .ui5-cp-item{pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):hover:focus) .ui5-cp-item:focus:not(:hover):before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-before-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([_disabled]):not([on-phone]):focus:not(:hover)) .ui5-cp-item:focus:not(:hover):after{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius);pointer-events:none}:host([selected]:not([_disabled]):not([on-phone]):not(:focus):not(:hover)) .ui5-cp-item:after,:host([selected]:not([_disabled]):not([on-phone]):not(:focus):hover) .ui5-cp-item:after,:host(:not([selected]):not([on-phone]):hover) .ui5-cp-item:after{content:"";box-sizing:border-box;position:absolute;inset:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-hover-inset) - .0625rem);border:var(--_ui5-v2-4-0_color-palette-item-after-not-focus-color);border-radius:calc(var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius) + .0625rem);pointer-events:none}:host(:not([_disabled]):not([on-phone]):not([selected]):not(:hover)) .ui5-cp-item:focus:not(:hover):after{border:var(--_ui5-v2-4-0_color-palette-item-after-focus-not-selected-border)}:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:not(:hover):before,:host([selected]:not([_disabled]):not([on-phone])) .ui5-cp-item:focus:hover:before{content:"";box-sizing:border-box;position:absolute;inset:var(--_ui5-v2-4-0_color-palette-item-selected-focused-border-before);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-before-focus-border-radius);pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before,:host(:not([disabled])) .ui5-cp-item:focus-visible:after{content:"";box-sizing:border-box;position:absolute;pointer-events:none}:host(:not([disabled])) .ui5-cp-item:focus-visible:before{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-before-focus-color);border-radius:var(--_ui5-v2-4-0_color-palette-item-after-focus-border-radius)}:host(:not([disabled])) .ui5-cp-item:focus-visible:after{inset:calc(100% - var(--_ui5-v2-4-0_color_palette_item_height) + var(--_ui5-v2-4-0-color-palette-item-mobile-focus-inset)) var(--_ui5-v2-4-0_color-palette-item-mobile-focus-sides-inset);border:var(--_ui5-v2-4-0_color-palette-item-after-mobile-focus-border)}\n'},template:function(e,t,i){return vM`<div class="${mM(this.classes.root)}" style="${gM(this.styles.root)}" value="${_M(this.value)}" tabindex="${_M(this.forcedTabIndex)}" role="button" aria-label="${_M(this.colorLabel)} - ${_M(this.index)}: ${_M(this.value)}" title="${_M(this.colorLabel)} - ${_M(this.index)}: ${_M(this.value)}" ?disabled="${this._disabled}"></div>`},shadowRootOptions:{delegatesFocus:!0}})],FP),FP.define();const UP=FP;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var zP,HP=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let GP=zP=class extends xT{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.popupMode=!1,this.onPhone=!1,this._shouldFocusRecentColors=!1,this._itemNavigation=new aM(this,{getItemsCallback:()=>this.displayedColors,rowSize:this.rowSize,behavior:oM.Cyclic}),this._itemNavigationRecentColors=new aM(this,{getItemsCallback:()=>this.recentColorsElements,rowSize:this.rowSize,behavior:oM.Static}),this._recentColors=[]}onBeforeRendering(){this._ensureSingleSelectionOrDeselectAll();const e=this.selectedItem;if(e&&!this.showRecentColors&&(this._selectedColor=e.value),this.displayedColors.forEach(((e,t)=>{e.index=t+1})),this.showMoreColors){const e=lS("ColorPaletteMoreColors");e.i18nBundle=zP.i18nBundle,e&&(this.moreColorsFeature=new e)}this.onPhone=DC()}get _effectiveShowMoreColors(){return!(!this.showMoreColors||!this.moreColorsFeature)}onAfterRendering(){if(this.hasRecentColors&&this._shouldFocusRecentColors){this.selectedItem&&(this.selectedItem.selected=!1);const e=this.recentColorsElements[0];e.selected=!0,this._currentlySelected=e,this._currentlySelected.focus(),this._shouldFocusRecentColors=!1}}selectColor(e){e.value&&(e.focus(),this.displayedColors.includes(e)&&this._itemNavigation.setCurrentItem(e),this._setColor(e.value))}_setColor(e){this._selectedColor=e,this._recentColors[0]!==this._selectedColor&&(this._recentColors.includes(this._selectedColor)?this._recentColors.unshift(this._recentColors.splice(this._recentColors.indexOf(this._selectedColor),1)[0]):this._addRecentColor(this._selectedColor)),this.fireDecoratorEvent("item-click",{color:this._selectedColor})}get effectiveColorItems(){let e=this.colors;return this.popupMode&&(e=this.getSlottedNodes("colors")),e}_ensureSingleSelectionOrDeselectAll(){let e;this.allColorsInPalette.forEach((t=>{t.selected&&(e&&(e.selected=!1),e=t)}))}_onclick(e){this.handleSelection(e.target)}_onkeyup(e){const t=e.target;IT(e)&&(e.preventDefault(),this.handleSelection(t))}_onkeydown(e){const t=e.target;MT(e)&&this.handleSelection(t),IT(e)&&e.preventDefault()}handleSelection(e){e.hasAttribute("ui5-color-palette-item")&&e.value&&(this._shouldFocusRecentColors=!1,this.selectColor(e),this.recentColorsElements.includes(e)?(this.recentColorsElements[0].selected=!0,this.recentColorsElements[0].focus(),this._currentlySelected=this.recentColorsElements[0]):(this.allColorsInPalette.forEach((t=>{t.selected=t===e})),this._currentlySelected=e),this._ensureSingleSelectionOrDeselectAll())}_handleDefaultColorClick(e){e.preventDefault(),this._onDefaultColorClick()}_onDefaultColorKeyUp(e){IT(e)&&this._handleDefaultColorClick(e)}_onDefaultColorKeyDown(e){if(qT(e)&&this.popupMode&&this._handleDefaultColorClick(e),MT(e)&&this._handleDefaultColorClick(e),LT(e))e.stopPropagation(),this.focusColorElement(this.colorPaletteNavigationElements[1],this._itemNavigation);else if(kT(e)){e.stopPropagation();const t=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this.hasRecentColors)this.focusColorElement(t,this._itemNavigationRecentColors);else if(this.showMoreColors)t.focus();else{const e=this.displayedColors.length%this.rowSize*this.rowSize;this.focusColorElement(this.displayedColors[e],this._itemNavigation)}}}_onMoreColorsKeyDown(e){const t=e.target,i=this.colorPaletteNavigationElements.indexOf(t),n=this.displayedColors.length%this.rowSize*this.rowSize;kT(e)?(e.stopPropagation(),this.focusColorElement(this.displayedColors[n],this._itemNavigation)):LT(e)&&(e.stopPropagation(),this.hasRecentColors?this.focusColorElement(this.colorPaletteNavigationElements[i+1],this._itemNavigationRecentColors):this.showDefaultColor?this.firstFocusableElement.focus():this.focusColorElement(this.displayedColors[0],this._itemNavigation))}_isUpOrDownNavigatableColorPaletteItem(e){return(kT(e)||LT(e))&&this._currentlySelected&&this.colorPaletteNavigationElements.includes(this._currentlySelected)}_onColorContainerKeyDown(e){const t=e.target,i=this.colorPaletteNavigationElements[this.colorPaletteNavigationElements.length-1];if(this._isUpOrDownNavigatableColorPaletteItem(e)&&(this._currentlySelected=void 0),qT(e)&&this.popupMode&&(e.preventDefault(),this.selectColor(t)),kT(e)&&t===this.displayedColors[0]&&this.colorPaletteNavigationElements.length>1)e.stopPropagation(),this.showDefaultColor?this.firstFocusableElement.focus():!this.showDefaultColor&&this.hasRecentColors?this.focusColorElement(i,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&i.focus();else if(LT(e)&&t===this.displayedColors[this.displayedColors.length-1]&&this.colorPaletteNavigationElements.length>1){e.stopPropagation();const t=this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors||!this.showDefaultColor&&!this.showMoreColors&&this.hasRecentColors;this.showDefaultColor&&this.showMoreColors?this.colorPaletteNavigationElements[2].focus():!this.showDefaultColor||this.showMoreColors||this.showRecentColors&&this.recentColors[0]?t?this.focusColorElement(i,this._itemNavigationRecentColors):!this.showDefaultColor&&this.showMoreColors&&this.colorPaletteNavigationElements[1].focus():this.firstFocusableElement.focus()}}_onRecentColorsContainerKeyDown(e){if(this._isUpOrDownNavigatableColorPaletteItem(e)&&(this._currentlySelected=void 0),kT(e)){if(this.showMoreColors){const e=this.showDefaultColor?2:1;this.colorPaletteNavigationElements[e].focus()}else if(!this.showMoreColors&&this.colorPaletteNavigationElements.length>1){const t=this.displayedColors.length%this.rowSize*this.rowSize;e.stopPropagation(),this.focusColorElement(this.displayedColors[t],this._itemNavigation)}}else LT(e)&&(this.showDefaultColor?this.firstFocusableElement.focus():(e.stopPropagation(),this.focusColorElement(this.displayedColors[0],this._itemNavigation)))}focusColorElement(e,t){t.setCurrentItem(e),t._focusCurrentItem()}get firstFocusableElement(){return this.colorPaletteNavigationElements[0]}_chooseCustomColor(){const e=this.getColorPicker();this._setColor(e.value),this._closeDialog(),this._shouldFocusRecentColors=!0}_addRecentColor(e){this.showRecentColors&&!this._recentColors.includes(e)&&(this._recentColors.unshift(e),this._recentColors.length>this.rowSize&&this._recentColors.pop())}_closeDialog(){this._getDialog().open=!1}_openMoreColorsDialog(){this._getDialog().open=!0}_onDefaultColorClick(){this.defaultColor&&(this._setColor(this.defaultColor),this._addRecentColor(this.defaultColor),this.selectedItem&&(this.selectedItem.selected=!1,this._currentlySelected=void 0))}get selectedItem(){return this.allColorsInPalette.find((e=>e.selected))}get allColorsInPalette(){return[...this.effectiveColorItems,...this.recentColorsElements]}get colorPaletteDialogTitle(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteDialogTitle}get colorPaletteDialogOKButton(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteDialogOKButton}get colorPaletteCancelButton(){var e;return null==(e=this.moreColorsFeature)?void 0:e.colorPaletteCancelButton}get selectedColor(){return this._selectedColor}get displayedColors(){return this.getSlottedNodes("colors").filter((e=>e.value)).slice(0,15)}get colorContainerLabel(){return zP.i18nBundle.getText(DM)}get colorPaletteMoreColorsText(){return zP.i18nBundle.getText(HM)}get colorPaletteDefaultColorText(){return zP.i18nBundle.getText(GM)}get _showMoreColors(){return this.showMoreColors&&this.moreColorsFeature}get rowSize(){return 5}get hasRecentColors(){return this.showRecentColors&&this.recentColors[0]}get recentColors(){for(this._recentColors.length>this.rowSize&&(this._recentColors=this._recentColors.slice(0,this.rowSize));this._recentColors.length<this.rowSize;)this._recentColors.push("");return this._recentColors}get recentColorsElements(){const e=this.getDomRef();return e?Array.from(e.querySelectorAll(".ui5-cp-recent-colors-wrapper [ui5-color-palette-item]")).filter((e=>""!==e.value)):[]}get colorPaletteNavigationElements(){const e=[],t=this.shadowRoot.querySelector(".ui5-cp-root");return this._currentlySelected&&e.push(this._currentlySelected),this.showDefaultColor&&e.push(t.querySelector(".ui5-cp-default-color-button")),e.push(this.displayedColors[0]),this.showMoreColors&&e.push(t.querySelector(".ui5-cp-more-colors")),this.showRecentColors&&this.recentColorsElements.length&&e.push(this.recentColorsElements[0]),e}get classes(){return{colorPaletteRoot:{"ui5-cp-root":!0,"ui5-cp-root-phone":DC()}}}_getDialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}getColorPicker(){return this._getDialog().content[0].querySelector("[ui5-color-picker]")}};HP([CT({type:Boolean})],GP.prototype,"showRecentColors",void 0),HP([CT({type:Boolean})],GP.prototype,"showMoreColors",void 0),HP([CT({type:Boolean})],GP.prototype,"showDefaultColor",void 0),HP([CT()],GP.prototype,"defaultColor",void 0),HP([CT()],GP.prototype,"_selectedColor",void 0),HP([CT({type:Boolean})],GP.prototype,"popupMode",void 0),HP([CT({type:Boolean})],GP.prototype,"onPhone",void 0),HP([TT({default:!0,type:HTMLElement,invalidateOnChildChange:!0,individualSlots:!0})],GP.prototype,"colors",void 0),HP([xM("@ui5/webcomponents")],GP,"i18nBundle",void 0),GP=zP=HP([ST({tag:"ui5-color-palette",renderer:AM,features:["ColorPaletteMoreColors"],template:function(e,t,i){return vM`<div class="${mM(this.classes.colorPaletteRoot)}" @click=${this._onclick} @keyup=${this._onkeyup} @keydown=${this._onkeydown}>${this.showDefaultColor?BP.call(this,e,t,i):void 0}<div class="ui5-cp-item-container" role="region" aria-label="${_M(this.colorContainerLabel)}" @keydown="${this._onColorContainerKeyDown}">${fM(this.displayedColors,((e,t)=>e._id||t),((n,r)=>RP.call(this,e,t,i,n,r)))}</div>${this._showMoreColors?PP.call(this,e,t,i):void 0}${this.showRecentColors?kP.call(this,e,t,i):void 0}</div>${this._effectiveShowMoreColors?DP.call(this,e,t,i):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalette.css.ts",content:":host(:not([hidden])){display:inline-block}:host(:not([hidden])[popup-mode]),:host(:not([hidden])[on-phone]){width:100%;overflow:hidden}.ui5-cp-root{display:flex;flex-direction:column}.ui5-cp-root.ui5-cp-root-phone,.ui5-cp-separator,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper,.ui5-cp-recent-colors-wrapper{width:100%}.ui5-cp-root.ui5-cp-root-phone .ui5-cp-item-container{padding:.375rem .625rem;width:100%;max-width:100%;max-height:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-default-color-button,.ui5-cp-root-phone .ui5-cp-more-colors,.ui5-cp-root-phone .ui5-cp-more-colors-wrapper,.ui5-cp-root-phone .ui5-cp-default-color-button-wrapper{height:2.875rem}.ui5-cp-root-phone .ui5-cp-item-container{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center}.ui5-cp-root-phone .ui5-cp-recent-colors-container{padding:.375rem .625rem;display:grid;grid-template-columns:repeat(5,1fr);grid-gap:.75rem;justify-items:center;align-items:center;width:100%;box-sizing:border-box}.ui5-cp-root-phone .ui5-cp-recent-colors-wrapper{max-width:100%;padding:0;display:flex;justify-content:center;flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden}.ui5-cp-recent-colors-wrapper{display:flex;align-items:center;flex-direction:column;gap:.25rem}.ui5-cp-root.ui5-cp-root-phone{display:flex}.ui5-cp-item-container{display:flex;max-width:var(--_ui5-v2-4-0_color-palette-row-width);flex-flow:wrap;max-height:var(--_ui5-v2-4-0_color-palette-row-height);overflow:hidden;padding:var(--_ui5-v2-4-0_color-palette-swatch-container-padding)}.ui5-cp-more-colors,.ui5-cp-default-color-button{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);text-align:center;border:none}.ui5-cp-more-colors-wrapper,.ui5-cp-default-color-button-wrapper{display:flex;flex-direction:column}.ui5-cp-separator{height:.0625rem;background:var(--sapToolbar_SeparatorColor)}.ui5-cp-default-color-button,.ui5-cp-more-colors{padding:.0625rem}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/ColorPaletteDialog.css.ts",content:".ui5-cp-dialog-content{display:flex;justify-content:center;align-items:center;margin:1rem 0}.ui5-cp-dialog-footer{width:100%;display:flex;justify-content:flex-end;margin:.1875rem 1rem}.ui5-cp-dialog-footer [ui5-button]:first-child{margin-right:1rem}\n"}],get dependencies(){const e=lS("ColorPaletteMoreColors");return[UP,RB].concat(e?e.dependencies:[])}}),ET("item-click",{detail:{color:{type:String}}})],GP),GP.define();const VP=GP;function QP(e,t,i,n,r){return vM`<slot name="${_M(n._individualSlot)}"></slot>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));const jP={packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopoverCommon.css.ts",content:'.input-root-phone{flex:1;position:relative;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color);border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box}.input-root-phone [inner-input]{padding:0 .5rem;width:100%;height:100%}.input-root-phone [inner-input]:focus{background-color:var(--sapField_Focus_Background)}.input-root-phone:focus-within:before{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}.input-root-phone [value-state=Negative] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Positive] .inputIcon[data-ui5-compact-size],.input-root-phone [value-state=Critical] .inputIcon[data-ui5-compact-size]{padding:.1875rem .5rem}[inner-input]{background:transparent;color:inherit;border:none;font-style:normal;-webkit-appearance:none;-moz-appearance:textfield;line-height:normal;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;min-width:3rem;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}[inner-input]::selection,[inner-input]::-moz-selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}[inner-input]::-webkit-input-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}[inner-input]::-moz-placeholder{font-style:italic;color:var(--sapField_PlaceholderTextColor)}.input-root-phone[value-state]:not([value-state=None]){border-width:var(--_ui5-v2-4-0_input_state_border_width)}.input-root-phone[value-state=Negative] [inner-input],.input-root-phone[value-state=Critical] [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style)}.input-root-phone[value-state=Negative] [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}.input-root-phone[value-state=Negative]:not([readonly]){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}.input-root-phone[value-state=Negative]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}.input-root-phone[value-state=Negative]:not([readonly]):not([disabled]),.input-root-phone[value-state=Critical]:not([readonly]):not([disabled]),.input-root-phone[value-state=Information]:not([readonly]):not([disabled]){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}.input-root-phone[value-state=Critical]:not([readonly]){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}.input-root-phone[value-state=Critical]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}.input-root-phone[value-state=Positive]:not([readonly]){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width)}.input-root-phone[value-state=Positive]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}.input-root-phone[value-state=Positive]:not([readonly]):focus-within:before{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}.input-root-phone[value-state=Information]:not([readonly]){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width)}.input-root-phone[value-state=Information]:not([readonly]) [inner-input]:focus{background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}.ui5-multi-combobox-toggle-button{margin-left:.5rem}.ui5-responsive-popover-header{width:100%;min-height:2.5rem;display:flex;flex-direction:column}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header .row{box-sizing:border-box;padding:.25rem 1rem;min-height:2.5rem;display:flex;justify-content:center;align-items:center;font-size:var(--sapFontHeader5Size)}.ui5-responsive-popover-footer{display:flex;justify-content:flex-end;padding:.25rem 0;width:100%}.ui5-responsive-popover-close-btn{position:absolute;right:1rem}\n'};function qP(e,t,i){return i?vM`<${bM("ui5-dialog",t,i)} root-element accessible-name=${_M(this.accessibleName)} accessible-name-ref=${_M(this.accessibleNameRef)} accessible-role=${_M(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${_M(this.initialFocus)}" @ui5-before-open="${_M(this._beforeDialogOpen)}" @ui5-open="${_M(this._propagateDialogEvent)}" @ui5-before-close="${_M(this._propagateDialogEvent)}" @ui5-close="${_M(this._afterDialogClose)}" exportparts="content, header, footer" .open=${_M(this.open)}>${this._hideHeader?void 0:WP.call(this,e,t,i)}<slot></slot><slot slot="footer" name="footer"></slot></${bM("ui5-dialog",t,i)}>`:vM`<ui5-dialog root-element accessible-name=${_M(this.accessibleName)} accessible-name-ref=${_M(this.accessibleNameRef)} accessible-role=${_M(this.accessibleRole)} stretch ?prevent-initial-focus="${this.preventInitialFocus}" initial-focus="${_M(this.initialFocus)}" @ui5-before-open="${_M(this._beforeDialogOpen)}" @ui5-open="${_M(this._propagateDialogEvent)}" @ui5-before-close="${_M(this._propagateDialogEvent)}" @ui5-close="${_M(this._afterDialogClose)}" exportparts="content, header, footer" .open=${_M(this.open)}>${this._hideHeader?void 0:WP.call(this,e,t,i)}<slot></slot><slot slot="footer" name="footer"></slot></ui5-dialog>`}function WP(e,t,i){return vM`${this.header.length?$P.call(this,e,t,i):XP.call(this,e,t,i)}`}function $P(e,t,i){return vM`<slot slot="header" name="header"></slot>`}function XP(e,t,i){return vM`<div class="${mM(this.classes.header)}" slot="header">${this.headerText?YP.call(this,e,t,i):void 0}${this._hideCloseButton?void 0:KP.call(this,e,t,i)}</div>`}function YP(e,t,i){return i?vM`<${bM("ui5-title",t,i)} level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${_M(this.headerText)}</${bM("ui5-title",t,i)}>`:vM`<ui5-title level="H1" wrapping-type="None" class="ui5-popup-header-text ui5-responsive-popover-header-text">${_M(this.headerText)}</ui5-title>`}function KP(e,t,i){return i?vM`<${bM("ui5-button",t,i)} icon="decline" design="Transparent" accessible-name="${_M(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></${bM("ui5-button",t,i)}>`:vM`<ui5-button icon="decline" design="Transparent" accessible-name="${_M(this._closeDialogAriaLabel)}" @click="${this.closePopup}"></ui5-button>`}function ZP(e,t,i){return vM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${gM(this.styles.root)}" class="${mM(this.classes.root)}" role="${_M(this._role)}" aria-modal="${_M(this._ariaModal)}" aria-label="${_M(this._ariaLabel)}" aria-labelledby="${_M(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span><span class="ui5-popover-arrow" style="${gM(this.styles.arrow)}"></span>${this._displayHeader?JP.call(this,e,t,i):void 0}<div style="${gM(this.styles.content)}" class="${mM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this._displayFooter?ik.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section>`}function JP(e,t,i){return vM`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${this.header.length?ek.call(this,e,t,i):tk.call(this,e,t,i)}</header>`}function ek(e,t,i){return vM`<slot name="header"></slot>`}function tk(e,t,i){return i?vM`<${bM("ui5-title",t,i)} level="H1" class="ui5-popup-header-text">${_M(this.headerText)}</${bM("ui5-title",t,i)}>`:vM`<ui5-title level="H1" class="ui5-popup-header-text">${_M(this.headerText)}</ui5-title>`}function ik(e,t,i){return vM`${this.footer.length?nk.call(this,e,t,i):void 0}`}function nk(e,t,i){return vM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function rk(e,t,i){return vM`<header><div class="ui5-popup-header-root" id="ui5-popup-header" role="group" aria-describedby=${_M(this.effectiveAriaDescribedBy)} aria-roledescription=${_M(this.ariaRoleDescriptionHeaderText)} tabindex="${_M(this._headerTabIndex)}" @keydown="${this._onDragOrResizeKeyDown}" @mousedown="${this._onDragMouseDown}" part="header" state="${_M(this.state)}">${this.hasValueState?ok.call(this,e,t,i):void 0}${this.header.length?ak.call(this,e,t,i):sk.call(this,e,t,i)}${this.resizable?lk.call(this,e,t,i):hk.call(this,e,t,i)}</div></header>`}function ok(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-dialog-value-state-icon" name="${_M(this._dialogStateIcon)}"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-dialog-value-state-icon" name="${_M(this._dialogStateIcon)}"></ui5-icon>`}function ak(e,t,i){return vM`<slot name="header"></slot>`}function sk(e,t,i){return i?vM`<${bM("ui5-title",t,i)} level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${_M(this.headerText)}</${bM("ui5-title",t,i)}>`:vM`<ui5-title level="H1" id="ui5-popup-header-text" class="ui5-popup-header-text">${_M(this.headerText)}</ui5-title>`}function lk(e,t,i){return vM`${this.draggable?ck.call(this,e,t,i):uk.call(this,e,t,i)}`}function ck(e,t,i){return vM`<span id="${_M(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${_M(this.ariaDescribedByHeaderTextDraggableAndResizable)}</span>`}function uk(e,t,i){return vM`<span id="${_M(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${_M(this.ariaDescribedByHeaderTextResizable)}</span>`}function hk(e,t,i){return vM`${this.draggable?dk.call(this,e,t,i):void 0}`}function dk(e,t,i){return vM`<span id="${_M(this._id)}-descr" aria-hidden="true" class="ui5-hidden-text">${_M(this.ariaDescribedByHeaderTextDraggable)}</span>`}function pk(e,t,i){return vM`<footer class="ui5-popup-footer-root" part="footer"><slot name="footer"></slot></footer>`}function fk(e,t,i){return i?vM`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><${bM("ui5-icon",t,i)} name="resize-corner"></${bM("ui5-icon",t,i)}></div>`:vM`<div class="ui5-popup-resize-handle" @mousedown="${this._onResizeMouseDown}"><ui5-icon name="resize-corner"></ui5-icon></div>`}ME("resize-corner",{pathData:"M384 160v32q0 12-10 22L182 406q-10 10-22 10h-32zM224 416l160-160v32q0 12-10 22l-96 96q-10 10-22 10h-32zm160-64v32q0 12-10 22t-22 10h-32z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("resize-corner",{pathData:"M282 416q-11 0-18.5-7.5T256 390t7-18l109-109q7-7 18-7t18.5 7.5T416 282t-7 18L300 409q-7 7-18 7zm-160 0q-11 0-18.5-7.5T96 390t7-18l269-269q7-7 18-7t18.5 7.5T416 122t-7 18L140 409q-7 7-18 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("error",{pathData:"M512 256q0 53-20.5 100t-55 81.5-81 54.5-99.5 20-100-20.5-81.5-55T20 355 0 256q0-54 20-100.5t55-81T156.5 20 256 0t99.5 20T437 75t55 81.5 20 99.5zM399 364q3-3 3-6t-3-6l-86-86q-3-3-3-6t3-6l81-81q3-3 3-6t-3-6l-37-37q-2-2-6-2t-6 2l-83 82q-1 3-6 3-3 0-6-3l-84-83q-1-2-6-2-4 0-6 2l-37 37q-3 3-3 6t3 6l83 82q3 3 3 6t-3 6l-83 82q-2 2-2.5 4.5l-.5 2.5q0 3 3 5l36 37q4 2 6 2 4 0 6-2l85-84q2-2 6-2t6 2l88 88q4 2 6 2t6-2z",ltr:!1,accData:LB,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("error",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm45 256l74-73q9-11 9-23 0-13-9.5-22.5T352 128q-12 0-23 9l-73 74-73-74q-10-9-23-9t-22.5 9.5T128 160q0 12 9 23l74 73-74 73q-9 10-9 23t9.5 22.5T160 384t23-9l73-74 73 74q11 9 23 9 13 0 22.5-9.5T384 352t-9-23z",ltr:!1,accData:LB,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("alert",{pathData:"M501 374q5 10 7.5 19.5T512 412v5q0 31-23 47t-50 16H74q-13 0-26-4t-23.5-12-17-20T0 417q0-13 4-22.5t9-20.5L198 38q21-38 61-38 38 0 59 38zM257 127q-13 0-23.5 8T223 161q1 7 2 12 3 25 4.5 48t3.5 61q0 11 7.5 16t16.5 5q22 0 23-21l2-36 9-85q0-18-10.5-26t-23.5-8zm0 299q20 0 31.5-12t11.5-32q0-19-11.5-31T257 339t-31.5 12-11.5 31q0 20 11.5 32t31.5 12z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("alert",{pathData:"M505 399q7 13 7 27 0 21-15.5 37.5T456 480H56q-25 0-40.5-16.5T0 426q0-14 7-27L208 59q8-14 21-20.5t27-6.5 27 6.5T304 59zm-249 17q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9zm32-240q0-14-9-23t-23-9-23 9-9 23v96q0 14 9 23t23 9 23-9 9-23v-96z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("sys-enter-2",{pathData:"M512 256q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256t20.5-100 55-81.5T157 20t99-20q53 0 100 20t81.5 54.5T492 156t20 100zm-118-87q2-4 2-7t-3-6l-36-36q-3-4-8-4t-8 5L237 294h-4l-70-52q-4-3-7-3t-4.5 2-2.5 3l-29 41q-3 3-3 6 0 5 5 8l113 95q2 2 7 2t8-4z",ltr:!0,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("sys-enter-2",{pathData:"M256 0q53 0 100 20t81.5 54.5T492 156t20 100-20 100-54.5 81.5T356 492t-100 20-100-20-81.5-54.5T20 356 0 256t20-100 54.5-81.5T156 20 256 0zm150 183q10-9 10-23 0-13-9.5-22.5T384 128t-22 9L186 308l-68-63q-9-9-22-9t-22.5 9.5T64 268q0 15 10 24l90 83q11 9 22 9 13 0 22-9z",ltr:!0,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("information",{pathData:"M0 256q0-53 20.5-100t55-81.5T157 20t99-20q54 0 100.5 20t81 55 54.5 81.5 20 99.5q0 54-20 100.5t-54.5 81T356 492t-100 20q-54 0-100.5-20t-81-55T20 355.5 0 256zm226-89q14 11 30 11 17 0 29.5-11.5T298 138q0-19-13-31-12-12-29-12-19 0-30.5 12.5T214 138q0 17 12 29zm-34 201v33h128v-33h-32V215q0-6-7-6h-88v31h32v128h-33z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("information",{pathData:"M256 0q53 0 99.5 20T437 75t55 81.5 20 99.5-20 99.5-55 81.5-81.5 55-99.5 20-99.5-20T75 437t-55-81.5T0 256t20-99.5T75 75t81.5-55T256 0zm32 224q0-14-9-23t-23-9-23 9-9 23v160q0 14 9 23t23 9 23-9 9-23V224zm-32-64q14 0 23-9t9-23-9-23-23-9-23 9-9 23 9 23 23 9z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var mk,gk=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const _k=16,vk={[vP.Negative]:"error",[vP.Critical]:"alert",[vP.Positive]:"sys-enter-2",[vP.Information]:"information"};let yk=mk=class extends NR{constructor(){super(),this.stretch=!1,this.draggable=!1,this.resizable=!1,this.state="None",this._draggedOrResized=!1,this._revertSize=()=>{Object.assign(this.style,{top:"",left:"",width:"",height:""})},this._screenResizeHandler=this._screenResize.bind(this),this._dragMouseMoveHandler=this._onDragMouseMove.bind(this),this._dragMouseUpHandler=this._onDragMouseUp.bind(this),this._resizeMouseMoveHandler=this._onResizeMouseMove.bind(this),this._resizeMouseUpHandler=this._onResizeMouseUp.bind(this),this._dragStartHandler=this._handleDragStart.bind(this)}static _isHeader(e){return e.classList.contains("ui5-popup-header-root")||"header"===e.getAttribute("slot")}get isModal(){return!0}get _ariaLabelledBy(){let e;return this.headerText&&!this._ariaLabel&&(e="ui5-popup-header-text"),e}get ariaRoleDescriptionHeaderText(){return this.resizable||this.draggable?mk.i18nBundle.getText(RI):void 0}get effectiveAriaDescribedBy(){return this.resizable||this.draggable?`${this._id}-descr`:void 0}get ariaDescribedByHeaderTextResizable(){return mk.i18nBundle.getText(PI)}get ariaDescribedByHeaderTextDraggable(){return mk.i18nBundle.getText(kI)}get ariaDescribedByHeaderTextDraggableAndResizable(){return mk.i18nBundle.getText(LI)}get _displayHeader(){return this.header.length||this.headerText||this.draggable||this.resizable}get _movable(){return!this.stretch&&this.onDesktop&&(this.draggable||this.resizable)}get _headerTabIndex(){return this._movable?"0":void 0}get _showResizeHandle(){return this.resizable&&this.onDesktop}get _minHeight(){let e=Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);const t=this._root.querySelector(".ui5-popup-header-root");t&&(e+=t.offsetHeight);const i=this._root.querySelector(".ui5-popup-footer-root");return i&&(e+=i.offsetHeight),e}get hasValueState(){return this.state!==vP.None}get _dialogStateIcon(){return vk[this.state]}get _role(){if(this.accessibleRole!==SR.None)return this.state===vP.Negative||this.state===vP.Critical?SR.AlertDialog.toLowerCase():this.accessibleRole.toLowerCase()}_show(){super._show(),this._center()}onBeforeRendering(){super.onBeforeRendering(),this._isRTL="rtl"===this.effectiveDir}onEnterDOM(){super.onEnterDOM(),this._attachScreenResizeHandler(),this.addEventListener("dragstart",this._dragStartHandler)}onExitDOM(){super.onExitDOM(),this._detachScreenResizeHandler(),this.removeEventListener("dragstart",this._dragStartHandler)}_resize(){super._resize(),this._draggedOrResized||this._center()}_screenResize(){this._center()}_attachScreenResizeHandler(){this._screenResizeHandlerAttached||(window.addEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!0)}_detachScreenResizeHandler(){this._screenResizeHandlerAttached&&(window.removeEventListener("resize",this._screenResizeHandler),this._screenResizeHandlerAttached=!1)}_center(){const e=window.innerHeight-this.offsetHeight,t=window.innerWidth-this.offsetWidth;Object.assign(this.style,{top:`${Math.round(e/2)}px`,left:`${Math.round(t/2)}px`})}_onDragMouseDown(e){if(!this._movable||!this.draggable||!mk._isHeader(e.target))return;const{top:t,left:i}=this.getBoundingClientRect(),{width:n,height:r}=window.getComputedStyle(this);Object.assign(this.style,{top:`${t}px`,left:`${i}px`,width:Math.round(100*Number.parseFloat(n))/100+"px",height:Math.round(100*Number.parseFloat(r))/100+"px"}),this._x=e.clientX,this._y=e.clientY,this._draggedOrResized=!0,this._attachMouseDragHandlers()}_onDragMouseMove(e){e.preventDefault();const{clientX:t,clientY:i}=e,n=this._x-t,r=this._y-i,{left:o,top:a}=this.getBoundingClientRect();Object.assign(this.style,{left:`${Math.floor(o-n)}px`,top:`${Math.floor(a-r)}px`}),this._x=t,this._y=i}_onDragMouseUp(){delete this._x,delete this._y,this._detachMouseDragHandlers()}_onDragOrResizeKeyDown(e){this._movable&&mk._isHeader(e.target)&&(this.draggable&&[kT,LT,RT,PT].some((t=>t(e)))?this._dragWithEvent(e):this.resizable&&[UT,zT,HT,GT].some((t=>t(e)))&&this._resizeWithEvent(e))}_dragWithEvent(e){const{top:t,left:i,width:n,height:r}=this.getBoundingClientRect();let o=0,a="top";switch(!0){case kT(e):o=t-_k,a="top";break;case LT(e):o=t+_k,a="top";break;case RT(e):o=i-_k,a="left";break;case PT(e):o=i+_k,a="left"}o=QB(o,0,"left"===a?window.innerWidth-n:window.innerHeight-r),this.style[a]=`${o}px`}_resizeWithEvent(e){this._draggedOrResized=!0,this.addEventListener("ui5-before-close",this._revertSize,{once:!0});const{top:t,left:i}=this.getBoundingClientRect(),n=window.getComputedStyle(this),r=Number.parseFloat(n.minWidth),o=window.innerWidth-i,a=window.innerHeight-t;let s=Number.parseFloat(n.width),l=Number.parseFloat(n.height);switch(!0){case UT(e):l-=_k;break;case zT(e):l+=_k;break;case HT(e):s-=_k;break;case GT(e):s+=_k}s=QB(s,r,o),l=QB(l,this._minHeight,a),Object.assign(this.style,{width:`${s}px`,height:`${l}px`})}_attachMouseDragHandlers(){window.addEventListener("mousemove",this._dragMouseMoveHandler),window.addEventListener("mouseup",this._dragMouseUpHandler)}_detachMouseDragHandlers(){window.removeEventListener("mousemove",this._dragMouseMoveHandler),window.removeEventListener("mouseup",this._dragMouseUpHandler)}_onResizeMouseDown(e){if(!this._movable||!this.resizable)return;e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect(),{width:n,height:r,minWidth:o}=window.getComputedStyle(this);this._initialX=e.clientX,this._initialY=e.clientY,this._initialWidth=Number.parseFloat(n),this._initialHeight=Number.parseFloat(r),this._initialTop=t,this._initialLeft=i,this._minWidth=Number.parseFloat(o),this._cachedMinHeight=this._minHeight,Object.assign(this.style,{top:`${t}px`,left:`${i}px`}),this._draggedOrResized=!0,this._attachMouseResizeHandlers()}_onResizeMouseMove(e){const{clientX:t,clientY:i}=e;let n,r;this._isRTL?(n=QB(this._initialWidth-(t-this._initialX),this._minWidth,this._initialLeft+this._initialWidth),r=QB(this._initialLeft+(t-this._initialX),0,this._initialX+this._initialWidth-this._minWidth)):n=QB(this._initialWidth+(t-this._initialX),this._minWidth,window.innerWidth-this._initialLeft);const o=QB(this._initialHeight+(i-this._initialY),this._cachedMinHeight,window.innerHeight-this._initialTop);Object.assign(this.style,{height:`${o}px`,width:`${n}px`,left:r?`${r}px`:void 0})}_onResizeMouseUp(){delete this._initialX,delete this._initialY,delete this._initialWidth,delete this._initialHeight,delete this._initialTop,delete this._initialLeft,delete this._minWidth,delete this._cachedMinHeight,this._detachMouseResizeHandlers()}_handleDragStart(e){this.draggable&&e.preventDefault()}_attachMouseResizeHandlers(){window.addEventListener("mousemove",this._resizeMouseMoveHandler),window.addEventListener("mouseup",this._resizeMouseUpHandler),this.addEventListener("ui5-before-close",this._revertSize,{once:!0})}_detachMouseResizeHandlers(){window.removeEventListener("mousemove",this._resizeMouseMoveHandler),window.removeEventListener("mouseup",this._resizeMouseUpHandler)}};gk([CT()],yk.prototype,"headerText",void 0),gk([CT({type:Boolean})],yk.prototype,"stretch",void 0),gk([CT({type:Boolean})],yk.prototype,"draggable",void 0),gk([CT({type:Boolean})],yk.prototype,"resizable",void 0),gk([CT()],yk.prototype,"state",void 0),gk([TT()],yk.prototype,"header",void 0),gk([TT()],yk.prototype,"footer",void 0),gk([xM("@ui5/webcomponents")],yk,"i18nBundle",void 0),yk=mk=gk([ST({tag:"ui5-dialog",template:function(e,t,i){return vM`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${gM(this.styles.root)}" class="${mM(this.classes.root)}" role="${_M(this._role)}" aria-modal="${_M(this._ariaModal)}" aria-label="${_M(this._ariaLabel)}" aria-labelledby="${_M(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToLast}></span>${this._displayHeader?rk.call(this,e,t,i):void 0}<div style="${gM(this.styles.content)}" class="${mM(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div>${this.footer.length?pk.call(this,e,t,i):void 0}${this._showResizeHandle?fk.call(this,e,t,i):void 0}<span class="last-fe" data-ui5-focus-trap role="none" tabindex="0" @focusin=${this.forwardToFirst}></span></section> `},styles:[NR.styles,eP,{packageName:"@ui5/webcomponents",fileName:"themes/Dialog.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{min-width:20rem;min-height:6rem;max-height:94%;max-width:90%;flex-direction:column;box-shadow:var(--sapContent_Shadow3);border-radius:var(--sapElement_BorderCornerRadius)}:host([stretch]){width:90%;height:94%}:host([stretch][on-phone]){width:100%;height:100%;max-height:100%;max-width:100%;border-radius:0}:host([draggable]) .ui5-popup-header-root,:host([draggable]) ::slotted([slot="header"]){cursor:move}:host([draggable]) .ui5-popup-header-root *{cursor:auto}:host([draggable]) .ui5-popup-root{user-select:text}::slotted([slot="header"]){max-width:100%}.ui5-popup-root{display:flex;flex-direction:column;max-width:100vw}.ui5-popup-header-root{position:relative}.ui5-popup-header-root:before{content:"";position:absolute;inset-block-start:auto;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;height:var(--_ui5-v2-4-0_dialog_header_state_line_height);background:var(--sapObjectHeader_BorderColor)}:host([state="Negative"]) .ui5-popup-header-root:before{background:var(--sapErrorBorderColor)}:host([state="Information"]) .ui5-popup-header-root:before{background:var(--sapInformationBorderColor)}:host([state="Positive"]) .ui5-popup-header-root:before{background:var(--sapSuccessBorderColor)}:host([state="Critical"]) .ui5-popup-header-root:before{background:var(--sapWarningBorderColor)}.ui5-dialog-value-state-icon{margin-inline-end:.5rem;flex-shrink:0}:host([state="Negative"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_error_state_icon_color)}:host([state="Information"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_information_state_icon_color)}:host([state="Positive"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_success_state_icon_color)}:host([state="Critical"]) .ui5-dialog-value-state-icon{color:var(--_ui5-v2-4-0_dialog_header_warning_state_icon_color)}.ui5-popup-header-root{outline:none}:host([desktop]) .ui5-popup-header-root:focus:after,.ui5-popup-header-root:focus-visible:after{content:"";position:absolute;left:var(--_ui5-v2-4-0_dialog_header_focus_left_offset);bottom:var(--_ui5-v2-4-0_dialog_header_focus_bottom_offset);right:var(--_ui5-v2-4-0_dialog_header_focus_right_offset);top:var(--_ui5-v2-4-0_dialog_header_focus_top_offset);border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_dialog_header_border_radius) var(--_ui5-v2-4-0_dialog_header_border_radius) 0 0;pointer-events:none}:host([stretch]) .ui5-popup-content{width:100%;height:100%}.ui5-popup-content{min-height:var(--_ui5-v2-4-0_dialog_content_min_height);flex:1 1 auto}.ui5-popup-resize-handle{position:absolute;bottom:-.5rem;inset-inline-end:-.5rem;cursor:var(--_ui5-v2-4-0_dialog_resize_cursor);width:1.5rem;height:1.5rem;border-radius:50%}.ui5-popup-resize-handle [ui5-icon]{color:var(--sapButton_Lite_TextColor)}::slotted([slot="footer"]){height:var(--_ui5-v2-4-0_dialog_footer_height)}::slotted([slot="footer"][ui5-bar][design="Footer"]){border-top:none}::slotted([slot="header"][ui5-bar]){box-shadow:none}::slotted([slot="footer"][ui5-toolbar]){border:0}:host::backdrop{background-color:var(--_ui5-v2-4-0_popup_block_layer_background);opacity:var(--_ui5-v2-4-0_popup_block_layer_opacity)}.ui5-block-layer{display:block}\n'},WB()],dependencies:[cB,...NR.dependencies]})],yk),yk.define();const Ak=yk;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var bk,xk=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let wk=bk=class extends oP{constructor(){super(),this.contentOnlyOnDesktop=!1,this._hideHeader=!1,this._hideCloseButton=!1}async openPopup(){DC()?this._dialog&&(this._dialog.open=!0):await super.openPopup()}async _show(){if(!DC())return super._show()}closePopup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;DC()?null==(n=this._dialog)||n.closePopup(e,t,i):super.closePopup(e,t,i)}toggle(e){this.open?this.closePopup():(this.opener=e,this.open=!0)}get classes(){const e=super.classes;return e.header={"ui5-responsive-popover-header":!0,"ui5-responsive-popover-header-no-title":!this.headerText},e}get _dialog(){return this.shadowRoot.querySelector("[ui5-dialog]")}get contentDOM(){return DC()?this._dialog.contentDOM:super.contentDOM}get _isPhone(){return DC()}get _displayHeader(){return(DC()||!this.contentOnlyOnDesktop)&&super._displayHeader}get _displayFooter(){return DC()||!this.contentOnlyOnDesktop}get _closeDialogAriaLabel(){return bk.i18nBundle.getText(pI)}_beforeDialogOpen(e){this._opened=!0,this.open=!0,this._propagateDialogEvent(e)}_afterDialogClose(e){this._opened=!1,this.open=!1,this._propagateDialogEvent(e)}_propagateDialogEvent(e){const t=e.type.replace("ui5-","");this.fireDecoratorEvent(t,e.detail)}get isModal(){return DC()?this._dialog.isModal:super.isModal}};xk([CT({type:Boolean})],wk.prototype,"contentOnlyOnDesktop",void 0),xk([CT({type:Boolean})],wk.prototype,"_hideHeader",void 0),xk([CT({type:Boolean})],wk.prototype,"_hideCloseButton",void 0),xk([xM("@ui5/webcomponents")],wk,"i18nBundle",void 0),wk=bk=xk([ST({tag:"ui5-responsive-popover",styles:[oP.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ResponsivePopover.css.ts",content:":host{--_ui5-v2-4-0_input_width: 100%;min-width:6.25rem;min-height:2rem}:host([on-phone]){display:contents}.ui5-responsive-popover-header{height:var(--_ui5-v2-4-0-responsive_popover_header_height);display:flex;justify-content:var(--_ui5-v2-4-0_popup_header_prop_header_text_alignment);align-items:center;width:100%}.ui5-responsive-popover-header-text{width:calc(100% - var(--_ui5-v2-4-0_button_base_min_width))}.ui5-responsive-popover-header-no-title{justify-content:flex-end}\n"}],template:function(e,t,i){return vM`${this._isPhone?qP.call(this,e,t,i):ZP.call(this,e,t,i)}`},dependencies:[...oP.dependencies,RB,Ak]})],wk),wk.define();const Sk=wk;var Ck,Ek=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let Tk=Ck=class extends xT{constructor(){super(),this.showRecentColors=!1,this.showMoreColors=!1,this.showDefaultColor=!1,this.open=!1}get responsivePopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}get respPopover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}closePopover(){this.open=!1}onAfterClose(){this.closePopover(),this.fireDecoratorEvent("close")}onAfterOpen(){var e;const t=this._colorPalette;t._currentlySelected?null==(e=t._currentlySelected)||e.focus():t.showRecentColors&&t.recentColorsElements.length?t.recentColorsElements[0].focus():t.showDefaultColor&&t.colorPaletteNavigationElements[0].focus(),t.allColorsInPalette.forEach((e=>{const t=e.offsetHeight+4;e.style.setProperty(IS("--_ui5_color_palette_item_height"),`${t}px`)}))}onSelectedColor(e){this.closePopover(),this.fireDecoratorEvent("item-click",e.detail)}get _colorPalette(){return this.responsivePopover.content[0].querySelector("[ui5-color-palette]")}isOpen(){return this.open}get colorPaletteColors(){return this.getSlottedNodes("colors")}get _colorPaletteTitle(){return Ck.i18nBundle.getText(NM)}get _cancelButtonLabel(){return Ck.i18nBundle.getText(FM)}get _open(){return this.open||void 0}};Ek([CT({type:Boolean})],Tk.prototype,"showRecentColors",void 0),Ek([CT({type:Boolean})],Tk.prototype,"showMoreColors",void 0),Ek([CT({type:Boolean})],Tk.prototype,"showDefaultColor",void 0),Ek([CT()],Tk.prototype,"defaultColor",void 0),Ek([CT({type:Boolean})],Tk.prototype,"open",void 0),Ek([CT({converter:XB})],Tk.prototype,"opener",void 0),Ek([TT({default:!0,type:HTMLElement,individualSlots:!0})],Tk.prototype,"colors",void 0),Ek([xM("@ui5/webcomponents")],Tk,"i18nBundle",void 0),Tk=Ck=Ek([ST({tag:"ui5-color-palette-popover",renderer:AM,styles:[jP,{packageName:"@ui5/webcomponents",fileName:"themes/ColorPalettePopover.css.ts",content:".ui5-cp-header{width:100%;height:var(--_ui5-v2-4-0_color-palette-button-height);display:flex;align-items:center}.ui5-cp-footer{width:100%;display:flex;justify-content:flex-end;align-items:center;margin:.1875rem 0}[ui5-responsive-popover]::part(content){padding:0}.ui5-cp-item-container{padding:.3125rem .6875rem}\n"}],template:function(e,t,i){return i?vM`<${bM("ui5-responsive-popover",t,i)} hide-arrow content-only-on-desktop placement="Bottom" .opener="${_M(this.opener)}" ?open="${this._open}" @ui5-close="${_M(this.onAfterClose)}" @ui5-open="${_M(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><${bM("ui5-title",t,i)} level="H1" wrapping-type="None">${_M(this._colorPaletteTitle)}</${bM("ui5-title",t,i)}></div><div><${bM("ui5-color-palette",t,i)} ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${_M(this.defaultColor)}" popup-mode @ui5-item-click="${_M(this.onSelectedColor)}">${fM(this.colorPaletteColors,((e,t)=>e._id||t),((n,r)=>QP.call(this,e,t,i,n,r)))}</${bM("ui5-color-palette",t,i)}></div><div slot="footer" class="ui5-cp-footer"><${bM("ui5-button",t,i)} design="Transparent" @click="${this.closePopover}">${_M(this._cancelButtonLabel)}</${bM("ui5-button",t,i)}></div></${bM("ui5-responsive-popover",t,i)}>`:vM`<ui5-responsive-popover hide-arrow content-only-on-desktop placement="Bottom" .opener="${_M(this.opener)}" ?open="${this._open}" @ui5-close="${_M(this.onAfterClose)}" @ui5-open="${_M(this.onAfterOpen)}"><div slot="header" class="ui5-cp-header"><ui5-title level="H1" wrapping-type="None">${_M(this._colorPaletteTitle)}</ui5-title></div><div><ui5-color-palette ?show-more-colors="${this.showMoreColors}" ?show-recent-colors="${this.showRecentColors}" ?show-default-color="${this.showDefaultColor}" default-color="${_M(this.defaultColor)}" popup-mode @ui5-item-click="${_M(this.onSelectedColor)}">${fM(this.colorPaletteColors,((e,t)=>e._id||t),((n,r)=>QP.call(this,e,t,i,n,r)))}</ui5-color-palette></div><div slot="footer" class="ui5-cp-footer"><ui5-button design="Transparent" @click="${this.closePopover}">${_M(this._cancelButtonLabel)}</ui5-button></div></ui5-responsive-popover>`},dependencies:[Sk,RB,xR,VP]}),ET("item-click",{detail:{color:{type:String}},bubbles:!0}),ET("close",{bubbles:!0})],Tk),Tk.define();const Mk=new Map([["aliceblue","f0f8ff"],["antiquewhite","faebd7"],["aqua","00ffff"],["aquamarine","7fffd4"],["azure","f0ffff"],["beige","f5f5dc"],["bisque","ffe4c4"],["black","000000"],["blanchedalmond","ffebcd"],["blue","0000ff"],["blueviolet","8a2be2"],["brown","a52a2a"],["burlywood","deb887"],["cadetblue","5f9ea0"],["chartreuse","7fff00"],["chocolate","d2691e"],["coral","ff7f50"],["cornflowerblue","6495ed"],["cornsilk","fff8dc"],["crimson","dc143c"],["cyan","00ffff"],["darkblue","00008b"],["darkcyan","008b8b"],["darkgoldenrod","b8860b"],["darkgray","a9a9a9"],["darkgrey","a9a9a9"],["darkgreen","006400"],["darkkhaki","bdb76b"],["darkmagenta","8b008b"],["darkolivegreen","556b2f"],["darkorange","ff8c00"],["darkorchid","9932cc"],["darkred","8b0000"],["darksalmon","e9967a"],["darkseagreen","8fbc8f"],["darkslateblue","483d8b"],["darkslategray","2f4f4f"],["darkslategrey","2f4f4f"],["darkturquoise","00ced1"],["darkviolet","9400d3"],["deeppink","ff1493"],["deepskyblue","00bfff"],["dimgray","696969"],["dimgrey","696969"],["dodgerblue","1e90ff"],["firebrick","b22222"],["floralwhite","fffaf0"],["forestgreen","228b22"],["fuchsia","ff00ff"],["gainsboro","dcdcdc"],["ghostwhite","f8f8ff"],["gold","ffd700"],["goldenrod","daa520"],["gray","808080"],["grey","808080"],["green","008000"],["greenyellow","adff2f"],["honeydew","f0fff0"],["hotpink","ff69b4"],["indianred","cd5c5c"],["indigo","4b0082"],["ivory","fffff0"],["khaki","f0e68c"],["lavender","e6e6fa"],["lavenderblush","fff0f5"],["lawngreen","7cfc00"],["lemonchiffon","fffacd"],["lightblue","add8e6"],["lightcoral","f08080"],["lightcyan","e0ffff"],["lightgoldenrodyellow","fafad2"],["lightgray","d3d3d3"],["lightgrey","d3d3d3"],["lightgreen","90ee90"],["lightpink","ffb6c1"],["lightsalmon","ffa07a"],["lightseagreen","20b2aa"],["lightskyblue","87cefa"],["lightslategray","778899"],["lightslategrey","778899"],["lightsteelblue","b0c4de"],["lightyellow","ffffe0"],["lime","00ff00"],["limegreen","32cd32"],["linen","faf0e6"],["magenta","ff00ff"],["maroon","800000"],["mediumaquamarine","66cdaa"],["mediumblue","0000cd"],["mediumorchid","ba55d3"],["mediumpurple","9370db"],["mediumseagreen","3cb371"],["mediumslateblue","7b68ee"],["mediumspringgreen","00fa9a"],["mediumturquoise","48d1cc"],["mediumvioletred","c71585"],["midnightblue","191970"],["mintcream","f5fffa"],["mistyrose","ffe4e1"],["moccasin","ffe4b5"],["navajowhite","ffdead"],["navy","000080"],["oldlace","fdf5e6"],["olive","808000"],["olivedrab","6b8e23"],["orange","ffa500"],["orangered","ff4500"],["orchid","da70d6"],["palegoldenrod","eee8aa"],["palegreen","98fb98"],["paleturquoise","afeeee"],["palevioletred","db7093"],["papayawhip","ffefd5"],["peachpuff","ffdab9"],["peru","cd853f"],["pink","ffc0cb"],["plum","dda0dd"],["powderblue","b0e0e6"],["purple","800080"],["red","ff0000"],["rosybrown","bc8f8f"],["royalblue","4169e1"],["saddlebrown","8b4513"],["salmon","fa8072"],["sandybrown","f4a460"],["seagreen","2e8b57"],["seashell","fff5ee"],["sienna","a0522d"],["silver","c0c0c0"],["skyblue","87ceeb"],["slateblue","6a5acd"],["slategray","708090"],["slategrey","708090"],["snow","fffafa"],["springgreen","00ff7f"],["steelblue","4682b4"],["tan","d2b48c"],["teal","008080"],["thistle","d8bfd8"],["tomato","ff6347"],["turquoise","40e0d0"],["violet","ee82ee"],["wheat","f5deb3"],["white","ffffff"],["whitesmoke","f5f5f5"],["yellow","ffff00"],["yellowgreen","9acd32"],["transparent","00000000"]]),Ik=e=>e.startsWith("rgba")?Bk(e):e.startsWith("rgb")?Rk(e):(0===e.indexOf("#")&&(e=4===e.length?`${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:e.slice(1,e.length)),Mk.has(e)&&(e=Mk.get(e)),kk(e)),Bk=e=>{const t=e.indexOf("("),i=[];for(let n=0;n<e.length;n++)","===e[n]&&i.push(n);return{r:parseInt(e.slice(t+1,i[0]).trim()),g:parseInt(e.slice(i[0]+1,i[1]).trim()),b:parseInt(e.slice(i[1]+1,i[2]).trim())}},Rk=e=>{const t=e.indexOf("("),i=e.indexOf(")"),n=[];for(let r=0;r<e.length;r++)","===e[r]&&n.push(r);return{r:parseInt(e.slice(t+1,n[0]).trim()),g:parseInt(e.slice(n[0]+1,n[1]).trim()),b:parseInt(e.slice(n[1]+1,i).trim())}},Pk=e=>{let t,i,n,r=100*e.s,o=100*e.l;r>100?r=1:r<0?r=0:r/=100,o>100?o=1:o<0?o=0:o/=100;const a=e.h,s=r*(1-Math.abs(2*o-1)),l=255*(o-.5*s),c=l+s*(1-Math.abs(a/60%2-1))*255,u=l+255*s;switch(Math.floor(a/60)){case 0:t=u,i=c,n=l;break;case 1:t=c,i=u,n=l;break;case 2:t=l,i=u,n=c;break;case 3:t=l,i=c,n=u;break;case 4:t=c,i=l,n=u;break;case 5:t=u,i=l,n=c;break;default:t=0,i=0,n=0}return{r:Math.round(t),g:Math.round(i),b:Math.round(n)}},kk=e=>({r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)});var Lk,Dk=/[\x00-\x2b\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff\u2028\u2029]/g,Nk=/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f-\x9f]/,Ok={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},Fk=function(e){var t=Ok[e];return t||(t=Nk.test(e)?"&#xfffd;":"&#x"+e.charCodeAt(0).toString(16)+";",Ok[e]=t),t};ME("not-editable",{pathData:"M443 104q5 7 5 12 0 6-5 11L118 453q-4 4-8 4L0 480l22-110q0-5 4-9L352 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L52 381l46 46zm158 116l32 32-66 63 66 66-32 32-63-66-65 66-33-32 66-66-66-63 33-32 65 64z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("not-editable",{pathData:"M504 94q7 7 7 18t-7 18L130 504q-8 8-18 8H26q-11 0-18.5-7.5T0 486v-86q0-9 7-18L381 8q8-8 18-8 12 0 18 8zM363 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50zm56 356q7 7 7 18t-7.5 18.5T486 512q-10 0-18-8l-37-37-38 37q-8 8-18 8-11 0-18.5-7.5T349 486q0-10 8-18l38-37-38-38q-8-8-8-18 0-11 7.5-18.5T375 349q10 0 18 8l38 37 37-37q8-8 18-8 11 0 18.5 7.5T512 375t-7 18l-38 38z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(e){e.Text="Text",e.Email="Email",e.Number="Number",e.Password="Password",e.Tel="Tel",e.URL="URL",e.Search="Search"}(Lk||(Lk={}));const Uk=Lk;function zk(e,t,i){return i?vM`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><${bM("ui5-icon",t,i)} part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${_M(this.clearIconAccessibleName)}"></${bM("ui5-icon",t,i)}></div>`:vM`<div @click=${this._clear} @mousedown=${this._iconMouseDown} class="ui5-input-clear-icon-wrapper inputIcon" tabindex="-1"><ui5-icon part="clear-icon" tabindex="-1" class="ui5-input-clear-icon" name="decline" accessible-name="${_M(this.clearIconAccessibleName)}"></ui5-icon></div>`}function Hk(e,t,i){return vM`<div class="ui5-input-icon-root"><slot name="icon"></slot></div>`}function Gk(e,t,i){return vM`<span id="suggestionsText" class="ui5-hidden-text">${_M(this.suggestionsText)}</span><span id="selectionText" class="ui5-hidden-text" aria-live="polite" role="status"></span><span id="suggestionsCount" class="ui5-hidden-text" aria-live="polite">${_M(this.availableSuggestionsCount)}</span>`}function Vk(e,t,i){return vM`<span id="descr" class="ui5-hidden-text">${_M(this.accInfo.input.ariaDescription)}</span>`}function Qk(e,t,i){return vM`<span id="valueStateDesc" class="ui5-hidden-text">${_M(this.ariaValueStateHiddenText)}</span>`}function jk(e,t,i){return i?vM`<${bM("ui5-responsive-popover",t,i)} class="${mM(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${gM(this.styles.suggestionsPopover)}" @ui5-open="${_M(this._afterOpenPicker)}" @ui5-close="${_M(this._afterClosePicker)}" @ui5-scroll="${_M(this._scroll)}" .open=${_M(this.open)} .opener=${_M(this)} accessible-name="${_M(this._popupLabel)}">${this._isPhone?qk.call(this,e,t,i):void 0}${this._isPhone?void 0:Kk.call(this,e,t,i)}<${bM("ui5-list",t,i)} separators="${_M(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${_M(this._handleSuggestionItemPress)}" @ui5-selection-change="${_M(this._handleSelectionChange)}"><slot></slot></${bM("ui5-list",t,i)}>${this._isPhone?iL.call(this,e,t,i):void 0}</${bM("ui5-responsive-popover",t,i)}>`:vM`<ui5-responsive-popover class="${mM(this.classes.popover)}" hide-arrow prevent-focus-restore prevent-initial-focus placement="Bottom" horizontal-align="Start" tabindex="-1" style="${gM(this.styles.suggestionsPopover)}" @ui5-open="${_M(this._afterOpenPicker)}" @ui5-close="${_M(this._afterClosePicker)}" @ui5-scroll="${_M(this._scroll)}" .open=${_M(this.open)} .opener=${_M(this)} accessible-name="${_M(this._popupLabel)}">${this._isPhone?qk.call(this,e,t,i):void 0}${this._isPhone?void 0:Kk.call(this,e,t,i)}<ui5-list separators="${_M(this.suggestionSeparators)}" selection-mode="Single" @mousedown="${this.onItemMouseDown}" @ui5-item-click="${_M(this._handleSuggestionItemPress)}" @ui5-selection-change="${_M(this._handleSelectionChange)}"><slot></slot></ui5-list>${this._isPhone?iL.call(this,e,t,i):void 0}</ui5-responsive-popover>`}function qk(e,t,i){return i?vM`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${_M(this._headerTitleText)}</span><${bM("ui5-button",t,i)} class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></${bM("ui5-button",t,i)}></div><div class="row"><div class="input-root-phone native-input-wrapper"><${bM("ui5-input",t,i)} class="ui5-input-inner-phone" type="${_M(this.inputType)}" .value="${_M(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${_M(this.placeholder)}" @ui5-input="${_M(this._handleInput)}" @ui5-change="${_M(this._handleChange)}"></${bM("ui5-input",t,i)}></div></div></div>${this.hasValueStateMessage?Wk.call(this,e,t,i):void 0}`:vM`<div slot="header" class="ui5-responsive-popover-header"><div class="row"><span>${_M(this._headerTitleText)}</span><ui5-button class="ui5-responsive-popover-close-btn" icon="decline" design="Transparent" @click="${this._closePicker}"></ui5-button></div><div class="row"><div class="input-root-phone native-input-wrapper"><ui5-input class="ui5-input-inner-phone" type="${_M(this.inputType)}" .value="${_M(this.value)}" ?show-clear-icon=${this.showClearIcon} placeholder="${_M(this.placeholder)}" @ui5-input="${_M(this._handleInput)}" @ui5-change="${_M(this._handleChange)}"></ui5-input></div></div></div>${this.hasValueStateMessage?Wk.call(this,e,t,i):void 0}`}function Wk(e,t,i){return i?vM`<div class="${mM(this.classes.popoverValueState)}" style="${gM(this.styles.suggestionPopoverHeader)}"><${bM("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></${bM("ui5-icon",t,i)}>${this.open?$k.call(this,e,t,i):void 0}</div>`:vM`<div class="${mM(this.classes.popoverValueState)}" style="${gM(this.styles.suggestionPopoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?$k.call(this,e,t,i):void 0}</div>`}function $k(e,t,i){return vM`${this.shouldDisplayDefaultValueStateMessage?Xk.call(this,e,t,i):Yk.call(this,e,t,i)}`}function Xk(e,t,i){return vM`${_M(this.valueStateText)}`}function Yk(e,t,i){return vM`<slot name="valueStateMessage"></slot>`}function Kk(e,t,i){return vM`${this.hasValueStateMessage?Zk.call(this,e,t,i):void 0}`}function Zk(e,t,i){return i?vM`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${mM(this.classes.popoverValueState)}" style=${gM(this.styles.suggestionPopoverHeader)}><${bM("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></${bM("ui5-icon",t,i)}>${this.open?Jk.call(this,e,t,i):void 0}</div>`:vM`<div slot="header" ?focused=${this._isValueStateFocused} class="ui5-responsive-popover-header ${mM(this.classes.popoverValueState)}" style=${gM(this.styles.suggestionPopoverHeader)}><ui5-icon class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></ui5-icon>${this.open?Jk.call(this,e,t,i):void 0}</div>`}function Jk(e,t,i){return vM`${this.shouldDisplayDefaultValueStateMessage?eL.call(this,e,t,i):tL.call(this,e,t,i)}`}function eL(e,t,i){return vM`${_M(this.valueStateText)}`}function tL(e,t,i){return vM`<slot name="valueStateMessage"></slot>`}function iL(e,t,i){return i?vM`<div slot="footer" class="ui5-responsive-popover-footer"><${bM("ui5-button",t,i)} design="Transparent" @click="${this._closePicker}">OK</${bM("ui5-button",t,i)}></div>`:vM`<div slot="footer" class="ui5-responsive-popover-footer"><ui5-button design="Transparent" @click="${this._closePicker}">OK</ui5-button></div>`}function nL(e,t,i){return i?vM`<${bM("ui5-popover",t,i)} skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${_M(this._valueStatePopoverHorizontalAlign)}" .opener=${_M(this)} .open=${_M(this.valueStateOpen)} @ui5-close="${_M(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${mM(this.classes.popoverValueState)}" style="${gM(this.styles.popoverHeader)}"><${bM("ui5-icon",t,i)} class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></${bM("ui5-icon",t,i)}>${this.valueStateOpen?rL.call(this,e,t,i):void 0}</div></${bM("ui5-popover",t,i)}>`:vM`<ui5-popover skip-registry-update prevent-initial-focus prevent-focus-restore hide-arrow class="ui5-valuestatemessage-popover" placement="Bottom" tabindex="-1" horizontal-align="${_M(this._valueStatePopoverHorizontalAlign)}" .opener=${_M(this)} .open=${_M(this.valueStateOpen)} @ui5-close="${_M(this._handleValueStatePopoverAfterClose)}"><div slot="header" class="${mM(this.classes.popoverValueState)}" style="${gM(this.styles.popoverHeader)}"><ui5-icon class="ui5-input-value-state-message-icon" name="${_M(this._valueStateMessageInputIcon)}"></ui5-icon>${this.valueStateOpen?rL.call(this,e,t,i):void 0}</div></ui5-popover>`}function rL(e,t,i){return vM`${this.shouldDisplayDefaultValueStateMessage?oL.call(this,e,t,i):aL.call(this,e,t,i)}`}function oL(e,t,i){return vM`${_M(this.valueStateText)}`}function aL(e,t,i){return vM`<slot name="valueStateMessage"></slot>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var sL,lL,cL,uL=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};!function(e){e.CHANGE="change",e.INPUT="input",e.SELECTION_CHANGE="selection-change"}(lL||(lL={})),function(e){e.ACTION_ENTER="enter",e.ACTION_USER_INPUT="input"}(cL||(cL={}));let hL=sL=class extends xT{get formValidityMessage(){return sL.i18nBundle.getText(FI)}get _effectiveShowSuggestions(){return!(!this.showSuggestions||!this.Suggestions)}get formValidity(){return{valueMissing:this.required&&!this.value}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.disabled=!1,this.highlight=!1,this.readonly=!1,this.required=!1,this.noTypeahead=!1,this.type="Text",this.value="",this._innerValue="",this.valueState="None",this.showSuggestions=!1,this.showClearIcon=!1,this.open=!1,this._effectiveShowClearIcon=!1,this.focused=!1,this.valueStateOpen=!1,this._isValueStateFocused=!1,this._inputAccInfo={},this._nativeInputAttributes={},this._inputIconFocused=!1,this.hasSuggestionItemSelected=!1,this.valueBeforeItemSelection="",this.valueBeforeSelectionStart="",this.previousValue="",this.firstRendering=!0,this.typedInValue="",this.lastConfirmedValue="",this.isTyping=!1,this._isLatestValueFromSuggestions=!1,this._handleResizeBound=this._handleResize.bind(this),this._keepInnerValue=!1,this._focusedAfterClear=!1}onEnterDOM(){sR.register(this,this._handleResizeBound),((e,t)=>{if(GI.has(e))return;const i=qI(e),n=(e=>t=>{if(!t||"property"!==t.type||"accessibleNameRef"!==t.name)return;const i=GI.get(e);if(!i)return;const n=i.observedElements,r=qI(e);n.forEach((e=>{r.includes(e)||YI(i,e)})),r.forEach((e=>{n.includes(e)||(XI(i,e),i.observedElements.push(e))})),null==i||i.callback()})(e),r={host:e,observedElements:i,callback:t,invalidationCallback:n};GI.set(e,r),e.attachInvalidate(n),i.forEach((e=>{XI(r,e)})),t()})(this,this._updateAssociatedLabelsTexts.bind(this))}onExitDOM(){sR.deregister(this,this._handleResizeBound),(e=>{const t=GI.get(e);t&&([...t.observedElements].forEach((e=>{YI(t,e)})),e.detachInvalidate(t.invalidationCallback),GI.delete(e))})(this)}_highlightSuggestionItem(e){var t;e.markupText=this.typedInValue?null==(t=this.Suggestions)?void 0:t.hightlightInput(e.text||"",this.typedInValue):(e.text||"").replace(Dk,Fk)}_isGroupItem(e){return e.hasAttribute("ui5-suggestion-item-group")}onBeforeRendering(){this._keepInnerValue||(this._innerValue=null===this.value?"":this.value),this.showSuggestions&&(this.enableSuggestions(),this._flattenItems.forEach((e=>{var t;e.hasAttribute("ui5-suggestion-item")?this._highlightSuggestionItem(e):this._isGroupItem(e)&&(null==(t=e.items)||t.forEach((e=>{this._highlightSuggestionItem(e)})))}))),this._effectiveShowClearIcon=this.showClearIcon&&!!this.value&&!this.readonly&&!this.disabled,this.style.setProperty(IS("--_ui5-input-icons-count"),`${this.iconsCount}`);const e=!!this._flattenItems.length,t=!!this.value,i=this.shadowRoot.querySelector("input")===nM();this.shouldDisplayOnlyValueStateMessage?this.openValueStatePopover():this.closeValueStatePopover(),this.disabled||this.readonly?this.open=!1:this._isPhone||(this.open=e&&(this.open||t&&i&&this.isTyping));const n=this.value,r=this.getInputDOMRefSync();if(!r||!n)return;const o=r.selectionEnd-r.selectionStart;if(this._shouldAutocomplete&&!TC.android&&!TC.androidPhone&&!o&&!this._isKeyNavigation){const e=this._getFirstMatchingItem(n);e&&this._handleTypeAhead(e)}}onAfterRendering(){var e;const t=this.getInputDOMRefSync();this.showSuggestions&&(null==(e=this.Suggestions)?void 0:e._getPicker())&&(this._listWidth=this.Suggestions._getListWidth()),this._performTextSelection&&(t.value!==this._innerValue&&(t.value=this._innerValue),this.typedInValue.length&&this.value.length&&t.setSelectionRange(this.typedInValue.length,this.value.length),this.fireDecoratorEvent("type-ahead")),this._performTextSelection=!1}_onkeydown(e){return this._isKeyNavigation=!0,this._shouldAutocomplete=!(this.noTypeahead||(t=e,(t.key?"Backspace"===t.key:8===t.keyCode)&&!eM(t)||$T(e)||jT(e))),kT(e)?this._handleUp(e):LT(e)?this._handleDown(e):IT(e)?this._handleSpace(e):qT(e)?this._handleTab():MT(e)?this._handleEnter(e):XT(e)?this._handlePageUp(e):YT(e)?this._handlePageDown(e):VT(e)?this._handleHome(e):QT(e)?this._handleEnd(e):jT(e)?this._handleEscape():(this.showSuggestions&&this._clearPopoverFocusAndSelection(),this._keyDown=!0,void(this._isKeyNavigation=!1));var t}_onkeyup(e){$T(e)&&(this.value=e.target.value),this._keyDown=!1}_handleUp(e){var t;(null==(t=this.Suggestions)?void 0:t.isOpened())&&this.Suggestions.onUp(e)}_handleDown(e){var t;(null==(t=this.Suggestions)?void 0:t.isOpened())&&this.Suggestions.onDown(e)}_handleSpace(e){this.Suggestions&&this.Suggestions.onSpace(e)}_handleTab(){this.Suggestions&&this.previousValue!==this.value&&this.Suggestions.onTab()}_handleEnter(e){var t;const i=!!(null==(t=this.Suggestions)?void 0:t.onEnter(e)),n=this.getInputDOMRefSync(),r=this._selectableItems.find((e=>e.text===this.value));if(r){const e=r.text||"";n.setSelectionRange(e.length,e.length),i||(this.fireSelectionChange(r,!0),this.acceptSuggestion(r,!0),this.open=!1)}if(!this._isPhone||this._flattenItems.length||this.isTypeNumber||n.setSelectionRange(this.value.length,this.value.length),!i)return this.lastConfirmedValue=this.value,void(this._internals.form&&aT(this));this.focused=!0}_handlePageUp(e){var t;this._isSuggestionsFocused?null==(t=this.Suggestions)||t.onPageUp(e):e.preventDefault()}_handlePageDown(e){var t;this._isSuggestionsFocused?null==(t=this.Suggestions)||t.onPageDown(e):e.preventDefault()}_handleHome(e){var t;this._isSuggestionsFocused&&(null==(t=this.Suggestions)||t.onHome(e))}_handleEnd(e){var t;this._isSuggestionsFocused&&(null==(t=this.Suggestions)||t.onEnd(e))}_handleEscape(){var e;const t=this.showSuggestions&&!!this.Suggestions&&this.open,i=this.getInputDOMRefSync(),n=i.selectionEnd-i.selectionStart>0;if(this.isTyping=!1,t){if(t&&(null==(e=this.Suggestions)?void 0:e._isItemOnTarget()))return this.value=this.typedInValue||this.valueBeforeSelectionStart,void(this.focused=!0);n&&(this.value=this.typedInValue),this._isValueStateFocused&&(this._isValueStateFocused=!1,this.focused=!0)}else this.value=this.lastConfirmedValue?this.lastConfirmedValue:this.previousValue}_onfocusin(e){this.focused=!0,this._focusedAfterClear||(this.previousValue=this.value),this.valueBeforeSelectionStart=this.value,this._inputIconFocused=!!e.target&&e.target===this.querySelector("[ui5-icon]"),this._focusedAfterClear=!1}innerFocusIn(){}_onfocusout(e){var t;const i=e.relatedTarget;(null==(t=this.Suggestions)?void 0:t._getPicker().contains(i))||this.contains(i)||this.getSlottedNodes("valueStateMessage").some((e=>e.contains(i)))||(this._keepInnerValue=!1,this.focused=!1,this.showClearIcon&&!this._effectiveShowClearIcon&&(this._clearIconClicked=!1,this._handleChange()),this.open=!1,this._clearPopoverFocusAndSelection(),this._clearIconClicked||(this.previousValue=""),this.lastConfirmedValue="",this.isTyping=!1)}_clearPopoverFocusAndSelection(){var e,t;this.showSuggestions&&this.Suggestions&&(this._isValueStateFocused=!1,this.hasSuggestionItemSelected=!1,null==(e=this.Suggestions)||e._deselectItems(),null==(t=this.Suggestions)||t._clearItemFocus())}_click(){DC()&&!this.readonly&&this.Suggestions&&(this.blur(),this.open=!0)}_handleChange(){var e;this._clearIconClicked?this._clearIconClicked=!1:this.previousValue!==this.getInputDOMRefSync().value&&((null==(e=this.Suggestions)?void 0:e._getPicker().open)&&this._flattenItems.some((e=>e.hasAttribute("ui5-suggestion-item")&&e.selected))?this._changeToBeFired=!0:(()=>{this.fireDecoratorEvent(lL.CHANGE),this.previousValue=this.value,this.typedInValue=this.value})())}_clear(){const e=this.value;this.value="",this.fireDecoratorEvent(lL.INPUT,{inputType:""})?this._isPhone||(this.fireResetSelectionChange(),this.focus(),this._focusedAfterClear=!0):this.value=e}_iconMouseDown(){this._clearIconClicked=!0}_scroll(e){this.fireDecoratorEvent("suggestion-scroll",{scrollTop:e.detail.scrollTop,scrollContainer:e.detail.targetRef})}_handleSelect(){this.fireDecoratorEvent("select",{})}_handleInput(e){const t=this.getInputDOMRefSync(),i=this.value&&this.isTypeNumber&&!t.value,n=e.inputType||e.detail&&e.detail.inputType||"";if(this._keepInnerValue=!1,this._shouldAutocomplete=!["deleteWordBackward","deleteWordForward","deleteSoftLineBackward","deleteSoftLineForward","deleteEntireSoftLine","deleteHardLineBackward","deleteHardLineForward","deleteByDrag","deleteByCut","deleteContent","deleteContentBackward","deleteContentForward","historyUndo"].includes(n)&&!this.noTypeahead,e instanceof InputEvent){const t=this.isTypeNumber&&("deleteContentForward"===e.inputType||"deleteContentBackward"===e.inputType)&&!e.target.value.includes(".")&&this.value.includes("."),n=i&&"e"===e.data,r=i&&this.value.startsWith("-")&&2===this.value.length&&("deleteContentForward"===e.inputType||"deleteContentBackward"===e.inputType);(t||n||r)&&(this.value=e.target.value,this._keepInnerValue=!0)}e.target===t&&(this.focused=!0,e.stopImmediatePropagation()),this.fireEventByAction(cL.ACTION_ENTER,e),this.hasSuggestionItemSelected=!1,this._isValueStateFocused=!1,this.Suggestions&&this.Suggestions.updateSelectedItemPosition(-1),this.isTyping=!0}_startsWithMatchingItems(e){return t=e,this._selectableItems.filter((e=>(e.text||"").toLowerCase().startsWith(t.toLowerCase())));var t}_getFirstMatchingItem(e){if(!this._flattenItems.length)return;const t=this._startsWithMatchingItems(e).filter((e=>!this._isGroupItem(e)));return t.length?t[0]:void 0}_handleSelectionChange(e){var t;null==(t=this.Suggestions)||t.onItemPress(e)}_handleTypeAhead(e){const t=e.text?e.text:"";this._innerValue=t,this.value=t,this._performTextSelection=!0,this._shouldAutocomplete=!1}_handleResize(){this._inputWidth=this.offsetWidth}_updateAssociatedLabelsTexts(){this._associatedLabelsTexts=(()=>{const e=[];if(WI(this).forEach((t=>{const i=t.textContent;i&&e.push(i)})),e.length)return e.join(" ")})(),this._accessibleLabelsRefTexts=jI(this)}_closePicker(){this.open=!1}_afterOpenPicker(){DC()&&this.getInputDOMRef().focus(),this._handlePickerAfterOpen()}_afterClosePicker(){this.announceSelectedItem(),DC()&&(this.blur(),this.focused=!1),this._changeToBeFired&&(this.fireDecoratorEvent(lL.CHANGE),this._changeToBeFired=!1),this.open=!1,this.isTyping=!1,this.hasSuggestionItemSelected&&this.focus(),this._handlePickerAfterClose()}_handlePickerAfterOpen(){var e;null==(e=this.Suggestions)||e._onOpen(),this.fireDecoratorEvent("open")}_handlePickerAfterClose(){var e;null==(e=this.Suggestions)||e._onClose(),this.fireDecoratorEvent("close")}openValueStatePopover(){this.valueStateOpen=!0}closeValueStatePopover(){this.valueStateOpen=!1}_handleValueStatePopoverAfterClose(){this.valueStateOpen=!1}_getValueStatePopover(){return this.shadowRoot.querySelector("[ui5-popover]")}enableSuggestions(){if(this.Suggestions)return;const e=lS("InputSuggestions");e.i18nBundle=sL.i18nBundle,e&&(this.Suggestions=new e(this,"suggestionItems",!0,!1))}acceptSuggestion(e,t){if(this._isGroupItem(e))return;const i=this.typedInValue||this.value,n=e.text||"",r=t?this.valueBeforeItemSelection!==n:i!==n;this.hasSuggestionItemSelected=!0,this.value=n,r&&this.previousValue!==n&&(this.valueBeforeItemSelection=n,this.lastConfirmedValue=n,this._performTextSelection=!0,this.fireDecoratorEvent(lL.CHANGE),this.typedInValue=this.value,this.previousValue=this.value),this.valueBeforeSelectionStart="",this.isTyping=!1,this.open=!1}updateValueOnSelect(e){const t=this._isGroupItem(e)?this.valueBeforeSelectionStart:e.text;this.value=t||"",this._performTextSelection=!0}fireEventByAction(e,t){const i=this.value,n=this.getInputDOMRefSync();if(this.disabled||this.readonly)return;const r=this.getInputValue(),o=e===cL.ACTION_ENTER;if(this.value=r,this.typedInValue=r,this.valueBeforeSelectionStart=r,o){const e=t.inputType||"";!this.fireDecoratorEvent(lL.INPUT,{inputType:e})&&(this.value=i,n&&(n.value=i)),this.fireDecoratorEvent("value-changed"),this.fireResetSelectionChange()}}getInputValue(){return this.getDomRef()?this.getInputDOMRef().value:""}getInputDOMRef(){return DC()&&this.Suggestions?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone"):this.nativeInput}getInputDOMRefSync(){var e;return DC()&&(null==(e=this.Suggestions)?void 0:e._getPicker())?this.Suggestions._getPicker().querySelector(".ui5-input-inner-phone").shadowRoot.querySelector("input"):this.nativeInput}get nativeInput(){const e=this.getDomRef();return e?e.querySelector("input"):null}get nativeInputWidth(){return this.nativeInput?this.nativeInput.offsetWidth:0}isSuggestionsScrollable(){var e;return this.Suggestions?null==(e=this.Suggestions)?void 0:e._isScrollable():Promise.resolve(!1)}onItemMouseDown(e){e.preventDefault()}onItemSelected(e,t){!t&&!(null==e?void 0:e.focused)&&this.valueBeforeItemSelection!==e.text&&this.fireSelectionChange(e,!0),this.acceptSuggestion(e,t)}_handleSuggestionItemPress(e){var t;null==(t=this.Suggestions)||t.onItemPress(e)}onItemSelect(e){this.valueBeforeItemSelection=this.value,this.updateValueOnSelect(e),this.announceSelectedItem(),this.fireSelectionChange(e,!0)}get _flattenItems(){return this.getSlottedNodes("suggestionItems").flatMap((e=>this._isGroupItem(e)?[e,...e.items]:[e]))}get _selectableItems(){return this._flattenItems.filter((e=>!this._isGroupItem(e)))}get valueStateTypeMappings(){return{Positive:sL.i18nBundle.getText(bI),Information:sL.i18nBundle.getText(xI),Negative:sL.i18nBundle.getText(yI),Critical:sL.i18nBundle.getText(AI)}}valueStateTextMappings(){return{Positive:sL.i18nBundle.getText(EI),Information:sL.i18nBundle.getText(CI),Negative:sL.i18nBundle.getText(wI),Critical:sL.i18nBundle.getText(SI)}}announceSelectedItem(){const e=this.shadowRoot.querySelector("#selectionText");e&&(e.textContent=this.itemSelectionAnnounce)}fireSelectionChange(e,t){this.Suggestions&&(this.fireDecoratorEvent(lL.SELECTION_CHANGE,{item:e}),this._isLatestValueFromSuggestions=t)}fireResetSelectionChange(){this._isLatestValueFromSuggestions&&this.fireSelectionChange(null,!1)}get _readonly(){return this.readonly&&!this.disabled}get _headerTitleText(){return sL.i18nBundle.getText(JM)}get clearIconAccessibleName(){return sL.i18nBundle.getText(nI)}get _popupLabel(){return sL.i18nBundle.getText(hI)}get inputType(){return this.type.toLowerCase()}get isTypeNumber(){return this.type===Uk.Number}get suggestionsTextId(){return this.showSuggestions?"suggestionsText":""}get valueStateTextId(){return this.hasValueState?"valueStateDesc":""}get accInfo(){const e=this.showSuggestions?"dialog":void 0,t=this.showSuggestions?"list":void 0,i=this._inputAccInfo.ariaDescribedBy?`${this.suggestionsTextId} ${this.valueStateTextId} ${this._inputAccInfo.ariaDescribedBy}`.trim():`${this.suggestionsTextId} ${this.valueStateTextId}`.trim();return{input:{ariaRoledescription:this._inputAccInfo&&(this._inputAccInfo.ariaRoledescription||void 0),ariaDescribedBy:i||void 0,ariaInvalid:this.valueState===vP.Negative?"true":void 0,ariaHasPopup:this._inputAccInfo.ariaHasPopup?this._inputAccInfo.ariaHasPopup:e,ariaAutoComplete:this._inputAccInfo.ariaAutoComplete?this._inputAccInfo.ariaAutoComplete:t,role:this._inputAccInfo&&this._inputAccInfo.role,ariaControls:this._inputAccInfo&&this._inputAccInfo.ariaControls,ariaExpanded:this._inputAccInfo&&this._inputAccInfo.ariaExpanded,ariaDescription:this._inputAccInfo&&this._inputAccInfo.ariaDescription,ariaLabel:this._inputAccInfo&&this._inputAccInfo.ariaLabel||this._accessibleLabelsRefTexts||this.accessibleName||this._associatedLabelsTexts||void 0}}}get nativeInputAttributes(){return{min:this.isTypeNumber?this._nativeInputAttributes.min:void 0,max:this.isTypeNumber?this._nativeInputAttributes.max:void 0,step:this.isTypeNumber?this._nativeInputAttributes.step||"any":void 0}}get ariaValueStateHiddenText(){if(!this.hasValueState)return;const e=this.valueState!==vP.None?this.valueStateTypeMappings[this.valueState]:"";return this.shouldDisplayDefaultValueStateMessage?this.valueStateText?`${e} ${this.valueStateText}`:e:`${e}`.concat(" ",this.valueStateMessage.map((e=>e.textContent)).join(" "))}get itemSelectionAnnounce(){return this.Suggestions?this.Suggestions.itemSelectionAnnounce:""}get iconsCount(){return(this.icon?this.icon.length:0)+(Number(this._effectiveShowClearIcon)??0)}get classes(){return{popover:{"ui5-suggestions-popover":this.showSuggestions,"ui5-popover-with-value-state-header-phone":this._isPhone&&this.showSuggestions&&this.hasValueStateMessage,"ui5-popover-with-value-state-header":!this._isPhone&&this.showSuggestions&&this.hasValueStateMessage},popoverValueState:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage-header":!0,"ui5-valuestatemessage--success":this.valueState===vP.Positive,"ui5-valuestatemessage--error":this.valueState===vP.Negative,"ui5-valuestatemessage--warning":this.valueState===vP.Critical,"ui5-valuestatemessage--information":this.valueState===vP.Information}}}get styles(){const e=parseInt(getComputedStyle(document.documentElement).fontSize);return{popoverHeader:{"max-width":this._inputWidth?`${this._inputWidth}px`:""},suggestionPopoverHeader:{display:0===this._listWidth?"none":"inline-block",width:this._listWidth?`${this._listWidth}px`:""},suggestionsPopover:{"min-width":this._inputWidth?`${this._inputWidth}px`:"","max-width":this._inputWidth&&this._inputWidth/e>40?`${this._inputWidth}px`:"40rem"},innerInput:{padding:""}}}get suggestionSeparators(){return"None"}get shouldDisplayOnlyValueStateMessage(){return this.hasValueStateMessage&&!this.readonly&&!this.open&&this.focused}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateMessage}get hasValueState(){return this.valueState!==vP.None}get hasValueStateMessage(){return this.hasValueState&&this.valueState!==vP.Positive&&(!this._inputIconFocused||!(!this._isPhone||!this.Suggestions))}get valueStateText(){return this.valueState!==vP.None?this.valueStateTextMappings()[this.valueState]:void 0}get suggestionsText(){return sL.i18nBundle.getText(ZM)}get availableSuggestionsCount(){var e;if(this.showSuggestions&&(this.value||(null==(e=this.Suggestions)?void 0:e.isOpened()))){const e=this._selectableItems;switch(e.length){case 0:return sL.i18nBundle.getText(iI);case 1:return sL.i18nBundle.getText(eI);default:return sL.i18nBundle.getText(tI,e.length)}}}get step(){return this.isTypeNumber?"any":void 0}get _isPhone(){return DC()}get _isSuggestionsFocused(){var e;return!this.focused&&(null==(e=this.Suggestions)?void 0:e.isOpened())}get _placeholder(){return this.placeholder}get _valueStateInputIcon(){return this.valueState!==vP.None?`\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 20 20" fill="none">\n\t\t\t\t${{Negative:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20ZM7.70711 13.7071C7.31658 14.0976 6.68342 14.0976 6.29289 13.7071C5.90237 13.3166 5.90237 12.6834 6.29289 12.2929L8.58579 10L6.29289 7.70711C5.90237 7.31658 5.90237 6.68342 6.29289 6.29289C6.68342 5.90237 7.31658 5.90237 7.70711 6.29289L10 8.58579L12.2929 6.29289C12.6834 5.90237 13.3166 5.90237 13.7071 6.29289C14.0976 6.68342 14.0976 7.31658 13.7071 7.70711L11.4142 10L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L10 11.4142L7.70711 13.7071Z" fill="#EE3939"/>',Critical:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M11.8619 0.49298C11.6823 0.187541 11.3544 0 11 0C10.6456 0 10.3177 0.187541 10.1381 0.49298L0.138066 17.493C-0.0438112 17.8022 -0.0461447 18.1851 0.13195 18.4965C0.310046 18.8079 0.641283 19 1 19H21C21.3587 19 21.69 18.8079 21.868 18.4965C22.0461 18.1851 22.0438 17.8022 21.8619 17.493L11.8619 0.49298ZM11 6C11.5523 6 12 6.44772 12 7V10C12 10.5523 11.5523 11 11 11C10.4477 11 10 10.5523 10 10V7C10 6.44772 10.4477 6 11 6ZM11 16C11.8284 16 12.5 15.3284 12.5 14.5C12.5 13.6716 11.8284 13 11 13C10.1716 13 9.5 13.6716 9.5 14.5C9.5 15.3284 10.1716 16 11 16Z" fill="#F58B00"/>',Positive:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M0 10C0 15.5228 4.47715 20 10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10ZM14.7071 6.29289C14.3166 5.90237 13.6834 5.90237 13.2929 6.29289L8 11.5858L6.70711 10.2929C6.31658 9.90237 5.68342 9.90237 5.29289 10.2929C4.90237 10.6834 4.90237 11.3166 5.29289 11.7071L7.29289 13.7071C7.68342 14.0976 8.31658 14.0976 8.70711 13.7071L14.7071 7.70711C15.0976 7.31658 15.0976 6.68342 14.7071 6.29289Z" fill="#36A41D"/>',Information:'<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M3 0C1.34315 0 0 1.34315 0 3V15C0 16.6569 1.34315 18 3 18H15C16.6569 18 18 16.6569 18 15V3C18 1.34315 16.6569 0 15 0H3ZM9 6.5C9.82843 6.5 10.5 5.82843 10.5 5C10.5 4.17157 9.82843 3.5 9 3.5C8.17157 3.5 7.5 4.17157 7.5 5C7.5 5.82843 8.17157 6.5 9 6.5ZM9 8.5C9.55228 8.5 10 8.94772 10 9.5V13.5C10 14.0523 9.55228 14.5 9 14.5C8.44771 14.5 8 14.0523 8 13.5V9.5C8 8.94772 8.44771 8.5 9 8.5Z" fill="#1B90FF"/>'}[this.valueState]};\n\t\t\t</svg>\n\t\t\t`:""}get _valueStatePopoverHorizontalAlign(){return"rtl"!==this.effectiveDir?"Start":"End"}get _valueStateMessageInputIcon(){return this.valueState!==vP.None?{Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"}[this.valueState]:""}getCaretPosition(){return(e=>{let t=0;return(e.selectionStart||0===e.selectionStart)&&(t="backward"===e.selectionDirection?e.selectionStart:e.selectionEnd),t})(this.nativeInput)}setCaretPosition(e){((e,t)=>{e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()})(this.nativeInput,e)}removeFractionalPart(e){return e.includes(".")?e.slice(0,e.indexOf(".")):e.includes(",")?e.slice(0,e.indexOf(",")):e}};uL([CT({type:Boolean})],hL.prototype,"disabled",void 0),uL([CT({type:Boolean})],hL.prototype,"highlight",void 0),uL([CT()],hL.prototype,"placeholder",void 0),uL([CT({type:Boolean})],hL.prototype,"readonly",void 0),uL([CT({type:Boolean})],hL.prototype,"required",void 0),uL([CT({type:Boolean})],hL.prototype,"noTypeahead",void 0),uL([CT()],hL.prototype,"type",void 0),uL([CT()],hL.prototype,"value",void 0),uL([CT({noAttribute:!0})],hL.prototype,"_innerValue",void 0),uL([CT()],hL.prototype,"valueState",void 0),uL([CT()],hL.prototype,"name",void 0),uL([CT({type:Boolean})],hL.prototype,"showSuggestions",void 0),uL([CT({type:Number})],hL.prototype,"maxlength",void 0),uL([CT()],hL.prototype,"accessibleName",void 0),uL([CT()],hL.prototype,"accessibleNameRef",void 0),uL([CT({type:Boolean})],hL.prototype,"showClearIcon",void 0),uL([CT({type:Boolean})],hL.prototype,"open",void 0),uL([CT({type:Boolean})],hL.prototype,"_effectiveShowClearIcon",void 0),uL([CT({type:Boolean})],hL.prototype,"focused",void 0),uL([CT({type:Boolean})],hL.prototype,"valueStateOpen",void 0),uL([CT({type:Boolean})],hL.prototype,"_isValueStateFocused",void 0),uL([CT({type:Object})],hL.prototype,"_inputAccInfo",void 0),uL([CT({type:Object})],hL.prototype,"_nativeInputAttributes",void 0),uL([CT({type:Number})],hL.prototype,"_inputWidth",void 0),uL([CT({type:Number})],hL.prototype,"_listWidth",void 0),uL([CT({type:Boolean,noAttribute:!0})],hL.prototype,"_inputIconFocused",void 0),uL([CT({noAttribute:!0})],hL.prototype,"_associatedLabelsTexts",void 0),uL([CT({noAttribute:!0})],hL.prototype,"_accessibleLabelsRefTexts",void 0),uL([TT({type:HTMLElement,default:!0})],hL.prototype,"suggestionItems",void 0),uL([TT()],hL.prototype,"icon",void 0),uL([TT({type:HTMLElement,invalidateOnChildChange:!0})],hL.prototype,"valueStateMessage",void 0),uL([xM("@ui5/webcomponents")],hL,"i18nBundle",void 0),hL=sL=uL([ST({tag:"ui5-input",languageAware:!0,formAssociated:!0,renderer:AM,template:function(e,t,i){return vM`<div class="ui5-input-root ui5-input-focusable-element" part="root" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}"><div class="ui5-input-content"><input id="inner" part="input" class="ui5-input-inner" style="${gM(this.styles.innerInput)}" type="${_M(this.inputType)}" inner-input ?inner-input-with-icon="${this.icon.length}" ?disabled="${this.disabled}" ?readonly="${this._readonly}" .value="${_M(this._innerValue)}" placeholder="${_M(this._placeholder)}" maxlength="${_M(this.maxlength)}" role="${_M(this.accInfo.input.role)}" aria-controls="${_M(this.accInfo.input.ariaControls)}" aria-invalid="${_M(this.accInfo.input.ariaInvalid)}" aria-haspopup="${_M(this.accInfo.input.ariaHasPopup)}" aria-describedby="${_M(this.accInfo.input.ariaDescribedBy)}" aria-roledescription="${_M(this.accInfo.input.ariaRoledescription)}" aria-autocomplete="${_M(this.accInfo.input.ariaAutoComplete)}" aria-expanded="${_M(this.accInfo.input.ariaExpanded)}" aria-label="${_M(this.accInfo.input.ariaLabel)}" aria-required="${_M(this.required)}" autocomplete="off" @input="${this._handleInput}" @change="${this._handleChange}" @select="${this._handleSelect}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @click=${this._click} @focusin=${this.innerFocusIn} data-sap-focus-ref step="${_M(this.nativeInputAttributes.step)}" min="${_M(this.nativeInputAttributes.min)}" max="${_M(this.nativeInputAttributes.max)}" />${this._effectiveShowClearIcon?zk.call(this,e,t,i):void 0}${this.icon.length?Hk.call(this,e,t,i):void 0}<div class="ui5-input-value-state-icon">${Fw(this._valueStateInputIcon)}</div>${this._effectiveShowSuggestions?Gk.call(this,e,t,i):void 0}${this.accInfo.input.ariaDescription?Vk.call(this,e,t,i):void 0}${this.hasValueState?Qk.call(this,e,t,i):void 0}</div></div>${this._effectiveShowSuggestions?jk.call(this,e,t,i):void 0}${this.hasValueStateMessage?nL.call(this,e,t,i):void 0} `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/Input.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host(:not([hidden])){display:inline-block}:host{width:var(--_ui5-v2-4-0_input_width);min-width:calc(var(--_ui5-v2-4-0_input_min_width) + (var(--_ui5-v2-4-0-input-icons-count)*var(--_ui5-v2-4-0_input_icon_width)));margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;height:var(--_ui5-v2-4-0_input_height);color:var(--sapField_TextColor);font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);font-style:normal;border:var(--_ui5-v2-4-0-input-border);border-radius:var(--_ui5-v2-4-0_input_border_radius);box-sizing:border-box;text-align:start;transition:var(--_ui5-v2-4-0_input_transition);background:var(--sapField_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_background_color)}:host(:not([readonly])),:host([readonly][disabled]){box-shadow:var(--sapField_Shadow)}:host([focused]:not([opened])){border-color:var(--_ui5-v2-4-0_input_focused_border_color);background-color:var(--sapField_Focus_Background)}.ui5-input-focusable-element{position:relative}:host([focused]:not([opened])) .ui5-input-focusable-element:after{content:var(--ui5-v2-4-0_input_focus_pseudo_element_content);position:absolute;pointer-events:none;z-index:2;border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--_ui5-v2-4-0_input_focus_outline_color);border-radius:var(--_ui5-v2-4-0_input_focus_border_radius);top:var(--_ui5-v2-4-0_input_focus_offset);bottom:var(--_ui5-v2-4-0_input_focus_offset);left:var(--_ui5-v2-4-0_input_focus_offset);right:var(--_ui5-v2-4-0_input_focus_offset)}:host([focused][readonly]:not([opened])) .ui5-input-focusable-element:after{top:var(--_ui5-v2-4-0_input_readonly_focus_offset);bottom:var(--_ui5-v2-4-0_input_readonly_focus_offset);left:var(--_ui5-v2-4-0_input_readonly_focus_offset);right:var(--_ui5-v2-4-0_input_readonly_focus_offset);border-radius:var(--_ui5-v2-4-0_input_readonly_focus_border_radius)}.ui5-input-root:before{content:"";position:absolute;width:calc(100% - 2px);left:1px;bottom:-2px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:var(--_ui5-v2-4-0_input_bottom_border_height);transition:var(--_ui5-v2-4-0_input_transition);background-color:var(--_ui5-v2-4-0_input_bottom_border_color)}.ui5-input-root{width:100%;height:100%;position:relative;background:transparent;display:inline-block;outline:none;box-sizing:border-box;color:inherit;transition:border-color .2s ease-in-out;border-radius:var(--_ui5-v2-4-0_input_border_radius);overflow:hidden}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([disabled]) .ui5-input-root:before,:host([readonly]) .ui5-input-root:before{content:none}[inner-input]{background:transparent;color:inherit;border:none;font-style:inherit;-webkit-appearance:none;-moz-appearance:textfield;padding:var(--_ui5-v2-4-0_input_inner_padding);box-sizing:border-box;width:100%;text-overflow:ellipsis;flex:1;outline:none;font-size:inherit;font-family:inherit;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;text-align:inherit}[inner-input][inner-input-with-icon]{padding:var(--_ui5-v2-4-0_input_inner_padding_with_icon)}[inner-input][type=search]::-webkit-search-decoration,[inner-input][type=search]::-webkit-search-cancel-button,[inner-input][type=search]::-webkit-search-results-button,[inner-input][type=search]::-webkit-search-results-decoration{display:none}.ui5-input-value-state-icon{height:100%;display:var(--_ui5-v2-4-0-input-value-state-icon-display);align-items:center}.ui5-input-value-state-icon>svg{margin-right:8px}[inner-input]::selection{background:var(--sapSelectedColor);color:var(--sapContent_ContrastTextColor)}:host([disabled]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-webkit-input-placeholder{visibility:hidden}:host([disabled]) [inner-input]::-moz-placeholder{visibility:hidden}:host([readonly]) [inner-input]::-moz-placeholder{visibility:hidden}[inner-input]::-webkit-input-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}[inner-input]::-moz-placeholder{font-weight:400;font-style:var(--_ui5-v2-4-0_input_placeholder_style);color:var(--_ui5-v2-4-0_input_placeholder_color);padding-right:.125rem}:host([value-state="Negative"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Negative"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0-input_error_placeholder_color);font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-webkit-input-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Critical"]) [inner-input]::-moz-placeholder{font-weight:var(--_ui5-v2-4-0_input_value_state_error_warning_placeholder_font_weight)}:host([value-state="Positive"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Positive"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-webkit-input-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}:host([value-state="Information"]) [inner-input]::-moz-placeholder{color:var(--_ui5-v2-4-0_input_placeholder_color)}.ui5-input-content{height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:flex-end;overflow:hidden;outline:none;background:transparent;color:inherit;border-radius:var(--_ui5-v2-4-0_input_border_radius)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([value-state="None"]:not([readonly]):hover),:host(:not([value-state]):not([readonly]):hover){border:var(--_ui5-v2-4-0_input_hover_border);border-color:var(--_ui5-v2-4-0_input_focused_border_color);box-shadow:var(--sapField_Hover_Shadow);background:var(--sapField_Hover_BackgroundStyle);background-color:var(--sapField_Hover_Background)}:host(:not([value-state]):not([readonly])[focused]:not([opened]):hover),:host([value-state="None"]:not([readonly])[focused]:not([opened]):hover){box-shadow:none}:host([focused]):not([opened]) .ui5-input-root:before{content:none}:host(:not([readonly]):not([disabled])[value-state]:not([value-state="None"])){border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]) [inner-input],:host([value-state="Critical"]) [inner-input]{font-style:var(--_ui5-v2-4-0_input_error_warning_font_style);text-indent:var(--_ui5-v2-4-0_input_error_warning_text_indent)}:host([value-state="Negative"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_error_font_weight)}:host([value-state="Critical"]) [inner-input]{font-weight:var(--_ui5-v2-4-0_input_warning_font_weight)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_error_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_border_color)}:host([value-state="Negative"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_error_focus_outline_color)}:host([value-state="Negative"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0-input-value-state-error-border-botom-color)}:host([value-state="Negative"]:not([readonly]):not([focused]):hover),:host([value-state="Negative"]:not([readonly])[focused][opened]:hover){background-color:var(--_ui5-v2-4-0_input_value_state_error_hover_background);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])),:host([value-state="Critical"]:not([readonly]):not([disabled])),:host([value-state="Information"]:not([readonly]):not([disabled])){border-style:var(--_ui5-v2-4-0_input_error_warning_border_style)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_border_color)}:host([value-state="Critical"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_warning_focus_outline_color)}:host([value-state="Critical"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_warning_border_botom_color)}:host([value-state="Critical"]:not([readonly]):not([focused]):hover),:host([value-state="Critical"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_success_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_border_color)}:host([value-state="Positive"][focused]:not([opened]):not([readonly])) .ui5-input-focusable-element:after{border-color:var(--_ui5-v2-4-0_input_focused_value_state_success_focus_outline_color)}:host([value-state="Positive"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_state_success_border_botom_color)}:host([value-state="Positive"]:not([readonly]):not([focused]):hover),:host([value-state="Positive"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Information"][focused]:not([opened]):not([readonly])){background-color:var(--_ui5-v2-4-0_input_focused_value_state_information_background);border-color:var(--_ui5-v2-4-0_input_focused_value_state_information_border_color)}:host([value-state="Information"]:not([readonly])) .ui5-input-root:before{background-color:var(--_ui5-v2-4-0_input_value_success_information_border_botom_color)}:host([value-state="Information"]:not([readonly]):not([focused]):hover),:host([value-state="Information"]:not([readonly])[focused][opened]:hover){background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}.ui5-input-icon-root{min-width:var(--_ui5-v2-4-0_input_icon_min_width);height:100%;display:flex;justify-content:center;align-items:center}::slotted([ui5-icon][slot="icon"]){align-self:start;padding:var(--_ui5-v2-4-0_input_custom_icon_padding);box-sizing:content-box!important}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Negative"][focused]) .inputIcon,:host([value-state="Critical"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_focused_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host([value-state="Information"][focused]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_focused_icon_padding)}:host([value-state="Negative"]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_icon_padding)}:host([value-state="Negative"][focused]) ::slotted(.inputIcon[ui5-icon]),:host([value-state="Negative"][focused]) ::slotted([ui5-icon][slot="icon"]),:host([value-state="Critical"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_error_warning_custom_focused_icon_padding)}:host([value-state="Information"]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_icon_padding)}:host([value-state="Information"][focused]) ::slotted([ui5-icon][slot="icon"]){padding:var(--_ui5-v2-4-0_input_information_custom_focused_icon_padding)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}.ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_height);padding:0;width:var(--_ui5-v2-4-0_input_icon_width);min-width:var(--_ui5-v2-4-0_input_icon_width);display:flex;justify-content:center;align-items:center;box-sizing:border-box}:host([value-state]:not([value-state="None"]):not([value-state="Positive"])) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_state_height);vertical-align:top}:host([value-state="Positive"]) .ui5-input-clear-icon-wrapper{height:var(--_ui5-v2-4-0_input_icon_wrapper_success_state_height)}[ui5-icon].ui5-input-clear-icon{padding:0;color:inherit}[inner-input]::-webkit-outer-spin-button,[inner-input]::-webkit-inner-spin-button{-webkit-appearance:inherit;margin:inherit}\n'},jP,{packageName:"@ui5/webcomponents",fileName:"themes/ValueStateMessage.css.ts",content:'.ui5-valuestatemessage-popover{border-radius:var(--_ui5-v2-4-0_value_state_message_popover_border_radius);box-shadow:var(--_ui5-v2-4-0_value_state_message_popover_box_shadow)}.ui5-input-value-state-message-icon{width:var(--_ui5-v2-4-0_value_state_message_icon_width);height:var(--_ui5-v2-4-0_value_state_message_icon_height);display:var(--_ui5-v2-4-0_input_value_state_icon_display);position:absolute;padding-right:.375rem}.ui5-valuestatemessage-root .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_input_value_state_icon_offset)}.ui5-input-value-state-message-icon[name=error]{color:var(--sapNegativeElementColor)}.ui5-input-value-state-message-icon[name=alert]{color:var(--sapCriticalElementColor)}.ui5-input-value-state-message-icon[name=success]{color:var(--sapPositiveElementColor)}.ui5-input-value-state-message-icon[name=information]{color:var(--sapInformativeElementColor)}.ui5-valuestatemessage-root{box-sizing:border-box;display:inline-block;color:var(--sapTextColor);font-size:var(--sapFontSmallSize);font-family:"72override",var(--sapFontFamily);height:auto;padding:var(--_ui5-v2-4-0_value_state_message_padding);overflow:hidden;text-overflow:ellipsis;min-width:6.25rem;border:var(--_ui5-v2-4-0_value_state_message_border);line-height:var(--_ui5-v2-4-0_value_state_message_line_height)}[ui5-responsive-popover] .ui5-valuestatemessage-header,[ui5-popover] .ui5-valuestatemessage-header{min-height:2rem}[ui5-responsive-popover] .ui5-valuestatemessage-header{padding:var(--_ui5-v2-4-0_value_state_header_padding);border:var(--_ui5-v2-4-0_value_state_header_border);border-bottom:var(--_ui5-v2-4-0_value_state_header_border_bottom);flex-grow:1;position:relative}.ui5-valuestatemessage--success{background:var(--sapSuccessBackground)}.ui5-valuestatemessage--warning{background:var(--sapWarningBackground)}.ui5-valuestatemessage--error{background:var(--sapErrorBackground)}.ui5-valuestatemessage--information{background:var(--sapInformationBackground)}.ui5-responsive-popover-header[focused],.ui5-responsive-popover-header:focus{outline-offset:var(--_ui5-v2-4-0_value_state_header_offset);outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor)}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(content){padding:0}.ui5-valuestatemessage-popover::part(header),.ui5-valuestatemessage-popover::part(footer){min-height:0}.ui5-valuestatemessage-popover::part(header),.ui5-popover-with-value-state-header::part(header),.ui5-popover-with-value-state-header-phone::part(header){margin-bottom:0}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-root{padding:var(--_ui5-v2-4-0_value_state_message_padding_phone);width:100%}.ui5-popover-with-value-state-header-phone .ui5-input-value-state-message-icon{left:var(--_ui5-v2-4-0_value_state_message_icon_offset_phone)}.ui5-popover-with-value-state-header-phone .ui5-valuestatemessage-header{position:relative;flex:none;top:0;left:0}.ui5-popover-with-value-state-header-phone::part(content){padding:0;overflow:hidden;display:flex;flex-direction:column}.ui5-popover-with-value-state-header-phone [ui5-list]{overflow:auto}[ui5-responsive-popover] .ui5-valuestatemessage--error{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_error)}[ui5-responsive-popover] .ui5-valuestatemessage--information{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_information)}[ui5-responsive-popover] .ui5-valuestatemessage--success{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_success)}[ui5-responsive-popover] .ui5-valuestatemessage--warning{box-shadow:var(--_ui5-v2-4-0_value_state_header_box_shadow_warning)}[ui5-responsive-popover].ui5-popover-with-value-state-header .ui5-valuestatemessage-root:has(+[ui5-list]:empty){box-shadow:none}\n'},{packageName:"@ui5/webcomponents",fileName:"themes/Suggestions.css.ts",content:".ui5-suggestions-popover{box-shadow:var(--sapContent_Shadow1)}.ui5-suggestions-popover::part(header),.ui5-suggestions-popover::part(content){padding:0}.ui5-suggestions-popover::part(footer){padding:0 1rem}.input-root-phone.native-input-wrapper{display:contents}.input-root-phone.native-input-wrapper:before{display:none}.native-input-wrapper .ui5-input-inner-phone{margin:0}\n"}],features:["InputSuggestions"],get dependencies(){const e=lS("InputSuggestions");return[oP,Sk,cB].concat(e?e.dependencies:[])}}),ET("change",{bubbles:!0}),ET("value-changed",{bubbles:!0}),ET("input",{bubbles:!0,cancelable:!0}),ET("select",{bubbles:!0}),ET("selection-change",{detail:{item:{type:HTMLElement}},bubbles:!0}),ET("type-ahead",{bubbles:!0}),ET("suggestion-scroll",{detail:{scrollTop:{type:Number},scrollContainer:{type:HTMLElement}},bubbles:!0}),ET("open",{bubbles:!0}),ET("close",{bubbles:!0})],hL),hL.define();const dL=hL;ME("direction-arrows",{pathData:"M507 244q5 5 5 12 0 6-5 11L394 379q-5 5-12 5-6 0-11-5t-5-11V144q0-12 10-15 2-1 6-1 8 0 12 4zM135 129q10 3 10 15v224q0 6-4.5 11t-11.5 5q-6 0-11-5L5 267q-5-5-5-11 0-7 5-12l113-112q4-4 11-4 4 0 6 1z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("direction-arrows",{pathData:"M504 237q8 8 8 19t-8 19L395 377q-7 7-17 7t-18-7.5-8-18.5V154q0-11 8-18.5t19-7.5q9 0 16 7zM135 128q11 0 18 7.5t7 18.5v204q0 12-8 19t-18 7-17-7L8 275q-8-8-8-19t8-19l109-102q7-7 18-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));const pL={packageName:"@ui5/webcomponents",fileName:"themes/SliderBase.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([disabled]){opacity:var(--_ui5-v2-4-0_slider_disabled_opacity);cursor:default;pointer-events:none}:host{box-sizing:border-box;cursor:pointer;vertical-align:top;width:100%}:host(:not([hidden])){display:inline-block}.ui5-slider-root{box-sizing:border-box;height:3.3125rem;outline:none;padding:var(--_ui5-v2-4-0_slider_padding);touch-action:none}.ui5-slider-inner{background-repeat:no-repeat;position:relative;min-width:var(--_ui5-v2-4-0_slider_inner_min_width);height:100%}.ui5-slider-progress-container{width:100%;background:var(--_ui5-v2-4-0_slider_progress_container_background);border:var(--_ui5-v2-4-0_slider_progress_border);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_inner_height);position:relative;box-sizing:var(--_ui5-v2-4-0_slider_progress_box_sizing);top:var(--_ui5-v2-4-0_slider_progress_container_top)}.ui5-slider-progress-container:before,.ui5-slider-progress-container:after{display:var(--_ui5-v2-4-0_slider_progress_container_dot_display);content:"";position:absolute;border-radius:50%;width:var(--_ui5-v2-4-0_slider_start_end_point_size);height:var(--_ui5-v2-4-0_slider_start_end_point_size);top:var(--_ui5-v2-4-0_slider_start_end_point_top)}.ui5-slider-progress-container:before{inset-inline-start:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_before_background);border:var(--_ui5-v2-4-0_slider_progress_before_border)}.ui5-slider-progress-container:after{inset-inline-end:var(--_ui5-v2-4-0_slider_start_end_point_left);background-color:var(--_ui5-v2-4-0_slider_progress_after_background);border:var(--_ui5-v2-4-0_slider_progress_after_border)}.ui5-slider-progress{background:var(--_ui5-v2-4-0_slider_progress_background);border-radius:var(--_ui5-v2-4-0_slider_progress_border_radius);height:var(--_ui5-v2-4-0_slider_progress_height);position:relative;outline:none;box-sizing:border-box;border:var(--_ui5-v2-4-0_slider_active_progress_border);left:var(--_ui5-v2-4-0_slider_active_progress_left);top:var(--_ui5-v2-4-0_slider_active_progress_top)}.ui5-slider-tickmarks{list-style:none;padding:0;margin:0;top:var(--_ui5-v2-4-0_slider_tickmark_top);display:flex;box-sizing:border-box;width:100%;justify-content:space-between;position:absolute;z-index:1}.ui5-slider-tickmarks li{height:var(--_ui5-v2-4-0_slider_tickmark_height);border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_bg)}.ui5-slider-handle{background:var(--_ui5-v2-4-0_slider_handle_background);border:var(--_ui5-v2-4-0_slider_handle_border);border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);position:relative;outline:none;height:var(--_ui5-v2-4-0_slider_handle_height);width:var(--_ui5-v2-4-0_slider_handle_width);box-sizing:var(--_ui5-v2-4-0_slider_handle_box_sizing);display:flex;justify-content:center;align-items:center;z-index:2}[slider-icon]{display:var(--_ui5-v2-4-0_slider_handle_icon_display);color:var(--sapContent_Selected_ForegroundColor);width:var(--_ui5-v2-4-0_slider_handle_icon_size);height:var(--_ui5-v2-4-0_slider_handle_icon_size)}.ui5-slider-root .ui5-slider-handle:focus [slider-icon]{display:var(--_ui5-v2-4-0_range_slider_active_handle_icon_display)}.ui5-slider-progress-container:hover~.ui5-slider-handle:not(:focus),.ui5-slider-handle:hover{background:var(--_ui5-v2-4-0_slider_handle_hover_background);border:var(--_ui5-v2-4-0_slider_handle_hover_border)}.ui5-slider-root:focus .ui5-slider-inner .ui5-slider-handle,.ui5-slider-handle:focus{outline:var(--_ui5-v2-4-0_slider_handle_outline);outline-offset:var(--_ui5-v2-4-0_slider_handle_outline_offset);border:var(--_ui5-v2-4-0_slider_handle_focus_border);background:var(--_ui5-v2-4-0_slider_handle_background_focus)}.ui5-slider-handle.ui5-slider-handle--start:focus,.ui5-slider-handle--end:focus{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-root:focus:hover .ui5-slider-handle,.ui5-slider-handle:focus:hover{border:var(--_ui5-v2-4-0_slider_handle_focus_border)}.ui5-slider-handle-container{position:absolute;margin-inline-start:calc(-1 * var(--_ui5-v2-4-0_slider_handle_width) / 2);top:var(--_ui5-v2-4-0_slider_handle_top)}:host(:not([hidden])) .ui5-slider-handle-container .ui5-slider-tooltip{display:flex;font-family:var(--sapFontFamily);justify-content:center;align-items:center;visibility:hidden;position:absolute;left:50%;transform:translate(-50%);bottom:var(--_ui5-v2-4-0_slider_tooltip_bottom);background:var(--_ui5-v2-4-0_slider_tooltip_background);border:var(--_ui5-v2-4-0_slider_tooltip_border);border-radius:var(--_ui5-v2-4-0_slider_tooltip_border_radius);box-shadow:var(--_ui5-v2-4-0_slider_tooltip_box_shadow);font-size:var(--_ui5-v2-4-0_slider_tooltip_fontsize);color:var(--_ui5-v2-4-0_slider_tooltip_color);height:var(--_ui5-v2-4-0_slider_tooltip_height);min-width:var(--_ui5-v2-4-0_slider_tooltip_min_width);padding:var(--_ui5-v2-4-0_slider_tooltip_padding);box-sizing:var(--_ui5-v2-4-0_slider_tooltip_border_box)}:host(:not([hidden])):host([editable-tooltip]) .ui5-slider-handle-container .ui5-slider-tooltip{border:none;background:none;box-shadow:none}:host([editable-tooltip]) .ui5-slider-tooltip{padding:0;box-shadow:none}.ui5-slider-tooltip [ui5-input]{width:100%;text-align:center}.ui5-slider-tooltip-value{position:relative;display:flex;justify-content:center;align-items:center}.ui5-slider-labels{position:absolute;top:1.25rem;margin:0;padding:0;white-space:nowrap}.ui5-slider-labels li{position:relative;list-style:none;padding-top:.3125rem;height:1rem;margin:0;text-align:center;display:inline-block;color:var(--_ui5-v2-4-0_slider_label_color);font-family:var(--sapFontFamily);font-size:var(--_ui5-v2-4-0_slider_label_fontsize);padding-top:0;box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.ui5-slider-hidden-labels li:not(:first-child):not(:last-child){visibility:hidden}.ui5-slider-handle:focus .ui5-slider-tooltip{bottom:var(--_ui5-v2-4-0_slider_handle_focused_tooltip_distance)}.ui5-slider-tickmarks li.ui5-slider-tickmark-in-range{border-inline-start:1px solid var(--_ui5-v2-4-0_slider_tickmark_in_range_bg)}:host([show-tickmarks]) .ui5-slider-progress{height:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_height);border:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_border);left:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_left);top:var(--_ui5-v2-4-0_slider_no_tickmarks_active_progress_top)}:host([show-tickmarks]) .ui5-slider-progress-container{top:var(--_ui5-v2-4-0_slider_no_tickmarks_progress_container_top)}.ui5-slider-handle:focus:after{content:"";display:var(--_ui5-v2-4-0_slider_handle_focus_visibility);width:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);height:calc(100% + (var(--sapContent_FocusWidth) * 2) + 2px);border:var(--sapContent_FocusWidth) dotted var(--sapContent_FocusColor);position:absolute;border-radius:var(--_ui5-v2-4-0_slider_handle_border_radius);pointer-events:none}\n'};var fL,mL=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let gL=fL=class extends xT{async formElementAnchor(){return this.getFocusDomRefAsync()}constructor(){super(),this.min=0,this.max=100,this.step=1,this.labelInterval=0,this.showTickmarks=!1,this.showTooltip=!1,this.editableTooltip=!1,this.disabled=!1,this.value=0,this._tooltipVisibility="hidden",this._labelsOverlapping=!1,this._hiddenTickmarks=!1,this._isInputValueValid=!1,this.notResized=!1,this._isUserInteraction=!1,this._isInnerElementFocusing=!1,this._labelWidth=0,this._resizeHandler=this._handleResize.bind(this),this._moveHandler=this._handleMove.bind(this),this._upHandler=this._handleUp.bind(this),this._stateStorage={step:void 0,min:void 0,max:void 0,labelInterval:void 0},this._ontouchstart={handleEvent:e=>{this._onmousedown(e)},passive:!0}}_handleMove(e){}_handleUp(e){}_onmousedown(e){}_handleActionKeyPress(e){}_updateInputValue(){}static get ACTION_KEYS(){return[RT,PT,kT,LT,DT,NT,OT,FT,KT,ZT,VT,QT,XT,YT,jT]}static get MIN_SPACE_BETWEEN_TICKMARKS(){return 8}static get TOOLTIP_VISIBILITY(){return{VISIBLE:"visible",HIDDEN:"hidden"}}static get renderer(){return AM}static get styles(){return pL}get classes(){return{root:{"ui5-slider-root-phone":DC()},labelContainer:{"ui5-slider-hidden-labels":this._labelsOverlapping}}}onEnterDOM(){sR.register(this,this._resizeHandler)}onExitDOM(){sR.deregister(this,this._resizeHandler)}onAfterRendering(){this.notResized&&this._resizeHandler()}_onmouseover(){this.showTooltip&&(this._tooltipVisibility=fL.TOOLTIP_VISIBILITY.VISIBLE)}_onmouseout(){this.showTooltip&&!this.shadowRoot.activeElement&&(this._tooltipVisibility=fL.TOOLTIP_VISIBILITY.HIDDEN)}_onkeydown(e){const t=e.target;JT(e)&&t.classList.contains("ui5-slider-handle")&&t.parentNode.querySelector(".ui5-slider-handle-container ui5-input").focus(),this.disabled||0===this._effectiveStep||t.hasAttribute("ui5-slider-handle")||fL._isActionKey(e)&&t&&!t.hasAttribute("ui5-input")&&(e.preventDefault(),this._isUserInteraction=!0,this._handleActionKeyPress(e))}_onInputKeydown(e){const t=e.target;JT(e)&&t.hasAttribute("ui5-input")&&t.parentNode.parentNode.querySelector(".ui5-slider-handle").focus(),MT(e)&&(this._updateInputValue(),this._updateValueFromInput(e))}_onInputChange(){this._valueOnInteractionStart!==this.value&&this.fireEvent("change")}_onInputInput(){this.fireEvent("input")}_updateValueFromInput(e){const t=e.target,i=parseFloat(t.value);this._isInputValueValid=i>=this._effectiveMin&&i<=this._effectiveMax,this._isInputValueValid&&(this.value=i)}_onKeyupBase(){this.disabled||(this._isUserInteraction=!1)}_preserveFocus(e){this._isInnerElementFocusing=e}_isFocusing(){return this._isInnerElementFocusing}_preventFocusOut(){this.focusInnerElement()}focusInnerElement(){this.focus()}_handleResize(){if(!this.showTickmarks)return;if(this.notResized=!1,this._spaceBetweenTickmarks()<fL.MIN_SPACE_BETWEEN_TICKMARKS?(this._hiddenTickmarks=!0,this._labelsOverlapping=!0):this._hiddenTickmarks=!1,this.labelInterval<=0||this._hiddenTickmarks)return;const e=this.shadowRoot.querySelectorAll(".ui5-slider-labels li");this._labelsOverlapping=[...e].some((e=>e.scrollWidth>e.clientWidth))}handleDownBase(e){const t=this._effectiveMin,i=this._effectiveMax,n=this.getBoundingClientRect(),r=this.directionStart,o=this._effectiveStep,a=fL.getValueFromInteraction(e,o,t,i,n,r);return this._isUserInteraction=!0,window.addEventListener("mouseup",this._upHandler),window.addEventListener("touchend",this._upHandler),kC()&&e instanceof TouchEvent?window.addEventListener("touchmove",this._moveHandler):window.addEventListener("mousemove",this._moveHandler),this._handleFocusOnMouseDown(e),a}_handleFocusOnMouseDown(e){const t=this.shadowRoot.activeElement,i=e.target;t&&t===i||i.hasAttribute("ui5-input")||(this._preserveFocus(!0),this.focusInnerElement())}handleUpBase(){window.removeEventListener("mouseup",this._upHandler),window.removeEventListener("touchend",this._upHandler),window.removeEventListener("mousemove",this._moveHandler),window.removeEventListener("touchmove",this._moveHandler),this._isUserInteraction=!1,this._preserveFocus(!1)}updateStateStorageAndFireInputEvent(e){this.storePropertyState(e),this._isUserInteraction&&this.fireDecoratorEvent("input")}static _isActionKey(e){return this.ACTION_KEYS.some((t=>t(e)))}static clipValue(e,t,i){return Math.min(Math.max(e,t),i)}static getValueFromInteraction(e,t,i,n,r,o){const a=this.getPageXValueFromEvent(e),s=this.computedValueFromPageX(a,i,n,r,o),l=this.getSteppedValue(s,t,i);return this.clipValue(l,i,n)}static getSteppedValue(e,t,i){const n=Math.abs((e-i)%t);if(0===t||0===n)return e;e=2*n>=t?e+t-n:e-n;const r=fL._getDecimalPrecisionOfNumber(t);return Number(e.toFixed(r))}static getPageXValueFromEvent(e){return kC()&&e instanceof TouchEvent?e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].pageX:0:e.pageX}static computedValueFromPageX(e,t,i,n,r){return t+("left"===r?e-n[r]:n[r]-e)/n.width*(i-t)}static _getDecimalPrecisionOfNumber(e){if(Number.isInteger(e))return 0;const t=String(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!t||t.length<2?0:Math.max(0,(t[1]?t[1].length:0)-(t[2]?Number(t[2]):0))}isCurrentStateOutdated(){return Object.entries(this._stateStorage).some((e=>{let[t,i]=e;return this[t]!==i}))}getStoredPropertyState(e){return this._stateStorage[e]}isPropertyUpdated(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.some((e=>this.getStoredPropertyState(e)!==this[e]))}storePropertyState(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this._stateStorage[e]=this[e]}))}get directionStart(){return"rtl"===this.effectiveDir?"right":"left"}_createLabels(){if(!this.labelInterval||!this.showTickmarks)return;const e=this.labelInterval,t=this._effectiveStep,i=(this._effectiveMax-this._effectiveMin)/(t*e);if(i===this._oldNumberOfLabels&&this._oldMin===this._effectiveMin&&this._oldMax===this._effectiveMax)return;this._oldMin=this._effectiveMin,this._oldMax=this._effectiveMax,this._oldNumberOfLabels=i,this._labelWidth=100/i,this._labelValues=[];const n=fL._getDecimalPrecisionOfNumber(t);for(let r=0;r<=i;r++){const i=(r*t*e+this._effectiveMin).toFixed(n);this._labelValues.push(i)}}_handleActionKeyPressBase(e,t){const i=fL._isIncreaseValueAction(e,this.directionStart),n=fL._isBigStepAction(e),r=this[t],o=this._effectiveMin,a=this._effectiveMax;let s=this._effectiveStep;return s=n&&(a-o)/s>10?(a-o)/10:s,QT(e)?a-r:VT(e)?-1*(r-o):i?s:-1*s}static _isIncreaseValueAction(e,t){return"right"===t?kT(e)||OT(e)||RT(e)||DT(e)||KT(e)||XT(e):kT(e)||OT(e)||PT(e)||NT(e)||KT(e)||XT(e)}static _isBigStepAction(e){return FT(e)||OT(e)||DT(e)||NT(e)||XT(e)||YT(e)}get _tickmarksCount(){return(this._effectiveMax-this._effectiveMin)/this._effectiveStep}_spaceBetweenTickmarks(){return this.getBoundingClientRect().width/this._tickmarksCount}_validateStep(e){0===e&&console.warn("The 'step' property must be a positive float number"),e<0&&console.warn("The 'step' property must be a positive float number. The provided negative number has been converted to its positve equivalent"),Number.isNaN(e)&&console.warn("The 'step' property must be a positive float number. It has been set to its default value of 1")}get _labels(){return this._labelValues||[]}get _effectiveStep(){let e=this.step;return e<0&&(e=Math.abs(e)),Number.isNaN(e)&&(e=1),e}get _effectiveMin(){return Math.min(this.min,this.max)}get _effectiveMax(){return Math.max(this.min,this.max)}get _tabIndex(){return this.disabled?"-1":"0"}get _ariaDescribedByHandleText(){return this.editableTooltip?"ui5-slider-InputDesc":void 0}get _ariaLabelledByHandleText(){return this.accessibleName?"ui5-slider-accName ui5-slider-sliderDesc":"ui5-slider-sliderDesc"}get _ariaDescribedByInputText(){return""}get _ariaLabelledByInputText(){return""}};mL([CT({type:Number})],gL.prototype,"min",void 0),mL([CT({type:Number})],gL.prototype,"max",void 0),mL([CT()],gL.prototype,"name",void 0),mL([CT({type:Number})],gL.prototype,"step",void 0),mL([CT({type:Number})],gL.prototype,"labelInterval",void 0),mL([CT({type:Boolean})],gL.prototype,"showTickmarks",void 0),mL([CT({type:Boolean})],gL.prototype,"showTooltip",void 0),mL([CT({type:Boolean})],gL.prototype,"editableTooltip",void 0),mL([CT({type:Boolean})],gL.prototype,"disabled",void 0),mL([CT()],gL.prototype,"accessibleName",void 0),mL([CT({type:Number})],gL.prototype,"value",void 0),mL([CT()],gL.prototype,"_tooltipVisibility",void 0),mL([CT({type:Boolean})],gL.prototype,"_labelsOverlapping",void 0),mL([CT({type:Boolean})],gL.prototype,"_hiddenTickmarks",void 0),mL([CT({type:Boolean})],gL.prototype,"_isInputValueValid",void 0),gL=fL=mL([ET("change",{bubbles:!0}),ET("input",{bubbles:!0})],gL);const _L=gL;function vL(e,t,i){return vM`${this.showTickmarks?yL.call(this,e,t,i):void 0}`}function yL(e,t,i){return vM`<ul class="ui5-slider-tickmarks">${fM(this.tickmarksObject,((e,t)=>e._id||t),((n,r)=>AL.call(this,e,t,i,n,r)))}</ul>${this.labelInterval?wL.call(this,e,t,i):void 0}`}function AL(e,t,i,n,r){return vM`${n?bL.call(this,e,t,i,n,r):xL.call(this,e,t,i,n,r)}`}function bL(e,t,i,n,r){return vM`<li class="ui5-slider-tickmark ui5-slider-tickmark-in-range"></li>`}function xL(e,t,i,n,r){return vM`<li class="ui5-slider-tickmark"></li>`}function wL(e,t,i){return vM`<ul class="ui5-slider-labels ${mM(this.classes.labelContainer)}" style="${gM(this.styles.labelContainer)}">${fM(this._labels,((e,t)=>e._id||t),((n,r)=>SL.call(this,e,t,i,n,r)))}</ul>`}function SL(e,t,i,n,r){return vM`<li style="${gM(this.styles.label)}">${_M(n)}</li>`}function CL(e,t,i){return vM`<div class="ui5-slider-tooltip" style="${gM(this.styles.tooltip)}">${this.editableTooltip?EL.call(this,e,t,i):TL.call(this,e,t,i)}</div>`}function EL(e,t,i){return i?vM`<${bM("ui5-input",t,i)} value="${_M(this._tooltipInputValue)}" value-state="${_M(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${_M(this._onInputChange)}" @ui5-input="${_M(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></${bM("ui5-input",t,i)}>`:vM`<ui5-input value="${_M(this._tooltipInputValue)}" value-state="${_M(this._tooltipInputValueState)}" type="Number" accessible-name-ref="ui5-slider-InputLabel" @focusout="${this._onInputFocusOut}" @keydown="${this._onInputKeydown}" @ui5-change="${_M(this._onInputChange)}" @ui5-input="${_M(this._onInputInput)}" data-sap-ui-end-value tabindex="-1"></ui5-input>`}function TL(e,t,i){return vM`<span class="ui5-slider-tooltip-value">${_M(this.tooltipValue)}</span>`}function ML(e,t,i){return vM`<span id="ui5-slider-accName" class="ui5-hidden-text">${_M(this.accessibleName)}</span>`}function IL(e,t,i){return vM`<span id="ui5-slider-InputDesc" class="ui5-hidden-text">${_M(this._ariaDescribedByInputText)}</span><span id="ui5-slider-InputLabel" class="ui5-hidden-text">${_M(this._ariaLabelledByInputText)}</span>`}var BL,RL=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let PL=BL=class extends _L{get formFormattedValue(){return this.value.toString()}constructor(){super(),this.value=0,this._progressPercentage=0,this._handlePositionFromStart=0,this._tooltipInputValue=this.value.toString(),this._tooltipInputValueState="None",this._stateStorage.value=void 0,this._lastValidInputValue=this.min.toString()}onBeforeRendering(){this.editableTooltip&&this._updateInputValue(),this.isCurrentStateOutdated()&&(this.notResized=!0,this.syncUIAndState(),this._updateHandleAndProgress(this.value))}syncUIAndState(){this.isPropertyUpdated("step")&&(this._validateStep(this.step),this.storePropertyState("step")),this.isPropertyUpdated("min","max","value")&&(this.storePropertyState("min","max"),this.value=_L.clipValue(this.value,this._effectiveMin,this._effectiveMax),this.updateStateStorageAndFireInputEvent("value"),this.storePropertyState("value")),this.labelInterval&&this.showTickmarks&&this._createLabels(),this.isPropertyUpdated("labelInterval")&&this.storePropertyState("labelInterval")}_onmousedown(e){if(this.disabled||0===this.step||e.target.hasAttribute("ui5-input"))return;const t=this.handleDownBase(e);this._valueOnInteractionStart=this.value,void 0===this._valueInitial&&(this._valueInitial=this.value);const i=this.constructor;this._isHandlePressed(i.getPageXValueFromEvent(e))||(this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value"))}_onfocusin(){void 0===this._valueInitial&&(this._valueInitial=this.value),this.showTooltip&&(this._tooltipVisibility=_L.TOOLTIP_VISIBILITY.VISIBLE)}_onfocusout(e){var t;this._isFocusing()?this._preventFocusOut():(this._valueInitial=void 0,this.showTooltip&&!(null==(t=e.relatedTarget)?void 0:t.hasAttribute("ui5-input"))&&(this._tooltipVisibility=_L.TOOLTIP_VISIBILITY.HIDDEN))}_handleMove(e){if(e.target.hasAttribute("ui5-input"))return;if(e.preventDefault(),this.disabled||0===this._effectiveStep)return;const t=this.constructor.getValueFromInteraction(e,this._effectiveStep,this._effectiveMin,this._effectiveMax,this.getBoundingClientRect(),this.directionStart);this._updateHandleAndProgress(t),this.value=t,this.updateStateStorageAndFireInputEvent("value")}_handleUp(e){e.target.hasAttribute("ui5-input")||(this._valueOnInteractionStart!==this.value&&this.fireDecoratorEvent("change"),this.handleUpBase(),this._valueOnInteractionStart=void 0)}_onInputFocusOut(e){const t=this.shadowRoot.querySelector("[ui5-input]");this._tooltipVisibility=_L.TOOLTIP_VISIBILITY.HIDDEN,this._updateValueFromInput(e),this._isInputValueValid||(t.value=this._lastValidInputValue,this._isInputValueValid=!0,this._tooltipInputValueState="None")}_updateInputValue(){const e=this.shadowRoot.querySelector("[ui5-input]");if(e){if(this._isInputValueValid=parseFloat(e.value)>=this.min&&parseFloat(e.value)<=this.max,!this._isInputValueValid)return this._tooltipInputValue=this._lastValidInputValue,this._isInputValueValid=!0,void(this._tooltipInputValueState="Negative");this._tooltipInputValue=this.value.toString(),this._lastValidInputValue=this._tooltipInputValue,this._tooltipInputValueState="None"}}_isHandlePressed(e){const t=this._sliderHandle.getBoundingClientRect();return e>=t.left&&e<=t.right}_updateHandleAndProgress(e){const t=this._effectiveMax,i=this._effectiveMin;this._progressPercentage=(e-i)/(t-i),this._handlePositionFromStart=100*this._progressPercentage}_handleActionKeyPress(e){const t=this._effectiveMin,i=this._effectiveMax,n=this.value,r=this.constructor,o=jT(e)?this._valueInitial:r.clipValue(this._handleActionKeyPressBase(e,"value")+n,t,i);o!==n&&(this._updateHandleAndProgress(o),this.value=o,this.updateStateStorageAndFireInputEvent("value"))}get inputValue(){return this.value.toString()}get styles(){return{progress:{transform:`scaleX(${this._progressPercentage})`,"transform-origin":`${this.directionStart} top`},handle:{[this.directionStart]:`${this._handlePositionFromStart}%`},label:{width:`${this._labelWidth}%`},labelContainer:{width:"100%",[this.directionStart]:`-${this._labelWidth/2}%`},tooltip:{visibility:`${this._tooltipVisibility}`}}}get _sliderHandle(){return this.shadowRoot.querySelector(".ui5-slider-handle")}get tooltipValue(){const e=this.constructor._getDecimalPrecisionOfNumber(this._effectiveStep);return this.value.toFixed(e)}get _ariaDisabled(){return this.disabled||void 0}get _ariaLabelledByText(){return BL.i18nBundle.getText(_I)}get _ariaDescribedByInputText(){return BL.i18nBundle.getText(TI)}get _ariaLabelledByInputText(){return BL.i18nBundle.getText(MI)}get tickmarksObject(){const e=this._tickmarksCount,t=[];if(this._hiddenTickmarks)return[!0,!1];for(let i=0;i<=e;i++)t.push(this._effectiveMin+i*this.step<=this.value);return t}};RL([CT({type:Number})],PL.prototype,"value",void 0),RL([xM("@ui5/webcomponents")],PL,"i18nBundle",void 0),PL=BL=RL([ST({tag:"ui5-slider",languageAware:!0,formAssociated:!0,template:function(e,t,i){return i?vM`<div class="ui5-slider-root ${mM(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?vL.call(this,e,t,i):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${gM(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${gM(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${_M(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${_M(this.min)}" aria-valuemax="${_M(this.max)}" aria-valuenow="${_M(this.value)}" aria-labelledby="${_M(this._ariaLabelledByHandleText)}" aria-disabled="${_M(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${_M(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><${bM("ui5-icon",t,i)} name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></${bM("ui5-icon",t,i)}></div>${this.showTooltip?CL.call(this,e,t,i):void 0}</div></div>${this.accessibleName?ML.call(this,e,t,i):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${_M(this._ariaLabelledByText)}</span>${this.editableTooltip?IL.call(this,e,t,i):void 0}</div> `:vM`<div class="ui5-slider-root ${mM(this.classes.root)}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @mouseover="${this._onmouseover}" @mouseout="${this._onmouseout}" @keydown="${this._onkeydown}" @keyup="${this._onKeyupBase}" part="root-container"><div class="ui5-slider-inner">${this.step?vL.call(this,e,t,i):void 0}<div class="ui5-slider-progress-container" aria-hidden="true" part="progress-container"><div class="ui5-slider-progress" style="${gM(this.styles.progress)}" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" tabindex="-1" part="progress-bar"></div></div><div class="ui5-slider-handle-container" style="${gM(this.styles.handle)}" part="handle-container"><div class="ui5-slider-handle" @focusout="${this._onfocusout}" @focusin="${this._onfocusin}" role="slider" tabindex="${_M(this._tabIndex)}" aria-orientation="horizontal" aria-valuemin="${_M(this.min)}" aria-valuemax="${_M(this.max)}" aria-valuenow="${_M(this.value)}" aria-labelledby="${_M(this._ariaLabelledByHandleText)}" aria-disabled="${_M(this._ariaDisabled)}" aria-keyshortcuts="F2" aria-describedby="${_M(this._ariaDescribedByHandleText)}" data-sap-focus-ref part="handle"><ui5-icon name="direction-arrows" mode="Decorative" part="icon-slider" slider-icon></ui5-icon></div>${this.showTooltip?CL.call(this,e,t,i):void 0}</div></div>${this.accessibleName?ML.call(this,e,t,i):void 0}<span id="ui5-slider-sliderDesc" class="ui5-hidden-text">${_M(this._ariaLabelledByText)}</span>${this.editableTooltip?IL.call(this,e,t,i):void 0}</div> `},dependencies:[cB,dL]})],PL),PL.define();const kL=PL;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var LL,DL=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const NL=6.5;let OL=LL=class extends xT{async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.value}constructor(){super(),this.value="rgba(255,255,255,1)",this.hex="ffffff",this._value=Ik(this.value),this._alpha=1,this._hue=0,this._isSelectedColorChanged=!1,this._isHueValueChanged=!1,this._wrongHEX=!1,this._selectedCoordinates={x:249.5,y:249.5},this._mainValue={r:255,g:0,b:0},this.selectedHue=0,this.mouseDown=!1,this.mouseIn=!1}onBeforeRendering(){this._value=Ik(this.value);const e=`rgba(${this._value.r},${this._value.g},${this._value.b},1)`;this._setHex(),this._setValues(),this.style.setProperty(IS("--ui5_Color_Picker_Progress_Container_Color"),e)}_handleMouseDown(e){this.mouseDown=!0,this.mouseIn=!0,this._changeSelectedColor(e.offsetX,e.offsetY)}_handleMouseUp(){this.mouseDown=!1}_handleMouseOut(e){if(!this.mouseIn||!this.mouseDown)return;const t=e.target,i=t.offsetHeight,n=t.offsetWidth,r=e.offsetX<=0,o=e.offsetY<=0,a=e.offsetY>=t.offsetHeight,s=e.offsetX>=t.offsetWidth;let l,c;l=r?0:s?n:e.offsetX,c=o?0:a?i:e.offsetY,this._changeSelectedColor(l,c),this.mouseIn=!1,this.mouseDown=!1}_handleMouseMove(e){this.mouseDown&&this.mouseIn&&this._changeSelectedColor(e.offsetX,e.offsetY)}_handleAlphaInput(e){const t=e.target.value;this._alpha=parseFloat(t),Number.isNaN(this._alpha)&&(this._alpha=1),this._isHueValueChanged=!0,this._setColor(this._value)}_handleHueInput(e){this.selectedHue=e.target.value,this._hue=this.selectedHue,this._setMainColor(this._hue),this._isHueValueChanged=!0;const t=this._selectedCoordinates.x+NL,i=this._selectedCoordinates.y+NL,n=this._calculateColorFromCoordinates(t,i);n&&this._setColor(Pk(n))}_handleHEXChange(e){const t=new RegExp("^[<0-9 abcdef]+$"),i=e.target;let n=i.value.toLowerCase();3===n.length&&(n=`${n[0]}${n[0]}${n[1]}${n[1]}${n[2]}${n[2]}`);const r=6===n.length&&t.test(n);r&&i.value!==n&&(this._wrongHEX=!1,i.value=n),n!==this.hex&&(this.hex=n,r?(this._wrongHEX=!1,this._setColor(kk(this.hex))):this._wrongHEX=!0)}_handleRGBInputsChange(e){const t=e.target,i=parseInt(t.value)||0;let n;switch(t.id){case"red":n={...this._value,r:i};break;case"green":n={...this._value,g:i};break;case"blue":n={...this._value,b:i};break;default:n={...this._value}}this._setColor(n)}_setMainColor(e){this._mainValue=e<=255?{r:255,g:e,b:0}:e<=510?{r:255-(e-255),g:255,b:0}:e<=765?{r:0,g:255,b:e-510}:e<=1020?{r:0,g:765-(e-255),b:255}:e<=1275?{r:e-1020,g:0,b:255}:{r:255,g:0,b:1275-(e-255)}}_handleAlphaChange(){this._alpha=this._alpha<0?0:this._alpha,this._alpha=this._alpha>1?1:this._alpha}_changeSelectedColor(e,t){this._selectedCoordinates={x:e-NL,y:t-NL},this._isSelectedColorChanged=!0;const i=this._calculateColorFromCoordinates(e,t);i&&this._setColor(Pk(i))}_onkeydown(e){MT(e)&&this._handleHEXChange(e)}_calculateColorFromCoordinates(e,t){const i=this._hue/4.251,n=1-+(Math.round(parseFloat(t/256+"e+2"))+"e-2"),r=+(Math.round(parseFloat(e/256+"e+2"))+"e-2");if(n&&r)return{h:i,s:n,l:r}}_setColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:0,g:0,b:0};this.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${this._alpha})`,this._wrongHEX=!this.isValidRGBColor(e),this.fireDecoratorEvent("change")}isValidRGBColor(e){return e.r>=0&&e.r<=255&&e.g>=0&&e.g<=255&&e.b>=0&&e.b<=255}_setHex(){let e=this._value.r.toString(16),t=this._value.g.toString(16),i=this._value.b.toString(16);1===e.length&&(e=`0${e}`),1===t.length&&(t=`0${t}`),1===i.length&&(i=`0${i}`),this.hex=e+t+i}_setValues(){const e=(e=>{const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),a=r-o;let s,l=0;0===a?l=0:r===t?l=(i-n)/a%6*60:r===i?l=60*((n-t)/a+2):r===n&&(l=60*((t-i)/a+4));const c=(r+o)/2;return s=0===a?0:a/(1-Math.abs(2*c-1)),{h:l,s:s,l:c}})(this._value);this._selectedCoordinates={x:2.56*Math.round(100*e.l)-NL,y:256-2.56*Math.round(100*e.s)-NL},this._isSelectedColorChanged?this._isSelectedColorChanged=!1:this._isHueValueChanged?(this._isHueValueChanged=!1,this._hue=this.selectedHue?this.selectedHue:this._hue):this._hue=Math.round(4.25*e.h),this._setMainColor(this._hue)}get hueSliderLabel(){return LL.i18nBundle.getText(QM)}get alphaSliderLabel(){return LL.i18nBundle.getText(VM)}get hexInputLabel(){return LL.i18nBundle.getText(jM)}get redInputLabel(){return LL.i18nBundle.getText(qM)}get greenInputLabel(){return LL.i18nBundle.getText(WM)}get blueInputLabel(){return LL.i18nBundle.getText($M)}get alphaInputLabel(){return LL.i18nBundle.getText(XM)}get inputsDisabled(){return!!this._wrongHEX||void 0}get hexInputErrorState(){return this._wrongHEX?"Error":void 0}get styles(){return{mainColor:{"background-color":`rgb(${this._mainValue.r}, ${this._mainValue.g}, ${this._mainValue.b})`},circle:{left:`${this._selectedCoordinates.x}px`,top:`${this._selectedCoordinates.y}px`},colorSpan:{"background-color":`rgba(${this._value.r}, ${this._value.g}, ${this._value.b}, ${this._alpha})`}}}};DL([CT()],OL.prototype,"value",void 0),DL([CT()],OL.prototype,"name",void 0),DL([CT({noAttribute:!0})],OL.prototype,"hex",void 0),DL([CT({type:Object})],OL.prototype,"_mainValue",void 0),DL([CT({type:Object})],OL.prototype,"_value",void 0),DL([CT({type:Object})],OL.prototype,"_selectedCoordinates",void 0),DL([CT({type:Number})],OL.prototype,"_alpha",void 0),DL([CT({type:Number})],OL.prototype,"_hue",void 0),DL([CT({type:Boolean})],OL.prototype,"_isSelectedColorChanged",void 0),DL([CT({type:Boolean})],OL.prototype,"_isHueValueChanged",void 0),DL([CT({type:Boolean})],OL.prototype,"_wrongHEX",void 0),DL([xM("@ui5/webcomponents")],OL,"i18nBundle",void 0),OL=LL=DL([ST({tag:"ui5-color-picker",renderer:AM,formAssociated:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/ColorPicker.css.ts",content:':host(:not([hidden])){display:inline-block}.ui5-color-picker-root{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.ui5-color-picker-main-color{width:16rem;height:16rem;position:relative;margin-bottom:1.5rem;border:1px solid var(--sapContent_ForegroundBorderColor);background-size:100%;background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0)),-webkit-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0)),-moz-linear-gradient(top,rgba(255,255,255,0),#fff);background-image:linear-gradient(left,#000,#0000),linear-gradient(top,#fff0,#fff);background-image:-webkit-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-webkit-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:-moz-linear-gradient(left,#000,rgba(0,0,0,0),#fff),-moz-linear-gradient(top,rgba(128,128,128,0),#808080);background-image:linear-gradient(left,#000,#0000,#fff),linear-gradient(top,#80808000,gray);user-select:none;-moz-user-select:none}.ui5-color-picker-circle{position:absolute;box-sizing:border-box;width:13px;height:13px;border:var(--_ui5-v2-4-0_color_picker_circle_outer_border);border-radius:.6875rem;pointer-events:none}.ui5-color-picker-circle:after{content:"";position:absolute;width:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);height:var(--_ui5-v2-4-0_color_picker_circle_inner_circle_size);border:var(--_ui5-v2-4-0_color_picker_circle_inner_border);border-radius:.9375rem;pointer-events:none}.ui5-color-picker-sliders-wrapper{width:calc(100% - 11px);margin-left:-10px}[ui5-slider]{--_ui5-v2-4-0_slider_active_progress_border: none;--_ui5-v2-4-0_slider_progress_box_sizing: content-box}[ui5-slider]::part(handle){width:.9375rem;height:1.5rem;background:transparent;box-sizing:border-box}[ui5-slider]::part(handle-container){margin-inline-start:-2px;margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_margin_top)}[ui5-slider]::part(handle-container):focus-within{margin-inline-start:unset;margin-top:unset}[ui5-slider]::part(handle):after{content:"";border:2px solid #fff;display:block;height:1.25rem;border-radius:1rem;width:100%;box-sizing:border-box}[ui5-slider]::part(root-container){padding:1rem 0}[ui5-slider]::part(progress-container){width:calc(100% + 11px);height:18px;position:absolute;margin-top:var(--_ui5-v2-4-0_color_picker_slider_container_margin_top);border-radius:0;border:1px solid var(--sapField_BorderColor)}[ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-size:100%;background-image:-webkit-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(left,red,#ff0,#0f0,#0ff,#00f,#f0f,red);background-color:none}[ui5-slider].ui5-color-picker-alpha-slider::part(progress-container){background-image:-webkit-linear-gradient(left,rgba(65,120,13,0),var(--ui5-v2-4-0_Color_Picker_Progress_Container_Color)),url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}[ui5-slider]::part(progress-bar){background:transparent}.ui5-color-picker-current-color{width:100%;display:flex;justify-content:space-around;align-items:center}.ui5-color-picker-colors-wrapper{display:flex;flex-wrap:nowrap;height:1.5rem;border:1px solid var(--sapField_BorderColor)}.ui5-color-picker-white,.ui5-color-picker-color{width:3.1rem;background:#fff;display:block}.ui5-color-picker-color{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAF1V2h8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAEZ0FNQQAAsY58+1GTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACTSURBVHjaYjhz5sz///8Z/v//f+bMGQAAAAD//2I4c+YM4////wEAAAD//2I8c+YMAwODsbExAAAA//9igMgzMUAARBkAAAD//4JKQ1UwMDD+//8fwj979iwDAwMAAAD//0LSzsDAwMAA0w0D6HyofohmLPIAAAAA//9C2IdsK07jsJsOB3BriNJNQBoAAAD//wMA+ew3HIMTh5IAAAAASUVORK5CYII=)}.ui5-color-picker-color-inner{width:100%;height:100%}.ui5-color-picker-hex-input-wrapper{display:flex;align-items:center;flex-wrap:nowrap}.ui5-color-picker-hex-input{width:4.5rem;min-width:4.5rem;margin-left:.2rem}.ui5-color-picker-rgb-wrapper{display:flex;justify-content:space-around;width:100%}.ui5-color-picker-rgb{display:flex;flex-direction:column;align-items:center;margin-top:1rem}.ui5-color-picker-rgb-input{width:2.5rem;min-width:2.5rem;text-align:center}.ui5-color-picker-hue-slider::part(progress-container):before,.ui5-color-picker-alpha-slider::part(progress-container):before,.ui5-color-picker-hue-slider::part(progress-container):after,.ui5-color-picker-alpha-slider::part(progress-container):after,[ui5-slider].ui5-color-picker-hue-slider::part(icon-slider),[ui5-slider].ui5-color-picker-alpha-slider::part(icon-slider){display:none}.ui5-color-picker-alpha-slider::part(handle),.ui5-color-picker-hue-slider::part(handle){box-shadow:var(--_ui5-v2-4-0_color_picker_slider_handle_box_shadow);border:var(--_ui5-v2-4-0_color_picker_slider_handle_border)}.ui5-color-picker-alpha-slider::part(handle):hover,.ui5-color-picker-hue-slider::part(handle):hover{border:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_hover)}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{outline:var(--_ui5-v2-4-0_color_picker_slider_handle_outline_focus);outline-offset:.0625rem}.ui5-color-picker-alpha-slider::part(handle):focus:before,.ui5-color-picker-hue-slider::part(handle):focus:before{content:"";border:var(--_ui5-v2-4-0_color_picker_slider_handle_inline_focus);display:block;height:1.625rem;border-radius:1rem;width:1.05rem;box-sizing:border-box;position:absolute;inset:-3px -3px 2px}.ui5-color-picker-alpha-slider::part(handle):before,.ui5-color-picker-hue-slider::part(handle):before{display:none}.ui5-color-picker-alpha-slider::part(handle):focus,.ui5-color-picker-hue-slider::part(handle):focus{margin-top:var(--_ui5-v2-4-0_color_picker_slider_handle_focus_margin_top)}:dir(rtl) [ui5-slider].ui5-color-picker-hue-slider::part(progress-container){background-image:-webkit-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:-moz-linear-gradient(right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);background-image:linear-gradient(right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}:dir(rtl) .ui5-color-picker-alpha-slider::part(handle),:dir(rtl) .ui5-color-picker-hue-slider::part(handle){--_ui5-v2-4-0_slider_handle_margin_left: 0}:dir(rtl) .ui5-color-picker-sliders-wrapper{margin-left:10px}\n'},template:function(e,t,i){return i?vM`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${gM(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${gM(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><${bM("ui5-slider",t,i)} disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${_M(this._hue)}" accessible-name="${_M(this.hueSliderLabel)}" @ui5-input="${_M(this._handleHueInput)}"></${bM("ui5-slider",t,i)}><${bM("ui5-slider",t,i)} disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${_M(this._alpha)}" accessible-name="${_M(this.alphaSliderLabel)}" @ui5-input="${_M(this._handleAlphaInput)}"></${bM("ui5-slider",t,i)}></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${gM(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><${bM("ui5-label",t,i)}>Hex</${bM("ui5-label",t,i)}><${bM("ui5-input",t,i)} class="ui5-color-picker-hex-input" value="${_M(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${_M(this.hexInputLabel)}" @ui5-change="${_M(this._handleHEXChange)}" value-state="${_M(this.hexInputErrorState)}"></${bM("ui5-input",t,i)}></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${_M(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><${bM("ui5-input",t,i)} id="red" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.redInputLabel)}" value="${_M(this._value.r)}"></${bM("ui5-input",t,i)}><${bM("ui5-label",t,i)}>R</${bM("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${bM("ui5-input",t,i)} id="green" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.greenInputLabel)}" value="${_M(this._value.g)}"></${bM("ui5-input",t,i)}><${bM("ui5-label",t,i)}>G</${bM("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${bM("ui5-input",t,i)} id="blue" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.blueInputLabel)}" value="${_M(this._value.b)}"></${bM("ui5-input",t,i)}><${bM("ui5-label",t,i)}>B</${bM("ui5-label",t,i)}></div><div class="ui5-color-picker-rgb"><${bM("ui5-input",t,i)} id="alpha" disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${_M(this._alpha)}" accessible-name="${_M(this.alphaInputLabel)}" @ui5-input="${_M(this._handleAlphaInput)}" @ui5-change="${_M(this._handleAlphaChange)}"></${bM("ui5-input",t,i)}><${bM("ui5-label",t,i)}>A</${bM("ui5-label",t,i)}></div></div></section>`:vM`<section class="ui5-color-picker-root"><div class="ui5-color-picker-main-color" style="${gM(this.styles.mainColor)}" @mousedown="${this._handleMouseDown}" @mouseup="${this._handleMouseUp}" @mousemove="${this._handleMouseMove}" @mouseout="${this._handleMouseOut}"><div class="ui5-color-picker-circle" style="${gM(this.styles.circle)}"></div></div><div class="ui5-color-picker-sliders-wrapper"><ui5-slider disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-hue-slider" min="0" max="1530" value="${_M(this._hue)}" accessible-name="${_M(this.hueSliderLabel)}" @ui5-input="${_M(this._handleHueInput)}"></ui5-slider><ui5-slider disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-alpha-slider" min="0" max="1" step="0.01" value="${_M(this._alpha)}" accessible-name="${_M(this.alphaSliderLabel)}" @ui5-input="${_M(this._handleAlphaInput)}"></ui5-slider></div><div class="ui5-color-picker-current-color"><div class="ui5-color-picker-colors-wrapper"><span class="ui5-color-picker-white"></span><span class="ui5-color-picker-color"><div class="ui5-color-picker-color-inner" style="${gM(this.styles.colorSpan)}"></div></span></div><div class="ui5-color-picker-hex-input-wrapper"><ui5-label>Hex</ui5-label><ui5-input class="ui5-color-picker-hex-input" value="${_M(this.hex)}" @keydown="${this._onkeydown}" accessible-name="${_M(this.hexInputLabel)}" @ui5-change="${_M(this._handleHEXChange)}" value-state="${_M(this.hexInputErrorState)}"></ui5-input></div></div><div class="ui5-color-picker-rgb-wrapper" @ui5-change="${_M(this._handleRGBInputsChange)}"><div class="ui5-color-picker-rgb"><ui5-input id="red" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.redInputLabel)}" value="${_M(this._value.r)}"></ui5-input><ui5-label>R</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="green" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.greenInputLabel)}" value="${_M(this._value.g)}"></ui5-input><ui5-label>G</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="blue" class="ui5-color-picker-rgb-input" disabled="${_M(this.inputsDisabled)}" accessible-name="${_M(this.blueInputLabel)}" value="${_M(this._value.b)}"></ui5-input><ui5-label>B</ui5-label></div><div class="ui5-color-picker-rgb"><ui5-input id="alpha" disabled="${_M(this.inputsDisabled)}" class="ui5-color-picker-rgb-input" value="${_M(this._alpha)}" accessible-name="${_M(this.alphaInputLabel)}" @ui5-input="${_M(this._handleAlphaInput)}" @ui5-change="${_M(this._handleAlphaChange)}"></ui5-input><ui5-label>A</ui5-label></div></div></section>`},dependencies:[dL,kL,_P],shadowRootOptions:{delegatesFocus:!0}}),ET("change",{bubbles:!0})],OL),OL.define();const FL=OL;class UL extends tS{static get dependencies(){return[Ak,RB,FL]}get colorPaletteDialogTitle(){return UL.i18nBundle.getText(zM)}get colorPaletteDialogOKButton(){return UL.i18nBundle.getText(UM)}get colorPaletteCancelButton(){return UL.i18nBundle.getText(FM)}}function zL(e,t,i){return i?vM`<div class="ui5-step-icon ui5-step-dec" title="${_M(this.decIconTitle)}"><${bM("ui5-icon",t,i)} id="${_M(this._id)}-dec" name="${_M(this.decIconName)}" tabindex="-1" accessible-name="${_M(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></${bM("ui5-icon",t,i)}></div>`:vM`<div class="ui5-step-icon ui5-step-dec" title="${_M(this.decIconTitle)}"><ui5-icon id="${_M(this._id)}-dec" name="${_M(this.decIconName)}" tabindex="-1" accessible-name="${_M(this.decIconTitle)}" @click="${this._decValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._decSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._decIconClickable}"></ui5-icon></div>`}function HL(e,t,i){return vM`<slot name="valueStateMessage" slot="valueStateMessage"></slot>`}function GL(e,t,i){return i?vM`<div class="ui5-step-icon ui5-step-inc" title="${_M(this.incIconTitle)}"><${bM("ui5-icon",t,i)} id="${_M(this._id)}-inc" name="${_M(this.incIconName)}" tabindex="-1" accessible-name="${_M(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></${bM("ui5-icon",t,i)}></div>`:vM`<div class="ui5-step-icon ui5-step-inc" title="${_M(this.incIconTitle)}"><ui5-icon id="${_M(this._id)}-inc" name="${_M(this.incIconName)}" tabindex="-1" accessible-name="${_M(this.incIconTitle)}" @click="${this._incValue}" @focusout="${this._onButtonFocusOut}" @mousedown="${this._incSpin}" @mouseup="${this._resetSpin}" @mouseout="${this._resetSpinOut}" class="inputIcon" show-tooltip ?clickable="${this._incIconClickable}"></ui5-icon></div>`}(async(e,t)=>{var i,n;await Promise.all((null==(i=t.dependencies)?void 0:i.map((e=>e.define())))||[]),await(null==(n=t.define)?void 0:n.call(t)),nS.set(e,t),(e=>{oS.fireEvent(aS(e),void 0)})(e)})("ColorPaletteMoreColors",UL),ME("less",{pathData:"M464 224q16 0 16 16v32q0 16-16 16H48q-6 0-11-4.5T32 272v-32q0-7 5-11.5t11-4.5h416z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("less",{pathData:"M454 275H58q-11 0-18.5-7T32 250t7.5-18.5T58 224h396q11 0 18.5 7.5T480 250t-7.5 18-18.5 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),ME("add",{pathData:"M32 240q0-7 5-11.5t11-4.5h176V48q0-7 5-11.5t11-4.5h32q16 0 16 16v176h176q16 0 16 16v32q0 16-16 16H288v176q0 16-16 16h-32q-6 0-11-4.5t-5-11.5V288H48q-6 0-11-4.5T32 272v-32z",ltr:!1,accData:PB,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("add",{pathData:"M454 230q11 0 18.5 7.5T480 256t-7.5 18.5T454 282H282v172q0 11-7.5 18.5T256 480t-18.5-7.5T230 454V282H58q-11 0-18.5-7.5T32 256t7.5-18.5T58 230h172V58q0-11 7.5-18.5T256 32t18.5 7.5T282 58v172h172z",ltr:!1,accData:PB,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var VL,QL=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let jL=VL=class extends xT{constructor(){super(...arguments),this.value=0,this.step=1,this.valueState="None",this.required=!1,this.disabled=!1,this.readonly=!1,this.valuePrecision=0,this._decIconDisabled=!1,this._incIconDisabled=!1,this.focused=!1,this._inputFocused=!1,this._previousValue=this.value,this._waitTimeout=500,this._speed=120,this._spinStarted=!1}async formElementAnchor(){var e;return null==(e=await this.getFocusDomRefAsync())?void 0:e.getFocusDomRefAsync()}get formFormattedValue(){return this.value.toString()}get type(){return Uk.Number}get decIconTitle(){return VL.i18nBundle.getText(II)}get decIconName(){return"less"}get incIconTitle(){return VL.i18nBundle.getText(BI)}get incIconName(){return"add"}get _decIconClickable(){return!this._decIconDisabled&&!this.readonly&&!this.disabled}get _incIconClickable(){return!this._incIconDisabled&&!this.readonly&&!this.disabled}get _isFocused(){return this.focused}get _displayValue(){return 0===this.value||Number.isInteger(this.value)?this.value.toFixed(this.valuePrecision):this.input&&this.value===Number(this.input.value)?this.input.value:this.value.toString()}get accInfo(){return{ariaRequired:this.required,ariaLabel:QI(this)}}get inputAttributes(){return{min:void 0===this.min?void 0:this.min,max:void 0===this.max?void 0:this.max,step:this.step}}onBeforeRendering(){this._setButtonState(),void 0===this._previousValue&&(this._previousValue=this.value)}get input(){return this.shadowRoot.querySelector("[ui5-input]")}get innerInput(){return this.input.shadowRoot.querySelector("input")}get inputOuter(){return this.shadowRoot.querySelector(".ui5-step-input-input")}_onButtonFocusOut(){setTimeout((()=>{this._inputFocused||this.inputOuter.removeAttribute("focused")}),0)}_onInputFocusIn(){this._inputFocused=!0,this.value!==this._previousValue&&(this._previousValue=this.value)}_onInputFocusOut(){this._inputFocused=!1,this._onInputChange()}_setButtonState(){this._decIconDisabled=void 0!==this.min&&this.value<=this.min,this._incIconDisabled=void 0!==this.max&&this.value>=this.max}_validate(){void 0===this._initialValueState&&(this._initialValueState=this.valueState),this._updateValueState()}_updateValueState(){const e=(void 0===this.min||Number(this.input.value)>=this.min)&&(void 0===this.max||Number(this.input.value)<=this.max),t=this._isValueWithCorrectPrecision,i=this.valueState,n=e&&t;this.valueState=n?vP.None:vP.Negative,!this.fireDecoratorEvent("value-state-change",{valueState:this.valueState,valid:n})&&(this.valueState=i)}_preciseValue(e){const t=10**this.valuePrecision;return Math.round(e*t)/t}_fireChangeEvent(){this._previousValue!==this.value&&(this._previousValue=this.value,this.fireDecoratorEvent("change",{value:this.value}))}_modifyValue(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=this.value+e,void 0!==this.min&&t<this.min&&(t=this.min),void 0!==this.max&&t>this.max&&(t=this.max),t=this._preciseValue(t),t!==this.value&&(this.value=t,this.input.value=t.toFixed(this.valuePrecision),this._validate(),this._setButtonState(),this.focused=!0,this.inputOuter.setAttribute("focused",""),i?this._fireChangeEvent():this.input.focus())}_incValue(e){this._incIconClickable&&e.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(this.step,!0),this._previousValue=this.value)}_decValue(e){this._decIconClickable&&e.isTrusted&&!this.disabled&&!this.readonly&&(this._modifyValue(-this.step,!0),this._previousValue=this.value)}get _isValueWithCorrectPrecision(){const e=this.input.value.includes(".")?".":",",t=this.input.value.split(e);return(t.length>1?t[1].length:0)===this.valuePrecision}_onInputChange(){this._setDefaultInputValueIfNeeded();const e=Number(this.input.value);this._isValueChanged(e)&&this._updateValueAndValidate(e)}_setDefaultInputValueIfNeeded(){if(""===this.input.value){const e=(this.min||0).toFixed(this.valuePrecision);this.input.value=e,this.innerInput.value=e}}_isValueChanged(e){const t=this._isValueWithCorrectPrecision,i=t&&this.valueState===vP.Negative;return this.value!==this._previousValue||this.value!==e||0===e||!t||i}_updateValueAndValidate(e){this.value=e,this._validate(),this._setButtonState(),this._fireChangeEvent()}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}_onkeydown(e){let t=!0;var i;this.disabled||this.readonly||(MT(e)?this._onInputChange():(kT(e)?this._modifyValue(this.step):LT(e)?this._modifyValue(-this.step):jT(e)?(this.value=this._previousValue,this.input.value=this.value.toFixed(this.valuePrecision)):void 0!==this.max&&(((i=e).key?"PageUp"===i.key:33===i.keyCode)&&iM(i,!1,!1,!0)||(e=>(e.key?"ArrowUp"===e.key||"Up"===e.key:38===e.keyCode)&&iM(e,!0,!1,!0))(e))?this._modifyValue(this.max-this.value):void 0!==this.min&&((e=>(e.key?"PageDown"===e.key:34===e.keyCode)&&iM(e,!1,!1,!0))(e)||(e=>(e.key?"ArrowDown"===e.key||"Down"===e.key:40===e.keyCode)&&iM(e,!0,!1,!0))(e))?this._modifyValue(this.min-this.value):OT(e)||FT(e)||UT(e)||zT(e)||(t=!1),t&&e.preventDefault()))}_decSpin(){this._decIconDisabled||this._spinValue(!1,!0)}_incSpin(){this._incIconDisabled||this._spinValue(!0,!0)}_calcWaitTimeout(){return this._speed*=.8,this._waitTimeout=this._waitTimeout-this._speed<50?50:this._waitTimeout-this._speed,this._waitTimeout}_spinValue(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._waitTimeout=500,this._speed=120,this._btnDown=!0),this._spinTimeoutId=setTimeout((()=>{this._btnDown&&(this._spinStarted=!0,this._modifyValue(e?this.step:-this.step),this._setButtonState(),!this._incIconDisabled&&e||!this._decIconDisabled&&!e?this._spinValue(e):(this._resetSpin(),this._fireChangeEvent()))}),this._calcWaitTimeout())}_resetSpin(){clearTimeout(this._spinTimeoutId),this._btnDown=!1,this._spinStarted=!1}_resetSpinOut(){this._btnDown&&(this._resetSpin(),this._fireChangeEvent())}};QL([CT({type:Number})],jL.prototype,"value",void 0),QL([CT({type:Number})],jL.prototype,"min",void 0),QL([CT({type:Number})],jL.prototype,"max",void 0),QL([CT({type:Number})],jL.prototype,"step",void 0),QL([CT()],jL.prototype,"valueState",void 0),QL([CT({type:Boolean})],jL.prototype,"required",void 0),QL([CT({type:Boolean})],jL.prototype,"disabled",void 0),QL([CT({type:Boolean})],jL.prototype,"readonly",void 0),QL([CT()],jL.prototype,"placeholder",void 0),QL([CT()],jL.prototype,"name",void 0),QL([CT({type:Number})],jL.prototype,"valuePrecision",void 0),QL([CT()],jL.prototype,"accessibleName",void 0),QL([CT()],jL.prototype,"accessibleNameRef",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_decIconDisabled",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_incIconDisabled",void 0),QL([CT({type:Boolean})],jL.prototype,"focused",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_inputFocused",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_previousValue",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_waitTimeout",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_speed",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_btnDown",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_spinTimeoutId",void 0),QL([CT({noAttribute:!0})],jL.prototype,"_spinStarted",void 0),QL([TT()],jL.prototype,"valueStateMessage",void 0),QL([xM("@ui5/webcomponents")],jL,"i18nBundle",void 0),jL=VL=QL([ST({tag:"ui5-step-input",formAssociated:!0,renderer:AM,styles:{packageName:"@ui5/webcomponents",fileName:"themes/StepInput.css.ts",content:':host{vertical-align:middle}.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}.inputIcon{color:var(--_ui5-v2-4-0_input_icon_color);cursor:pointer;outline:none;padding:var(--_ui5-v2-4-0_input_icon_padding);border-inline-start:var(--_ui5-v2-4-0_input_icon_border);min-width:1rem;min-height:1rem;border-radius:var(--_ui5-v2-4-0_input_icon_border_radius)}.inputIcon[pressed]{background:var(--_ui5-v2-4-0_input_icon_pressed_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:active{background-color:var(--sapButton_Active_Background);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow);border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);color:var(--_ui5-v2-4-0_input_icon_pressed_color)}.inputIcon:not([pressed]):not(:active):hover{background:var(--_ui5-v2-4-0_input_icon_hover_bg);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}.inputIcon:hover{border-inline-start:var(--_ui5-v2-4-0_select_hover_icon_left_border);box-shadow:var(--_ui5-v2-4-0_input_icon_box_shadow)}:host([readonly]:not([disabled])){border-color:var(--_ui5-v2-4-0_input_readonly_border_color);background:var(--sapField_ReadOnly_BackgroundStyle);background-color:var(--_ui5-v2-4-0_input_readonly_background)}:host([disabled]){opacity:var(--_ui5-v2-4-0_input_disabled_opacity);cursor:default;pointer-events:none;background-color:var(--_ui5-v2-4-0-input_disabled_background);border-color:var(--_ui5-v2-4-0_input_disabled_border_color)}:host([value-state="Negative"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow)}:host([value-state="Critical"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow)}:host([value-state="Information"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow)}:host([value-state="Positive"]) .inputIcon:not([pressed]):not(:active):hover{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow)}:host([value-state="Negative"]:not([readonly]):not([disabled])){background:var(--sapField_InvalidBackgroundStyle);background-color:var(--sapField_InvalidBackground);border-color:var(--_ui5-v2-4-0_input_value_state_error_border_color);box-shadow:var(--sapField_InvalidShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled])){background:var(--sapField_WarningBackgroundStyle);background-color:var(--sapField_WarningBackground);border-color:var(--_ui5-v2-4-0_input_value_state_warning_border_color);box-shadow:var(--sapField_WarningShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled])){background:var(--sapField_SuccessBackgroundStyle);background-color:var(--sapField_SuccessBackground);border-color:var(--_ui5-v2-4-0_input_value_state_success_border_color);border-width:var(--_ui5-v2-4-0_input_value_state_success_border_width);box-shadow:var(--sapField_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled])){background:var(--sapField_InformationBackgroundStyle);background-color:var(--sapField_InformationBackground);border-color:var(--_ui5-v2-4-0_input_value_state_information_border_color);border-width:var(--_ui5-v2-4-0_input_information_border_width);box-shadow:var(--sapField_InformationShadow)}:host([value-state="Negative"]) .inputIcon:active,:host([value-state="Negative"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_error_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_error_pressed_color)}:host([value-state="Critical"]) .inputIcon:active,:host([value-state="Critical"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_warning_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_warning_pressed_color)}:host([value-state="Information"]) .inputIcon:active,:host([value-state="Information"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_information_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_information_pressed_color)}:host([value-state="Positive"]) .inputIcon:active,:host([value-state="Positive"]) .inputIcon[pressed]{box-shadow:var(--_ui5-v2-4-0_input_success_icon_box_shadow);color:var(--_ui5-v2-4-0_input_icon_success_pressed_color)}:host([value-state="Negative"]) .inputIcon,:host([value-state="Critical"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_error_warning_icon_padding)}:host([value-state="Information"]) .inputIcon{padding:var(--_ui5-v2-4-0_input_information_icon_padding)}:host(:not([hidden])){display:inline-block;width:100%;line-height:normal;letter-spacing:normal;word-spacing:normal}:host{--ui5-v2-4-0_input_focus_pseudo_element_content: none;color:var(--sapField_TextColor);background-color:var(--sapField_Background);border:var(--_ui5-v2-4-0_step_input_border_style);border-radius:var(--sapField_BorderCornerRadius);box-sizing:border-box;height:var(--_ui5-v2-4-0_input_height);position:relative;margin:var(--_ui5-v2-4-0_input_margin_top_bottom) 0;min-width:var(--_ui5-v2-4-0_step_input_min_width);text-align:right;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}:host .ui5-step-input-input{text-align:inherit;height:inherit}:host(:not([value-state]):not([readonly]):not([disabled])){box-shadow:none}:host(:not([value-state]):not([readonly]):not([disabled]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0_step_input_border_color_hover);border:var(--_ui5-v2-4-0_step_input_border_hover)}:host(:not([value-state]):not([readonly]):not([disabled]):not([focused]):hover),:host([value-state="None"]:not([readonly]):not([disabled]):not([focused]):hover){background-color:var(--sapField_Hover_Background);border:var(--_ui5-v2-4-0_step_input_border_style_hover);box-shadow:var(--sapField_Hover_Shadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InformationShadow)}:host([value-state="Critical"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Negative"]:not([readonly]):not([disabled]):not([focused]):hover){box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Positive"]:not([readonly]):not([disabled]):hover),:host([value-state="Negative"]:not([readonly]):not([disabled]):hover),:host([value-state="Information"]:not([readonly]):not([disabled]):hover),:host([value-state="Critical"]:not([readonly]):not([disabled]):hover){background-color:var(--_ui5-v2-4-0-step_input_button_state_hover_background_color)}:host(:not([value-state]):not([readonly]):not([disabled])[focused]),:host([value-state="None"]:not([readonly]):not([disabled])[focused]),:host([value-state="Positive"]:not([readonly]):not([disabled])[focused]),:host([value-state="Negative"]:not([readonly]):not([disabled])[focused]),:host([value-state="Information"]:not([readonly]):not([disabled])[focused]),:host([value-state="Critical"]:not([readonly]):not([disabled])[focused]){background-color:var(--sapField_Focus_Background)}:host([value-state="Positive"]:not([readonly]):not([disabled])):after,:host([value-state="Negative"]:not([readonly]):not([disabled])):after,:host([value-state="None"]:not([readonly]):not([disabled])):after,:host([value-state="Information"]:not([readonly]):not([disabled])):after,:host([value-state="Critical"]:not([readonly]):not([disabled])):after{position:absolute;content:"";inset:-1px;outline:none;pointer-events:none;border-radius:var(--sapField_BorderCornerRadius);border-style:var(--_ui5-v2-4-0_input_error_warning_border_style);z-index:1;border-width:0px}:host([value-state="Information"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InformationColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state="Critical"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_WarningColor);border-width:2px}:host([value-state="Positive"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_SuccessColor);border-width:1px}:host([value-state="Negative"]:not([readonly]):not([disabled])):after{border-color:var(--sapField_InvalidColor);border-width:var(--_ui5-v2-4-0_input_information_border_width)}:host([value-state]):after{border-width:var(--_ui5-v2-4-0_input_state_border_width)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input{background-color:var(--_ui5-v2-4-0_input_input_background_color)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input:hover{background-color:var(--_ui5-v2-4-0_step_input_input_error_background_color)}:host([value-state]:not([value-state="None"]) .ui5-step-input-input[focused]){outline:none}:host .ui5-step-input-input{width:100%;color:inherit;background-color:inherit;border:var(--_ui5-v2-4-0_step_input_input_border);box-sizing:border-box;vertical-align:top;margin-top:var(--_ui5-v2-4-0_step_input_input_margin_top);min-width:var(--_ui5-v2-4-0_step_input_min_width);padding-inline-start:var(--_ui5-v2-4-0_step_input_padding);padding-inline-end:var(--_ui5-v2-4-0_step_input_padding);position:relative;outline:none;line-height:inherit;letter-spacing:inherit;word-spacing:inherit}:host .ui5-step-input-input[readonly]{padding:0}:host .ui5-step-input-input:hover,:host .ui5-step-input-input[focused]{box-shadow:none}:host .ui5-step-input-root{white-space:nowrap;line-height:inherit;letter-spacing:inherit;word-spacing:inherit;height:inherit}:host .ui5-step-input-input[text-align=left]{text-align:left}:host .ui5-step-input-input[text-align=center]{text-align:center}:host .ui5-step-input-input[text-align=right]{text-align:right}:host .ui5-step-icon{position:absolute;display:var(--_ui5-v2-4-0_step_input_button_display);height:2rem;height:100%;background-color:var(--_ui5-v2-4-0_step_input_button_background_color);z-index:0}:host .ui5-step-icon[focused]{border:none;outline:none}:host .ui5-step-icon.ui5-step-dec{left:var(--_ui5-v2-4-0_step_input_button_left);z-index:1}:host .ui5-step-icon.ui5-step-inc{right:var(--_ui5-v2-4-0_step_input_button_right)}:host .ui5-step-icon *:not([clickable]),:host .ui5-step-icon *:not([clickable]):active,:host .ui5-step-icon *:not([clickable]):hover{opacity:.5;background-color:transparent;color:var(--sapContent_IconColor)}:host .ui5-step-icon :not([clickable]) *:hover,:host .ui5-step-icon :not([clickable]) *:active{background-color:var(--sapField_Background);color:var(--sapContent_IconColor)}:host .ui5-step-input-input[focused]:after{position:absolute;content:"";border:var(--_ui5-v2-4-0_step_input_input_border_focused_after);top:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);right:0;bottom:var(--_ui5-v2-4-0_step_input_input_border_top_bottom_focused_after);border-radius:var(--_ui5-v2-4-0_step_input_input_border_radius_focused_after);left:0;outline:none;pointer-events:none;z-index:1}:host .ui5-step-input-input[focused]{outline:none}:host([value-state="Information"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_information_border_color_focused_after)}:host([value-state="Critical"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_warning_border_color_focused_after)}:host([value-state="Positive"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_success_border_color_focused_after)}:host([value-state="Negative"]:not([readonly]):not([disabled])) .ui5-step-input-input[focused]:after{border-color:var(--_ui5-v2-4-0_step_input_input_error_border_color_focused_after)}:host .ui5-step-input-input::-webkit-outer-spin-button,:host .ui5-step-input-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}:host([disabled]) .ui5-step-icon{background-color:var(--_ui5-v2-4-0_step_input_disabled_button_background)}:host([disabled]) .ui5-step-icon [ui5-icon]{color:var(--sapField_ReadOnly_BorderColor)}\n'},template:function(e,t,i){return i?vM`<div id="${_M(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:zL.call(this,e,t,i)}<${bM("ui5-input",t,i)} id="${_M(this._id)}-inner" class="ui5-step-input-input" placeholder="${_M(this.placeholder)}" type="${_M(this.type)}" value="${_M(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${_M(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${_M(this.accInfo)}" ._nativeInputAttributes="${_M(this.inputAttributes)}" @ui5-change="${_M(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?HL.call(this,e,t,i):void 0}</${bM("ui5-input",t,i)}>${this.readonly?void 0:GL.call(this,e,t,i)}</div>`:vM`<div id="${_M(this._id)}" class="ui5-step-input-root" @keydown="${this._onkeydown}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}">${this.readonly?void 0:zL.call(this,e,t,i)}<ui5-input id="${_M(this._id)}-inner" class="ui5-step-input-input" placeholder="${_M(this.placeholder)}" type="${_M(this.type)}" value="${_M(this._displayValue)}" ?disabled="${this.disabled}" ?required="${this.required}" ?readonly="${this.readonly}" value-state="${_M(this.valueState)}" data-sap-focus-ref ._inputAccInfo ="${_M(this.accInfo)}" ._nativeInputAttributes="${_M(this.inputAttributes)}" @ui5-change="${_M(this._onInputChange)}" @focusout="${this._onInputFocusOut}" @focusin="${this._onInputFocusIn}">${this.valueStateMessage.length?HL.call(this,e,t,i):void 0}</ui5-input>${this.readonly?void 0:GL.call(this,e,t,i)}</div>`},dependencies:[cB,dL]}),ET("change",{bubbles:!0}),ET("value-state-change",{detail:{valueState:{type:String},valid:{type:Boolean}},bubbles:!0,cancelable:!0})],jL),jL.define();var qL=Object.defineProperty,WL=Object.getOwnPropertyDescriptor,$L=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?WL(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&qL(t,i,o),o};let XL=class extends Ce{constructor(){super(...arguments),this.isColumnMode=!1}render(){return ie`
      <div
        id="layout"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div class="input-row">
          <ui5-label show-colon>Show Axes</ui5-label>
          <ui5-checkbox
            ?checked="${this.environmentSettings.showAxes}"
            @change="${this._handleShowAxesStateChanged}"
          ></ui5-checkbox>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div>
          <div class="input-row">
              <ui5-label show-colon for="color-palette-current"
                >Background Color</ui5-label
              >
              <ui5-color-palette-item
                value=${this.environmentSettings.backgroundColor[0]}
              @click=${this._toggleColorPalette}
                id="color-palette-current"
              ></ui5-color-palette-item>
          </div>
          <ui5-color-palette-popover
            id="colorPalettePopover"
            show-more-colors=""
            @item-click=${this._handleColorChanged}
          >
            <ui5-color-palette-item value="#444444"></ui5-color-palette-item>
            <ui5-color-palette-item value="lightpink"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(216,124,172)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#6c666d"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(55,81,95)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="#0072bb"></ui5-color-palette-item>
            <ui5-color-palette-item value="powderblue"></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(143,201,58)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item
              value="rgb(195,172,206)"
            ></ui5-color-palette-item>
            <ui5-color-palette-item value="orange"></ui5-color-palette-item>
          </ui5-color-palette-popover>
          <div class="input-row">
            <ui5-label show-colon>Gradient Effect</ui5-label>
            <ui5-checkbox
              ?checked="${this.environmentSettings.applyGradient}"
              @change="${this._handleApplyGradientStateChanged}"
            ></ui5-checkbox>
          </div>
        </div>
        <div
          id="divider"
          class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        ></div>
        <div class="input-row">
          <ui5-label show-colon>Light [%]</ui5-label>
          <ui5-step-input
            value="100"
            min="0"
            max="500"
            step="10"
            @change="${this._handleBrightnessChanged}"
          ></ui5-step-input>
        </div>
      </div>
    `}_toggleColorPalette(){null!==this.colorPalettePopover&&(void 0===this.colorPalettePopover.opener&&(this.colorPalettePopover.opener=this.colorPaletteToggle),this.colorPalettePopover.open=!this.colorPalettePopover.open)}_handleColorChanged(e){this.environmentSettings.backgroundColor=e.detail.color,this.requestUpdate()}_handleShowAxesStateChanged(e){this.environmentSettings.showAxes=e.target.checked}_handleApplyGradientStateChanged(e){this.environmentSettings.applyGradient=e.target.checked}_handleBrightnessChanged(e){this.environmentSettings.brightness=e.detail.value/100}};XL.styles=x`
    :host {
      height: 100%;
      width: 100%;
    }

    #divider.ver-orientation {
      border-top: 0.05rem solid darkgrey;
    }

    #divider.hor-orientation {
      border-left: 0.05rem solid darkgrey;
    }

    #layout.ver-orientation {
      flex-direction: column;
    }

    #layout.hor-orientation {
      flex-direction: row;
    }

    #layout {
      position: relative;
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
    }

    .input-row {
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .ver-orientation > .input-row {
      width: 11rem;
    }
  `,$L([Ie({type:Boolean})],XL.prototype,"isColumnMode",2),$L([Ie({type:Object})],XL.prototype,"environmentSettings",2),$L([Be("#colorPalettePopover")],XL.prototype,"colorPalettePopover",2),$L([Be("#color-palette-current")],XL.prototype,"colorPaletteToggle",2),XL=$L([Te("environment-settings")],XL);var YL=Object.defineProperty,KL=Object.getOwnPropertyDescriptor,ZL=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?KL(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&YL(t,i,o),o};let JL=class extends Ce{constructor(){super(...arguments),this.isColumnMode=!1,this.isAutoRotationDisabled=!1,this._userAutoRotationOn=!1}render(){return ie`
    <div id="layout" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}">
      <div>    
        <ui5-title level="H5">3D</ui5-title>
        <div class = "input-row" >
          <ui5-label for="xOrientation" show-colon>X [&deg;]</ui5-label>
          <ui5-step-input id="xOrientation" value="0" min="0" max="359" step="10" @change="${this.handleXOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="yOrientation" show-colon>Y [&deg;]</ui5-label>
          <ui5-step-input id="yOrientation" value="0" min="0" max="359" step="10" @change="${this.handleYOrientationChanged}"></ui5-step-input>
        </div>
        <div class = "input-row" >
          <ui5-label for="zOrientation" show-colon>Z [&deg;]</ui5-label>
          <ui5-step-input id="zOrientation" value="0" min="0" max="359" step="10" @change="${this.handleZOrientationChanged}"></ui5-step-input>
        </div>
      </div>
      <div id="divider" class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"></div>
      <div>    
        <ui5-title level="H5">2D</ui5-title>
        <div class = "input-row" >
          <ui5-label show-colon>Auto Rotation</ui5-label>
          <ui5-checkbox id= "autoRotationCheckbox" 
             text="${this.imageRotationSettings.isAutoRotationActivated?"On":"Off"}"
             ?checked="${this.imageRotationSettings.isAutoRotationActivated}" 
             ?disabled="${this.isAutoRotationDisabled}" 
             @change="${this._handleAutoRotationStateChanged}"></ui5-checkbox>
        </div>
        <div class = "input-row"  >
          <ui5-label for="imageAngle" show-colon>&phi; [&deg;]</ui5-label>
          <ui5-step-input id="imageAngle"
           value="${this.imageRotationSettings.isAutoRotationActivated?this.imageRotationSettings.autoRotationAngle:this.imageRotationSettings.userSetRotationAngle}"
            min="-180" max="180" step="10" 
            ?disabled="${this.imageRotationSettings.isAutoRotationActivated}"
            @change="${this._handleRotationValueChanged}"></ui5-step-input>
        </div>
      </div>
    </div>
        `}firstUpdated(){this.imageRotationSettings.on("rotation-angle-changed",(()=>this.requestUpdate()))}updated(e){super.updated(e),e.has("isAutoRotationDisabled")&&(this.isAutoRotationDisabled?(this._userAutoRotationOn=this.imageRotationSettings.isAutoRotationActivated,this.imageRotationSettings.isAutoRotationActivated=!0):this.imageRotationSettings.isAutoRotationActivated!=this._userAutoRotationOn&&(this.imageRotationSettings.isAutoRotationActivated=this._userAutoRotationOn))}_handleRotationValueChanged(e){this.imageRotationSettings.isAutoRotationActivated||(this.imageRotationSettings.userSetRotationAngle=e.detail.value)}_handleAutoRotationStateChanged(e){const t=e.target.checked;this.imageRotationSettings.isAutoRotationActivated!=t&&(this.imageRotationSettings.isAutoRotationActivated=t)}_handleDegreeInput(e){return t=e.detail.value,Math.min(Math.max(Number(t),0),359)*Math.PI/180;var t}handleXOrientationChanged(e){this.modelOrientationSettings.xOrientationInRad=this._handleDegreeInput(e)}handleYOrientationChanged(e){this.modelOrientationSettings.yOrientationInRad=this._handleDegreeInput(e)}handleZOrientationChanged(e){this.modelOrientationSettings.zOrientationInRad=this._handleDegreeInput(e)}};JL.styles=x`
        :host {
          height: 100%;
          width: 100%;
        }

        #divider.ver-orientation {
          border-top: 0.05rem solid darkgrey;
        }

        #divider.hor-orientation {
          border-left: 0.05rem solid darkgrey;
        }

        #layout.ver-orientation{
          flex-direction: column;
        }

        #layout.hor-orientation{
          flex-direction: row;
        }

        #layout{
          position: relative;
          display: flex;
          align-items: stretch;
          gap: 1rem;
        }

        .input-row{
          position: relative;
          display: flex;
          align-items: center;
          width: 11rem; 
          gap: 1rem;
        }
      `,ZL([Ie({type:Boolean})],JL.prototype,"isColumnMode",2),ZL([Ie({type:Boolean})],JL.prototype,"isAutoRotationDisabled",2),ZL([Ie({type:Object})],JL.prototype,"imageRotationSettings",2),ZL([Ie({type:Object})],JL.prototype,"modelOrientationSettings",2),JL=ZL([Te("rotation-settings")],JL);const eD=new WeakMap;let tD=class e{static get tasks(){return eD}static enqueue(e,t){eD.has(e)||eD.set(e,[]),eD.get(e).push(t)}static run(t,i){return eD.has(t)||eD.set(t,[]),i().then((()=>{const i=eD.get(t);if(i.length>0)return e.run(t,i.shift());eD.delete(t)}))}static push(t,i){eD.get(t)?e.enqueue(t,i):e.run(t,i)}};const iD=e=>{let t,i,n,r=null,o=!1;const a=new Promise(((a,s)=>{n=i=>{r=r||i;const s=i-r,l=e.duration-s;if(s<=e.duration){const i=1-l/e.duration;e.advance(i),o||(t=requestAnimationFrame(n))}else e.advance(1),a()},i=()=>{o=!0,cancelAnimationFrame(t),s(new Error("animation stopped"))}})).catch((e=>e));return tD.push(e.element,(()=>("function"==typeof e.beforeStart&&e.beforeStart(),requestAnimationFrame(n),new Promise((e=>{a.then((()=>e()))}))))),{promise:()=>a,stop:()=>i}};let nD;function rD(e,t,i){return vM`<div class="ui5-panel-heading-wrapper${mM(this.classes.stickyHeaderClass)}" role="${_M(this.headingWrapperRole)}" aria-level="${_M(this.headingWrapperAriaLevel)}"><div @click="${this._headerClick}" @keydown="${this._headerKeyDown}" @keyup="${this._headerKeyUp}" class="ui5-panel-header" tabindex="${_M(this.headerTabIndex)}" role="${_M(this.accInfo.role)}" aria-expanded="${_M(this.accInfo.ariaExpanded)}" aria-controls="${_M(this.accInfo.ariaControls)}" aria-labelledby="${_M(this.accInfo.ariaLabelledby)}" part="header">${this.fixed?void 0:oD.call(this,e,t,i)}${this._hasHeader?lD.call(this,e,t,i):cD.call(this,e,t,i)}</div></div>`}function oD(e,t,i){return vM`<div class="ui5-panel-header-button-root">${this._hasHeader?aD.call(this,e,t,i):sD.call(this,e,t,i)}</div>`}function aD(e,t,i){return i?vM`<${bM("ui5-button",t,i)} design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${_M(this.accInfo.button.accessibilityAttributes)} tooltip="${_M(this.accInfo.button.title)}" accessible-name="${_M(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><${bM("ui5-icon",t,i)} class="ui5-panel-header-icon ${mM(this.classes.headerBtn)}" name="slim-arrow-right"></${bM("ui5-icon",t,i)}></div></${bM("ui5-button",t,i)}>`:vM`<ui5-button design="Transparent" class="ui5-panel-header-button ui5-panel-header-button-with-icon" @click="${this._toggleButtonClick}" .accessibilityAttributes=${_M(this.accInfo.button.accessibilityAttributes)} tooltip="${_M(this.accInfo.button.title)}" accessible-name="${_M(this.accInfo.button.ariaLabelButton)}"><div class="ui5-panel-header-icon-wrapper"><ui5-icon class="ui5-panel-header-icon ${mM(this.classes.headerBtn)}" name="slim-arrow-right"></ui5-icon></div></ui5-button>`}function sD(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-panel-header-button ui5-panel-header-icon ${mM(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${_M(this.toggleButtonTitle)}"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-panel-header-button ui5-panel-header-icon ${mM(this.classes.headerBtn)}" name="slim-arrow-right" show-tooltip accessible-name="${_M(this.toggleButtonTitle)}"></ui5-icon>`}function lD(e,t,i){return vM`<slot name="header"></slot>`}function cD(e,t,i){return vM`<div id="${_M(this._id)}-header-title" class="ui5-panel-header-title">${_M(this.headerText)}</div>`}vS((()=>{nD=void 0})),ME("slim-arrow-right",{pathData:"M357.5 233q10 10 10 23t-10 23l-165 165q-6 5-12 5-5 0-11-5-5-6-5-11 0-6 5-12l160-159q3-3 3-6t-3-6l-159-159q-5-5-5-11t5-11 11-5 11 5z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("slim-arrow-right",{pathData:"M186 416q-11 0-18.5-7.5T160 390q0-10 8-18l121-116-121-116q-8-8-8-18 0-11 7.5-18.5T186 96q10 0 17 7l141 134q8 8 8 19t-8 19L203 409q-7 7-17 7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var uD,hD=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let dD=uD=class extends xT{constructor(){super(...arguments),this.fixed=!1,this.collapsed=!1,this.noAnimation=!1,this.accessibleRole="Form",this.headerLevel="H2",this.stickyHeader=!1,this.useAccessibleNameForToggleButton=!1,this._hasHeader=!1,this._contentExpanded=!1,this._animationRunning=!1}onBeforeRendering(){this._animationRunning||(this._contentExpanded=!this.collapsed),this._hasHeader=!!this.header.length}shouldToggle(e){return!this.header.length||e.classList.contains("ui5-panel-header-button")}shouldNotAnimate(){return this.noAnimation||(void 0===nD&&(wS(),nD=AS.animationMode),nD===gS.None)}_headerClick(e){this.shouldToggle(e.target)&&this._toggleOpen()}_toggleButtonClick(e){0===e.x&&0===e.y&&e.stopImmediatePropagation()}_headerKeyDown(e){this.shouldToggle(e.target)&&(MT(e)&&e.preventDefault(),IT(e)&&e.preventDefault())}_headerKeyUp(e){this.shouldToggle(e.target)&&(MT(e)&&this._toggleOpen(),IT(e)&&this._toggleOpen())}_toggleOpen(){if(this.fixed)return;if(this.collapsed=!this.collapsed,this.shouldNotAnimate())return void this.fireDecoratorEvent("toggle");this._animationRunning=!0;const e=this.getDomRef().querySelectorAll(".ui5-panel-content"),t=[];[].forEach.call(e,(e=>{this.collapsed?t.push((e=>{let t,i,n,r,o,a,s,l,c,u,h,d;const p=iD({beforeStart:()=>{const p=e;t=getComputedStyle(p),i=parseFloat(t.paddingTop),n=parseFloat(t.paddingBottom),r=parseFloat(t.marginTop),o=parseFloat(t.marginBottom),a=parseFloat(t.height),s=p.style.overflow,l=p.style.paddingTop,c=p.style.paddingBottom,u=p.style.marginTop,h=p.style.marginBottom,d=p.style.height,p.style.overflow="hidden"},duration:400,element:e,advance:t=>{e.style.paddingTop=i-i*t+"px",e.style.paddingBottom=n-n*t+"px",e.style.marginTop=r-r*t+"px",e.style.marginBottom=o-o*t+"px",e.style.height=a-a*t+"px"}});return p.promise().then((t=>{t instanceof Error||(e.style.overflow=s,e.style.paddingTop=l,e.style.paddingBottom=c,e.style.marginTop=u,e.style.marginBottom=h,e.style.height=d,e.style.display="none")})),p})(e).promise()):t.push((e=>{let t,i,n,r,o,a,s,l,c,u,h,d;const p=iD({beforeStart:()=>{e.style.display="block",t=getComputedStyle(e),i=parseFloat(t.paddingTop),n=parseFloat(t.paddingBottom),r=parseFloat(t.marginTop),o=parseFloat(t.marginBottom),a=parseFloat(t.height),s=e.style.overflow,l=e.style.paddingTop,c=e.style.paddingBottom,u=e.style.marginTop,h=e.style.marginBottom,d=e.style.height,e.style.overflow="hidden",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.style.height="0"},duration:400,element:e,advance:t=>{e.style.display="block",e.style.paddingTop=i*t+"px",e.style.paddingBottom=n*t+"px",e.style.marginTop=r*t+"px",e.style.marginBottom=o*t+"px",e.style.height=a*t+"px"}});return p.promise().then((()=>{e.style.overflow=s,e.style.paddingTop=l,e.style.paddingBottom=c,e.style.marginTop=u,e.style.marginBottom=h,e.style.height=d})),p})(e).promise())})),Promise.all(t).then((()=>{this._animationRunning=!1,this._contentExpanded=!this.collapsed,this.fireDecoratorEvent("toggle")}))}_headerOnTarget(e){return e.classList.contains("sapMPanelWrappingDiv")}get classes(){return{headerBtn:{"ui5-panel-header-button-animated":!this.shouldNotAnimate()},stickyHeaderClass:{"ui5-panel-heading-wrapper-sticky":this.stickyHeader}}}get toggleButtonTitle(){return uD.i18nBundle.getText(dI)}get expanded(){return!this.collapsed}get accRole(){return this.accessibleRole.toLowerCase()}get effectiveAccessibleName(){return"string"==typeof this.accessibleName&&this.accessibleName.length?this.accessibleName:void 0}get accInfo(){return{button:{accessibilityAttributes:{expanded:this.expanded},title:this.toggleButtonTitle,ariaLabelButton:!this.nonFocusableButton&&this.useAccessibleNameForToggleButton?this.effectiveAccessibleName:void 0},ariaExpanded:this.nonFixedInternalHeader?this.expanded:void 0,ariaControls:this.nonFixedInternalHeader?`${this._id}-content`:void 0,ariaLabelledby:this.nonFocusableButton?this.ariaLabelledbyReference:void 0,role:this.nonFixedInternalHeader?"button":void 0}}get ariaLabelledbyReference(){return this.nonFocusableButton&&this.headerText&&!this.fixed?`${this._id}-header-title`:void 0}get fixedPanelAriaLabelledbyReference(){return this.fixed&&!this.effectiveAccessibleName?`${this._id}-header-title`:void 0}get headerAriaLevel(){return this.headerLevel.slice(1)}get headerTabIndex(){return this.header.length||this.fixed?"-1":"0"}get headingWrapperAriaLevel(){return this._hasHeader?void 0:this.headerAriaLevel}get headingWrapperRole(){return this._hasHeader?void 0:"heading"}get nonFixedInternalHeader(){return!this._hasHeader&&!this.fixed}get hasHeaderOrHeaderText(){return this._hasHeader||this.headerText}get nonFocusableButton(){return!this.header.length}get styles(){return{content:{display:this._contentExpanded?"block":"none"}}}};hD([CT()],dD.prototype,"headerText",void 0),hD([CT({type:Boolean})],dD.prototype,"fixed",void 0),hD([CT({type:Boolean})],dD.prototype,"collapsed",void 0),hD([CT({type:Boolean})],dD.prototype,"noAnimation",void 0),hD([CT()],dD.prototype,"accessibleRole",void 0),hD([CT()],dD.prototype,"headerLevel",void 0),hD([CT()],dD.prototype,"accessibleName",void 0),hD([CT({type:Boolean})],dD.prototype,"stickyHeader",void 0),hD([CT({type:Boolean})],dD.prototype,"useAccessibleNameForToggleButton",void 0),hD([CT({type:Boolean})],dD.prototype,"_hasHeader",void 0),hD([CT({type:Boolean,noAttribute:!0})],dD.prototype,"_contentExpanded",void 0),hD([CT({type:Boolean,noAttribute:!0})],dD.prototype,"_animationRunning",void 0),hD([TT()],dD.prototype,"header",void 0),hD([xM("@ui5/webcomponents")],dD,"i18nBundle",void 0),dD=uD=hD([ST({tag:"ui5-panel",fastNavigation:!0,languageAware:!0,renderer:AM,template:function(e,t,i){return vM`<div class="ui5-panel-root" role="${_M(this.accRole)}" aria-label="${_M(this.effectiveAccessibleName)}" aria-labelledby="${_M(this.fixedPanelAriaLabelledbyReference)}">${this.hasHeaderOrHeaderText?rD.call(this,e,t,i):void 0}<div class="ui5-panel-content" id="${_M(this._id)}-content" tabindex="-1" style="${gM(this.styles.content)}" part="content"><slot></slot></div></div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/Panel.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:block}:host{font-family:"72override",var(--sapFontFamily);background-color:var(--sapGroup_TitleBackground);border-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([collapsed])){border-bottom:var(--_ui5-v2-4-0_panel_border_bottom)}:host([fixed]) .ui5-panel-header{padding-left:1rem}.ui5-panel-header{min-height:var(--_ui5-v2-4-0_panel_header_height);width:100%;position:relative;display:flex;justify-content:flex-start;align-items:center;outline:none;box-sizing:border-box;padding-right:var(--_ui5-v2-4-0_panel_header_padding_right);font-family:"72override",var(--sapFontHeaderFamily);font-size:var(--sapGroup_Title_FontSize);font-weight:400;color:var(--sapGroup_TitleTextColor)}.ui5-panel-header-icon{color:var(--_ui5-v2-4-0_panel_icon_color)}.ui5-panel-header-button-animated{transition:transform .4s ease-out}:host(:not([_has-header]):not([fixed])) .ui5-panel-header{cursor:pointer}:host(:not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{content:"";position:absolute;pointer-events:none;z-index:2;border:var(--_ui5-v2-4-0_panel_focus_border);border-radius:var(--_ui5-v2-4-0_panel_border_radius);top:var(--_ui5-v2-4-0_panel_focus_offset);bottom:var(--_ui5-v2-4-0_panel_focus_bottom_offset);left:var(--_ui5-v2-4-0_panel_focus_offset);right:var(--_ui5-v2-4-0_panel_focus_offset)}:host(:not([collapsed]):not([_has-header]):not([fixed])) .ui5-panel-header:focus:after{border-radius:var(--_ui5-v2-4-0_panel_border_radius_expanded)}:host(:not([collapsed])) .ui5-panel-header-button:not(.ui5-panel-header-button-with-icon),:host(:not([collapsed])) .ui5-panel-header-icon-wrapper [ui5-icon]{transform:var(--_ui5-v2-4-0_panel_toggle_btn_rotation)}:host([fixed]) .ui5-panel-header-title{width:100%}.ui5-panel-heading-wrapper.ui5-panel-heading-wrapper-sticky{position:sticky;top:0;background-color:var(--_ui5-v2-4-0_panel_header_background_color);z-index:100;border-radius:var(--_ui5-v2-4-0_panel_border_radius)}.ui5-panel-header-title{width:calc(100% - var(--_ui5-v2-4-0_panel_button_root_width));overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui5-panel-content{padding:var(--_ui5-v2-4-0_panel_content_padding);background-color:var(--sapGroup_ContentBackground);outline:none;border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius);overflow:auto}.ui5-panel-header-button-root{display:flex;justify-content:center;align-items:center;flex-shrink:0;width:var(--_ui5-v2-4-0_panel_button_root_width);height:var(--_ui5-v2-4-0_panel_button_root_height);padding:var(--_ui5-v2-4-0_panel_header_button_wrapper_padding);box-sizing:border-box}:host([fixed]:not([collapsed]):not([_has-header])) .ui5-panel-header,:host([collapsed]) .ui5-panel-header{border-bottom:.0625rem solid var(--sapGroup_TitleBorderColor)}:host([collapsed]) .ui5-panel-header{border-bottom-left-radius:var(--_ui5-v2-4-0_panel_border_radius);border-bottom-right-radius:var(--_ui5-v2-4-0_panel_border_radius)}:host(:not([fixed]):not([collapsed])) .ui5-panel-header{border-bottom:var(--_ui5-v2-4-0_panel_default_header_border)}[ui5-button].ui5-panel-header-button{display:flex;justify-content:center;align-items:center;min-width:initial;height:100%;width:100%}.ui5-panel-header-icon-wrapper{display:flex;justify-content:center;align-items:center}.ui5-panel-header-icon-wrapper,.ui5-panel-header-icon-wrapper .ui5-panel-header-icon{color:inherit}.ui5-panel-header-icon-wrapper,[ui5-button].ui5-panel-header-button-with-icon [ui5-icon]{pointer-events:none}.ui5-panel-root{height:100%;display:flex;flex-direction:column}\n'},dependencies:[RB,cB]}),ET("toggle",{bubbles:!0})],dD),dD.define();let pD=null,fD=!1;const mD=new Set,gD=new Set,_D=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||gD.has(e.target)||(pD=e.target)},vD=()=>{pD=null},yD=()=>{pD=null},AD=e=>{mD.add(e),fD||fD||(document.body.addEventListener("dragstart",_D),document.body.addEventListener("dragend",vD),document.body.addEventListener("drop",yD))},bD=e=>{mD.delete(e),0===mD.size&&fD&&(document.body.removeEventListener("dragstart",_D),document.body.removeEventListener("dragend",vD),document.body.removeEventListener("drop",yD),fD=!1)},xD=()=>pD;var wD=(e=>(e.On="On",e.Before="Before",e.After="After",e))(wD||{}),SD=(e=>(e.Vertical="Vertical",e.Horizontal="Horizontal",e))(SD||{});const CD=(e,t,i,n)=>{const r=Math.abs(e-t),o=Math.abs(e-i),a=Math.abs(e-n);let s=[];switch(Math.min(r,o,a)){case r:s=[wD.Before];break;case o:s=[wD.On,r<a?wD.Before:wD.After];break;case a:s=[wD.After]}return s},ED=(e,t,i)=>{let n=Number.POSITIVE_INFINITY,r=null;for(let d=0;d<e.length;d++){const o=e[d],{left:a,width:s,top:l,height:c}=o.getBoundingClientRect();let u;u=i===SD.Vertical?l+c/2:a+s/2;const h=Math.abs(t-u);h<n&&(n=h,r=o)}if(!r)return null;const{width:o,height:a,left:s,right:l,top:c,bottom:u}=r.getBoundingClientRect();let h;return h=i===SD.Vertical?CD(t,c,c+a/2,u):CD(t,s,s+o/2,l),{element:r,placements:h}},TD=e=>{let t=e;return e.shadowRoot&&e.shadowRoot.activeElement&&(t=e.shadowRoot.activeElement),t};let MD=null;var ID;!function(e){e.None="None",e.Single="Single",e.SingleStart="SingleStart",e.SingleEnd="SingleEnd",e.SingleAuto="SingleAuto",e.Multiple="Multiple",e.Delete="Delete"}(ID||(ID={}));const BD=ID;var RD;!function(e){e.Button="Button",e.Scroll="Scroll",e.None="None"}(RD||(RD={}));const PD=RD;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var kD=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let LD=class extends xT{get _positionProperty(){return this.orientation===SD.Vertical?"left":"top"}constructor(){super(),this.targetReference=null,this.ownerReference=null,this.placement="Before",this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference)return void Object.assign(this.style,{display:"none"});const{left:e,width:t,right:i,top:n,bottom:r,height:o}=this.targetReference.getBoundingClientRect(),{top:a,height:s}=this.ownerReference.getBoundingClientRect(),l={display:"",[this._positionProperty]:"",width:"",height:""};let c=0,u=!1,h=!1;if(this.orientation===SD.Vertical){switch(this.placement){case wD.Before:c=e;break;case wD.On:l.width=`${t}px`,c=e;break;case wD.After:c=i}l.height=`${o}px`}if(this.orientation===SD.Horizontal){switch(this.placement){case wD.Before:c=n;break;case wD.On:l.height=`${o}px`,c=n;break;case wD.After:c=r}l.width=`${t}px`,c-=a,c<=0&&(h=!0),c>=s&&(u=!0)}l[this._positionProperty]=`${c}px`,this.toggleAttribute("first",h),this.toggleAttribute("last",u),Object.assign(this.style,l)}get classes(){return{root:{"ui5-di-rect":this.placement===wD.On,"ui5-di-needle":this.placement!==wD.On}}}};kD([CT({type:Object})],LD.prototype,"targetReference",void 0),kD([CT({type:Object})],LD.prototype,"ownerReference",void 0),kD([CT()],LD.prototype,"placement",void 0),kD([CT()],LD.prototype,"orientation",void 0),LD=kD([ST({tag:"ui5-drop-indicator",renderer:AM,styles:{packageName:"@ui5/webcomponents",fileName:"themes/DropIndicator.css.ts",content:':host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}\n'},template:function(e,t,i){return vM`<div class="${mM(this.classes.root)}"></div>`},dependencies:[]})],LD),LD.define();const DD=LD;var ND;!function(e){e.All="All",e.Inner="Inner",e.None="None"}(ND||(ND={}));const OD=ND;var FD;!function(e){e.Top="Top",e.Bottom="Bottom"}(FD||(FD={}));const UD=FD;function zD(e,t,i){return vM`<div class="ui5-busy-indicator-busy-area" title="${_M(this.ariaTitle)}" tabindex="0" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Busy" aria-labelledby="${_M(this.labelId)}" data-sap-focus-ref>${this.textPosition.top?HD.call(this,e,t,i):void 0}<div class="ui5-busy-indicator-circles-wrapper"><div class="ui5-busy-indicator-circle circle-animation-0"></div><div class="ui5-busy-indicator-circle circle-animation-1"></div><div class="ui5-busy-indicator-circle circle-animation-2"></div></div>${this.textPosition.bottom?VD.call(this,e,t,i):void 0}</div>`}function HD(e,t,i){return vM`${this.text?GD.call(this,e,t,i):void 0}`}function GD(e,t,i){return i?vM`<${bM("ui5-label",t,i)} id="${_M(this._id)}-label" class="ui5-busy-indicator-text">${_M(this.text)}</${bM("ui5-label",t,i)}>`:vM`<ui5-label id="${_M(this._id)}-label" class="ui5-busy-indicator-text">${_M(this.text)}</ui5-label>`}function VD(e,t,i){return vM`${this.text?QD.call(this,e,t,i):void 0}`}function QD(e,t,i){return i?vM`<${bM("ui5-label",t,i)} id="${_M(this._id)}-label" class="ui5-busy-indicator-text">${_M(this.text)}</${bM("ui5-label",t,i)}>`:vM`<ui5-label id="${_M(this._id)}-label" class="ui5-busy-indicator-text">${_M(this.text)}</ui5-label>`}function jD(e,t,i){return vM`<span data-ui5-focus-redirect tabindex="0" @focusin="${this._redirectFocus}"></span>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var qD,WD=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let $D=qD=class extends xT{constructor(){super(),this.size="M",this.active=!1,this.delay=1e3,this.textPlacement="Bottom",this._isBusy=!1,this._keydownHandler=this._handleKeydown.bind(this),this._preventEventHandler=this._preventEvent.bind(this)}onEnterDOM(){this.addEventListener("keydown",this._keydownHandler,{capture:!0}),this.addEventListener("keyup",this._preventEventHandler,{capture:!0}),NC()&&this.setAttribute("desktop","")}onExitDOM(){this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this.removeEventListener("keydown",this._keydownHandler,!0),this.removeEventListener("keyup",this._preventEventHandler,!0)}get ariaTitle(){return qD.i18nBundle.getText(RM)}get labelId(){return this.text?`${this._id}-label`:void 0}get classes(){return{root:{"ui5-busy-indicator-root":!0}}}get textPosition(){return{top:this.text&&this.textPlacement===UD.Top,bottom:this.text&&this.textPlacement===UD.Bottom}}onBeforeRendering(){this.active?this._isBusy||this._busyTimeoutId||(this._busyTimeoutId=setTimeout((()=>{delete this._busyTimeoutId,this._isBusy=!0}),Math.max(0,this.delay))):(this._busyTimeoutId&&(clearTimeout(this._busyTimeoutId),delete this._busyTimeoutId),this._isBusy=!1)}_handleKeydown(e){this._isBusy&&(e.stopImmediatePropagation(),qT(e)&&(this.focusForward=!0,this.shadowRoot.querySelector("[data-ui5-focus-redirect]").focus(),this.focusForward=!1))}_preventEvent(e){this._isBusy&&e.stopImmediatePropagation()}_redirectFocus(e){this.focusForward||(e.preventDefault(),this.shadowRoot.querySelector(".ui5-busy-indicator-busy-area").focus())}};WD([CT()],$D.prototype,"text",void 0),WD([CT()],$D.prototype,"size",void 0),WD([CT({type:Boolean})],$D.prototype,"active",void 0),WD([CT({type:Number})],$D.prototype,"delay",void 0),WD([CT()],$D.prototype,"textPlacement",void 0),WD([CT({type:Boolean})],$D.prototype,"_isBusy",void 0),WD([xM("@ui5/webcomponents")],$D,"i18nBundle",void 0),$D=qD=WD([ST({tag:"ui5-busy-indicator",languageAware:!0,styles:{packageName:"@ui5/webcomponents",fileName:"themes/BusyIndicator.css.ts",content:':host(:not([hidden])){display:inline-block}:host([_is-busy]){color:var(--_ui5-v2-4-0_busy_indicator_color)}:host([size="S"]) .ui5-busy-indicator-root{min-width:1.625rem;min-height:.5rem}:host([size="S"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:1.75rem}:host([size="S"]) .ui5-busy-indicator-circle{width:.5rem;height:.5rem}:host([size="S"]) .ui5-busy-indicator-circle:first-child,:host([size="S"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.0625rem}:host(:not([size])) .ui5-busy-indicator-root,:host([size="M"]) .ui5-busy-indicator-root{min-width:3.375rem;min-height:1rem}:host([size="M"]) .ui5-busy-indicator-circle:first-child,:host([size="M"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.1875rem}:host(:not([size])[text]:not([text=""])) .ui5-busy-indicator-root,:host([size="M"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:2.25rem}:host(:not([size])) .ui5-busy-indicator-circle,:host([size="M"]) .ui5-busy-indicator-circle{width:1rem;height:1rem}:host([size="L"]) .ui5-busy-indicator-root{min-width:6.5rem;min-height:2rem}:host([size="L"]) .ui5-busy-indicator-circle:first-child,:host([size="L"]) .ui5-busy-indicator-circle:nth-child(2){margin-inline-end:.25rem}:host([size="L"][text]:not([text=""])) .ui5-busy-indicator-root{min-height:3.25rem}:host([size="L"]) .ui5-busy-indicator-circle{width:2rem;height:2rem}.ui5-busy-indicator-root{display:flex;justify-content:center;align-items:center;position:relative;background-color:inherit;height:inherit;border-radius:inherit}.ui5-busy-indicator-busy-area{position:absolute;z-index:99;inset:0;display:flex;justify-content:center;align-items:center;background-color:inherit;flex-direction:column;border-radius:inherit}:host(:not(:empty)) .ui5-busy-indicator-busy-area{background-color:var(--_ui5-v2-4-0_busy_indicator_block_layer)}:host([desktop]) .ui5-busy-indicator-busy-area:focus,.ui5-busy-indicator-busy-area:focus-visible{outline:var(--_ui5-v2-4-0_busy_indicator_focus_outline);outline-offset:-2px}.ui5-busy-indicator-circles-wrapper{line-height:0}.ui5-busy-indicator-circle{display:inline-block;background-color:currentColor;border-radius:50%}.ui5-busy-indicator-circle:before{content:"";width:100%;height:100%;border-radius:100%}.circle-animation-0{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11)}.circle-animation-1{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.2s}.circle-animation-2{animation:grow 1.6s infinite cubic-bezier(.32,.06,.85,1.11);animation-delay:.4s}.ui5-busy-indicator-text{width:100%;text-align:center}:host([text-placement="Top"]) .ui5-busy-indicator-text{margin-bottom:.5rem}:host(:not([text-placement])) .ui5-busy-indicator-text,:host([text-placement="Bottom"]) .ui5-busy-indicator-text{margin-top:.5rem}@keyframes grow{0%,50%,to{-webkit-transform:scale(.5);-moz-transform:scale(.5);transform:scale(.5)}25%{-webkit-transform:scale(1);-moz-transform:scale(1);transform:scale(1)}}\n'},renderer:AM,template:function(e,t,i){return vM`<div class="${mM(this.classes.root)}">${this._isBusy?zD.call(this,e,t,i):void 0}<slot></slot>${this._isBusy?jD.call(this,e,t,i):void 0}</div> `},dependencies:[_P]})],$D),$D.define();const XD=$D;function YD(e,t,i){return vM`<slot name="header" />`}function KD(e,t,i){return vM`<header id="${_M(this.headerID)}" class="ui5-list-header">${_M(this.headerText)}</header>`}function ZD(e,t,i){return vM`<div id="${_M(this._id)}-before" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function JD(e,t,i){return vM`<li tabindex="0" id="${_M(this._id)}-nodata" class="ui5-list-nodata"><div id="${_M(this._id)}-nodata-text" class="ui5-list-nodata-text">${_M(this.noDataText)}</div></li>`}function eN(e,t,i){return vM`<div growing-button part="growing-button"><div part="growing-button-inner" tabindex="0" role="button" id="${_M(this._id)}-growing-btn" aria-labelledby="${_M(this._id)}-growingButton-text" ?active="${this._loadMoreActive}" @click="${this._onLoadMoreClick}" @keydown="${this._onLoadMoreKeydown}" @keyup="${this._onLoadMoreKeyup}" @mousedown="${this._onLoadMoreMousedown}" @mouseup="${this._onLoadMoreMouseup}" growing-button-inner>${this.loading?tN.call(this,e,t,i):void 0}<span id="${_M(this._id)}-growingButton-text" growing-button-text>${_M(this._growingButtonText)}</span></div></div>`}function tN(e,t,i){return i?vM`<${bM("ui5-busy-indicator",t,i)} delay="${_M(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></${bM("ui5-busy-indicator",t,i)}>`:vM`<ui5-busy-indicator delay="${_M(this.loadingDelay)}" class="ui5-list-growing-button-busy-indicator" active></ui5-busy-indicator>`}function iN(e,t,i){return vM`<footer id="${_M(this._id)}-footer" class="ui5-list-footer">${_M(this.footerText)}</footer>`}function nN(e,t,i){return vM`<div id="${_M(this._id)}-after" tabindex="0" role="none" class="ui5-list-focusarea"></div>`}function rN(e,t,i){return i?vM`<${bM("ui5-li-group-header",t,i)} ?focused="${this.focused}" part="header">${this.hasFormattedHeader?oN.call(this,e,t,i):aN.call(this,e,t,i)}</${bM("ui5-li-group-header",t,i)}>`:vM`<ui5-li-group-header ?focused="${this.focused}" part="header">${this.hasFormattedHeader?oN.call(this,e,t,i):aN.call(this,e,t,i)}</ui5-li-group-header>`}function oN(e,t,i){return vM`<slot name="header"></slot>`}function aN(e,t,i){return vM`${_M(this.headerText)}`}var sN;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),ME("edit",{pathData:"M475 104q5 7 5 12 0 6-5 11L150 453q-4 4-8 4L32 480l22-110q0-5 4-9L384 36q4-4 11-4t11 4zm-34 11l-46-44-64 64 45 45zm-87 88l-46-45L84 381l46 46z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("edit",{pathData:"M505 94q7 9 7 18 0 11-6 17L130 505q-7 7-18 7H26q-11 0-18.5-7.5T0 486v-86q1-5 1.5-8.5T6 384L382 7q9-7 18-7t18 7zM364 198l-50-50L62 400l50 50zm86-86l-50-50-50 50 50 50z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"}),function(e){e.None="None",e.Positive="Positive",e.Critical="Critical",e.Negative="Negative",e.Information="Information"}(sN||(sN={}));const lN=sN;var cN;!function(e){e.Inactive="Inactive",e.Active="Active",e.Detail="Detail",e.Navigation="Navigation"}(cN||(cN={}));const uN=cN,hN=(e,t)=>{const i=t||[];return e&&e.forEach((e=>{if(e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE)return;const t=e;if(!t.hasAttribute("data-sap-no-tab-ref"))if((e=>{if(!e||e.hasAttribute("data-sap-no-tab-ref")||YB(e))return!1;const t=e.getAttribute("tabindex");if(null!=t)return parseInt(t)>=0;const i=e.nodeName.toLowerCase();return!("a"!==i&&!/^(input|select|textarea|button|object)$/.test(i)||e.disabled)})(t)&&i.push(t),"SLOT"===t.tagName)hN(t.assignedNodes(),i);else{const e=t.shadowRoot?t.shadowRoot.children:t.children;hN([...e],i)}})),i};hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var dN=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let pN=class extends xT{constructor(){super(...arguments),this.selected=!1,this.movable=!1,this.hasBorder=!1,this.disabled=!1,this.focused=!1,this.actionable=!1}onEnterDOM(){NC()&&this.setAttribute("desktop","")}onBeforeRendering(){this.actionable=!0}_onfocusin(e){this.fireDecoratorEvent("_request-tabindex-change",e),e.target===this.getFocusDomRef()&&this.fireDecoratorEvent("_focused",e)}_onkeydown(e){return qT(e)?this._handleTabNext(e):WT(e)?this._handleTabPrevious(e):void(this.getFocusDomRef().matches(":has(:focus-within)")||(IT(e)&&e.preventDefault(),MT(e)&&this.fireItemPress(e)))}_onkeyup(e){this.getFocusDomRef().matches(":has(:focus-within)")||IT(e)&&this.fireItemPress(e)}_onclick(e){this.getFocusDomRef().matches(":has(:focus-within)")||this.fireItemPress(e)}fireItemPress(e){!this.disabled&&this._pressable&&(MT(e)&&e.preventDefault(),this.fireDecoratorEvent("_press",{item:this,selected:this.selected,key:e.key}))}_handleTabNext(e){this.shouldForwardTabAfter()&&(this.fireDecoratorEvent("_forward-after")||e.preventDefault())}_handleTabPrevious(e){const t=e.target;this.shouldForwardTabBefore(t)&&this.fireDecoratorEvent("_forward-before")}shouldForwardTabAfter(){const e=(t=this.getFocusDomRef(),hN([...t.children]));var t;return 0===e.length||e[e.length-1]===nM()}shouldForwardTabBefore(e){return this.getFocusDomRef()===e}get classes(){return{main:{"ui5-li-root":!0,"ui5-li--focusable":this._focusable}}}get _ariaDisabled(){return!!this.disabled||void 0}get _focusable(){return!this.disabled}get _pressable(){return!0}get hasConfigurableMode(){return!1}get _effectiveTabIndex(){return this._focusable?this.selected?0:this.forcedTabIndex:-1}};dN([CT({type:Boolean})],pN.prototype,"selected",void 0),dN([CT({type:Boolean})],pN.prototype,"movable",void 0),dN([CT({type:Boolean})],pN.prototype,"hasBorder",void 0),dN([CT()],pN.prototype,"forcedTabIndex",void 0),dN([CT({type:Boolean})],pN.prototype,"disabled",void 0),dN([CT({type:Boolean})],pN.prototype,"focused",void 0),dN([CT({type:Boolean})],pN.prototype,"actionable",void 0),pN=dN([ST({renderer:AM,styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemBase.css.ts",content:':host{box-sizing:border-box;height:var(--_ui5-v2-4-0_list_item_base_height);background-color:var(--ui5-v2-4-0-listitem-background-color);border-bottom:.0625rem solid transparent}:host(:not([hidden])){display:block}:host([disabled]){opacity:var(--_ui5-v2-4-0-listitembase_disabled_opacity);pointer-events:none}:host([actionable]:not([disabled]):not([ui5-li-group-header])){cursor:pointer}:host([has-border]){border-bottom:var(--ui5-v2-4-0-listitem-border-bottom)}:host([selected]){background-color:var(--sapList_SelectionBackgroundColor);border-bottom:var(--ui5-v2-4-0-listitem-selected-border-bottom)}:host([actionable]:not([active]):not([selected]):not([ui5-li-group-header]):hover){background-color:var(--sapList_Hover_Background)}:host([actionable][selected]:not([active],[data-moving]):hover){background-color:var(--sapList_Hover_SelectionBackground)}:host([active][actionable]:not([data-moving])),:host([active][actionable][selected]:not([data-moving])){background-color:var(--sapList_Active_Background)}:host([desktop]:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root.ui5-li--focusable:after,:host(:not([data-moving])) .ui5-li-root.ui5-li--focusable:focus-visible:after,:host([desktop]:not([data-moving])) .ui5-li-root .ui5-li-content:focus:after,:host([desktop][focused]:not([data-moving])) .ui5-li-root .ui5-li-content:after,:host(:not([data-moving])) .ui5-li-root .ui5-li-content:focus-visible:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none}.ui5-li-root{position:relative;display:flex;align-items:center;width:100%;height:100%;padding:var(--_ui5-v2-4-0_list_item_base_padding);box-sizing:border-box;background-color:inherit}.ui5-li-root.ui5-li--focusable{outline:none}.ui5-li-content{display:flex;align-items:center;flex:auto;overflow:hidden;max-width:100%;font-family:"72override",var(--sapFontFamily);color:var(--sapList_TextColor)}.ui5-li-content .ui5-li-title{color:var(--sapList_TextColor);font-size:var(--_ui5-v2-4-0_list_item_title_size)}.ui5-li-text-wrapper{display:flex;flex-direction:row;justify-content:space-between;flex:auto;min-width:1px;line-height:normal}\n'},{packageName:"@ui5/webcomponents",fileName:"themes/DraggableElement.css.ts",content:"[draggable=true]{cursor:grab!important}[draggable=true][data-moving]{cursor:grabbing!important;opacity:var(--sapContent_DisabledOpacity)}\n"}]}),ET("_request-tabindex-change",{bubbles:!0}),ET("_press",{bubbles:!0}),ET("_focused",{bubbles:!0}),ET("_forward-after",{bubbles:!0,cancelable:!0}),ET("_forward-before",{bubbles:!0})],pN);const fN=pN;class mN{static hasGroup(e){return this.groups.has(e)}static getGroup(e){return this.groups.get(e)}static getCheckedRadioFromGroup(e){return this.checkedRadios.get(e)}static removeGroup(e){return this.checkedRadios.delete(e),this.groups.delete(e)}static addToGroup(e,t){this.hasGroup(t)?(this.enforceSingleSelection(e,t),this.getGroup(t)&&this.getGroup(t).push(e)):this.createGroup(e,t),this.updateTabOrder(t)}static removeFromGroup(e,t){const i=this.getGroup(t);if(!i)return;const n=this.getCheckedRadioFromGroup(t);i.forEach(((t,i,n)=>{if(e._id===t._id)return n.splice(i,1)})),n===e&&this.checkedRadios.set(t,null),i.length||this.removeGroup(t),this.updateTabOrder(t)}static createGroup(e,t){e.checked&&this.checkedRadios.set(t,e),this.groups.set(t,[e])}static selectNextItem(e,t){const i=this.getGroup(t);if(!i)return;const n=i.length,r=i.indexOf(e);if(n<=1)return;const o=this._nextSelectable(r,i);o&&this.updateSelectionInGroup(o,t)}static updateFormValidity(e){const t=this.getGroup(e);if(!t)return;const i=t.some((e=>e.required)),n=t.some((e=>e.checked));t.forEach((e=>{e._groupChecked=n,e._groupRequired=i}))}static updateTabOrder(e){const t=this.getGroup(e);if(!t)return;const i=t.some((e=>e.checked));t.filter((e=>!e.disabled)).forEach(((e,t)=>{e._tabIndex=i?e.checked?"0":"-1":0===t?"0":"-1"}))}static selectPreviousItem(e,t){const i=this.getGroup(t);if(!i)return;const n=i.length,r=i.indexOf(e);if(n<=1)return;const o=this._previousSelectable(r,i);o&&this.updateSelectionInGroup(o,t)}static selectItem(e,t){this.updateSelectionInGroup(e,t),this.updateTabOrder(t)}static updateSelectionInGroup(e,t){const i=this.getCheckedRadioFromGroup(t);i&&this._deselectRadio(i),this._selectRadio(e),this.checkedRadios.set(t,e)}static _deselectRadio(e){e&&(e.checked=!1)}static _selectRadio(e){e&&(e.focus(),e.checked=!0,e._checked=!0,e.fireDecoratorEvent("change"))}static _nextSelectable(e,t){if(!t)return null;let i=null;if(e===t.length-1){if(t[0].disabled||t[0].readonly)return this._nextSelectable(1,t);i=t[0]}else{if(t[e+1].disabled||t[e+1].readonly)return this._nextSelectable(e+1,t);i=t[e+1]}return i}static _previousSelectable(e,t){const i=t.length;let n=null;if(0===e){if(t[i-1].disabled||t[i-1].readonly)return this._previousSelectable(i-1,t);n=t[i-1]}else{if(t[e-1].disabled||t[e-1].readonly)return this._previousSelectable(e-1,t);n=t[e-1]}return n}static enforceSingleSelection(e,t){const i=this.getCheckedRadioFromGroup(t);e.checked?i?e!==i&&(this._deselectRadio(i),this.checkedRadios.set(t,e)):this.checkedRadios.set(t,e):e===i&&this.checkedRadios.set(t,null),this.updateTabOrder(t),this.updateFormValidity(t)}static get groups(){return this._groups||(this._groups=new Map),this._groups}static get checkedRadios(){return this._checkedRadios||(this._checkedRadios=new Map),this._checkedRadios}}function gN(e,t,i){return i?vM`<${bM("ui5-label",t,i)} id="${_M(this._id)}-label" class="ui5-radio-label" for="${_M(this._id)}" wrapping-type="${_M(this.wrappingType)}">${_M(this.text)}</${bM("ui5-label",t,i)}>`:vM`<ui5-label id="${_M(this._id)}-label" class="ui5-radio-label" for="${_M(this._id)}" wrapping-type="${_M(this.wrappingType)}">${_M(this.text)}</ui5-label>`}function _N(e,t,i){return vM`<span id="${_M(this._id)}-descr" class="ui5-hidden-text">${_M(this.valueStateText)}</span>`}function vN(e,t,i){return yM`<circle part="outer-ring" class="ui5-radio-svg-outer" cx="50%" cy="50%" r="50%" /><circle part="inner-ring" class="ui5-radio-svg-inner" cx="50%" cy="50%" />`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var yN,AN=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let bN,xN=!1,wN=yN=class extends xT{get formValidityMessage(){return yN.i18nBundle.getText(OI)}get formValidity(){return{valueMissing:this._groupRequired&&!this._groupChecked}}async formElementAnchor(){return this.getFocusDomRefAsync()}get formFormattedValue(){return this.checked?this.value||"on":null}constructor(){super(),this.disabled=!1,this.readonly=!1,this.required=!1,this.checked=!1,this.valueState="None",this.value="",this.wrappingType="Normal",this.active=!1,this._groupChecked=!1,this._groupRequired=!1,this._name="",this._checked=!1,this._deactivate=()=>{bN&&(bN.active=!1)},xN||(document.addEventListener("mouseup",this._deactivate),xN=!0)}onAfterRendering(){this.syncGroup()}onEnterDOM(){NC()&&this.setAttribute("desktop","")}onExitDOM(){this.syncGroup(!0)}syncGroup(e){const t=this._name,i=this.name,n=this._checked,r=this.checked;e&&mN.removeFromGroup(this,t),i!==t?(t&&mN.removeFromGroup(this,t),i&&mN.addToGroup(this,i)):i&&this.isConnected&&mN.enforceSingleSelection(this,i),this.name&&r!==n&&mN.updateTabOrder(this.name),this._name=this.name||"",this._checked=this.checked}_onclick(){return this.toggle()}_handleDown(e){const t=this.name;t&&(e.preventDefault(),mN.selectNextItem(this,t))}_handleUp(e){const t=this.name;t&&(e.preventDefault(),mN.selectPreviousItem(this,t))}_onkeydown(e){if(IT(e))return this.active=!0,e.preventDefault();if(MT(e))return this.active=!0,this.toggle();const t="rtl"===this.effectiveDir;(LT(e)||!t&&PT(e)||t&&RT(e))&&this._handleDown(e),(kT(e)||!t&&RT(e)||t&&PT(e))&&this._handleUp(e)}_onkeyup(e){IT(e)&&this.toggle(),this.active=!1}_onmousedown(){this.active=!0,bN=this}_onmouseup(){this.active=!1}_onfocusout(){this.active=!1}toggle(){return this.canToggle()?this.name?(mN.selectItem(this,this.name),this):(this.checked=!this.checked,this.fireDecoratorEvent("change"),this):this}canToggle(){return!(this.disabled||this.readonly||this.checked)}get classes(){return{inner:{"ui5-radio-inner--hoverable":!this.disabled&&!this.readonly&&NC()}}}get effectiveAriaDisabled(){return this.disabled?"true":null}get ariaLabelText(){return[QI(this),this.text].filter(Boolean).join(" ")}get effectiveAriaDescribedBy(){return this.hasValueState?`${this._id}-descr`:void 0}get hasValueState(){return this.valueState!==vP.None}get valueStateText(){switch(this.valueState){case vP.Negative:return yN.i18nBundle.getText(wI);case vP.Critical:return yN.i18nBundle.getText(SI);case vP.Positive:return yN.i18nBundle.getText(EI);case vP.Information:return yN.i18nBundle.getText(CI);default:return""}}get effectiveTabIndex(){const e=this.getAttribute("tabindex");return this.disabled?"-1":this.name?this._tabIndex:e||"0"}};AN([CT({type:Boolean})],wN.prototype,"disabled",void 0),AN([CT({type:Boolean})],wN.prototype,"readonly",void 0),AN([CT({type:Boolean})],wN.prototype,"required",void 0),AN([CT({type:Boolean})],wN.prototype,"checked",void 0),AN([CT()],wN.prototype,"text",void 0),AN([CT()],wN.prototype,"valueState",void 0),AN([CT()],wN.prototype,"name",void 0),AN([CT()],wN.prototype,"value",void 0),AN([CT()],wN.prototype,"wrappingType",void 0),AN([CT()],wN.prototype,"accessibleName",void 0),AN([CT()],wN.prototype,"accessibleNameRef",void 0),AN([CT()],wN.prototype,"_tabIndex",void 0),AN([CT({type:Boolean})],wN.prototype,"active",void 0),AN([CT({type:Boolean,noAttribute:!0})],wN.prototype,"_groupChecked",void 0),AN([CT({type:Boolean,noAttribute:!0})],wN.prototype,"_groupRequired",void 0),AN([xM("@ui5/webcomponents")],wN,"i18nBundle",void 0),wN=yN=AN([ST({tag:"ui5-radio-button",languageAware:!0,formAssociated:!0,renderer:AM,template:function(e,t,i){return vM`<div class="ui5-radio-root" role="radio" aria-checked="${_M(this.checked)}" aria-disabled="${_M(this.effectiveAriaDisabled)}" aria-describedby="${_M(this.effectiveAriaDescribedBy)}" aria-label="${_M(this.ariaLabelText)}" tabindex="${_M(this.effectiveTabIndex)}" @click="${this._onclick}" @keydown="${this._onkeydown}" @keyup="${this._onkeyup}" @mousedown="${this._onmousedown}" @mouseup="${this._onmouseup}" @focusout="${this._onfocusout}"><div class='ui5-radio-inner ${mM(this.classes.inner)}'><svg class="ui5-radio-svg" focusable="false" aria-hidden="true">${vN.call(this,e,t,i)}</svg><input type='radio' ?required="${this.required}" ?checked="${this.checked}" ?readonly="${this.readonly}" ?disabled="${this.effectiveAriaDisabled}" name="${_M(this.name)}"  data-sap-no-tab-ref/></div>${this.text?gN.call(this,e,t,i):void 0}${this.hasValueState?_N.call(this,e,t,i):void 0}</div>`},styles:{packageName:"@ui5/webcomponents",fileName:"themes/RadioButton.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host(:not([hidden])){display:inline-block}:host{min-width:var(--_ui5-v2-4-0_radio_button_min_width);max-width:100%;text-overflow:ellipsis;overflow:hidden;color:var(--_ui5-v2-4-0_radio_button_color);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([disabled])) .ui5-radio-root{cursor:pointer}:host([checked]){color:var(--_ui5-v2-4-0_radio_button_checked_fill)}:host([checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_inner_ring_color)}:host([checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_color)}:host([disabled]) .ui5-radio-root{color:var(--_ui5-v2-4-0_radio_button_color);opacity:var(--sapContent_DisabledOpacity)}:host([disabled][checked]) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_color)}:host(:not([disabled])[desktop]) .ui5-radio-root:focus:before,:host(:not([disabled])) .ui5-radio-root:focus-visible:before{content:"";display:var(--_ui5-v2-4-0_radio_button_focus_outline);position:absolute;inset:var(--_ui5-v2-4-0_radio_button_focus_dist);pointer-events:none;border:var(--_ui5-v2-4-0_radio_button_border_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_hover_color)}:host(:not([value-state="Negative"]):not([value-state="Critical"]):not([value-state="Positive"]):not([value-state="Information"])[checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}.ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer,:host([checked]) .ui5-radio-root:hover .ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill)}:host([active][checked]:not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_checked_hover_color)}:host([active]:not([checked]):not([value-state]):not([disabled]):not([readonly])) .ui5-radio-svg-outer{stroke:var(--_ui5-v2-4-0_radio_button_outer_ring_active_color)}:host([text]) .ui5-radio-root{padding-inline-end:var(--_ui5-v2-4-0_radio_button_border_width)}:host([text][desktop]) .ui5-radio-root:focus:before,:host([text]) .ui5-radio-root:focus-visible:before{inset-inline-end:0px}:host([text]) .ui5-radio-inner{padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding_with_label)}:host([checked][readonly]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_read_only_inner_ring_color)}:host([readonly]) .ui5-radio-root .ui5-radio-svg-outer{fill:var(--sapField_ReadOnly_Background);stroke:var(--sapField_ReadOnly_BorderColor);stroke-dasharray:var(--_ui5-v2-4-0_radio_button_read_only_border_type);stroke-width:var(--_ui5-v2-4-0_radio_button_read_only_border_width)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-svg-outer{stroke-width:var(--sapField_InvalidBorderWidth)}:host([value-state="Information"]) .ui5-radio-svg-outer{stroke-width:var(--_ui5-v2-4-0_radio_button_information_border_width)}:host([value-state="Negative"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_error_fill)}:host([value-state="Negative"]) .ui5-radio-svg-outer,:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InvalidColor);fill:var(--sapField_InvalidBackground)}:host([value-state="Negative"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_error)}:host([value-state="Critical"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_warning_fill)}:host([value-state="Critical"]) .ui5-radio-svg-outer,:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_WarningColor);fill:var(--sapField_WarningBackground)}:host([value-state="Critical"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_warning)}:host([value-state="Positive"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_success_fill)}:host([value-state="Positive"]) .ui5-radio-svg-outer,:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_SuccessColor);fill:var(--sapField_SuccessBackground)}:host([value-state="Positive"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_success)}:host([value-state="Information"][checked]) .ui5-radio-svg-inner{fill:var(--_ui5-v2-4-0_radio_button_checked_information_fill)}:host([value-state="Information"]) .ui5-radio-svg-outer,:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable:hover .ui5-radio-svg-outer{stroke:var(--sapField_InformationColor);fill:var(--sapField_InformationBackground)}:host([value-state="Information"]) .ui5-radio-root:hover .ui5-radio-inner.ui5-radio-inner--hoverable .ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_hover_fill_information)}:host([value-state="Negative"]) .ui5-radio-root,:host([value-state="Critical"]) .ui5-radio-root,:host([value-state="Information"]) .ui5-radio-root{stroke-dasharray:var(--_ui5-v2-4-0_radio_button_warning_error_border_dash)}.ui5-radio-root{height:auto;position:relative;display:inline-flex;flex-wrap:nowrap;outline:none;max-width:100%;box-sizing:border-box;border:var(--_ui5-v2-4-0_radio_button_border);border-radius:var(--_ui5-v2-4-0_radio_button_border_radius)}.ui5-radio-inner{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_radio_button_outer_ring_padding);flex-shrink:0;height:var(--_ui5-v2-4-0_radio_button_inner_size);font-size:1rem;pointer-events:none;vertical-align:top}.ui5-radio-inner{outline:none}.ui5-radio-inner input{-webkit-appearance:none;visibility:hidden;width:0;left:0;position:absolute;font-size:inherit;margin:0}[ui5-label].ui5-radio-label{display:flex;align-items:center;padding-inline-end:var(--_ui5-v2-4-0_radio_button_label_offset);padding-block:var(--_ui5-v2-4-0_radio_button_label_side_padding);vertical-align:top;max-width:100%;pointer-events:none;color:var(--_ui5-v2-4-0_radio_button_label_color);overflow-wrap:break-word}:host([wrapping-type="None"][text]) .ui5-radio-root{height:var(--_ui5-v2-4-0_radio_button_height)}:host([wrapping-type="None"][text]) [ui5-label].ui5-radio-label{text-overflow:ellipsis;overflow:hidden}.ui5-radio-svg{height:var(--_ui5-v2-4-0_radio_button_svg_size);width:var(--_ui5-v2-4-0_radio_button_svg_size);overflow:visible;pointer-events:none}.ui5-radio-svg-outer{fill:var(--_ui5-v2-4-0_radio_button_outer_ring_bg);stroke:currentColor;stroke-width:var(--_ui5-v2-4-0_radio_button_outer_ring_width)}.ui5-radio-svg-inner{fill:none;r:var(--_ui5-v2-4-0_radio_button_inner_ring_radius)}.ui5-radio-svg-outer,.ui5-radio-svg-inner{flex-shrink:0}:host(.ui5-li-singlesel-radiobtn) .ui5-radio-root .ui5-radio-inner .ui5-radio-svg-outer{fill:var(--sapList_Background)}\n'},dependencies:[_P]}),ET("change",{bubbles:!0})],wN),wN.define();const SN=wN;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var CN,EN=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let TN=CN=class extends fN{constructor(){super(),this.type="Active",this.accessibilityAttributes={},this.navigated=!1,this.active=!1,this.highlight="None",this.accessibleRole="ListItem",this._selectionMode="None",this.deactivateByKey=e=>{MT(e)&&this.deactivate()},this.deactivate=()=>{this.active&&(this.active=!1)},this._ontouchstart={handleEvent:()=>{this._onmousedown()},passive:!0}}onBeforeRendering(){super.onBeforeRendering(),this.actionable=(this.type===uN.Active||this.type===uN.Navigation)&&this._selectionMode!==BD.Delete}onEnterDOM(){super.onEnterDOM(),document.addEventListener("mouseup",this.deactivate),document.addEventListener("touchend",this.deactivate),document.addEventListener("keyup",this.deactivateByKey)}onExitDOM(){document.removeEventListener("mouseup",this.deactivate),document.removeEventListener("keyup",this.deactivateByKey),document.removeEventListener("touchend",this.deactivate)}async _onkeydown(e){if((IT(e)||MT(e))&&this._isTargetSelfFocusDomRef(e))return;super._onkeydown(e);const t=this.type===uN.Active,i=this.typeNavigation;if((IT(e)||MT(e))&&(t||i)&&this.activate(),JT(e)){const e=nM(),t=this.getFocusDomRef();if(e===t){const e=await tR(t);null==e||e.focus()}else t.focus()}}_onkeyup(e){super._onkeyup(e),(IT(e)||MT(e))&&this.deactivate(),this.modeDelete&&$T(e)&&this.onDelete()}_onmousedown(){this.activate()}_onmouseup(){this.getFocusDomRef().matches(":has(:focus-within)")||this.deactivate()}_ontouchend(){this._onmouseup()}_onfocusin(e){super._onfocusin(e),e.target!==this.getFocusDomRef()&&this.deactivate()}_onfocusout(e){e.target===this.getFocusDomRef()&&this.deactivate()}_ondragstart(e){e.dataTransfer&&e.target===this._listItem&&(this.setAttribute("data-moving",""),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move")}_ondragend(e){e.target===this._listItem&&this.removeAttribute("data-moving")}_isTargetSelfFocusDomRef(e){return e.target!==this.getFocusDomRef()}onMultiSelectionComponentPress(e){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:e.target.checked,selectionComponentPressed:!0})}onSingleSelectionComponentPress(e){this.isInactive||this.fireDecoratorEvent("_selection-requested",{item:this,selected:!e.target.checked,selectionComponentPressed:!0})}activate(){this.type!==uN.Active&&this.type!==uN.Navigation||(this.active=!0)}onDelete(){this.fireDecoratorEvent("_selection-requested",{item:this,selectionComponentPressed:!1})}onDetailClick(){this.fireDecoratorEvent("detail-click",{item:this,selected:this.selected})}fireItemPress(e){this.isInactive||super.fireItemPress(e)}get isInactive(){return this.type===uN.Inactive||this.type===uN.Detail}get placeSelectionElementBefore(){return this._selectionMode===BD.Multiple||this._selectionMode===BD.SingleStart}get placeSelectionElementAfter(){return!this.placeSelectionElementBefore&&(this._selectionMode===BD.SingleEnd||this._selectionMode===BD.Delete)}get modeSingleSelect(){return[BD.SingleStart,BD.SingleEnd,BD.Single].includes(this._selectionMode)}get modeMultiple(){return this._selectionMode===BD.Multiple}get modeDelete(){return this._selectionMode===BD.Delete}get renderDeleteButton(){return this.modeDelete}get typeDetail(){return this.type===uN.Detail}get typeNavigation(){return this.type===uN.Navigation}get typeActive(){return this.type===uN.Active}get _ariaSelected(){if(this.modeMultiple||this.modeSingleSelect)return this.selected}get listItemAccessibleRole(){return this.accessibleRole.toLowerCase()}get ariaSelectedText(){let e;return void 0!==this._ariaSelected&&(e=this._ariaSelected?CN.i18nBundle.getText(rI):CN.i18nBundle.getText(oI)),e}get deleteText(){return CN.i18nBundle.getText(YM)}get hasDeleteButtonSlot(){return!!this.deleteButton.length}get _accessibleNameRef(){return this.accessibleName?`${this._id}-invisibleText`:`${this._id}-content ${this._id}-invisibleText`}get _accInfo(){return{role:this.listItemAccessibleRole,ariaExpanded:void 0,ariaLevel:void 0,ariaLabel:CN.i18nBundle.getText(aI),ariaLabelRadioButton:CN.i18nBundle.getText(sI),ariaSelectedText:this.ariaSelectedText,ariaHaspopup:this.accessibilityAttributes.hasPopup,setsize:this.accessibilityAttributes.ariaSetsize,posinset:this.accessibilityAttributes.ariaPosinset,tooltip:this.tooltip}}get _hasHighlightColor(){return this.highlight!==lN.None}get hasConfigurableMode(){return!0}get _listItem(){return this.shadowRoot.querySelector("li")}};EN([CT()],TN.prototype,"type",void 0),EN([CT({type:Object})],TN.prototype,"accessibilityAttributes",void 0),EN([CT({type:Boolean})],TN.prototype,"navigated",void 0),EN([CT()],TN.prototype,"tooltip",void 0),EN([CT({type:Boolean})],TN.prototype,"active",void 0),EN([CT()],TN.prototype,"highlight",void 0),EN([CT({type:Boolean})],TN.prototype,"selected",void 0),EN([CT()],TN.prototype,"accessibleRole",void 0),EN([CT()],TN.prototype,"_selectionMode",void 0),EN([TT()],TN.prototype,"deleteButton",void 0),EN([xM("@ui5/webcomponents")],TN,"i18nBundle",void 0),TN=CN=EN([ST({languageAware:!0,styles:[fN.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemAdditionalText.css.ts",content:".ui5-li-additional-text{margin:0 .25rem;color:var(--sapNeutralTextColor);font-size:var(--sapFontSize);min-width:3.75rem;text-align:end;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\n"},{packageName:"@ui5/webcomponents",fileName:"themes/ListItem.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host([navigated]) .ui5-li-root .ui5-li-navigated{width:.1875rem;position:absolute;right:0;top:0;bottom:0;background-color:var(--sapList_SelectionBorderColor)}:host([active][actionable]) .ui5-li-root .ui5-li-icon{color:var(--sapList_Active_TextColor)}:host([active][actionable]) .ui5-li-title,:host([active][actionable]) .ui5-li-desc,:host([active][actionable]) .ui5-li-additional-text{color:var(--sapList_Active_TextColor)}:host([additional-text-state="Critical"]) .ui5-li-additional-text{color:var(--sapCriticalTextColor)}:host([additional-text-state="Positive"]) .ui5-li-additional-text{color:var(--sapPositiveTextColor)}:host([additional-text-state="Negative"]) .ui5-li-additional-text{color:var(--sapNegativeTextColor)}:host([additional-text-state="Information"]) .ui5-li-additional-text{color:var(--sapInformativeTextColor)}:host([has-title][description]){height:5rem}:host([has-title][image]){height:5rem}:host([_has-image]){height:5rem}:host([image]) .ui5-li-content{height:3rem}::slotted(img[slot="image"]){width:var(--_ui5-v2-4-0_list_item_img_size);height:var(--_ui5-v2-4-0_list_item_img_size);border-radius:var(--ui5-v2-4-0-avatar-border-radius);object-fit:contain}:host([description]) .ui5-li-root{padding:1rem}:host([description]) .ui5-li-content{height:3rem}:host([has-title][description]) .ui5-li-title{padding-bottom:.375rem}.ui5-li-text-wrapper{flex-direction:column}:host([description]) .ui5-li-text-wrapper{height:100%;justify-content:space-between;padding:.125rem 0}.ui5-li-description-info-wrapper{display:flex;justify-content:space-between}.ui5-li-additional-text,:host(:not([wrapping-type="Normal"])) .ui5-li-title,.ui5-li-desc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host([wrapping-type="Normal"]){height:auto}:host([wrapping-type="Normal"]) .ui5-li-content{margin:var(--_ui5-v2-4-0_list_item_content_vertical_offset) 0}.ui5-li-desc{color:var(--sapContent_LabelColor);font-size:var(--sapFontSize)}:host([description]) .ui5-li-additional-text{align-self:flex-end}.ui5-li-image{min-width:var(--_ui5-v2-4-0_list_item_img_size);min-height:var(--_ui5-v2-4-0_list_item_img_size);margin-top:var(--_ui5-v2-4-0_list_item_img_top_margin);margin-bottom:var(--_ui5-v2-4-0_list_item_img_bottom_margin);margin-inline-end:var(--_ui5-v2-4-0_list_item_img_hn_margin)}.ui5-li-icon{min-width:var(--_ui5-v2-4-0_list_item_icon_size);min-height:var(--_ui5-v2-4-0_list_item_icon_size);color:var(--sapContent_NonInteractiveIconColor);padding-inline-end:var(--_ui5-v2-4-0_list_item_icon_padding-inline-end)}.ui5-li-detailbtn,.ui5-li-deletebtn{display:flex;align-items:center;margin-left:var(--_ui5-v2-4-0_list_buttons_left_space)}.ui5-li-multisel-cb,.ui5-li-singlesel-radiobtn{flex-shrink:0}:host([description]) .ui5-li-singlesel-radiobtn{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([description]) .ui5-li-multisel-cb{align-self:flex-start;margin-top:var(--_ui5-v2-4-0_list_item_selection_btn_margin_top)}:host([_selection-mode="SingleStart"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="Multiple"]) .ui5-li-root{padding-inline:0 1rem}:host([_selection-mode="SingleEnd"]) .ui5-li-root{padding-inline:1rem 0}:host [ui5-checkbox].ui5-li-singlesel-radiobtn{margin-right:var(--_ui5-v2-4-0_list_item_cb_margin_right)}.ui5-li-highlight{position:absolute;width:.375rem;bottom:0;left:0;top:0;border-inline-end:.0625rem solid var(--ui5-v2-4-0-listitem-background-color);box-sizing:border-box}:host([highlight="Negative"]) .ui5-li-highlight{background:var(--sapNegativeTextColor)}:host([highlight="Critical"]) .ui5-li-highlight{background:var(--sapCriticalTextColor)}:host([highlight="Positive"]) .ui5-li-highlight{background:var(--sapPositiveTextColor)}:host([highlight="Information"]) .ui5-li-highlight{background:var(--sapInformativeTextColor)}\n'}],dependencies:[RB,SN,IP]}),ET("detail-click",{bubbles:!0}),ET("_focused",{bubbles:!0}),ET("_selection-requested",{bubbles:!0})],TN);const MN=TN;function IN(e,t,i){return vM`<slot></slot>`}function BN(e,t,i){return vM`${this.icon?RN.call(this,e,t,i):void 0}${this.initials?PN.call(this,e,t,i):void 0}`}function RN(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} class="ui5-avatar-icon" name="${_M(this.icon)}"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon class="ui5-avatar-icon" name="${_M(this.icon)}"></ui5-icon>`}function PN(e,t,i){return i?vM`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${_M(this.validInitials)}</span><${bM("ui5-icon",t,i)} class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${_M(this.fallbackIcon)}"></${bM("ui5-icon",t,i)}>`:vM`<span class="ui5-avatar-initials ui5-avatar-initials-hidden">${_M(this.validInitials)}</span><ui5-icon class="ui5-avatar-icon ui5-avatar-icon-fallback ui5-avatar-fallback-icon-hidden" name="${_M(this.fallbackIcon)}"></ui5-icon>`}hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB)),ME("employee",{pathData:"M448 512H64V384q0-26 10-49.5t27.5-41T142 266t50-10h64q-27 0-50-10t-40.5-27.5T138 178t-10-50q0-26 10-49.5t27.5-41T206 10t50-10q26 0 49.5 10t41 27.5 27.5 41 10 49.5q0 27-10 50t-27.5 40.5-41 27.5-49.5 10h64q26 0 49.5 10t41 27.5 27.5 41 10 49.5v128zM256 224q40 0 68-28t28-68-28-68-68-28-68 28-28 68 28 68 68 28zM96 384v96h320v-96q0-40-28-68t-68-28H192q-40 0-68 28t-28 68zm192 32v-32h96v32h-96z",ltr:!1,collection:"SAP-icons-v4",packageName:"@ui5/webcomponents-icons"}),ME("employee",{pathData:"M326 352q11 0 18.5 7.5T352 378t-7.5 18-18.5 7h-12q-11 0-18.5-7t-7.5-18 7.5-18.5T314 352h12zm16-97q48 23 77 67.5t29 99.5v32q0 11-7.5 18.5T422 480H90q-11 0-18.5-7.5T64 454v-32q0-55 29-99.5t77-67.5l-5-4q-18-18-27.5-41.5T128 160q0-27 10-50t27.5-40.5 41-27.5T256 32t49.5 10.5 41 28T374 111t10 49q0 27-11 52t-31 43zm-112 86l-25-15q-13-7-13-19v-6q-34 17-55.5 49T115 422v7h115v-88zm-51-181q0 32 22.5 54.5T256 237t54.5-22.5T333 160t-22.5-54.5T256 83t-54.5 22.5T179 160zm218 262q0-40-21.5-72T320 301v6q0 12-13 19l-26 15v88h116v-7z",ltr:!1,collection:"SAP-icons-v5",packageName:"@ui5/webcomponents-icons"});var kN,LN=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let DN=kN=class extends xT{constructor(){super(),this.disabled=!1,this.interactive=!1,this.fallbackIcon="employee",this.shape="Circle",this.size="S",this.colorScheme="Accent6",this._colorScheme="Accent6",this.accessibilityAttributes={},this._hasImage=!1,this._handleResizeBound=this.handleResize.bind(this)}get tabindex(){return this.forcedTabIndex||(this._interactive?"0":"-1")}get effectiveSize(){return this.getAttribute("size")}get"\u0435ffectiveBackgroundColor"(){return this.getAttribute("color-scheme")||this._colorScheme}get _role(){return this._interactive?"button":"img"}get _ariaHasPopup(){return this._getAriaHasPopup()}get _interactive(){return this.interactive&&!this.disabled}get validInitials(){return this.initials&&/^[a-zA-Z\xe0-\xfc\xc0-\xdc]{1,3}$/.test(this.initials)?this.initials:null}get accessibleNameText(){return this.accessibleName?this.accessibleName:kN.i18nBundle.getText(BM)||void 0}get hasImage(){return this._hasImage=!!this.image.length,this._hasImage}get initialsContainer(){return this.getDomRef().querySelector(".ui5-avatar-initials")}get fallBackIconDomRef(){return this.getDomRef().querySelector(".ui5-avatar-icon-fallback")}onBeforeRendering(){this._onclick=this._interactive?this._onClickHandler.bind(this):void 0}async onAfterRendering(){await KS(),this.initials&&!this.icon&&this._checkInitials()}onEnterDOM(){NC()&&this.setAttribute("desktop",""),this.initialsContainer&&sR.register(this.initialsContainer,this._handleResizeBound)}onExitDOM(){this.initialsContainer&&sR.deregister(this.initialsContainer,this._handleResizeBound)}handleResize(){this.initials&&!this.icon&&this._checkInitials()}_checkInitials(){const e=this.getDomRef(),t=e.querySelector(".ui5-avatar-initials");this.validInitials&&t&&t.scrollWidth<=e.scrollWidth?this.showInitials():this.showFallbackIcon()}showFallbackIcon(){var e,t;null==(e=this.initialsContainer)||e.classList.add("ui5-avatar-initials-hidden"),null==(t=this.fallBackIconDomRef)||t.classList.remove("ui5-avatar-fallback-icon-hidden")}showInitials(){var e,t;null==(e=this.initialsContainer)||e.classList.remove("ui5-avatar-initials-hidden"),null==(t=this.fallBackIconDomRef)||t.classList.add("ui5-avatar-fallback-icon-hidden")}_onClickHandler(e){e.stopPropagation(),this._fireClick()}_onkeydown(e){this._interactive&&(MT(e)&&this._fireClick(),IT(e)&&e.preventDefault())}_onkeyup(e){this._interactive&&!e.shiftKey&&IT(e)&&this._fireClick()}_fireClick(){this.fireDecoratorEvent("click")}_getAriaHasPopup(){const e=this.accessibilityAttributes.hasPopup;if(this._interactive&&e)return e}};LN([CT({type:Boolean})],DN.prototype,"disabled",void 0),LN([CT({type:Boolean})],DN.prototype,"interactive",void 0),LN([CT()],DN.prototype,"icon",void 0),LN([CT()],DN.prototype,"fallbackIcon",void 0),LN([CT()],DN.prototype,"initials",void 0),LN([CT()],DN.prototype,"shape",void 0),LN([CT()],DN.prototype,"size",void 0),LN([CT()],DN.prototype,"colorScheme",void 0),LN([CT()],DN.prototype,"_colorScheme",void 0),LN([CT()],DN.prototype,"accessibleName",void 0),LN([CT({type:Object})],DN.prototype,"accessibilityAttributes",void 0),LN([CT({noAttribute:!0})],DN.prototype,"forcedTabIndex",void 0),LN([CT({type:Boolean})],DN.prototype,"_hasImage",void 0),LN([TT({type:HTMLElement,default:!0})],DN.prototype,"image",void 0),LN([TT()],DN.prototype,"badge",void 0),LN([xM("@ui5/webcomponents")],DN,"i18nBundle",void 0),DN=kN=LN([ST({tag:"ui5-avatar",languageAware:!0,renderer:AM,styles:{packageName:"@ui5/webcomponents",fileName:"themes/Avatar.css.ts",content:':host(:not([hidden])){display:inline-block;box-sizing:border-box;position:relative;font-family:"72override",var(--sapFontFamily)}:host(:not([hidden]).ui5_hovered){opacity:.7}:host([interactive]:not([disabled])){cursor:pointer}:host([interactive]:not([hidden]):active){background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor)}:host([interactive]:not([hidden]):not([disabled]):not(:active):hover){box-shadow:var(--ui5-v2-4-0-avatar-hover-box-shadow-offset)}:host([interactive][desktop]:not([hidden])) .ui5-avatar-root:focus,:host([interactive]:not([hidden])) .ui5-avatar-root:focus-visible{outline:var(--_ui5-v2-4-0_avatar_outline);outline-offset:var(--_ui5-v2-4-0_avatar_focus_offset)}:host([disabled]){opacity:var(--sapContent_DisabledOpacity)}:host{height:3rem;width:3rem;border-radius:50%;border:var(--ui5-v2-4-0-avatar-initials-border);outline:none;color:var(--ui5-v2-4-0-avatar-initials-color)}.ui5-avatar-root{display:flex;align-items:center;justify-content:center;outline:none;height:100%;width:100%;border-radius:inherit}:host([_size="XS"]),:host([size="XS"]){height:2rem;width:2rem;min-height:2rem;min-width:2rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XS)}:host(:not([size])),:host([_size="S"]),:host([size="S"]){min-height:3rem;min-width:3rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_S)}:host([_size="M"]),:host([size="M"]){min-height:4rem;min-width:4rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_M)}:host([_size="L"]),:host([size="L"]){min-height:5rem;min-width:5rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_L)}:host([_size="XL"]),:host([size="XL"]){min-height:7rem;min-width:7rem;font-size:var(--_ui5-v2-4-0_avatar_fontsize_XL)}:host .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_fontsize_S);width:var(--_ui5-v2-4-0_avatar_fontsize_S);color:inherit}:host([_size="XS"]) .ui5-avatar-icon,:host([size="XS"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XS);width:var(--_ui5-v2-4-0_avatar_icon_XS)}:host([_size="S"]) .ui5-avatar-icon,:host([size="S"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_S);width:var(--_ui5-v2-4-0_avatar_icon_S)}:host([_size="M"]) .ui5-avatar-icon,:host([size="M"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_M);width:var(--_ui5-v2-4-0_avatar_icon_M)}:host([_size="L"]) .ui5-avatar-icon,:host([size="L"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_L);width:var(--_ui5-v2-4-0_avatar_icon_L)}:host([_size="XL"]) .ui5-avatar-icon,:host([size="XL"]) .ui5-avatar-icon{height:var(--_ui5-v2-4-0_avatar_icon_XL);width:var(--_ui5-v2-4-0_avatar_icon_XL)}::slotted(*){border-radius:50%;width:100%;height:100%;pointer-events:none}:host([shape="Square"]){border-radius:var(--ui5-v2-4-0-avatar-border-radius)}:host([shape="Square"]) ::slotted(*){border-radius:calc(var(--ui5-v2-4-0-avatar-border-radius) - var(--ui5-v2-4-0-avatar-border-radius-img-deduction))}:host(:not([color-scheme])),:host(:not([_has-image])),:host([_color-scheme="Accent6"]),:host([ui5-avatar][color-scheme="Accent6"]){background-color:var(--ui5-v2-4-0-avatar-accent6);color:var(--ui5-v2-4-0-avatar-accent6-color);border-color:var(--ui5-v2-4-0-avatar-accent6-border-color)}:host([_color-scheme="Accent1"]),:host([ui5-avatar][color-scheme="Accent1"]){background-color:var(--ui5-v2-4-0-avatar-accent1);color:var(--ui5-v2-4-0-avatar-accent1-color);border-color:var(--ui5-v2-4-0-avatar-accent1-border-color)}:host([_color-scheme="Accent2"]),:host([ui5-avatar][color-scheme="Accent2"]){background-color:var(--ui5-v2-4-0-avatar-accent2);color:var(--ui5-v2-4-0-avatar-accent2-color);border-color:var(--ui5-v2-4-0-avatar-accent2-border-color)}:host([_color-scheme="Accent3"]),:host([ui5-avatar][color-scheme="Accent3"]){background-color:var(--ui5-v2-4-0-avatar-accent3);color:var(--ui5-v2-4-0-avatar-accent3-color);border-color:var(--ui5-v2-4-0-avatar-accent3-border-color)}:host([_color-scheme="Accent4"]),:host([ui5-avatar][color-scheme="Accent4"]){background-color:var(--ui5-v2-4-0-avatar-accent4);color:var(--ui5-v2-4-0-avatar-accent4-color);border-color:var(--ui5-v2-4-0-avatar-accent4-border-color)}:host([_color-scheme="Accent5"]),:host([ui5-avatar][color-scheme="Accent5"]){background-color:var(--ui5-v2-4-0-avatar-accent5);color:var(--ui5-v2-4-0-avatar-accent5-color);border-color:var(--ui5-v2-4-0-avatar-accent5-border-color)}:host([_color-scheme="Accent7"]),:host([ui5-avatar][color-scheme="Accent7"]){background-color:var(--ui5-v2-4-0-avatar-accent7);color:var(--ui5-v2-4-0-avatar-accent7-color);border-color:var(--ui5-v2-4-0-avatar-accent7-border-color)}:host([_color-scheme="Accent8"]),:host([ui5-avatar][color-scheme="Accent8"]){background-color:var(--ui5-v2-4-0-avatar-accent8);color:var(--ui5-v2-4-0-avatar-accent8-color);border-color:var(--ui5-v2-4-0-avatar-accent8-border-color)}:host([_color-scheme="Accent9"]),:host([ui5-avatar][color-scheme="Accent9"]){background-color:var(--ui5-v2-4-0-avatar-accent9);color:var(--ui5-v2-4-0-avatar-accent9-color);border-color:var(--ui5-v2-4-0-avatar-accent9-border-color)}:host([_color-scheme="Accent10"]),:host([ui5-avatar][color-scheme="Accent10"]){background-color:var(--ui5-v2-4-0-avatar-accent10);color:var(--ui5-v2-4-0-avatar-accent10-color);border-color:var(--ui5-v2-4-0-avatar-accent10-border-color)}:host([_color-scheme="Placeholder"]),:host([ui5-avatar][color-scheme="Placeholder"]){background-color:var(--ui5-v2-4-0-avatar-placeholder);color:var(--ui5-v2-4-0-avatar-placeholder-color);border-color:var(--ui5-v2-4-0-avatar-placeholder-border-color)}:host([_has-image]){color:var(--ui5-v2-4-0-avatar-accent10-color);background-color:transparent;vertical-align:middle}.ui5-avatar-initials{color:inherit}.ui5-avatar-icon~.ui5-avatar-initials,.ui5-avatar-icon~.ui5-avatar-icon-fallback{display:none}.ui5-avatar-fallback-icon-hidden{display:none}.ui5-avatar-initials-hidden{position:absolute;visibility:hidden;z-index:0;pointer-events:none}::slotted([slot="badge"]){position:absolute;bottom:0;right:0;width:1.125rem;height:1.125rem;font-family:"72override",var(--sapFontFamily);font-size:var(--sapFontSmallSize);color:var(--sapBackgroundColor);--_ui5-v2-4-0-tag-height: 1.125rem;--_ui5-v2-4-0-tag-border-radius: 50%}:host([_size="L"]) ::slotted([slot="badge"]),:host([size="L"]) ::slotted([slot="badge"]){width:1.25rem;height:1.25rem;--_ui5-v2-4-0-tag-height: 1.25rem;--_ui5-v2-4-0-tag-icon-width: .875rem}:host([_size="XL"]) ::slotted([slot="badge"]),:host([size="XL"]) ::slotted([slot="badge"]){width:1.75rem;height:1.75rem;--_ui5-v2-4-0-tag-height: 1.75rem;--_ui5-v2-4-0-tag-icon-width: 1rem}:host([shape="Square"]) ::slotted([slot="badge"]){bottom:-.125rem;right:-.125rem}:host([_size="L"][shape="Square"]) ::slotted([slot="badge"]),:host([size="L"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.1875rem;right:-.1875rem}:host([_size="XL"][shape="Square"]) ::slotted([slot="badge"]),:host([size="XL"][shape="Square"]) ::slotted([slot="badge"]){bottom:-.25rem;right:-.25rem}\n'},template:function(e,t,i){return vM`<div class="ui5-avatar-root" tabindex="${_M(this.tabindex)}" data-sap-focus-ref @keyup=${this._onkeyup} @keydown=${this._onkeydown} @click=${this._onclick} role="${_M(this._role)}" aria-haspopup="${_M(this._ariaHasPopup)}" aria-label="${_M(this.accessibleNameText)}" fallback-icon="${_M(this.fallbackIcon)}">${this.hasImage?IN.call(this,e,t,i):BN.call(this,e,t,i)}<slot name="badge"></slot></div>`},dependencies:[cB]}),ET("click",{bubbles:!0})],DN),DN.define();const NN=DN;function ON(e,t,i){return vM`${this.modeSingleSelect?FN.call(this,e,t,i):void 0}${this.modeMultiple?UN.call(this,e,t,i):void 0}${this.renderDeleteButton?zN.call(this,e,t,i):void 0}`}function FN(e,t,i){return i?vM`<${bM("ui5-radio-button",t,i)} part="radio" ?disabled="${this.isInactive}" accessible-name="${_M(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${_M(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${_M(this.onSingleSelectionComponentPress)}"></${bM("ui5-radio-button",t,i)}>`:vM`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${_M(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${_M(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${_M(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function UN(e,t,i){return i?vM`<${bM("ui5-checkbox",t,i)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${_M(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${_M(this._accInfo.ariaLabel)}" @ui5-change="${_M(this.onMultiSelectionComponentPress)}"></${bM("ui5-checkbox",t,i)}>`:vM`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${_M(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${_M(this._accInfo.ariaLabel)}" @ui5-change="${_M(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function zN(e,t,i){return vM`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?HN.call(this,e,t,i):GN.call(this,e,t,i)}</div>`}function HN(e,t,i){return vM`<slot name="deleteButton"></slot>`}function GN(e,t,i){return i?vM`<${bM("ui5-button",t,i)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${_M(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${_M(this.deleteText)}"></${bM("ui5-button",t,i)}>`:vM`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${_M(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${_M(this.deleteText)}"></ui5-button>`}function VN(e,t,i){return vM`<div class="ui5-li-highlight"></div>`}function QN(e,t,i){return vM`<div class="ui5-li-image"><slot name="image"></slot></div>`}function jN(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} part="icon" name="${_M(this.icon)}" class="ui5-li-icon" mode="Decorative"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon part="icon" name="${_M(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function qN(e,t,i){return vM`<div class="ui5-li-description-info-wrapper"><span part="description" class="ui5-li-desc">${_M(this.description)}</span>${this.additionalText?WN.call(this,e,t,i):void 0}</div>`}function WN(e,t,i){return vM`<span part="additional-text" class="ui5-li-additional-text">${_M(this.additionalText)}</span>`}function $N(e,t,i){return vM`<span class="ui5-hidden-text">${_M(this.type)}</span>`}function XN(e,t,i){return vM`${this.additionalText?YN.call(this,e,t,i):void 0}`}function YN(e,t,i){return vM`<span part="additional-text" class="ui5-li-additional-text">${_M(this.additionalText)}</span>`}function KN(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} part="icon" name="${_M(this.icon)}" class="ui5-li-icon" mode="Decorative"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon part="icon" name="${_M(this.icon)}" class="ui5-li-icon" mode="Decorative"></ui5-icon>`}function ZN(e,t,i){return i?vM`<div class="ui5-li-detailbtn"><${bM("ui5-button",t,i)} part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></${bM("ui5-button",t,i)}></div>`:vM`<div class="ui5-li-detailbtn"><ui5-button part="detail-button" design="Transparent" icon="edit" @click="${this.onDetailClick}"></ui5-button></div>`}function JN(e,t,i){return i?vM`<${bM("ui5-icon",t,i)} name ="slim-arrow-right"></${bM("ui5-icon",t,i)}>`:vM`<ui5-icon name ="slim-arrow-right"></ui5-icon>`}function eO(e,t,i){return vM`<div class="ui5-li-navigated"></div>`}function tO(e,t,i){return vM`${this.modeSingleSelect?iO.call(this,e,t,i):void 0}${this.modeMultiple?nO.call(this,e,t,i):void 0}${this.renderDeleteButton?rO.call(this,e,t,i):void 0}`}function iO(e,t,i){return i?vM`<${bM("ui5-radio-button",t,i)} part="radio" ?disabled="${this.isInactive}" accessible-name="${_M(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${_M(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${_M(this.onSingleSelectionComponentPress)}"></${bM("ui5-radio-button",t,i)}>`:vM`<ui5-radio-button part="radio" ?disabled="${this.isInactive}" accessible-name="${_M(this._accInfo.ariaLabelRadioButton)}" tabindex="-1" id="${_M(this._id)}-singleSelectionElement" class="ui5-li-singlesel-radiobtn" ?checked="${this.selected}" @ui5-change="${_M(this.onSingleSelectionComponentPress)}"></ui5-radio-button>`}function nO(e,t,i){return i?vM`<${bM("ui5-checkbox",t,i)} part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${_M(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${_M(this._accInfo.ariaLabel)}" @ui5-change="${_M(this.onMultiSelectionComponentPress)}"></${bM("ui5-checkbox",t,i)}>`:vM`<ui5-checkbox part="checkbox" ?disabled="${this.isInactive}" ?indeterminate=${this.indeterminate} tabindex="-1" id="${_M(this._id)}-multiSelectionElement" class="ui5-li-multisel-cb" ?checked="${this.selected}" accessible-name="${_M(this._accInfo.ariaLabel)}" @ui5-change="${_M(this.onMultiSelectionComponentPress)}"></ui5-checkbox>`}function rO(e,t,i){return vM`<div class="ui5-li-deletebtn">${this.hasDeleteButtonSlot?oO.call(this,e,t,i):aO.call(this,e,t,i)}</div>`}function oO(e,t,i){return vM`<slot name="deleteButton"></slot>`}function aO(e,t,i){return i?vM`<${bM("ui5-button",t,i)} part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${_M(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${_M(this.deleteText)}"></${bM("ui5-button",t,i)}>`:vM`<ui5-button part="delete-button" tabindex="-1" data-sap-no-tab-ref id="${_M(this._id)}-deleteSelectionElement" design="Transparent" icon="decline" ?disabled="${this.disableDeleteButton}" @click="${this.onDelete}" tooltip="${_M(this.deleteText)}"></ui5-button>`}var sO=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let lO=class extends MN{constructor(){super(...arguments),this.iconEnd=!1,this.additionalTextState="None",this.movable=!1,this.wrappingType="None",this.hasTitle=!1,this._hasImage=!1}onBeforeRendering(){super.onBeforeRendering(),this.hasTitle=!!this.textContent,this._hasImage=this.hasImage}get displayIconBegin(){return!(!this.icon||this.iconEnd)}get displayIconEnd(){return!(!this.icon||!this.iconEnd)}get hasImage(){return!!this.image.length}};sO([CT()],lO.prototype,"description",void 0),sO([CT()],lO.prototype,"icon",void 0),sO([CT({type:Boolean})],lO.prototype,"iconEnd",void 0),sO([CT()],lO.prototype,"additionalText",void 0),sO([CT()],lO.prototype,"additionalTextState",void 0),sO([CT({type:Boolean})],lO.prototype,"movable",void 0),sO([CT()],lO.prototype,"accessibleName",void 0),sO([CT()],lO.prototype,"wrappingType",void 0),sO([CT({type:Boolean})],lO.prototype,"hasTitle",void 0),sO([CT({type:Boolean})],lO.prototype,"_hasImage",void 0),sO([TT()],lO.prototype,"image",void 0),lO=sO([ST({tag:"ui5-li",template:function(e,t,i){return vM`<li part="native-li" data-sap-focus-ref tabindex="${_M(this._effectiveTabIndex)}" class="${mM(this.classes.main)}" @focusin="${this._onfocusin}" @focusout="${this._onfocusout}" @keyup="${this._onkeyup}" @keydown="${this._onkeydown}" @mouseup="${this._onmouseup}" @mousedown="${this._onmousedown}" @touchstart="${this._ontouchstart}" @touchend="${this._ontouchend}" @click="${this._onclick}" draggable="${_M(this.movable)}" @dragstart="${this._ondragstart}" @dragend="${this._ondragend}" role="${_M(this._accInfo.role)}" aria-expanded="${_M(this._accInfo.ariaExpanded)}" title="${_M(this._accInfo.tooltip)}" aria-level="${_M(this._accInfo.ariaLevel)}" aria-haspopup="${_M(this._accInfo.ariaHaspopup)}" aria-posinset="${_M(this._accInfo.posinset)}" aria-setsize="${_M(this._accInfo.setsize)}" aria-describedby="${_M(this._id)}-invisibleText-describedby" aria-labelledby="${_M(this._accessibleNameRef)}" aria-disabled="${_M(this._ariaDisabled)}" aria-selected="${_M(this._accInfo.ariaSelected)}" aria-checked="${_M(this._accInfo.ariaChecked)}" aria-owns="${_M(this._accInfo.ariaOwns)}" aria-keyshortcuts="${_M(this._accInfo.ariaKeyShortcuts)}">${this.placeSelectionElementBefore?ON.call(this,e,t,i):void 0}${this._hasHighlightColor?VN.call(this,e,t,i):void 0}<div part="content" id="${_M(this._id)}-content" class="ui5-li-content">${this.hasImage?QN.call(this,e,t,i):void 0}${this.displayIconBegin?jN.call(this,e,t,i):void 0}<div class="ui5-li-text-wrapper"><span part="title" class="ui5-li-title"><slot></slot></span>${this.description?qN.call(this,e,t,i):void 0}${this.typeActive?void 0:$N.call(this,e,t,i)}</div>${this.description?void 0:XN.call(this,e,t,i)}</div>${this.displayIconEnd?KN.call(this,e,t,i):void 0}${this.typeDetail?ZN.call(this,e,t,i):void 0}${this.typeNavigation?JN.call(this,e,t,i):void 0}${this.navigated?eO.call(this,e,t,i):void 0}${this.placeSelectionElementAfter?tO.call(this,e,t,i):void 0}<span id="${_M(this._id)}-invisibleText" class="ui5-hidden-text">${_M(this._accInfo.listItemAriaLabel)}${_M(this.accessibleName)}</span><span id="${_M(this._id)}-invisibleText-describedby" class="ui5-hidden-text">${_M(this._accInfo.ariaSelectedText)}</span></li> `},dependencies:[...MN.dependencies,cB,NN]})],lO),lO.define();const cO=lO;hC("@ui5/webcomponents-theming","sap_horizon",(async()=>oB)),hC("@ui5/webcomponents","sap_horizon",(async()=>aB));var uO,hO=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let dO=uO=class extends fN{get groupItem(){return!0}get _pressable(){return!1}get groupHeaderText(){return uO.i18nBundle.getText(KM)}get ariaLabelText(){return[this.textContent,this.accessibleName].filter(Boolean).join(" ")}};hO([CT()],dO.prototype,"accessibleName",void 0),hO([xM("@ui5/webcomponents")],dO,"i18nBundle",void 0),dO=uO=hO([ST({tag:"ui5-li-group-header",languageAware:!0,template:function(e,t,i){return vM`<ul part="native-li" tabindex="${_M(this.forcedTabIndex)}" class="ui5-ghli-root ${mM(this.classes.main)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" aria-label="${_M(this.ariaLabelText)}" aria-roledescription="${_M(this.groupHeaderText)}" role="group"><div id="${_M(this._id)}-content" class="ui5-li-content"><span class="ui5-ghli-title"><slot></slot></span></div></ul>`},styles:[fN.styles,{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroupHeader.css.ts",content:".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}\n"}]})],dO),dO.define();const pO=dO;var fO=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let mO=class extends xT{constructor(){super(...arguments),this.focused=!1}onEnterDOM(){AD(this)}onExitDOM(){bD(this)}get groupHeaderItem(){return this.shadowRoot.querySelector("[ui5-li-group-header]")}get hasHeader(){return!!this.headerText||this.hasFormattedHeader}get hasFormattedHeader(){return!!this.header.length}get isListItemGroup(){return!0}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}_ondragenter(e){e.preventDefault()}_ondragleave(e){e.relatedTarget instanceof Node&&this.shadowRoot.contains(e.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(e){const t=xD();if(!(e.target instanceof HTMLElement&&t))return;const i=ED(this.items,e.clientY,SD.Vertical);if(!i)return void(this.dropIndicatorDOM.targetReference=null);let n=i.placements;i.element===t&&(n=n.filter((e=>e!==wD.On))),n.some((n=>!this.fireDecoratorEvent("move-over",{source:{element:t},destination:{element:i.element,placement:n}})&&(e.preventDefault(),this.dropIndicatorDOM.targetReference=i.element,this.dropIndicatorDOM.placement=n,!0)))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(e){e.preventDefault(),this.fireDecoratorEvent("move",{source:{element:xD()},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null}};fO([CT()],mO.prototype,"headerText",void 0),fO([CT()],mO.prototype,"headerAccessibleName",void 0),fO([TT({default:!0,invalidateOnChildChange:!0,type:HTMLElement})],mO.prototype,"items",void 0),fO([CT({type:Boolean})],mO.prototype,"focused",void 0),fO([TT({type:HTMLElement})],mO.prototype,"header",void 0),mO=fO([ST({tag:"ui5-li-group",renderer:AM,languageAware:!0,template:function(e,t,i){return i?vM`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?rN.call(this,e,t,i):void 0}<slot></slot><${bM("ui5-drop-indicator",t,i)} orientation="Horizontal" .ownerReference="${_M(this)}"></${bM("ui5-drop-indicator",t,i)}></ul>`:vM`<ul class="ui5-group-li-root" role="group" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}">${this.hasHeader?rN.call(this,e,t,i):void 0}<slot></slot><ui5-drop-indicator orientation="Horizontal" .ownerReference="${_M(this)}"></ui5-drop-indicator></ul>`},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/ListItemGroup.css.ts",content:".ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-4-0_group_header_list_item_height);background:var(--ui5-v2-4-0-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}\n"}],dependencies:[cO,pO,DD]}),ET("move-over",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),ET("move",{detail:{source:{type:Object},destination:{type:Object}},bubbles:!0})],mO),mO.define();const gO=mO;var _O,vO=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};let yO=_O=class extends xT{constructor(){super(),this.indent=!1,this.selectionMode="None",this.separators="All",this.growing="None",this.loading=!1,this.loadingDelay=1e3,this.accessibleRole="List",this._inViewport=!1,this._loadMoreActive=!1,this._previouslyFocusedItem=null,this._forwardingFocus=!1,this.resizeListenerAttached=!1,this.listEndObserved=!1,this._itemNavigation=new aM(this,{skipItemsSize:10,navigationMode:rM.Vertical,getItemsCallback:()=>this.getEnabledItems()}),this._handleResize=this.checkListInViewport.bind(this),this._handleResize=this.checkListInViewport.bind(this),this.initialIntersection=!0,this.onItemFocusedBound=this.onItemFocused.bind(this),this.onForwardAfterBound=this.onForwardAfter.bind(this),this.onForwardBeforeBound=this.onForwardBefore.bind(this),this.onItemTabIndexChangeBound=this.onItemTabIndexChange.bind(this)}get listItems(){return this.getItems()}onEnterDOM(){AD(this)}onExitDOM(){this.unobserveListEnd(),this.resizeListenerAttached=!1,sR.deregister(this.getDomRef(),this._handleResize),bD(this)}onBeforeRendering(){this.detachGroupHeaderEvents(),this.prepareListItems()}onAfterRendering(){this.attachGroupHeaderEvents(),this.growsOnScroll?this.observeListEnd():this.listEndObserved&&this.unobserveListEnd(),this.grows&&(this.checkListInViewport(),this.attachForResize())}attachGroupHeaderEvents(){this.getItems().forEach((e=>{e.hasAttribute("ui5-li-group-header")&&(e.addEventListener("ui5-_focused",this.onItemFocusedBound),e.addEventListener("ui5-_forward-after",this.onForwardAfterBound),e.addEventListener("ui5-_forward-before",this.onForwardBeforeBound),e.addEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))}))}detachGroupHeaderEvents(){this.getItems().forEach((e=>{e.hasAttribute("ui5-li-group-header")&&(e.removeEventListener("ui5-_focused",this.onItemFocusedBound),e.removeEventListener("ui5-_forward-after",this.onForwardAfterBound),e.removeEventListener("ui5-_forward-before",this.onForwardBeforeBound),e.removeEventListener("ui5-_tabindex-change",this.onItemTabIndexChangeBound))}))}attachForResize(){this.resizeListenerAttached||(this.resizeListenerAttached=!0,sR.register(this.getDomRef(),this._handleResize))}get shouldRenderH1(){return!this.header.length&&this.headerText}get headerID(){return`${this._id}-header`}get modeLabelID(){return`${this._id}-modeLabel`}get listEndDOM(){return this.shadowRoot.querySelector(".ui5-list-end-marker")}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}get hasData(){return 0!==this.getItems().length}get showBusyIndicatorOverlay(){return!this.growsWithButton&&this.loading}get showNoDataText(){return!this.hasData&&this.noDataText}get isDelete(){return this.selectionMode===BD.Delete}get isSingleSelect(){return[BD.Single,BD.SingleStart,BD.SingleEnd,BD.SingleAuto].includes(this.selectionMode)}get isMultiple(){return this.selectionMode===BD.Multiple}get ariaLabelledBy(){if(this.accessibleNameRef||this.accessibleName)return;const e=[];return(this.isMultiple||this.isSingleSelect||this.isDelete)&&e.push(this.modeLabelID),this.shouldRenderH1&&e.push(this.headerID),e.length?e.join(" "):void 0}get ariaLabelTxt(){return QI(this)}get ariaLabelModeText(){if(this.hasData){if(this.isMultiple)return _O.i18nBundle.getText(cI);if(this.isSingleSelect)return _O.i18nBundle.getText(lI);if(this.isDelete)return _O.i18nBundle.getText(uI)}return""}get grows(){return this.growing!==PD.None}get growsOnScroll(){return this.growing===PD.Scroll}get growsWithButton(){return this.growing===PD.Button}get _growingButtonText(){return this.growingButtonText||_O.i18nBundle.getText(vI)}get listAccessibleRole(){return this.accessibleRole.toLowerCase()}get classes(){return{root:{"ui5-list-root":!0}}}prepareListItems(){const e=this.getItemsForProcessing();e.forEach(((t,i)=>{const n=i===e.length-1,r=this.separators===OD.All||this.separators===OD.Inner&&!n;t.hasConfigurableMode&&(t._selectionMode=this.selectionMode),t.hasBorder=r}))}async observeListEnd(){this.listEndObserved||(await KS(),this.getIntersectionObserver().observe(this.listEndDOM),this.listEndObserved=!0)}unobserveListEnd(){this.growingIntersectionObserver&&(this.growingIntersectionObserver.disconnect(),this.growingIntersectionObserver=null,this.listEndObserved=!1)}onInteresection(e){this.initialIntersection?this.initialIntersection=!1:e.forEach((e=>{var t;e.isIntersecting&&(t=this.loadMore.bind(this),MD&&clearTimeout(MD),MD=setTimeout((()=>{MD=null,t()}),250))}))}onSelectionRequested(e){const t=this.getSelectedItems();let i=!1;this.selectionMode!==BD.None&&this[`handle${this.selectionMode}`]&&(i=this[`handle${this.selectionMode}`](e.detail.item,!!e.detail.selected)),i&&!this.fireDecoratorEvent("selection-change",{selectedItems:this.getSelectedItems(),previouslySelectedItems:t,selectionComponentPressed:e.detail.selectionComponentPressed,targetItem:e.detail.item,key:e.detail.key})&&this._revertSelection(t)}handleSingle(e){return!e.selected&&(this.deselectSelectedItems(),e.selected=!0,!0)}handleSingleStart(e){return this.handleSingle(e)}handleSingleEnd(e){return this.handleSingle(e)}handleSingleAuto(e){return this.handleSingle(e)}handleMultiple(e,t){return e.selected=t,!0}handleDelete(e){return this.fireDecoratorEvent("item-delete",{item:e}),!0}deselectSelectedItems(){this.getSelectedItems().forEach((e=>{e.selected=!1}))}getSelectedItems(){return this.getItems().filter((e=>e.selected))}getEnabledItems(){return this.getItems().filter((e=>e._focusable))}getItems(){const e=[];return this.getSlottedNodes("items").forEach((t=>{if("isListItemGroup"in t){const i=[t.groupHeaderItem,...t.items].filter(Boolean);e.push(...i)}else e.push(t)})),e}getItemsForProcessing(){return this.getItems()}_revertSelection(e){this.getItems().forEach((t=>{const i=-1!==e.indexOf(t),n=t.shadowRoot.querySelector(".ui5-li-multisel-cb"),r=t.shadowRoot.querySelector(".ui5-li-singlesel-radiobtn");t.selected=i,n?n.checked=i:r&&(r.checked=i)}))}_onkeydown(e){iM(e,!0,!1,!1)?this._moveItem(e.target,e):qT(e)&&this._handleTabNext(e)}_moveItem(e,t){if(!e||!e.movable)return;const i=((e,t,i)=>{let n=e.indexOf(t);const r=[];switch(i.key){case"ArrowLeft":case"ArrowUp":n--,n>=0&&r.push({element:e[n],placement:wD.Before});break;case"ArrowRight":case"ArrowDown":n++,n<e.length&&r.push({element:e[n],placement:wD.After});break;case"Home":e.forEach((e=>{r.push({element:e,placement:wD.Before})}));break;case"End":e.reverse().forEach((e=>{r.push({element:e,placement:wD.After})}))}return r})(this.items,e,t);if(!i.length)return;t.preventDefault();const n=i.find((i=>{let{element:n,placement:r}=i;return!this.fireDecoratorEvent("move-over",{originalEvent:t,source:{element:e},destination:{element:n,placement:r}})}));n&&(this.fireDecoratorEvent("move",{originalEvent:t,source:{element:e},destination:{element:n.element,placement:n.placement}}),e.focus())}_onLoadMoreKeydown(e){IT(e)&&(e.preventDefault(),this._loadMoreActive=!0),MT(e)&&(this._onLoadMoreClick(),this._loadMoreActive=!0),qT(e)&&this.focusAfterElement(),WT(e)&&(this.getPreviouslyFocusedItem()?this.focusPreviouslyFocusedItem():this.focusFirstItem(),e.preventDefault())}_onLoadMoreKeyup(e){IT(e)&&this._onLoadMoreClick(),this._loadMoreActive=!1}_onLoadMoreMousedown(){this._loadMoreActive=!0}_onLoadMoreMouseup(){this._loadMoreActive=!1}_onLoadMoreClick(){this.loadMore()}checkListInViewport(){this._inViewport=(()=>{const e=this.getDomRef().getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)})()}loadMore(){this.fireDecoratorEvent("load-more")}_handleTabNext(e){TD(e.target)}_onfocusin(e){const t=TD(e.target);if(this.isForwardElement(t)){if(!this.getPreviouslyFocusedItem())return this.growsWithButton&&this.isForwardAfterElement(t)?this.focusGrowingButton():this.focusFirstItem(),void e.stopImmediatePropagation();if(!this.getForwardingFocus()){if(this.growsWithButton&&this.isForwardAfterElement(t))return this.focusGrowingButton(),void e.stopImmediatePropagation();this.focusPreviouslyFocusedItem(),e.stopImmediatePropagation()}this.setForwardingFocus(!1)}else e.stopImmediatePropagation()}_ondragenter(e){e.preventDefault()}_ondragleave(e){e.relatedTarget instanceof Node&&this.shadowRoot.contains(e.relatedTarget)||(this.dropIndicatorDOM.targetReference=null)}_ondragover(e){const t=xD();if(!(e.target instanceof HTMLElement&&t))return;const i=ED(this.items,e.clientY,SD.Vertical);if(!i)return void(this.dropIndicatorDOM.targetReference=null);let n=i.placements;i.element===t&&(n=n.filter((e=>e!==wD.On))),n.some((n=>!this.fireDecoratorEvent("move-over",{originalEvent:e,source:{element:t},destination:{element:i.element,placement:n}})&&(e.preventDefault(),this.dropIndicatorDOM.targetReference=i.element,this.dropIndicatorDOM.placement=n,!0)))||(this.dropIndicatorDOM.targetReference=null)}_ondrop(e){e.preventDefault();const t=xD();this.fireDecoratorEvent("move",{originalEvent:e,source:{element:t},destination:{element:this.dropIndicatorDOM.targetReference,placement:this.dropIndicatorDOM.placement}}),this.dropIndicatorDOM.targetReference=null,t.focus()}isForwardElement(e){const t=e.id,i=this.getBeforeElement();return!!(this._id===t||i&&i.id===t)||this.isForwardAfterElement(e)}isForwardAfterElement(e){const t=e.id,i=this.getAfterElement();return i&&i.id===t}onItemTabIndexChange(e){const t=e.target;this._itemNavigation.setCurrentItem(t)}onItemFocused(e){const t=e.target;if(e.stopPropagation(),this._itemNavigation.setCurrentItem(t),this.fireDecoratorEvent("item-focused",{item:t}),this.selectionMode===BD.SingleAuto){const i={item:t,selectionComponentPressed:!1,selected:!0,key:e.detail.key};this.onSelectionRequested({detail:i})}}onItemPress(e){const t=e.detail.item;if(this.fireDecoratorEvent("item-click",{item:t})&&this.selectionMode!==BD.Delete){const i={item:t,selectionComponentPressed:!1,selected:!t.selected,key:e.detail.key};this.onSelectionRequested({detail:i})}}onItemClose(e){var t;const i=e.target;((null==i?void 0:i.hasAttribute("ui5-li-notification"))||(null==i?void 0:i.hasAttribute("ui5-li-notification-group")))&&this.fireDecoratorEvent("item-close",{item:null==(t=e.detail)?void 0:t.item})}onItemToggle(e){this.fireDecoratorEvent("item-toggle",{item:e.detail.item})}onForwardBefore(e){this.setPreviouslyFocusedItem(e.target),this.focusBeforeElement(),e.stopPropagation()}onForwardAfter(e){this.setPreviouslyFocusedItem(e.target),this.growsWithButton?(this.focusGrowingButton(),e.preventDefault()):this.focusAfterElement(),e.stopPropagation()}focusBeforeElement(){this.setForwardingFocus(!0),this.getBeforeElement().focus()}focusAfterElement(){this.setForwardingFocus(!0),this.getAfterElement().focus()}focusGrowingButton(){const e=this.getGrowingButton();e&&e.focus()}getGrowingButton(){return this.shadowRoot.querySelector(`[id="${this._id}-growing-btn"]`)}focusFirstItem(){const e=this.getFirstItem((e=>e._focusable));e&&e.focus()}focusPreviouslyFocusedItem(){const e=this.getPreviouslyFocusedItem();e&&e.focus()}focusFirstSelectedItem(){const e=this.getFirstItem((e=>e.selected&&e._focusable));e&&e.focus()}focusItem(e){this._itemNavigation.setCurrentItem(e),e.focus()}onFocusRequested(e){setTimeout((()=>{this.setPreviouslyFocusedItem(e.target),this.focusPreviouslyFocusedItem()}),0)}setForwardingFocus(e){this._forwardingFocus=e}getForwardingFocus(){return this._forwardingFocus}setPreviouslyFocusedItem(e){this._previouslyFocusedItem=e}getPreviouslyFocusedItem(){return this._previouslyFocusedItem}getFirstItem(e){const t=this.getItems();let i=null;if(!e)return t.length?t[0]:null;for(let n=0;n<t.length;n++)if(e(t[n])){i=t[n];break}return i}getAfterElement(){return this._afterElement||(this._afterElement=this.shadowRoot.querySelector(`[id="${this._id}-after"]`)),this._afterElement}getBeforeElement(){return this._beforeElement||(this._beforeElement=this.shadowRoot.querySelector(`[id="${this._id}-before"]`)),this._beforeElement}getIntersectionObserver(){return this.growingIntersectionObserver||(this.growingIntersectionObserver=new IntersectionObserver(this.onInteresection.bind(this),{root:null,rootMargin:"0px",threshold:1})),this.growingIntersectionObserver}};vO([CT()],yO.prototype,"headerText",void 0),vO([CT()],yO.prototype,"footerText",void 0),vO([CT({type:Boolean})],yO.prototype,"indent",void 0),vO([CT()],yO.prototype,"selectionMode",void 0),vO([CT()],yO.prototype,"noDataText",void 0),vO([CT()],yO.prototype,"separators",void 0),vO([CT()],yO.prototype,"growing",void 0),vO([CT()],yO.prototype,"growingButtonText",void 0),vO([CT({type:Boolean})],yO.prototype,"loading",void 0),vO([CT({type:Number})],yO.prototype,"loadingDelay",void 0),vO([CT()],yO.prototype,"accessibleName",void 0),vO([CT()],yO.prototype,"accessibleNameRef",void 0),vO([CT()],yO.prototype,"accessibleRole",void 0),vO([CT({type:Boolean})],yO.prototype,"_inViewport",void 0),vO([CT({type:Boolean})],yO.prototype,"_loadMoreActive",void 0),vO([TT({type:HTMLElement,default:!0,invalidateOnChildChange:!0})],yO.prototype,"items",void 0),vO([TT()],yO.prototype,"header",void 0),vO([xM("@ui5/webcomponents")],yO,"i18nBundle",void 0),yO=_O=vO([ST({tag:"ui5-list",fastNavigation:!0,renderer:AM,template:function(e,t,i){return i?vM`<div class="${mM(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${_M(this.onItemPress)} @ui5-close=${_M(this.onItemClose)} @ui5-toggle=${_M(this.onItemToggle)} @ui5-_request-tabindex-change=${_M(this.onItemTabIndexChange)} @ui5-_focused=${_M(this.onItemFocused)} @ui5-_forward-after=${_M(this.onForwardAfter)} @ui5-_forward-before=${_M(this.onForwardBefore)} @ui5-_selection-requested=${_M(this.onSelectionRequested)} @ui5-_focus-requested=${_M(this.onFocusRequested)}><${bM("ui5-busy-indicator",t,i)} id="${_M(this._id)}-busyIndicator" delay="${_M(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?YD.call(this,e,t,i):void 0}${this.shouldRenderH1?KD.call(this,e,t,i):void 0}${this.hasData?ZD.call(this,e,t,i):void 0}<span id="${_M(this._id)}-modeLabel" class="ui5-hidden-text">${_M(this.ariaLabelModeText)}</span><ul id="${_M(this._id)}-listUl" class="ui5-list-ul" role="${_M(this.listAccessibleRole)}" aria-label="${_M(this.ariaLabelTxt)}" aria-labelledby="${_M(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?JD.call(this,e,t,i):void 0}</ul>${this.growsWithButton?eN.call(this,e,t,i):void 0}${this.footerText?iN.call(this,e,t,i):void 0}${this.hasData?nN.call(this,e,t,i):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><${bM("ui5-drop-indicator",t,i)} orientation="Horizontal" .ownerReference="${_M(this)}"></${bM("ui5-drop-indicator",t,i)}></${bM("ui5-busy-indicator",t,i)}></div> `:vM`<div class="${mM(this.classes.root)}" @focusin="${this._onfocusin}" @keydown="${this._onkeydown}" @dragenter="${this._ondragenter}" @dragover="${this._ondragover}" @drop="${this._ondrop}" @dragleave="${this._ondragleave}" @ui5-_press=${_M(this.onItemPress)} @ui5-close=${_M(this.onItemClose)} @ui5-toggle=${_M(this.onItemToggle)} @ui5-_request-tabindex-change=${_M(this.onItemTabIndexChange)} @ui5-_focused=${_M(this.onItemFocused)} @ui5-_forward-after=${_M(this.onForwardAfter)} @ui5-_forward-before=${_M(this.onForwardBefore)} @ui5-_selection-requested=${_M(this.onSelectionRequested)} @ui5-_focus-requested=${_M(this.onFocusRequested)}><ui5-busy-indicator id="${_M(this._id)}-busyIndicator" delay="${_M(this.loadingDelay)}" ?active="${this.showBusyIndicatorOverlay}" class="ui5-list-busy-indicator"><div class="ui5-list-scroll-container">${this.header.length?YD.call(this,e,t,i):void 0}${this.shouldRenderH1?KD.call(this,e,t,i):void 0}${this.hasData?ZD.call(this,e,t,i):void 0}<span id="${_M(this._id)}-modeLabel" class="ui5-hidden-text">${_M(this.ariaLabelModeText)}</span><ul id="${_M(this._id)}-listUl" class="ui5-list-ul" role="${_M(this.listAccessibleRole)}" aria-label="${_M(this.ariaLabelTxt)}" aria-labelledby="${_M(this.ariaLabelledBy)}"><slot></slot>${this.showNoDataText?JD.call(this,e,t,i):void 0}</ul>${this.growsWithButton?eN.call(this,e,t,i):void 0}${this.footerText?iN.call(this,e,t,i):void 0}${this.hasData?nN.call(this,e,t,i):void 0}<span tabindex="-1" aria-hidden="true" class="ui5-list-end-marker"></span></div><ui5-drop-indicator orientation="Horizontal" .ownerReference="${_M(this)}"></ui5-drop-indicator></ui5-busy-indicator></div> `},styles:[{packageName:"@ui5/webcomponents",fileName:"themes/List.css.ts",content:'.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}[growing-button]{display:flex;align-items:center;padding:var(--_ui5-v2-4-0_load_more_padding);border-top:1px solid var(--sapList_BorderColor);border-bottom:var(--_ui5-v2-4-0_load_more_border-bottom);box-sizing:border-box;cursor:pointer;outline:none}[growing-button-inner]{display:flex;align-items:center;justify-content:center;flex-direction:row;min-height:var(--_ui5-v2-4-0_load_more_text_height);width:100%;color:var(--sapButton_TextColor);background-color:var(--sapList_Background);border:var(--_ui5-v2-4-0_load_more_border);border-radius:var(--_ui5-v2-4-0_load_more_border_radius);box-sizing:border-box}[growing-button-inner]:focus-visible{outline:var(--_ui5-v2-4-0_load_more_outline_width) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);outline-offset:-.125rem;border-color:transparent}[growing-button-inner]:hover{background-color:var(--sapList_Hover_Background)}[growing-button-inner]:active,[growing-button-inner][active]{background-color:var(--sapList_Active_Background);border-color:var(--sapList_Active_Background)}[growing-button-inner]:active>*,[growing-button-inner][active]>*{color:var(--sapList_Active_TextColor)}[growing-button-text],[growing-button-subtext]{text-align:center;font-family:"72override",var(--sapFontFamily);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}[growing-button-text]{height:var(--_ui5-v2-4-0_load_more_text_height);padding:.875rem 1rem 1rem;font-size:var(--_ui5-v2-4-0_load_more_text_font_size);font-weight:700}:host([loading]) .ui5-list-growing-button-busy-indicator:not([_is-busy]){display:none}:host([loading]) .ui5-list-growing-button-busy-indicator[_is-busy]+[growing-button-text]{padding-left:.5rem}[growing-button-subtext]{font-size:var(--sapFontSize);padding:var(--_ui5-v2-4-0_load_more_desc_padding)}:host(:not([hidden])){display:block;max-width:100%;width:100%;-webkit-tap-highlight-color:transparent}:host([indent]) .ui5-list-root{padding:2rem}:host([separators="None"]) .ui5-list-nodata{border-bottom:0}.ui5-list-root,.ui5-list-busy-indicator{width:100%;height:100%;position:relative;box-sizing:border-box}.ui5-list-scroll-container{overflow:auto;height:100%;width:100%}.ui5-list-ul{list-style-type:none;padding:0;margin:0}.ui5-list-ul:focus{outline:none}.ui5-list-focusarea{position:fixed}.ui5-list-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;font-size:var(--sapFontHeader4Size);font-family:"72override",var(--sapFontFamily);color:var(--sapGroup_TitleTextColor);height:3rem;line-height:3rem;padding:0 1rem;background-color:var(--sapGroup_TitleBackground);border-bottom:1px solid var(--sapGroup_TitleBorderColor)}.ui5-list-footer{height:2rem;box-sizing:border-box;-webkit-text-size-adjust:none;font-size:var(--sapFontSize);font-family:"72override",var(--sapFontFamily);line-height:2rem;background-color:var(--sapList_FooterBackground);color:var(--ui5-v2-4-0_list_footer_text_color);padding:0 1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ui5-list-nodata{list-style-type:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:var(--sapTextColor);background-color:var(--sapList_Background);border-bottom:1px solid var(--sapList_BorderColor);padding:0 1rem!important;outline:none;height:var(--_ui5-v2-4-0_list_no_data_height);font-size:var(--_ui5-v2-4-0_list_no_data_font_size);font-family:"72override",var(--sapFontFamily)}.ui5-list-nodata:focus:after{content:"";border:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);position:absolute;inset:.125rem;pointer-events:none;top:calc(50% + .125rem)}.ui5-list-nodata-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([growing="Scroll"]) .ui5-list-end-marker{display:inline-block}\n'},WB()],dependencies:[XD,DD,gO]}),ET("item-click",{detail:{item:{type:HTMLElement}},bubbles:!0,cancelable:!0}),ET("item-close",{detail:{item:{type:HTMLElement}},bubbles:!0}),ET("item-toggle",{detail:{item:{type:HTMLElement}},bubbles:!0}),ET("item-delete",{detail:{item:{type:HTMLElement}},bubbles:!0}),ET("selection-change",{detail:{selectedItems:{type:Array},previouslySelectedItems:{type:Array},targetItem:{type:HTMLElement},selectionComponentPressed:{type:Boolean},key:{type:String}},bubbles:!0,cancelable:!0}),ET("load-more",{bubbles:!0}),ET("item-focused",{detail:{item:{type:HTMLElement}},bubbles:!0}),ET("move-over",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0,cancelable:!0}),ET("move",{detail:{originalEvent:{type:Event},source:{type:Object},destination:{type:Object}},bubbles:!0})],yO),yO.define();var AO=Object.defineProperty,bO=Object.getOwnPropertyDescriptor,xO=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?bO(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&AO(t,i,o),o};let wO=class extends Ce{constructor(){super(...arguments),this.isColumnMode=!0}render(){return ie`
      <div
        id="layout"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
      >
        <div class="row">
          <div class="alignCenter">
            <ui5-label level="H1">&Sigma;:</ui5-label>
            <ui5-label>
              ${this.measurementTool.measuredLength.toFixed(1)}
            </ui5-label>
            <ui5-label> mm</ui5-label>
          </div>
        </div>
        <div class="row">
          <div class="alignCenter">
            <ui5-button @click="${this._handleNewPathClicked}">
              ${this.measurementTool.numPoints>0?"Reset":"New"}
            </ui5-button>
          </div>
          <div class="alignCenter">
            <ui5-button
              ?disabled="${!this.measurementTool.isEditModeActive&&0==this.measurementTool.numPoints}"
              @click="${this._handleUpdateEditStateClicked}"
            >
              ${this.measurementTool.isEditModeActive?"Stop":"Continue"}
            </ui5-button>
          </div>
        </div>
      </div>
    `}firstUpdated(){this.measurementTool.on("update-requested",(()=>this.requestUpdate()))}updated(e){super.updated(e)}_handleNewPathClicked(){this.measurementTool.resetPoints(),this.measurementTool.isEditModeActive=!0,this.requestUpdate()}_handleUpdateEditStateClicked(){this.measurementTool.isEditModeActive=!this.measurementTool.isEditModeActive,this.requestUpdate()}};wO.styles=x`
    :host {
      min-width: 15em;
      height: 100%;
      width: 100%;
    }

    #layout.ver-orientation {
      flex-direction: column;
      width: 100%;
    }

    #layout.hor-orientation {
      flex-direction: row;
      height: 100%;
    }

    #layout {
      position: relative;
      min-width: 15em;
      display: flex;
      align-items: stretch;
      flex-direction: column;
      gap: 1rem;
    }

    .row {
      display: flex;
      flex: 1;
      flex-direction: row;
      gap: 1rem;
      justify-content: space-between;
      width: 100%;
    }

    .alignCenter {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ui5-button {
      padding: 0.25rem;
    }

    ui5-label {
      --sapFontSize: 15;
    }
  `,xO([Ie({type:Boolean})],wO.prototype,"isColumnMode",2),xO([Ie({type:Object})],wO.prototype,"measurementTool",2),wO=xO([Te("measurement-tool")],wO);var SO=Object.defineProperty,CO=Object.getOwnPropertyDescriptor,EO=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?CO(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&SO(t,i,o),o};const TO={doubleview:()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view">\n\t<g>\t\n\t\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n\t</g>\n\t<g>\n\t\t<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n\t\t\tc-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n\t\t\tc1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n\t\t\th-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n\t\t<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n\t\t\tc1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n\t\t\tc-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n\t\t\ts2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n\t\t\tL100.871,151.478z"/>\n\t</g>\n\t<g>\n\t\t<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n\t\t\tc0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n\t\t\ts5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n\t\t\tV152.283z"/>\n\t\t<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n\t\t\tc1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n\t\t\tc-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n\t\t\tc1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n\t\t\tL214.226,152.23z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n</g>\n'),"doubleview-mobile":()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_mobile">\n\t\t<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n\t<g>\n\t\t<path d="M132.829,84.75c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057c-1.177,1.863-2.969,3.365-5.373,4.505\n\t\t\tc-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946c-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848\n\t\t\tc1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791c1.79,0,3.213-0.334,4.267-0.999\n\t\t\tc1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111h-14.541v-8.061h26.657v6.533\n\t\t\tl-7.639,8.217C128.853,81.617,131.197,82.873,132.829,84.75z"/>\n\t\t<path d="M140.547,66.233h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n\t\t\tc1.722,2.775,2.582,6.023,2.582,9.746c0,3.723-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n\t\t\tc-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V66.233z M157.564,94.786c3.16,0,5.697-0.896,7.611-2.687s2.871-4.267,2.871-7.428\n\t\t\tc0-3.161-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229L157.564,94.786L157.564,94.786z"/>\n\t</g>\n\t<g>\n\t\t<path d="M135.532,208.976v8.281H106.78v-6.541l13.821-12.924c1.337-1.268,2.233-2.349,2.691-3.246\n\t\t\tc0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.392,3.464-4.273,6.066-5.646\n\t\t\tc2.602-1.372,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.163,0.916,3.852,2.227,5.063,3.932\n\t\t\tc1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.776-2.524,3.791-4.985,6.041l-6.965,6.436\n\t\t\tH135.532z"/>\n\t\t<path d="M140.493,180.33h17.461c4.045,0,7.631,0.756,10.762,2.27c3.131,1.512,5.559,3.658,7.281,6.436\n\t\t\tc1.724,2.78,2.584,6.033,2.584,9.762s-0.86,6.98-2.584,9.761c-1.724,2.778-4.15,4.923-7.281,6.437\n\t\t\tc-3.131,1.512-6.717,2.268-10.762,2.268h-17.461V180.33z M157.535,208.923c3.164,0,5.705-0.896,7.623-2.69\n\t\t\tc1.916-1.794,2.873-4.271,2.873-7.438c0-3.166-0.957-5.645-2.873-7.438c-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597\n\t\t\tV208.923z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n</g>'),singleview:()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>\t\n\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n</g>\n<g>\n\t<path d="M84.09,100.5c1.634,1.879,2.45,4.154,2.45,6.822c0,2.179-0.588,4.198-1.765,6.058c-1.177,1.863-2.968,3.364-5.373,4.505\n\t\tc-2.406,1.141-5.383,1.712-8.93,1.712c-2.6,0-5.172-0.316-7.718-0.949c-2.547-0.631-4.75-1.527-6.612-2.686l3.793-7.851\n\t\tc1.44,0.985,3.063,1.739,4.873,2.266c1.809,0.526,3.59,0.791,5.348,0.791c1.791,0,3.213-0.333,4.267-1.002\n\t\tc1.054-0.666,1.58-1.614,1.58-2.845c0-2.388-1.879-3.582-5.637-3.582h-4.372v-6.586l6.585-7.111h-14.54v-8.061h26.657v6.533\n\t\tl-7.639,8.218C80.113,97.366,82.458,98.622,84.09,100.5z"/>\n\t<path d="M91.808,81.982h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.269,6.427\n\t\tc1.721,2.775,2.581,6.023,2.581,9.746s-0.86,6.972-2.581,9.746c-1.72,2.775-4.145,4.918-7.269,6.427\n\t\tc-3.126,1.511-6.709,2.266-10.747,2.266H91.808V81.982z M108.824,110.536c3.161,0,5.697-0.895,7.612-2.686\n\t\tc1.914-1.792,2.871-4.268,2.871-7.428c0-3.161-0.957-5.637-2.871-7.428c-1.915-1.792-4.451-2.687-7.612-2.687h-6.585v20.229\n\t\tH108.824z"/>\n</g>\n<g>\n\t<line stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721" x1="36.324" y1="220.789" x2="249.128" y2="61.185"/>\n</g>\n<g>\n\t<path d="M184.332,193.225v8.282H155.58v-6.541l13.821-12.926c1.337-1.266,2.233-2.349,2.69-3.244\n\t\tc0.457-0.897,0.686-1.803,0.686-2.717c0-1.194-0.402-2.127-1.212-2.797c-0.81-0.668-1.987-1.004-3.535-1.004\n\t\tc-1.37,0-2.629,0.309-3.771,0.924c-1.145,0.618-2.084,1.506-2.822,2.666l-7.755-4.326c1.44-2.392,3.464-4.272,6.065-5.646\n\t\tc2.604-1.371,5.68-2.058,9.232-2.058c2.813,0,5.303,0.457,7.465,1.371c2.164,0.916,3.852,2.226,5.063,3.932\n\t\tc1.216,1.706,1.824,3.686,1.824,5.934c0,2.004-0.433,3.896-1.295,5.672c-0.861,1.776-2.523,3.791-4.984,6.041l-6.965,6.437H184.332\n\t\tL184.332,193.225z"/>\n\t<path d="M189.292,164.58h17.461c4.045,0,7.632,0.756,10.763,2.269c3.13,1.513,5.558,3.657,7.28,6.437\n\t\tc1.724,2.778,2.584,6.031,2.584,9.76c0,3.729-0.86,6.981-2.584,9.762c-1.724,2.777-4.15,4.923-7.28,6.436\n\t\tc-3.131,1.512-6.718,2.269-10.763,2.269h-17.461V164.58z M206.333,193.171c3.164,0,5.705-0.896,7.621-2.689\n\t\tc1.918-1.794,2.875-4.271,2.875-7.439c0-3.164-0.957-5.644-2.875-7.438c-1.916-1.794-4.457-2.691-7.621-2.691h-6.599v20.26h6.599\n\t\tV193.171z"/>\n</g>\n'),"singleview-mobile":()=>zw('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M84.09,100.5C85.724,102.379 86.54,104.654 86.54,107.322C86.54,109.501 85.952,111.52 84.775,113.38C83.598,115.243 81.807,116.744 79.402,117.885C76.996,119.026 74.019,119.597 70.472,119.597C67.872,119.597 65.3,119.281 62.754,118.648C60.207,118.017 58.004,117.121 56.142,115.962L59.935,108.111C61.375,109.096 62.998,109.85 64.808,110.377C66.617,110.903 68.398,111.168 70.156,111.168C71.947,111.168 73.369,110.835 74.423,110.166C75.477,109.5 76.003,108.552 76.003,107.321C76.003,104.933 74.124,103.739 70.366,103.739L65.994,103.739L65.994,97.153L72.579,90.042L58.039,90.042L58.039,81.981L84.696,81.981L84.696,88.514L77.057,96.732C80.113,97.366 82.458,98.622 84.09,100.5Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,20.1202,-17.6776)">\n        <path d="M91.808,81.982L109.246,81.982C113.284,81.982 116.867,82.738 119.993,84.248C123.117,85.758 125.542,87.901 127.262,90.675C128.983,93.45 129.843,96.698 129.843,100.421C129.843,104.144 128.983,107.393 127.262,110.167C125.542,112.942 123.117,115.085 119.993,116.594C116.867,118.105 113.284,118.86 109.246,118.86L91.808,118.86L91.808,81.982ZM108.824,110.536C111.985,110.536 114.521,109.641 116.436,107.85C118.35,106.058 119.307,103.582 119.307,100.422C119.307,97.261 118.35,94.785 116.436,92.994C114.521,91.202 111.985,90.307 108.824,90.307L102.239,90.307L102.239,110.536L108.824,110.536Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g transform="matrix(0.992491,-0.32133,0.25458,0.992398,-36.1177,47.6794)">\n    <g>\n        <path d="M36.324,220.789L249.128,61.185" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9.9442,4.9721"/>\n    </g>\n</g>\n<g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M184.332,193.225L184.332,201.507L155.58,201.507L155.58,194.966L169.401,182.04C170.738,180.774 171.634,179.691 172.091,178.796C172.548,177.899 172.777,176.993 172.777,176.079C172.777,174.885 172.375,173.952 171.565,173.282C170.755,172.614 169.578,172.278 168.03,172.278C166.66,172.278 165.401,172.587 164.259,173.202C163.114,173.82 162.175,174.708 161.437,175.868L153.682,171.542C155.122,169.15 157.146,167.27 159.747,165.896C162.351,164.525 165.427,163.838 168.979,163.838C171.792,163.838 174.282,164.295 176.444,165.209C178.608,166.125 180.296,167.435 181.507,169.141C182.723,170.847 183.331,172.827 183.331,175.075C183.331,177.079 182.898,178.971 182.036,180.747C181.175,182.523 179.513,184.538 177.052,186.788L170.087,193.225L184.332,193.225Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(1,0,0,1,-19.0438,15.0153)">\n        <path d="M189.292,164.58L206.753,164.58C210.798,164.58 214.385,165.336 217.516,166.849C220.646,168.362 223.074,170.506 224.796,173.286C226.52,176.064 227.38,179.317 227.38,183.046C227.38,186.775 226.52,190.027 224.796,192.808C223.072,195.585 220.646,197.731 217.516,199.244C214.385,200.756 210.798,201.513 206.753,201.513L189.292,201.513L189.292,164.58ZM206.333,193.171C209.497,193.171 212.038,192.275 213.954,190.482C215.872,188.688 216.829,186.211 216.829,183.043C216.829,179.879 215.872,177.399 213.954,175.605C212.038,173.811 209.497,172.914 206.333,172.914L199.734,172.914L199.734,193.174L206.333,193.174L206.333,193.171Z" style="fill-rule:nonzero;"/>\n    </g>\n</g>\n<g>\n    <rect x="56.693" y="28.347" width="170.079" height="226.771" stroke-width="4" fill="none"/>\n</g>\n'),"doubleview-synced":()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced">\n\t<g>\t\n\t\t<path d="M28.347,56.693h226.771v4h-226.77z"/>\n\t\t<path d="M28.347,56.693v170.079h4v-170.079z"/>\n\t\t<path d="M255.118,226.772h-226.771v4h226.77z"/>\n\t\t<path d="M255.118,226.772v-170.079h-4v170.079z"/>\n\t</g>\n\t<g>\n\t\t<path d="M76.136,141.443c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.968,3.365-5.373,4.505c-2.406,1.143-5.383,1.711-8.93,1.711c-2.6,0-5.172-0.314-7.718-0.945\n\t\t\tc-2.547-0.633-4.75-1.528-6.612-2.688l3.793-7.848c1.44,0.981,3.063,1.737,4.873,2.263c1.809,0.529,3.59,0.791,5.348,0.791\n\t\t\tc1.791,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.616,1.58-2.845c0-2.391-1.879-3.583-5.637-3.583H58.04v-6.586l6.585-7.112\n\t\t\th-14.54v-8.061h26.657v6.533l-7.639,8.217C72.159,138.309,74.504,139.564,76.136,141.443z"/>\n\t\t<path d="M83.854,122.925h17.438c4.038,0,7.621,0.756,10.747,2.266c3.124,1.51,5.549,3.653,7.27,6.427\n\t\t\tc1.72,2.775,2.581,6.023,2.581,9.746c0,3.724-0.86,6.972-2.581,9.747c-1.72,2.771-4.146,4.916-7.27,6.426\n\t\t\tc-3.126,1.51-6.709,2.266-10.747,2.266H83.854V122.925z M100.871,151.478c3.161,0,5.698-0.896,7.612-2.688\n\t\t\ts2.871-4.267,2.871-7.428c0-3.162-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.612-2.687h-6.585v20.229L100.871,151.478\n\t\t\tL100.871,151.478z"/>\n\t</g>\n\t<g>\n\t\t<path d="M192.225,152.283v8.282h-28.752v-6.541l13.821-12.924c1.336-1.266,2.232-2.347,2.69-3.246\n\t\t\tc0.456-0.897,0.685-1.802,0.685-2.716c0-1.195-0.402-2.128-1.211-2.796c-0.81-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.308-3.771,0.923c-1.145,0.616-2.084,1.504-2.822,2.664l-7.754-4.326c1.439-2.392,3.463-4.274,6.065-5.645\n\t\t\ts5.68-2.057,9.231-2.057c2.813,0,5.303,0.458,7.465,1.371c2.164,0.915,3.853,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.685,1.823,5.935c0,2.004-0.432,3.896-1.294,5.671c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.437h14.245\n\t\t\tV152.283z"/>\n\t\t<path d="M197.186,123.637h17.461c4.045,0,7.632,0.756,10.763,2.269c3.131,1.512,5.559,3.659,7.28,6.436\n\t\t\tc1.724,2.78,2.585,6.033,2.585,9.76c0,3.729-0.861,6.981-2.585,9.76s-4.149,4.923-7.28,6.437\n\t\t\tc-3.131,1.512-6.718,2.268-10.763,2.268h-17.461V123.637z M214.226,152.23c3.165,0,5.706-0.896,7.623-2.689\n\t\t\tc1.917-1.795,2.874-4.271,2.874-7.438s-0.957-5.645-2.874-7.438s-4.458-2.691-7.623-2.691h-6.596v20.258L214.226,152.23\n\t\t\tL214.226,152.23z"/>\n\t</g>\n\t<line stroke-width="2" stroke-miterlimit="10" x1="141.732" y1="56.693" x2="141.732" y2="226.772"/>\n\t<path d="M171.183,87.604c-4.617-7.616-11.391-13.276-19.449-16.142c-9.447-3.359-19.521-2.491-28.371,2.445\n\t\tc-8.85,4.936-15.413,13.347-18.481,23.685l8.746,3.109c2.31-7.78,7.25-14.11,13.911-17.827c6.661-3.715,14.245-4.369,21.354-1.84\n\t\tc5.717,2.034,10.555,5.953,14.004,11.192l-7.537,4.204l10.929,7.769l10.935,7.771l0.679-14.248l0.684-14.244L171.183,87.604z"/>\n\t<path d="M112.281,195.862c4.618,7.616,11.388,13.276,19.45,16.144c9.446,3.357,19.522,2.49,28.372-2.445\n\t\ts15.413-13.348,18.479-23.686l-8.744-3.108c-2.31,7.78-7.25,14.11-13.91,17.825c-6.66,3.716-14.246,4.369-21.355,1.844\n\t\tc-5.716-2.035-10.552-5.955-14.002-11.193l7.538-4.203l-10.931-7.77l-10.933-7.771l-0.679,14.246l-0.684,14.248L112.281,195.862z"\n\t\t/>\n</g>\n'),"doubleview-synced-mobile":()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="double_view_synced_mobile">\n\t\t<rect x="56.693" y="28.347" fill="none" stroke-width="4" stroke-miterlimit="10" width="170.079" height="226.771"/>\n\t<g>\n\t\t<path d="M132.829,70.578c1.634,1.878,2.45,4.154,2.45,6.823c0,2.177-0.588,4.194-1.765,6.057\n\t\t\tc-1.177,1.863-2.969,3.365-5.373,4.505c-2.406,1.142-5.384,1.711-8.93,1.711c-2.6,0-5.172-0.315-7.718-0.946\n\t\t\tc-2.548-0.633-4.751-1.528-6.612-2.688l3.793-7.848c1.44,0.982,3.063,1.737,4.873,2.263c1.809,0.529,3.591,0.791,5.349,0.791\n\t\t\tc1.79,0,3.213-0.334,4.267-0.999c1.054-0.668,1.58-1.617,1.58-2.845c0-2.39-1.88-3.583-5.638-3.583h-4.372v-6.586l6.586-7.111\n\t\t\th-14.541V52.06h26.657v6.533l-7.639,8.217C128.853,67.444,131.197,68.7,132.829,70.578z"/>\n\t\t<path d="M140.547,52.06h17.439c4.037,0,7.621,0.756,10.746,2.266c3.125,1.51,5.551,3.652,7.27,6.427\n\t\t\tc1.722,2.775,2.582,6.023,2.582,9.746s-0.86,6.972-2.582,9.747c-1.719,2.772-4.145,4.917-7.27,6.426\n\t\t\tc-3.125,1.509-6.709,2.265-10.746,2.265h-17.439V52.06z M157.564,80.613c3.16,0,5.697-0.896,7.611-2.687\n\t\t\tc1.914-1.791,2.871-4.267,2.871-7.428s-0.957-5.637-2.871-7.428c-1.914-1.792-4.451-2.687-7.611-2.687h-6.586v20.229\n\t\t\tL157.564,80.613L157.564,80.613z"/>\n\t</g>\n\t<g>\n\t\t<path d="M135.532,223.15v8.282H106.78v-6.542l13.821-12.924c1.337-1.268,2.233-2.348,2.691-3.246\n\t\t\tc0.456-0.896,0.685-1.803,0.685-2.717c0-1.194-0.403-2.127-1.212-2.797c-0.809-0.668-1.988-1.002-3.535-1.002\n\t\t\tc-1.371,0-2.629,0.309-3.771,0.924c-1.144,0.615-2.084,1.504-2.822,2.664l-7.755-4.326c1.44-2.391,3.464-4.273,6.066-5.646\n\t\t\tc2.602-1.372,5.68-2.057,9.232-2.057c2.813,0,5.303,0.457,7.465,1.371c2.163,0.915,3.852,2.226,5.063,3.931\n\t\t\tc1.215,1.706,1.823,3.686,1.823,5.936c0,2.004-0.432,3.896-1.294,5.672c-0.862,1.777-2.524,3.791-4.985,6.041l-6.965,6.436\n\t\t\tH135.532z"/>\n\t\t<path d="M140.493,194.503h17.461c4.045,0,7.631,0.756,10.762,2.269s5.559,3.658,7.281,6.437c1.724,2.779,2.584,6.033,2.584,9.761\n\t\t\tc0,3.729-0.86,6.981-2.584,9.761c-1.724,2.777-4.15,4.923-7.281,6.436s-6.717,2.269-10.762,2.269h-17.461V194.503z\n\t\t\t M157.535,223.097c3.164,0,5.705-0.896,7.623-2.69c1.916-1.794,2.873-4.271,2.873-7.438s-0.957-5.646-2.873-7.438\n\t\t\tc-1.918-1.793-4.459-2.691-7.623-2.691h-6.597v20.26h6.597V223.097z"/>\n\t</g>\n\t<line  stroke-width="2" stroke-miterlimit="10" x1="226.772" y1="141.733" x2="56.692" y2="141.733"/>\n\t<path d="M195.861,171.183c7.616-4.617,13.276-11.391,16.143-19.449c3.359-9.447,2.492-19.521-2.444-28.371\n\t\tc-4.937-8.85-13.349-15.413-23.685-18.481l-3.109,8.746c7.779,2.31,14.109,7.249,17.826,13.911\n\t\tc3.716,6.661,4.369,14.245,1.841,21.354c-2.034,5.717-5.953,10.555-11.192,14.004l-4.203-7.537l-7.77,10.929l-7.771,10.935\n\t\tl14.248,0.679l14.243,0.684L195.861,171.183z"/>\n\t<path d="M87.603,112.282c-7.616,4.617-13.276,11.388-16.143,19.449c-3.358,9.446-2.49,19.522,2.445,28.372\n\t\tc4.936,8.85,13.347,15.413,23.685,18.479l3.109-8.744c-7.78-2.31-14.11-7.25-17.826-13.91c-3.715-6.66-4.369-14.245-1.843-21.354\n\t\tc2.035-5.717,5.955-10.553,11.193-14.002l4.204,7.538l7.769-10.932l7.771-10.933l-14.246-0.679l-14.247-0.685L87.603,112.282z"/>\n</g>\n'),rotation:()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="Ebene_2_Kopie">\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.347" y1="255.121" x2="28.347" y2="28.344"/>\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="255.119" y2="255.121"/>\n\n\t<line fill="none" stroke-width="15" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="28.342" y1="255.121" x2="221.982" y2="61.482"/>\n\t<g>\n\t\t<path d="M202.653,96.368l-7.829,7.829c4.909,5.954,8.646,12.978,10.756,20.852c8.142,30.384-10.805,61.953-42.229,70.373\n\t\t\tl-3.644-13.592l-28.735,27.984l38.878,9.863l-3.643-13.596c37.303-9.994,59.748-47.629,50.031-83.89\n\t\t\tC213.609,112.381,208.876,103.672,202.653,96.368z"/>\n\t\t<path d="M177.707,90.202l8.084-8.083c-15.77-9.456-35.422-12.758-54.826-7.559c-17.677,4.736-32.636,15.802-42.119,31.156\n\t\t\tl9.388,5.8c8-12.952,20.639-22.291,35.587-26.297C149.246,81.085,164.847,83.297,177.707,90.202z"/>\n\t</g>\n</g>\n</svg>\n'),measure:()=>zw('<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 16.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n\n<g>\n\t<g>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="56.692" y1="204.288" x2="56.692" y2="232.538"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="113.385" y1="204.288" x2="113.385" y2="232.538"/>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="170.08" y1="204.288" x2="170.08" y2="232.538"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="141.732" y1="204.287" x2="141.732" y2="221.237"/>\n\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="85.039" y1="204.287" x2="85.039" y2="221.237"/>\n\t\t<g>\n\t\t\t<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M216.394,246.657l-24.545-42.369H14.173v56.5\n\t\t\t\th226.772c0.127,0,0.25-0.008,0.375-0.01C231.4,260.901,221.707,255.827,216.394,246.657z"/>\n\t\t</g>\n\t</g>\n\t<g>\n\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="173.365" y1="59.376" x2="148.816" y2="73.501"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="10" stroke-miterlimit="10" x1="201.71" y1="108.308" x2="177.164" y2="122.434"/>\n\t\t\n\t\t\t<line fill="none"  stroke-width="10" stroke-miterlimit="10" x1="230.056" y1="157.242" x2="205.509" y2="171.368"/>\n\t\t\n\t\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="215.884" y1="132.773" x2="201.156" y2="141.25"/>\n\t\t<line fill="none" stroke-width="7" stroke-miterlimit="10" x1="187.539" y1="83.841" x2="172.808" y2="92.317"/>\n\t\t<path fill="none" stroke-width="10" stroke-miterlimit="10" d="M265.49,218.408L265.49,218.408L152.105,22.677\n\t\t\tl-49.099,28.25l113.388,195.73c7.828,13.511,25.162,18.142,38.721,10.342C268.673,249.198,273.316,231.92,265.49,218.408z\n\t\t\t M240.945,246.663c-7.826,0-14.172-6.324-14.172-14.124c0-7.801,6.346-14.125,14.172-14.125c7.828,0,14.174,6.324,14.174,14.125\n\t\t\tC255.119,240.338,248.773,246.663,240.945,246.663z"/>\n\t</g>\n</g>\n'),environment3D:()=>zw('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<g id="surface1">\n    <g fill="none" stroke-width="50px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M2295,1430.47C2294.8,1429.26 2294.51,1428.1 2294.31,1426.95C2294.21,1426.36 2294.08,1425.69 2293.96,1425.1C2293.86,1424.6 2293.74,1424.01 2293.66,1423.54C2293.41,1422.38 2293.22,1421.19 2292.94,1420C2291.88,1415.51 2290.47,1410.96 2288.78,1406.45C2287.06,1401.87 2285.05,1397.3 2282.7,1392.72C2280.36,1388.17 2277.69,1383.63 2274.71,1379.05C2271.73,1374.5 2268.43,1369.95 2264.83,1365.36C2261.22,1360.83 2257.3,1356.31 2253.1,1351.81C2248.91,1347.32 2244.39,1342.81 2239.58,1338.37C2234.77,1333.92 2229.66,1329.53 2224.28,1325.18C2218.91,1320.8 2213.21,1316.46 2207.28,1312.21C2201.33,1307.95 2195.1,1303.7 2188.62,1299.54C2182.14,1295.39 2175.37,1291.28 2168.35,1287.26C2164.85,1285.24 2161.28,1283.26 2157.64,1281.27C2154.01,1279.32 2150.3,1277.33 2146.55,1275.4C2142.8,1273.48 2138.96,1271.57 2135.09,1269.67C2131.21,1267.78 2127.27,1265.92 2123.28,1264.09C2119.28,1262.23 2115.22,1260.38 2111.1,1258.6C2106.98,1256.77 2102.83,1255.02 2098.61,1253.23C2094.37,1251.48 2090.09,1249.73 2085.76,1248.03C2081.42,1246.31 2077.03,1244.64 2072.59,1243C2068.15,1241.33 2063.66,1239.71 2059.12,1238.12C2054.55,1236.51 2049.95,1234.95 2045.31,1233.41C2040.67,1231.85 2035.98,1230.37 2031.24,1228.87C2026.5,1227.39 2021.69,1225.93 2016.87,1224.53C2012.03,1223.09 2007.15,1221.68 2002.23,1220.32C1997.28,1218.97 1992.31,1217.67 1987.28,1216.38C1982.27,1215.07 1977.21,1213.8 1972.1,1212.59C1967.01,1211.37 1961.87,1210.16 1956.69,1208.99C1951.52,1207.83 1946.29,1206.73 1941.03,1205.65C1935.77,1204.55 1930.46,1203.49 1925.13,1202.45C1919.79,1201.43 1914.42,1200.51 1909.01,1199.57C1903.59,1198.63 1898.14,1197.73 1892.66,1196.85C1887.18,1195.99 1881.67,1195.15 1876.13,1194.38C1870.58,1193.57 1865,1192.87 1859.41,1192.16C1853.8,1191.46 1848.13,1190.76 1842.47,1190.14C1836.79,1189.53 1831.1,1188.94 1825.37,1188.42C1819.64,1187.86 1813.87,1187.38 1808.09,1186.94C1802.31,1186.48 1796.5,1186.08 1790.65,1185.73C1784.82,1185.35 1778.98,1185.03 1773.08,1184.74C1767.18,1184.45 1761.27,1184.22 1755.34,1184.04C1749.42,1183.87 1743.48,1183.72 1737.5,1183.64C1731.52,1183.53 1725.49,1183.5 1719.5,1183.5C1713.49,1183.5 1707.49,1183.55 1701.51,1183.64C1695.51,1183.72 1689.57,1183.87 1683.65,1184.04C1677.72,1184.22 1671.79,1184.45 1665.91,1184.76C1660.03,1185.03 1654.17,1185.31 1648.34,1185.7C1642.49,1186.08 1636.68,1186.48 1630.9,1186.94C1625.1,1187.38 1619.36,1187.86 1613.63,1188.42C1607.91,1188.94 1602.22,1189.52 1596.54,1190.14C1590.86,1190.76 1585.21,1191.44 1579.6,1192.16C1573.99,1192.86 1568.43,1193.57 1562.87,1194.38C1557.32,1195.15 1551.81,1195.99 1546.31,1196.87C1540.85,1197.73 1535.41,1198.63 1530,1199.57C1524.59,1200.53 1519.21,1201.48 1513.86,1202.49C1508.54,1203.49 1503.23,1204.55 1497.96,1205.67C1492.7,1206.73 1487.48,1207.83 1482.28,1208.99C1477.11,1210.17 1471.96,1211.37 1466.85,1212.59C1461.76,1213.82 1456.7,1215.11 1451.69,1216.39C1446.67,1217.67 1441.71,1219 1436.77,1220.36C1431.86,1221.71 1426.97,1223.09 1422.12,1224.53C1417.28,1225.94 1412.51,1227.39 1407.75,1228.87C1403.01,1230.37 1398.3,1231.86 1393.68,1233.41C1389.04,1234.96 1384.43,1236.53 1379.87,1238.15C1375.33,1239.72 1370.84,1241.35 1366.4,1243.02C1361.96,1244.66 1357.58,1246.33 1353.24,1248.05C1348.9,1249.75 1344.62,1251.5 1340.39,1253.25C1336.15,1255.02 1331.99,1256.78 1327.87,1258.6C1323.77,1260.4 1319.71,1262.24 1315.71,1264.1C1311.72,1265.93 1307.77,1267.8 1303.88,1269.69C1300.01,1271.58 1296.19,1273.48 1292.44,1275.4C1288.69,1277.33 1284.99,1279.33 1281.35,1281.29C1277.71,1283.26 1274.15,1285.29 1270.64,1287.31C1263.62,1291.3 1256.86,1295.41 1250.37,1299.56C1243.89,1303.73 1237.64,1307.95 1231.69,1312.23C1225.76,1316.44 1220.07,1320.84 1214.69,1325.2C1209.31,1329.56 1204.2,1333.93 1199.39,1338.37C1194.6,1342.83 1190.08,1347.33 1185.88,1351.84C1181.67,1356.32 1177.77,1360.84 1174.16,1365.38C1170.56,1369.96 1167.26,1374.51 1164.28,1379.07C1161.3,1383.65 1158.63,1388.18 1156.29,1392.78C1153.94,1397.3 1151.92,1401.89 1150.19,1406.47C1148.48,1410.97 1147.11,1415.52 1146.05,1420.03C1145.77,1421.19 1145.6,1422.38 1145.35,1423.5C1145.22,1424.12 1145.1,1424.79 1144.98,1425.36C1144.88,1425.88 1144.76,1426.44 1144.68,1426.93C1144.46,1428.1 1144.19,1429.26 1143.99,1430.48C1143.79,1431.76 1143.66,1433.12 1143.51,1434.49C1143.66,1435.86 1143.79,1437.25 1143.99,1438.55C1144.19,1439.75 1144.48,1440.87 1144.68,1442.05C1144.8,1442.62 1144.91,1443.29 1145.03,1443.88C1145.13,1444.41 1145.25,1445 1145.35,1445.46C1145.6,1446.6 1145.77,1447.8 1146.05,1449.01C1147.11,1453.49 1148.52,1458.03 1150.21,1462.53C1151.93,1467.13 1153.94,1471.7 1156.29,1476.28C1158.63,1480.82 1161.3,1485.35 1164.28,1489.97C1167.26,1494.49 1170.56,1499.07 1174.16,1503.64C1177.77,1508.16 1181.69,1512.69 1185.89,1517.2C1190.1,1521.68 1194.6,1526.17 1199.41,1530.63C1204.22,1535.12 1209.33,1539.46 1214.71,1543.82C1220.09,1548.2 1225.78,1552.54 1231.73,1556.78C1237.66,1561.06 1243.89,1565.31 1250.37,1569.46C1256.86,1573.63 1263.62,1577.72 1270.64,1581.74C1274.15,1583.73 1277.71,1585.75 1281.37,1587.71C1284.99,1589.68 1288.69,1591.67 1292.44,1593.58C1296.19,1595.51 1300.03,1597.42 1303.9,1599.3C1307.79,1601.19 1311.72,1603.08 1315.73,1604.91C1319.71,1606.74 1323.79,1608.62 1327.89,1610.39C1332.01,1612.24 1336.16,1613.97 1340.39,1615.74C1344.62,1617.5 1348.91,1619.25 1353.25,1620.95C1357.58,1622.66 1361.96,1624.35 1366.4,1626C1370.84,1627.65 1375.33,1629.28 1379.89,1630.9C1384.45,1632.49 1389.04,1634.05 1393.68,1635.6C1398.32,1637.16 1403.03,1638.64 1407.75,1640.1C1412.51,1641.63 1417.28,1643.04 1422.12,1644.48C1426.97,1645.91 1431.86,1647.33 1436.78,1648.68C1441.73,1650.03 1446.68,1651.37 1451.69,1652.62C1456.72,1653.94 1461.78,1655.19 1466.89,1656.41C1471.98,1657.64 1477.12,1658.85 1482.3,1659.98C1487.49,1661.19 1492.7,1662.24 1497.96,1663.33C1503.23,1664.45 1508.54,1665.51 1513.86,1666.55C1519.21,1667.57 1524.59,1668.47 1530,1669.41C1535.41,1670.35 1540.85,1671.28 1546.31,1672.13C1551.81,1672.99 1557.32,1673.81 1562.87,1674.63C1568.41,1675.4 1573.99,1676.11 1579.6,1676.83C1585.21,1677.55 1590.86,1678.23 1596.52,1678.87C1602.2,1679.49 1607.9,1680.04 1613.63,1680.59C1619.36,1681.13 1625.1,1681.63 1630.88,1682.07C1636.68,1682.49 1642.49,1682.92 1648.34,1683.29C1654.17,1683.66 1660.03,1683.99 1665.91,1684.25C1671.79,1684.55 1677.72,1684.75 1683.65,1684.94C1689.57,1685.14 1695.51,1685.23 1701.5,1685.36C1707.48,1685.44 1713.47,1685.5 1719.49,1685.5C1725.49,1685.5 1731.5,1685.44 1737.48,1685.36C1743.46,1685.23 1749.42,1685.14 1755.34,1684.94C1761.25,1684.75 1767.18,1684.55 1773.06,1684.25C1778.96,1683.99 1784.82,1683.7 1790.65,1683.31C1796.5,1682.94 1802.31,1682.51 1808.09,1682.08C1813.87,1681.63 1819.64,1681.13 1825.37,1680.59C1831.08,1680.04 1836.77,1679.5 1842.47,1678.87C1848.13,1678.23 1853.78,1677.58 1859.39,1676.85C1865,1676.14 1870.57,1675.4 1876.13,1674.63C1881.67,1673.81 1887.18,1672.99 1892.66,1672.13C1898.14,1671.28 1903.59,1670.35 1909.01,1669.41C1914.42,1668.47 1919.79,1667.54 1925.13,1666.53C1930.46,1665.51 1935.77,1664.45 1941.03,1663.33C1946.29,1662.25 1951.52,1661.19 1956.71,1659.98C1961.88,1658.83 1967.03,1657.64 1972.14,1656.41C1977.23,1655.17 1982.29,1653.94 1987.32,1652.59C1992.33,1651.35 1997.3,1650 2002.23,1648.65C2007.15,1647.29 2012.03,1645.91 2016.87,1644.46C2021.71,1643.04 2026.5,1641.63 2031.24,1640.1C2035.98,1638.65 2040.67,1637.16 2045.33,1635.6C2049.97,1634.05 2054.58,1632.49 2059.12,1630.87C2063.66,1629.26 2068.15,1627.65 2072.59,1625.98C2077.04,1624.35 2081.42,1622.66 2085.76,1620.95C2090.09,1619.25 2094.38,1617.5 2098.61,1615.74C2102.84,1613.97 2107,1612.25 2111.12,1610.39C2115.22,1608.62 2119.3,1606.74 2123.28,1604.91C2127.29,1603.08 2131.22,1601.19 2135.09,1599.3C2138.98,1597.4 2142.8,1595.53 2146.57,1593.58C2150.32,1591.67 2154.01,1589.68 2157.64,1587.71C2161.28,1585.75 2164.86,1583.73 2168.36,1581.71C2175.37,1577.69 2182.14,1573.61 2188.62,1569.44C2195.1,1565.29 2201.33,1561.09 2207.3,1556.81C2213.23,1552.59 2218.92,1548.2 2224.32,1543.82C2229.68,1539.46 2234.79,1535.1 2239.6,1530.64C2244.41,1526.17 2248.91,1521.68 2253.12,1517.2C2257.34,1512.69 2261.22,1508.17 2264.83,1503.65C2268.43,1499.09 2271.73,1494.5 2274.71,1489.97C2277.69,1485.35 2280.36,1480.83 2282.7,1476.27C2285.05,1471.7 2287.09,1467.13 2288.8,1462.55C2290.49,1458.05 2291.88,1453.49 2292.95,1449.01C2293.22,1447.81 2293.41,1446.62 2293.66,1445.54C2293.78,1444.9 2293.89,1444.23 2294.03,1443.64C2294.13,1443.13 2294.24,1442.59 2294.31,1442.08C2294.51,1440.91 2294.81,1439.76 2295,1438.57C2295.22,1437.26 2295.33,1435.88 2295.5,1434.53C2295.33,1433.12 2295.2,1431.74 2295,1430.47Z" />\n    </g>\n    <path d="M179.539,220.301C179.539,239.078 165.082,254.301 147.246,254.301C129.41,254.301 114.953,239.078 114.953,220.301C114.953,201.527 129.41,186.305 147.246,186.305C165.082,186.305 179.539,201.527 179.539,220.301Z"/>\n    <g fill="none" stroke-width= "40px" transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1996.5,1434.49C1996.5,1329.76 1938.43,1238.62 1852.76,1191.41C1849.2,1190.98 1845.65,1190.53 1842.1,1190.14C1836.42,1189.53 1830.71,1188.94 1824.98,1188.42C1819.23,1187.86 1813.49,1187.38 1807.69,1186.94C1801.89,1186.48 1796.1,1186.08 1790.24,1185.73C1784.39,1185.35 1778.53,1185.03 1772.63,1184.74C1766.75,1184.45 1760.82,1184.22 1754.89,1184.04C1748.96,1183.87 1742.99,1183.72 1737.01,1183.64C1731.01,1183.53 1724.98,1183.5 1718.99,1183.5C1712.99,1183.5 1706.97,1183.55 1700.98,1183.64C1695,1183.72 1689.03,1183.87 1683.1,1184.04C1677.19,1184.22 1671.26,1184.45 1665.34,1184.76C1659.46,1185.03 1653.58,1185.31 1647.75,1185.7C1641.9,1186.08 1636.09,1186.48 1630.3,1186.94C1624.5,1187.38 1618.74,1187.86 1613.01,1188.42C1607.28,1188.94 1601.56,1189.52 1595.88,1190.14C1592.33,1190.53 1588.82,1190.96 1585.26,1191.39C1499.57,1238.62 1441.51,1329.76 1441.51,1434.49C1441.51,1539.24 1499.56,1630.38 1585.25,1677.59C1588.78,1678.01 1592.33,1678.47 1595.88,1678.87C1601.58,1679.49 1607.29,1680.04 1613.02,1680.59C1618.75,1681.13 1624.52,1681.63 1630.3,1682.07C1636.09,1682.49 1641.9,1682.92 1647.77,1683.29C1653.6,1683.66 1659.46,1683.99 1665.36,1684.25C1671.26,1684.55 1677.19,1684.75 1683.12,1684.94C1689.05,1685.14 1695,1685.23 1700.99,1685.36C1706.97,1685.44 1712.99,1685.5 1719,1685.5C1725,1685.5 1731.01,1685.44 1737.01,1685.36C1742.99,1685.23 1748.97,1685.14 1754.89,1684.94C1760.82,1684.75 1766.75,1684.55 1772.64,1684.25C1778.53,1683.99 1784.4,1683.7 1790.24,1683.31C1796.1,1682.94 1801.91,1682.51 1807.71,1682.08C1813.49,1681.63 1819.25,1681.13 1825,1680.59C1830.71,1680.04 1836.42,1679.5 1842.1,1678.87C1845.67,1678.48 1849.2,1678.02 1852.74,1677.61C1938.43,1630.39 1996.5,1539.24 1996.5,1434.49Z"/>\n    </g>\n    <g stroke-width="25px" transform="matrix(0.235243,0,0,0.245462,-256.696,-129.858)">\n        <path d="M1117.26,774.021L1495.79,554.41L1876.76,773.989L1498.22,993.616L1117.26,774.021M1883.5,773.989L1495.75,550.495L1110.5,774.021L1498.25,997.499L1883.5,773.989" />\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,188.517,69.5886)">\n        <path d="M0.007,0.005L0.007,369.922" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1513.49,1036.5L1513.49,1193.24" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,-0.212577,-0.20193,0.122731,188.644,67.8623)">\n        <path d="M-0.003,0.003L-0.005,441.736" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(0.233169,0,0,0.245462,-253.455,-131.813)">\n        <path d="M1480.51,1033.5L1480.51,1202.4" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.11662,0.212556,0.201158,0.122262,2.826,67.8637)">\n        <path d="M0.002,-0.008L0.004,441.726" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.233169,0,0,0.245462,2.91461,67.6249)">\n        <path d="M0.002,0L0.002,439.254" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n    <g transform="matrix(-0.116585,0.212577,0.20193,0.122731,3.4509,175.859)">\n        <path d="M0.005,-0.006L0.003,116.931" fill="none" stroke-width="22.92px" stroke-linecap="round"/>\n    </g>\n</g>\n')};for(const IH in TO)ME(IH,{pathData:"",collection:"custom",packageName:"custom",viewBox:"0 0 284 284",customTemplate:TO[IH]});let MO=class extends Ce{constructor(){super(...arguments),this.currentViewModeIndex=2,this.isColumnMode=!1}render(){return ie`
      <ui5-segmented-button
        id="viewModeBtn"
        class="${this.isColumnMode?"ver-orientation":"hor-orientation"}"
        @selection-change="${this._handleSelectionChanged}"
      >
        <ui5-segmented-button-item
          tooltip="One View Mode"
          ?selected=${0==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/singleview-mobile":"custom/singleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Sync Mode"
          ?selected=${1==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-synced-mobile":"custom/doubleview-synced"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
        <ui5-segmented-button-item
          tooltip="Navigation Mode"
          ?selected=${2==this.currentViewModeIndex}
        >
          <ui5-icon
            name="${this.isColumnMode?"custom/doubleview-mobile":"custom/doubleview"}"
            class="${this.isColumnMode?"rotated-icon":""}"
          ></ui5-icon>
        </ui5-segmented-button-item>
      </ui5-segmented-button>

      <pv-menu ?isColumnMode=${this.isColumnMode}>
        <pv-menu-item
          icon="chart-axis"
          title="3D Environment"
          idx="1"
        >
          <environment-settings
            ?isColumnMode=${this.isColumnMode}
            .environmentSettings="${this.viewerSettings.environment3D}"
          >
          </environment-settings>
        </pv-menu-item>
        <pv-menu-item icon="rotate" title="Rotation Settings" idx="2">
          <rotation-settings
            ?isColumnMode=${this.isColumnMode}
            ?isAutoRotationDisabled="${this.currentViewModeIndex<2}"
            .imageRotationSettings="${this.viewerSettings.imageRotation}"
            .modelOrientationSettings="${this.viewerSettings.modelOrientation}"
          >
          </rotation-settings>
        </pv-menu-item>
        <pv-menu-item icon="measure" title="Measurement Tool" idx="3">
          <measurement-tool
            ?isColumnMode=${this.isColumnMode}
            .measurementTool="${this.viewerSettings.measurementTool}"
          ></measurement-tool>
        </pv-menu-item>
      </pv-menu>
    `}_handleSelectionChanged(e){const t=e.detail.selectedItems[0],i=t.getAttribute("pos-in-set")??t.ariaPosInSet;null==i&&console.warn("Selected item does not have an ariaPosInSet property. Check your segmented button implementation.",t);const n=parseInt(null==i?"":i,10)-1;n!=this.currentViewModeIndex&&(this.currentViewModeIndex=n,this.dispatchEvent(new CustomEvent("view-mode-changed",{detail:{viewIndex:n}})))}};MO.styles=x`
    :host {
      height: 100%;
      width: 100%;
      --_ui5_button_base_padding: 0px;
    }

    .rotated-icon {
      transform: rotate(-90deg);
    }

    .hor-orientation {
      left: 50%;
    }

    .ver-orientation {
      top: 50%;
    }

    #viewModeBtn.hor-orientation {
      bottom: 1%;
      transform: translateX(-50%);
    }

    #viewModeBtn.ver-orientation {
      right: 1%;
      transform-origin: 100% 0;
      transform: rotate(90deg) translateX(50%);
    }

    #viewModeBtn {
      position: absolute;
      pointer-events: auto;
    }

    ui5-segmented-button-item {
      height: 3.5rem;
      padding: 1px 1px 1px 1px;
    }

    ui5-icon {
      width: 3.5rem;
      height: 3.5rem;
      stroke: black;
      fill: black;
      pointer-events: none;
      transform: translateY(2.5%);
    }
  `,EO([Ie({type:Number})],MO.prototype,"currentViewModeIndex",2),EO([Ie({type:Boolean})],MO.prototype,"isColumnMode",2),EO([Ie({type:Object})],MO.prototype,"viewerSettings",2),MO=EO([Te("control-panel")],MO);class IO{constructor(e,t,i){this.focalLengthInPx=e,this._sensorWidthInPx=t,this._sensorHeightInPx=i,0==this._sensorHeightInPx||0==this._sensorWidthInPx?this.aspectRatio=-1:this.aspectRatio=t/i,this.fovInRad=this._sensorHeightInPx/this.focalLengthInPx,this.cx=.5*(this._sensorWidthInPx-1),this.cy=.5*(this._sensorHeightInPx-1)}equals(e){return e.focalLengthInPx==this.focalLengthInPx&&e.cx==this.cx&&e.cy==this.cy}}class BO extends bw.EventEmitter{constructor(){super(),this.isValid=!1,this.sensorMap=new Map,this.sensorIds=[],this.imageFiles=[],this.camPosesInChunk=[],this.transformationChunkToWorld=new hr,this._xhttp=new XMLHttpRequest,this._xmlDoc=null,this._xhttp.onload=this._extractInformation.bind(this)}readFromFile(e){this._xhttp.open("GET",e,!0),this._xhttp.send()}_extractInformation(){this.isValid=!1,200==this._xhttp.status?(this._xmlDoc=this._xhttp.responseXML,null!=this._xmlDoc?this._extractIntrinsicCameraInformation()?this._extractExtrinsicCameraInformation()?(this.isValid=!0,this.emit("scanInformationExtracted")):console.log("Coudn't extract extrinisc camera information from xml document"):console.log("Coudn't extract intrinsic camera information from xml document"):console.log("Xml of scaninformation is not valid")):console.log("Coudn't read xml file")}_extractIntrinsicCameraInformation(){if(null==this._xmlDoc)return!1;const e=this._xmlDoc.getElementsByTagName("sensor");if(0==e.length)return console.log("No sensors found in xml document"),!1;for(let t=0;t<e.length;t++){const i=e[t].getAttribute("id");if(null==i)return console.log('Sensor Element in xml doesn\'t contain key "id"',t,e[t]),!1;const n=RO(e[t],"calibration");if(null==n)return!1;const r=RO(n,"resolution");if(null==r)return!1;const o=PO(r,"width"),a=PO(r,"height");if(null==o||null==a)return console.log("XML Document doesn't contain information about sensor width and height"),!1;const s=RO(n,"f");if(null==s||null==s.textContent)return console.log("XML Document doesn't contain information about the field of view",s),!1;const l=Number(s.textContent);if(Number.isNaN(l)||l<=0)return console.log("XML Document doesn't contain valid information about the field of view:",l),!1;this.sensorMap.set(i,new IO(l,o,a))}return!0}_extractExtrinsicCameraInformation(){return null!=this._xmlDoc&&(this._extractChunkToWorldCoorTransformation()?!!this._extractCamPoses()||(console.log("Coudn't extract cam poses information from xml document"),!1):(console.log("Coudn't extract transformation chunk to world coordinate system from xml document"),!1))}_extractChunkToWorldCoorTransformation(){if(null==this._xmlDoc)return!1;const e=function(e,t){const i=e.getElementsByTagName(t);return 0==i.length?(console.log("XML Document doesn't contain valid element with name",t),null):i[i.length-1]}(this._xmlDoc,"transform");if(null==e)return!1;const t=RO(e,"rotation");if(null==t||null==t.textContent)return console.log("XML Document doesn't contain valid information about the rotation between chunk and world coordinate system",t),!1;const i=t.textContent.split(" ").map((e=>Number(e)));if(9!=i.length)return console.log("Rotation part of chunk doesn't contain 9 numbers:",i),!1;var n=new ln;n.fromArray(i).transpose();const r=RO(e,"scale");if(null==r||null==r.textContent)return console.log("XML Document doesn't contain valid information about the scaling between chunk and world coordinate system",r),!1;const o=Number(r.textContent);if(o<=0)return console.log("Scalefactor in xml document is not valid: ",o),!1;n.multiplyScalar(o);const a=RO(e,"translation");if(null==a||null==a.textContent)return console.log("XML Document doesn't contain valid information about the translation between chunk and world coordinate system",a),!1;const s=a.textContent.split(" ").map((e=>Number(e)));if(3!=s.length)return console.log("Translation part of chunk doesn't contain 3 numbers:",s),!1;const l=new Dn(s[0],s[1],s[2]);return this.transformationChunkToWorld.setFromMatrix3(n),this.transformationChunkToWorld.setPosition(l),!0}_extractCamPoses(){if(null==this._xmlDoc)return!1;const e=this._xmlDoc.getElementsByTagName("camera");if(0==e.length)return console.log("No cameras found in xml document"),!1;this.imageFiles.length=e.length,this.camPosesInChunk.length=e.length,this.sensorIds.length=e.length;for(let t=0;t<e.length;t++){const i=e[t].getAttribute("label");if(null==i)return console.log('Camera Element in xml doesn\'t contain key "label"',t,e[t]),!1;this.imageFiles[t]=i;const n=e[t].getAttribute("sensor_id");if(null==n)return console.log('Camera Element in xml doesn\'t contain key "sensor_id"',t,e[t]),!1;if(0==this.sensorMap.has(n))return console.log("Sensor with id",n,"doesn't exist in xml file"),!1;this.sensorIds[t]=n;const r=RO(e[t],"transform");if(null==r||null==r.textContent)return console.log("Camera Element in xml doesn't contain transformationElement",t,e[t]),!1;const o=r.textContent.split(" ").map((e=>Number(e)));if(16!=o.length)return console.log("cam pose doesn't contain 16 numbers:",t,o),!1;this.camPosesInChunk[t]=new hr,this.camPosesInChunk[t].fromArray(o).transpose()}return!0}}function RO(e,t){const i=e.getElementsByTagName(t);return 0==i.length?(console.log("XML Document doesn't contain valid element with name",t),null):i[0]}function PO(e,t){const i=e.getAttribute(t);return i?Number(i):null}class kO extends bw.EventEmitter{constructor(){super(...arguments),this.poses=[],this.normedPositions=[],this._sensorMap=new Map,this._sensorIds=[],this._camPosesInChunk=[],this._chunkToWorldTransform=new hr,this._isYupTransformApplied=!0,this._additionalRotation=new hr}init(e,t,i){this._sensorMap=e.sensorMap,this._sensorIds=e.sensorIds,this._camPosesInChunk=e.camPosesInChunk,this._chunkToWorldTransform=e.transformationChunkToWorld,this._isYupTransformApplied=t,this._additionalRotation=this._additionalRotation.makeRotationFromEuler(i),this._calculateCamPosesInWorldCoor()}setIsYupTransformApplied(e){e!=this._isYupTransformApplied&&(this._isYupTransformApplied=e,this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed"))}setAdditionalRotation(e){console.log("Set additional rotation"),this._additionalRotation=this._additionalRotation.makeRotationFromEuler(e.angleInRad),this._calculateCamPosesInWorldCoor(),this.emit("camera-parameters-changed")}getImageSensor(e){const t=this._sensorIds[e];return this._sensorMap.get(t)}getCameraPose(e){return e<this.poses.length&&e>=0?this.poses[e]:new hr}getSyncSettingsOfNextBestImage(e){let t=e.position.clone().normalize(),i=Number.MAX_VALUE,n=-1;for(let b=0;b<this.normedPositions.length;b++){const e=Math.acos(t.dot(this.normedPositions[b]));e<i&&(i=e,n=b)}if(-1==n)return[null,null];let r=new Dn,o=new Dn,a=new Dn;this.poses[n].extractBasis(r,o,a);const s=Math.acos(-a.y);let l=Math.atan2(-a.x,-a.z),c=new Dn(Math.cos(l),0,-Math.sin(l)),u=new Dn(-Math.cos(s)*Math.sin(l),Math.sin(s),-Math.cos(s)*Math.cos(l)),h=new sn;h.x=r.dot(c),h.y=r.dot(u),h.normalize();const d=180*Math.atan2(h.y,h.x)/Math.PI;let p=new Dn;p.setFromMatrixPosition(this.poses[n]);const f=p.length();let m={theta:l,phi:s,radius:f,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}},g=new Dn;g.x=p.x-f*Math.sin(s)*Math.sin(l),g.y=p.y-f*Math.cos(s),g.z=p.z-f*Math.sin(s)*Math.cos(l);const _=this._sensorIds[n],v=this._sensorMap.get(_);let y=.25*Math.PI,A=1;return null!=v&&(y=v.fovInRad,A=v.aspectRatio),[{imageIdx:n,rotationAngle:-d,imageAspectRatio:A},{orbitPos:m,cameraTarget:tb(g),fovInRad:y}]}_calculateCamPosesInWorldCoor(){var e=this._chunkToWorldTransform.clone();if(this._isYupTransformApplied){var t=new hr;t.makeRotationX(.5*-Math.PI),e.premultiply(t)}let i=new Dn,n=new Ln,r=new Dn;this.poses.length=this._camPosesInChunk.length,this.normedPositions.length=this._camPosesInChunk.length;for(let a=0;a<this._camPosesInChunk.length;a++){let t=new hr;t.multiplyMatrices(e,this._camPosesInChunk[a]),t.premultiply(this._additionalRotation),t.decompose(i,n,r);var o=new Dn(1,1,1);i.multiplyScalar(1e3);let s=new hr;s.compose(i,n,o),this.poses[a]=s;let l=new Dn;l.setFromMatrixPosition(s),this.normedPositions[a]=l.normalize()}}}class LO{constructor(){this.angleInRad=new br(0,0,0,"YXZ")}angleInRadAsString(){return`${this.angleInRad.z}rad ${this.angleInRad.x}rad ${this.angleInRad.y}rad`}equals(e){return e.angleInRadAsString()==this.angleInRadAsString()}set x(e){this.angleInRad.x=e}get x(){return this.angleInRad.x}set y(e){this.angleInRad.y=e}get y(){return this.angleInRad.y}set z(e){this.angleInRad.z=e}get z(){return this.angleInRad.x}}function DO(e){return`rgb(${e.r}, ${e.g}, ${e.b})`}class NO extends bw.EventEmitter{constructor(){super(...arguments),this._eulerOrientation=new LO}set xOrientationInRad(e){this._eulerOrientation.x!=e&&(this._eulerOrientation.x=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set yOrientationInRad(e){this._eulerOrientation.y!=e&&(this._eulerOrientation.y=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}set zOrientationInRad(e){this._eulerOrientation.z!=e&&(this._eulerOrientation.z=e,this.emit("model-orientation-changed",this.eulerOrientationYXZInRad))}get eulerOrientationYXZInRad(){return this._eulerOrientation}}class OO extends bw.EventEmitter{constructor(){super(...arguments),this._autoRotationAngle=0,this._userSetRotationAngle=0,this._isAutoRotationActivated=!1}set autoRotationAngle(e){this._autoRotationAngle!=e&&(this._autoRotationAngle=e,this._isAutoRotationActivated&&this.emit("rotation-angle-changed",this._autoRotationAngle))}get autoRotationAngle(){return this._autoRotationAngle}set userSetRotationAngle(e){this._userSetRotationAngle!=e&&(this._userSetRotationAngle=e,this._isAutoRotationActivated||this.emit("rotation-angle-changed",this._userSetRotationAngle))}get userSetRotationAngle(){return this._userSetRotationAngle}set isAutoRotationActivated(e){this._isAutoRotationActivated!=e&&(this._isAutoRotationActivated=e,this._isAutoRotationActivated?this.emit("rotation-angle-changed",this._autoRotationAngle):this.emit("rotation-angle-changed",this._userSetRotationAngle,!1))}get isAutoRotationActivated(){return this._isAutoRotationActivated}}class FO extends bw.EventEmitter{constructor(){super(...arguments),this._showAxes=!0,this._backgroundColor="#444444",this._gradientColor="#b9b9b9",this._applyGradient=!0,this._brightness=1}set showAxes(e){this._showAxes!=e&&(this._showAxes=e,this.emit("change-axes-visibility-requested",this._showAxes))}get showAxes(){return this._showAxes}set backgroundColor(e){const t=Ik(e),i=DO(t);if(console.log("Set backgroundcolor",t,i),this._backgroundColor==i)return;this._backgroundColor=i;const n={r:Math.min(2.5*t.r,255),g:Math.min(2.5*t.g,255),b:Math.min(2.5*t.b,255)};this._gradientColor=DO(n),console.log("Set gradient color",n,this._gradientColor),this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,"")}get backgroundColor(){return this._applyGradient?[this._backgroundColor,this._gradientColor]:[this._backgroundColor,""]}set applyGradient(e){this._applyGradient!=e&&(this._applyGradient=e,this._applyGradient?this.emit("change-viewer-background-color-requested",this._backgroundColor,this._gradientColor):this.emit("change-viewer-background-color-requested",this._backgroundColor,""))}get applyGradient(){return this._applyGradient}set brightness(e){this._brightness!=e&&(this._brightness=e,this.emit("change-exposure-requested",this._brightness))}}class UO extends bw.EventEmitter{constructor(){super(...arguments),this._isEditModeActive=!1,this._measurementPoints=[],this._measuredLength=0,this._currentOrientation=new br,this._currentTranslation=new Dn,this._imageSensor=null,this._imageCamOrientation=new hr,this._measurementDistances=[],this._sceneElementGroup=new Fl}set imageSensor(e){this._imageSensor&&e.equals(this._imageSensor)||(this._imageSensor=e)}set imageCamOrientation(e){this._imageCamOrientation.equals(e)||(this._imageCamOrientation=e)}get sceneElementGroup(){return this._sceneElementGroup}set isEditModeActive(e){this._isEditModeActive!=e&&(this._isEditModeActive=e)}get isEditModeActive(){return this._isEditModeActive}get numPoints(){return this._measurementPoints.length}get measuredLength(){return this._measuredLength}set translation(e){e.equals(this._currentTranslation)||(this._measurementDistances.forEach((t=>{t.translate(e)})),this._currentTranslation=e.clone())}set eulerOrientation(e){this._currentOrientation.equals(e.angleInRad)||(this._currentOrientation=e.angleInRad.clone(),this._measurementDistances.forEach((e=>{e.changeSceneOrientation(this._currentOrientation)})),this._measurementPoints.forEach((e=>{e.updatePosition(this._currentOrientation)})))}addPointFromImage(e,t){if(null==this._imageSensor)return void console.warn("Cannot add point from image, since image sensor is null.");let i=new Dn;i.x=e-this._imageSensor.cx,i.y=t-this._imageSensor.cy,i.z=this._imageSensor.focalLengthInPx;let n=new ln;n.setFromMatrix4(this._imageCamOrientation),console.log("Cam orientation in World",this._imageCamOrientation),i.applyMatrix3(n);let r=i.normalize(),o=new Dn;o.setFromMatrixPosition(this._imageCamOrientation),this.emit("calculate-hotspot-requested",o,r)}addPointFrom3DScene(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._measurementPoints.length,r=new Dn(e.x,e.y,e.z),o=new Dn(t.x,t.y,t.z),a=new VO(n,r,o,this._currentOrientation);if(a.on("hotspot-selected",this._updateHotspotInImage.bind(this)),a.on("hotspot-focus-changed",(e=>this.emit("change-image-hotspot-visibility",e))),this._measurementPoints.push(a),n>0){const e=new HO(this._measurementDistances.length,this._measurementPoints[n-1],a,this._currentTranslation,this._currentOrientation);this._measuredLength+=e.distance,this._sceneElementGroup.add(e.sceneElement),this._measurementDistances.push(e),this.emit("hotspot-added",e.annotationElement),this.emit("update-requested")}this.emit("hotspot-added",a.domElement),i&&this._updateHotspotInImage(a.positionInSceneCoor),window.setTimeout((()=>a.domElement.focus()),0)}resetPoints(){this._measurementPoints.forEach((e=>{e.delete()})),this._measurementPoints=[],this._measuredLength=0,this._measurementDistances.forEach((e=>{e.reset()})),this.emit("update-requested")}showPoints(){this._measurementPoints.forEach((e=>{e.show()})),this._measurementDistances.forEach((e=>{e.show()})),this.emit("scene-update-requested")}hidePoints(){this._measurementDistances.forEach((e=>{e.hide()})),this._measurementPoints.forEach((e=>{e.hide()})),this.emit("scene-update-requested")}_updateHotspotInImage(e){if(null==this._imageSensor)return void console.warn("Cannot update hotspot in image: image sensor null.");const t=this._imageSensor,i=this._imageCamOrientation.clone(),n=(new Dn).setFromMatrixPosition(i);n.add(this._currentTranslation),i.setPosition(n),i.invert();const r=(new Dn).addVectors(e,this._currentTranslation);let o=new In(r.x,r.y,r.z,1).applyMatrix4(i),a=new Dn(o.x/o.w,o.y/o.w,o.z/o.w),s=a.x/a.z*t.focalLengthInPx+t.cx,l=a.y/a.z*t.focalLengthInPx+t.cy;s>0&&l>0&&this.emit("update-image-hotspot-position-requested",s,l)}}class zO{constructor(){this._lineGeometry=new So,this._translation=new Dn,this._pointsInModelCoor=[],this._lineMaterial=new fu({color:16777215,gapSize:.1,dashSize:.1}),this._lineMaterial.transparent=!0,this._lineMaterial.depthTest=!1,this._distanceLine=new qc(this._lineGeometry,this._lineMaterial)}get lineElement(){return this._distanceLine}addPoint(e,t,i){const n=(new hr).makeRotationFromEuler(i).invert(),r=e.clone().applyMatrix4(n);this._pointsInModelCoor.push(r),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new hr).makeRotationFromEuler(i)),this._lineGeometry.translate(t.x,t.y,t.z),this._distanceLine.computeLineDistances(),this._translation=t}addPointInModelCoor(e,t,i){this._pointsInModelCoor.push(e),this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new hr).makeRotationFromEuler(i)),this._lineGeometry.translate(t.x,t.y,t.z),this._distanceLine.computeLineDistances(),this._translation=t}setTranslation(e){this._lineGeometry.translate(-this._translation.x+e.x,-this._translation.y+e.y,-this._translation.z+e.z),this._translation=e}setEulerOrientation(e){this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._lineGeometry.applyMatrix4((new hr).makeRotationFromEuler(e)),this._lineGeometry.translate(this._translation.x,this._translation.y,this._translation.z),this._distanceLine.computeLineDistances()}set opacity(e){this._lineMaterial.opacity=e}show(){this._distanceLine.visible=!0}hide(){this._distanceLine.visible=!1}reset(){this._pointsInModelCoor.length=0,this._lineGeometry.setFromPoints(this._pointsInModelCoor),this._distanceLine.removeFromParent()}}class HO{constructor(e,t,i,n,r){this._sceneLineElement=new zO,this._numVisiblePoints=0,this._isHidden=!1;const o=t.distanceTo(i),a=(new Dn).addVectors(t.positionInSceneCoor,i.positionInSceneCoor).multiplyScalar(.5),s=(new Dn).addVectors(t.normalInSceneCoor,i.normalInSceneCoor).multiplyScalar(.5);this._distanceAnnotation=new QO(e,o,a,s,r),this._sceneLineElement.addPointInModelCoor(t.positionInModelCoor,n,r),this._sceneLineElement.addPointInModelCoor(i.positionInModelCoor,n,r);const l=new MutationObserver(this._handlePointVisibilityChanged.bind(this));l.observe(t.domElement,{attributes:!0}),l.observe(i.domElement,{attributes:!0}),this._numVisiblePoints=Number(t.domElement.hasAttribute("data-visible"))+Number(i.domElement.hasAttribute("data-visible"))}get distance(){return this._distanceAnnotation.distance}get sceneElement(){return this._sceneLineElement.lineElement}get annotationElement(){return this._distanceAnnotation.domElement}translate(e){this._sceneLineElement.setTranslation(e)}changeSceneOrientation(e){this._sceneLineElement.setEulerOrientation(e),this._distanceAnnotation.updatePosition(e)}show(){this._sceneLineElement.show(),this._distanceAnnotation.show(),this._isHidden=!1,this._updateAnnotationVisibility()}hide(){this._isHidden=!0,this._distanceAnnotation.hide(),this._sceneLineElement.hide()}reset(){this._sceneLineElement.reset(),this._distanceAnnotation.delete()}_handlePointVisibilityChanged(e){for(const t of e)if("attributes"===t.type&&"data-visible"===t.attributeName){const e=t.target;this._numVisiblePoints+=e.hasAttribute("data-visible")?1:-1}this._isHidden||this._updateAnnotationVisibility()}_updateAnnotationVisibility(){this._numVisiblePoints<=0?(this._distanceAnnotation.hide(),this._sceneLineElement.opacity=.25):(this._distanceAnnotation.show(),this._sceneLineElement.opacity=1)}}class GO extends bw.EventEmitter{constructor(e,t,i){super();const n=(new hr).makeRotationFromEuler(i).invert();this._positionInSceneCoor=e,this._positionInModelCoor=this._positionInSceneCoor.clone().applyMatrix4(n),this._normalInSceneCoor=t,this._normalInModelCoor=this._normalInSceneCoor.clone().applyMatrix4(n),this._domElement=document.createElement("button"),this._domElement.dataset.visibilityAttribute="visible",this._domElement.style.display="block",this._domElement.dataset.position=this.positionInSceneCoorAsString,this._domElement.dataset.normal=this.normalInSceneCoorAsString,this._domElement.addEventListener("focus",this._handleFocusChanged.bind(this)),this._domElement.addEventListener("blur",this._handleFocusChanged.bind(this))}get domElement(){return this._domElement}get positionInModelCoor(){return this._positionInModelCoor}get positionInSceneCoor(){return this._positionInSceneCoor}get normalInSceneCoor(){return this._normalInSceneCoor}get positionInSceneCoorAsString(){return`${this._positionInSceneCoor.x}m ${this._positionInSceneCoor.y}m ${this._positionInSceneCoor.z}m`}get normalInSceneCoorAsString(){return`${this._normalInSceneCoor.x}m ${this._normalInSceneCoor.y}m ${this._normalInSceneCoor.z}m`}updatePosition(e){this._positionInSceneCoor=this._positionInModelCoor.clone().applyEuler(e),this._normalInSceneCoor=this._normalInModelCoor.clone().applyEuler(e),this.domElement.dataset.position=this.positionInSceneCoorAsString,this.domElement.dataset.normal=this.normalInSceneCoorAsString,this.domElement.dispatchEvent(new Event("hotspot-position-changed"))}show(){this.domElement.style.display="block"}hide(){this.domElement.style.display="none"}delete(){var e;null==(e=this.domElement.parentNode)||e.removeChild(this.domElement)}_handleFocusChanged(e){this.emit("hotspot-focus-changed","focus"==e.type)}}class VO extends GO{constructor(e,t,i,n){super(t,i,n),this._domElement.slot="hotspot-measurementpoint"+e,this.domElement.classList.add("hotspot"),this.domElement.textContent=e.toString(),this.domElement.addEventListener("click",(e=>{e.stopPropagation(),this.emit("hotspot-selected",this.positionInSceneCoor)}))}distanceTo(e){return this.positionInModelCoor.distanceTo(e.positionInModelCoor)}}class QO extends GO{constructor(e,t,i,n,r){super(i,n,r),this._distance=0,this._distance=t,this._domElement.slot="hotspot-distance-annotation"+e,this.domElement.classList.add("annotation"),this.domElement.textContent=t.toFixed(1)+" mm"}get distance(){return this._distance}}class jO{constructor(e,t){this.projectRoot=e,this.imageType=t,this.skyBoxImage=null}resolve2dFileURL(e){return new Promise(((t,i)=>{t(this.projectRoot+e+this.imageType)}))}}var qO=Object.defineProperty,WO=Object.getOwnPropertyDescriptor,$O=(e,t,i,n)=>{for(var r,o=n>1?void 0:n?WO(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n?r(t,i,o):r(o))||o);return n&&o&&qO(t,i,o),o};let XO=class extends Ce{constructor(){super(),this.isYupTransformApplied=!1,this.src3D="",this.src2D="",this.srcScanInformation="",this._scanInformation=new BO,this._imageCamera=new kO,this._syncSettings2DViewer=null,this._syncSettings3DViewer=null,this._viewerAspectRatio=1,this._viewModeIndex=2,this._isInit=!1,this._isColumnDir=!1,this._viewerSettings={imageRotation:new OO,modelOrientation:new NO,measurementTool:new UO,environment3D:new FO},this._viewerSettings.modelOrientation.on("model-orientation-changed",(e=>this._imageCamera.setAdditionalRotation(e))),this._scanInformation.on("scanInformationExtracted",this._handleScanInformationExtracted.bind(this)),this._imageCamera.on("camera-parameters-changed",this._updateViewer.bind(this)),this._resizeObserver=new ResizeObserver(this._handleViewerResizeEvent.bind(this)),null==this.viewSettings&&(this.viewSettings=new jO(this.src2D,".png"))}render(){return ie`
      <div id="viewerBase">
        <viewer-3d id="viewer3D" 
          src=${this.src3D}
          camera-controls  disable-tap
          camera-orbit="0deg 90deg auto" max-camera-orbit="Infinity 157.5deg auto"  min-camera-orbit="-Infinity 22.5deg auto" camera-target="0m 0m 0m"
          exposure="1.2" shadow-intensity="0" alt="Leptinotarsa" min-field-of-view='0deg' max-field-of-view='18deg'  interaction-prompt="none"
          skybox-image ="${this.viewSettings.skyBoxImage}"
          .measurementTool ="${this._viewerSettings.measurementTool}"
          @fov-based-zoom-changed ="${this._handleFovBasedZoomChanged}"
          @cam-orbit-angle-changed = "${this._updateViewer}"
          @dblclick = "${this._updateOneViewSyncMode}"  > 
        </viewer-3d>
        <viewer-2d id="viewer2D" src2D=${this.src2D} 
          .measurementTool ="${this._viewerSettings.measurementTool}"
          .viewSettings ="${this.viewSettings}"
          @image-zoom-changed ="${this._handleImageZoomChanged}"
          @image-shifted ="${this._handleImageShifted}"
          @min-zoom-level-changed ="${this._handleImageMinZoomLevelChanged}"
          @double-press= "${this._updateOneViewSyncMode}"
          @pointer-move-in-disable-mode =  "${this._handlePointerMoveOnImageInDisableMode}"
          @double-press-completed = "${this._updateOneViewSyncMode}" >  
        </viewer-2d>
        <control-panel id="controls" ?isColumnMode=${this._isColumnDir}
        .viewerSettings ="${this._viewerSettings}"
         @view-mode-changed = "${this._handleViewModeChanged}">
        </control-panel>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this._resizeObserver.disconnect(),super.disconnectedCallback()}firstUpdated(){this._resizeObserver.observe(this.viewerBase),this.viewer2DElement.connectWithSettings(this._viewerSettings),this.viewer3DElement.connectWithSettings(this._viewerSettings)}updated(e){super.updated(e),e.has("srcScanInformation")&&(this._isInit=!1,this._scanInformation.readFromFile(this.srcScanInformation)),e.has("isYupTransformApplied")&&this._imageCamera.setIsYupTransformApplied(this.isYupTransformApplied)}_handleViewModeChanged(e){if(this._viewModeIndex==e.detail.viewIndex)return;const t=this._viewModeIndex;this._viewModeIndex=e.detail.viewIndex,0==t&&(this._activateAndShow2DViewer(),this._updateViewerSize()),2!=t&&2!=this._viewModeIndex||this._changeSyncMode(),0==this._viewModeIndex&&this._updateViewerSize()}_handlePointerMoveOnImageInDisableMode(e){this._viewModeIndex>0||this.viewer3DElement.rotateModel(e.detail.dx,e.detail.dy)}_handleScanInformationExtracted(){this._imageCamera.init(this._scanInformation,this.isYupTransformApplied,this._viewerSettings.modelOrientation.eulerOrientationYXZInRad.angleInRad),this.viewer2DElement.setImageFiles(this._scanInformation.imageFiles),this.viewer3DElement.loaded&&this._updateViewer()}_activateAndShow2DViewer(){this.viewer2DElement.style.cursor="auto",this.viewer2DElement.style.opacity="1",this.viewer2DElement.style.zIndex="2",this.viewer2DElement.updatePointerEventsState(!1)}_deactivateAndHide2DViewer(){this.viewer2DElement.style.opacity="0",this.viewer2DElement.style.zIndex="0",this.viewer2DElement.updatePointerEventsState(!0),this.viewer2DElement.style.cursor="grabbing"}_updateOneViewSyncMode(){this._viewModeIndex>0||("0"===this.viewer2DElement.style.opacity?this._activateAndShow2DViewer():this._deactivateAndHide2DViewer())}_handleViewerResizeEvent(){this._updateViewerSize()}_updateViewerSize(){if(0==this._viewModeIndex){if(this._viewerAspectRatio=this.viewerBase.offsetWidth/this.viewerBase.offsetHeight,this.viewer3DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth),this.viewer2DElement.resize(this.viewerBase.offsetHeight,this.viewerBase.offsetWidth,"translate(0,0)"),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;const e=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,t=this._syncSettings3DViewer.fovInRad*e;return this.viewer3DElement.setReferenceFieldOfView(t,this._viewModeIndex<2),void this._synchronize3DViewer()}if(this._isColumnDir=this.viewerBase.offsetHeight>this.viewerBase.offsetWidth,null!=this._syncSettings2DViewer){let e=this._syncSettings2DViewer.imageAspectRatio*this.viewerBase.offsetHeight/this.viewerBase.offsetWidth;this._isColumnDir=e>1}let e=this.viewerBase.offsetWidth,t=.5*this.viewerBase.offsetHeight,i="translate(0,100%)";if(this._isColumnDir||(e=.5*this.viewerBase.offsetWidth,t=this.viewerBase.offsetHeight,i="translate(100%,0)"),this._viewerAspectRatio=e/t,this.viewer3DElement.resize(t,e),this.viewer2DElement.resize(t,e,i),this.requestUpdate(),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;const n=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,r=this._syncSettings3DViewer.fovInRad*n;this.viewer3DElement.setReferenceFieldOfView(r,!0),this._synchronize3DViewer()}_changeSyncMode(){this._viewModeIndex<2?(this.viewer3DElement.updateRadiusMode(!0),this._synchronize3DViewer(),this.viewer3DElement.disablePan=!0):(this.viewer3DElement.disablePan=!1,this.viewer3DElement.updateRadiusMode(!1),this.viewer3DElement.setViewerOffset(0,0))}_handleFovBasedZoomChanged(e){2!=this._viewModeIndex&&this.viewer2DElement.zoomImage(e.detail.zoomLevel)}_handleImageZoomChanged(e){this._viewModeIndex<2&&this.viewer3DElement.zoomTo(e.detail.zoomLevel)}_handleImageMinZoomLevelChanged(e){this.viewer3DElement.setMinZoomLevel(e.detail.zoomLevel)}_handleImageShifted(e){this._viewModeIndex<2&&this.viewer3DElement.setViewerOffset(e.detail.deltaX,e.detail.deltaY)}_updateViewer(){const e=this.viewer3DElement.getCamera();if([this._syncSettings2DViewer,this._syncSettings3DViewer]=this._imageCamera.getSyncSettingsOfNextBestImage(e),null==this._syncSettings2DViewer||null==this._syncSettings3DViewer)return;this._viewerSettings.imageRotation.autoRotationAngle=this._syncSettings2DViewer.rotationAngle;const t=this._syncSettings2DViewer.imageIdx;this.viewer2DElement.loadNextImage(t);const i=this._imageCamera.getImageSensor(t);null==i?console.log("There is no sensor to the image index ",t):this._viewerSettings.measurementTool.imageSensor=i,this._viewerSettings.measurementTool.imageCamOrientation=this._imageCamera.getCameraPose(t);const n=this._syncSettings2DViewer.imageAspectRatio/this._viewerAspectRatio,r=this._syncSettings3DViewer.fovInRad*n;this._isInit?this.viewer3DElement.setReferenceFieldOfView(r,this._viewModeIndex<2):(this.viewer3DElement.setReferenceFieldOfView(r,!0),this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this._updateViewerSize(),this._isInit=!0),this._viewModeIndex<2&&this._synchronize3DViewer()}_synchronize3DViewer(){null!=this._syncSettings3DViewer&&null!=this._syncSettings2DViewer&&(this.viewer3DElement.setCameraOrbitPos(this._syncSettings3DViewer.orbitPos),this.viewer3DElement.cameraTarget=this._syncSettings3DViewer.cameraTarget.toString(),this.viewer3DElement.zoomTo(this.viewer2DElement.getZoomLevel()))}};XO.styles=x`
    :host {
      width: 100%;
      height: 100%;
      display: flex; 
      justify-content: center;
      align-items: center
    }

    #viewerBase {
        position: relative;
        border: 2px solid blue;
        width: 100%;
        height: 100%;
        min-height: 400px;
        border: 0;
        background-color: lightgray
    }
    
    #viewer2D {
      position: absolute;
      left: 0;
      right: 0;
      z-index: 2;
      opacity: 1;
    }

    #viewer3D {
      position: absolute;
      z-index: 1;
      overflow: hidden
    }

    #controls {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      right: 0;
      z-index: 5;
      pointer-events: none;
    }

    .hotspot{
        display: block;
        width: 20px;
        height: 20px;
        border-radius: 20px;
        border: none;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
        box-sizing: border-box;
        cursor: pointer;
        transition: opacity 0.3s;
        position: relative;
        font-size: 12px;
        padding: 0
    }

    .hotspot:not([data-visible]) {
        background: transparent;
        border: 3px solid #fff;
        box-shadow: none;
        pointer-events: none;
    }

    .hotspot:focus {
        border: 3px solid rgb(0, 128, 200);
        outline: none;
        padding: 0;
    }

    .hotspot > * {
        opacity: 1;
    }

    .annotation{
        background: rgba(0, 0, 0,0.75);
        color: rgba(255, 255, 255);
        border-radius: 5px;
        border: 0;
        box-shadow: 0;
        width: max-content;
        padding: 0.25em 0.5em
    }

  `,$O([Ie({type:Boolean})],XO.prototype,"isYupTransformApplied",2),$O([Ie()],XO.prototype,"src3D",2),$O([Ie()],XO.prototype,"src2D",2),$O([Ie()],XO.prototype,"srcScanInformation",2),$O([Ie({type:Object})],XO.prototype,"viewSettings",2),$O([Be("#viewerBase")],XO.prototype,"viewerBase",2),$O([Be("#viewer3D")],XO.prototype,"viewer3DElement",2),$O([Be("#viewer2D")],XO.prototype,"viewer2DElement",2),$O([Be("#controls")],XO.prototype,"controlsElement",2),XO=$O([Te("photogrammetry-viewer")],XO);var YO=1,KO=65535,ZO=setInterval((function(){YO=YO+1&KO}),250);ZO.unref&&ZO.unref();class JO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;var i,n,r,o,a;this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=(i=this.speed||5e3,n=4*(i||5),r=[0],o=1,a=YO-1&KO,function(e){var t=YO-a&KO;for(t>n&&(t=n),a=YO;t--;)o===n&&(o=0),r[o]=r[0===o?n-1:o-1],o++;e&&(r[o-1]+=e);var i=r[o-1],s=r.length<n?0:r[o===n?0:o];return r.length<4?i:4*(i-s)/r.length}),this.initial=!1,this.emitDelay=t,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,t){const i=e.length;if(this.transferred+=i,this.speed=this.streamSpeed(i),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const e={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(e.remaining=this.getRemainingBytes(),e.percentage=this.percentage),t(e)}}}var eF={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function tF(e){var t=function(e){if("number"==typeof e)return{value:e,unit:"px"};var t,i=(e.match(/^[0-9.]*/)||"").toString();t=i.includes(".")?parseFloat(i):parseInt(i,10);var n=(e.match(/[^0-9]*$/)||"").toString();return eF[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var iF=function(){return iF=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},iF.apply(this,arguments)},nF=function(){var e="react-spinners-".concat("BounceLoader","-").concat("bounce");if("undefined"==typeof window||!window.document)return e;var t=document.createElement("style");document.head.appendChild(t);var i=t.sheet,n="\n    @keyframes ".concat(e," {\n      ").concat("0% {transform: scale(0)} 50% {transform: scale(1.0)} 100% {transform: scale(0)}","\n    }\n  ");return i&&i.insertRule(n,0),e}();function rF(e){var t=e.loading,i=void 0===t||t,r=e.color,o=void 0===r?"#000000":r,a=e.speedMultiplier,s=void 0===a?1:a,l=e.cssOverride,c=void 0===l?{}:l,u=e.size,h=void 0===u?60:u,d=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,["loading","color","speedMultiplier","cssOverride","size"]),p=function(e){var t=1===e?"".concat(1/s,"s"):"0s";return{position:"absolute",height:tF(h),width:tF(h),backgroundColor:o,borderRadius:"100%",opacity:.6,top:0,left:0,animationFillMode:"both",animation:"".concat(nF," ").concat(2.1/s,"s ").concat(t," infinite ease-in-out")}},f=iF({display:"inherit",position:"relative",width:tF(h),height:tF(h)},c);return i?n.createElement("span",iF({style:f},d),n.createElement("span",{style:p(1)}),n.createElement("span",{style:p(2)})):null}function oF(e){return e.arrayBuffer?e.arrayBuffer():new Promise(((t,i)=>{const n=new FileReader;n.addEventListener("loadend",(()=>{t(n.result)})),n.addEventListener("error",i),n.readAsArrayBuffer(e)}))}async function aF(e){const t=await oF(e);return new Uint8Array(t)}function sF(e){return"undefined"!=typeof Blob&&e instanceof Blob}function lF(e){return"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}const cF="undefined"!=typeof process&&process.versions&&void 0!==process.versions.node&&void 0===process.versions.electron;class uF{constructor(e){this.typedArray=e instanceof ArrayBuffer||lF(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}}class hF{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){const i=this.blob.slice(e,e+t),n=await oF(i);return new Uint8Array(n)}async sliceAsBlob(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.blob.slice(e,e+t,i)}}function dF(e,t){var i=e.length;if(t<=i)return e;var n=new Uint8Array(Math.max(i<<1,t));return n.set(e,0),n}function pF(e,t,i,n,r,o){for(var a=vF,s=AF,l=0;l<i;){var c=e[s(n,r)&t];r+=15&c;var u=c>>>4;if(u<=15)o[l]=u,l++;else{var h=0,d=0;16==u?(d=3+a(n,r,2),r+=2,h=o[l-1]):17==u?(d=3+a(n,r,3),r+=3):18==u&&(d=11+a(n,r,7),r+=7);for(var p=l+d;l<p;)o[l]=h,l++}}return r}function fF(e,t,i,n){for(var r=0,o=0,a=n.length>>>1;o<i;){var s=e[o+t];n[o<<1]=0,n[1+(o<<1)]=s,s>r&&(r=s),o++}for(;o<a;)n[o<<1]=0,n[1+(o<<1)]=0,o++;return r}function mF(e,t){for(var i,n,r,o,a=e.length,s=bF.bl_count,l=0;l<=t;l++)s[l]=0;for(l=1;l<a;l+=2)s[e[l]]++;var c=bF.next_code;for(i=0,s[0]=0,n=1;n<=t;n++)i=i+s[n-1]<<1,c[n]=i;for(r=0;r<a;r+=2)0!=(o=e[r+1])&&(e[r]=c[o],c[o]++)}function gF(e,t,i){for(var n=e.length,r=bF.rev15,o=0;o<n;o+=2)if(0!=e[o+1])for(var a=o>>1,s=e[o+1],l=a<<4|s,c=t-s,u=e[o]<<c,h=u+(1<<c);u!=h;)i[r[u]>>>15-t]=l,u++}function _F(e,t){for(var i=bF.rev15,n=15-t,r=0;r<e.length;r+=2){var o=e[r]<<t-e[r+1];e[r]=i[o]>>>n}}function vF(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1}function yF(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1}function AF(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}const bF=(xF=Uint16Array,wF=Uint32Array,{next_code:new xF(16),bl_count:new xF(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new xF(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new wF(32),flmap:new xF(512),fltree:[],fdmap:new xF(32),fdtree:[],lmap:new xF(32768),ltree:[],ttree:[],dmap:new xF(32768),dtree:[],imap:new xF(512),itree:[],rev15:new xF(32768),lhst:new wF(286),dhst:new wF(30),ihst:new wF(19),lits:new wF(15e3),strt:new xF(65536),prev:new xF(32768)});var xF,wF;!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,bF.rev15[e]=(t>>>16|t<<16)>>>17}function i(e,t,i){for(;0!=t--;)e.push(0,i)}for(e=0;e<32;e++)bF.ldef[e]=bF.of0[e]<<3|bF.exb[e],bF.ddef[e]=bF.df0[e]<<4|bF.dxb[e];i(bF.fltree,144,8),i(bF.fltree,112,9),i(bF.fltree,24,7),i(bF.fltree,8,8),mF(bF.fltree,9),gF(bF.fltree,9,bF.flmap),_F(bF.fltree,9),i(bF.fdtree,32,5),mF(bF.fdtree,5),gF(bF.fdtree,5,bF.fdmap),_F(bF.fdtree,5),i(bF.itree,19,0),i(bF.ltree,286,0),i(bF.dtree,30,0),i(bF.ttree,320,0)}();const SF={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var i=t,n=0;n<8;n++)1&i?i=3988292384^i>>>1:i>>>=1;e[t]=i}return e}(),update:function(e,t,i,n){for(var r=0;r<n;r++)e=SF.table[255&(e^t[i+r])]^e>>>8;return e},crc:function(e,t,i){return 4294967295^SF.update(4294967295,e,t,i)}};const CF={numWorkers:1,workerURL:"",useWorkers:!1};let EF=0;const TF=[];function MF(e){return new Promise(((t,i)=>{const n=new Worker(e);n.onmessage=e=>{"start"===e.data?(n.onerror=void 0,n.onmessage=void 0,t(n)):i(new Error(`unexpected message: ${e.data}`))},n.onerror=i}))}function IF(e,t,i,n){const r=new Uint8Array(t);(function(e,t){(function(e,t){var i=Uint8Array;if(3==e[0]&&0==e[1])return t||new i(0);var n=yF,r=vF,o=pF,a=AF,s=null==t;s&&(t=new i(e.length>>>2<<3));for(var l,c,u=0,h=0,d=0,p=0,f=0,m=0,g=0,_=0,v=0;0==u;)if(u=n(e,v,1),h=n(e,v+1,2),v+=3,0!=h){if(s&&(t=dF(t,_+(1<<17))),1==h&&(l=bF.flmap,c=bF.fdmap,m=511,g=31),2==h){d=r(e,v,5)+257,p=r(e,v+5,5)+1,f=r(e,v+10,4)+4,v+=14;for(var y=0;y<38;y+=2)bF.itree[y]=0,bF.itree[y+1]=0;var A=1;for(y=0;y<f;y++){var b=r(e,v+3*y,3);bF.itree[1+(bF.ordr[y]<<1)]=b,b>A&&(A=b)}v+=3*f,mF(bF.itree,A),gF(bF.itree,A,bF.imap),l=bF.lmap,c=bF.dmap,v=o(bF.imap,(1<<A)-1,d+p,e,v,bF.ttree);var x=fF(bF.ttree,0,d,bF.ltree);m=(1<<x)-1;var w=fF(bF.ttree,d,p,bF.dtree);g=(1<<w)-1,mF(bF.ltree,x),gF(bF.ltree,x,l),mF(bF.dtree,w),gF(bF.dtree,w,c)}for(;;){var S=l[a(e,v)&m];v+=15&S;var C=S>>>4;if(C>>>8==0)t[_++]=C;else{if(256==C)break;var E=_+C-254;if(C>264){var T=bF.ldef[C-257];E=_+(T>>>3)+r(e,v,7&T),v+=7&T}var M=c[a(e,v)&g];v+=15&M;var I=M>>>4,B=bF.ddef[I],R=(B>>>4)+n(e,v,15&B);for(v+=15&B,s&&(t=dF(t,_+(1<<17)));_<E;)t[_]=t[_++-R],t[_]=t[_++-R],t[_]=t[_++-R],t[_]=t[_++-R];_=E}}}else{7&v&&(v+=8-(7&v));var P=4+(v>>>3),k=e[P-4]|e[P-3]<<8;s&&(t=dF(t,_+k)),t.set(new i(e.buffer,e.byteOffset+P,k),_),v=P+k<<3,_+=k}t.length==_||t.slice(0,_)})(e,t)})(e,r),n(i?new Blob([r],{type:i}):r.buffer)}function BF(e,t,i){return new Promise(((n,r)=>{TF.push({src:e,uncompressedSize:t,type:i,resolve:n,reject:r,id:EF++}),async function(){if(0!==TF.length)for(;TF.length;){const{src:e,uncompressedSize:t,type:i,resolve:n}=TF.shift();let r=e;sF(e)&&(r=await aF(e)),IF(r,t,i,n)}}()}))}!function(){if(cF){const{Worker:i}=(t=e).require?t.require("worker_threads"):{};return{createWorker:async e=>new i(e),addEventListener(e,t){e.on("message",(i=>{t({target:e,data:i})}))},async terminate(e){await e.terminate()}}}return{async createWorker(e){try{return await MF(e)}catch(t){console.warn("could not load worker:",e)}let t;try{const i=await fetch(e,{mode:"cors"});if(!i.ok)throw new Error(`could not load: ${e}`);t=await i.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const n=await MF(e);return CF.workerURL=e,n}catch(t){console.warn("could not load worker via fetch:",e)}if(void 0!==t)try{e=`data:application/javascript;base64,${btoa(t)}`;const i=await MF(e);return CF.workerURL=e,i}catch(e){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}};var t}();class RF{constructor(e,t){var i,n;this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=(i=t.lastModFileDate,n=t.lastModFileTime,new Date(1980+(i>>9&127),(i>>5&15)-1,31&i,n>>11&31,n>>5&63,2*(31&n),0)),this.isDirectory=0===t.uncompressedSize&&t.name.endsWith("/"),this.encrypted=!!(1&t.generalPurposeBitFlag),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";return await async function(e,t,i){const{decompress:n,fileDataStart:r}=await VF(e,t);if(!n){const n=await kF(e,r,t.compressedSize,i);return sF(n)?n:new Blob([lF(n.buffer)?new Uint8Array(n):n],{type:i})}const o=await kF(e,r,t.compressedSize);return await BF(o,t.uncompressedSize,i)}(this._reader,this._rawEntry,e)}async arrayBuffer(){return await async function(e,t){const{decompress:i,fileDataStart:n}=await VF(e,t);if(!i){const i=await PF(e,n,t.compressedSize);return 0===(r=i).byteOffset&&r.byteLength===r.buffer.byteLength?i.buffer:i.slice().buffer}var r;const o=await kF(e,n,t.compressedSize);return await BF(o,t.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return UF(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}async function PF(e,t,i){return await e.read(t,i)}async function kF(e,t,i,n){return e.sliceAsBlob?await e.sliceAsBlob(t,i,n):await e.read(t,i)}const LF=()=>0;function DF(e,t){return e[t]+256*e[t+1]}function NF(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function OF(e,t){return NF(e,t)+4294967296*NF(e,t+4)}const FF=new TextDecoder;function UF(e,t){return lF(e.buffer)&&(e=new Uint8Array(e)),FF.decode(e)}async function zF(e,t,i,n){const r=t-20,o=await PF(e,r,20);if(117853008!==NF(o,0))throw new Error("invalid zip64 end of central directory locator signature");const a=OF(o,8),s=await PF(e,a,56);if(101075792!==NF(s,0))throw new Error("invalid zip64 end of central directory record signature");const l=OF(s,32),c=OF(s,40);return GF(e,OF(s,48),c,l,i,n)}const HF=33639248;async function GF(e,t,i,n,r,o){let a=0;const s=await PF(e,t,i),l=[];for(let c=0;c<n;++c){const e=s.subarray(a,a+46),t=NF(e,0);if(t!==HF)throw new Error(`invalid central directory file header signature: 0x${t.toString(16)}`);const i={versionMadeBy:DF(e,4),versionNeededToExtract:DF(e,6),generalPurposeBitFlag:DF(e,8),compressionMethod:DF(e,10),lastModFileTime:DF(e,12),lastModFileDate:DF(e,14),crc32:NF(e,16),compressedSize:NF(e,20),uncompressedSize:NF(e,24),fileNameLength:DF(e,28),extraFieldLength:DF(e,30),fileCommentLength:DF(e,32),internalFileAttributes:DF(e,36),externalFileAttributes:NF(e,38),relativeOffsetOfLocalHeader:NF(e,42)};if(64&i.generalPurposeBitFlag)throw new Error("strong encryption is not supported");a+=46;const n=s.subarray(a,a+i.fileNameLength+i.extraFieldLength+i.fileCommentLength);i.nameBytes=n.slice(0,i.fileNameLength),i.name=UF(i.nameBytes);const r=i.fileNameLength+i.extraFieldLength,o=n.slice(i.fileNameLength,r);i.extraFields=[];let c=0;for(;c<o.length-3;){const e=DF(o,c+0),t=c+4,n=t+DF(o,c+2);if(n>o.length)throw new Error("extra field length exceeds extra field buffer size");i.extraFields.push({id:e,data:o.slice(t,n)}),c=n}if(i.commentBytes=n.slice(r,r+i.fileCommentLength),i.comment=UF(i.commentBytes),a+=n.length,4294967295===i.uncompressedSize||4294967295===i.compressedSize||4294967295===i.relativeOffsetOfLocalHeader){const e=i.extraFields.find((e=>1===e.id));if(!e)throw new Error("expected zip64 extended information extra field");const t=e.data;let n=0;if(4294967295===i.uncompressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include uncompressed size");i.uncompressedSize=OF(t,n),n+=8}if(4294967295===i.compressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include compressed size");i.compressedSize=OF(t,n),n+=8}if(4294967295===i.relativeOffsetOfLocalHeader){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include relative header offset");i.relativeOffsetOfLocalHeader=OF(t,n),n+=8}}const u=i.extraFields.find((e=>28789===e.id&&e.data.length>=6&&1===e.data[0]&&NF(e.data,1)),LF(i.nameBytes));if(u&&(i.fileName=UF(u.data.slice(5))),0===i.compressionMethod){let e=i.uncompressedSize;if(1&i.generalPurposeBitFlag&&(e+=12),i.compressedSize!==e)throw new Error(`compressed size mismatch for stored file: ${i.compressedSize} != ${e}`)}l.push(i)}return{zip:{comment:r,commentBytes:o},entries:l.map((t=>new RF(e,t)))}}async function VF(e,t){if(1&t.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const i=await PF(e,t.relativeOffsetOfLocalHeader,30),n=await e.getLength(),r=NF(i,0);if(67324752!==r)throw new Error(`invalid local file header signature: 0x${r.toString(16)}`);const o=DF(i,26),a=DF(i,28),s=t.relativeOffsetOfLocalHeader+i.length+o+a;let l;if(0===t.compressionMethod)l=!1;else{if(8!==t.compressionMethod)throw new Error(`unsupported compression method: ${t.compressionMethod}`);l=!0}const c=s,u=c+t.compressedSize;if(0!==t.compressedSize&&u>n)throw new Error(`file data overflows file bounds: ${c} +  ${t.compressedSize}  > ${n}`);return{decompress:l,fileDataStart:c}}var QF=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jF=(function(e){var t=Object.create(null)}((function(e){return QF.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),"-ms-"),qF="-moz-",WF="-webkit-",$F="comm",XF="rule",YF="decl",KF="@keyframes",ZF=Math.abs,JF=String.fromCharCode,eU=Object.assign;function tU(e){return e.trim()}function iU(e,t){return(e=t.exec(e))?e[0]:e}function nU(e,t,i){return e.replace(t,i)}function rU(e,t,i){return e.indexOf(t,i)}function oU(e,t){return 0|e.charCodeAt(t)}function aU(e,t,i){return e.slice(t,i)}function sU(e){return e.length}function lU(e){return e.length}function cU(e,t){return t.push(e),e}function uU(e,t){return e.filter((function(e){return!iU(e,t)}))}var hU=1,dU=1,pU=0,fU=0,mU=0,gU="";function _U(e,t,i,n,r,o,a,s){return{value:e,root:t,parent:i,type:n,props:r,children:o,line:hU,column:dU,length:a,return:"",siblings:s}}function vU(e,t){return eU(_U("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function yU(e){for(;e.root;)e=vU(e.root,{children:[e]});cU(e,e.siblings)}function AU(){return mU=fU<pU?oU(gU,fU++):0,dU++,10===mU&&(dU=1,hU++),mU}function bU(){return oU(gU,fU)}function xU(){return fU}function wU(e,t){return aU(gU,e,t)}function SU(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CU(e){return tU(wU(fU-1,MU(91===e?e+2:40===e?e+1:e)))}function EU(e){for(;(mU=bU())&&mU<33;)AU();return SU(e)>2||SU(mU)>3?"":" "}function TU(e,t){for(;--t&&AU()&&!(mU<48||mU>102||mU>57&&mU<65||mU>70&&mU<97););return wU(e,xU()+(t<6&&32==bU()&&32==AU()))}function MU(e){for(;AU();)switch(mU){case e:return fU;case 34:case 39:34!==e&&39!==e&&MU(mU);break;case 40:41===e&&MU(e);break;case 92:AU()}return fU}function IU(e,t){for(;AU()&&e+mU!==57&&(e+mU!==84||47!==bU()););return"/*"+wU(t,fU-1)+"*"+JF(47===e?e:AU())}function BU(e){for(;!SU(bU());)AU();return wU(e,fU)}function RU(e){return function(e){return gU="",e}(PU("",null,null,null,[""],e=function(e){return hU=dU=1,pU=sU(gU=e),fU=0,[]}(e),0,[0],e))}function PU(e,t,i,n,r,o,a,s,l){for(var c=0,u=0,h=a,d=0,p=0,f=0,m=1,g=1,_=1,v=0,y="",A=r,b=o,x=n,w=y;g;)switch(f=v,v=AU()){case 40:if(108!=f&&58==oU(w,h-1)){-1!=rU(w+=nU(CU(v),"&","&\f"),"&\f",ZF(c?s[c-1]:0))&&(_=-1);break}case 34:case 39:case 91:w+=CU(v);break;case 9:case 10:case 13:case 32:w+=EU(f);break;case 92:w+=TU(xU()-1,7);continue;case 47:switch(bU()){case 42:case 47:cU(LU(IU(AU(),xU()),t,i,l),l);break;default:w+="/"}break;case 123*m:s[c++]=sU(w)*_;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==_&&(w=nU(w,/\f/g,"")),p>0&&sU(w)-h&&cU(p>32?DU(w+";",n,i,h-1,l):DU(nU(w," ","")+";",n,i,h-2,l),l);break;case 59:w+=";";default:if(cU(x=kU(w,t,i,c,u,r,s,y,A=[],b=[],h,o),o),123===v)if(0===u)PU(w,t,x,x,A,o,h,s,b);else switch(99===d&&110===oU(w,3)?100:d){case 100:case 108:case 109:case 115:PU(e,x,x,n&&cU(kU(e,x,x,0,0,r,s,y,r,A=[],h,b),b),r,b,h,s,n?A:b);break;default:PU(w,x,x,x,[""],b,0,s,b)}}c=u=p=0,m=_=1,y=w="",h=a;break;case 58:h=1+sU(w),p=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==(mU=fU>0?oU(gU,--fU):0,dU--,10===mU&&(dU=1,hU--),mU))continue;switch(w+=JF(v),v*m){case 38:_=u>0?1:(w+="\f",-1);break;case 44:s[c++]=(sU(w)-1)*_,_=1;break;case 64:45===bU()&&(w+=CU(AU())),d=bU(),u=h=sU(y=w+=BU(xU())),v++;break;case 45:45===f&&2==sU(w)&&(m=0)}}return o}function kU(e,t,i,n,r,o,a,s,l,c,u,h){for(var d=r-1,p=0===r?o:[""],f=lU(p),m=0,g=0,_=0;m<n;++m)for(var v=0,y=aU(e,d+1,d=ZF(g=a[m])),A=e;v<f;++v)(A=tU(g>0?p[v]+" "+y:nU(y,/&\f/g,p[v])))&&(l[_++]=A);return _U(e,t,i,0===r?XF:s,l,c,u,h)}function LU(e,t,i,n){return _U(e,t,i,$F,JF(mU),aU(e,2,-2),0,n)}function DU(e,t,i,n,r){return _U(e,t,i,YF,aU(e,0,n),aU(e,n+1,-1),n,r)}function NU(e,t,i){switch(function(e,t){return 45^oU(e,0)?(((t<<2^oU(e,0))<<2^oU(e,1))<<2^oU(e,2))<<2^oU(e,3):0}(e,t)){case 5103:return WF+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WF+e+e;case 4789:return qF+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WF+e+qF+e+jF+e+e;case 5936:switch(oU(e,t+11)){case 114:return WF+e+jF+nU(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WF+e+jF+nU(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WF+e+jF+nU(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return WF+e+jF+e+e;case 6165:return WF+e+jF+"flex-"+e+e;case 5187:return WF+e+nU(e,/(\w+).+(:[^]+)/,WF+"box-$1$2"+jF+"flex-$1$2")+e;case 5443:return WF+e+jF+"flex-item-"+nU(e,/flex-|-self/g,"")+(iU(e,/flex-|baseline/)?"":jF+"grid-row-"+nU(e,/flex-|-self/g,""))+e;case 4675:return WF+e+jF+"flex-line-pack"+nU(e,/align-content|flex-|-self/g,"")+e;case 5548:return WF+e+jF+nU(e,"shrink","negative")+e;case 5292:return WF+e+jF+nU(e,"basis","preferred-size")+e;case 6060:return WF+"box-"+nU(e,"-grow","")+WF+e+jF+nU(e,"grow","positive")+e;case 4554:return WF+nU(e,/([^-])(transform)/g,"$1"+WF+"$2")+e;case 6187:return nU(nU(nU(e,/(zoom-|grab)/,WF+"$1"),/(image-set)/,WF+"$1"),e,"")+e;case 5495:case 3959:return nU(e,/(image-set\([^]*)/,WF+"$1$`$1");case 4968:return nU(nU(e,/(.+:)(flex-)?(.*)/,WF+"box-pack:$3"+jF+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WF+e+e;case 4200:if(!iU(e,/flex-|baseline/))return jF+"grid-column-align"+aU(e,t)+e;break;case 2592:case 3360:return jF+nU(e,"template-","")+e;case 4384:case 3616:return i&&i.some((function(e,i){return t=i,iU(e.props,/grid-\w+-end/)}))?~rU(e+(i=i[t].value),"span",0)?e:jF+nU(e,"-start","")+e+jF+"grid-row-span:"+(~rU(i,"span",0)?iU(i,/\d+/):+iU(i,/\d+/)-+iU(e,/\d+/))+";":jF+nU(e,"-start","")+e;case 4896:case 4128:return i&&i.some((function(e){return iU(e.props,/grid-\w+-start/)}))?e:jF+nU(nU(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return nU(e,/(.+)-inline(.+)/,WF+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(sU(e)-1-t>6)switch(oU(e,t+1)){case 109:if(45!==oU(e,t+4))break;case 102:return nU(e,/(.+:)(.+)-([^]+)/,"$1"+WF+"$2-$3$1"+qF+(108==oU(e,t+3)?"$3":"$2-$3"))+e;case 115:return~rU(e,"stretch",0)?NU(nU(e,"stretch","fill-available"),t,i)+e:e}break;case 5152:case 5920:return nU(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,i,n,r,o,a,s){return jF+i+":"+n+s+(r?jF+i+"-span:"+(o?a:+a-+n)+s:"")+e}));case 4949:if(121===oU(e,t+6))return nU(e,":",":"+WF)+e;break;case 6444:switch(oU(e,45===oU(e,14)?18:11)){case 120:return nU(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WF+(45===oU(e,14)?"inline-":"")+"box$3$1"+WF+"$2$3$1"+jF+"$2box$3")+e;case 100:return nU(e,":",":"+jF)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nU(e,"scroll-","scroll-snap-")+e}return e}function OU(e,t){for(var i="",n=0;n<e.length;n++)i+=t(e[n],n,e,t)||"";return i}function FU(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case YF:return e.return=e.return||e.value;case $F:return"";case KF:return e.return=e.value+"{"+OU(e.children,n)+"}";case XF:if(!sU(e.value=e.props.join(",")))return""}return sU(i=OU(e.children,n))?e.return=e.value+"{"+i+"}":""}function UU(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case YF:return void(e.return=NU(e.value,e.length,i));case KF:return OU([vU(e,{value:nU(e.value,"@","@"+WF)})],n);case XF:if(e.length)return function(e,t){return e.map(t).join("")}(i=e.props,(function(t){switch(iU(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":yU(vU(e,{props:[nU(t,/:(read-\w+)/,":-moz-$1")]})),yU(vU(e,{props:[t]})),eU(e,{props:uU(i,n)});break;case"::placeholder":yU(vU(e,{props:[nU(t,/:(plac\w+)/,":"+WF+"input-$1")]})),yU(vU(e,{props:[nU(t,/:(plac\w+)/,":-moz-$1")]})),yU(vU(e,{props:[nU(t,/:(plac\w+)/,jF+"input-$1")]})),yU(vU(e,{props:[t]})),eU(e,{props:uU(i,n)})}return""}))}}var zU={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},HU="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",GU="active",VU="data-styled-version",QU="6.1.13",jU="/*!sc*/\n",qU="undefined"!=typeof window&&"HTMLElement"in window,WU=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),$U=(new Set,Object.freeze([])),XU=Object.freeze({}),YU=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),KU=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ZU=/(^-|-$)/g;function JU(e){return e.replace(KU,"-").replace(ZU,"")}var ez=/(a)(d)/gi,tz=function(e){return String.fromCharCode(e+(e>25?39:97))};function iz(e){var t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=tz(t%52)+i;return(tz(t%52)+i).replace(ez,"$1-$2")}var nz,rz=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},oz=function(e){return rz(5381,e)};function az(e){return"string"==typeof e&&!0}var sz="function"==typeof Symbol&&Symbol.for,lz=sz?Symbol.for("react.memo"):60115,cz=sz?Symbol.for("react.forward_ref"):60112,uz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dz={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pz=((nz={})[cz]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nz[lz]=dz,nz);function fz(e){return("type"in(t=e)&&t.type.$$typeof)===lz?dz:"$$typeof"in e?pz[e.$$typeof]:uz;var t}var mz=Object.defineProperty,gz=Object.getOwnPropertyNames,_z=Object.getOwnPropertySymbols,vz=Object.getOwnPropertyDescriptor,yz=Object.getPrototypeOf,Az=Object.prototype;function bz(e,t,i){if("string"!=typeof t){if(Az){var n=yz(t);n&&n!==Az&&bz(e,n,i)}var r=gz(t);_z&&(r=r.concat(_z(t)));for(var o=fz(e),a=fz(t),s=0;s<r.length;++s){var l=r[s];if(!(l in hz||i&&i[l]||a&&l in a||o&&l in o)){var c=vz(t,l);try{mz(e,l,c)}catch(e){}}}}return e}function xz(e){return"function"==typeof e}function wz(e){return"object"==typeof e&&"styledComponentId"in e}function Sz(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Cz(e,t){if(0===e.length)return"";for(var i=e[0],n=1;n<e.length;n++)i+=e[n];return i}function Ez(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Tz(e,t,i){if(void 0===i&&(i=!1),!i&&!Ez(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=Tz(e[n],t[n]);else if(Ez(t))for(var n in t)e[n]=Tz(e[n],t[n]);return e}function Mz(e,t){Object.defineProperty(e,"toString",{value:t})}function Iz(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Bz=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,r=n;e>=r;)if((r<<=1)<0)throw Iz(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(i),this.length=r;for(var o=n;o<r;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),n=i+t;this.groupSizes[e]=0;for(var r=i;r<n;r++)this.tag.deleteRule(i)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var i=this.groupSizes[e],n=this.indexOfGroup(e),r=n+i,o=n;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(jU);return t},e}(),Rz=new Map,Pz=new Map,kz=1,Lz=function(e){if(Rz.has(e))return Rz.get(e);for(;Pz.has(kz);)kz++;var t=kz++;return Rz.set(e,t),Pz.set(t,e),t},Dz=function(e,t){kz=t+1,Rz.set(e,t),Pz.set(t,e)},Nz="style[".concat(HU,"][").concat(VU,'="').concat(QU,'"]'),Oz=new RegExp("^".concat(HU,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Fz=function(e,t,i){for(var n,r=i.split(","),o=0,a=r.length;o<a;o++)(n=r[o])&&e.registerName(t,n)},Uz=function(e,t){for(var i,n=(null!==(i=t.textContent)&&void 0!==i?i:"").split(jU),r=[],o=0,a=n.length;o<a;o++){var s=n[o].trim();if(s){var l=s.match(Oz);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Dz(u,c),Fz(e,u,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(s)}}},zz=function(e){for(var t=document.querySelectorAll(Nz),i=0,n=t.length;i<n;i++){var r=t[i];r&&r.getAttribute(HU)!==GU&&(Uz(e,r),r.parentNode&&r.parentNode.removeChild(r))}},Hz=function(e){var t=document.head,n=e||t,r=document.createElement("style"),o=function(e){var t=Array.from(e.querySelectorAll("style[".concat(HU,"]")));return t[t.length-1]}(n),a=void 0!==o?o.nextSibling:null;r.setAttribute(HU,GU),r.setAttribute(VU,QU);var s=i.nc;return s&&r.setAttribute("nonce",s),n.insertBefore(r,a),r},Gz=function(){function e(e){this.element=Hz(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,i=0,n=t.length;i<n;i++){var r=t[i];if(r.ownerNode===e)return r}throw Iz(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Vz=function(){function e(e){this.element=Hz(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Qz=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),jz=qU,qz={isServer:!qU,useCSSOMInjection:!WU},Wz=function(){function e(e,t,i){void 0===e&&(e=XU),void 0===t&&(t={});var n=this;this.options=s(s({},qz),e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&qU&&jz&&(jz=!1,zz(this)),Mz(this,(function(){return function(e){for(var t=e.getTag(),i=t.length,n="",r=function(i){var r=function(e){return Pz.get(e)}(i);if(void 0===r)return"continue";var o=e.names.get(r),a=t.getGroup(i);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(HU,".g").concat(i,'[id="').concat(r,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),n+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(jU)},o=0;o<i;o++)r(o);return n}(n)}))}return e.registerId=function(e){return Lz(e)},e.prototype.rehydrate=function(){!this.server&&qU&&zz(this)},e.prototype.reconstructWithOptions=function(t,i){return void 0===i&&(i=!0),new e(s(s({},this.options),t),this.gs,i&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,i=e.target;return e.isServer?new Qz(i):t?new Gz(i):new Vz(i)}(this.options),new Bz(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Lz(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},e.prototype.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(Lz(e),i)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Lz(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),$z=/&/g,Xz=/^\s*\/\/.*$/gm;function Yz(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Yz(e.children,t)),e}))}var Kz=new Wz,Zz=function(){var e,t,i,n=XU,r=n.options,o=void 0===r?XU:r,a=n.plugins,s=void 0===a?$U:a,l=function(i,n,r){return r.startsWith(t)&&r.endsWith(t)&&r.replaceAll(t,"").length>0?".".concat(e):i},c=s.slice();c.push((function(e){e.type===XF&&e.value.includes("&")&&(e.props[0]=e.props[0].replace($z,t).replace(i,l))})),o.prefix&&c.push(UU),c.push(FU);var u=function(n,r,a,s){void 0===r&&(r=""),void 0===a&&(a=""),void 0===s&&(s="&"),e=s,t=r,i=new RegExp("\\".concat(t,"\\b"),"g");var l=n.replace(Xz,""),u=RU(a||r?"".concat(a," ").concat(r," { ").concat(l," }"):l);o.namespace&&(u=Yz(u,o.namespace));var h,d=[];return OU(u,function(e){var t=lU(e);return function(i,n,r,o){for(var a="",s=0;s<t;s++)a+=e[s](i,n,r,o)||"";return a}}(c.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return u.hash=s.length?s.reduce((function(e,t){return t.name||Iz(15),rz(e,t.name)}),5381).toString():"",u}(),Jz=n.createContext({shouldForwardProp:void 0,styleSheet:Kz,stylis:Zz});function eH(){return(0,n.useContext)(Jz)}Jz.Consumer,n.createContext(void 0);var tH=function(){function e(e,t){var i=this;this.inject=function(e,t){void 0===t&&(t=Zz);var n=i.name+t.hash;e.hasNameForId(i.id,n)||e.insertRules(i.id,n,t(i.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Mz(this,(function(){throw Iz(12,String(i.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Zz),this.name+e.hash},e}(),iH=function(e){return e>="A"&&e<="Z"};function nH(e){for(var t="",i=0;i<e.length;i++){var n=e[i];if(1===i&&"-"===n&&"-"===e[0])return e;iH(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var rH=function(e){return null==e||!1===e||""===e},oH=function(e){var t,i,n=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!rH(o)&&(Array.isArray(o)&&o.isCss||xz(o)?n.push("".concat(nH(r),":"),o,";"):Ez(o)?n.push.apply(n,u(u(["".concat(r," {")],oH(o),!1),["}"],!1)):n.push("".concat(nH(r),": ").concat((t=r,null==(i=o)||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||t in zU||t.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return n};function aH(e,t,i,n){return rH(e)?[]:wz(e)?[".".concat(e.styledComponentId)]:xz(e)?!xz(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:aH(e(t),t,i,n):e instanceof tH?i?(e.inject(i,n),[e.getName(n)]):[e]:Ez(e)?oH(e):Array.isArray(e)?Array.prototype.concat.apply($U,e.map((function(e){return aH(e,t,i,n)}))):[e.toString()];var r}var sH=oz(QU),lH=function(){function e(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&function(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(xz(i)&&!wz(i))return!1}return!0}(e),this.componentId=t,this.baseHash=rz(sH,t),this.baseStyle=i,Wz.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,i){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=Sz(n,this.staticRulesId);else{var r=Cz(aH(this.rules,e,t,i)),o=iz(rz(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=i(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}n=Sz(n,o),this.staticRulesId=o}else{for(var s=rz(this.baseHash,i.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=Cz(aH(u,e,t,i));s=rz(s,h+c),l+=h}}if(l){var d=iz(s>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,i(l,".".concat(d),void 0,this.componentId)),n=Sz(n,d)}}return n},e}(),cH=n.createContext(void 0);cH.Consumer;var uH={};new Set;function hH(e,t,i){var r=wz(e),o=e,a=!az(e),l=t.attrs,c=void 0===l?$U:l,u=t.componentId,h=void 0===u?function(e,t){var i="string"!=typeof e?"sc":JU(e);uH[i]=(uH[i]||0)+1;var n="".concat(i,"-").concat(function(e){return iz(oz(e)>>>0)}(QU+i+uH[i]));return t?"".concat(t,"-").concat(n):n}(t.displayName,t.parentComponentId):u,d=t.displayName,p=void 0===d?function(e){return az(e)?"styled.".concat(e):"Styled(".concat(function(e){return e.displayName||e.name||"Component"}(e),")")}(e):d,f=t.displayName&&t.componentId?"".concat(JU(t.displayName),"-").concat(t.componentId):t.componentId||h,m=r&&o.attrs?o.attrs.concat(c).filter(Boolean):c,g=t.shouldForwardProp;if(r&&o.shouldForwardProp){var _=o.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;g=function(e,t){return _(e,t)&&v(e,t)}}else g=_}var y=new lH(i,f,r?o.componentStyle:void 0);function A(e,t){return function(e,t,i){var r=e.attrs,o=e.componentStyle,a=e.defaultProps,l=e.foldedComponentIds,c=e.styledComponentId,u=e.target,h=n.useContext(cH),d=eH(),p=e.shouldForwardProp||d.shouldForwardProp,f=function(e,t,i){return void 0===i&&(i=XU),e.theme!==i.theme&&e.theme||t||i.theme}(t,h,a)||XU,m=function(e,t,i){for(var n,r=s(s({},t),{className:void 0,theme:i}),o=0;o<e.length;o+=1){var a=xz(n=e[o])?n(r):n;for(var l in a)r[l]="className"===l?Sz(r[l],a[l]):"style"===l?s(s({},r[l]),a[l]):a[l]}return t.className&&(r.className=Sz(r.className,t.className)),r}(r,t,f),g=m.as||u,_={};for(var v in m)void 0===m[v]||"$"===v[0]||"as"===v||"theme"===v&&m.theme===f||("forwardedAs"===v?_.as=m.forwardedAs:p&&!p(v,g)||(_[v]=m[v]));var y=function(e,t){var i=eH();return e.generateAndInjectStyles(t,i.styleSheet,i.stylis)}(o,m),A=Sz(l,c);return y&&(A+=" "+y),m.className&&(A+=" "+m.className),_[az(g)&&!YU.has(g)?"class":"className"]=A,_.ref=i,(0,n.createElement)(g,_)}(b,e,t)}A.displayName=p;var b=n.forwardRef(A);return b.attrs=m,b.componentStyle=y,b.displayName=p,b.shouldForwardProp=g,b.foldedComponentIds=r?Sz(o.foldedComponentIds,o.styledComponentId):"",b.styledComponentId=f,b.target=r?o.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0,r=t;n<r.length;n++)Tz(e,r[n],!0);return e}({},o.defaultProps,e):e}}),Mz(b,(function(){return".".concat(b.styledComponentId)})),a&&bz(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function dH(e,t){for(var i=[e[0]],n=0,r=t.length;n<r;n+=1)i.push(t[n],e[n+1]);return i}var pH=function(e){return Object.assign(e,{isCss:!0})};function fH(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(xz(e)||Ez(e))return pH(aH(dH($U,u([e],t,!0))));var n=e;return 0===t.length&&1===n.length&&"string"==typeof n[0]?aH(n):pH(aH(dH(n,t)))}function mH(e,t,i){if(void 0===i&&(i=XU),!t)throw Iz(1,t);var n=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,i,fH.apply(void 0,u([n],r,!1)))};return n.attrs=function(n){return mH(e,t,s(s({},i),{attrs:Array.prototype.concat(i.attrs,n).filter(Boolean)}))},n.withConfig=function(n){return mH(e,t,s(s({},i),n))},n}var gH=function(e){return mH(hH,e)},_H=gH;YU.forEach((function(e){_H[e]=gH(e)}));"__sc-".concat(HU,"__");var vH,yH,AH=_H.div(vH||(vH=h(["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #f1f1f1;\n  color: #333;\n\n  @media (prefers-color-scheme: dark) {\n    background-color: #333;\n    color: #fff;\n  }\n"],["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #f1f1f1;\n  color: #333;\n\n  @media (prefers-color-scheme: dark) {\n    background-color: #333;\n    color: #fff;\n  }\n"]))),bH=_H.div(yH||(yH=h(["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  width: 100%;\n  padding: 1em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"],["\n  text-align: center;\n  position: relative;\n  margin: auto;\n  width: 100%;\n  padding: 1em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"])));function xH(e){return l(this,void 0,void 0,(function(){var t,i,n;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),i=(t=URL).createObjectURL,[4,e.blob()];case 1:return[2,i.apply(t,[r.sent()])];case 2:throw n=r.sent(),console.error("Error reading entry: ".concat(n),n),n;case 3:return[2]}}))}))}var wH,SH=(e=>{let{react:t,tagName:i,elementClass:n,events:r,displayName:o}=e;const a=new Set(Object.keys(r??{})),s=t.forwardRef(((e,o)=>{const s=t.useRef(new Map),l=t.useRef(null),c={},u={};for(const[t,i]of Object.entries(e))d.has(t)?c["className"===t?"class":t]=i:a.has(t)||t in n.prototype?u[t]=i:c[t]=i;return t.useLayoutEffect((()=>{if(null===l.current)return;const t=new Map;for(const i in u)f(l.current,i,e[i],s.current.get(i),r),s.current.delete(i),t.set(i,e[i]);for(const[e,i]of s.current)f(l.current,e,void 0,i,r);s.current=t})),t.useLayoutEffect((()=>{l.current?.removeAttribute("defer-hydration")}),[]),c.suppressHydrationWarning=!0,t.createElement(i,{...c,ref:t.useCallback((e=>{l.current=e,"function"==typeof o?o(e):null!==o&&(o.current=e)}),[o])})}));return s.displayName=o??n.name,s})({tagName:"photogrammetry-viewer",elementClass:XO,react:n}),CH=function(){function e(e,t){this.entries=e,this.skyBoxImage=t}return e.prototype.resolve2dFileURL=function(e){var t=null,i=Object.keys(this.entries)[0];if(e in this.entries)t=this.entries[e];else{for(var n=[".jpg",".png",".jpeg",".JPG",".PNG",".JPEG",".gif",".GIF"],r=0,o=["redof/","edof/",i+"redof/",i+"edof/"];r<o.length;r++)for(var a=o[r],s=0,l=n;s<l.length;s++){var c=a+e+l[s];if(c in this.entries){t=this.entries[c];break}}if(null==t)for(var u=0,h=Object.entries(this.entries);u<h.length;u++){var d=h[u],p=d[0],f=d[1];if(p.includes(e)){t=f;break}}}if(null!=t)return xH(t);throw new Error("File not found in Zip: ".concat(e))},e}(),EH=function(e){var t=(0,n.useState)(!1),i=t[0],r=t[1],o=(0,n.useState)("Downloading..."),a=o[0],s=o[1],u=(0,n.useState)(null),h=u[0],d=u[1],p=(0,n.useState)(""),f=p[0],m=p[1],g=(0,n.useState)(""),_=g[0],v=g[1],y=(0,n.useState)(void 0),A=y[0],b=y[1];function x(e,t){console.error("Error "+t+":",e),d(function(e,t,i){if(void 0===i&&(i=null),e.length<=1e3)return e;var n=1e3-(i=i||"...").length,r=Math.ceil(n/2),o=Math.floor(n/2);return e.substr(0,r)+i+e.substr(e.length-o)}(e.message,0,"..."))}return(0,n.useEffect)((function(){i||function(){l(this,void 0,void 0,(function(){var t=this;return c(this,(function(i){return fetch(e.src).then(function(e){let{defaultSize:t=0,emitDelay:i=10,onProgress:n=()=>null,onComplete:r=()=>null,onError:o=()=>null}=e;return function(e){if("undefined"==typeof Response||"undefined"==typeof ReadableStream)return e;const{body:a,headers:s,status:l}=e,c=s.get("content-length")||t,u=new JO(c,i),h=a.getReader(),d=new ReadableStream({start(e){!function t(){h.read().then((i=>{let{done:o,value:a}=i;if(o)return r({}),void e.close();a&&u.flow(a,n),e.enqueue(a),t()})).catch((e=>{o(e)}))}()}});return new Response(d,{headers:s,status:l})}}({onProgress:function(e){s("Downloading... ".concat(Math.floor(e.percentage),"%"))}})).then((function(e){return e.blob()})).then((function(e){s("Decompressing..."),async function(e){const{zip:t,entries:i}=await async function(e){let t;if("undefined"!=typeof Blob&&e instanceof Blob)t=new hF(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new uF(e);else if(lF(e)||lF(e.buffer))t=new uF(e);else if("string"==typeof e){const i=await fetch(e);if(!i.ok)throw new Error(`failed http request ${e}, status: ${i.status}: ${i.statusText}`);const n=await i.blob();t=new hF(n)}else{if("function"!=typeof e.getLength||"function"!=typeof e.read)throw new Error("unsupported source type");t=e}const i=await t.getLength();if(i>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${i}. Only file sizes up 4503599627370496 bytes are supported`);return await async function(e,t){const i=Math.min(65557,t),n=t-i,r=await PF(e,n,i);for(let o=i-22;o>=0;--o){if(101010256!==NF(r,o))continue;const t=new Uint8Array(r.buffer,r.byteOffset+o,r.byteLength-o),i=DF(t,4);if(0!==i)throw new Error(`multi-volume zip files are not supported. This is volume: ${i}`);const a=DF(t,10),s=NF(t,12),l=NF(t,16),c=DF(t,20),u=t.length-22;if(c!==u)throw new Error(`invalid comment length. expected: ${u}, actual: ${c}`);const h=new Uint8Array(t.buffer,t.byteOffset+22,c),d=UF(h);return 65535===a||4294967295===l?await zF(e,n+o,d,h):await GF(e,l,s,a,d,h)}throw new Error("could not find end of central directory. maybe not zip file")}(t,i)}(e);return{zip:t,entries:Object.fromEntries(i.map((e=>[e.name,e])))}}(e).then((function(e){return l(t,[e],void 0,(function(e){var t,i,n,o,a,l,u,h,p,f,g,_,y,A=e.entries;return c(this,(function(e){switch(e.label){case 0:s("Parsing files..."),t=!1,i=!1,console.log("Entries:",Object.keys(A)),n=null,o=0,a=Object.entries(A),e.label=1;case 1:if(!(o<a.length))return[3,13];if(l=a[o],u=l[0],h=l[1],!u.endsWith(".xml")||t)return[3,6];s("Loading camera info..."),e.label=2;case 2:return e.trys.push([2,4,,5]),p=m,[4,xH(h)];case 3:return p.apply(void 0,[e.sent()]),[3,5];case 4:return x(e.sent(),"converting XML to base64"),[3,5];case 5:t=!0,e.label=6;case 6:if(!u.endsWith(".gltf")&&!u.endsWith(".glb")||i)return[3,11];s("Loading 3D image..."),e.label=7;case 7:return e.trys.push([7,9,,10]),f=v,[4,xH(h)];case 8:return f.apply(void 0,[e.sent()]),[3,10];case 9:return x(e.sent(),"converting gltf to base64"),[3,10];case 10:i=!0,e.label=11;case 11:if(i&&t)return[3,13];e.label=12;case 12:return o++,[3,1];case 13:s("Looking for HDR image..."),g=0,_=["hdr.jpg","hdr.jpeg","hdr.png","HDR.jpg","HDR.jpeg","HDR.png"],e.label=14;case 14:if(!(g<_.length))return[3,19];if(!((y=_[g])in A))return[3,18];s("Loading HDR image..."),e.label=15;case 15:return e.trys.push([15,17,,18]),[4,xH(A[y])];case 16:return n=e.sent(),[3,18];case 17:return x(e.sent(),"converting HDR to base64"),[3,18];case 18:return g++,[3,14];case 19:return i&&t?(b(new CH(A,n)),s("Loaded."),r(!0)):(d("Did not find required files in the package."),console.log(i,t)),[2]}}))}))})).catch((function(e){x(e,"decompressing zip file")}))})).catch((function(e){x(e,"loading file")})),[2]}))}))}()}),[e.src]),null!=h?n.createElement(AH,null,"Error: ",h):i?n.createElement(AH,null,n.createElement(SH,{src2D:"/",src3D:_,srcScanInformation:f,viewSettings:A})):n.createElement(AH,null,n.createElement(bH,null,n.createElement(rF,{color:"#32cd32"}),a))},TH=_H.div(wH||(wH=h(["\n  padding: 0;\n  width: 100%;\n  height: 100%;\n"],["\n  padding: 0;\n  width: 100%;\n  height: 100%;\n"]))),MH=function(e){if(!e.src)return n.createElement(TH,null,"No 3D file specified.");console.log("Loading 3D model from ".concat(e.src));var t=(e.fileName||e.src.split("/").pop()||"").split(".").pop();switch(e.src.startsWith("data:")&&!e.fileName&&(t=e.src.split(";")[0].split("/")[1]),t.toLowerCase()){case"gltf":case"glb":case"x-gltf-bin":return n.createElement(TH,null,n.createElement(a.GltfModel,{src:e.src}));case"obj":case"x-obj-bin":return n.createElement(TH,null,n.createElement(a.OBJModel,{src:e.src,texPath:""}));case"dae":return n.createElement(TH,null,n.createElement(a.DAEModel,{src:e.src},n.createElement(a.DirectionLight,{color:14540253})));case"p3v":case"zip":return n.createElement(TH,null,n.createElement(EH,{src:e.src}))}return n.createElement(TH,null,'SpecimenViewer3D Component. Source with type "',t,'" is not supported.')}},730:(e,t,i)=>{"use strict";var n=i(43),r=i(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,i,n,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,i,n){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var N,O=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=n.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?F(e):""}function H(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case x:return"Portal";case C:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case B:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return G(e(t))}catch(i){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=j(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var i=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Y(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=Q(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){K(e,t);var i=Q(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&$(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Q(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(te(i)){if(1<i.length)throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:Q(i)}}function oe(e,t){var i=Q(t.value),n=Q(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=me(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var _e=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,we=null,Se=null;function Ce(e){if(e=yr(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=br(t),xe(e.stateNode,e.type,t))}}function Ee(e){we?Se?Se.push(e):Se=[e]:we=e}function Te(){if(we){var e=we,t=Se;if(Se=we=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Me(e,t){return e(t)}function Ie(){}var Be=!1;function Re(e,t,i){if(Be)return e(t,i);Be=!0;try{return Me(e,t,i)}finally{Be=!1,(null!==we||null!==Se)&&(Ie(),Te())}}function Pe(e,t){var i=e.stateNode;if(null===i)return null;var n=br(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var ke=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ke=!1}function De(e,t,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(u){this.onError(u)}}var Ne=!1,Oe=null,Fe=!1,Ue=null,ze={onError:function(e){Ne=!0,Oe=e}};function He(e,t,i,n,r,o,a,s,l){Ne=!1,Oe=null,De.apply(ze,arguments)}function Ge(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ge(e)!==e)throw Error(o(188))}function je(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(n=r.return)){i=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===i)return Qe(r),e;if(a===n)return Qe(r),t;a=a.sibling}throw Error(o(188))}if(i.return!==n.return)i=r,n=a;else{for(var s=!1,l=r.child;l;){if(l===i){s=!0,i=r,n=a;break}if(l===n){s=!0,n=r,i=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===i){s=!0,i=a,n=r;break}if(l===n){s=!0,n=a,i=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var We=r.unstable_scheduleCallback,$e=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,Ke=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,it=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes,a=268435455&i;if(0!==a){var s=a&~r;0!==s?n=ht(s):0!==(o&=a)&&(n=ht(o))}else 0!==(a=i&~r)?n=ht(a):0!==o&&(n=ht(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-at(t)),n|=e[i],t&=~r;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _t(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-at(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var yt=0;function At(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,wt,St,Ct,Et=!1,Tt=[],Mt=null,It=null,Bt=null,Rt=new Map,Pt=new Map,kt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Nt(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=vr(e.target);if(null!==t){var i=Ge(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Ve(i)))return e.blockedOn=t,void Ct(e.priority,(function(){wt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=yr(i))&&xt(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Ae=n,i.target.dispatchEvent(n),Ae=null,t.shift()}return!0}function Ut(e,t,i){Ft(e)&&i.delete(t)}function zt(){Et=!1,null!==Mt&&Ft(Mt)&&(Mt=null),null!==It&&Ft(It)&&(It=null),null!==Bt&&Ft(Bt)&&(Bt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Gt(e){function t(t){return Ht(t,e)}if(0<Tt.length){Ht(Tt[0],e);for(var i=1;i<Tt.length;i++){var n=Tt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Mt&&Ht(Mt,e),null!==It&&Ht(It,e),null!==Bt&&Ht(Bt,e),Rt.forEach(t),Pt.forEach(t),i=0;i<kt.length;i++)(n=kt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<kt.length&&null===(i=kt[0]).blockedOn;)Ot(i),null===i.blockedOn&&kt.shift()}var Vt=A.ReactCurrentBatchConfig,Qt=!0;function jt(e,t,i,n){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=1,Wt(e,t,i,n)}finally{yt=r,Vt.transition=o}}function qt(e,t,i,n){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=4,Wt(e,t,i,n)}finally{yt=r,Vt.transition=o}}function Wt(e,t,i,n){if(Qt){var r=Xt(e,t,i,n);if(null===r)Qn(e,t,n,$t,i),Dt(e,n);else if(function(e,t,i,n,r){switch(t){case"focusin":return Mt=Nt(Mt,e,t,i,n,r),!0;case"dragenter":return It=Nt(It,e,t,i,n,r),!0;case"mouseover":return Bt=Nt(Bt,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return Rt.set(o,Nt(Rt.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,Pt.set(o,Nt(Pt.get(o)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n))n.stopPropagation();else if(Dt(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var o=yr(r);if(null!==o&&bt(o),null===(o=Xt(e,t,i,n))&&Qn(e,t,n,$t,i),o===r)break;r=o}null!==r&&n.stopPropagation()}else Qn(e,t,n,null,i)}}var $t=null;function Xt(e,t,i,n){if($t=null,null!==(e=vr(e=be(n))))if(null===(t=Ge(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,Jt=null;function ei(){if(Jt)return Jt;var e,t,i=Zt,n=i.length,r="value"in Kt?Kt.value:Kt.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[o-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function ri(e){function t(t,i,n,r,o){for(var a in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var oi,ai,si,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ri(li),ui=O({},li,{view:0,detail:0}),hi=ri(ui),di=O({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==si&&(si&&"mousemove"===e.type?(oi=e.screenX-si.screenX,ai=e.screenY-si.screenY):ai=oi=0,si=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:ai}}),pi=ri(di),fi=ri(O({},di,{dataTransfer:0})),mi=ri(O({},ui,{relatedTarget:0})),gi=ri(O({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),_i=O({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=ri(_i),yi=ri(O({},li,{data:0})),Ai={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xi[e])&&!!t[e]}function Si(){return wi}var Ci=O({},ui,{key:function(e){if(e.key){var t=Ai[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ei=ri(Ci),Ti=ri(O({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mi=ri(O({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si})),Ii=ri(O({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bi=O({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ri=ri(Bi),Pi=[9,13,27,32],ki=u&&"CompositionEvent"in window,Li=null;u&&"documentMode"in document&&(Li=document.documentMode);var Di=u&&"TextEvent"in window&&!Li,Ni=u&&(!ki||Li&&8<Li&&11>=Li),Oi=String.fromCharCode(32),Fi=!1;function Ui(e,t){switch(e){case"keyup":return-1!==Pi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hi=!1;var Gi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gi[e.type]:"textarea"===t}function Qi(e,t,i,n){Ee(n),0<(t=qn(t,"onChange")).length&&(i=new ci("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var ji=null,qi=null;function Wi(e){Fn(e,0)}function $i(e){if(W(Ar(e)))return e}function Xi(e,t){if("change"===e)return t}var Yi=!1;if(u){var Ki;if(u){var Zi="oninput"in document;if(!Zi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Zi="function"===typeof Ji.oninput}Ki=Zi}else Ki=!1;Yi=Ki&&(!document.documentMode||9<document.documentMode)}function en(){ji&&(ji.detachEvent("onpropertychange",tn),qi=ji=null)}function tn(e){if("value"===e.propertyName&&$i(qi)){var t=[];Qi(t,qi,e,be(e)),Re(Wi,t)}}function nn(e,t,i){"focusin"===e?(en(),qi=i,(ji=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $i(qi)}function on(e,t){if("click"===e)return $i(t)}function an(e,t){if("input"===e||"change"===e)return $i(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!h.call(t,r)||!sn(e[r],t[r]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var i,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=$((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=dn(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&hn(i.ownerDocument.documentElement,i)){if(null!==n&&pn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=i.textContent.length,o=Math.min(n.start,r);n=void 0===n.end?o:Math.min(n.end,r),!e.extend&&o>n&&(r=n,n=o,o=r),r=un(i,o);var a=un(i,n);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,_n=null,vn=null,yn=!1;function An(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;yn||null==gn||gn!==$(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=qn(_n,"onSelect")).length&&(t=new ci("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=gn)))}function bn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var xn={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},wn={},Sn={};function Cn(e){if(wn[e])return wn[e];if(!xn[e])return e;var t,i=xn[e];for(t in i)if(i.hasOwnProperty(t)&&t in Sn)return wn[e]=i[t];return e}u&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var En=Cn("animationend"),Tn=Cn("animationiteration"),Mn=Cn("animationstart"),In=Cn("transitionend"),Bn=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,t){Bn.set(e,t),l(t,[e])}for(var kn=0;kn<Rn.length;kn++){var Ln=Rn[kn];Pn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Pn(En,"onAnimationEnd"),Pn(Tn,"onAnimationIteration"),Pn(Mn,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function On(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,a,s,l,c){if(He.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=Oe;Ne=!1,Oe=null,Fe||(Fe=!0,Ue=u)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;On(r,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;On(r,s,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Un(e,t){var i=t[mr];void 0===i&&(i=t[mr]=new Set);var n=e+"__bubble";i.has(n)||(Vn(t,e,2,!1),i.add(n))}function zn(e,t,i){var n=0;t&&(n|=4),Vn(i,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Gn(e){if(!e[Hn]){e[Hn]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nn.has(t)||zn(t,!1,e),zn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,zn("selectionchange",!1,t))}}function Vn(e,t,i,n){switch(Yt(t)){case 1:var r=jt;break;case 4:r=qt;break;default:r=Wt}i=r.bind(null,t,i,e),r=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Qn(e,t,i,n,r){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=vr(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}Re((function(){var n=o,r=be(i),a=[];e:{var s=Bn.get(e);if(void 0!==s){var l=ci,c=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Ei;break;case"focusin":c="focus",l=mi;break;case"focusout":c="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mi;break;case En:case Tn:case Mn:l=gi;break;case In:l=Ii;break;case"scroll":l=hi;break;case"wheel":l=Ri;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ti}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Pe(f,d))&&u.push(jn(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,i,r),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||i===Ae||!(c=i.relatedTarget||i.fromElement)||!vr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?vr(c):null)&&(c!==(h=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pi,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ti,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:Ar(l),p=null==c?s:Ar(c),(s=new u(m,f+"leave",l,i,r)).target=h,s.relatedTarget=p,m=null,vr(r)===n&&((u=new u(d,f+"enter",c,i,r)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Wn(p))f++;for(p=0,m=d;m;m=Wn(m))p++;for(;0<f-p;)u=Wn(u),f--;for(;0<p-f;)d=Wn(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wn(u),d=Wn(d)}u=null}else u=null;null!==l&&$n(a,s,l,u,!1),null!==c&&null!==h&&$n(a,h,c,u,!0)}if("select"===(l=(s=n?Ar(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xi;else if(Vi(s))if(Yi)g=an;else{g=rn;var _=nn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=on);switch(g&&(g=g(e,n))?Qi(a,g,i,r):(_&&_(e,s,n),"focusout"===e&&(_=s._wrapperState)&&_.controlled&&"number"===s.type&&ee(s,"number",s.value)),_=n?Ar(n):window,e){case"focusin":(Vi(_)||"true"===_.contentEditable)&&(gn=_,_n=n,vn=null);break;case"focusout":vn=_n=gn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,An(a,i,r);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":An(a,i,r)}var v;if(ki)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hi?Ui(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Ni&&"ko"!==i.locale&&(Hi||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hi&&(v=ei()):(Zt="value"in(Kt=r)?Kt.value:Kt.textContent,Hi=!0)),0<(_=qn(n,y)).length&&(y=new yi(y,e,null,i,r),a.push({event:y,listeners:_}),v?y.data=v:null!==(v=zi(i))&&(y.data=v))),(v=Di?function(e,t){switch(e){case"compositionend":return zi(t);case"keypress":return 32!==t.which?null:(Fi=!0,Oi);case"textInput":return(e=t.data)===Oi&&Fi?null:e;default:return null}}(e,i):function(e,t){if(Hi)return"compositionend"===e||!ki&&Ui(e,t)?(e=ei(),Jt=Zt=Kt=null,Hi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ni&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=qn(n,"onBeforeInput")).length&&(r=new yi("onBeforeInput","beforeinput",null,i,r),a.push({event:r,listeners:n}),r.data=v))}Fn(a,t)}))}function jn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function qn(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Pe(e,i))&&n.unshift(jn(e,o,r)),null!=(o=Pe(e,t))&&n.push(jn(e,o,r))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,i,n,r){for(var o=t._reactName,a=[];null!==i&&i!==n;){var s=i,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Pe(i,o))&&a.unshift(jn(i,l,s)):r||null!=(l=Pe(i,o))&&a.push(jn(i,l,s))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}var Xn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Kn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Yn,"")}function Zn(e,t,i){if(t=Kn(t),Kn(e)!==t&&i)throw Error(o(425))}function Jn(){}var er=null,tr=null;function ir(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(sr)}:nr;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&8===r.nodeType)if("/$"===(i=r.data)){if(0===n)return e.removeChild(r),void Gt(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=r}while(i);Gt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,_r="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var i=e.parentNode;i;){if(t=i[fr]||i[dr]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=ur(e);null!==e;){if(i=e[dr])return i;e=ur(e)}return t}i=(e=i).parentNode}return null}function yr(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ar(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function br(e){return e[pr]||null}var xr=[],wr=-1;function Sr(e){return{current:e}}function Cr(e){0>wr||(e.current=xr[wr],xr[wr]=null,wr--)}function Er(e,t){wr++,xr[wr]=e.current,e.current=t}var Tr={},Mr=Sr(Tr),Ir=Sr(!1),Br=Tr;function Rr(e,t){var i=e.type.contextTypes;if(!i)return Tr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function kr(){Cr(Ir),Cr(Mr)}function Lr(e,t,i){if(Mr.current!==Tr)throw Error(o(168));Er(Mr,t),Er(Ir,i)}function Dr(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var r in n=n.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return O({},i,n)}function Nr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Br=Mr.current,Er(Mr,e),Er(Ir,Ir.current),!0}function Or(e,t,i){var n=e.stateNode;if(!n)throw Error(o(169));i?(e=Dr(e,t,Br),n.__reactInternalMemoizedMergedChildContext=e,Cr(Ir),Cr(Mr),Er(Mr,e)):Cr(Ir),Er(Ir,i)}var Fr=null,Ur=!1,zr=!1;function Hr(e){null===Fr?Fr=[e]:Fr.push(e)}function Gr(){if(!zr&&null!==Fr){zr=!0;var e=0,t=yt;try{var i=Fr;for(yt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),We(Je,Gr),r}finally{yt=t,zr=!1}}return null}var Vr=[],Qr=0,jr=null,qr=0,Wr=[],$r=0,Xr=null,Yr=1,Kr="";function Zr(e,t){Vr[Qr++]=qr,Vr[Qr++]=jr,jr=e,qr=t}function Jr(e,t,i){Wr[$r++]=Yr,Wr[$r++]=Kr,Wr[$r++]=Xr,Xr=e;var n=Yr;e=Kr;var r=32-at(n)-1;n&=~(1<<r),i+=1;var o=32-at(t)+r;if(30<o){var a=r-r%5;o=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Yr=1<<32-at(t)+r|i<<r|n,Kr=o+e}else Yr=1<<o|i<<r|n,Kr=e}function eo(e){null!==e.return&&(Zr(e,1),Jr(e,1,0))}function to(e){for(;e===jr;)jr=Vr[--Qr],Vr[Qr]=null,qr=Vr[--Qr],Vr[Qr]=null;for(;e===Xr;)Xr=Wr[--$r],Wr[$r]=null,Kr=Wr[--$r],Wr[$r]=null,Yr=Wr[--$r],Wr[$r]=null}var io=null,no=null,ro=!1,oo=null;function ao(e,t){var i=Rc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function so(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,io=e,no=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,io=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Xr?{id:Yr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Rc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,io=e,no=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=no;if(t){var i=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=cr(i.nextSibling);var n=io;t&&so(e,t)?ao(n,i):(e.flags=-4097&e.flags|2,ro=!1,io=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,io=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;io=e}function ho(e){if(e!==io)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ir(e.type,e.memoizedProps)),t&&(t=no)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){no=cr(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}no=null}}else no=io?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=no;e;)e=cr(e.nextSibling)}function fo(){no=io=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=A.ReactCurrentBatchConfig;function _o(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var n=i.stateNode}if(!n)throw Error(o(147,e));var r=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function Ao(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=kc(e,t)).index=0,e.sibling=null,e}function a(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Oc(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){var o=i.type;return o===w?h(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&yo(o)===t.type)?((n=r(t,i.props)).ref=_o(e,t,i),n.return=e,n):((n=Lc(i.type,i.key,i.props,null,e.mode,n)).ref=_o(e,t,i),n.return=e,n)}function u(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Fc(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function h(e,t,i,n,o){return null===t||7!==t.tag?((t=Dc(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function d(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(i=Lc(t.type,t.key,t.props,null,e.mode,i)).ref=_o(e,null,t),i.return=e,i;case x:return(t=Fc(t,e.mode,i)).return=e,t;case P:return d(e,(0,t._init)(t._payload),i)}if(te(t)||D(t))return(t=Dc(t,e.mode,i,null)).return=e,t;vo(e,t)}return null}function p(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return i.key===r?c(e,t,i,n):null;case x:return i.key===r?u(e,t,i,n):null;case P:return p(e,t,(r=i._init)(i._payload),n)}if(te(i)||D(i))return null!==r?null:h(e,t,i,n,null);vo(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r);case x:return u(t,e=e.get(null===n.key?i:n.key)||null,n,r);case P:return f(e,t,i,(0,n._init)(n._payload),r)}if(te(n)||D(n))return h(t,e=e.get(i)||null,n,r,null);vo(t,n)}return null}function m(r,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=p(r,h,s[m],l);if(null===_){null===h&&(h=g);break}e&&h&&null===_.alternate&&t(r,h),o=a(_,o,m),null===u?c=_:u.sibling=_,u=_,h=g}if(m===s.length)return i(r,h),ro&&Zr(r,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return ro&&Zr(r,m),c}for(h=n(r,h);m<s.length;m++)null!==(g=f(h,r,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(r,e)})),ro&&Zr(r,m),c}function g(r,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,_=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=p(r,m,v.value,c);if(null===y){null===m&&(m=_);break}e&&m&&null===y.alternate&&t(r,m),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y,m=_}if(v.done)return i(r,m),ro&&Zr(r,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(r,v.value,c))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return ro&&Zr(r,g),u}for(m=n(r,m);!v.done;g++,v=l.next())null!==(v=f(m,r,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(r,e)})),ro&&Zr(r,g),u}return function e(n,o,a,l){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===w){if(7===u.tag){i(n,u.sibling),(o=r(u,a.props.children)).return=n,n=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&yo(c)===u.type){i(n,u.sibling),(o=r(u,a.props)).ref=_o(n,u,a),o.return=n,n=o;break e}i(n,u);break}t(n,u),u=u.sibling}a.type===w?((o=Dc(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Lc(a.type,a.key,a.props,null,n.mode,l)).ref=_o(n,o,a),l.return=n,n=l)}return s(n);case x:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){i(n,o.sibling),(o=r(o,a.children||[])).return=n,n=o;break e}i(n,o);break}t(n,o),o=o.sibling}(o=Fc(a,n.mode,l)).return=n,n=o}return s(n);case P:return e(n,o,(u=a._init)(a._payload),l)}if(te(a))return m(n,o,a,l);if(D(a))return g(n,o,a,l);vo(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(i(n,o.sibling),(o=r(o,a)).return=n,n=o):(i(n,o),(o=Oc(a,n.mode,l)).return=n,n=o),s(n)):i(n,o)}}var bo=Ao(!0),xo=Ao(!1),wo=Sr(null),So=null,Co=null,Eo=null;function To(){Eo=Co=So=null}function Mo(e){var t=wo.current;Cr(wo),e._currentValue=t}function Io(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Bo(e,t){So=e,Eo=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===So)throw Error(o(308));Co=e,So.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Po=null;function ko(e){null===Po?Po=[e]:Po.push(e)}function Lo(e,t,i,n){var r=t.interleaved;return null===r?(i.next=i,ko(t)):(i.next=r.next,r.next=i),t.interleaved=i,Do(e,n)}function Do(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var No=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ml)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Do(e,i)}return null===(r=n.interleaved)?(t.next=t,ko(n)):(t.next=r.next,r.next=t),n.interleaved=t,Do(e,i)}function Ho(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}function Go(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?r=o=t:o=o.next=t}else r=o=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Vo(e,t,i,n){var r=e.updateQueue;No=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=i,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=O({},h,d);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=h}}function Qo(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(o(191,r));r.call(n)}}}var jo={},qo=Sr(jo),Wo=Sr(jo),$o=Sr(jo);function Xo(e){if(e===jo)throw Error(o(174));return e}function Yo(e,t){switch(Er($o,t),Er(Wo,e),Er(qo,jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(qo),Er(qo,t)}function Ko(){Cr(qo),Cr(Wo),Cr($o)}function Zo(e){Xo($o.current);var t=Xo(qo.current),i=le(t,e.type);t!==i&&(Er(Wo,e),Er(qo,i))}function Jo(e){Wo.current===e&&(Cr(qo),Cr(Wo))}var ea=Sr(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function na(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var ra=A.ReactCurrentDispatcher,oa=A.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!sn(e[i],t[i]))return!1;return!0}function ga(e,t,i,n,r,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:es,e=i(n,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ra.current=ts,e=i(n,r)}while(ha)}if(ra.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function _a(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function Aa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=la,r=n.baseQueue,a=i.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}n.baseQueue=r=a,i.pending=null}if(null!==r){a=r.next,n=n.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=n):c=c.next=d,sa.lanes|=h,Nl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(ys=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,i.lastRenderedState=n}if(null!==(e=i.interleaved)){r=e;do{a=r.lane,sa.lanes|=a,Nl|=a,r=r.next}while(r!==e)}else null===r&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function xa(e){var t=ya(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,a=t.memoizedState;if(null!==r){i.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);sn(a,t.memoizedState)||(ys=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function wa(){}function Sa(e,t){var i=sa,n=ya(),r=t(),a=!sn(n.memoizedState,r);if(a&&(n.memoizedState=r,ys=!0),n=n.queue,Na(Ta.bind(null,i,n,e),[e]),n.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(i.flags|=2048,Ra(9,Ea.bind(null,i,n,r,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Ca(i,t,r)}return r}function Ca(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ea(e,t,i,n){t.value=i,t.getSnapshot=n,Ma(t)&&Ia(e)}function Ta(e,t,i){return i((function(){Ma(t)&&Ia(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!sn(e,i)}catch(n){return!0}}function Ia(e){var t=Do(e,1);null!==t&&ic(t,e,1,-1)}function Ba(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t.queue=e,e=e.dispatch=$a.bind(null,sa,e),[t.memoizedState,e]}function Ra(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Pa(){return ya().memoizedState}function ka(e,t,i,n){var r=va();sa.flags|=e,r.memoizedState=Ra(1|t,i,void 0,void 0===n?null:n)}function La(e,t,i,n){var r=ya();n=void 0===n?null:n;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==n&&ma(n,a.deps))return void(r.memoizedState=Ra(t,i,o,n))}sa.flags|=e,r.memoizedState=Ra(1|t,i,o,n)}function Da(e,t){return ka(8390656,8,e,t)}function Na(e,t){return La(2048,8,e,t)}function Oa(e,t){return La(4,2,e,t)}function Fa(e,t){return La(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,La(4,4,Ua.bind(null,t,e),i)}function Ha(){}function Ga(e,t){var i=ya();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ma(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Va(e,t){var i=ya();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ma(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Qa(e,t,i){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=i):(sn(i,t)||(i=mt(),sa.lanes|=i,Nl|=i,e.baseState=!0),t)}function ja(e,t){var i=yt;yt=0!==i&&4>i?i:4,e(!0);var n=oa.transition;oa.transition={};try{e(!1),t()}finally{yt=i,oa.transition=n}}function qa(){return ya().memoizedState}function Wa(e,t,i){var n=tc(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,i);else if(null!==(i=Lo(e,t,i,n))){ic(i,e,n,ec()),Ka(i,t,n)}}function $a(e,t,i){var n=tc(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,i);if(r.hasEagerState=!0,r.eagerState=s,sn(s,a)){var l=t.interleaved;return null===l?(r.next=r,ko(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(i=Lo(e,t,r,n))&&(ic(i,e,n,r=ec()),Ka(i,t,n))}}function Xa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){ha=ua=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ka(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}var Za={readContext:Ro,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ro,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Da,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,ka(4194308,4,Ua.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var i=va();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=va();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ba,useDebugValue:Ha,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=ja.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=sa,r=va();if(ro){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===Il)throw Error(o(349));0!==(30&aa)||Ca(n,t,i)}r.memoizedState=i;var a={value:i,getSnapshot:t};return r.queue=a,Da(Ta.bind(null,n,a,e),[e]),n.flags|=2048,Ra(9,Ea.bind(null,n,a,i,t),void 0,null),i},useId:function(){var e=va(),t=Il.identifierPrefix;if(ro){var i=Kr;t=":"+t+"R"+(i=(Yr&~(1<<32-at(Yr)-1)).toString(32)+i),0<(i=da++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ro,useCallback:Ga,useContext:Ro,useEffect:Na,useImperativeHandle:za,useInsertionEffect:Oa,useLayoutEffect:Fa,useMemo:Va,useReducer:ba,useRef:Pa,useState:function(){return ba(Aa)},useDebugValue:Ha,useDeferredValue:function(e){return Qa(ya(),la.memoizedState,e)},useTransition:function(){return[ba(Aa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:qa,unstable_isNewReconciler:!1},ts={readContext:Ro,useCallback:Ga,useContext:Ro,useEffect:Na,useImperativeHandle:za,useInsertionEffect:Oa,useLayoutEffect:Fa,useMemo:Va,useReducer:xa,useRef:Pa,useState:function(){return xa(Aa)},useDebugValue:Ha,useDeferredValue:function(e){var t=ya();return null===la?t.memoizedState=e:Qa(t,la.memoizedState,e)},useTransition:function(){return[xa(Aa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:qa,unstable_isNewReconciler:!1};function is(e,t){if(e&&e.defaultProps){for(var i in t=O({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function ns(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:O({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),o=Uo(n,r);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=zo(e,o,r))&&(ic(t,e,r,n),Ho(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ec(),r=tc(e),o=Uo(n,r);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=zo(e,o,r))&&(ic(t,e,r,n),Ho(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ec(),n=tc(e),r=Uo(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zo(e,r,n))&&(ic(t,e,n,i),Ho(t,e,n))}};function os(e,t,i,n,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(r,o))}function as(e,t,i){var n=!1,r=Tr,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(r=Pr(t)?Br:Mr.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Rr(e,r):Tr),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function ls(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs={},Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ro(o):(o=Pr(t)?Br:Mr.current,r.context=Rr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ns(e,t,o,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),Vo(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var i="",n=t;do{i+=H(n),n=n.return}while(n);var r=i}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function us(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,i){(i=Uo(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ql||(Ql=!0,jl=n),hs(0,t)},i}function fs(e,t,i){(i=Uo(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){hs(0,t),"function"!==typeof n&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ms(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ds;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=Cc.bind(null,e,t,i),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _s(e,t,i,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Uo(-1,1)).tag=2,zo(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vs=A.ReactCurrentOwner,ys=!1;function As(e,t,i,n){t.child=null===e?xo(t,null,i,n):bo(t,e.child,i,n)}function bs(e,t,i,n,r){i=i.render;var o=t.ref;return Bo(t,r),n=ga(e,t,i,n,o,r),i=_a(),null===e||ys?(ro&&i&&eo(t),t.flags|=1,As(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qs(e,t,r))}function xs(e,t,i,n,r){if(null===e){var o=i.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Lc(i.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ws(e,t,o,n,r))}if(o=e.child,0===(e.lanes&r)){var a=o.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(a,n)&&e.ref===t.ref)return Qs(e,t,r)}return t.flags|=1,(e=kc(o,n)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,i,n,r){if(null!==e){var o=e.memoizedProps;if(ln(o,n)&&e.ref===t.ref){if(ys=!1,t.pendingProps=n=o,0===(e.lanes&r))return t.lanes=e.lanes,Qs(e,t,r);0!==(131072&e.flags)&&(ys=!0)}}return Es(e,t,i,n,r)}function Ss(e,t,i){var n=t.pendingProps,r=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(kl,Pl),Pl|=i;else{if(0===(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(kl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:i,Er(kl,Pl),Pl|=n}else null!==o?(n=o.baseLanes|i,t.memoizedState=null):n=i,Er(kl,Pl),Pl|=n;return As(e,t,r,i),t.child}function Cs(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,i,n,r){var o=Pr(i)?Br:Mr.current;return o=Rr(t,o),Bo(t,r),i=ga(e,t,i,n,o,r),n=_a(),null===e||ys?(ro&&n&&eo(t),t.flags|=1,As(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qs(e,t,r))}function Ts(e,t,i,n,r){if(Pr(i)){var o=!0;Nr(t)}else o=!1;if(Bo(t,r),null===t.stateNode)Vs(e,t),as(t,i,n),ls(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=Ro(c):c=Rr(t,c=Pr(i)?Br:Mr.current);var u=i.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&ss(t,a,n,c),No=!1;var d=t.memoizedState;a.state=d,Vo(t,n,a,r),l=t.memoizedState,s!==n||d!==l||Ir.current||No?("function"===typeof u&&(ns(t,i,u,n),l=t.memoizedState),(s=No||os(t,i,s,n,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:is(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=Ro(l):l=Rr(t,l=Pr(i)?Br:Mr.current);var p=i.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,n,l),No=!1,d=t.memoizedState,a.state=d,Vo(t,n,a,r);var f=t.memoizedState;s!==h||d!==f||Ir.current||No?("function"===typeof p&&(ns(t,i,p,n),f=t.memoizedState),(c=No||os(t,i,c,n,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ms(e,t,i,n,o,r)}function Ms(e,t,i,n,r,o){Cs(e,t);var a=0!==(128&t.flags);if(!n&&!a)return r&&Or(t,i,!1),Qs(e,t,o);n=t.stateNode,vs.current=t;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=bo(t,e.child,null,o),t.child=bo(t,null,s,o)):As(e,t,s,o),t.memoizedState=n.state,r&&Or(t,i,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),Yo(e,t.containerInfo)}function Bs(e,t,i,n,r){return fo(),mo(r),t.flags|=256,As(e,t,i,n),t.child}var Rs,Ps,ks,Ls,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,i){var n,r=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Er(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,r,0,null),e=Dc(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(i),t.memoizedState=Ds,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,i,n,r,a,s){if(i)return 256&t.flags?(t.flags&=-257,Us(e,t,s,n=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,r=t.mode,n=Nc({mode:"visible",children:n.children},r,0,null),(a=Dc(a,r,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&bo(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var l=n.dgst;return n=l,Us(e,t,s,n=us(a=Error(o(419)),n,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(n=Il)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Do(e,r),ic(n,e,r,-1))}return mc(),Us(e,t,s,n=us(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,no=cr(r.nextSibling),io=t,ro=!0,oo=null,null!==e&&(Wr[$r++]=Yr,Wr[$r++]=Kr,Wr[$r++]=Xr,Yr=e.id,Kr=e.overflow,Xr=t),t=Fs(t,n.children),t.flags|=4096,t)}(e,t,l,r,n,a,i);if(s){s=r.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=kc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=kc(n,s):(s=Dc(s,l,i,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~i,t.memoizedState=Ds,r}return e=(s=e.child).sibling,r=kc(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function Fs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,i,n){return null!==n&&mo(n),bo(t,e.child,null,i),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Io(e.return,t,i)}function Hs(e,t,i,n,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r)}function Gs(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(As(e,t,n.children,i),0!==(2&(n=ea.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,i,t);else if(19===e.tag)zs(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Er(ea,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===ta(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Hs(t,!1,r,i,o);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Hs(t,!0,i,null,o);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qs(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=kc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=kc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function js(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Ws(e,t,i){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Pr(t.type)&&kr(),qs(t),null;case 3:return n=t.stateNode,Ko(),Cr(Ir),Cr(Mr),na(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ps(e,t),qs(t),null;case 5:Jo(t);var r=Xo($o.current);if(i=t.type,null!==e&&null!=t.stateNode)ks(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=Xo(qo.current),ho(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[dr]=t,n[pr]=a,e=0!==(1&t.mode),i){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(r=0;r<Dn.length;r++)Un(Dn[r],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":Y(n,a),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Un("invalid",n);break;case"textarea":re(n,a),Un("invalid",n)}for(var l in ve(i,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Un("scroll",n)}switch(i){case"input":q(n),J(n,a,!0);break;case"textarea":q(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Jn)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[dr]=t,e[pr]=n,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(i,n),i){case"dialog":Un("cancel",e),Un("close",e),r=n;break;case"iframe":case"object":case"embed":Un("load",e),r=n;break;case"video":case"audio":for(r=0;r<Dn.length;r++)Un(Dn[r],e);r=n;break;case"source":Un("error",e),r=n;break;case"img":case"image":case"link":Un("error",e),Un("load",e),r=n;break;case"details":Un("toggle",e),r=n;break;case"input":Y(e,n),r=X(e,n),Un("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=O({},n,{value:void 0}),Un("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),Un("invalid",e)}for(a in ve(i,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==i||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Un("scroll",e):null!=u&&y(e,a,u,l))}switch(i){case"input":q(e),J(e,n,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?ie(e,!!n.multiple,a,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Jn)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(i=Xo($o.current),Xo(qo.current),ho(t)){if(n=t.stateNode,i=t.memoizedProps,n[dr]=t,(a=n.nodeValue!==i)&&null!==(e=io))switch(e.tag){case 3:Zn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,i,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[dr]=t,t.stateNode=n}return qs(t),null;case 13:if(Cr(ea),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Ko(),Ps(e,t),null===e&&Gn(t.stateNode.containerInfo),qs(t),null;case 10:return Mo(t.type._context),qs(t),null;case 19:if(Cr(ea),null===(a=t.memoizedState))return qs(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)js(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,js(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(a=i).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Er(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Gl&&(t.flags|=128,n=!0,js(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ta(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),js(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ro)return qs(t),null}else 2*Ke()-a.renderingStartTime>Gl&&1073741824!==i&&(t.flags|=128,n=!0,js(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=a.last)?i.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,i=ea.current,Er(ea,n?1&i|2:1&i),t):(qs(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Pr(t.type)&&kr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ko(),Cr(Ir),Cr(Mr),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Cr(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ea),null;case 4:return Ko(),null;case 10:return Mo(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ps=function(){},ks=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Xo(qo.current);var o,a=null;switch(i){case"input":r=X(e,r),n=X(e,n),a=[];break;case"select":r=O({},r,{value:void 0}),n=O({},n,{value:void 0}),a=[];break;case"textarea":r=ne(e,r),n=ne(e,n),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(u in ve(i,n),i=null,r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=r?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(a||(a=[]),a.push(u,i)),i=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Un("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}i&&(a=a||[]).push("style",i);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,i,n){i!==n&&(t.flags|=4)};var Xs=!1,Ys=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Js(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){Sc(e,t,n)}else i.current=null}function el(e,t,i){try{i()}catch(n){Sc(e,t,n)}}var tl=!1;function il(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,i,o)}r=r.next}while(r!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function rl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[gr],delete t[_r])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function cl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,i),e=e.sibling;null!==e;)cl(e,t,i),e=e.sibling}var ul=null,hl=!1;function dl(e,t,i){for(i=i.child;null!==i;)pl(e,t,i),i=i.sibling}function pl(e,t,i){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,i)}catch(s){}switch(i.tag){case 5:Ys||Js(i,t);case 6:var n=ul,r=hl;ul=null,dl(e,t,i),hl=r,null!==(ul=n)&&(hl?(e=ul,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):ul.removeChild(i.stateNode));break;case 18:null!==ul&&(hl?(e=ul,i=i.stateNode,8===e.nodeType?lr(e.parentNode,i):1===e.nodeType&&lr(e,i),Gt(e)):lr(ul,i.stateNode));break;case 4:n=ul,r=hl,ul=i.stateNode.containerInfo,hl=!0,dl(e,t,i),ul=n,hl=r;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(i,t,a),r=r.next}while(r!==n)}dl(e,t,i);break;case 1:if(!Ys&&(Js(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(s){Sc(i,t,s)}dl(e,t,i);break;case 21:dl(e,t,i);break;case 22:1&i.mode?(Ys=(n=Ys)||null!==i.memoizedState,dl(e,t,i),Ys=n):dl(e,t,i);break;default:dl(e,t,i)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Ks),t.forEach((function(t){var n=Mc.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function ml(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var r=i[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),_l(e),4&n){try{il(3,e,e.return),nl(3,e)}catch(g){Sc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),_l(e),512&n&&null!==i&&Js(i,i.return);break;case 5:if(ml(t,e),_l(e),512&n&&null!==i&&Js(i,i.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Sc(e,e.return,g)}}if(4&n&&null!=(r=e.stateNode)){var a=e.memoizedProps,s=null!==i?i.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(r,a),ye(l,s);var u=ye(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):y(r,h,d,u)}switch(l){case"input":Z(r,a);break;case"textarea":oe(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ie(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ie(r,!!a.multiple,a.defaultValue,!0):ie(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),_l(e),4&n){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),_l(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),_l(e);break;case 13:ml(t,e),_l(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Ke())),4&n&&fl(e);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&e.mode?(Ys=(u=Ys)||h,ml(t,e),Ys=u):ml(t,e),_l(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(d=Zs=h;null!==Zs;){switch(f=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,i=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(n,i,g)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Zs=f):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),_l(e),4&n&&fl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(al(i)){var n=i;break e}i=i.return}throw Error(o(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(de(r,""),n.flags&=-33),cl(e,sl(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,i){Zs=e,yl(e,t,i)}function yl(e,t,i){for(var n=0!==(1&e.mode);null!==Zs;){var r=Zs,o=r.child;if(22===r.tag&&n){var a=null!==r.memoizedState||Xs;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Xs;var c=Ys;if(Xs=a,(Ys=l)&&!c)for(Zs=r;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?xl(r):null!==l?(l.return=a,Zs=l):xl(r);for(;null!==o;)Zs=o,yl(o,t,i),o=o.sibling;Zs=r,Xs=s,Ys=c}Al(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Zs=o):Al(e)}}function Al(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ys)if(null===i)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:is(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Qo(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Qo(t,s,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Gt(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&rl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(i=t.sibling)){i.return=t.return,Zs=i;break}Zs=t.return}}function bl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Zs=i;break}Zs=t.return}}function xl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{nl(4,t)}catch(l){Sc(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(l){Sc(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Sc(t,o,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var wl,Sl=Math.ceil,Cl=A.ReactCurrentDispatcher,El=A.ReactCurrentOwner,Tl=A.ReactCurrentBatchConfig,Ml=0,Il=null,Bl=null,Rl=0,Pl=0,kl=Sr(0),Ll=0,Dl=null,Nl=0,Ol=0,Fl=0,Ul=null,zl=null,Hl=0,Gl=1/0,Vl=null,Ql=!1,jl=null,ql=null,Wl=!1,$l=null,Xl=0,Yl=0,Kl=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Ml)?Ke():-1!==Zl?Zl:Zl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ic(e,t,i,n){if(50<Yl)throw Yl=0,Kl=null,Error(o(185));_t(e,i,n),0!==(2&Ml)&&e===Il||(e===Il&&(0===(2&Ml)&&(Ol|=i),4===Ll&&sc(e,Rl)),nc(e,n),1===i&&0===Ml&&0===(1&t.mode)&&(Gl=Ke()+500,Ur&&Gr()))}function nc(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=r[a];-1===l?0!==(s&i)&&0===(s&n)||(r[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=dt(e,e===Il?Rl:0);if(0===n)null!==i&&$e(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&$e(i),1===t)0===e.tag?function(e){Ur=!0,Hr(e)}(lc.bind(null,e)):Hr(lc.bind(null,e)),ar((function(){0===(6&Ml)&&Gr()})),i=null;else{switch(At(n)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Ic(i,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function rc(e,t){if(Zl=-1,Jl=0,0!==(6&Ml))throw Error(o(327));var i=e.callbackNode;if(xc()&&e.callbackNode!==i)return null;var n=dt(e,e===Il?Rl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var r=Ml;Ml|=2;var a=fc();for(Il===e&&Rl===t||(Vl=null,Gl=Ke()+500,dc(e,t));;)try{vc();break}catch(l){pc(e,l)}To(),Cl.current=a,Ml=r,null!==Bl?t=0:(Il=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(n=r,t=oc(e,r))),1===t)throw i=Dl,dc(e,0),sc(e,n),nc(e,Ke()),i;if(6===t)sc(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var r=i[n],o=r.getSnapshot;r=r.value;try{if(!sn(o(),r))return!1}catch(s){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,n))&&(0!==(a=ft(e))&&(n=a,t=oc(e,a))),1===t))throw i=Dl,dc(e,0),sc(e,n),nc(e,Ke()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:bc(e,zl,Vl);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=Hl+500-Ke())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(bc.bind(null,e,zl,Vl),t);break}bc(e,zl,Vl);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>r&&(r=s),n&=~a}if(n=r,10<(n=(120>(n=Ke()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=nr(bc.bind(null,e,zl,Vl),n);break}bc(e,zl,Vl);break;default:throw Error(o(329))}}}return nc(e,Ke()),e.callbackNode===i?rc.bind(null,e):null}function oc(e,t){var i=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=i,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function sc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-at(t),n=1<<i;e[i]=-1,t&=~n}}function lc(e){if(0!==(6&Ml))throw Error(o(327));xc();var t=dt(e,0);if(0===(1&t))return nc(e,Ke()),null;var i=gc(e,t);if(0!==e.tag&&2===i){var n=ft(e);0!==n&&(t=n,i=oc(e,n))}if(1===i)throw i=Dl,dc(e,0),sc(e,t),nc(e,Ke()),i;if(6===i)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,zl,Vl),nc(e,Ke()),null}function cc(e,t){var i=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=i)&&(Gl=Ke()+500,Ur&&Gr())}}function uc(e){null!==$l&&0===$l.tag&&0===(6&Ml)&&xc();var t=Ml;Ml|=1;var i=Tl.transition,n=yt;try{if(Tl.transition=null,yt=1,e)return e()}finally{yt=n,Tl.transition=i,0===(6&(Ml=t))&&Gr()}}function hc(){Pl=kl.current,Cr(kl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,rr(i)),null!==Bl)for(i=Bl.return;null!==i;){var n=i;switch(to(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&kr();break;case 3:Ko(),Cr(Ir),Cr(Mr),na();break;case 5:Jo(n);break;case 4:Ko();break;case 13:case 19:Cr(ea);break;case 10:Mo(n.type._context);break;case 22:case 23:hc()}i=i.return}if(Il=e,Bl=e=kc(e.current,null),Rl=Pl=t,Ll=0,Dl=null,Fl=Ol=Nl=0,zl=Ul=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(n=(i=Po[t]).interleaved)){i.interleaved=null;var r=n.next,o=i.pending;if(null!==o){var a=o.next;o.next=r,n.next=a}i.pending=n}Po=null}return e}function pc(e,t){for(;;){var i=Bl;try{if(To(),ra.current=Za,ua){for(var n=sa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,El.current=null,null===i||null===i.return){Ll=1,Dl=t,Bl=null;break}e:{var a=e,s=i.return,l=i,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,_s(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var _=gs(s);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),_s(_,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Ll&&(Ll=2),null===Ul?Ul=[a]:Ul.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Go(a,ps(0,c,t));break e;case 1:l=c;var v=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Go(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}Ac(i)}catch(A){t=A,Bl===i&&null!==i&&(Bl=i=i.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Za,null===e?Za:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Il||0===(268435455&Nl)&&0===(268435455&Ol)||sc(Il,Rl)}function gc(e,t){var i=Ml;Ml|=2;var n=fc();for(Il===e&&Rl===t||(Vl=null,dc(e,t));;)try{_c();break}catch(r){pc(e,r)}if(To(),Ml=i,Cl.current=n,null!==Bl)throw Error(o(261));return Il=null,Rl=0,Ll}function _c(){for(;null!==Bl;)yc(Bl)}function vc(){for(;null!==Bl&&!Xe();)yc(Bl)}function yc(e){var t=wl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?Ac(e):Bl=t,El.current=null}function Ac(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Ws(i,t,Pl)))return void(Bl=i)}else{if(null!==(i=$s(i,t)))return i.flags&=32767,void(Bl=i);if(null===e)return Ll=6,void(Bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bl=t);Bl=t=e}while(null!==t);0===Ll&&(Ll=5)}function bc(e,t,i){var n=yt,r=Tl.transition;try{Tl.transition=null,yt=1,function(e,t,i,n){do{xc()}while(null!==$l);if(0!==(6&Ml))throw Error(o(327));i=e.finishedWork;var r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-at(i),o=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~o}}(e,a),e===Il&&(Bl=Il=null,Rl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Wl||(Wl=!0,Ic(tt,(function(){return xc(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=yt;yt=1;var l=Ml;Ml|=4,El.current=null,function(e,t){if(er=Qt,pn(e=dn())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch(b){i=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==i||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==n&&3!==d.nodeType||(c=s+n),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===i&&++u===r&&(l=s),p===a&&++h===n&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(tr={focusedElem:e,selectionRange:i},Qt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,_=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:is(t.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=t.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(o(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,i),gl(i,e),fn(tr),Qt=!!er,tr=er=null,e.current=i,vl(i,e,r),Ye(),Ml=l,yt=s,Tl.transition=a}else e.current=i;if(Wl&&(Wl=!1,$l=e,Xl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),nc(e,Ke()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(Ql)throw Ql=!1,e=jl,jl=null,e;0!==(1&Xl)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Kl?Yl++:(Yl=0,Kl=e):Yl=0,Gr()}(e,t,i,n)}finally{Tl.transition=r,yt=n}return null}function xc(){if(null!==$l){var e=At(Xl),t=Tl.transition,i=yt;try{if(Tl.transition=null,yt=16>e?16:e,null===$l)var n=!1;else{if(e=$l,$l=null,Xl=0,0!==(6&Ml))throw Error(o(331));var r=Ml;for(Ml|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zs=d;else for(;null!==Zs;){var p=(h=Zs).sibling,f=h.return;if(ol(h),h===u){Zs=null;break}if(null!==p){p.return=f,Zs=p;break}Zs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zs=v;break e}Zs=a.return}}var y=e.current;for(Zs=y;null!==Zs;){var A=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==A)A.return=s,Zs=A;else e:for(s=y;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(x){Sc(l,l.return,x)}if(l===s){Zs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Zs=b;break e}Zs=l.return}}if(Ml=r,Gr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(x){}n=!0}return n}finally{yt=i,Tl.transition=t}}return!1}function wc(e,t,i){e=zo(e,t=ps(0,t=cs(i,t),1),1),t=ec(),null!==e&&(_t(e,1,t),nc(e,t))}function Sc(e,t,i){if(3===e.tag)wc(e,e,i);else for(;null!==t;){if(3===t.tag){wc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===ql||!ql.has(n))){t=zo(t,e=fs(t,e=cs(i,e),1),1),e=ec(),null!==t&&(_t(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&i,Il===e&&(Rl&i)===i&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Ke()-Hl?dc(e,0):Fl|=i),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var i=ec();null!==(e=Do(e,t))&&(_t(e,t,i),nc(e,i))}function Tc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ec(e,i)}function Mc(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Ec(e,i)}function Ic(e,t){return We(e,t)}function Bc(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,i,n){return new Bc(e,t,i,n)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function kc(e,t){var i=e.alternate;return null===i?((i=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Lc(e,t,i,n,r,a){var s=2;if(n=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Dc(i.children,r,a,t);case S:s=8,r|=8;break;case C:return(e=Rc(12,i,t,2|r)).elementType=C,e.lanes=a,e;case I:return(e=Rc(13,i,t,r)).elementType=I,e.lanes=a,e;case B:return(e=Rc(19,i,t,r)).elementType=B,e.lanes=a,e;case k:return Nc(i,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case M:s=11;break e;case R:s=14;break e;case P:s=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,i,t,r)).elementType=e,t.type=n,t.lanes=a,t}function Dc(e,t,i,n){return(e=Rc(7,e,n,t)).lanes=i,e}function Nc(e,t,i,n){return(e=Rc(22,e,n,t)).elementType=k,e.lanes=i,e.stateNode={isHidden:!1},e}function Oc(e,t,i){return(e=Rc(6,e,null,t)).lanes=i,e}function Fc(e,t,i){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,i,n,r,o,a,s,l){return e=new Uc(e,t,i,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Hc(e){if(!e)return Tr;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var i=e.type;if(Pr(i))return Dr(e,i,t)}return t}function Gc(e,t,i,n,r,o,a,s,l){return(e=zc(i,n,!0,e,0,o,0,s,l)).context=Hc(null),i=e.current,(o=Uo(n=ec(),r=tc(i))).callback=void 0!==t&&null!==t?t:null,zo(i,o,r),e.current.lanes=r,_t(e,r,n),nc(e,n),e}function Vc(e,t,i,n){var r=t.current,o=ec(),a=tc(r);return i=Hc(i),null===t.context?t.context=i:t.pendingContext=i,(t=Uo(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zo(r,t,a))&&(ic(e,r,a,o),Ho(e,r,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function jc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function qc(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}wl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)ys=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return ys=!1,function(e,t,i){switch(t.tag){case 3:Is(t),fo();break;case 5:Zo(t);break;case 1:Pr(t.type)&&Nr(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Er(wo,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Er(ea,1&ea.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Os(e,t,i):(Er(ea,1&ea.current),null!==(e=Qs(e,t,i))?e.sibling:null);Er(ea,1&ea.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Gs(e,t,i);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(ea,ea.current),n)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,i)}return Qs(e,t,i)}(e,t,i);ys=0!==(131072&e.flags)}else ys=!1,ro&&0!==(1048576&t.flags)&&Jr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vs(e,t),e=t.pendingProps;var r=Rr(t,Mr.current);Bo(t,i),r=ga(null,t,n,e,r,i);var a=_a();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pr(n)?(a=!0,Nr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oo(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,ls(t,n,e,i),t=Ms(null,t,n,!0,a,i)):(t.tag=0,ro&&a&&eo(t),As(null,t,r,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(n),e=is(n,e),r){case 0:t=Es(null,t,n,e,i);break e;case 1:t=Ts(null,t,n,e,i);break e;case 11:t=bs(null,t,n,e,i);break e;case 14:t=xs(null,t,n,is(n.type,e),i);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Es(e,t,n,r=t.elementType===n?r:is(n,r),i);case 1:return n=t.type,r=t.pendingProps,Ts(e,t,n,r=t.elementType===n?r:is(n,r),i);case 3:e:{if(Is(t),null===e)throw Error(o(387));n=t.pendingProps,r=(a=t.memoizedState).element,Fo(e,t),Vo(t,n,null,i);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Bs(e,t,n,i,r=cs(Error(o(423)),t));break e}if(n!==r){t=Bs(e,t,n,i,r=cs(Error(o(424)),t));break e}for(no=cr(t.stateNode.containerInfo.firstChild),io=t,ro=!0,oo=null,i=xo(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fo(),n===r){t=Qs(e,t,i);break e}As(e,t,n,i)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),n=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,ir(n,r)?s=null:null!==a&&ir(n,a)&&(t.flags|=32),Cs(e,t),As(e,t,s,i),t.child;case 6:return null===e&&co(t),null;case 13:return Os(e,t,i);case 4:return Yo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bo(t,null,n,i):As(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,bs(e,t,n,r=t.elementType===n?r:is(n,r),i);case 7:return As(e,t,t.pendingProps,i),t.child;case 8:case 12:return As(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value,Er(wo,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===r.children&&!Ir.current){t=Qs(e,t,i);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Uo(-1,i&-i)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=i,null!==(c=a.alternate)&&(c.lanes|=i),Io(a.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=i,null!==(l=s.alternate)&&(l.lanes|=i),Io(s,i,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}As(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Bo(t,i),n=n(r=Ro(r)),t.flags|=1,As(e,t,n,i),t.child;case 14:return r=is(n=t.type,t.pendingProps),xs(e,t,n,r=is(n.type,r),i);case 15:return ws(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:is(n,r),Vs(e,t),t.tag=1,Pr(n)?(e=!0,Nr(t)):e=!1,Bo(t,i),as(t,n,r),ls(t,n,r,i),Ms(null,t,n,!0,e,i);case 19:return Gs(e,t,i);case 22:return Ss(e,t,i)}throw Error(o(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,i,n,r){var o=i._reactRootContainer;if(o){var a=o;if("function"===typeof r){var s=r;r=function(){var e=Qc(a);s.call(e)}}Vc(t,a,e,r)}else a=function(e,t,i,n,r){if(r){if("function"===typeof n){var o=n;n=function(){var e=Qc(a);o.call(e)}}var a=Gc(t,n,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[fr]=a.current,Gn(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var s=n;n=function(){var e=Qc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,Gn(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,i,n)})),l}(i,t,e,r,n);return Qc(a)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[fr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var i=0;i<kt.length&&0!==t&&t<kt[i].priority;i++);kt.splice(i,0,e),0===i&&Ot(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ht(t.pendingLanes);0!==i&&(vt(t,1|i),nc(t,Ke()),0===(6&Ml)&&(Gl=Ke()+500,Gr()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var i=ec();ic(t,e,1,i)}})),qc(e,1)}},xt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)ic(t,e,134217728,ec());qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),i=Do(e,t);if(null!==i)ic(i,e,t,ec());qc(e,t)}},St=function(){return yt},Ct=function(e,t){var i=yt;try{return yt=e,t()}finally{yt=i}},xe=function(e,t,i){switch(t){case"input":if(Z(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=br(n);if(!r)throw Error(o(90));W(n),Z(n,r)}}}break;case"textarea":oe(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Me=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[yr,Ar,br,Ee,Te,cc]},tu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{rt=nu.inject(iu),ot=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var i=!1,n="",r=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,i,0,n,r),e[fr]=t.current,Gn(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=je(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,i){if(!Kc(t))throw Error(o(200));return Jc(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!Yc(e))throw Error(o(405));var n=null!=i&&i.hydratedSources||null,r=!1,a="",s=Wc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(a=i.identifierPrefix),void 0!==i.onRecoverableError&&(s=i.onRecoverableError)),t=Gc(t,null,e,1,null!=i?i:null,r,0,a,s),e[fr]=t.current,Gn(e),n)for(e=0;e<n.length;e++)r=(r=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new Xc(t)},t.render=function(e,t,i){if(!Kc(t))throw Error(o(200));return Jc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Kc(i))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,i)=>{"use strict";var n=i(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(730)},153:(e,t,i)=>{"use strict";var n=i(43),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,o={},c=null,u=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:s.current}}t.jsx=c},202:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function _(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function v(){}function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=_.prototype;var A=y.prototype=new v;A.constructor=y,m(A,_.prototype),A.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return a=a(l=e),e=""===o?"."+M(l,0):o,b(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),I(a,t,r,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",b(e))for(var c=0;c<e.length;c++){var u=o+M(s=e[c],c);l+=I(s,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,r,u=o+M(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function B(e,t,i){if(null==e)return e;var n=[],r=0;return I(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},k={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:k,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:B,forEach:function(e,t,i){B(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return B(e,(function(){t++})),t},toArray:function(e){return B(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=r,t.Profiler=a,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:i,type:e.type,key:o,ref:a,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,i){return P.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,i){return P.current.useReducer(e,t,i)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return P.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},43:(e,t,i)=>{"use strict";e.exports=i(202)},579:(e,t,i)=>{"use strict";e.exports=i(153)},234:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,r=e[n];if(!(0<o(r,t)))break e;e[n]=t,e[i]=r,i=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length,a=r>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,i))c<r&&0>o(u,l)?(e[n]=u,e[c]=i,n=c):(e[n]=l,e[s]=i,n=s);else{if(!(c<r&&0>o(u,i)))break e;e[n]=u,e[c]=i,n=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function A(e){for(var t=n(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,i(c,t)}t=n(u)}}function b(e){if(g=!1,A(e),!m)if(null!==n(c))m=!0,k(x);else{var t=n(u);null!==t&&L(b,t.startTime-e)}}function x(e,i){m=!1,g&&(g=!1,v(E),E=-1),f=!0;var o=p;try{for(A(i),d=n(c);null!==d&&(!(d.expirationTime>i)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=i);i=t.unstable_now(),"function"===typeof s?d.callback=s:d===n(c)&&r(c),A(i)}else r(c);d=n(c)}if(null!==d)var l=!0;else{var h=n(u);null!==h&&L(b,h.startTime-i),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,C=null,E=-1,T=5,M=-1;function I(){return!(t.unstable_now()-M<T)}function B(){if(null!==C){var e=t.unstable_now();M=e;var i=!0;try{i=C(!0,e)}finally{i?w():(S=!1,C=null)}}else S=!1}if("function"===typeof y)w=function(){y(B)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=B,w=function(){P.postMessage(null)}}else w=function(){_(B,0)};function k(e){C=e,S||(S=!0,w())}function L(e,i){E=_((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,r,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,i(u,e),null===n(c)&&e===n(u)&&(g?(v(E),E=-1):g=!0,L(b,o-a))):(e.sortIndex=s,i(c,e),m||f||(m=!0,k(x))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},853:(e,t,i)=>{"use strict";e.exports=i(234)}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,i),o.loaded=!0,o.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{"use strict";var e=i(43),t=i(391),n=i(314),r=i(579);const o=function(){const e=new URLSearchParams(window.location.search).get("asset");return e?(0,r.jsx)("div",{className:"App specimen-3d-viewer-full-size",children:(0,r.jsx)(n.w,{src:e})}):(0,r.jsx)("h1",{children:"No asset specified."})};t.createRoot(document.getElementById("root")).render((0,r.jsx)(e.StrictMode,{children:(0,r.jsx)(o,{})}))})()})();
//# sourceMappingURL=main.js.map